/**
 * pipe.js - EBU Pipe Data Collection JavaScript Library
 * @version v5.1.1
 * @generated 2019-12-10T09:12:48.857Z
 * @link https://tech.ebu.ch/groups/recsys
 * @license Copyright 2015-2019, EBU
 */
!function(){function e(e){return e?e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""}function l(){return(new Date).getTimezoneOffset()/60}var t,n,o,r,i="do_not_track",a="_pipe",c="_pipe_",u=c+"historyElements",s=void 0!==window.crypto&&void 0!==window.crypto.getRandomValues?function(){var e=new Uint16Array(8);window.crypto.getRandomValues(e);function t(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t}return t(e[0])+t(e[1])+"-"+t(e[2])+"-"+t(e[3])+"-"+t(e[4])+"-"+t(e[5])+t(e[6])+t(e[7])}:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})};"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)===e}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return this.slice(-e.length)===e});function p(e){var t="; "+document.cookie,n="; "+e+"=";if(-1!==t.indexOf(n)){var o=t.split(n);return 2===o.length?o.pop().split(";").shift():void 0}}function d(){return t||(window.location.host.match(/(?:[^.]+\.)?(\w*(?:\.\w*)|localhost|(?:\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}))(:\d*)?$/)||[])[1]}function f(){var e=r||Date.now(),t=d();return document.cookie=a+"_st="+e+";path=/"+(t?";domain="+t:""),_.sessionStartTime=e}function g(){return p(a+"_c")}function m(e,t){var n=t||d(),o=new Date(25353216e5).toUTCString();return e=e||i,document.cookie=a+"_c="+e+";expires="+o+";path=/"+(n?";domain="+n:""),_.cookieId=e}var h=function(e,t,n){e[t]=n};function w(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?"mobile":"desktop"}function v(e){return void 0!==e&&-1<(e.constructor+"").indexOf("String")}function b(){var e=c+"internal__test__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}var y=v(window.EBUPipeQName)&&e(window.EBUPipeQName)||"_pipe",_=function(e){_._handle(arguments)};_.siteKey="",_.userId="",_.peachImplVersion=null,_.collectId="",_.collectStartTime=0,_.sessionStartTime=0,_.cookieId="",_.dataObject={},_.browserDataObject={},_.clientDataObject={},_.qCollect=[],_.qPipe=[],_.enabled=!1,_.connectionIsUp=!0,_.endpoints=["pipe-collect.ebu.io"],_.currentCollectBaseUrl="",_.flags={},_.loaded=!1,_.initialized=!1,_.registered=!1,_.limitDataInFrame=!1,_.__internals={replaceEmptySpaces:e,generateGUID:s,getTimeZone:l},_._printDeviceTypeInDomElement=function(e){return document.getElementById(e[0]).innerHTML=e[1]+w(),!0},_._choose_endpoint=function(){if(0<_.endpoints.length){var e=_.endpoints[0];return e.startsWith("//")||(e="//"+e),e.endsWith("/")||(e+="/"),_.currentCollectBaseUrl=e,!0}return!1},_._load_config=function(){_._choose_endpoint(),_.enabled=!0,_._handleQueue()},_._sendXhr=function(e,t,n,o){var r=e+t,i=new XMLHttpRequest;if(o=void 0===o||o,i.addEventListener("load",function(){_._connectionUp()}),i.addEventListener("error",function(e){_._connectionDown()}),n)try{i.open("POST",r,o),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.send(JSON.stringify(n))}catch(e){_._connectionDown(),_.qCollect.push([t,n])}else try{i.open("GET",r,o),i.send(null)}catch(e){_._connectionDown(),_.qCollect.push([t,n])}return!0},_.register=function(e){return(1==e.length||2==e.length)&&(_.siteKey=e[0],2==e.length&&(_.userId=e[1]),_._load_config(),_.collectId=s(),f(),_.sessionStartTime=parseInt(p(a+"_st")),g()||m(i,o),_.cookieId=g(),_.registered=!0)},_.setUserId=function(e){return 1==e.length&&(_.userId=e[0],!0)},_.setPeachImplVersion=function(e){return 1===e.length&&(_.peachImplVersion=e[0],!0)},_.enableTracking=function(){return g()||n||(n=s(),_.cookieId=n),!n&&g()!==i||m(n||s()),!0},_.disableTracking=function(){return m(i,o),!0},_.setEndpoint=function(e){return!(!e||1!=e.length)&&(e[0].constructor===Array?_.endpoints=e[0]:_.endpoints=[e[0]],!0)},_.setCookiePrefix=function(e){return 1==e.length&&(a=e[0],!0)},_.setCookieDomain=function(e){return 1==e.length&&(t=e[0],!0)},_.setCookieDomain=function(e){return 1==e.length&&(t=e[0],!0)},_.set=function(e){if(1==e.length){if(e[0]){var t=e[0];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(_.dataObject[n]=t[n]);return!0}}else 2==e.length&&v(e[0])&&(_.dataObject[e[0]]=e[1]);return!1},_.setCCookie=function(e){return n=e[0]||i,o=e[1]||d(),m(n,o),_.cookieId=g(),!0},_.setSTCookie=function(e){return r=parseInt(e[0])||Date.now(),f(),!0},_.collect=function(e){if(!_.registered||!_.enabled)return _.enabled||(e.unshift("collect"),_.qPipe.push(e)),!0;if(1!==e.length&&2!==e.length&&3!==e.length)return!1;var t=e[0],n={},o=!0;if(2<=e.length){if(v(e[1]))n.id=e[1];else if(e[1])for(var r in e[1])Object.prototype.hasOwnProperty.call(e[1],r)&&(n[r]=e[1][r]);if(3===e.length)for(var i in e[2])if(Object.prototype.hasOwnProperty.call(e[2],i))switch(i){case"async":o=e[2][i]}}return _._send_action(t,n,o)};var x;_._new=function(){try{var e=window[y];(window[y]=_).collectStartTime=e.startTime||0,e.q&&(_.qPipe=e.q,_._handleQueue()),_.loaded=!0}catch(e){}finally{return!0}},_._handle=function(e){var t=[].slice.call(e),n=t.shift();return typeof _[n]==typeof Function&&_[n](t),!0},_._handleQueue=function(){if(0<_.qPipe.length){var e=_.qPipe;for(_.qPipe=[];0<e.length;){var t=e.shift();_._handle(t)}}},_._putStorage=function(e){if(_.registered&&_.enabled&&b()&&2===e.length){var t=c+e[0],n=e[1];return localStorage.setItem(t,n),!0}return!1},_._getStorage=function(e){var t=null,n=e[1];if(b()&&2===e.length){var o=c+e[0],r=localStorage.getItem(o);if(n&&"function"==typeof n)return r?n(t,r):n(t={message:"No value found for "+e[0]+" (internal "+o+")"},null),!0}else if(n&&"function"==typeof n)return n(t={message:"Browser does not support localStorage"},null),!0;return!1},_._pushHistoryElement=function(e){if(!0!==b()||1!==e.length)return!1;var t=e[0],n=JSON.parse(localStorage.getItem(u));if("[object Array]"===Object.prototype.toString.call(n))for(n.push(t);100<n.length;)n.shift();else n=[t];return localStorage.setItem(u,JSON.stringify(n)),!0},_._getDistinctHistoryElementIds=function(e){var t=null,n=[],o={};if(1===e.length){var r=e[0];if(_.registered&&_.enabled&&!0===b()){var i=JSON.parse(localStorage.getItem(u));if("[object Array]"===Object.prototype.toString.call(i)&&r&&"function"==typeof r){for(var a=0,c=i.length;a<c;++a){var s=i[a].id;o.hasOwnProperty(s)||(n.push(s),o[s]=1)}return r(t,n),!0}}r(t={message:"Unable to build distinct history element ids."},null)}return!1},_._send_action=function(e,t,n){!function(e){var t=document.location;if(t){var n=t.pathname||"";h(e,"page_uri",t.protocol+"//"+t.hostname+n+t.search),h(e,"referrer",document.referrer)}}(_.browserDataObject),function(e){h(e,"id",_.cookieId),h(e,"type","web");var t={};h(e,"device",t),h(t,"type",w()),window.screen&&h(t,"screen_size",window.screen.width+"x"+window.screen.height),window.navigator&&h(t,"language",window.navigator.language||window.navigator.browserLanguage||""),h(t,"timezone",l())}(_.clientDataObject);var o="?s="+_.siteKey,r={peach_schema_version:"1.0.0"};r.session_start_timestamp=_.sessionStartTime;var i=Date.now();r.sent_timestamp=i,r.user_id=_.userId||"unknown","number"==typeof r.user_id&&(r.user_id=_.userId.toString()),_.peachImplVersion&&(r.peach_implementation_version=_.peachImplVersion),r.client=_.clientDataObject;var a={type:e,event_timestamp:i};for(var c in _.browserDataObject&&(a.context=_.browserDataObject),_.dataObject)Object.prototype.hasOwnProperty.call(_.dataObject,c)&&(a[c]=_.dataObject[c]);for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=t[s]);return r.event=a,_._dispatch(o,r,n)},_._dispatch=function(e,t,n){if(g()&&g()!==i){if(window.XMLHttpRequest){var o=_.currentCollectBaseUrl+"v3/collect";return _._sendXhr(o,e,t,n)}return!1}},_._connectionUp=function(){for(_.connectionIsUp=!0;0<_.qCollect.length;){var e=_.qCollect.shift();2===e.length?_._dispatch(e[0],e[1]):3===e.length&&_._dispatch(e[0],e[1],e[2])}},_._connectionDown=function(){_.connectionIsUp=!1},x=_._new,"prerender"!==document.visibilityState&&x()}(window);