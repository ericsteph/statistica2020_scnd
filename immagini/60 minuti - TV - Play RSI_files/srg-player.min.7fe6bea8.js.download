/*! srg-player - 1.13.158 - 2020-02-13*/

!function(){"use strict";function l(r,e){var t;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=r,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!l.notNeeded(r)){for(var n=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=this,a=0,s=n.length;a<s;a++)i[n[a]]=o(i[n[a]],i);u&&(r.addEventListener("mouseover",this.onMouse,!0),r.addEventListener("mousedown",this.onMouse,!0),r.addEventListener("mouseup",this.onMouse,!0)),r.addEventListener("click",this.onClick,!0),r.addEventListener("touchstart",this.onTouchStart,!1),r.addEventListener("touchmove",this.onTouchMove,!1),r.addEventListener("touchend",this.onTouchEnd,!1),r.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(r.removeEventListener=function(e,t,n){var i=Node.prototype.removeEventListener;"click"===e?i.call(r,e,t.hijacked||t,n):i.call(r,e,t,n)},r.addEventListener=function(e,t,n){var i=Node.prototype.addEventListener;"click"===e?i.call(r,e,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),n):i.call(r,e,t,n)}),"function"==typeof r.onclick&&(t=r.onclick,r.addEventListener("click",function(e){t(e)},!1),r.onclick=null)}function o(e,t){return function(){return e.apply(t,arguments)}}}var e=0<=navigator.userAgent.indexOf("Windows Phone"),u=0<navigator.userAgent.indexOf("Android")&&!e,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,c=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),d=o&&/OS [6-7]_\d/.test(navigator.userAgent),r=0<navigator.userAgent.indexOf("BB10");l.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(o&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},l.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!u;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},l.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},l.prototype.determineEventType=function(e){return u&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},l.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},l.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},l.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},l.prototype.onTouchStart=function(e){var t,n,i;if(1<e.targetTouches.length)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],o){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},l.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},l.prototype.onTouchMove=function(e){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},l.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},l.prototype.onTouchEnd=function(e){var t,n,i,r,a,s=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,d&&(a=e.changedTouches[0],(s=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)||s).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=s.tagName.toLowerCase())){if(t=this.findControl(s)){if(this.focus(s),u)return!1;s=t}}else if(this.needsFocus(s))return 100<e.timeStamp-n||o&&window.top!==window&&"input"===i?this.targetElement=null:(this.focus(s),this.sendClick(s,e),o&&"select"===i||(this.targetElement=null,e.preventDefault())),!1;return!(!o||c||!(r=s.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(s)||(e.preventDefault(),this.sendClick(s,e)),!1)},l.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},l.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},l.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},l.prototype.destroy=function(){var e=this.layer;u&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},l.notNeeded=function(e){var t,n,i;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!u)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(31<n&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(r&&10<=(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=i[2]&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},l.attach=function(e,t){return new l(e,t)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return l}):"undefined"!=typeof module&&module.exports?(module.exports=l.attach,module.exports.FastClick=l):window.FastClick=l}(),function(a,i){var c={};function e(n){return function(){var e={method:n},t=Array.prototype.slice.call(arguments);/^get/.test(n)?(c.assert(0<t.length,"Get methods require a callback."),t.unshift(e)):(/^set/.test(n)&&(c.assert(0!==t.length,"Set methods require a value."),e.value=t[0]),t=[e]),this.send.apply(this,t)}}c.DEBUG=!1,c.VERSION="0.0.11",c.CONTEXT="player.js",c.POST_MESSAGE=!!a.postMessage,c.origin=function(e){return"//"===e.substr(0,2)&&(e=a.location.protocol+e),e.split("/").slice(0,3).join("/")},c.addEvent=function(e,t,n){e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)},c.log=function(){c.log.history=c.log.history||[],c.log.history.push(arguments),a.console&&c.DEBUG&&a.console.log(Array.prototype.slice.call(arguments))},c.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},c.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},c.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.isNone=function(e){return null==e},c.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.indexOf=function(e,t){if(null==e)return-1;var n=0,i=e.length;if(Array.prototype.IndexOf&&e.indexOf===Array.prototype.IndexOf)return e.indexOf(t);for(;n<i;n++)if(e[n]===t)return n;return-1},c.assert=function(e,t){if(!e)throw t||"Player.js Assert Failed"},c.Keeper=function(){this.init()},c.Keeper.prototype.init=function(){this.data={}},c.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},c.Keeper.prototype.has=function(e,t){if(!this.data.hasOwnProperty(e))return!1;if(c.isNone(t))return!0;for(var n=this.data[e],i=0;i<n.length;i++)if(n[i].id===t)return!0;return!1},c.Keeper.prototype.add=function(e,t,n,i,r){var a={id:e,event:t,cb:n,ctx:i,one:r};this.has(t)?this.data[t].push(a):this.data[t]=[a]},c.Keeper.prototype.execute=function(e,t,n,i){if(!this.has(e,t))return!1;for(var r=[],a=[],s=0;s<this.data[e].length;s++){var o=this.data[e][s];c.isNone(t)||!c.isNone(t)&&o.id===t?(a.push({cb:o.cb,ctx:o.ctx?o.ctx:i,data:n}),!1===o.one&&r.push(o)):r.push(o)}0===r.length?delete this.data[e]:this.data[e]=r;for(var l=0;l<a.length;l++){var u=a[l];u.cb.call(u.ctx,u.data)}},c.Keeper.prototype.on=function(e,t,n,i){this.add(e,t,n,i,!1)},c.Keeper.prototype.one=function(e,t,n,i){this.add(e,t,n,i,!0)},c.Keeper.prototype.off=function(e,t){var n=[];if(!this.data.hasOwnProperty(e))return n;for(var i=[],r=0;r<this.data[e].length;r++){var a=this.data[e][r];c.isNone(t)||a.cb===t?c.isNone(a.id)||n.push(a.id):i.push(a)}return 0===i.length?delete this.data[e]:this.data[e]=i,n},c.Player=function(e,t){if(!(this instanceof c.Player))return new c.Player(e,t);this.init(e,t)},c.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},c.EVENTS.all=function(){var e=[];for(var t in c.EVENTS)c.has(c.EVENTS,t)&&c.isString(c.EVENTS[t])&&e.push(c.EVENTS[t]);return e},c.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},c.METHODS.all=function(){var e=[];for(var t in c.METHODS)c.has(c.METHODS,t)&&c.isString(c.METHODS[t])&&e.push(c.METHODS[t]);return e},c.READIED=[],c.Player.prototype.init=function(e,t){var n=this;c.isString(e)&&(e=i.getElementById(e)),this.elem=e,this.origin=c.origin(e.src),this.keeper=new c.Keeper,this.isReady=!1,this.queue=[],this.events=c.EVENTS.all(),this.methods=c.METHODS.all(),c.POST_MESSAGE?c.addEvent(a,"message",function(e){n.receive(e)}):c.log("Post Message is not Available."),-1<c.indexOf(c.READIED,e.src)?n.loaded=!0:this.elem.onload=function(){n.loaded=!0}},c.Player.prototype.send=function(e,t,n){if(e.context=c.CONTEXT,e.version=c.VERSION,t){var i=this.keeper.getUUID();e.listener=i,this.keeper.one(i,e.method,t,n)}return this.isReady||"ready"===e.value?(c.log("Player.send",e,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(e),this.origin),!0):(c.log("Player.queue",e),this.queue.push(e),!1)},c.Player.prototype.receive=function(e){if(c.log("Player.receive",e),e.origin!==this.origin)return!1;var t;try{t=JSON.parse(e.data)}catch(e){return!1}if(t.context!==c.CONTEXT)return!1;"ready"===t.event&&t.value&&t.value.src===this.elem.src&&this.ready(t),this.keeper.has(t.event,t.listener)&&this.keeper.execute(t.event,t.listener,t.value,this)},c.Player.prototype.ready=function(e){if(!0===this.isReady)return!1;e.value.events&&(this.events=e.value.events),e.value.methods&&(this.methods=e.value.methods),this.isReady=!0,this.loaded=!0;for(var t=0;t<this.queue.length;t++){var n=this.queue[t];c.log("Player.dequeue",n),"ready"===e.event&&this.keeper.execute(n.event,n.listener,!0,this),this.send(n)}this.queue=[]},c.Player.prototype.on=function(e,t,n){var i=this.keeper.getUUID();return"ready"===e?this.keeper.one(i,e,t,n):this.keeper.on(i,e,t,n),this.send({method:"addEventListener",value:e,listener:i}),!0},c.Player.prototype.off=function(e,t){var n=this.keeper.off(e,t);if(c.log("Player.off",n),0<n.length)for(var i in n)return this.send({method:"removeEventListener",value:e,listener:n[i]}),!0;return!1},c.Player.prototype.supports=function(e,t){c.assert(-1<c.indexOf(["method","event"],e),'evtOrMethod needs to be either "event" or "method" got '+e),t=c.isArray(t)?t:[t];for(var n="event"===e?this.events:this.methods,i=0;i<t.length;i++)if(-1===c.indexOf(n,t[i]))return!1;return!0};for(var t=0,n=c.METHODS.all().length;t<n;t++){var r=c.METHODS.all()[t];c.Player.prototype.hasOwnProperty(r)||(c.Player.prototype[r]=e(r))}c.addEvent(a,"message",function(e){var t;try{t=JSON.parse(e.data)}catch(e){return!1}if(t.context!==c.CONTEXT)return!1;"ready"===t.event&&t.value&&t.value.src&&c.READIED.push(t.value.src)}),c.Receiver=function(e,t){this.init(e,t)},c.Receiver.prototype.init=function(e,t){var n=this;this.isReady=!1,this.origin=c.origin(i.referrer),this.methods={},this.supported={events:e||c.EVENTS.all(),methods:t||c.METHODS.all()},this.eventListeners={},this.reject=!(a.self!==a.top&&c.POST_MESSAGE),this.reject||c.addEvent(a,"message",function(e){n.receive(e)})},c.Receiver.prototype.receive=function(e){if(e.origin!==this.origin)return!1;var t={};if(c.isObject(e.data))t=e.data;else try{t=a.JSON.parse(e.data)}catch(e){c.log("JSON Parse Error",e)}if(c.log("Receiver.receive",e,t),!t.method)return!1;if(t.context!==c.CONTEXT)return!1;if(-1===c.indexOf(c.METHODS.all(),t.method))return this.emit("error",{code:2,msg:'Invalid Method "'+t.method+'"'}),!1;var n=c.isNone(t.listener)?null:t.listener;if("addEventListener"===t.method)this.eventListeners.hasOwnProperty(t.value)?-1===c.indexOf(this.eventListeners[t.value],n)&&this.eventListeners[t.value].push(n):this.eventListeners[t.value]=[n],"ready"===t.value&&this.isReady&&this.ready();else if("removeEventListener"===t.method){if(this.eventListeners.hasOwnProperty(t.value)){var i=c.indexOf(this.eventListeners[t.value],n);-1<i&&this.eventListeners[t.value].splice(i,1),0===this.eventListeners[t.value].length&&delete this.eventListeners[t.value]}}else this.get(t.method,t.value,n)},c.Receiver.prototype.get=function(t,e,n){var i=this;if(!this.methods.hasOwnProperty(t))return this.emit("error",{code:3,msg:'Method Not Supported"'+t+'"'}),!1;var r=this.methods[t];if("get"===t.substr(0,3)){r.call(this,function(e){i.send(t,e,n)})}else r.call(this,e)},c.Receiver.prototype.on=function(e,t){this.methods[e]=t},c.Receiver.prototype.send=function(e,t,n){if(c.log("Receiver.send",e,t,n),this.reject)return c.log("Receiver.send.reject",e,t,n),!1;var i={context:c.CONTEXT,version:c.VERSION,event:e};c.isNone(t)||(i.value=t),c.isNone(n)||(i.listener=n);var r=JSON.stringify(i);a.parent.postMessage(r,""===this.origin?"*":this.origin)},c.Receiver.prototype.emit=function(e,t){if(!this.eventListeners.hasOwnProperty(e))return!1;c.log("Instance.emit",e,t,this.eventListeners[e]);for(var n=0;n<this.eventListeners[e].length;n++){var i=this.eventListeners[e][n];this.send(e,t,i)}return!0},c.Receiver.prototype.ready=function(){c.log("Receiver.ready"),this.isReady=!0;var e={src:a.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",e)||this.send("ready",e)},c.HTML5Adapter=function(e){if(!(this instanceof c.HTML5Adapter))return new c.HTML5Adapter(e);this.init(e)},c.HTML5Adapter.prototype.init=function(t){c.assert(t,"playerjs.VideoJSReceiver requires a video element");var e=this.receiver=new c.Receiver;t.addEventListener("playing",function(){e.emit("play")}),t.addEventListener("pause",function(){e.emit("pause")}),t.addEventListener("ended",function(){e.emit("ended")}),t.addEventListener("timeupdate",function(){e.emit("timeupdate",{seconds:t.currentTime,duration:t.duration})}),t.addEventListener("progress",function(){e.emit("buffered",{percent:t.buffered.length})}),e.on("play",function(){t.play()}),e.on("pause",function(){t.pause()}),e.on("getPaused",function(e){e(t.paused)}),e.on("getCurrentTime",function(e){e(t.currentTime)}),e.on("setCurrentTime",function(e){t.currentTime=e}),e.on("getDuration",function(e){e(t.duration)}),e.on("getVolume",function(e){e(100*t.volume)}),e.on("setVolume",function(e){t.volume=e/100}),e.on("mute",function(){t.muted=!0}),e.on("unmute",function(){t.muted=!1}),e.on("getMuted",function(e){e(t.muted)}),e.on("getLoop",function(e){e(t.loop)}),e.on("setLoop",function(e){t.loop=e})},c.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},c.JWPlayerAdapter=function(e){if(!(this instanceof c.JWPlayerAdapter))return new c.JWPlayerAdapter(e);this.init(e)},c.JWPlayerAdapter.prototype.init=function(t){c.assert(t,"playerjs.JWPlayerAdapter requires a player object");var r=this.receiver=new c.Receiver;this.looped=!1,t.onPause(function(){r.emit("pause")}),t.onPlay(function(){r.emit("play")}),t.onTime(function(e){var t=e.position,n=e.duration;if(!t||!n)return!1;var i={seconds:t,duration:n};r.emit("timeupdate",i)});var e=this;t.onComplete(function(){!0===e.looped?t.seek(0):r.emit("ended")}),t.onError(function(){r.emit("error")}),r.on("play",function(){t.play(!0)}),r.on("pause",function(){t.pause(!0)}),r.on("getPaused",function(e){e(t.getState().toLowerCase()!=="PLAYING".toLowerCase())}),r.on("getCurrentTime",function(e){e(t.getPosition())}),r.on("setCurrentTime",function(e){t.seek(e)}),r.on("getDuration",function(e){e(t.getDuration())}),r.on("getVolume",function(e){e(t.getVolume())}),r.on("setVolume",function(e){t.setVolume(e)}),r.on("mute",function(){t.setMute(!0)}),r.on("unmute",function(){t.setMute(!1)}),r.on("getMuted",function(e){e(!0===t.getMute())}),r.on("getLoop",function(e){e(this.looped)},this),r.on("setLoop",function(e){this.looped=e},this)},c.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},c.MockAdapter=function(){if(!(this instanceof c.MockAdapter))return new c.MockAdapter;this.init()},c.MockAdapter.prototype.init=function(){var n={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){n.interval=setInterval(function(){n.currentTime+=.25,n.timeupdate({seconds:n.currentTime,duration:n.duration})},250),n.playing=!0},pause:function(){clearInterval(n.interval),n.playing=!1}},e=this.receiver=new c.Receiver;e.on("play",function(){var t=this;n.play(),this.emit("play"),n.timeupdate=function(e){t.emit("timeupdate",e)}}),e.on("pause",function(){n.pause(),this.emit("pause")}),e.on("getPaused",function(e){e(!n.playing)}),e.on("getCurrentTime",function(e){e(n.currentTime)}),e.on("setCurrentTime",function(e){n.currentTime=e}),e.on("getDuration",function(e){e(n.duration)}),e.on("getVolume",function(e){e(n.volume)}),e.on("setVolume",function(e){n.volume=e}),e.on("mute",function(){n.mute=!0}),e.on("unmute",function(){n.mute=!1}),e.on("getMuted",function(e){e(n.mute)}),e.on("getLoop",function(e){e(n.loop)}),e.on("setLoop",function(e){n.loop=e})},c.MockAdapter.prototype.ready=function(){this.receiver.ready()},c.VideoJSAdapter=function(e){if(!(this instanceof c.VideoJSAdapter))return new c.VideoJSAdapter(e);this.init(e)},c.VideoJSAdapter.prototype.init=function(r){c.assert(r,"playerjs.VideoJSReceiver requires a player object");var a=this.receiver=new c.Receiver;r.on("pause",function(){a.emit("pause")}),r.on("play",function(){a.emit("play")}),r.on("timeupdate",function(e){var t=r.currentTime(),n=r.duration();if(!t||!n)return!1;var i={seconds:t,duration:n};a.emit("timeupdate",i)}),r.on("ended",function(){a.emit("ended")}),r.on("error",function(){a.emit("error")}),a.on("play",function(){r.play()}),a.on("pause",function(){r.pause()}),a.on("getPaused",function(e){e(r.paused())}),a.on("getCurrentTime",function(e){e(r.currentTime())}),a.on("setCurrentTime",function(e){r.currentTime(e)}),a.on("getDuration",function(e){e(r.duration())}),a.on("getVolume",function(e){e(100*r.volume())}),a.on("setVolume",function(e){r.volume(e/100)}),a.on("mute",function(){r.volume(0)}),a.on("unmute",function(){r.volume(1)}),a.on("getMuted",function(e){e(0===r.volume())}),a.on("getLoop",function(e){e(r.loop())}),a.on("setLoop",function(e){r.loop(e)})},c.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()},"function"==typeof define&&define.amd?define(function(){return c}):"object"==typeof module&&module.exports?module.exports=c:a.playerjs=c}(window,document),function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.S=e()}}(function(){return function r(a,s,o){function l(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);throw new Error("Cannot find module '"+n+"'")}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return l(t||e)},i,i.exports,r,a,s,o)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<o.length;e++)l(o[e]);return l}({1:[function(e,t,n){t.exports=function(e,t){for(var n=0,i=e.indexOf(t);0<=i;)n+=1,i=e.indexOf(t,i+1);return n}},{}],2:[function(e,t,n){t.exports=function(e,t,n,i){void 0===n&&(n=-1);var r=e.split(t),a=r.slice(0,n),s=r.slice(n);return r=0===s.length?a:a.concat(s.join(t)),void 0===i?r:i<0?r.slice(i):r.slice(0,i)}},{}],3:[function(e,t,n){t.exports=function(e,t,n,i){void 0===n&&(n=-1);void 0===i&&(i=0);for(var r=[e],a=e.length-1;0<=a;a--)0===r[0].slice(a).indexOf(t)&&(r.length<=n||-1===n)&&(r.splice(1,0,r[0].slice(a+t.length)),r[0]=r[0].slice(0,a));return 0<=i?r.slice(-i):r.slice(0,-i)}},{}],4:[function(m,g,e){(function(){"use strict";var r={},t={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","ẞ":"SS","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ß":"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"};function n(e,t){e.s=null!=t?"string"==typeof t?t:t.toString():t,null!=(e.orig=t)?e.__defineGetter__?e.__defineGetter__("length",function(){return e.s.length}):e.length=t.length:e.length=-1}function f(e){n(this,e)}var s=String.prototype,i=f.prototype={between:function(e,t){var n=this.s,i=n.indexOf(e),r=n.indexOf(t,i+e.length);return-1==r&&null!=t?new this.constructor(""):-1==r&&null==t?new this.constructor(n.substring(i+e.length)):new this.constructor(n.slice(i+e.length,r))},camelize:function(){var e=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""});return new this.constructor(e)},capitalize:function(){return new this.constructor(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(e){return this.s.charAt(e)},chompLeft:function(e){var t=this.s;return 0===t.indexOf(e)?(t=t.slice(e.length),new this.constructor(t)):this},chompRight:function(e){if(this.endsWith(e)){var t=this.s;return t=t.slice(0,t.length-e.length),new this.constructor(t)}return this},collapseWhitespace:function(){var e=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new this.constructor(e)},contains:function(e){return 0<=this.s.indexOf(e)},count:function(e){return m("./_count")(this.s,e)},dasherize:function(){var e=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new this.constructor(e)},equalsIgnoreCase:function(e){return this.s.toLowerCase()==e.toLowerCase()},latinise:function(){var e=this.replace(/[^A-Za-z0-9\[\] ]/g,function(e){return t[e]||e});return new this.constructor(e)},decodeHtmlEntities:function(){var e=this.s;return e=e.replace(/&#(\d+);?/g,function(e,t){return String.fromCharCode(t)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/&([^;\W]+;?)/g,function(e,t){var n=t.replace(/;$/,""),i=r[t]||t.match(/;$/)&&r[n];return"number"==typeof i?String.fromCharCode(i):"string"==typeof i?i:e}),new this.constructor(e)},endsWith:function(){for(var e=Array.prototype.slice.call(arguments,0),t=0;t<e.length;++t){var n=this.s.length-e[t].length;if(0<=n&&this.s.indexOf(e[t],n)===n)return!0}return!1},escapeHTML:function(){return new this.constructor(this.s.replace(/[&<>"']/g,function(e){return"&"+h[e]+";"}))},ensureLeft:function(e){var t=this.s;return 0===t.indexOf(e)?this:new this.constructor(e+t)},ensureRight:function(e){var t=this.s;return this.endsWith(e)?this:new this.constructor(t+e)},humanize:function(){if(null===this.s||void 0===this.s)return new this.constructor("");var e=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new this.constructor(e)},isAlpha:function(){return!/[^a-z\xDF-\xFF]|^$/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xDF-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s||/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(e){if(0<=e){var t=this.s.substr(0,e);return new this.constructor(t)}return this.right(-e)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(e,t){if(null==t&&(t=" "),this.s.length>=e)return new this.constructor(this.s);e-=this.s.length;var n=Array(Math.ceil(e/2)+1).join(t),i=Array(Math.floor(e/2)+1).join(t);return new this.constructor(n+this.s+i)},padLeft:function(e,t){return null==t&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(Array(e-this.s.length+1).join(t)+this.s)},padRight:function(e,t){return null==t&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(this.s+Array(e-this.s.length+1).join(t))},parseCSV:function(e,t,n,i){e=e||",",n=n||"\\",void 0===t&&(t='"');var r=0,a=[],s=[],o=this.s.length,l=!1,u=!1,c=this,d=function(e){return c.s.charAt(e)};if(void 0!==i)var h=[];for(t||(l=!0);r<o;){var f=d(r);switch(f){case n:if(l&&(n!==t||d(r+1)===t)){r+=1,a.push(d(r));break}if(n!==t)break;case t:l=!l;break;case e:u&&(u=l=!1),l&&t?a.push(f):(s.push(a.join("")),a.length=0);break;case i:u?(u=l=!1,s.push(a.join("")),h.push(s),s=[],a.length=0):l?a.push(f):h&&(s.push(a.join("")),h.push(s),s=[],a.length=0);break;case" ":l&&a.push(f);break;default:l?a.push(f):f!==t&&(a.push(f),u=l=!0)}r+=1}return s.push(a.join("")),h?(h.push(s),h):s},replaceAll:function(e,t){var n=this.s.split(e).join(t);return new this.constructor(n)},splitLeft:function(e,t,n){return m("./_splitLeft")(this.s,e,t,n)},splitRight:function(e,t,n){return m("./_splitRight")(this.s,e,t,n)},strip:function(){for(var e=this.s,t=0,n=arguments.length;t<n;t++)e=e.split(arguments[t]).join("");return new this.constructor(e)},stripLeft:function(e){var t,n,i=d(this.s);return n=void 0===e?/^\s+/g:(t=c(e),new RegExp("^["+t+"]+","g")),new this.constructor(i.replace(n,""))},stripRight:function(e){var t,n,i=d(this.s);return n=void 0===e?/\s+$/g:(t=c(e),new RegExp("["+t+"]+$","g")),new this.constructor(i.replace(n,""))},right:function(e){if(0<=e){var t=this.s.substr(this.s.length-e,e);return new this.constructor(t)}return this.left(-e)},setValue:function(e){return n(this,e),this},slugify:function(){var e=new f(new f(this.s).latinise().s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===e.charAt(0)&&(e=e.substr(1)),new this.constructor(e)},startsWith:function(){for(var e=Array.prototype.slice.call(arguments,0),t=0;t<e.length;++t)if(0===this.s.lastIndexOf(e[t],0))return!0;return!1},stripPunctuation:function(){return new this.constructor(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var t=this.s;return function(e,t){var n,i=[];for(n=0;n<e.length;n++)i.push(e[n]),t&&t.call(e,e[n],n)}(0<arguments.length?arguments:[""],function(e){t=t.replace(RegExp("</?"+e+"[^<>]*>","gi"),"")}),new this.constructor(t)},template:function(i,r,a){var s=this.s,e=(a=a||l.TMPL_CLOSE,(r=r||l.TMPL_OPEN).replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$")),t=a.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),n=new RegExp(e+"(.+?)"+t,"g");return(s.match(n)||[]).forEach(function(e){var t=e.substring(r.length,e.length-a.length).trim(),n=void 0===i[t]?"":i[t];s=s.replace(e,n)}),new this.constructor(s)},times:function(e){return new this.constructor(new Array(e+1).join(this.s))},titleCase:function(){var e=this.s;return e&&(e=e.replace(/(^[a-z]| [a-z]|-[a-z]|_[a-z])/g,function(e){return e.toUpperCase()})),new this.constructor(e)},toBoolean:function(){if("string"!=typeof this.orig)return!0===this.orig||1===this.orig;var e=this.s.toLowerCase();return"true"===e||"yes"===e||"on"===e||"1"===e},toFloat:function(e){var t=parseFloat(this.s);return e?parseFloat(t.toFixed(e)):t},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var e;return e=void 0===s.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new this.constructor(e)},trimLeft:function(){var e;return e=s.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new this.constructor(e)},trimRight:function(){var e;return e=s.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new this.constructor(e)},truncate:function(e,t){var n=this.s;if(e=~~e,t=t||"...",n.length<=e)return new this.constructor(n);var i=n.slice(0,e+1).replace(/.(?=\W*\w*$)/g,function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "});return((i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):new f(i.slice(0,i.length-1)).trimRight().s)+t).length>n.length?new f(n):new f(n.slice(0,i.length)+t)},toCSV:function(){var e=",",t='"',n="\\",i=!0,r=!1,a=[];if("object"==typeof arguments[0]?(e=arguments[0].delimiter||e,e=arguments[0].separator||e,t=arguments[0].qualifier||t,i=!!arguments[0].encloseNumbers,n=arguments[0].escape||n,r=!!arguments[0].keys):"string"==typeof arguments[0]&&(e=arguments[0]),"string"==typeof arguments[1]&&(t=arguments[1]),null===arguments[1]&&(t=null),this.orig instanceof Array)a=this.orig;else for(var s in this.orig)this.orig.hasOwnProperty(s)&&(r?a.push(s):a.push(this.orig[s]));for(var o,l=n+t,u=[],c=0;c<a.length;++c){var d=null!==(o=t)&&""!==o;if("number"==typeof a[c]&&(d&=i),d&&u.push(t),null!==a[c]&&void 0!==a[c]){var h=new f(a[c]).replaceAll(t,l).s;u.push(h)}else u.push("");d&&u.push(t),e&&u.push(e)}return u.length=u.length-1,new this.constructor(u.join(""))},toString:function(){return this.s},underscore:function(){var e=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new this.constructor(e)},unescapeHTML:function(){return new this.constructor(this.s.replace(/\&([^;]+);/g,function(e,t){var n;return t in u?u[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))},valueOf:function(){return this.s.valueOf()},wrapHTML:function(e,t){var n=this.s,i=null==e?"span":e,r="";if("object"==typeof t)for(var a in t)r+=" "+a+'="'+new this.constructor(t[a]).escapeHTML()+'"';return n="".concat("<",i,r,">",this,"</",i,">"),new this.constructor(n)}},a=[];var o=function(){for(var e=function(){var e=[];{if(Object.getOwnPropertyNames)return(e=Object.getOwnPropertyNames(s)).splice(e.indexOf("valueOf"),1),e.splice(e.indexOf("toString"),1),e;var t={};for(var n in String.prototype)t[n]=n;for(var n in Object.prototype)delete t[n];for(var n in t)e.push(n);return e}}(),t={},n=0;n<e.length;++n){var i=e[n];if("to"!==i&&"toEnd"!==i){var r=s[i];try{var a=typeof r.apply("teststring");t[i]=a}catch(e){}}}return t}();for(var e in o)!function(e){var t=s[e];"function"==typeof t&&(i[e]||("string"===o[e]?i[e]=function(){return new this.constructor(t.apply(this,arguments))}:i[e]=t))}(e);function l(e){return new f(e)}i.repeat=i.times,i.include=i.contains,i.toInteger=i.toInt,i.toBool=i.toBoolean,i.decodeHTMLEntities=i.decodeHtmlEntities,i.constructor=f,l.extendPrototype=function(){for(var e in i)!function(e){var t=i[e];s.hasOwnProperty(e)||(a.push(e),s[e]=function(){return String.prototype.s=this,t.apply(this,arguments)})}(e)},l.restorePrototype=function(){for(var e=0;e<a.length;++e)delete String.prototype[a[e]];a.length=0},l.VERSION="3.3.3",l.TMPL_OPEN="{{",l.TMPL_CLOSE="}}",l.ENTITIES=r,void 0!==g&&void 0!==g.exports?g.exports=l:window.S=l;var u={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"};function c(e){var t,n,i=[],r=/^[A-Za-z0-9]+$/;for(e=d(e),n=0;n<e.length;++n)t=e.charAt(n),r.test(t)?i.push(t):"\\000"===t?i.push("\\000"):i.push("\\"+t);return i.join("")}function d(e){return null==e?"":""+e}var h={};for(var p in u)h[u[p]]=p;r={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}).call(this)},{"./_count":1,"./_splitLeft":2,"./_splitRight":3}]},{},[4])(4)}),function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(this,function(o,t,u,n){"use strict";var i=n&&n.URI;function v(e,t){var n=1<=arguments.length,i=2<=arguments.length;if(!(this instanceof v))return n?i?new v(e,t):new v(e):new v;if(void 0===e){if(n)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&n)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}v.version="1.18.10";var e=v.prototype,c=Object.prototype.hasOwnProperty;function l(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function d(e){return"Array"===s(e)}function h(e,t){var n,i,r={};if("RegExp"===s(t))r=null;else if(d(t))for(n=0,i=t.length;n<i;n++)r[t[n]]=!0;else r[t]=!0;for(n=0,i=e.length;n<i;n++){(r&&void 0!==r[e[n]]||!r&&t.test(e[n]))&&(e.splice(n,1),i--,n--)}return e}function f(e,t){var n,i;if(d(t)){for(n=0,i=t.length;n<i;n++)if(!f(e,t[n]))return!1;return!0}var r=s(t);for(n=0,i=e.length;n<i;n++)if("RegExp"===r){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function p(e,t){if(!d(e)||!d(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function m(e){return e.replace(/^\/+|\/+$/g,"")}function r(e){return escape(e)}function a(e){return encodeURIComponent(e).replace(/[!'()*]/g,r).replace(/\*/g,"%2A")}v._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:v.duplicateQueryParameters,escapeQuerySpace:v.escapeQuerySpace}},v.duplicateQueryParameters=!1,v.escapeQuerySpace=!0,v.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,v.idn_expression=/[^a-z0-9\.-]/i,v.punycode_expression=/(xn--)/i,v.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,v.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,v.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},v.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},v.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,v.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},v.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return v.domAttributes[t]}},v.encode=a,v.decode=decodeURIComponent,v.iso8859=function(){v.encode=escape,v.decode=unescape},v.unicode=function(){v.encode=a,v.decode=decodeURIComponent},v.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},v.encodeQuery=function(e,t){var n=v.encode(e+"");return void 0===t&&(t=v.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},v.decodeQuery=function(t,e){t+="",void 0===e&&(e=v.escapeQuerySpace);try{return v.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var g,_={encode:"encode",decode:"decode"},y=function(n,i){return function(t){try{return v[i](t+"").replace(v.characters[n][i].expression,function(e){return v.characters[n][i].map[e]})}catch(e){return t}}};for(g in _)v[g+"PathSegment"]=y("pathname",_[g]),v[g+"UrnPathSegment"]=y("urnpath",_[g]);var x=function(a,s,o){return function(e){var t;t=o?function(e){return v[s](v[o](e))}:v[s];for(var n=(e+"").split(a),i=0,r=n.length;i<r;i++)n[i]=t(n[i]);return n.join(a)}};function b(n){return function(e,t){return void 0===e?this._parts[n]||"":(this._parts[n]=e||null,this.build(!t),this)}}function T(n,i){return function(e,t){return void 0===e?this._parts[n]||"":(null!==e&&(e+="").charAt(0)===i&&(e=e.substring(1)),this._parts[n]=e,this.build(!t),this)}}v.decodePath=x("/","decodePathSegment"),v.decodeUrnPath=x(":","decodeUrnPathSegment"),v.recodePath=x("/","encodePathSegment","decode"),v.recodeUrnPath=x(":","encodeUrnPathSegment","decode"),v.encodeReserved=y("reserved","encode"),v.parse=function(e,t){var n;return t||(t={}),-1<(n=e.indexOf("#"))&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),-1<(n=e.indexOf("?"))&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=v.parseAuthority(e,t)):-1<(n=e.indexOf(":"))&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(v.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=v.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0)),t.path=e,t},v.parseHost=function(e,t){var n,i,r=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===r&&(r=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,r)||null,"/"===t.port&&(t.port=null);else{var a=e.indexOf(":"),s=e.indexOf("/"),o=e.indexOf(":",a+1);-1!==o&&(-1===s||o<s)?(t.hostname=e.substring(0,r)||null,t.port=null):(i=e.substring(0,r).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)}return t.hostname&&"/"!==e.substring(r).charAt(0)&&(r++,e="/"+e),e.substring(r)||"/"},v.parseAuthority=function(e,t){return e=v.parseUserinfo(e,t),v.parseHost(e,t)},v.parseUserinfo=function(e,t){var n,i=e.indexOf("/"),r=e.lastIndexOf("@",-1<i?i:e.length-1);return-1<r&&(-1===i||r<i)?(n=e.substring(0,r).split(":"),t.username=n[0]?v.decode(n[0]):null,n.shift(),t.password=n[0]?v.decode(n.join(":")):null,e=e.substring(r+1)):(t.username=null,t.password=null),e},v.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,i,r,a={},s=e.split("&"),o=s.length,l=0;l<o;l++)n=s[l].split("="),i=v.decodeQuery(n.shift(),t),r=n.length?v.decodeQuery(n.join("="),t):null,c.call(a,i)?("string"!=typeof a[i]&&null!==a[i]||(a[i]=[a[i]]),a[i].push(r)):a[i]=r;return a},v.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=v.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},v.buildHost=function(e){var t="";return e.hostname?(v.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},v.buildAuthority=function(e){return v.buildUserinfo(e)+v.buildHost(e)},v.buildUserinfo=function(e){var t="";return e.username&&(t+=v.encode(e.username)),e.password&&(t+=":"+v.encode(e.password)),t&&(t+="@"),t},v.buildQuery=function(e,t,n){var i,r,a,s,o="";for(r in e)if(c.call(e,r)&&r)if(d(e[r]))for(i={},a=0,s=e[r].length;a<s;a++)void 0!==e[r][a]&&void 0===i[e[r][a]+""]&&(o+="&"+v.buildQueryParameter(r,e[r][a],n),!0!==t&&(i[e[r][a]+""]=!0));else void 0!==e[r]&&(o+="&"+v.buildQueryParameter(r,e[r],n));return o.substring(1)},v.buildQueryParameter=function(e,t,n){return v.encodeQuery(e,n)+(null!==t?"="+v.encodeQuery(t,n):"")},v.addQuery=function(e,t,n){if("object"==typeof t)for(var i in t)c.call(t,i)&&v.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),d(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}},v.removeQuery=function(e,t,n){var i,r,a;if(d(t))for(i=0,r=t.length;i<r;i++)e[t[i]]=void 0;else if("RegExp"===s(t))for(a in e)t.test(a)&&(e[a]=void 0);else if("object"==typeof t)for(a in t)c.call(t,a)&&v.removeQuery(e,a,t[a]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===s(n)?!d(e[t])&&n.test(e[t])?e[t]=void 0:e[t]=h(e[t],n):e[t]!==String(n)||d(n)&&1!==n.length?d(e[t])&&(e[t]=h(e[t],n)):e[t]=void 0:e[t]=void 0}},v.hasQuery=function(e,t,n,i){switch(s(t)){case"String":break;case"RegExp":for(var r in e)if(c.call(e,r)&&t.test(r)&&(void 0===n||v.hasQuery(e,r,n)))return!0;return!1;case"Object":for(var a in t)if(c.call(t,a)&&!v.hasQuery(e,a,t[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(s(n)){case"Undefined":return t in e;case"Boolean":return n===Boolean(d(e[t])?e[t].length:e[t]);case"Function":return!!n(e[t],t,e);case"Array":return!!d(e[t])&&(i?f:p)(e[t],n);case"RegExp":return d(e[t])?!!i&&f(e[t],n):Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return d(e[t])?!!i&&f(e[t],n):e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},v.joinPaths=function(){for(var e=[],t=[],n=0,i=0;i<arguments.length;i++){var r=new v(arguments[i]);e.push(r);for(var a=r.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&t.push(a[s]),a[s]&&n++}if(!t.length||!n)return new v("");var o=new v("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||o.path("/"+o.path()),o.normalize()},v.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return n<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(n)&&"/"===t.charAt(n)||(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},v.withinString=function(e,t,n){n||(n={});var i=n.start||v.findUri.start,r=n.end||v.findUri.end,a=n.trim||v.findUri.trim,s=n.parens||v.findUri.parens,o=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var l=i.exec(e);if(!l)break;var u=l.index;if(n.ignoreHtml){var c=e.slice(Math.max(u-3,0),u);if(c&&o.test(c))continue}for(var d=u+e.slice(u).search(r),h=e.slice(u,d),f=-1;;){var p=s.exec(h);if(!p)break;var m=p.index+p[0].length;f=Math.max(f,m)}if(!((h=-1<f?h.slice(0,f)+h.slice(f).replace(a,""):h.replace(a,"")).length<=l[0].length||n.ignore&&n.ignore.test(h))){var g=t(h,u,d=u+h.length,e);void 0!==g?(g=String(g),e=e.slice(0,u)+g+e.slice(d),i.lastIndex=u+g.length):i.lastIndex=d}}return i.lastIndex=0,e},v.ensureValidHostname=function(e){if(e.match(v.invalid_hostname_characters)){if(!o)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(o.toASCII(e).match(v.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},v.noConflict=function(e){if(e){var t={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(t.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(t.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=n.SecondLevelDomains.noConflict()),t}return n.URI===this&&(n.URI=i),this},e.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=v.build(this._parts),this._deferred_build=!1),this},e.clone=function(){return new v(this)},e.valueOf=e.toString=function(){return this.build(!1)._string},e.protocol=b("protocol"),e.username=b("username"),e.password=b("password"),e.hostname=b("hostname"),e.port=b("port"),e.query=T("query","?"),e.fragment=T("fragment","#"),e.search=function(e,t){var n=this.query(e,t);return"string"==typeof n&&n.length?"?"+n:n},e.hash=function(e,t){var n=this.fragment(e,t);return"string"==typeof n&&n.length?"#"+n:n},e.pathname=function(e,t){if(void 0!==e&&!0!==e)return this._parts.urn?this._parts.path=e?v.recodeUrnPath(e):"":this._parts.path=e?v.recodePath(e):"/",this.build(!t),this;var n=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?v.decodeUrnPath:v.decodePath)(n):n},e.path=e.pathname,e.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=v._parts();var i=e instanceof v,r="object"==typeof e&&(e.hostname||e.path||e.pathname);e.nodeName&&(e=e[v.getDomAttribute(e)]||"",r=!1);if(!i&&r&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=v.parse(String(e),this._parts);else{if(!i&&!r)throw new TypeError("invalid input");var a=i?e._parts:e;for(n in a)c.call(this._parts,n)&&(this._parts[n]=a[n])}return this.build(!t),this},e.is=function(e){var t=!1,n=!1,i=!1,r=!1,a=!1,s=!1,o=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,n=v.ip4_expression.test(this._parts.hostname),i=v.ip6_expression.test(this._parts.hostname),a=(r=!(t=n||i))&&u&&u.has(this._parts.hostname),s=r&&v.idn_expression.test(this._parts.hostname),o=r&&v.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return r;case"sld":return a;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return i;case"idn":return s;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return o}return null};var S=e.protocol,E=e.port,w=e.hostname;e.protocol=function(e,t){if(void 0!==e&&e&&!(e=e.replace(/:(\/\/)?$/,"")).match(v.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return S.call(this,e,t)},e.scheme=e.protocol,e.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError('Port "'+e+'" contains characters other than [0-9]');return E.call(this,e,t)},e.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={};if("/"!==v.parseHost(e,n))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=n.hostname}return w.call(this,e,t)},e.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var i=v(e);return this.protocol(i.protocol()).authority(i.authority()).build(!t),this},e.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?v.buildHost(this._parts):"";if("/"!==v.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},e.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?v.buildAuthority(this._parts):"";if("/"!==v.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},e.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e)return"@"!==e[e.length-1]&&(e+="@"),v.parseUserinfo(e,this._parts),this.build(!t),this;var n=v.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n},e.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=v.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},e.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,r=this._parts.hostname.substring(0,i),a=new RegExp("^"+l(r));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&v.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},e.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(v.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var r=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(r,e)}return this.build(!t),this},e.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(n+1);return!0!==t&&u&&u.list[i.toLowerCase()]&&u.get(this._parts.hostname)||i}var r;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!u||!u.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');r=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");r=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,e)}return this.build(!t),this},e.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?v.decodePath(i):i}var r=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,r),s=new RegExp("^"+l(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=v.recodePath(e),this._parts.path=this._parts.path.replace(s,e),this.build(!t),this},e.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return e?v.decodePathSegment(i):i}var r=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(r=!0);var a=new RegExp(l(this.filename())+"$");return e=v.recodePath(e),this._parts.path=this._parts.path.replace(a,e),r?this.normalizePath(t):this.build(!t),this},e.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,r=this.filename(),a=r.lastIndexOf(".");return-1===a?"":(n=r.substring(a+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",e?v.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var s,o=this.suffix();if(o)s=e?new RegExp(l(o)+"$"):new RegExp(l("."+o)+"$");else{if(!e)return this;this._parts.path+="."+v.recodePath(e)}return s&&(e=v.recodePath(e),this._parts.path=this._parts.path.replace(s,e)),this.build(!t),this},e.segment=function(e,t,n){var i=this._parts.urn?":":"/",r=this.path(),a="/"===r.substring(0,1),s=r.split(i);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(a&&s.shift(),e<0&&(e=Math.max(s.length+e,0)),void 0===t)return void 0===e?s:s[e];if(null===e||void 0===s[e])if(d(t)){s=[];for(var o=0,l=t.length;o<l;o++)(t[o].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(m(t[o])))}else(t||"string"==typeof t)&&(t=m(t),""===s[s.length-1]?s[s.length-1]=t:s.push(t));else t?s[e]=m(t):s.splice(e,1);return a&&s.unshift(""),this.path(s.join(i),n)},e.segmentCoded=function(e,t,n){var i,r,a;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(d(i=this.segment(e,t,n)))for(r=0,a=i.length;r<a;r++)i[r]=v.decode(i[r]);else i=void 0!==i?v.decode(i):void 0;return i}if(d(t))for(r=0,a=t.length;r<a;r++)t[r]=v.encode(t[r]);else t="string"==typeof t||t instanceof String?v.encode(t):t;return this.segment(e,t,n)};var M=e.query;return e.query=function(e,t){if(!0===e)return v.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"!=typeof e)return void 0!==e&&"string"!=typeof e?(this._parts.query=v.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):M.call(this,e,t);var n=v.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=v.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this},e.setQuery=function(e,t,n){var i=v.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var r in e)c.call(e,r)&&(i[r]=e[r])}return this._parts.query=v.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},e.addQuery=function(e,t,n){var i=v.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return v.addQuery(i,e,void 0===t?null:t),this._parts.query=v.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},e.removeQuery=function(e,t,n){var i=v.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return v.removeQuery(i,e,t),this._parts.query=v.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},e.hasQuery=function(e,t,n){var i=v.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return v.hasQuery(i,e,t,n)},e.setSearch=e.setQuery,e.addSearch=e.addQuery,e.removeSearch=e.removeQuery,e.hasSearch=e.hasQuery,e.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},e.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},e.normalizeHostname=function(e){return this._parts.hostname&&(this.is("IDN")&&o?this._parts.hostname=o.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!e)),this},e.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===v.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},e.normalizePath=function(e){var t,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=v.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var i,r,a="";for("/"!==(n=v.recodePath(n)).charAt(0)&&(t=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(a=n.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(i=n.search(/\/\.\.(\/|$)/));)n=0!==i?(-1===(r=n.substring(0,i).lastIndexOf("/"))&&(r=i),n.substring(0,r)+n.substring(i+3)):n.substring(3);return t&&this.is("relative")&&(n=a+n.substring(1)),this._parts.path=n,this.build(!e),this},e.normalizePathname=e.normalizePath,e.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(v.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},e.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},e.normalizeSearch=e.normalizeQuery,e.normalizeHash=e.normalizeFragment,e.iso8859=function(){var e=v.encode,t=v.decode;v.encode=escape,v.decode=decodeURIComponent;try{this.normalize()}finally{v.encode=e,v.decode=t}return this},e.unicode=function(){var e=v.encode,t=v.decode;v.encode=a,v.decode=unescape;try{this.normalize()}finally{v.encode=e,v.decode=t}return this},e.readable=function(){var e=this.clone();e.username("").password("").normalize();var t="";if(e._parts.protocol&&(t+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&o?(t+=o.toUnicode(e._parts.hostname),e._parts.port&&(t+=":"+e._parts.port)):t+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(t+="/"),t+=e.path(!0),e._parts.query){for(var n="",i=0,r=e._parts.query.split("&"),a=r.length;i<a;i++){var s=(r[i]||"").split("=");n+="&"+v.decodeQuery(s[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==s[1]&&(n+="="+v.decodeQuery(s[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}t+="?"+n.substring(1)}return t+=v.decodeQuery(e.hash(),!0)},e.absoluteTo=function(e){var t,n,i,r=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof v||(e=new v(e)),r._parts.protocol)return r;if(r._parts.protocol=e._parts.protocol,this._parts.hostname)return r;for(n=0;i=a[n];n++)r._parts[i]=e._parts[i];return r._parts.path?(".."===r._parts.path.substring(-2)&&(r._parts.path+="/"),"/"!==r.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),r._parts.path=(t?t+"/":"")+r._parts.path,r.normalizePath())):(r._parts.path=e._parts.path,r._parts.query||(r._parts.query=e._parts.query)),r.build(),r},e.relativeTo=function(e){var t,n,i,r,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new v(e).normalize(),t=s._parts,n=e._parts,r=s.path(),a=e.path(),"/"!==r.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==n.hostname||t.port!==n.port)return s.build();if(t.hostname=null,t.port=null,r===a)return t.path="",s.build();if(!(i=v.commonPath(r,a)))return s.build();var o=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=o+t.path.substring(i.length)||"./",s.build()},e.equals=function(e){var t,n,i,r,a,s=this.clone(),o=new v(e),l={};if(s.normalize(),o.normalize(),s.toString()===o.toString())return!0;if(i=s.query(),r=o.query(),s.query(""),o.query(""),s.toString()!==o.toString())return!1;if(i.length!==r.length)return!1;for(a in t=v.parseQuery(i,this._parts.escapeQuerySpace),n=v.parseQuery(r,this._parts.escapeQuerySpace),t)if(c.call(t,a)){if(d(t[a])){if(!p(t[a],n[a]))return!1}else if(t[a]!==n[a])return!1;l[a]=!0}for(a in n)if(c.call(n,a)&&!l[a])return!1;return!0},e.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},e.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},v});var FlashDetect=new function(){var h=this;h.installed=!1,h.raw="",h.major=-1,h.minor=-1,h.revision=-1,h.revisionStr="";var f=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(e){return n(e)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(e){var t="6,0,21";try{e.AllowScriptAccess="always",t=n(e)}catch(e){}return t}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(e){return n(e)}}],n=function(e){var t=-1;try{t=e.GetVariable("$version")}catch(e){}return t},p=function(e){var t=-1;try{t=new ActiveXObject(e)}catch(e){t={activeXError:!0}}return t},m=function(e){return parseInt(e.replace(/[a-zA-Z]/g,""),10)||h.revision};h.majorAtLeast=function(e){return h.major>=e},h.minorAtLeast=function(e){return h.minor>=e},h.revisionAtLeast=function(e){return h.revision>=e},h.versionAtLeast=function(e){var t=[h.major,h.minor,h.revision],n=Math.min(t.length,arguments.length);for(i=0;i<n;i++){if(t[i]>=arguments[i]){if(i+1<n&&t[i]==arguments[i])continue;return!0}return!1}},h.FlashDetect=function(){if(navigator.plugins&&0<navigator.plugins.length){var e="application/x-shockwave-flash",t=navigator.mimeTypes;if(t&&t[e]&&t[e].enabledPlugin&&t[e].enabledPlugin.description){var n=t[e].enabledPlugin.description,i=(u=(l=n).split(/ +/),c=u[2].split(/\./),d=u[3],{raw:l,major:parseInt(c[0],10),minor:parseInt(c[1],10),revisionStr:d,revision:m(d)});h.raw=i.raw,h.major=i.major,h.minor=i.minor,h.revisionStr=i.revisionStr,h.revision=i.revision,h.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript){n=-1;for(var r=0;r<f.length&&-1==n;r++){var a=p(f[r].name);if(!a.activeXError&&(h.installed=!0,-1!=(n=f[r].version(a)))){i=(o=void 0,o=(s=n).split(","),{raw:s,major:parseInt(o[0].split(" ")[1],10),minor:parseInt(o[1],10),revision:parseInt(o[2],10),revisionStr:o[2]});h.raw=i.raw,h.major=i.major,h.minor=i.minor,h.revision=i.revision,h.revisionStr=i.revisionStr}}}var s,o,l,u,c,d}()};FlashDetect.JS_RELEASE="1.0.4","function"==typeof define&&define.amd?define(function(){return FlashDetect}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=FlashDetect),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(S,e){"use strict";var t=[],E=S.document,i=Object.getPrototypeOf,o=t.slice,m=t.concat,l=t.push,r=t.indexOf,n={},a=n.toString,p=n.hasOwnProperty,s=p.toString,u=s.call(Object),g={};function v(e,t){var n=(t=t||E).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}var w=function(e,t){return new w.fn.init(e,t)},c=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=/^-ms-/,h=/-([a-z])/g,f=function(e,t){return t.toUpperCase()};function _(e){var t=!!e&&"length"in e&&e.length,n=w.type(e);return"function"!==n&&!w.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}w.fn=w.prototype={jquery:"3.2.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(n){return this.pushStack(w.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},w.extend=w.fn.extend=function(){var e,t,n,i,r,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||w.isFunction(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)n=s[t],s!==(i=e[t])&&(u&&i&&(w.isPlainObject(i)||(r=Array.isArray(i)))?(a=r?(r=!1,n&&Array.isArray(n)?n:[]):n&&w.isPlainObject(n)?n:{},s[t]=w.extend(u,a,i)):void 0!==i&&(s[t]=i));return s},w.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===w.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==a.call(e))&&(!(t=i(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&s.call(n)===u)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[a.call(e)]||"object":typeof e},globalEval:function(e){v(e)},camelCase:function(e){return e.replace(d,"ms-").replace(h,f)},each:function(e,t){var n,i=0;if(_(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(c,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?w.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:r.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,s=!n;r<a;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,a=0,s=[];if(_(e))for(i=e.length;a<i;a++)null!=(r=t(e[a],a,n))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,n))&&s.push(r);return m.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),w.isFunction(e))return i=o.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(o.call(arguments)))}).guid=e.guid=e.guid||w.guid++,r},now:Date.now,support:g}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=t[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var y=function(n){var e,f,x,a,r,p,d,m,b,l,u,T,S,s,E,g,o,c,v,w="sizzle"+1*new Date,_=n.document,M=0,i=0,h=se(),y=se(),A=se(),C=function(e,t){return e===t&&(u=!0),0},P={}.hasOwnProperty,t=[],R=t.pop,D=t.push,k=t.push,I=t.slice,L=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+N+"*("+U+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+N+"*\\]",B=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",$=new RegExp(N+"+","g"),j=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),V=new RegExp("^"+N+"*,"+N+"*"),H=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),z=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),G=new RegExp(B),q=new RegExp("^"+U+"$"),W={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ee=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){T()},re=_e(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{k.apply(t=I.call(_.childNodes),_.childNodes),t[_.childNodes.length].nodeType}catch(e){k={apply:t.length?function(e,t){D.apply(e,I.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,n,i){var r,a,s,o,l,u,c,d=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!i&&((t?t.ownerDocument||t:_)!==S&&T(t),t=t||S,E)){if(11!==h&&(l=Q.exec(e)))if(r=l[1]){if(9===h){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(d&&(s=d.getElementById(r))&&v(t,s)&&s.id===r)return n.push(s),n}else{if(l[2])return k.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&f.getElementsByClassName&&t.getElementsByClassName)return k.apply(n,t.getElementsByClassName(r)),n}if(f.qsa&&!A[e+" "]&&(!g||!g.test(e))){if(1!==h)d=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((o=t.getAttribute("id"))?o=o.replace(te,ne):t.setAttribute("id",o=w),a=(u=p(e)).length;a--;)u[a]="#"+o+" "+ve(u[a]);c=u.join(","),d=Z.test(e)&&me(t.parentNode)||t}if(c)try{return k.apply(n,d.querySelectorAll(c)),n}catch(e){}finally{o===w&&t.removeAttribute("id")}}}return m(e.replace(j,"$1"),t,n,i)}function se(){var i=[];return function e(t,n){return i.push(t+" ")>x.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function oe(e){return e[w]=!0,e}function le(e){var t=S.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function fe(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&re(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pe(s){return oe(function(a){return a=+a,oe(function(e,t){for(var n,i=s([],e.length,a),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=ae.support={},r=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=ae.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:_;return i!==S&&9===i.nodeType&&i.documentElement&&(s=(S=i).documentElement,E=!r(S),_!==S&&(n=S.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ie,!1):n.attachEvent&&n.attachEvent("onunload",ie)),f.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=le(function(e){return e.appendChild(S.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=K.test(S.getElementsByClassName),f.getById=le(function(e){return s.appendChild(e).id=w,!S.getElementsByName||!S.getElementsByName(w).length}),f.getById?(x.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(x.filter.ID=function(e){var n=e.replace(J,ee);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&E){var n,i,r,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(r=t.getElementsByName(e),i=0;a=r[i++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),x.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"!==e)return a;for(;n=a[r++];)1===n.nodeType&&i.push(n);return i},x.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&E)return t.getElementsByClassName(e)},o=[],g=[],(f.qsa=K.test(S.querySelectorAll))&&(le(function(e){s.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+N+"*(?:value|"+O+")"),e.querySelectorAll("[id~="+w+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=S.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),s.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(f.matchesSelector=K.test(c=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&le(function(e){f.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),o.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),o=o.length&&new RegExp(o.join("|")),t=K.test(s.compareDocumentPosition),v=t||K.test(s.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e===S||e.ownerDocument===_&&v(_,e)?-1:t===S||t.ownerDocument===_&&v(_,t)?1:l?L(l,e)-L(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,s=[e],o=[t];if(!r||!a)return e===S?-1:t===S?1:r?-1:a?1:l?L(l,e)-L(l,t):0;if(r===a)return ce(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)o.unshift(n);for(;s[i]===o[i];)i++;return i?ce(s[i],o[i]):s[i]===_?-1:o[i]===_?1:0}),S},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==S&&T(e),t=t.replace(z,"='$1']"),f.matchesSelector&&E&&!A[t+" "]&&(!o||!o.test(t))&&(!g||!g.test(t)))try{var n=c.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<ae(t,S,null,[e]).length},ae.contains=function(e,t){return(e.ownerDocument||e)!==S&&T(e),v(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==S&&T(e);var n=x.attrHandle[t.toLowerCase()],i=n&&P.call(x.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==i?i:f.attributes||!E?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ae.escape=function(e){return(e+"").replace(te,ne)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,r=0;if(u=!f.detectDuplicates,l=!f.sortStable&&e.slice(0),e.sort(C),u){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return l=null,e},a=ae.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=a(t);return n},(x=ae.selectors={cacheLength:50,createPseudo:oe,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=p(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=h[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&h(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=ae.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace($," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,m,g){var v="nth"!==p.slice(0,3),_="last"!==p.slice(-4),y="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var i,r,a,s,o,l,u=v!==_?"nextSibling":"previousSibling",c=e.parentNode,d=y&&e.nodeName.toLowerCase(),h=!n&&!y,f=!1;if(c){if(v){for(;u;){for(s=e;s=s[u];)if(y?s.nodeName.toLowerCase()===d:1===s.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[_?c.firstChild:c.lastChild],_&&h){for(f=(o=(i=(r=(a=(s=c)[w]||(s[w]={}))[s.uniqueID]||(a[s.uniqueID]={}))[p]||[])[0]===M&&i[1])&&i[2],s=o&&c.childNodes[o];s=++o&&s&&s[u]||(f=o=0)||l.pop();)if(1===s.nodeType&&++f&&s===e){r[p]=[M,o,f];break}}else if(h&&(f=o=(i=(r=(a=(s=e)[w]||(s[w]={}))[s.uniqueID]||(a[s.uniqueID]={}))[p]||[])[0]===M&&i[1]),!1===f)for(;(s=++o&&s&&s[u]||(f=o=0)||l.pop())&&((y?s.nodeName.toLowerCase()!==d:1!==s.nodeType)||!++f||(h&&((r=(a=s[w]||(s[w]={}))[s.uniqueID]||(a[s.uniqueID]={}))[p]=[M,f]),s!==e)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(e,a){var t,s=x.pseudos[e]||x.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return s[w]?s(a):1<s.length?(t=[e,e,"",a],x.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,i=s(e,a),r=i.length;r--;)e[n=L(e,i[r])]=!(t[n]=i[r])}):function(e){return s(e,0,t)}):s}},pseudos:{not:oe(function(e){var i=[],r=[],o=d(e.replace(j,"$1"));return o[w]?oe(function(e,t,n,i){for(var r,a=o(e,null,i,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,t,n){return i[0]=e,o(i,null,n,r),i[0]=null,!r.pop()}}),has:oe(function(t){return function(e){return 0<ae(t,e).length}}),contains:oe(function(t){return t=t.replace(J,ee),function(e){return-1<(e.textContent||e.innerText||a(e)).indexOf(t)}}),lang:oe(function(n){return q.test(n||"")||ae.error("unsupported lang: "+n),n=n.replace(J,ee).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===s},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:pe(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})x.pseudos[e]=he(e);function ge(){}function ve(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function _e(o,e,t){var l=e.dir,u=e.next,c=u||l,d=t&&"parentNode"===c,h=i++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||d)return o(e,t,n);return!1}:function(e,t,n){var i,r,a,s=[M,h];if(n){for(;e=e[l];)if((1===e.nodeType||d)&&o(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||d)if(r=(a=e[w]||(e[w]={}))[e.uniqueID]||(a[e.uniqueID]={}),u&&u===e.nodeName.toLowerCase())e=e[l]||e;else{if((i=r[c])&&i[0]===M&&i[1]===h)return s[2]=i[2];if((r[c]=s)[2]=o(e,t,n))return!0}return!1}}function ye(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function xe(e,t,n,i,r){for(var a,s=[],o=0,l=e.length,u=null!=t;o<l;o++)(a=e[o])&&(n&&!n(a,i,r)||(s.push(a),u&&t.push(o)));return s}function be(f,p,m,g,v,e){return g&&!g[w]&&(g=be(g)),v&&!v[w]&&(v=be(v,e)),oe(function(e,t,n,i){var r,a,s,o=[],l=[],u=t.length,c=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ae(e,t[i],n);return n}(p||"*",n.nodeType?[n]:n,[]),d=!f||!e&&p?c:xe(c,o,f,n,i),h=m?v||(e?f:u||g)?[]:t:d;if(m&&m(d,h,n,i),g)for(r=xe(h,l),g(r,[],n,i),a=r.length;a--;)(s=r[a])&&(h[l[a]]=!(d[l[a]]=s));if(e){if(v||f){if(v){for(r=[],a=h.length;a--;)(s=h[a])&&r.push(d[a]=s);v(null,h=[],r,i)}for(a=h.length;a--;)(s=h[a])&&-1<(r=v?L(e,s):o[a])&&(e[r]=!(t[r]=s))}}else h=xe(h===t?h.splice(u,h.length):h),v?v(null,t,h,i):k.apply(t,h)})}function Te(e){for(var r,t,n,i=e.length,a=x.relative[e[0].type],s=a||x.relative[" "],o=a?1:0,l=_e(function(e){return e===r},s,!0),u=_e(function(e){return-1<L(r,e)},s,!0),c=[function(e,t,n){var i=!a&&(n||t!==b)||((r=t).nodeType?l(e,t,n):u(e,t,n));return r=null,i}];o<i;o++)if(t=x.relative[e[o].type])c=[_e(ye(c),t)];else{if((t=x.filter[e[o].type].apply(null,e[o].matches))[w]){for(n=++o;n<i&&!x.relative[e[n].type];n++);return be(1<o&&ye(c),1<o&&ve(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(j,"$1"),t,o<n&&Te(e.slice(o,n)),n<i&&Te(e=e.slice(n)),n<i&&ve(e))}c.push(t)}return ye(c)}return ge.prototype=x.filters=x.pseudos,x.setFilters=new ge,p=ae.tokenize=function(e,t){var n,i,r,a,s,o,l,u=y[e+" "];if(u)return t?0:u.slice(0);for(s=e,o=[],l=x.preFilter;s;){for(a in n&&!(i=V.exec(s))||(i&&(s=s.slice(i[0].length)||s),o.push(r=[])),n=!1,(i=H.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(j," ")}),s=s.slice(n.length)),x.filter)!(i=W[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),r.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ae.error(e):y(e,o).slice(0)},d=ae.compile=function(e,t){var n,g,v,_,y,i,r=[],a=[],s=A[e+" "];if(!s){for(t||(t=p(e)),n=t.length;n--;)(s=Te(t[n]))[w]?r.push(s):a.push(s);(s=A(e,(g=a,_=0<(v=r).length,y=0<g.length,i=function(e,t,n,i,r){var a,s,o,l=0,u="0",c=e&&[],d=[],h=b,f=e||y&&x.find.TAG("*",r),p=M+=null==h?1:Math.random()||.1,m=f.length;for(r&&(b=t===S||t||r);u!==m&&null!=(a=f[u]);u++){if(y&&a){for(s=0,t||a.ownerDocument===S||(T(a),n=!E);o=g[s++];)if(o(a,t||S,n)){i.push(a);break}r&&(M=p)}_&&((a=!o&&a)&&l--,e&&c.push(a))}if(l+=u,_&&u!==l){for(s=0;o=v[s++];)o(c,d,t,n);if(e){if(0<l)for(;u--;)c[u]||d[u]||(d[u]=R.call(i));d=xe(d)}k.apply(i,d),r&&!e&&0<d.length&&1<l+v.length&&ae.uniqueSort(i)}return r&&(M=p,b=h),c},_?oe(i):i))).selector=e}return s},m=ae.select=function(e,t,n,i){var r,a,s,o,l,u="function"==typeof e&&e,c=!i&&p(e=u.selector||e);if(n=n||[],1===c.length){if(2<(a=c[0]=c[0].slice(0)).length&&"ID"===(s=a[0]).type&&9===t.nodeType&&E&&x.relative[a[1].type]){if(!(t=(x.find.ID(s.matches[0].replace(J,ee),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=W.needsContext.test(e)?0:a.length;r--&&(s=a[r],!x.relative[o=s.type]);)if((l=x.find[o])&&(i=l(s.matches[0].replace(J,ee),Z.test(a[0].type)&&me(t.parentNode)||t))){if(a.splice(r,1),!(e=i.length&&ve(a)))return k.apply(n,i),n;break}}return(u||d(e,c))(i,t,!E,n,!t||Z.test(e)&&me(t.parentNode)||t),n},f.sortStable=w.split("").sort(C).join("")===w,f.detectDuplicates=!!u,T(),f.sortDetached=le(function(e){return 1&e.compareDocumentPosition(S.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ue(O,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),ae}(S);w.find=y,w.expr=y.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=y.uniqueSort,w.text=y.getText,w.isXMLDoc=y.isXML,w.contains=y.contains,w.escapeSelector=y.escape;var x=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&w(e).is(n))break;i.push(e)}return i},b=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},T=w.expr.match.needsContext;function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function P(e,n,i){return w.isFunction(n)?w.grep(e,function(e,t){return!!n.call(e,t,e)!==i}):n.nodeType?w.grep(e,function(e){return e===n!==i}):"string"!=typeof n?w.grep(e,function(e){return-1<r.call(n,e)!==i}):C.test(n)?w.filter(n,e,i):(n=w.filter(n,e),w.grep(e,function(e){return-1<r.call(n,e)!==i&&1===e.nodeType}))}w.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?w.find.matchesSelector(i,e)?[i]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<i;t++)if(w.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)w.find(e,r[t],n);return 1<i?w.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&T.test(e)?w(e):e||[],!1).length}});var R,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||R,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):w.isFunction(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this);if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:D.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)w.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=E.getElementById(i[2]))&&(this[0]=r,this.length=1),this}).prototype=w.fn,R=w(E);var k=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,a=[],s="string"!=typeof e&&w(e);if(!T.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&w.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(1<a.length?w.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?r.call(w(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return b((e.parentNode||{}).firstChild,e)},children:function(e){return b(e.firstChild)},contents:function(e){return M(e,"iframe")?e.contentDocument:(M(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(i,r){w.fn[i]=function(e,t){var n=w.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=w.filter(t,n)),1<this.length&&(I[i]||w.uniqueSort(n),k.test(i)&&n.reverse()),this.pushStack(n)}});var O=/[^\x20\t\r\n\f]+/g;function N(e){return e}function U(e){throw e}function F(e,t,n,i){var r;try{e&&w.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&w.isFunction(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(i){var e,n;i="string"==typeof i?(e=i,n={},w.each(e.match(O)||[],function(e,t){n[t]=!0}),n):w.extend({},i);var r,t,a,s,o=[],l=[],u=-1,c=function(){for(s=s||i.once,a=r=!0;l.length;u=-1)for(t=l.shift();++u<o.length;)!1===o[u].apply(t[0],t[1])&&i.stopOnFalse&&(u=o.length,t=!1);i.memory||(t=!1),r=!1,s&&(o=t?[]:"")},d={add:function(){return o&&(t&&!r&&(u=o.length-1,l.push(t)),function n(e){w.each(e,function(e,t){w.isFunction(t)?i.unique&&d.has(t)||o.push(t):t&&t.length&&"string"!==w.type(t)&&n(t)})}(arguments),t&&!r&&c()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;-1<(n=w.inArray(t,o,n));)o.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<w.inArray(e,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return s=l=[],o=t="",this},disabled:function(){return!o},lock:function(){return s=l=[],t||r||(o=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),r||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},w.extend({Deferred:function(e){var a=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var r=arguments;return w.Deferred(function(i){w.each(a,function(e,t){var n=w.isFunction(r[t[4]])&&r[t[4]];o[t[1]](function(){var e=n&&n.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this,n?[e]:arguments)})}),r=null}).promise()},then:function(t,n,i){var l=0;function u(r,a,s,o){return function(){var n=this,i=arguments,e=function(){var e,t;if(!(r<l)){if((e=s.apply(n,i))===a.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,w.isFunction(t)?o?t.call(e,u(l,a,N,o),u(l,a,U,o)):(l++,t.call(e,u(l,a,N,o),u(l,a,U,o),u(l,a,N,a.notifyWith))):(s!==N&&(n=void 0,i=[e]),(o||a.resolveWith)(n,i))}},t=o?e:function(){try{e()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(s!==U&&(n=void 0,i=[e]),a.rejectWith(n,i))}};r?t():(w.Deferred.getStackHook&&(t.stackTrace=w.Deferred.getStackHook()),S.setTimeout(t))}}return w.Deferred(function(e){a[0][3].add(u(0,e,w.isFunction(i)?i:N,e.notifyWith)),a[1][3].add(u(0,e,w.isFunction(t)?t:N)),a[2][3].add(u(0,e,w.isFunction(n)?n:U))}).promise()},promise:function(e){return null!=e?w.extend(e,s):s}},o={};return w.each(a,function(e,t){var n=t[2],i=t[5];s[t[1]]=n.add,i&&n.add(function(){r=i},a[3-e][2].disable,a[0][2].lock),n.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=n.fireWith}),s.promise(o),e&&e.call(o,o),o},when:function(e){var n=arguments.length,t=n,i=Array(t),r=o.call(arguments),a=w.Deferred(),s=function(t){return function(e){i[t]=this,r[t]=1<arguments.length?o.call(arguments):e,--n||a.resolveWith(i,r)}};if(n<=1&&(F(e,a.done(s(t)).resolve,a.reject,!n),"pending"===a.state()||w.isFunction(r[t]&&r[t].then)))return a.then();for(;t--;)F(r[t],s(t),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,t){S.console&&S.console.warn&&e&&B.test(e.name)&&S.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},w.readyException=function(e){S.setTimeout(function(){throw e})};var $=w.Deferred();function j(){E.removeEventListener("DOMContentLoaded",j),S.removeEventListener("load",j),w.ready()}w.fn.ready=function(e){return $.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0)!==e&&0<--w.readyWait||$.resolveWith(E,[w])}}),w.ready.then=$.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?S.setTimeout(w.ready):(E.addEventListener("DOMContentLoaded",j),S.addEventListener("load",j));var V=function(e,t,n,i,r,a,s){var o=0,l=e.length,u=null==n;if("object"===w.type(n))for(o in r=!0,n)V(e,t,o,n[o],!0,a,s);else if(void 0!==i&&(r=!0,w.isFunction(i)||(s=!0),u&&(t=s?(t.call(e,i),null):(u=t,function(e,t,n){return u.call(w(e),n)})),t))for(;o<l;o++)t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)));return r?e:u?t.call(e):l?t(e[0],n):a},H=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function z(){this.expando=w.expando+z.uid++}z.uid=1,z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},H(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[w.camelCase(t)]=n;else for(i in t)r[w.camelCase(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][w.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(w.camelCase):(t=w.camelCase(t))in i?[t]:t.match(O)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||w.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var G=new z,q=new z,W=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function X(e,t,n){var i,r;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Y,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:W.test(r)?JSON.parse(r):r)}catch(e){}q.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return q.hasData(e)||G.hasData(e)},data:function(e,t,n){return q.access(e,t,n)},removeData:function(e,t){q.remove(e,t)},_data:function(e,t,n){return G.access(e,t,n)},_removeData:function(e,t){G.remove(e,t)}}),w.fn.extend({data:function(n,e){var t,i,r,a=this[0],s=a&&a.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){q.set(this,n)}):V(this,function(e){var t;if(a&&void 0===e)return void 0!==(t=q.get(a,n))?t:void 0!==(t=X(a,n))?t:void 0;this.each(function(){q.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=q.get(a),1===a.nodeType&&!G.get(a,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&0===(i=s[t].name).indexOf("data-")&&(i=w.camelCase(i.slice(5)),X(a,i,r[i]));G.set(a,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){q.remove(this,e)})}}),w.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=G.get(e,t),n&&(!i||Array.isArray(n)?i=G.access(e,t,w.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),i=n.length,r=n.shift(),a=w._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,function(){w.dequeue(e,t)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return G.get(e,n)||G.access(e,n,{empty:w.Callbacks("once memory").add(function(){G.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?w.queue(this[0],t):void 0===n?this:this.each(function(){var e=w.queue(this,t,n);w._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&w.dequeue(this,t)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=w.Deferred(),a=this,s=this.length,o=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=G.get(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var K=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Q=new RegExp("^(?:([+-])=|)("+K+")([a-z%]*)$","i"),Z=["Top","Right","Bottom","Left"],J=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},ee=function(e,t,n,i){var r,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,i||[]),t)e.style[a]=s[a];return r};function te(e,t,n,i){var r,a=1,s=20,o=i?function(){return i.cur()}:function(){return w.css(e,t,"")},l=o(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==u&&+l)&&Q.exec(w.css(e,t));if(c&&c[3]!==u)for(u=u||c[3],n=n||[],c=+l||1;c/=a=a||".5",w.style(e,t,c+u),a!==(a=o()/l)&&1!==a&&--s;);return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var ne={};function ie(e,t){for(var n,i,r,a,s,o,l,u=[],c=0,d=e.length;c<d;c++)(i=e[c]).style&&(n=i.style.display,t?("none"===n&&(u[c]=G.get(i,"display")||null,u[c]||(i.style.display="")),""===i.style.display&&J(i)&&(u[c]=(l=s=a=void 0,s=(r=i).ownerDocument,o=r.nodeName,(l=ne[o])||(a=s.body.appendChild(s.createElement(o)),l=w.css(a,"display"),a.parentNode.removeChild(a),"none"===l&&(l="block"),ne[o]=l)))):"none"!==n&&(u[c]="none",G.set(i,"display",n)));for(c=0;c<d;c++)null!=u[c]&&(e[c].style.display=u[c]);return e}w.fn.extend({show:function(){return ie(this,!0)},hide:function(){return ie(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){J(this)?w(this).show():w(this).hide()})}});var re=/^(?:checkbox|radio)$/i,ae=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,se=/^$|\/(?:java|ecma)script/i,oe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function le(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&M(e,t)?w.merge([e],n):n}function ue(e,t){for(var n=0,i=e.length;n<i;n++)G.set(e[n],"globalEval",!t||G.get(t[n],"globalEval"))}oe.optgroup=oe.option,oe.tbody=oe.tfoot=oe.colgroup=oe.caption=oe.thead,oe.th=oe.td;var ce,de,he=/<|&#?\w+;/;function fe(e,t,n,i,r){for(var a,s,o,l,u,c,d=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((a=e[f])||0===a)if("object"===w.type(a))w.merge(h,a.nodeType?[a]:a);else if(he.test(a)){for(s=s||d.appendChild(t.createElement("div")),o=(ae.exec(a)||["",""])[1].toLowerCase(),l=oe[o]||oe._default,s.innerHTML=l[1]+w.htmlPrefilter(a)+l[2],c=l[0];c--;)s=s.lastChild;w.merge(h,s.childNodes),(s=d.firstChild).textContent=""}else h.push(t.createTextNode(a));for(d.textContent="",f=0;a=h[f++];)if(i&&-1<w.inArray(a,i))r&&r.push(a);else if(u=w.contains(a.ownerDocument,a),s=le(d.appendChild(a),"script"),u&&ue(s),n)for(c=0;a=s[c++];)se.test(a.type||"")&&n.push(a);return d}ce=E.createDocumentFragment().appendChild(E.createElement("div")),(de=E.createElement("input")).setAttribute("type","radio"),de.setAttribute("checked","checked"),de.setAttribute("name","t"),ce.appendChild(de),g.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue;var pe=E.documentElement,me=/^key/,ge=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ve=/^([^.]*)(?:\.(.+)|)/;function _e(){return!0}function ye(){return!1}function xe(){try{return E.activeElement}catch(e){}}function be(e,t,n,i,r,a){var s,o;if("object"==typeof t){for(o in"string"!=typeof n&&(i=i||n,n=void 0),t)be(e,o,n,i,t[o],a);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=ye;else if(!r)return e;return 1===a&&(s=r,(r=function(e){return w().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=w.guid++)),e.each(function(){w.event.add(this,t,r,i,n)})}w.event={global:{},add:function(t,e,n,i,r){var a,s,o,l,u,c,d,h,f,p,m,g=G.get(t);if(g)for(n.handler&&(n=(a=n).handler,r=a.selector),r&&w.find.matchesSelector(pe,r),n.guid||(n.guid=w.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(O)||[""]).length;u--;)f=m=(o=ve.exec(e[u])||[])[1],p=(o[2]||"").split(".").sort(),f&&(d=w.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=w.event.special[f]||{},c=w.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&w.expr.match.needsContext.test(r),namespace:p.join(".")},a),(h=l[f])||((h=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,p,s)||t.addEventListener&&t.addEventListener(f,s)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),w.event.global[f]=!0)},remove:function(e,t,n,i,r){var a,s,o,l,u,c,d,h,f,p,m,g=G.hasData(e)&&G.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(O)||[""]).length;u--;)if(f=m=(o=ve.exec(t[u])||[])[1],p=(o[2]||"").split(".").sort(),f){for(d=w.event.special[f]||{},h=l[f=(i?d.delegateType:d.bindType)||f]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=h.length;a--;)c=h[a],!r&&m!==c.origType||n&&n.guid!==c.guid||o&&!o.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||w.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)w.event.remove(e,f+t[u],n,i,!0);w.isEmptyObject(l)&&G.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,a,s,o=w.event.fix(e),l=new Array(arguments.length),u=(G.get(this,"events")||{})[o.type]||[],c=w.event.special[o.type]||{};for(l[0]=o,t=1;t<arguments.length;t++)l[t]=arguments[t];if(o.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,o)){for(s=w.event.handlers.call(this,o,u),t=0;(r=s[t++])&&!o.isPropagationStopped();)for(o.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(a.namespace)||(o.handleObj=a,o.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,l))&&!1===(o.result=i)&&(o.preventDefault(),o.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,o),o.result}},handlers:function(e,t){var n,i,r,a,s,o=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&1<=e.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],s={},n=0;n<l;n++)void 0===s[r=(i=t[n]).selector+" "]&&(s[r]=i.needsContext?-1<w(r,this).index(u):w.find(r,this,null,[u]).length),s[r]&&a.push(i);a.length&&o.push({elem:u,handlers:a})}return u=this,l<t.length&&o.push({elem:u,handlers:t.slice(l)}),o},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:w.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xe()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xe()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&M(this,"input"))return this.click(),!1},_default:function(e){return M(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?_e:ye,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ye,isPropagationStopped:ye,isImmediatePropagationStopped:ye,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_e,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_e,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_e,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&me.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ge.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){w.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||w.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=r),t}}}),w.fn.extend({on:function(e,t,n,i){return be(this,e,t,n,i)},one:function(e,t,n,i){return be(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ye),this.each(function(){w.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r]);return this}});var Te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Se=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,we=/^true\/(.*)/,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(e,t){return M(e,"table")&&M(11!==t.nodeType?t:t.firstChild,"tr")&&w(">tbody",e)[0]||e}function Ce(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){var t=we.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Re(e,t){var n,i,r,a,s,o,l,u;if(1===t.nodeType){if(G.hasData(e)&&(a=G.access(e),s=G.set(t,a),u=a.events))for(r in delete s.handle,s.events={},u)for(n=0,i=u[r].length;n<i;n++)w.event.add(t,r,u[r][n]);q.hasData(e)&&(o=q.access(e),l=w.extend({},o),q.set(t,l))}}function De(n,i,r,a){i=m.apply([],i);var e,t,s,o,l,u,c=0,d=n.length,h=d-1,f=i[0],p=w.isFunction(f);if(p||1<d&&"string"==typeof f&&!g.checkClone&&Ee.test(f))return n.each(function(e){var t=n.eq(e);p&&(i[0]=f.call(this,e,t.html())),De(t,i,r,a)});if(d&&(t=(e=fe(i,n[0].ownerDocument,!1,n,a)).firstChild,1===e.childNodes.length&&(e=t),t||a)){for(o=(s=w.map(le(e,"script"),Ce)).length;c<d;c++)l=e,c!==h&&(l=w.clone(l,!0,!0),o&&w.merge(s,le(l,"script"))),r.call(n[c],l,c);if(o)for(u=s[s.length-1].ownerDocument,w.map(s,Pe),c=0;c<o;c++)l=s[c],se.test(l.type||"")&&!G.access(l,"globalEval")&&w.contains(u,l)&&(l.src?w._evalUrl&&w._evalUrl(l.src):v(l.textContent.replace(Me,""),u))}return n}function ke(e,t,n){for(var i,r=t?w.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||w.cleanData(le(i)),i.parentNode&&(n&&w.contains(i.ownerDocument,i)&&ue(le(i,"script")),i.parentNode.removeChild(i));return e}w.extend({htmlPrefilter:function(e){return e.replace(Te,"<$1></$2>")},clone:function(e,t,n){var i,r,a,s,o,l,u,c=e.cloneNode(!0),d=w.contains(e.ownerDocument,e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(s=le(c),i=0,r=(a=le(e)).length;i<r;i++)o=a[i],l=s[i],void 0,"input"===(u=l.nodeName.toLowerCase())&&re.test(o.type)?l.checked=o.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=o.defaultValue);if(t)if(n)for(a=a||le(e),s=s||le(c),i=0,r=a.length;i<r;i++)Re(a[i],s[i]);else Re(e,c);return 0<(s=le(c,"script")).length&&ue(s,!d&&le(e,"script")),c},cleanData:function(e){for(var t,n,i,r=w.event.special,a=0;void 0!==(n=e[a]);a++)if(H(n)){if(t=n[G.expando]){if(t.events)for(i in t.events)r[i]?w.event.remove(n,i):w.removeEvent(n,i,t.handle);n[G.expando]=void 0}n[q.expando]&&(n[q.expando]=void 0)}}}),w.fn.extend({detach:function(e){return ke(this,e,!0)},remove:function(e){return ke(this,e)},text:function(e){return V(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(le(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return V(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Se.test(e)&&!oe[(ae.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(le(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return De(this,arguments,function(e){var t=this.parentNode;w.inArray(this,n)<0&&(w.cleanData(le(this)),t&&t.replaceChild(e,this))},n)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){w.fn[e]=function(e){for(var t,n=[],i=w(e),r=i.length-1,a=0;a<=r;a++)t=a===r?this:this.clone(!0),w(i[a])[s](t),l.apply(n,t.get());return this.pushStack(n)}});var Ie=/^margin/,Le=new RegExp("^("+K+")(?!px)[a-z%]+$","i"),Oe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=S),t.getComputedStyle(e)};function Ne(e,t,n){var i,r,a,s,o=e.style;return(n=n||Oe(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(s=w.style(e,t)),!g.pixelMarginRight()&&Le.test(s)&&Ie.test(t)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a)),void 0!==s?s+"":s}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",pe.appendChild(a);var e=S.getComputedStyle(s);t="1%"!==e.top,r="2px"===e.marginLeft,n="4px"===e.width,s.style.marginRight="50%",i="4px"===e.marginRight,pe.removeChild(a),s=null}}var t,n,i,r,a=E.createElement("div"),s=E.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),w.extend(g,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),n},pixelMarginRight:function(){return e(),i},reliableMarginLeft:function(){return e(),r}}))}();var Fe=/^(none|table(?!-c[ea]).+)/,Be=/^--/,$e={position:"absolute",visibility:"hidden",display:"block"},je={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","Moz","ms"],He=E.createElement("div").style;function ze(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=function(e){if(e in He)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ve.length;n--;)if((e=Ve[n]+t)in He)return e}(e)||e),t}function Ge(e,t,n){var i=Q.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function qe(e,t,n,i,r){var a,s=0;for(a=n===(i?"border":"content")?4:"width"===t?1:0;a<4;a+=2)"margin"===n&&(s+=w.css(e,n+Z[a],!0,r)),i?("content"===n&&(s-=w.css(e,"padding"+Z[a],!0,r)),"margin"!==n&&(s-=w.css(e,"border"+Z[a]+"Width",!0,r))):(s+=w.css(e,"padding"+Z[a],!0,r),"padding"!==n&&(s+=w.css(e,"border"+Z[a]+"Width",!0,r)));return s}function We(e,t,n){var i,r=Oe(e),a=Ne(e,t,r),s="border-box"===w.css(e,"boxSizing",!1,r);return Le.test(a)?a:(i=s&&(g.boxSizingReliable()||a===e.style[t]),"auto"===a&&(a=e["offset"+t[0].toUpperCase()+t.slice(1)]),(a=parseFloat(a)||0)+qe(e,t,n||(s?"border":"content"),i,r)+"px")}function Ye(e,t,n,i,r){return new Ye.prototype.init(e,t,n,i,r)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ne(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=w.camelCase(t),l=Be.test(t),u=e.style;if(l||(t=ze(o)),s=w.cssHooks[t]||w.cssHooks[o],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:u[t];"string"===(a=typeof n)&&(r=Q.exec(n))&&r[1]&&(n=te(e,t,r),a="number"),null!=n&&n==n&&("number"===a&&(n+=r&&r[3]||(w.cssNumber[o]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,i){var r,a,s,o=w.camelCase(t);return Be.test(t)||(t=ze(o)),(s=w.cssHooks[t]||w.cssHooks[o])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=Ne(e,t,i)),"normal"===r&&t in je&&(r=je[t]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),w.each(["height","width"],function(e,s){w.cssHooks[s]={get:function(e,t,n){if(t)return!Fe.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?We(e,s,n):ee(e,$e,function(){return We(e,s,n)})},set:function(e,t,n){var i,r=n&&Oe(e),a=n&&qe(e,s,n,"border-box"===w.css(e,"boxSizing",!1,r),r);return a&&(i=Q.exec(t))&&"px"!==(i[3]||"px")&&(e.style[s]=t,t=w.css(e,s)),Ge(0,t,a)}}}),w.cssHooks.marginLeft=Ue(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ne(e,"marginLeft"))||e.getBoundingClientRect().left-ee(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(r,a){w.cssHooks[r+a]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+Z[t]+a]=i[t]||i[t-2]||i[0];return n}},Ie.test(r)||(w.cssHooks[r+a].set=Ge)}),w.fn.extend({css:function(e,t){return V(this,function(e,t,n){var i,r,a={},s=0;if(Array.isArray(t)){for(i=Oe(e),r=t.length;s<r;s++)a[t[s]]=w.css(e,t[s],!1,i);return a}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,1<arguments.length)}}),((w.Tween=Ye).prototype={constructor:Ye,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(w.cssNumber[n]?"":"px")},cur:function(){var e=Ye.propHooks[this.prop];return e&&e.get?e.get(this):Ye.propHooks._default.get(this)},run:function(e){var t,n=Ye.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ye.propHooks._default.set(this),this}}).init.prototype=Ye.prototype,(Ye.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ye.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=Ye.prototype.init,w.fx.step={};var Xe,Ke,Qe,Ze,Je=/^(?:toggle|show|hide)$/,et=/queueHooks$/;function tt(){Ke&&(!1===E.hidden&&S.requestAnimationFrame?S.requestAnimationFrame(tt):S.setTimeout(tt,w.fx.interval),w.fx.tick())}function nt(){return S.setTimeout(function(){Xe=void 0}),Xe=w.now()}function it(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=Z[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function rt(e,t,n){for(var i,r=(at.tweeners[t]||[]).concat(at.tweeners["*"]),a=0,s=r.length;a<s;a++)if(i=r[a].call(n,t,e))return i}function at(a,e,t){var n,s,i=0,r=at.prefilters.length,o=w.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=Xe||nt(),t=Math.max(0,u.startTime+u.duration-e),n=1-(t/u.duration||0),i=0,r=u.tweens.length;i<r;i++)u.tweens[i].run(n);return o.notifyWith(a,[u,n,t]),n<1&&r?t:(r||o.notifyWith(a,[u,1,0]),o.resolveWith(a,[u]),!1)},u=o.promise({elem:a,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},t),originalProperties:e,originalOptions:t,startTime:Xe||nt(),duration:t.duration,tweens:[],createTween:function(e,t){var n=w.Tween(a,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var t=0,n=e?u.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)u.tweens[t].run(1);return e?(o.notifyWith(a,[u,1,0]),o.resolveWith(a,[u,e])):o.rejectWith(a,[u,e]),this}}),c=u.props;for(!function(e,t){var n,i,r,a,s;for(n in e)if(r=t[i=w.camelCase(n)],a=e[n],Array.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=w.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(c,u.opts.specialEasing);i<r;i++)if(n=at.prefilters[i].call(u,a,c,u.opts))return w.isFunction(n.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=w.proxy(n.stop,n)),n;return w.map(c,rt,u),w.isFunction(u.opts.start)&&u.opts.start.call(a,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:a,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(at,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Q.exec(t),n),n}]},tweener:function(e,t){for(var n,i=0,r=(e=w.isFunction(e)?(t=e,["*"]):e.match(O)).length;i<r;i++)n=e[i],at.tweeners[n]=at.tweeners[n]||[],at.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,a,s,o,l,u,c,d="width"in t||"height"in t,h=this,f={},p=e.style,m=e.nodeType&&J(e),g=G.get(e,"fxshow");for(i in n.queue||(null==(s=w._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,w.queue(e,"fx").length||s.empty.fire()})})),t)if(r=t[i],Je.test(r)){if(delete t[i],a=a||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||w.style(e,i)}if((l=!w.isEmptyObject(t))||!w.isEmptyObject(f))for(i in d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=G.get(e,"display")),"none"===(c=w.css(e,"display"))&&(u?c=u:(ie([e],!0),u=e.style.display||u,c=w.css(e,"display"),ie([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===w.css(e,"float")&&(l||(h.done(function(){p.display=u}),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=G.access(e,"fxshow",{display:u}),a&&(g.hidden=!m),m&&ie([e],!0),h.done(function(){for(i in m||ie([e]),G.remove(e,"fxshow"),f)w.style(e,i,f[i])})),l=rt(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?at.prefilters.unshift(e):at.prefilters.push(e)}}),w.speed=function(e,t,n){var i=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};return w.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in w.fx.speeds?i.duration=w.fx.speeds[i.duration]:i.duration=w.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){w.isFunction(i.old)&&i.old.call(this),i.queue&&w.dequeue(this,i.queue)},i},w.fn.extend({fadeTo:function(e,t,n,i){return this.filter(J).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){var r=w.isEmptyObject(t),a=w.speed(e,n,i),s=function(){var e=at(this,w.extend({},t),a);(r||G.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(r,e,a){var s=function(e){var t=e.stop;delete e.stop,t(a)};return"string"!=typeof r&&(a=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",n=w.timers,i=G.get(this);if(t)i[t]&&i[t].stop&&s(i[t]);else for(t in i)i[t]&&i[t].stop&&et.test(t)&&s(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(a),e=!1,n.splice(t,1));!e&&a||w.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=G.get(this),n=t[s+"queue"],i=t[s+"queueHooks"],r=w.timers,a=n?n.length:0;for(t.finish=!0,w.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===s&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),w.each(["toggle","show","hide"],function(e,i){var r=w.fn[i];w.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(it(i,!0),e,t,n)}}),w.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){w.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(Xe=w.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),Xe=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){Ke||(Ke=!0,tt())},w.fx.stop=function(){Ke=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(i,e){return i=w.fx&&w.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=S.setTimeout(e,i);t.stop=function(){S.clearTimeout(n)}})},Qe=E.createElement("input"),Ze=E.createElement("select").appendChild(E.createElement("option")),Qe.type="checkbox",g.checkOn=""!==Qe.value,g.optSelected=Ze.selected,(Qe=E.createElement("input")).value="t",Qe.type="radio",g.radioValue="t"===Qe.value;var st,ot=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return V(this,w.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?w.prop(e,t,n):(1===a&&w.isXMLDoc(e)||(r=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?st:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=w.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&M(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(O);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),st={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var s=ot[t]||w.find.attr;ot[t]=function(e,t,n){var i,r,a=t.toLowerCase();return n||(r=ot[a],ot[a]=i,i=null!=s(e,t,n)?a:null,ot[a]=r),i}});var lt=/^(?:input|select|textarea|button)$/i,ut=/^(?:a|area)$/i;function ct(e){return(e.match(O)||[]).join(" ")}function dt(e){return e.getAttribute&&e.getAttribute("class")||""}w.fn.extend({prop:function(e,t){return V(this,w.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&w.isXMLDoc(e)||(t=w.propFix[t]||t,r=w.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):lt.test(e.nodeName)||ut.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(t){var e,n,i,r,a,s,o,l=0;if(w.isFunction(t))return this.each(function(e){w(this).addClass(t.call(this,e,dt(this)))});if("string"==typeof t&&t)for(e=t.match(O)||[];n=this[l++];)if(r=dt(n),i=1===n.nodeType&&" "+ct(r)+" "){for(s=0;a=e[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(o=ct(i))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,i,r,a,s,o,l=0;if(w.isFunction(t))return this.each(function(e){w(this).removeClass(t.call(this,e,dt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(O)||[];n=this[l++];)if(r=dt(n),i=1===n.nodeType&&" "+ct(r)+" "){for(s=0;a=e[s++];)for(;-1<i.indexOf(" "+a+" ");)i=i.replace(" "+a+" "," ");r!==(o=ct(i))&&n.setAttribute("class",o)}return this},toggleClass:function(r,t){var a=typeof r;return"boolean"==typeof t&&"string"===a?t?this.addClass(r):this.removeClass(r):w.isFunction(r)?this.each(function(e){w(this).toggleClass(r.call(this,e,dt(this),t),t)}):this.each(function(){var e,t,n,i;if("string"===a)for(t=0,n=w(this),i=r.match(O)||[];e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==r&&"boolean"!==a||((e=dt(this))&&G.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":G.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+ct(dt(n))+" ").indexOf(t))return!0;return!1}});var ht=/\r/g;w.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=w.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,w(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=w.map(t,function(e){return null==e?"":e+""})),(i=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=w.valHooks[t.type]||w.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ht,""):null==e?"":e:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ct(w.text(e))}},select:{get:function(e){var t,n,i,r=e.options,a=e.selectedIndex,s="select-one"===e.type,o=s?null:[],l=s?a+1:r.length;for(i=a<0?l:s?a:0;i<l;i++)if(((n=r[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!M(n.parentNode,"optgroup"))){if(t=w(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,a=w.makeArray(t),s=r.length;s--;)((i=r[s]).selected=-1<w.inArray(w.valHooks.option.get(i),a))&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<w.inArray(w(e).val(),t)}},g.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ft=/^(?:focusinfocus|focusoutblur)$/;w.extend(w.event,{trigger:function(e,t,n,i){var r,a,s,o,l,u,c,d=[n||E],h=p.call(e,"type")?e.type:e,f=p.call(e,"namespace")?e.namespace.split("."):[];if(a=s=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!ft.test(h+w.event.triggered)&&(-1<h.indexOf(".")&&(h=(f=h.split(".")).shift(),f.sort()),l=h.indexOf(":")<0&&"on"+h,(e=e[w.expando]?e:new w.Event(h,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:w.makeArray(t,[e]),c=w.event.special[h]||{},i||!c.trigger||!1!==c.trigger.apply(n,t))){if(!i&&!c.noBubble&&!w.isWindow(n)){for(o=c.delegateType||h,ft.test(o+h)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(n.ownerDocument||E)&&d.push(s.defaultView||s.parentWindow||S)}for(r=0;(a=d[r++])&&!e.isPropagationStopped();)e.type=1<r?o:c.bindType||h,(u=(G.get(a,"events")||{})[e.type]&&G.get(a,"handle"))&&u.apply(a,t),(u=l&&a[l])&&u.apply&&H(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=h,i||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!H(n)||l&&w.isFunction(n[h])&&!w.isWindow(n)&&((s=n[l])&&(n[l]=null),n[w.event.triggered=h](),w.event.triggered=void 0,s&&(n[l]=s)),e.result}},simulate:function(e,t,n){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(i,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){w.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),g.focusin="onfocusin"in S,g.focusin||w.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(e){w.event.simulate(i,e.target,w.event.fix(e))};w.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=G.access(e,i);t||e.addEventListener(n,r,!0),G.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=G.access(e,i)-1;t?G.access(e,i,t):(e.removeEventListener(n,r,!0),G.remove(e,i))}}});var pt=S.location,mt=w.now(),gt=/\?/;w.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new S.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),t};var vt=/\[\]$/,_t=/\r?\n/g,yt=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;function bt(n,e,i,r){var t;if(Array.isArray(e))w.each(e,function(e,t){i||vt.test(n)?r(n,t):bt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,r)});else if(i||"object"!==w.type(e))r(n,e);else for(t in e)bt(n+"["+t+"]",e[t],i,r)}w.param=function(e,t){var n,i=[],r=function(e,t){var n=w.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){r(this.name,this.value)});else for(n in e)bt(n,e[n],t,r);return i.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&xt.test(this.nodeName)&&!yt.test(e)&&(this.checked||!re.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:n.replace(_t,"\r\n")}}).get()}});var Tt=/%20/g,St=/#.*$/,Et=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,At=/^\/\//,Ct={},Pt={},Rt="*/".concat("*"),Dt=E.createElement("a");function kt(a){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,r=e.toLowerCase().match(O)||[];if(w.isFunction(t))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(a[n]=a[n]||[]).unshift(t)):(a[n]=a[n]||[]).push(t)}}function It(t,r,a,s){var o={},l=t===Pt;function u(e){var i;return o[e]=!0,w.each(t[e]||[],function(e,t){var n=t(r,a,s);return"string"!=typeof n||l||o[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),u(n),!1)}),i}return u(r.dataTypes[0])||!o["*"]&&u("*")}function Lt(e,t){var n,i,r=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&w.extend(!0,e,i),e}Dt.href=pt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Lt(Lt(e,w.ajaxSettings),t):Lt(w.ajaxSettings,e)},ajaxPrefilter:kt(Ct),ajaxTransport:kt(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,d,h,n,f,i,p,m,r,a,g=w.ajaxSetup({},t),v=g.context||g,_=g.context&&(v.nodeType||v.jquery)?w(v):w.event,y=w.Deferred(),x=w.Callbacks("once memory"),b=g.statusCode||{},s={},o={},l="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(p){if(!n)for(n={};t=wt.exec(h);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return p?h:null},setRequestHeader:function(e,t){return null==p&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==p&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(p)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||l;return c&&c.abort(t),u(0,t),this}};if(y.promise(T),g.url=((e||g.url||pt.href)+"").replace(At,pt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(O)||[""],null==g.crossDomain){i=E.createElement("a");try{i.href=g.url,i.href=i.href,g.crossDomain=Dt.protocol+"//"+Dt.host!=i.protocol+"//"+i.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=w.param(g.data,g.traditional)),It(Ct,g,t,T),p)return T;for(r in(m=w.event&&g.global)&&0==w.active++&&w.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Mt.test(g.type),d=g.url.replace(St,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Tt,"+")):(a=g.url.slice(d.length),g.data&&(d+=(gt.test(d)?"&":"?")+g.data,delete g.data),!1===g.cache&&(d=d.replace(Et,"$1"),a=(gt.test(d)?"&":"?")+"_="+mt+++a),g.url=d+a),g.ifModified&&(w.lastModified[d]&&T.setRequestHeader("If-Modified-Since",w.lastModified[d]),w.etag[d]&&T.setRequestHeader("If-None-Match",w.etag[d])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&T.setRequestHeader("Content-Type",g.contentType),T.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Rt+"; q=0.01":""):g.accepts["*"]),g.headers)T.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(v,T,g)||p))return T.abort();if(l="abort",x.add(g.complete),T.done(g.success),T.fail(g.error),c=It(Pt,g,t,T)){if(T.readyState=1,m&&_.trigger("ajaxSend",[T,g]),p)return T;g.async&&0<g.timeout&&(f=S.setTimeout(function(){T.abort("timeout")},g.timeout));try{p=!1,c.send(s,u)}catch(e){if(p)throw e;u(-1,e)}}else u(-1,"No Transport");function u(e,t,n,i){var r,a,s,o,l,u=t;p||(p=!0,f&&S.clearTimeout(f),c=void 0,h=i||"",T.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(o=function(e,t,n){for(var i,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),n[a]}(g,T,n)),o=function(e,t,n,i){var r,a,s,o,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=u[l+" "+a]||u["* "+a]))for(r in u)if((o=r.split(" "))[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){!0===s?s=u[r]:!0!==u[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(g,o,T,r),r?(g.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(w.lastModified[d]=l),(l=T.getResponseHeader("etag"))&&(w.etag[d]=l)),204===e||"HEAD"===g.type?u="nocontent":304===e?u="notmodified":(u=o.state,a=o.data,r=!(s=o.error))):(s=u,!e&&u||(u="error",e<0&&(e=0))),T.status=e,T.statusText=(t||u)+"",r?y.resolveWith(v,[a,u,T]):y.rejectWith(v,[T,u,s]),T.statusCode(b),b=void 0,m&&_.trigger(r?"ajaxSuccess":"ajaxError",[T,g,r?a:s]),x.fireWith(v,[T,u]),m&&(_.trigger("ajaxComplete",[T,g]),--w.active||w.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,r){w[r]=function(e,t,n,i){return w.isFunction(t)&&(i=i||n,n=t,t=void 0),w.ajax(w.extend({url:e,type:r,dataType:i,data:t,success:n},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(w.isFunction(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return w.isFunction(n)?this.each(function(e){w(this).wrapInner(n.call(this,e))}):this.each(function(){var e=w(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=w.isFunction(t);return this.each(function(e){w(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch(e){}};var Ot={0:200,1223:204},Nt=w.ajaxSettings.xhr();g.cors=!!Nt&&"withCredentials"in Nt,g.ajax=Nt=!!Nt,w.ajaxTransport(function(r){var a,s;if(g.cors||Nt&&!r.crossDomain)return{send:function(e,t){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);a=function(e){return function(){a&&(a=s=i.onload=i.onerror=i.onabort=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Ot[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=a(),s=i.onerror=a("error"),void 0!==i.onabort?i.onabort=s:i.onreadystatechange=function(){4===i.readyState&&S.setTimeout(function(){a&&s()})},a=a("abort");try{i.send(r.hasContent&&r.data||null)}catch(e){if(a)throw e}},abort:function(){a&&a()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(e,t){i=w("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(i[0])},abort:function(){r&&r()}}});var Ut,Ft=[],Bt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||w.expando+"_"+mt++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,a,s=!1!==e.jsonp&&(Bt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=w.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Bt,"$1"+i):!1!==e.jsonp&&(e.url+=(gt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},e.dataTypes[0]="json",r=S[i],S[i]=function(){a=arguments},n.always(function(){void 0===r?w(S).removeProp(i):S[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,Ft.push(i)),a&&w.isFunction(r)&&r(a[0]),a=r=void 0}),"script"}),g.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((i=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(i)):t=E),a=!n&&[],(r=A.exec(e))?[t.createElement(r[1])]:(r=fe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],r.childNodes)));var i,r,a},w.fn.load=function(e,t,n){var i,r,a,s=this,o=e.indexOf(" ");return-1<o&&(i=ct(e.slice(o)),e=e.slice(0,o)),w.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<s.length&&w.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(t){return w.grep(w.timers,function(e){return t===e.elem}).length},w.offset={setOffset:function(e,t,n){var i,r,a,s,o,l,u=w.css(e,"position"),c=w(e),d={};"static"===u&&(e.style.position="relative"),o=c.offset(),a=w.css(e,"top"),l=w.css(e,"left"),r=("absolute"===u||"fixed"===u)&&-1<(a+l).indexOf("auto")?(s=(i=c.position()).top,i.left):(s=parseFloat(a)||0,parseFloat(l)||0),w.isFunction(t)&&(t=t.call(e,n,w.extend({},o))),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):c.css(d)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){w.offset.setOffset(this,t,e)});var e,n,i,r,a=this[0];return a?a.getClientRects().length?(i=a.getBoundingClientRect(),n=(e=a.ownerDocument).documentElement,r=e.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===w.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),M(e[0],"html")||(i=e.offset()),i={top:i.top+w.css(e[0],"borderTopWidth",!0),left:i.left+w.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-w.css(n,"marginTop",!0),left:t.left-i.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||pe})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var a="pageYOffset"===r;w.fn[t]=function(e){return V(this,function(e,t,n){var i;if(w.isWindow(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===n)return i?i[r]:e[t];i?i.scrollTo(a?i.pageXOffset:n,a?n:i.pageYOffset):e[t]=n},t,e,arguments.length)}}),w.each(["top","left"],function(e,n){w.cssHooks[n]=Ue(g.pixelPosition,function(e,t){if(t)return t=Ne(e,n),Le.test(t)?w(e).position()[n]+"px":t})}),w.each({Height:"height",Width:"width"},function(s,o){w.each({padding:"inner"+s,content:o,"":"outer"+s},function(i,a){w.fn[a]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return V(this,function(e,t,n){var i;return w.isWindow(e)?0===a.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+s],i["scroll"+s],e.body["offset"+s],i["offset"+s],i["client"+s])):void 0===n?w.css(e,t,r):w.style(e,t,n,r)},o,n?e:void 0,n)}})}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=M,"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var $t=S.jQuery,jt=S.$;return w.noConflict=function(e){return S.$===w&&(S.$=jt),e&&S.jQuery===w&&(S.jQuery=$t),w},e||(S.jQuery=S.$=w),w});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var S,b,T,E,v,n,_,w,y,x,f,p,g,e,t,l,i;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(i,c,_){var g=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n},v=function(e,t,n){var i,r,a=e.cycle;for(i in a)r=a[i],e[i]="function"==typeof r?r(n,t[n]):r[n%r.length];delete e.cycle},y=function(e,t,n){_.call(this,e,t,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=y.prototype.render},x=1e-10,b=_._internals,T=b.isSelector,S=b.isArray,e=y.prototype=_.to({},.1,{}),E=[];y.version="1.20.2",e.constructor=y,e.kill()._gc=!1,y.killTweensOf=y.killDelayedCallsTo=_.killTweensOf,y.getTweensOf=_.getTweensOf,y.lagSmoothing=_.lagSmoothing,y.ticker=_.ticker,y.render=_.render,e.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),_.prototype.invalidate.call(this)},e.updateTo=function(e,t){var n,i=this.ratio,r=this.vars.immediateRender||e.immediateRender;for(n in t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),e)this.vars[n]=e[n];if(this._initted||r)if(t)this._initted=!1,r&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&_._onPluginEvent("_onDisable",this),.998<this._time/this._duration){var a=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._initted=!1,this._init(),0<this._time||r)for(var s,o=1/(1-i),l=this._firstPT;l;)s=l.s+l.c,l.c*=o,l.s=s-l.c,l=l._next;return this},e.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,r,a,s,o,l,u,c,d,h=this._dirty?this.totalDuration():this._totalDuration,f=this._time,p=this._totalTime,m=this._cycle,g=this._duration,v=this._rawPrevTime;if(h-1e-7<=e&&0<=e?(this._totalTime=h,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(v<0||e<=0&&-1e-7<=e||v===x&&"isPause"!==this.data)&&v!==e&&(n=!0,x<v&&(r="onReverseComplete")),this._rawPrevTime=c=!t||e||v===e?e:x)):e<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==p||0===g&&0<v)&&(r="onReverseComplete",i=this._reversed),e<0&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||n)&&(0<=v&&(n=!0),this._rawPrevTime=c=!t||e||v===e?e:x)),this._initted||(n=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(s=g+this._repeatDelay,this._cycle=this._totalTime/s>>0,0!==this._cycle&&this._cycle===this._totalTime/s&&p<=e&&this._cycle--,this._time=this._totalTime-this._cycle*s,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time,(d=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==d||this._initted?this._yoyoEase=d=!0===d?this._ease:d instanceof Ease?d:Ease.map[d]:(d=this.vars.ease,this._yoyoEase=d=d?d instanceof Ease?d:"function"==typeof d?new Ease(d,this.vars.easeParams):Ease.map[d]||_.defaultEase:_.defaultEase)),this.ratio=d?1-d.getRatio((g-this._time)/g):0)),this._time>g?this._time=g:this._time<0&&(this._time=0)),this._easeType&&!d?(o=this._time/g,(1===(l=this._easeType)||3===l&&.5<=o)&&(o=1-o),3===l&&(o*=2),1===(u=this._easePower)?o*=o:2===u?o*=o*o:3===u?o*=o*o*o:4===u&&(o*=o*o*o*o),1===l?this.ratio=1-o:2===l?this.ratio=o:this._time/g<.5?this.ratio=o/2:this.ratio=1-o/2):d||(this.ratio=this._ease.getRatio(this._time/g))),f!==this._time||n||m!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=p,this._rawPrevTime=v,this._cycle=m,b.lazyTweens.push(this),void(this._lazy=[e,t]);!this._time||i||d?i&&this._ease._calcEnd&&!d&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/g)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&0<=e&&(this._active=!0),0===p&&(2===this._initted&&0<e&&this._init(),this._startAt&&(0<=e?this._startAt.render(e,t,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==g||t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,t,n),t||(this._totalTime!==p||r)&&this._callback("onUpdate")),this._cycle!==m&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(this._gc&&!n||(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[r]&&this._callback(r),0===g&&this._rawPrevTime===x&&c!==x&&(this._rawPrevTime=0)))}else p!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},y.to=function(e,t,n){return new y(e,t,n)},y.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new y(e,t,n)},y.fromTo=function(e,t,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new y(e,t,i)},y.staggerTo=y.allTo=function(e,t,n,i,r,a,s){i=i||0;var o,l,u,c,d=0,h=[],f=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),r.apply(s||n.callbackScope||this,a||E)},p=n.cycle,m=n.startAt&&n.startAt.cycle;for(S(e)||("string"==typeof e&&(e=_.selector(e)||e),T(e)&&(e=g(e))),e=e||[],i<0&&((e=g(e)).reverse(),i*=-1),o=e.length-1,u=0;u<=o;u++){for(c in l={},n)l[c]=n[c];if(p&&(v(l,e,u),null!=l.duration&&(t=l.duration,delete l.duration)),m){for(c in m=l.startAt={},n.startAt)m[c]=n.startAt[c];v(l.startAt,e,u)}l.delay=d+(l.delay||0),u===o&&r&&(l.onComplete=f),h[u]=new y(e[u],t,l),d+=i}return h},y.staggerFrom=y.allFrom=function(e,t,n,i,r,a,s){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,y.staggerTo(e,t,n,i,r,a,s)},y.staggerFromTo=y.allFromTo=function(e,t,n,i,r,a,s,o){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,y.staggerTo(e,t,i,r,a,s,o)},y.delayedCall=function(e,t,n,i,r){return new y(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,useFrames:r,overwrite:0})},y.set=function(e,t){return new y(e,0,t)},y.isTweening=function(e){return 0<_.getTweensOf(e,!0).length};var a=function(e,t){for(var n=[],i=0,r=e._first;r;)r instanceof _?n[i++]=r:(t&&(n[i++]=r),i=(n=n.concat(a(r,t))).length),r=r._next;return n},d=y.getAllTweens=function(e){return a(i._rootTimeline,e).concat(a(i._rootFramesTimeline,e))};y.killAll=function(e,t,n,i){null==t&&(t=!0),null==n&&(n=!0);var r,a,s,o=d(0!=i),l=o.length,u=t&&n&&i;for(s=0;s<l;s++)a=o[s],(u||a instanceof c||(r=a.target===a.vars.onComplete)&&n||t&&!r)&&(e?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},y.killChildTweensOf=function(e,t){if(null!=e){var n,i,r,a,s,o=b.tweenLookup;if("string"==typeof e&&(e=_.selector(e)||e),T(e)&&(e=g(e)),S(e))for(a=e.length;-1<--a;)y.killChildTweensOf(e[a],t);else{for(r in n=[],o)for(i=o[r].target.parentNode;i;)i===e&&(n=n.concat(o[r].tweens)),i=i.parentNode;for(s=n.length,a=0;a<s;a++)t&&n[a].totalTime(n[a].totalDuration()),n[a]._enabled(!1,!1)}}};var r=function(e,t,n,i){t=!1!==t,n=!1!==n;for(var r,a,s=d(i=!1!==i),o=t&&n&&i,l=s.length;-1<--l;)a=s[l],(o||a instanceof c||(r=a.target===a.vars.onComplete)&&n||t&&!r)&&a.paused(e)};return y.pauseAll=function(e,t,n){r(!0,e,t,n)},y.resumeAll=function(e,t,n){r(!1,e,t,n)},y.globalTimeScale=function(e){var t=i._rootTimeline,n=_.ticker.time;return arguments.length?(e=e||x,t._startTime=n-(n-t._startTime)*t._timeScale/e,t=i._rootFramesTimeline,n=_.ticker.frame,t._startTime=n-(n-t._startTime)*t._timeScale/e,t._timeScale=i._rootTimeline._timeScale=e,e):t._timeScale},e.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},e.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},e.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},e.duration=function(e){return arguments.length?i.prototype.duration.call(this,e):this._duration},e.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},e.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},e.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},y},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(c,d,h){var f=function(e){d.call(this,e),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var t,n,i=this.vars;for(n in i)t=i[n],g(t)&&-1!==t.join("").indexOf("{self}")&&(i[n]=this._swapSelfInParams(t));g(i.tweens)&&this.add(i.tweens,0,i.align,i.stagger)},m=1e-10,e=h._internals,t=f._internals={},p=e.isSelector,g=e.isArray,v=e.lazyTweens,_=e.lazyRender,s=_gsScope._gsDefine.globals,y=function(e){var t,n={};for(t in e)n[t]=e[t];return n},x=function(e,t,n){var i,r,a=e.cycle;for(i in a)r=a[i],e[i]="function"==typeof r?r(n,t[n]):r[n%r.length];delete e.cycle},a=t.pauseCallback=function(){},b=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n},n=f.prototype=new d;return f.version="1.20.2",n.constructor=f,n.kill()._gc=n._forcingPlayhead=n._hasPause=!1,n.to=function(e,t,n,i){var r=n.repeat&&s.TweenMax||h;return t?this.add(new r(e,t,n),i):this.set(e,n,i)},n.from=function(e,t,n,i){return this.add((n.repeat&&s.TweenMax||h).from(e,t,n),i)},n.fromTo=function(e,t,n,i,r){var a=i.repeat&&s.TweenMax||h;return t?this.add(a.fromTo(e,t,n,i),r):this.set(e,i,r)},n.staggerTo=function(e,t,n,i,r,a,s,o){var l,u,c=new f({onComplete:a,onCompleteParams:s,callbackScope:o,smoothChildTiming:this.smoothChildTiming}),d=n.cycle;for("string"==typeof e&&(e=h.selector(e)||e),p(e=e||[])&&(e=b(e)),(i=i||0)<0&&((e=b(e)).reverse(),i*=-1),u=0;u<e.length;u++)(l=y(n)).startAt&&(l.startAt=y(l.startAt),l.startAt.cycle&&x(l.startAt,e,u)),d&&(x(l,e,u),null!=l.duration&&(t=l.duration,delete l.duration)),c.to(e[u],t,l,u*i);return this.add(c,r)},n.staggerFrom=function(e,t,n,i,r,a,s,o){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(e,t,n,i,r,a,s,o)},n.staggerFromTo=function(e,t,n,i,r,a,s,o,l){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,this.staggerTo(e,t,i,r,a,s,o,l)},n.call=function(e,t,n,i){return this.add(h.delayedCall(0,e,t,n),i)},n.set=function(e,t,n){return n=this._parseTimeOrLabel(n,0,!0),null==t.immediateRender&&(t.immediateRender=n===this._time&&!this._paused),this.add(new h(e,0,t),n)},f.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var n,i,r=new f(e),a=r._timeline;for(null==t&&(t=!0),a._remove(r,!0),r._startTime=0,r._rawPrevTime=r._time=r._totalTime=a._time,n=a._first;n;)i=n._next,t&&n instanceof h&&n.target===n.vars.onComplete||r.add(n,n._startTime-n._delay),n=i;return a.add(r,0),r},n.add=function(e,t,n,i){var r,a,s,o,l,u;if("number"!=typeof t&&(t=this._parseTimeOrLabel(t,0,!0,e)),!(e instanceof c)){if(e instanceof Array||e&&e.push&&g(e)){for(n=n||"normal",i=i||0,r=t,a=e.length,s=0;s<a;s++)g(o=e[s])&&(o=new f({tweens:o})),this.add(o,r),"string"!=typeof o&&"function"!=typeof o&&("sequence"===n?r=o._startTime+o.totalDuration()/o._timeScale:"start"===n&&(o._startTime-=o.delay())),r+=i;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,t);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=h.delayedCall(0,e)}if(d.prototype.add.call(this,e,t),e._time&&e.render((this.rawTime()-e._startTime)*e._timeScale,!1,!1),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(u=(l=this).rawTime()>e._startTime;l._timeline;)u&&l._timeline.smoothChildTiming?l.totalTime(l._totalTime,!0):l._gc&&l._enabled(!0,!1),l=l._timeline;return this},n.remove=function(e){if(e instanceof c){this._remove(e,!1);var t=e._timeline=e.vars.useFrames?c._rootFramesTimeline:c._rootTimeline;return e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&g(e)){for(var n=e.length;-1<--n;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},n._remove=function(e,t){return d.prototype._remove.call(this,e,t),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},n.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},n.insert=n.insertMultiple=function(e,t,n,i){return this.add(e,t||0,n,i)},n.appendMultiple=function(e,t,n,i){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,i)},n.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},n.addPause=function(e,t,n,i){var r=h.delayedCall(0,a,n,i||this);return r.vars.onComplete=r.vars.onReverseComplete=t,r.data="isPause",this._hasPause=!0,this.add(r,e)},n.removeLabel=function(e){return delete this._labels[e],this},n.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},n._parseTimeOrLabel=function(e,t,n,i){var r,a;if(i instanceof c&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&g(i)))for(a=i.length;-1<--a;)i[a]instanceof c&&i[a].timeline===this&&this.remove(i[a]);if(r=99999999999<this.duration()?this.recent().endTime(!1):this._duration,"string"==typeof t)return this._parseTimeOrLabel(t,n&&"number"==typeof e&&null==this._labels[t]?e-r:0,n);if(t=t||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=r);else{if(-1===(a=e.indexOf("=")))return null==this._labels[e]?n?this._labels[e]=r+t:t:this._labels[e]+t;t=parseInt(e.charAt(a-1)+"1",10)*Number(e.substr(a+1)),e=1<a?this._parseTimeOrLabel(e.substr(0,a-1),0,n):r}return Number(e)+t},n.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},n.stop=function(){return this.paused(!0)},n.gotoAndPlay=function(e,t){return this.play(e,t)},n.gotoAndStop=function(e,t){return this.pause(e,t)},n.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var i,r,a,s,o,l,u,c=this._dirty?this.totalDuration():this._totalDuration,d=this._time,h=this._startTime,f=this._timeScale,p=this._paused;if(c-1e-7<=e&&0<=e)this._totalTime=this._time=c,this._reversed||this._hasPausedChild()||(r=!0,s="onComplete",o=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&-1e-7<=e||this._rawPrevTime<0||this._rawPrevTime===m)&&this._rawPrevTime!==e&&this._first&&(o=!0,this._rawPrevTime>m&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:m,e=c+1e-4;else if(e<1e-7)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==m&&(0<this._rawPrevTime||e<0&&0<=this._rawPrevTime))&&(s="onReverseComplete",r=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(o=r=!0,s="onReverseComplete"):0<=this._rawPrevTime&&this._first&&(o=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:m,0===e&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;e=0,this._initted||(o=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(d<=e)for(i=this._first;i&&i._startTime<=e&&!l;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(l=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!l;)i._duration||"isPause"===i.data&&0<i._rawPrevTime&&(l=i),i=i._prev;l&&(this._time=e=l._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==d&&this._first||n||o||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&0<e&&(this._active=!0),0===d&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),d<=(u=this._time))for(i=this._first;i&&(a=i._next,u===this._time&&(!this._paused||p));)(i._active||i._startTime<=u&&!i._paused&&!i._gc)&&(l===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)),i=a;else for(i=this._last;i&&(a=i._prev,u===this._time&&(!this._paused||p));){if(i._active||i._startTime<=d&&!i._paused&&!i._gc){if(l===i){for(l=i._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,n),l=l._prev;l=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)}i=a}this._onUpdate&&(t||(v.length&&_(),this._callback("onUpdate"))),s&&(this._gc||h!==this._startTime&&f===this._timeScale||(0===this._time||c>=this.totalDuration())&&(r&&(v.length&&_(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[s]&&this._callback(s)))}},n._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof f&&e._hasPausedChild())return!0;e=e._next}return!1},n.getChildren=function(e,t,n,i){i=i||-9999999999;for(var r=[],a=this._first,s=0;a;)a._startTime<i||(a instanceof h?!1!==t&&(r[s++]=a):(!1!==n&&(r[s++]=a),!1!==e&&(s=(r=r.concat(a.getChildren(!0,t,n))).length))),a=a._next;return r},n.getTweensOf=function(e,t){var n,i,r=this._gc,a=[],s=0;for(r&&this._enabled(!0,!0),i=(n=h.getTweensOf(e)).length;-1<--i;)(n[i].timeline===this||t&&this._contains(n[i]))&&(a[s++]=n[i]);return r&&this._enabled(!1,!0),a},n.recent=function(){return this._recent},n._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},n.shiftChildren=function(e,t,n){n=n||0;for(var i,r=this._first,a=this._labels;r;)r._startTime>=n&&(r._startTime+=e),r=r._next;if(t)for(i in a)a[i]>=n&&(a[i]+=e);return this._uncache(!0)},n._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),i=n.length,r=!1;-1<--i;)n[i]._kill(e,t)&&(r=!0);return r},n.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;for(this._time=this._totalTime=0;-1<--n;)t[n]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},n.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return c.prototype.invalidate.call(this)},n._enabled=function(e,t){if(e===this._gc)for(var n=this._first;n;)n._enabled(e,!0),n=n._next;return d.prototype._enabled.call(this,e,t)},n.totalTime=function(e,t,n){this._forcingPlayhead=!0;var i=c.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,i},n.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},n.totalDuration=function(e){if(arguments.length)return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this;if(this._dirty){for(var t,n,i=0,r=this._last,a=999999999999;r;)t=r._prev,r._dirty&&r.totalDuration(),r._startTime>a&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):a=r._startTime,r._startTime<0&&!r._paused&&(i-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),a=0),i<(n=r._startTime+r._totalDuration/r._timeScale)&&(i=n),r=t;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration},n.paused=function(e){if(!e)for(var t=this._first,n=this._time;t;)t._startTime===n&&"isPause"===t.data&&(t._rawPrevTime=0),t=t._next;return c.prototype.paused.apply(this,arguments)},n.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===c._rootFramesTimeline},n.rawTime=function(e){return e&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},f},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,o,e){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},M=1e-10,i=o._internals,A=i.lazyTweens,C=i.lazyRender,l=_gsScope._gsDefine.globals,u=new e(null,null,1,0),r=n.prototype=new t;return r.constructor=n,r.kill()._gc=!1,n.version="1.20.2",r.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},r.addCallback=function(e,t,n,i){return this.add(o.delayedCall(0,e,n,i),t)},r.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var n=this.getTweensOf(e,!1),i=n.length,r=this._parseTimeOrLabel(t);-1<--i;)n[i]._startTime===r&&n[i]._enabled(!1,!1);return this},r.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},r.tweenTo=function(e,t){t=t||{};var n,i,r,a={ease:u,useFrames:this.usesFrames(),immediateRender:!1},s=t.repeat&&l.TweenMax||o;for(i in t)a[i]=t[i];return a.time=this._parseTimeOrLabel(e),n=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,r=new s(this,n,a),a.onStart=function(){r.target.paused(!0),r.vars.time!==r.target.time()&&n===r.duration()&&r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale),t.onStart&&t.onStart.apply(t.onStartScope||t.callbackScope||r,t.onStartParams||[])},r},r.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},n.immediateRender=!1!==n.immediateRender;var i=this.tweenTo(t,n);return i.duration(Math.abs(i.vars.time-e)/this._timeScale||.001)},r.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var i,r,a,s,o,l,u,c,d=this._dirty?this.totalDuration():this._totalDuration,h=this._duration,f=this._time,p=this._totalTime,m=this._startTime,g=this._timeScale,v=this._rawPrevTime,_=this._paused,y=this._cycle;if(d-1e-7<=e&&0<=e)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,s="onComplete",o=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&-1e-7<=e||v<0||v===M)&&v!==e&&this._first&&(o=!0,M<v&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:M,this._yoyo&&0!=(1&this._cycle)?this._time=e=0:e=(this._time=h)+1e-4;else if(e<1e-7)if(this._locked||(this._totalTime=this._cycle=0),((this._time=0)!==f||0===h&&v!==M&&(0<v||e<0&&0<=v)&&!this._locked)&&(s="onReverseComplete",r=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(o=r=!0,s="onReverseComplete"):0<=v&&this._first&&(o=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=h||!t||e||this._rawPrevTime===e?e:M,0===e&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;e=0,this._initted||(o=!0)}else if(0===h&&v<0&&(o=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(l=h+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&p<=e&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=h-this._time),this._time>h?e=(this._time=h)+1e-4:this._time<0?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t){if(f<=(e=this._time)||this._repeat&&y!==this._cycle)for(i=this._first;i&&i._startTime<=e&&!u;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(u=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!u;)i._duration||"isPause"===i.data&&0<i._rawPrevTime&&(u=i),i=i._prev;u&&u._startTime<h&&(this._time=e=u._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==y&&!this._locked){var x=this._yoyo&&0!=(1&y),b=x===(this._yoyo&&0!=(1&this._cycle)),T=this._totalTime,S=this._cycle,E=this._rawPrevTime,w=this._time;if(this._totalTime=y*h,this._cycle<y?x=!x:this._totalTime+=h,this._time=f,this._rawPrevTime=0===h?v-1e-4:v,this._cycle=y,this._locked=!0,f=x?0:h,this.render(f,t,0===h),t||this._gc||this.vars.onRepeat&&(this._cycle=S,this._locked=!1,this._callback("onRepeat")),f!==this._time)return;if(b&&(this._cycle=y,this._locked=!0,f=x?h+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!_)return;this._time=w,this._totalTime=T,this._cycle=S,this._rawPrevTime=E}if(this._time!==f&&this._first||n||o||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==p&&0<e&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||t||this._callback("onStart")),f<=(c=this._time))for(i=this._first;i&&(a=i._next,c===this._time&&(!this._paused||_));)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(u===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)),i=a;else for(i=this._last;i&&(a=i._prev,c===this._time&&(!this._paused||_));){if(i._active||i._startTime<=f&&!i._paused&&!i._gc){if(u===i){for(u=i._prev;u&&u.endTime()>this._time;)u.render(u._reversed?u.totalDuration()-(e-u._startTime)*u._timeScale:(e-u._startTime)*u._timeScale,t,n),u=u._prev;u=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)}i=a}this._onUpdate&&(t||(A.length&&C(),this._callback("onUpdate"))),s&&(this._locked||this._gc||m!==this._startTime&&g===this._timeScale||(0===this._time||d>=this.totalDuration())&&(r&&(A.length&&C(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[s]&&this._callback(s)))}else p!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},r.getActive=function(e,t,n){null==e&&(e=!0),null==t&&(t=!0),null==n&&(n=!1);var i,r,a=[],s=this.getChildren(e,t,n),o=0,l=s.length;for(i=0;i<l;i++)(r=s[i]).isActive()&&(a[o++]=r);return a},r.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,n=this.getLabelsArray(),i=n.length;for(t=0;t<i;t++)if(n[t].time>e)return n[t].name;return null},r.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),n=t.length;-1<--n;)if(t[n].time<e)return t[n].name;return null},r.getLabelsArray=function(){var e,t=[],n=0;for(e in this._labels)t[n++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},r.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},r.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},r.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},r.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},r.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},r.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},r.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},r.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},r.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},n},!0),S=180/Math.PI,b=[],T=[],E=[],v={},n=_gsScope._gsDefine.globals,_=function(e,t,n,i){n===i&&(n=i-(i-t)/1e6),e===t&&(t=e+(n-e)/1e6),this.a=e,this.b=t,this.c=n,this.d=i,this.da=i-e,this.ca=n-e,this.ba=t-e},w=function(e,t,n,i){var r={a:e},a={},s={},o={c:i},l=(e+t)/2,u=(t+n)/2,c=(n+i)/2,d=(l+u)/2,h=(u+c)/2,f=(h-d)/8;return r.b=l+(e-l)/4,a.b=d+f,r.c=a.a=(r.b+a.b)/2,a.c=s.a=(d+h)/2,s.b=h-f,o.b=c+(i-c)/4,s.c=o.a=(s.b+o.b)/2,[r,a,s,o]},y=function(e,t,n,i,r){var a,s,o,l,u,c,d,h,f,p,m,g,v,_=e.length-1,y=0,x=e[0].a;for(a=0;a<_;a++)s=(u=e[y]).a,o=u.d,l=e[y+1].d,h=r?(m=b[a],v=((g=T[a])+m)*t*.25/(i?.5:E[a]||.5),o-((c=o-(o-s)*(i?.5*t:0!==m?v/m:0))+(((d=o+(l-o)*(i?.5*t:0!==g?v/g:0))-c)*(3*m/(m+g)+.5)/4||0))):o-((c=o-(o-s)*t*.5)+(d=o+(l-o)*t*.5))/2,c+=h,d+=h,u.c=f=c,u.b=0!==a?x:x=u.a+.6*(u.c-u.a),u.da=o-s,u.ca=f-s,u.ba=x-s,n?(p=w(s,x,f,o),e.splice(y,1,p[0],p[1],p[2],p[3]),y+=4):y++,x=d;(u=e[y]).b=x,u.c=x+.4*(u.d-x),u.da=u.d-u.a,u.ca=u.c-u.a,u.ba=x-u.a,n&&(p=w(u.a,x,u.c,u.d),e.splice(y,1,p[0],p[1],p[2],p[3]))},x=function(e,t,n,i){var r,a,s,o,l,u,c=[];if(i)for(a=(e=[i].concat(e)).length;-1<--a;)"string"==typeof(u=e[a][t])&&"="===u.charAt(1)&&(e[a][t]=i[t]+Number(u.charAt(0)+u.substr(2)));if((r=e.length-2)<0)return c[0]=new _(e[0][t],0,0,e[0][t]),c;for(a=0;a<r;a++)s=e[a][t],o=e[a+1][t],c[a]=new _(s,0,0,o),n&&(l=e[a+2][t],b[a]=(b[a]||0)+(o-s)*(o-s),T[a]=(T[a]||0)+(l-o)*(l-o));return c[a]=new _(e[a][t],0,0,e[a+1][t]),c},f=function(e,t,n,i,r,a){var s,o,l,u,c,d,h,f,p={},m=[],g=a||e[0];for(o in r="string"==typeof r?","+r+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==t&&(t=1),e[0])m.push(o);if(1<e.length){for(f=e[e.length-1],h=!0,s=m.length;-1<--s;)if(o=m[s],.05<Math.abs(g[o]-f[o])){h=!1;break}h&&(e=e.concat(),a&&e.unshift(a),e.push(e[1]),a=e[e.length-3])}for(b.length=T.length=E.length=0,s=m.length;-1<--s;)o=m[s],v[o]=-1!==r.indexOf(","+o+","),p[o]=x(e,o,v[o],a);for(s=b.length;-1<--s;)b[s]=Math.sqrt(b[s]),T[s]=Math.sqrt(T[s]);if(!i){for(s=m.length;-1<--s;)if(v[o])for(d=(l=p[m[s]]).length-1,u=0;u<d;u++)c=l[u+1].da/T[u]+l[u].da/b[u]||0,E[u]=(E[u]||0)+c*c;for(s=E.length;-1<--s;)E[s]=Math.sqrt(E[s])}for(s=m.length,u=n?4:1;-1<--s;)l=p[o=m[s]],y(l,t,n,i,v[o]),h&&(l.splice(0,u),l.splice(l.length-u,u));return p},p=function(e,t,n){for(var i,r,a,s,o,l,u,c,d,h,f,p=1/n,m=e.length;-1<--m;)for(a=(h=e[m]).a,s=h.d-a,o=h.c-a,l=h.b-a,i=r=0,c=1;c<=n;c++)i=r-(r=((u=p*c)*u*s+3*(d=1-u)*(u*o+d*l))*u),t[f=m*n+c-1]=(t[f]||0)+i*i},g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var i,r,a,s,o,l=t.values||[],u={},c=l[0],d=t.autoRotate||n.vars.orientToBezier;for(i in this._autoRotate=d?d instanceof Array?d:[["x","y","rotation",!0===d?0:Number(d)||0]]:null,c)this._props.push(i);for(a=this._props.length;-1<--a;)i=this._props[a],this._overwriteProps.push(i),r=this._func[i]="function"==typeof e[i],u[i]=r?e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(e[i]),o||u[i]!==l[0][i]&&(o=u);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?f(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,o):function(e,t,n){var i,r,a,s,o,l,u,c,d,h,f,p={},m="cubic"===(t=t||"soft")?3:2,g="soft"===t,v=[];if(g&&n&&(e=[n].concat(e)),null==e||e.length<m+1)throw"invalid Bezier data";for(d in e[0])v.push(d);for(l=v.length;-1<--l;){for(p[d=v[l]]=o=[],h=0,c=e.length,u=0;u<c;u++)i=null==n?e[u][d]:"string"==typeof(f=e[u][d])&&"="===f.charAt(1)?n[d]+Number(f.charAt(0)+f.substr(2)):Number(f),g&&1<u&&u<c-1&&(o[h++]=(i+o[h-2])/2),o[h++]=i;for(c=h-m+1,u=h=0;u<c;u+=m)i=o[u],r=o[u+1],a=o[u+2],s=2===m?0:o[u+3],o[h++]=f=3===m?new _(i,r,a,s):new _(i,(2*r+i)/3,(2*r+a)/3,a);o.length=h}return p}(l,t.type,u),this._segCount=this._beziers[i].length,this._timeRes){var h=function(e,t){var n,i,r,a,s=[],o=[],l=0,u=0,c=(t=t>>0||6)-1,d=[],h=[];for(n in e)p(e[n],s,t);for(r=s.length,i=0;i<r;i++)l+=Math.sqrt(s[i]),h[a=i%t]=l,a===c&&(u+=l,d[a=i/t>>0]=h,o[a]=u,l=0,h=[]);return{length:u,lengths:o,segments:d}}(this._beziers,this._timeRes);this._length=h.length,this._lengths=h.lengths,this._segments=h.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(d=this._autoRotate)for(this._initialRotations=[],d[0]instanceof Array||(this._autoRotate=d=[d]),a=d.length;-1<--a;){for(s=0;s<3;s++)i=d[a][s],this._func[i]="function"==typeof e[i]&&e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)];i=d[a][2],this._initialRotations[a]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(e){var t,n,i,r,a,s,o,l,u,c,d=this._segCount,h=this._func,f=this._target,p=e!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,e*=this._length,i=this._li,e>this._l2&&i<d-1){for(l=d-1;i<l&&(this._l2=u[++i])<=e;);this._l1=u[i-1],this._li=i,this._curSeg=c=this._segments[i],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&0<i){for(;0<i&&(this._l1=u[--i])>=e;);0===i&&e<this._l1?this._l1=0:i++,this._l2=u[i],this._li=i,this._curSeg=c=this._segments[i],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(t=i,e-=this._l1,i=this._si,e>this._s2&&i<c.length-1){for(l=c.length-1;i<l&&(this._s2=c[++i])<=e;);this._s1=c[i-1],this._si=i}else if(e<this._s1&&0<i){for(;0<i&&(this._s1=c[--i])>=e;);0===i&&e<this._s1?this._s1=0:i++,this._s2=c[i],this._si=i}s=(i+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else s=(e-(t=e<0?0:1<=e?d-1:d*e>>0)*(1/d))*d;for(n=1-s,i=this._props.length;-1<--i;)r=this._props[i],o=(s*s*(a=this._beziers[r][t]).da+3*n*(s*a.ca+n*a.ba))*s+a.a,this._mod[r]&&(o=this._mod[r](o,f)),h[r]?f[r](o):f[r]=o;if(this._autoRotate){var m,g,v,_,y,x,b,T=this._autoRotate;for(i=T.length;-1<--i;)r=T[i][2],x=T[i][3]||0,b=!0===T[i][4]?1:S,a=this._beziers[T[i][0]],m=this._beziers[T[i][1]],a&&m&&(a=a[t],m=m[t],g=a.a+(a.b-a.a)*s,g+=((_=a.b+(a.c-a.b)*s)-g)*s,_+=(a.c+(a.d-a.c)*s-_)*s,v=m.a+(m.b-m.a)*s,v+=((y=m.b+(m.c-m.b)*s)-v)*s,y+=(m.c+(m.d-m.c)*s-y)*s,o=p?Math.atan2(y-v,_-g)*b+x:this._initialRotations[i],this._mod[r]&&(o=this._mod[r](o,f)),h[r]?f[r](o):f[r]=o)}}}),e=g.prototype,g.bezierThrough=f,g.cubicToQuadratic=w,g._autoCSS=!0,g.quadraticToCubic=function(e,t,n){return new _(e,(2*t+e)/3,(2*t+n)/3,n)},g._cssRegister=function(){var e=n.CSSPlugin;if(e){var t=e._internals,f=t._parseToProxy,p=t._setPluginRatio,m=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,n,i,r,a){t instanceof Array&&(t={values:t}),a=new g;var s,o,l,u=t.values,c=u.length-1,d=[],h={};if(c<0)return r;for(s=0;s<=c;s++)l=f(e,u[s],i,r,a,c!==s),d[s]=l.end;for(o in t)h[o]=t[o];return h.values=d,(r=new m(e,"bezier",0,0,l.pt,2)).data=l,r.plugin=a,r.setRatio=p,0===h.autoRotate&&(h.autoRotate=!0),!h.autoRotate||h.autoRotate instanceof Array||(s=!0===h.autoRotate?0:Number(h.autoRotate),h.autoRotate=null!=l.end.left?[["left","top","rotation",s,!1]]:null!=l.end.x&&[["x","y","rotation",s,!1]]),h.autoRotate&&(i._transform||i._enableTransforms(!1),l.autoRotate=i._target._gsTransform,l.proxy.rotation=l.autoRotate.rotation||0,i._overwriteProps.push("rotation")),a._onInitTween(l.proxy,h,i._tween),r}})}},e._mod=function(e){for(var t,n=this._overwriteProps,i=n.length;-1<--i;)(t=e[n[i]])&&"function"==typeof t&&(this._mod[n[i]]=t)},e._kill=function(e){var t,n,i=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],n=i.length;-1<--n;)i[n]===t&&i.splice(n,1);if(i=this._autoRotate)for(n=i.length;-1<--n;)e[i[n][2]]&&i.splice(n,1);return this._super._kill.call(this,e)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,$){var p,E,M,m,j=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=j.prototype.setRatio},u=_gsScope._gsDefine.globals,g={},e=j.prototype=new a("css");(e.constructor=j).version="1.20.0",j.API=2,j.defaultTransformPerspective=0,j.defaultSkewType="compensated",j.defaultSmoothOrigin=!0,e="px",j.suffixMap={top:e,right:e,bottom:e,left:e,width:e,height:e,fontSize:e,padding:e,margin:e,perspective:e,lineHeight:""};var A,v,_,U,y,w,C,P,t,n,R=/(?:\-|\.|\b)(\d|\.|e\-)+/g,D=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,c=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,k=/(?:\d|\-|\+|=|#|\.)*/g,I=/opacity *= *([^)]*)/i,b=/opacity:([^;]*)/i,s=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,o=/([A-Z])/g,l=/-([a-z])/gi,S=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,d=function(e,t){return t.toUpperCase()},f=/(?:Left|Right|Width)/i,h=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,L=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,O=/,(?=[^\)]*(?:\(|$))/gi,N=/[\s,\(]/i,F=Math.PI/180,V=180/Math.PI,B={},i={style:{}},H=_gsScope.document||{createElement:function(){return i}},z=function(e,t){return H.createElementNS?H.createElementNS(t||"http://www.w3.org/1999/xhtml",e):H.createElement(e)},G=z("div"),q=z("img"),r=j._internals={_specialProps:g},W=(_gsScope.navigator||{}).userAgent||"",Y=(t=W.indexOf("Android"),n=z("a"),_=-1!==W.indexOf("Safari")&&-1===W.indexOf("Chrome")&&(-1===t||3<parseFloat(W.substr(t+8,2))),y=_&&parseFloat(W.substr(W.indexOf("Version/")+8,2))<6,U=-1!==W.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W))&&(w=parseFloat(RegExp.$1)),!!n&&(n.style.cssText="top:1px;opacity:.55;",/^0.55/.test(n.style.opacity))),X=function(e){return I.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},K=function(e){_gsScope.console&&console.log(e)},Q="",Z="",J=function(e,t){var n,i,r=(t=t||G).style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;-1<--i&&void 0===r[n[i]+e];);return 0<=i?(Q="-"+(Z=3===i?"ms":n[i]).toLowerCase()+"-",Z+e):null},ee=H.defaultView?H.defaultView.getComputedStyle:function(){},te=j.getStyle=function(e,t,n,i,r){var a;return Y||"opacity"!==t?(!i&&e.style[t]?a=e.style[t]:(n=n||ee(e))?a=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(o,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==r||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:r):X(e)},ne=r.convertToPixels=function(e,t,n,i,r){if("px"===i||!i&&"lineHeight"!==t)return n;if("auto"===i||!n)return 0;var a,s,o,l=f.test(t),u=e,c=G.style,d=n<0,h=1===n;if(d&&(n=-n),h&&(n*=100),"lineHeight"!==t||i)if("%"===i&&-1!==t.indexOf("border"))a=n/100*(l?e.clientWidth:e.clientHeight);else{if(c.cssText="border:0 solid red;position:"+te(e,"position")+";line-height:0;","%"!==i&&u.appendChild&&"v"!==i.charAt(0)&&"rem"!==i)c[l?"borderLeftWidth":"borderTopWidth"]=n+i;else{if(u=e.parentNode||H.body,-1!==te(u,"display").indexOf("flex")&&(c.position="absolute"),s=u._gsCache,o=$.ticker.frame,s&&l&&s.time===o)return s.width*n/100;c[l?"width":"height"]=n+i}u.appendChild(G),a=parseFloat(G[l?"offsetWidth":"offsetHeight"]),u.removeChild(G),l&&"%"===i&&!1!==j.cacheWidths&&((s=u._gsCache=u._gsCache||{}).time=o,s.width=a/n*100),0!==a||r||(a=ne(e,t,n,i,!0))}else s=ee(e).lineHeight,e.style.lineHeight=n,a=parseFloat(ee(e).lineHeight),e.style.lineHeight=s;return h&&(a/=100),d?-a:a},ie=r.calculateOffset=function(e,t,n){if("absolute"!==te(e,"position",n))return 0;var i="left"===t?"Left":"Top",r=te(e,"margin"+i,n);return e["offset"+i]-(ne(e,t,parseFloat(r),r.replace(k,""))||0)},re=function(e,t){var n,i,r,a={};if(t=t||ee(e,null))if(n=t.length)for(;-1<--n;)-1!==(r=t[n]).indexOf("-transform")&&Oe!==r||(a[r.replace(l,d)]=t.getPropertyValue(r));else for(n in t)-1!==n.indexOf("Transform")&&Le!==n||(a[n]=t[n]);else if(t=e.currentStyle||e.style)for(n in t)"string"==typeof n&&void 0===a[n]&&(a[n.replace(l,d)]=t[n]);return Y||(a.opacity=X(e)),i=Ye(e,t,!1),a.rotation=i.rotation,a.skewX=i.skewX,a.scaleX=i.scaleX,a.scaleY=i.scaleY,a.x=i.x,a.y=i.y,Ue&&(a.z=i.z,a.rotationX=i.rotationX,a.rotationY=i.rotationY,a.scaleZ=i.scaleZ),a.filters&&delete a.filters,a},ae=function(e,t,n,i,r){var a,s,o,l={},u=e.style;for(s in n)"cssText"!==s&&"length"!==s&&isNaN(s)&&(t[s]!==(a=n[s])||r&&r[s])&&-1===s.indexOf("Origin")&&("number"!=typeof a&&"string"!=typeof a||(l[s]="auto"!==a||"left"!==s&&"top"!==s?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[s]||""===t[s].replace(c,"")?a:0:ie(e,s),void 0!==u[s]&&(o=new xe(u,s,u[s],o))));if(i)for(s in i)"className"!==s&&(l[s]=i[s]);return{difs:l,firstMPT:o}},se={width:["Left","Right"],height:["Top","Bottom"]},oe=["marginLeft","marginRight","marginTop","marginBottom"],le=function(e,t,n){if("svg"===(e.nodeName+"").toLowerCase())return(n||ee(e))[t]||0;if(e.getCTM&&Ge(e))return e.getBBox()[t]||0;var i=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),r=se[t],a=r.length;for(n=n||ee(e,null);-1<--a;)i-=parseFloat(te(e,"padding"+r[a],n,!0))||0,i-=parseFloat(te(e,"border"+r[a]+"Width",n,!0))||0;return i},ue=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";null!=e&&""!==e||(e="0 0");var n,i=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":i[0],a=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":i[1];if(3<i.length&&!t){for(i=e.split(", ").join(",").split(","),e=[],n=0;n<i.length;n++)e.push(ue(i[n]));return e.join(",")}return null==a?a="center"===r?"50%":"0":"center"===a&&(a="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+a+(2<i.length?" "+i[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==a.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===a.charAt(1),t.ox=parseFloat(r.replace(c,"")),t.oy=parseFloat(a.replace(c,"")),t.v=e),t||e},ce=function(e,t){return"function"==typeof e&&(e=e(P,C)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},de=function(e,t){return"function"==typeof e&&(e=e(P,C)),null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},he=function(e,t,n,i){var r,a,s,o;return"function"==typeof e&&(e=e(P,C)),(s=null==e?t:"number"==typeof e?e:(360,r=e.split("_"),a=((o="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===e.indexOf("rad")?1:V)-(o?0:t),r.length&&(i&&(i[n]=t+a),-1!==e.indexOf("short")&&(a%=360)!==a%180&&(a=a<0?a+360:a-360),-1!==e.indexOf("_cw")&&a<0?a=(a+3599999999640)%360-360*(a/360|0):-1!==e.indexOf("ccw")&&0<a&&(a=(a-3599999999640)%360-360*(a/360|0))),t+a))<1e-6&&-1e-6<s&&(s=0),s},fe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pe=function(e,t,n){return 255*(6*(e=e<0?e+1:1<e?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)+.5|0},me=j.parseColor=function(e,t){var n,i,r,a,s,o,l,u,c,d,h;if(e)if("number"==typeof e)n=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),fe[e])n=fe[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(i=e.charAt(1))+i+(r=e.charAt(2))+r+(a=e.charAt(3))+a),n=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(n=h=e.match(R),t){if(-1!==e.indexOf("="))return e.match(D)}else s=Number(n[0])%360/360,o=Number(n[1])/100,i=2*(l=Number(n[2])/100)-(r=l<=.5?l*(o+1):l+o-l*o),3<n.length&&(n[3]=Number(e[3])),n[0]=pe(s+1/3,i,r),n[1]=pe(s,i,r),n[2]=pe(s-1/3,i,r);else n=e.match(R)||fe.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),3<n.length&&(n[3]=Number(n[3]))}else n=fe.black;return t&&!h&&(i=n[0]/255,r=n[1]/255,a=n[2]/255,l=((u=Math.max(i,r,a))+(c=Math.min(i,r,a)))/2,u===c?s=o=0:(d=u-c,o=.5<l?d/(2-u-c):d/(u+c),s=u===i?(r-a)/d+(r<a?6:0):u===r?(a-i)/d+2:(i-r)/d+4,s*=60),n[0]=s+.5|0,n[1]=100*o+.5|0,n[2]=100*l+.5|0),n},ge=function(e,t){var n,i,r,a=e.match(ve)||[],s=0,o="";if(!a.length)return e;for(n=0;n<a.length;n++)i=a[n],s+=(r=e.substr(s,e.indexOf(i,s)-s)).length+i.length,3===(i=me(i,t)).length&&i.push(1),o+=r+(t?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return o+e.substr(s)},ve="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(e in fe)ve+="|"+e+"\\b";ve=new RegExp(ve+")","gi"),j.colorStringFilter=function(e){var t,n=e[0]+" "+e[1];ve.test(n)&&(t=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),e[0]=ge(e[0],t),e[1]=ge(e[1],t)),ve.lastIndex=0},$.defaultStringFilter||($.defaultStringFilter=j.colorStringFilter);var _e=function(e,t,a,s){if(null==e)return function(e){return e};var o,l=t?(e.match(ve)||[""])[0]:"",u=e.split(l).join("").match(x)||[],c=e.substr(0,e.indexOf(u[0])),d=")"===e.charAt(e.length-1)?")":"",h=-1!==e.indexOf(" ")?" ":",",f=u.length,p=0<f?u[0].replace(R,""):"";return f?o=t?function(e){var t,n,i,r;if("number"==typeof e)e+=p;else if(s&&O.test(e)){for(r=e.replace(O,"|").split("|"),i=0;i<r.length;i++)r[i]=o(r[i]);return r.join(",")}if(t=(e.match(ve)||[l])[0],i=(n=e.split(t).join("").match(x)||[]).length,f>i--)for(;++i<f;)n[i]=a?n[(i-1)/2|0]:u[i];return c+n.join(h)+h+t+d+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,n,i;if("number"==typeof e)e+=p;else if(s&&O.test(e)){for(n=e.replace(O,"|").split("|"),i=0;i<n.length;i++)n[i]=o(n[i]);return n.join(",")}if(i=(t=e.match(x)||[]).length,f>i--)for(;++i<f;)t[i]=a?t[(i-1)/2|0]:u[i];return c+t.join(h)+d}:function(e){return e}},ye=function(u){return u=u.split(","),function(e,t,n,i,r,a,s){var o,l=(t+"").split(" ");for(s={},o=0;o<4;o++)s[u[o]]=l[o]=l[o]||l[(o-1)/2>>0];return i.parse(e,s,r,a)}},xe=(r._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,n,i,r,a,s=this.data,o=s.proxy,l=s.firstMPT;l;)t=o[l.v],l.r?t=Math.round(t):t<1e-6&&-1e-6<t&&(t=0),l.t[l.p]=t,l=l._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod(o.rotation,this.t):o.rotation),1===e||0===e)for(l=s.firstMPT,a=1===e?"e":"b";l;){if((n=l.t).type){if(1===n.type){for(r=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n[a]=r}}else n[a]=n.s+n.xs0;l=l._next}},function(e,t,n,i,r){this.t=e,this.p=t,this.v=n,this.r=r,i&&((i._prev=this)._next=i)}),be=(r._parseToProxy=function(e,t,n,i,r,a){var s,o,l,u,c,d=i,h={},f={},p=n._transform,m=B;for(n._transform=null,B=t,i=c=n.parse(e,t,i,r),B=m,a&&(n._transform=p,d&&(d._prev=null,d._prev&&(d._prev._next=null)));i&&i!==d;){if(i.type<=1&&(f[o=i.p]=i.s+i.c,h[o]=i.s,a||(u=new xe(i,"s",o,u,i.r),i.c=0),1===i.type))for(s=i.l;0<--s;)l="xn"+s,f[o=i.p+"_"+l]=i.data[l],h[o]=i[l],a||(u=new xe(i,l,o,u,i.rxp[l]));i=i._next}return{proxy:h,end:f,firstMPT:u,pt:c}},r.CSSPropTween=function(e,t,n,i,r,a,s,o,l,u,c){this.t=e,this.p=t,this.s=n,this.c=i,this.n=s||t,e instanceof be||m.push(this.n),this.r=o,this.type=a||0,l&&(this.pr=l,p=!0),this.b=void 0===u?n:u,this.e=void 0===c?n+i:c,r&&((this._next=r)._prev=this)}),Te=function(e,t,n,i,r,a){var s=new be(e,t,n,i-n,r,-1,a);return s.b=n,s.e=s.xs0=i,s},Se=j.parseComplex=function(e,t,n,i,r,a,s,o,l,u){n=n||a||"","function"==typeof i&&(i=i(P,C)),s=new be(e,t,0,0,s,u?2:1,null,!1,o,n,i),i+="",r&&ve.test(i+n)&&(i=[n,i],j.colorStringFilter(i),n=i[0],i=i[1]);var c,d,h,f,p,m,g,v,_,y,x,b,T,S=n.split(", ").join(",").split(" "),E=i.split(", ").join(",").split(" "),w=S.length,M=!1!==A;for(-1===i.indexOf(",")&&-1===n.indexOf(",")||(S=S.join(" ").replace(O,", ").split(" "),E=E.join(" ").replace(O,", ").split(" "),w=S.length),w!==E.length&&(w=(S=(a||"").split(" ")).length),s.plugin=l,s.setRatio=u,c=ve.lastIndex=0;c<w;c++)if(f=S[c],p=E[c],(v=parseFloat(f))||0===v)s.appendXtra("",v,ce(p,v),p.replace(D,""),M&&-1!==p.indexOf("px"),!0);else if(r&&ve.test(f))b=")"+((b=p.indexOf(")")+1)?p.substr(b):""),T=-1!==p.indexOf("hsl")&&Y,y=p,f=me(f,T),p=me(p,T),(_=6<f.length+p.length)&&!Y&&0===p[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(E[c]).join("transparent")):(Y||(_=!1),T?s.appendXtra(y.substr(0,y.indexOf("hsl"))+(_?"hsla(":"hsl("),f[0],ce(p[0],f[0]),",",!1,!0).appendXtra("",f[1],ce(p[1],f[1]),"%,",!1).appendXtra("",f[2],ce(p[2],f[2]),_?"%,":"%"+b,!1):s.appendXtra(y.substr(0,y.indexOf("rgb"))+(_?"rgba(":"rgb("),f[0],p[0]-f[0],",",!0,!0).appendXtra("",f[1],p[1]-f[1],",",!0).appendXtra("",f[2],p[2]-f[2],_?",":b,!0),_&&(f=f.length<4?1:f[3],s.appendXtra("",f,(p.length<4?1:p[3])-f,b,!1))),ve.lastIndex=0;else if(m=f.match(R)){if(!(g=p.match(D))||g.length!==m.length)return s;for(d=h=0;d<m.length;d++)x=m[d],y=f.indexOf(x,h),s.appendXtra(f.substr(h,y-h),Number(x),ce(g[d],x),"",M&&"px"===f.substr(y+x.length,2),0===d),h=y+x.length;s["xs"+s.l]+=f.substr(h)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+p:p;if(-1!==i.indexOf("=")&&s.data){for(b=s.xs0+s.data.s,c=1;c<s.l;c++)b+=s["xs"+c]+s.data["xn"+c];s.e=b+s["xs"+c]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},Ee=9;for((e=be.prototype).l=e.pr=0;0<--Ee;)e["xn"+Ee]=0,e["xs"+Ee]="";e.xs0="",e._next=e._prev=e.xfirst=e.data=e.plugin=e.setRatio=e.rxp=null,e.appendXtra=function(e,t,n,i,r,a){var s=this,o=s.l;return s["xs"+o]+=a&&(o||s["xs"+o])?" "+e:e||"",n||0===o||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=i||"",0<o?(s.data["xn"+o]=t+n,s.rxp["xn"+o]=r,s["xn"+o]=t,s.plugin||(s.xfirst=new be(s,"xn"+o,t,n,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0)):(s.data={s:t+n},s.rxp={},s.s=t,s.c=n,s.r=r),s):(s["xs"+o]+=t+(i||""),s)};var we=function(e,t){t=t||{},this.p=t.prefix&&J(e)||e,g[e]=g[this.p]=this,this.format=t.formatter||_e(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},Me=r._registerComplexSpecialProp=function(e,t,n){"object"!=typeof t&&(t={parser:n});var i,r=e.split(","),a=t.defaultValue;for(n=n||[a],i=0;i<r.length;i++)t.prefix=0===i&&t.prefix,t.defaultValue=n[i]||a,new we(r[i],t)},Ae=r._registerPluginProp=function(e){if(!g[e]){var l=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Me(e,{parser:function(e,t,n,i,r,a,s){var o=u.com.greensock.plugins[l];return o?(o._cssRegister(),g[n].parse(e,t,n,i,r,a,s)):(K("Error: "+l+" js file not loaded."),r)}})}};(e=we.prototype).parseComplex=function(e,t,n,i,r,a){var s,o,l,u,c,d,h=this.keyword;if(this.multi&&(O.test(n)||O.test(t)?(o=t.replace(O,"|").split("|"),l=n.replace(O,"|").split("|")):h&&(o=[t],l=[n])),l){for(u=l.length>o.length?l.length:o.length,s=0;s<u;s++)t=o[s]=o[s]||this.dflt,n=l[s]=l[s]||this.dflt,h&&(c=t.indexOf(h))!==(d=n.indexOf(h))&&(-1===d?o[s]=o[s].split(h).join(""):-1===c&&(o[s]+=" "+h));t=o.join(", "),n=l.join(", ")}return Se(e,this.p,t,n,this.clrs,this.dflt,i,this.pr,r,a)},e.parse=function(e,t,n,i,r,a,s){return this.parseComplex(e.style,this.format(te(e,this.p,M,!1,this.dflt)),this.format(t),r,a)},j.registerSpecialProp=function(e,l,u){Me(e,{parser:function(e,t,n,i,r,a,s){var o=new be(e,n,0,0,r,2,n,!1,u);return o.plugin=a,o.setRatio=l(e,t,i._tween,n),o},priority:u})},j.useSVGTransformAttr=!0;var Ce,Pe,Re,De,ke,Ie="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Le=J("transform"),Oe=Q+"transform",Ne=J("transformOrigin"),Ue=null!==J("perspective"),Fe=r.Transform=function(){this.perspective=parseFloat(j.defaultTransformPerspective)||0,this.force3D=!(!1===j.defaultForce3D||!Ue)&&(j.defaultForce3D||"auto")},Be=_gsScope.SVGElement,$e=function(e,t,n){var i,r=H.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(i in n)r.setAttributeNS(null,i.replace(a,"$1-$2").toLowerCase(),n[i]);return t.appendChild(r),r},je=H.documentElement||{},Ve=(ke=w||/Android/i.test(W)&&!_gsScope.chrome,H.createElementNS&&!ke&&(Pe=$e("svg",je),De=(Re=$e("rect",Pe,{width:100,height:50,x:100})).getBoundingClientRect().width,Re.style[Ne]="50% 50%",Re.style[Le]="scaleX(0.5)",ke=De===Re.getBoundingClientRect().width&&!(U&&Ue),je.removeChild(Pe)),ke),He=function(e,t,n,i,r,a){var s,o,l,u,c,d,h,f,p,m,g,v,_,y,x=e._gsTransform,b=We(e,!0);x&&(_=x.xOrigin,y=x.yOrigin),(!i||(s=i.split(" ")).length<2)&&(0===(h=e.getBBox()).x&&0===h.y&&h.width+h.height===0&&(h={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),s=[(-1!==(t=ue(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*h.width:parseFloat(t[0]))+h.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*h.height:parseFloat(t[1]))+h.y]),n.xOrigin=u=parseFloat(s[0]),n.yOrigin=c=parseFloat(s[1]),i&&b!==qe&&(d=b[0],h=b[1],f=b[2],p=b[3],m=b[4],g=b[5],(v=d*p-h*f)&&(o=u*(p/v)+c*(-f/v)+(f*g-p*m)/v,l=u*(-h/v)+c*(d/v)-(d*g-h*m)/v,u=n.xOrigin=s[0]=o,c=n.yOrigin=s[1]=l)),x&&(a&&(n.xOffset=x.xOffset,n.yOffset=x.yOffset,x=n),r||!1!==r&&!1!==j.defaultSmoothOrigin?(o=u-_,l=c-y,x.xOffset+=o*b[0]+l*b[2]-o,x.yOffset+=o*b[1]+l*b[3]-l):x.xOffset=x.yOffset=0),a||e.setAttribute("data-svg-origin",s.join(" "))},ze=function(e){var t,n=z("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(je.appendChild(n),n.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=ze}catch(e){}else this._originalGetBBox&&(t=this._originalGetBBox());return r?i.insertBefore(this,r):i.appendChild(this),je.removeChild(n),this.style.cssText=a,t},Ge=function(e){return!(!(Be&&e.getCTM&&function(t){try{return t.getBBox()}catch(e){return ze.call(t,!0)}}(e))||e.parentNode&&!e.ownerSVGElement)},qe=[1,0,0,1,0,0],We=function(e,t){var n,i,r,a,s,o,l=e._gsTransform||new Fe,u=e.style;if(Le?i=te(e,Oe,null,!0):e.currentStyle&&(i=(i=e.currentStyle.filter.match(h))&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),l.x||0,l.y||0].join(","):""),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,!Le||!(o="none"===ee(e).display)&&e.parentNode||(o&&(a=u.display,u.display="block"),e.parentNode||(s=1,je.appendChild(e)),n=!(i=te(e,Oe,null,!0))||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,a?u.display=a:o&&Ze(u,"display"),s&&je.removeChild(e)),(l.svg||e.getCTM&&Ge(e))&&(n&&-1!==(u[Le]+"").indexOf("matrix")&&(i=u[Le],n=0),r=e.getAttribute("transform"),n&&r&&(-1!==r.indexOf("matrix")?(i=r,n=0):-1!==r.indexOf("translate")&&(i="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",n=0))),n)return qe;for(r=(i||"").match(R)||[],Ee=r.length;-1<--Ee;)a=Number(r[Ee]),r[Ee]=(s=a-(a|=0))?(1e5*s+(s<0?-.5:.5)|0)/1e5+a:a;return t&&6<r.length?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Ye=r.getTransform=function(e,t,n,i){if(e._gsTransform&&n&&!i)return e._gsTransform;var r,a,s,o,l,u,c=n&&e._gsTransform||new Fe,d=c.scaleX<0,h=Ue&&(parseFloat(te(e,Ne,t,!1,"0 0 0").split(" ")[2])||c.zOrigin)||0,f=parseFloat(j.defaultTransformPerspective)||0;if(c.svg=!(!e.getCTM||!Ge(e)),c.svg&&(He(e,te(e,Ne,t,!1,"50% 50%")+"",c,e.getAttribute("data-svg-origin")),Ce=j.useSVGTransformAttr||Ve),(r=We(e))!==qe){if(16===r.length){var p,m,g,v,_,y=r[0],x=r[1],b=r[2],T=r[3],S=r[4],E=r[5],w=r[6],M=r[7],A=r[8],C=r[9],P=r[10],R=r[12],D=r[13],k=r[14],I=r[11],L=Math.atan2(w,P);c.zOrigin&&(R=A*(k=-c.zOrigin)-r[12],D=C*k-r[13],k=P*k+c.zOrigin-r[14]),c.rotationX=L*V,L&&(p=S*(v=Math.cos(-L))+A*(_=Math.sin(-L)),m=E*v+C*_,g=w*v+P*_,A=S*-_+A*v,C=E*-_+C*v,P=w*-_+P*v,I=M*-_+I*v,S=p,E=m,w=g),L=Math.atan2(-b,P),c.rotationY=L*V,L&&(m=x*(v=Math.cos(-L))-C*(_=Math.sin(-L)),g=b*v-P*_,C=x*_+C*v,P=b*_+P*v,I=T*_+I*v,y=p=y*v-A*_,x=m,b=g),L=Math.atan2(x,y),c.rotation=L*V,L&&(p=y*(v=Math.cos(L))+x*(_=Math.sin(L)),m=S*v+E*_,g=A*v+C*_,x=x*v-y*_,E=E*v-S*_,C=C*v-A*_,y=p,S=m,A=g),c.rotationX&&359.9<Math.abs(c.rotationX)+Math.abs(c.rotation)&&(c.rotationX=c.rotation=0,c.rotationY=180-c.rotationY),L=Math.atan2(S,E),c.scaleX=(1e5*Math.sqrt(y*y+x*x+b*b)+.5|0)/1e5,c.scaleY=(1e5*Math.sqrt(E*E+w*w)+.5|0)/1e5,c.scaleZ=(1e5*Math.sqrt(A*A+C*C+P*P)+.5|0)/1e5,y/=c.scaleX,S/=c.scaleY,x/=c.scaleX,E/=c.scaleY,2e-5<Math.abs(L)?(c.skewX=L*V,S=0,"simple"!==c.skewType&&(c.scaleY*=1/Math.cos(L))):c.skewX=0,c.perspective=I?1/(I<0?-I:I):0,c.x=R,c.y=D,c.z=k,c.svg&&(c.x-=c.xOrigin-(c.xOrigin*y-c.yOrigin*S),c.y-=c.yOrigin-(c.yOrigin*x-c.xOrigin*E))}else if(!Ue||i||!r.length||c.x!==r[4]||c.y!==r[5]||!c.rotationX&&!c.rotationY){var O=6<=r.length,N=O?r[0]:1,U=r[1]||0,F=r[2]||0,B=O?r[3]:1;c.x=r[4]||0,c.y=r[5]||0,s=Math.sqrt(N*N+U*U),o=Math.sqrt(B*B+F*F),l=N||U?Math.atan2(U,N)*V:c.rotation||0,u=F||B?Math.atan2(F,B)*V+l:c.skewX||0,c.scaleX=s,c.scaleY=o,c.rotation=l,c.skewX=u,Ue&&(c.rotationX=c.rotationY=c.z=0,c.perspective=f,c.scaleZ=1),c.svg&&(c.x-=c.xOrigin-(c.xOrigin*N+c.yOrigin*F),c.y-=c.yOrigin-(c.xOrigin*U+c.yOrigin*B))}for(a in 90<Math.abs(c.skewX)&&Math.abs(c.skewX)<270&&(d?(c.scaleX*=-1,c.skewX+=c.rotation<=0?180:-180,c.rotation+=c.rotation<=0?180:-180):(c.scaleY*=-1,c.skewX+=c.skewX<=0?180:-180)),c.zOrigin=h,c)c[a]<2e-5&&-2e-5<c[a]&&(c[a]=0)}return n&&(e._gsTransform=c).svg&&(Ce&&e.style[Le]?$.delayedCall(.001,function(){Ze(e.style,Le)}):!Ce&&e.getAttribute("transform")&&$.delayedCall(.001,function(){e.removeAttribute("transform")})),c},Xe=function(e){var t,n,i=this.data,r=-i.rotation*F,a=r+i.skewX*F,s=(Math.cos(r)*i.scaleX*1e5|0)/1e5,o=(Math.sin(r)*i.scaleX*1e5|0)/1e5,l=(Math.sin(a)*-i.scaleY*1e5|0)/1e5,u=(Math.cos(a)*i.scaleY*1e5|0)/1e5,c=this.t.style,d=this.t.currentStyle;if(d){n=o,o=-l,l=-n,t=d.filter,c.filter="";var h,f,p=this.t.offsetWidth,m=this.t.offsetHeight,g="absolute"!==d.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+o+", M21="+l+", M22="+u,_=i.x+p*i.xPercent/100,y=i.y+m*i.yPercent/100;if(null!=i.ox&&(_+=(h=(i.oxp?p*i.ox*.01:i.ox)-p/2)-(h*s+(f=(i.oyp?m*i.oy*.01:i.oy)-m/2)*o),y+=f-(h*l+f*u)),v+=g?", Dx="+((h=p/2)-(h*s+(f=m/2)*o)+_)+", Dy="+(f-(h*l+f*u)+y)+")":", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?c.filter=t.replace(L,v):c.filter=v+" "+t,0!==e&&1!==e||1===s&&0===o&&0===l&&1===u&&(g&&-1===v.indexOf("Dx=0, Dy=0")||I.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&c.removeAttribute("filter")),!g){var x,b,T,S=w<8?1:-1;for(h=i.ieOffsetX||0,f=i.ieOffsetY||0,i.ieOffsetX=Math.round((p-((s<0?-s:s)*p+(o<0?-o:o)*m))/2+_),i.ieOffsetY=Math.round((m-((u<0?-u:u)*m+(l<0?-l:l)*p))/2+y),Ee=0;Ee<4;Ee++)T=(n=-1!==(x=d[b=oe[Ee]]).indexOf("px")?parseFloat(x):ne(this.t,b,parseFloat(x),x.replace(k,""))||0)!==i[b]?Ee<2?-i.ieOffsetX:-i.ieOffsetY:Ee<2?h-i.ieOffsetX:f-i.ieOffsetY,c[b]=(i[b]=Math.round(n-T*(0===Ee||2===Ee?1:S)))+"px"}}},Ke=r.set3DTransformRatio=r.setTransformRatio=function(e){var t,n,i,r,a,s,o,l,u,c,d,h,f,p,m,g,v,_,y,x,b=this.data,T=this.t.style,S=b.rotation,E=b.rotationX,w=b.rotationY,M=b.scaleX,A=b.scaleY,C=b.scaleZ,P=b.x,R=b.y,D=b.z,k=b.svg,I=b.perspective,L=b.force3D,O=b.skewY,N=b.skewX;if(O&&(N+=O,S+=O),!((1!==e&&0!==e||"auto"!==L||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&L||D||I||w||E||1!==C)||Ce&&k||!Ue)S||N||k?(S*=F,x=N*F,1e5,n=Math.cos(S)*M,a=Math.sin(S)*M,i=Math.sin(S-x)*-A,s=Math.cos(S-x)*A,x&&"simple"===b.skewType&&(t=Math.tan(x-O*F),i*=t=Math.sqrt(1+t*t),s*=t,O&&(t=Math.tan(O*F),n*=t=Math.sqrt(1+t*t),a*=t)),k&&(P+=b.xOrigin-(b.xOrigin*n+b.yOrigin*i)+b.xOffset,R+=b.yOrigin-(b.xOrigin*a+b.yOrigin*s)+b.yOffset,Ce&&(b.xPercent||b.yPercent)&&(m=this.t.getBBox(),P+=.01*b.xPercent*m.width,R+=.01*b.yPercent*m.height),P<(m=1e-6)&&-m<P&&(P=0),R<m&&-m<R&&(R=0)),y=(1e5*n|0)/1e5+","+(1e5*a|0)/1e5+","+(1e5*i|0)/1e5+","+(1e5*s|0)/1e5+","+P+","+R+")",k&&Ce?this.t.setAttribute("transform","matrix("+y):T[Le]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix(":"matrix(")+y):T[Le]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix(":"matrix(")+M+",0,0,"+A+","+P+","+R+")";else{if(U&&(M<(m=1e-4)&&-m<M&&(M=C=2e-5),A<m&&-m<A&&(A=C=2e-5),!I||b.z||b.rotationX||b.rotationY||(I=0)),S||N)S*=F,g=n=Math.cos(S),v=a=Math.sin(S),N&&(S-=N*F,g=Math.cos(S),v=Math.sin(S),"simple"===b.skewType&&(t=Math.tan((N-O)*F),g*=t=Math.sqrt(1+t*t),v*=t,b.skewY&&(t=Math.tan(O*F),n*=t=Math.sqrt(1+t*t),a*=t))),i=-v,s=g;else{if(!(w||E||1!==C||I||k))return void(T[Le]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) translate3d(":"translate3d(")+P+"px,"+R+"px,"+D+"px)"+(1!==M||1!==A?" scale("+M+","+A+")":""));n=s=1,i=a=0}c=1,r=o=l=u=d=h=0,f=I?-1/I:0,p=b.zOrigin,m=1e-6,",","0",(S=w*F)&&(g=Math.cos(S),d=f*(l=-(v=Math.sin(S))),r=n*v,o=a*v,f*=c=g,n*=g,a*=g),(S=E*F)&&(t=i*(g=Math.cos(S))+r*(v=Math.sin(S)),_=s*g+o*v,u=c*v,h=f*v,r=i*-v+r*g,o=s*-v+o*g,c*=g,f*=g,i=t,s=_),1!==C&&(r*=C,o*=C,c*=C,f*=C),1!==A&&(i*=A,s*=A,u*=A,h*=A),1!==M&&(n*=M,a*=M,l*=M,d*=M),(p||k)&&(p&&(P+=r*-p,R+=o*-p,D+=c*-p+p),k&&(P+=b.xOrigin-(b.xOrigin*n+b.yOrigin*i)+b.xOffset,R+=b.yOrigin-(b.xOrigin*a+b.yOrigin*s)+b.yOffset),P<m&&-m<P&&(P="0"),R<m&&-m<R&&(R="0"),D<m&&-m<D&&(D=0)),y=b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix3d(":"matrix3d(",y+=(n<m&&-m<n?"0":n)+","+(a<m&&-m<a?"0":a)+","+(l<m&&-m<l?"0":l),y+=","+(d<m&&-m<d?"0":d)+","+(i<m&&-m<i?"0":i)+","+(s<m&&-m<s?"0":s),E||w||1!==C?(y+=","+(u<m&&-m<u?"0":u)+","+(h<m&&-m<h?"0":h)+","+(r<m&&-m<r?"0":r),y+=","+(o<m&&-m<o?"0":o)+","+(c<m&&-m<c?"0":c)+","+(f<m&&-m<f?"0":f)+","):y+=",0,0,0,0,1,0,",y+=P+","+R+","+D+","+(I?1+-D/I:1)+")",T[Le]=y}};(e=Fe.prototype).x=e.y=e.z=e.skewX=e.skewY=e.rotation=e.rotationX=e.rotationY=e.zOrigin=e.xPercent=e.yPercent=e.xOffset=e.yOffset=0,e.scaleX=e.scaleY=e.scaleZ=1,Me("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,n,i,r,a,s){if(i._lastParsedTransform===s)return r;var o,l=(i._lastParsedTransform=s).scale&&"function"==typeof s.scale?s.scale:0;"function"==typeof s[n]&&(o=s[n],s[n]=t),l&&(s.scale=l(P,e));var u,c,d,h,f,p,m,g,v,_=e._gsTransform,y=e.style,x=Ie.length,b=s,T={},S="transformOrigin",E=Ye(e,M,!0,b.parseTransform),w=b.transform&&("function"==typeof b.transform?b.transform(P,C):b.transform);if(E.skewType=b.skewType||E.skewType||j.defaultSkewType,i._transform=E,w&&"string"==typeof w&&Le)(c=G.style)[Le]=w,c.display="block",c.position="absolute",H.body.appendChild(G),u=Ye(G,null,!1),"simple"===E.skewType&&(u.scaleY*=Math.cos(u.skewX*F)),E.svg&&(p=E.xOrigin,m=E.yOrigin,u.x-=E.xOffset,u.y-=E.yOffset,(b.transformOrigin||b.svgOrigin)&&(w={},He(e,ue(b.transformOrigin),w,b.svgOrigin,b.smoothOrigin,!0),p=w.xOrigin,m=w.yOrigin,u.x-=w.xOffset-E.xOffset,u.y-=w.yOffset-E.yOffset),(p||m)&&(g=We(G,!0),u.x-=p-(p*g[0]+m*g[2]),u.y-=m-(p*g[1]+m*g[3]))),H.body.removeChild(G),u.perspective||(u.perspective=E.perspective),null!=b.xPercent&&(u.xPercent=de(b.xPercent,E.xPercent)),null!=b.yPercent&&(u.yPercent=de(b.yPercent,E.yPercent));else if("object"==typeof b){if(u={scaleX:de(null!=b.scaleX?b.scaleX:b.scale,E.scaleX),scaleY:de(null!=b.scaleY?b.scaleY:b.scale,E.scaleY),scaleZ:de(b.scaleZ,E.scaleZ),x:de(b.x,E.x),y:de(b.y,E.y),z:de(b.z,E.z),xPercent:de(b.xPercent,E.xPercent),yPercent:de(b.yPercent,E.yPercent),perspective:de(b.transformPerspective,E.perspective)},null!=(f=b.directionalRotation))if("object"==typeof f)for(c in f)b[c]=f[c];else b.rotation=f;"string"==typeof b.x&&-1!==b.x.indexOf("%")&&(u.x=0,u.xPercent=de(b.x,E.xPercent)),"string"==typeof b.y&&-1!==b.y.indexOf("%")&&(u.y=0,u.yPercent=de(b.y,E.yPercent)),u.rotation=he("rotation"in b?b.rotation:"shortRotation"in b?b.shortRotation+"_short":"rotationZ"in b?b.rotationZ:E.rotation,E.rotation,"rotation",T),Ue&&(u.rotationX=he("rotationX"in b?b.rotationX:"shortRotationX"in b?b.shortRotationX+"_short":E.rotationX||0,E.rotationX,"rotationX",T),u.rotationY=he("rotationY"in b?b.rotationY:"shortRotationY"in b?b.shortRotationY+"_short":E.rotationY||0,E.rotationY,"rotationY",T)),u.skewX=he(b.skewX,E.skewX),u.skewY=he(b.skewY,E.skewY)}for(Ue&&null!=b.force3D&&(E.force3D=b.force3D,h=!0),(d=E.force3D||E.z||E.rotationX||E.rotationY||u.z||u.rotationX||u.rotationY||u.perspective)||null==b.scale||(u.scaleZ=1);-1<--x;)(1e-6<(w=u[v=Ie[x]]-E[v])||w<-1e-6||null!=b[v]||null!=B[v])&&(h=!0,r=new be(E,v,E[v],w,r),v in T&&(r.e=T[v]),r.xs0=0,r.plugin=a,i._overwriteProps.push(r.n));return w=b.transformOrigin,E.svg&&(w||b.svgOrigin)&&(p=E.xOffset,m=E.yOffset,He(e,ue(w),u,b.svgOrigin,b.smoothOrigin),r=Te(E,"xOrigin",(_?E:u).xOrigin,u.xOrigin,r,S),r=Te(E,"yOrigin",(_?E:u).yOrigin,u.yOrigin,r,S),p===E.xOffset&&m===E.yOffset||(r=Te(E,"xOffset",_?p:E.xOffset,E.xOffset,r,S),r=Te(E,"yOffset",_?m:E.yOffset,E.yOffset,r,S)),w="0px 0px"),(w||Ue&&d&&E.zOrigin)&&(Le?(h=!0,v=Ne,w=(w||te(e,v,M,!1,"50% 50%"))+"",(r=new be(y,v,0,0,r,-1,S)).b=y[v],r.plugin=a,Ue?(c=E.zOrigin,w=w.split(" "),E.zOrigin=(2<w.length&&(0===c||"0px"!==w[2])?parseFloat(w[2]):c)||0,r.xs0=r.e=w[0]+" "+(w[1]||"50%")+" 0px",(r=new be(E,"zOrigin",0,0,r,-1,r.n)).b=c,r.xs0=r.e=E.zOrigin):r.xs0=r.e=w):ue(w+"",E)),h&&(i._transformType=E.svg&&Ce||!d&&3!==this._transformType?2:3),o&&(s[n]=o),l&&(s.scale=l),r},prefix:!0}),Me("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Me("borderRadius",{defaultValue:"0px",parser:function(e,t,n,i,r,a){t=this.format(t);var s,o,l,u,c,d,h,f,p,m,g,v,_,y,x,b,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],S=e.style;for(p=parseFloat(e.offsetWidth),m=parseFloat(e.offsetHeight),s=t.split(" "),o=0;o<T.length;o++)this.p.indexOf("border")&&(T[o]=J(T[o])),-1!==(c=u=te(e,T[o],M,!1,"0px")).indexOf(" ")&&(c=(u=c.split(" "))[0],u=u[1]),d=l=s[o],h=parseFloat(c),v=c.substr((h+"").length),""===(g=(_="="===d.charAt(1))?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),d.substr((f+"").length-(f<0?1:0))||""):(f=parseFloat(d),d.substr((f+"").length)))&&(g=E[n]||v),g!==v&&(y=ne(e,"borderLeft",h,v),x=ne(e,"borderTop",h,v),u="%"===g?(c=y/p*100+"%",x/m*100+"%"):"em"===g?(c=y/(b=ne(e,"borderLeft",1,"em"))+"em",x/b+"em"):(c=y+"px",x+"px"),_&&(d=parseFloat(c)+f+g,l=parseFloat(u)+f+g)),r=Se(S,T[o],c+" "+u,d+" "+l,!1,"0px",r);return r},prefix:!0,formatter:_e("0px 0px 0px 0px",!1,!0)}),Me("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,n,i,r,a){return Se(e.style,n,this.format(te(e,n,M,!1,"0px 0px")),this.format(t),!1,"0px",r)},prefix:!0,formatter:_e("0px 0px",!1,!0)}),Me("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,n,i,r,a){var s,o,l,u,c,d,h="background-position",f=M||ee(e,null),p=this.format((f?w?f.getPropertyValue(h+"-x")+" "+f.getPropertyValue(h+"-y"):f.getPropertyValue(h):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),m=this.format(t);if(-1!==p.indexOf("%")!=(-1!==m.indexOf("%"))&&m.split(",").length<2&&(d=te(e,"backgroundImage").replace(S,""))&&"none"!==d){for(s=p.split(" "),o=m.split(" "),q.setAttribute("src",d),l=2;-1<--l;)(u=-1!==(p=s[l]).indexOf("%"))!==(-1!==o[l].indexOf("%"))&&(c=0===l?e.offsetWidth-q.width:e.offsetHeight-q.height,s[l]=u?parseFloat(p)/100*c+"px":parseFloat(p)/c*100+"%");p=s.join(" ")}return this.parseComplex(e.style,p,m,r,a)},formatter:ue}),Me("backgroundSize",{defaultValue:"0 0",formatter:function(e){return ue(-1===(e+="").indexOf(" ")?e+" "+e:e)}}),Me("perspective",{defaultValue:"0px",prefix:!0}),Me("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Me("transformStyle",{prefix:!0}),Me("backfaceVisibility",{prefix:!0}),Me("userSelect",{prefix:!0}),Me("margin",{parser:ye("marginTop,marginRight,marginBottom,marginLeft")}),Me("padding",{parser:ye("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Me("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,n,i,r,a){var s,o,l;return t=w<9?(o=e.currentStyle,l=w<8?" ":",",s="rect("+o.clipTop+l+o.clipRight+l+o.clipBottom+l+o.clipLeft+")",this.format(t).split(",").join(l)):(s=this.format(te(e,this.p,M,!1,this.dflt)),this.format(t)),this.parseComplex(e.style,s,t,r,a)}}),Me("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Me("autoRound,strictUnits",{parser:function(e,t,n,i,r){return r}}),Me("border",{defaultValue:"0px solid #000",parser:function(e,t,n,i,r,a){var s=te(e,"borderTopWidth",M,!1,"0px"),o=this.format(t).split(" "),l=o[0].replace(k,"");return"px"!==l&&(s=parseFloat(s)/ne(e,"borderTopWidth",1,l)+l),this.parseComplex(e.style,this.format(s+" "+te(e,"borderTopStyle",M,!1,"solid")+" "+te(e,"borderTopColor",M,!1,"#000")),o.join(" "),r,a)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ve)||["#000"])[0]}}),Me("borderWidth",{parser:ye("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Me("float,cssFloat,styleFloat",{parser:function(e,t,n,i,r,a){var s=e.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new be(s,o,0,0,r,-1,n,!1,0,s[o],t)}});var Qe=function(e){var t,n=this.t,i=n.filter||te(this.data,"filter")||"",r=this.s+this.c*e|0;100===r&&(t=-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(n.removeAttribute("filter"),!te(this.data,"filter")):(n.filter=i.replace(s,""),!0)),t||(this.xn1&&(n.filter=i=i||"alpha(opacity="+r+")"),-1===i.indexOf("pacity")?0===r&&this.xn1||(n.filter=i+" alpha(opacity="+r+")"):n.filter=i.replace(I,"opacity="+r))};Me("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,n,i,r,a){var s=parseFloat(te(e,"opacity",M,!1,"1")),o=e.style,l="autoAlpha"===n;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s),l&&1===s&&"hidden"===te(e,"visibility",M)&&0!==t&&(s=0),Y?r=new be(o,"opacity",s,t-s,r):((r=new be(o,"opacity",100*s,100*(t-s),r)).xn1=l?1:0,o.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=e,r.plugin=a,r.setRatio=Qe),l&&((r=new be(o,"visibility",0,0,r,-1,null,!1,0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",i._overwriteProps.push(r.n),i._overwriteProps.push(n)),r}});var Ze=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(o,"-$1").toLowerCase())):e.removeAttribute(t))},Je=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,n=this.t.style;t;)t.v?n[t.p]=t.v:Ze(n,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Me("className",{parser:function(e,t,n,i,r,a,s){var o,l,u,c,d,h=e.getAttribute("class")||"",f=e.style.cssText;if((r=i._classNamePT=new be(e,n,0,0,r,2)).setRatio=Je,r.pr=-11,p=!0,r.b=h,l=re(e,M),u=e._gsClassPT){for(c={},d=u.data;d;)c[d.p]=1,d=d._next;u.setRatio(1)}return(e._gsClassPT=r).e="="!==t.charAt(1)?t:h.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",r.e),o=ae(e,l,re(e),s,c),e.setAttribute("class",h),r.data=o.firstMPT,e.style.cssText=f,r=r.xfirst=i.parse(e,o.difs,r,a)}});var et=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,n,i,r,a,s=this.t.style,o=g.transform.parse;if("all"===this.e)r=!(s.cssText="");else for(i=(t=this.e.split(" ").join("").split(",")).length;-1<--i;)n=t[i],g[n]&&(g[n].parse===o?r=!0:n="transformOrigin"===n?Ne:g[n].p),Ze(s,n);r&&(Ze(s,Le),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Me("clearProps",{parser:function(e,t,n,i,r){return(r=new be(e,n,0,0,r,2)).setRatio=et,r.e=t,r.pr=-10,r.data=i._tween,p=!0,r}}),e="bezier,throwProps,physicsProps,physics2D".split(","),Ee=e.length;Ee--;)Ae(e[Ee]);(e=j.prototype)._firstPT=e._lastParsedTransform=e._transform=null,e._onInitTween=function(e,t,n,i){if(!e.nodeType)return!1;this._target=C=e,this._tween=n,this._vars=t,P=i,A=t.autoRound,p=!1,E=t.suffixMap||j.suffixMap,M=ee(e,""),m=this._overwriteProps;var r,a,s,o,l,u,c,d,h,f=e.style;if(v&&""===f.zIndex&&("auto"!==(r=te(e,"zIndex",M))&&""!==r||this._addLazySet(f,"zIndex",0)),"string"==typeof t&&(o=f.cssText,r=re(e,M),f.cssText=o+";"+t,r=ae(e,r,re(e)).difs,!Y&&b.test(t)&&(r.opacity=parseFloat(RegExp.$1)),t=r,f.cssText=o),t.className?this._firstPT=a=g.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=a=this.parse(e,t,null),this._transformType){for(h=3===this._transformType,Le?_&&(v=!0,""===f.zIndex&&("auto"!==(c=te(e,"zIndex",M))&&""!==c||this._addLazySet(f,"zIndex",0)),y&&this._addLazySet(f,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(h?"visible":"hidden"))):f.zoom=1,s=a;s&&s._next;)s=s._next;d=new be(e,"transform",0,0,null,2),this._linkCSSP(d,null,s),d.setRatio=Le?Ke:Xe,d.data=this._transform||Ye(e,M,!0),d.tween=n,d.pr=-1,m.pop()}if(p){for(;a;){for(u=a._next,s=o;s&&s.pr>a.pr;)s=s._next;(a._prev=s?s._prev:l)?a._prev._next=a:o=a,(a._next=s)?s._prev=a:l=a,a=u}this._firstPT=o}return!0},e.parse=function(e,t,n,i){var r,a,s,o,l,u,c,d,h,f,p=e.style;for(r in t){if("function"==typeof(u=t[r])&&(u=u(P,C)),a=g[r])n=a.parse(e,u,r,this,n,i,t);else{if("--"===r.substr(0,2)){this._tween._propLookup[r]=this._addTween.call(this._tween,e.style,"setProperty",ee(e).getPropertyValue(r)+"",u+"",r,!1,r);continue}l=te(e,r,M)+"",h="string"==typeof u,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||h&&T.test(u)?(h||(u=(3<(u=me(u)).length?"rgba(":"rgb(")+u.join(",")+")"),n=Se(p,r,l,u,!0,"transparent",n,0,i)):h&&N.test(u)?n=Se(p,r,l,u,!0,null,n,0,i):(c=(s=parseFloat(l))||0===s?l.substr((s+"").length):"",""!==l&&"auto"!==l||(c="width"===r||"height"===r?(s=le(e,r,M),"px"):"left"===r||"top"===r?(s=ie(e,r,M),"px"):(s="opacity"!==r?0:1,"")),""===(d=(f=h&&"="===u.charAt(1))?(o=parseInt(u.charAt(0)+"1",10),u=u.substr(2),o*=parseFloat(u),u.replace(k,"")):(o=parseFloat(u),h?u.replace(k,""):""))&&(d=r in E?E[r]:c),u=o||0===o?(f?o+s:o)+d:t[r],c!==d&&(""===d&&"lineHeight"!==r||(o||0===o)&&s&&(s=ne(e,r,s,c),"%"===d?(s/=ne(e,r,100,"%")/100,!0!==t.strictUnits&&(l=s+"%")):"em"===d||"rem"===d||"vw"===d||"vh"===d?s/=ne(e,r,1,d):"px"!==d&&(o=ne(e,r,o,d),d="px"),f&&(o||0===o)&&(u=o+s+d))),f&&(o+=s),!s&&0!==s||!o&&0!==o?void 0!==p[r]&&(u||u+""!="NaN"&&null!=u)?(n=new be(p,r,o||s||0,0,n,-1,r,!1,0,l,u)).xs0="none"!==u||"display"!==r&&-1===r.indexOf("Style")?u:l:K("invalid "+r+" tween value: "+t[r]):(n=new be(p,r,s,o-s,n,0,r,!1!==A&&("px"===d||"zIndex"===r),0,l,u)).xs0=d)}i&&n&&!n.plugin&&(n.plugin=i)}return n},e.setRatio=function(e){var t,n,i,r=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(t=r.c*e+r.s,r.r?t=Math.round(t):t<1e-6&&-1e-6<t&&(t=0),r.type)if(1===r.type)if(2===(i=r.l))r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2;else if(3===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(n=r.xs0+t+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(e);else r.t[r.p]=t+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(e),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(t=Math.round(r.s+r.c),r.type){if(1===r.type){for(i=r.l,n=r.xs0+t+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}}else r.t[r.p]=t+r.xs0;else r.t[r.p]=r.e;else r.setRatio(e);r=r._next}},e._enableTransforms=function(e){this._transform=this._transform||Ye(this._target,M,!0),this._transformType=this._transform.svg&&Ce||!e&&3!==this._transformType?2:3};var tt=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};e._addLazySet=function(e,t,n){var i=this._firstPT=new be(e,t,0,0,this._firstPT,2);i.e=n,i.setRatio=tt,i.data=this},e._linkCSSP=function(e,t,n,i){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,i=!0),n?n._next=e:i||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=n),e},e._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&e[t.p]===Math.round&&(t.r=1),t=t._next},e._kill=function(e){var t,n,i,r=e;if(e.autoAlpha||e.alpha){for(n in r={},e)r[n]=e[n];r.opacity=1,r.autoAlpha&&(r.visibility=1)}for(e.className&&(t=this._classNamePT)&&((i=t.xfirst)&&i._prev?this._linkCSSP(i._prev,t._next,i._prev._prev):i===this._firstPT&&(this._firstPT=t._next),t._next&&this._linkCSSP(t._next,t._next._next,i._prev),this._classNamePT=null),t=this._firstPT;t;)t.plugin&&t.plugin!==n&&t.plugin._kill&&(t.plugin._kill(e),n=t.plugin),t=t._next;return a.prototype._kill.call(this,r)};var nt=function(e,t,n){var i,r,a,s;if(e.slice)for(r=e.length;-1<--r;)nt(e[r],t,n);else for(r=(i=e.childNodes).length;-1<--r;)s=(a=i[r]).type,a.style&&(t.push(re(a)),n&&n.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||nt(a,t,n)};return j.cascadeTo=function(e,t,n){var i,r,a,s,o=$.to(e,t,n),l=[o],u=[],c=[],d=[],h=$._internals.reservedProps;for(e=o._targets||o.target,nt(e,u,d),o.render(t,!0,!0),nt(e,c),o.render(0,!0,!0),o._enabled(!0),i=d.length;-1<--i;)if((r=ae(d[i],u[i],c[i])).firstMPT){for(a in r=r.difs,n)h[a]&&(r[a]=n[a]);for(a in s={},r)s[a]=u[i][a];l.push($.fromTo(d[i],t,s,r))}return l},a.activate([j]),j},!0),t=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),l=function(e){for(;e;)e.f||e.blob||(e.m=Math.round),e=e._next},(i=t.prototype)._onInitAllProps=function(){for(var e,t,n,i=this._tween,r=i.vars.roundProps.join?i.vars.roundProps:i.vars.roundProps.split(","),a=r.length,s={},o=i._propLookup.roundProps;-1<--a;)s[r[a]]=Math.round;for(a=r.length;-1<--a;)for(e=r[a],t=i._firstPT;t;)n=t._next,t.pg?t.t._mod(s):t.n===e&&(2===t.f&&t.t?l(t.t._firstPT):(this._add(t.t,e,t.s,t.c),n&&(n._prev=t._prev),t._prev?t._prev._next=n:i._firstPT===t&&(i._firstPT=n),t._next=t._prev=null,i._propLookup[e]=o)),t=n;return!1},i._add=function(e,t,n,i){this._addTween(e,t,n,n+i,t,Math.round),this._overwriteProps.push(t)},_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,n,i){var r,a;if("function"!=typeof e.setAttribute)return!1;for(r in t)"function"==typeof(a=t[r])&&(a=a(i,e)),this._addTween(e,"setAttribute",e.getAttribute(r)+"",a+"",r,!1,r),this._overwriteProps.push(r);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,n,i){"object"!=typeof t&&(t={rotation:t}),this.finals={};var r,a,s,o,l,u,c=!0===t.useRadians?2*Math.PI:360;for(r in t)"useRadians"!==r&&("function"==typeof(o=t[r])&&(o=o(i,e)),a=(u=(o+"").split("_"))[0],s=parseFloat("function"!=typeof e[r]?e[r]:e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(o=this.finals[r]="string"==typeof a&&"="===a.charAt(1)?s+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-s,u.length&&(-1!==(a=u.join("_")).indexOf("short")&&(l%=c)!==l%(c/2)&&(l=l<0?l+c:l-c),-1!==a.indexOf("_cw")&&l<0?l=(l+9999999999*c)%c-(l/c|0)*c:-1!==a.indexOf("ccw")&&0<l&&(l=(l-9999999999*c)%c-(l/c|0)*c)),(1e-6<l||l<-1e-6)&&(this._addTween(e,r,s,s+l,r),this._overwriteProps.push(r)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(g){var n,t,e,i=_gsScope.GreenSockGlobals||_gsScope,r=i.com.greensock,a=2*Math.PI,s=Math.PI/2,o=r._class,l=function(e,t){var n=o("easing."+e,function(){},!0),i=n.prototype=new g;return i.constructor=n,i.getRatio=t,n},u=g.register||function(){},c=function(e,t,n,i,r){var a=o("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new i},!0);return u(a,e),a},v=function(e,t,n){this.t=e,this.v=t,n&&(((this.next=n).prev=this).c=n.v-t,this.gap=n.t-e)},d=function(e,t){var n=o("easing."+e,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),i=n.prototype=new g;return i.constructor=n,i.getRatio=t,i.config=function(e){return new n(e)},n},h=c("Back",d("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),d("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),d("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),f=o("easing.SlowMo",function(e,t,n){t=t||0===t?t:.7,null==e?e=.7:1<e&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===n},!0),p=f.prototype=new g;return p.constructor=f,p.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},f.ease=new f(.7,.7),p.config=f.config=function(e,t,n){return new f(e,t,n)},(p=(n=o("easing.SteppedEase",function(e,t){e=e||1,this._p1=1/e,this._p2=e+(t?0:1),this._p3=t?1:0},!0)).prototype=new g).constructor=n,p.getRatio=function(e){return e<0?e=0:1<=e&&(e=.999999999),((this._p2*e|0)+this._p3)*this._p1},p.config=n.config=function(e,t){return new n(e,t)},(p=(t=o("easing.RoughEase",function(e){for(var t,n,i,r,a,s,o=(e=e||{}).taper||"none",l=[],u=0,c=0|(e.points||20),d=c,h=!1!==e.randomize,f=!0===e.clamp,p=e.template instanceof g?e.template:null,m="number"==typeof e.strength?.4*e.strength:.4;-1<--d;)t=h?Math.random():1/c*d,n=p?p.getRatio(t):t,i="none"===o?m:"out"===o?(r=1-t)*r*m:"in"===o?t*t*m:t<.5?(r=2*t)*r*.5*m:(r=2*(1-t))*r*.5*m,h?n+=Math.random()*i-.5*i:d%2?n+=.5*i:n-=.5*i,f&&(1<n?n=1:n<0&&(n=0)),l[u++]={x:t,y:n};for(l.sort(function(e,t){return e.x-t.x}),s=new v(1,1,null),d=c;-1<--d;)a=l[d],s=new v(a.x,a.y,s);this._prev=new v(0,0,0!==s.t?s:s.next)},!0)).prototype=new g).constructor=t,p.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return(this._prev=t).v+(e-t.t)/t.gap*t.c},p.config=function(e){return new t(e)},t.ease=new t,c("Bounce",l("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),l("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),l("BounceInOut",function(e){var t=e<.5;return(e=t?1-2*e:2*e-1)<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),c("Circ",l("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),l("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),l("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),c("Elastic",(e=function(e,t,n){var i=o("easing."+e,function(e,t){this._p1=1<=e?e:1,this._p2=(t||n)/(e<1?e:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),r=i.prototype=new g;return r.constructor=i,r.getRatio=t,r.config=function(e,t){return new i(e,t)},i})("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),e("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),e("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),c("Expo",l("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),l("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),l("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),c("Sine",l("SineOut",function(e){return Math.sin(e*s)}),l("SineIn",function(e){return 1-Math.cos(e*s)}),l("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),o("easing.EaseLookup",{find:function(e){return g.map[e]}},!0),u(i.SlowMo,"SlowMo","ease,"),u(t,"RoughEase","ease,"),u(n,"SteppedEase","ease,"),h},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(h,f){"use strict";var p={},i=h.document,m=h.GreenSockGlobals=h.GreenSockGlobals||h;if(!m.TweenLite){var e,t,n,g,v,r,a,_=function(e){var t,n=e.split("."),i=m;for(t=0;t<n.length;t++)i[n[t]]=i=i[n[t]]||{};return i},d=_("com.greensock"),y=1e-10,l=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n},x=function(){},b=(r=Object.prototype.toString,a=r.call([]),function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&r.call(e)===a)}),T={},S=function(o,l,u,c){this.sc=T[o]?T[o].sc:[],(T[o]=this).gsClass=null,this.func=u;var d=[];this.check=function(e){for(var t,n,i,r,a=l.length,s=a;-1<--a;)(t=T[l[a]]||new S(l[a],[])).gsClass?(d[a]=t.gsClass,s--):e&&t.sc.push(this);if(0===s&&u){if(i=(n=("com.greensock."+o).split(".")).pop(),r=_(n.join("."))[i]=this.gsClass=u.apply(u,d),c)if(m[i]=p[i]=r,"undefined"!=typeof module&&module.exports)if(o===f)for(a in module.exports=p[f]=r,p)r[a]=p[a];else p[f]&&(p[f][i]=r);else"function"==typeof define&&define.amd&&define((h.GreenSockAMDPath?h.GreenSockAMDPath+"/":"")+o.split(".").pop(),[],function(){return r});for(a=0;a<this.sc.length;a++)this.sc[a].check()}},this.check(!0)},s=h._gsDefine=function(e,t,n,i){return new S(e,t,n,i)},E=d._class=function(e,t,n){return t=t||function(){},s(e,[],function(){return t},n),t};s.globals=m;var o=[0,0,1,1],w=E("easing.Ease",function(e,t,n,i){this._func=e,this._type=n||0,this._power=i||0,this._params=t?o.concat(t):o},!0),M=w.map={},u=w.register=function(e,t,n,i){for(var r,a,s,o,l=t.split(","),u=l.length,c=(n||"easeIn,easeOut,easeInOut").split(",");-1<--u;)for(a=l[u],r=i?E("easing."+a,null,!0):d.easing[a]||{},s=c.length;-1<--s;)o=c[s],M[a+"."+o]=M[o+a]=r[o]=e.getRatio?e:e[o]||new e};for((n=w.prototype)._calcEnd=!1,n.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,i=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===t?1-i:2===t?i:e<.5?i/2:1-i/2},t=(e=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--t;)n=e[t]+",Power"+t,u(new w(null,null,1,t),n,"easeOut",!0),u(new w(null,null,2,t),n,"easeIn"+(0===t?",easeNone":"")),u(new w(null,null,3,t),n,"easeInOut");M.linear=d.easing.Linear.easeIn,M.swing=d.easing.Quad.easeInOut;var A=E("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(n=A.prototype).addEventListener=function(e,t,n,i,r){r=r||0;var a,s,o=this._listeners[e],l=0;for(this!==g||v||g.wake(),null==o&&(this._listeners[e]=o=[]),s=o.length;-1<--s;)(a=o[s]).c===t&&a.s===n?o.splice(s,1):0===l&&a.pr<r&&(l=s+1);o.splice(l,0,{c:t,s:n,up:i,pr:r})},n.removeEventListener=function(e,t){var n,i=this._listeners[e];if(i)for(n=i.length;-1<--n;)if(i[n].c===t)return void i.splice(n,1)},n.dispatchEvent=function(e){var t,n,i,r=this._listeners[e];if(r)for(1<(t=r.length)&&(r=r.slice(0)),n=this._eventTarget;-1<--t;)(i=r[t])&&(i.up?i.c.call(i.s||n,{type:e,target:n}):i.c.call(i.s||n))};var C=h.requestAnimationFrame,P=h.cancelAnimationFrame,R=Date.now||function(){return(new Date).getTime()},D=R();for(t=(e=["ms","moz","webkit","o"]).length;-1<--t&&!C;)C=h[e[t]+"RequestAnimationFrame"],P=h[e[t]+"CancelAnimationFrame"]||h[e[t]+"CancelRequestAnimationFrame"];E("Ticker",function(e,t){var r,a,s,o,l,u=this,c=R(),n=!(!1===t||!C)&&"auto",d=500,h=33,f=function(e){var t,n,i=R()-D;d<i&&(c+=i-h),D+=i,u.time=(D-c)/1e3,t=u.time-l,(!r||0<t||!0===e)&&(u.frame++,l+=t+(o<=t?.004:o-t),n=!0),!0!==e&&(s=a(f)),n&&u.dispatchEvent("tick")};A.call(u),u.time=u.frame=0,u.tick=function(){f(!0)},u.lagSmoothing=function(e,t){d=e||1e10,h=Math.min(t,d,0)},u.sleep=function(){null!=s&&(n&&P?P(s):clearTimeout(s),a=x,s=null,u===g&&(v=!1))},u.wake=function(e){null!==s?u.sleep():e?c+=-D+(D=R()):10<u.frame&&(D=R()-d+5),a=0===r?x:n&&C?C:function(e){return setTimeout(e,1e3*(l-u.time)+1|0)},u===g&&(v=!0),f(2)},u.fps=function(e){if(!arguments.length)return r;o=1/((r=e)||60),l=this.time+o,u.wake()},u.useRAF=function(e){if(!arguments.length)return n;u.sleep(),n=e,u.fps(r)},u.fps(e),setTimeout(function(){"auto"===n&&u.frame<5&&"hidden"!==i.visibilityState&&u.useRAF(!1)},1500)}),(n=d.Ticker.prototype=new d.events.EventDispatcher).constructor=d.Ticker;var c=E("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!0===t.immediateRender,this.data=t.data,this._reversed=!0===t.reversed,K){v||g.wake();var n=this.vars.useFrames?X:K;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});g=c.ticker=new d.Ticker,(n=c.prototype)._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1;var k=function(){v&&2e3<R()-D&&"hidden"!==i.visibilityState&&g.wake();var e=setTimeout(k,2e3);e.unref&&e.unref()};k(),n.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},n.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},n.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},n.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},n.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},n.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},n.render=function(e,t,n){},n.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},n.isActive=function(){var e,t=this._timeline,n=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<n+this.totalDuration()/this._timeScale-1e-7},n._enabled=function(e,t){return v||g.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(e,t){return this._enabled(!1,!1)},n.kill=function(e,t){return this._kill(e,t),this},n._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},n._swapSelfInParams=function(e){for(var t=e.length,n=e.concat();-1<--t;)"{self}"===e[t]&&(n[t]=this);return n},n._callback=function(e){var t=this.vars,n=t[e],i=t[e+"Params"],r=t[e+"Scope"]||t.callbackScope||this;switch(i?i.length:0){case 0:n.call(r);break;case 1:n.call(r,i[0]);break;case 2:n.call(r,i[0],i[1]);break;default:n.apply(r,i)}},n.eventCallback=function(e,t,n,i){if("on"===(e||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[e];null==t?delete r[e]:(r[e]=t,r[e+"Params"]=b(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,r[e+"Scope"]=i),"onUpdate"===e&&(this._onUpdate=t)}return this},n.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},n.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},n.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},n.totalTime=function(e,t,n){if(v||g.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!n&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(i<e&&!n&&(e=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-e:e)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(N.length&&Z(),this.render(e,t,!1),N.length&&Z())}return this},n.progress=n.totalProgress=function(e,t){var n=this.duration();return arguments.length?this.totalTime(n*e,t):n?this._time/n:this.ratio},n.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},n.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},n.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||y,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,n=t||0===t?t:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},n.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(e){if(!arguments.length)return this._paused;var t,n,i=this._timeline;return e!=this._paused&&i&&(v||e||g.wake(),n=(t=i.rawTime())-this._pauseTime,!e&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==n&&this._initted&&this.duration()&&(t=i.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var I=E("core.SimpleTimeline",function(e){c.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(n=I.prototype=new c).constructor=I,n.kill()._gc=!1,n._first=n._last=n._recent=null,n._sortChildren=!1,n.add=n.insert=function(e,t,n,i){var r,a;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),r=this._last,this._sortChildren)for(a=e._startTime;r&&r._startTime>a;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=r,this._recent=e,this._timeline&&this._uncache(!0),this},n._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},n.render=function(e,t,n){var i,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;r;)i=r._next,(r._active||e>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)),r=i},n.rawTime=function(){return v||g.wake(),this._totalTime};var L=E("TweenLite",function(e,t,n){if(c.call(this,t,n),this.render=L.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:L.selector(e)||e;var i,r,a,s=e.jquery||e.length&&e!==h&&e[0]&&(e[0]===h||e[0].nodeType&&e[0].style&&!e.nodeType),o=this.vars.overwrite;if(this._overwrite=o=null==o?Y[L.defaultOverwrite]:"number"==typeof o?o>>0:Y[o],(s||e instanceof Array||e.push&&b(e))&&"number"!=typeof e[0])for(this._targets=a=l(e),this._propLookup=[],this._siblings=[],i=0;i<a.length;i++)(r=a[i])?"string"!=typeof r?r.length&&r!==h&&r[0]&&(r[0]===h||r[0].nodeType&&r[0].style&&!r.nodeType)?(a.splice(i--,1),this._targets=a=a.concat(l(r))):(this._siblings[i]=J(r,this,!1),1===o&&1<this._siblings[i].length&&te(r,this,null,1,this._siblings[i])):"string"==typeof(r=a[i--]=L.selector(r))&&a.splice(i+1,1):a.splice(i--,1);else this._propLookup={},this._siblings=J(e,this,!1),1===o&&1<this._siblings.length&&te(e,this,null,1,this._siblings);(this.vars.immediateRender||0===t&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-y,this.render(Math.min(0,-this._delay)))},!0),O=function(e){return e&&e.length&&e!==h&&e[0]&&(e[0]===h||e[0].nodeType&&e[0].style&&!e.nodeType)};(n=L.prototype=new c).constructor=L,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,L.version="1.20.2",L.defaultEase=n._ease=new w(null,null,1,1),L.defaultOverwrite="auto",L.ticker=g,L.autoSleep=120,L.lagSmoothing=function(e,t){g.lagSmoothing(e,t)},L.selector=h.$||h.jQuery||function(e){var t=h.$||h.jQuery;return t?(L.selector=t)(e):void 0===i?e:i.querySelectorAll?i.querySelectorAll(e):i.getElementById("#"===e.charAt(0)?e.substr(1):e)};var N=[],U={},F=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,B=/[\+-]=-?[\.\d]/,$=function(e){for(var t,n=this._firstPT;n;)t=n.blob?1===e&&this.end?this.end:e?this.join(""):this.start:n.c*e+n.s,n.m?t=n.m(t,this._target||n.t):t<1e-6&&-1e-6<t&&!n.blob&&(t=0),n.f?n.fp?n.t[n.p](n.fp,t):n.t[n.p](t):n.t[n.p]=t,n=n._next},j=function(e,t,n,i){var r,a,s,o,l,u,c,d=[],h=0,f="",p=0;for(d.start=e,d.end=t,e=d[0]=e+"",t=d[1]=t+"",n&&(n(d),e=d[0],t=d[1]),d.length=0,r=e.match(F)||[],a=t.match(F)||[],i&&(i._next=null,i.blob=1,d._firstPT=d._applyPT=i),l=a.length,o=0;o<l;o++)c=a[o],f+=(u=t.substr(h,t.indexOf(c,h)-h))||!o?u:",",h+=u.length,p?p=(p+1)%5:"rgba("===u.substr(-5)&&(p=1),c===r[o]||r.length<=o?f+=c:(f&&(d.push(f),f=""),s=parseFloat(r[o]),d.push(s),d._firstPT={_next:d._firstPT,t:d,p:d.length-1,s:s,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-s)||0,f:0,m:p&&p<4?Math.round:0}),h+=c.length;return(f+=t.substr(h))&&d.push(f),d.setRatio=$,B.test(t)&&(d.end=0),d},V=function(e,t,n,i,r,a,s,o,l){"function"==typeof i&&(i=i(l||0,e));var u=typeof e[t],c="function"!==u?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),d="get"!==n?n:c?s?e[c](s):e[c]():e[t],h="string"==typeof i&&"="===i.charAt(1),f={t:e,p:t,s:d,f:"function"===u,pg:0,n:r||t,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:h?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-d||0};if(("number"!=typeof d||"number"!=typeof i&&!h)&&(s||isNaN(d)||!h&&isNaN(i)||"boolean"==typeof d||"boolean"==typeof i?(f.fp=s,f={t:j(d,h?parseFloat(f.s)+f.c:i,o||L.defaultStringFilter,f),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||t,pr:0,m:0}):(f.s=parseFloat(d),h||(f.c=parseFloat(i)-f.s||0))),f.c)return(f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f},H=L._internals={isArray:b,isSelector:O,lazyTweens:N,blobDif:j},z=L._plugins={},G=H.tweenLookup={},q=0,W=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},Y={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},X=c._rootFramesTimeline=new I,K=c._rootTimeline=new I,Q=30,Z=H.lazyRender=function(){var e,t=N.length;for(U={};-1<--t;)(e=N[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);N.length=0};K._startTime=g.time,X._startTime=g.frame,K._active=X._active=!0,setTimeout(Z,1),c._updateRoot=L.render=function(){var e,t,n;if(N.length&&Z(),K.render((g.time-K._startTime)*K._timeScale,!1,!1),X.render((g.frame-X._startTime)*X._timeScale,!1,!1),N.length&&Z(),g.frame>=Q){for(n in Q=g.frame+(parseInt(L.autoSleep,10)||120),G){for(e=(t=G[n].tweens).length;-1<--e;)t[e]._gc&&t.splice(e,1);0===t.length&&delete G[n]}if((!(n=K._first)||n._paused)&&L.autoSleep&&!X._first&&1===g._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||g.sleep()}}},g.addEventListener("tick",c._updateRoot);var J=function(e,t,n){var i,r,a=e._gsTweenID;if(G[a||(e._gsTweenID=a="t"+q++)]||(G[a]={target:e,tweens:[]}),t&&((i=G[a].tweens)[r=i.length]=t,n))for(;-1<--r;)i[r]===t&&i.splice(r,1);return G[a].tweens},ee=function(e,t,n,i){var r,a,s=e.vars.onOverwrite;return s&&(r=s(e,t,n,i)),(s=L.onOverwrite)&&(a=s(e,t,n,i)),!1!==r&&!1!==a},te=function(e,t,n,i,r){var a,s,o,l;if(1===i||4<=i){for(l=r.length,a=0;a<l;a++)if((o=r[a])!==t)o._gc||o._kill(null,e,t)&&(s=!0);else if(5===i)break;return s}var u,c=t._startTime+y,d=[],h=0,f=0===t._duration;for(a=r.length;-1<--a;)(o=r[a])===t||o._gc||o._paused||(o._timeline!==t._timeline?(u=u||ne(t,0,f),0===ne(o,u,f)&&(d[h++]=o)):o._startTime<=c&&o._startTime+o.totalDuration()/o._timeScale>c&&((f||!o._initted)&&c-o._startTime<=2e-10||(d[h++]=o)));for(a=h;-1<--a;)if(o=d[a],2===i&&o._kill(n,e,t)&&(s=!0),2!==i||!o._firstPT&&o._initted){if(2!==i&&!ee(o,t))continue;o._enabled(!1,!1)&&(s=!0)}return s},ne=function(e,t,n){for(var i=e._timeline,r=i._timeScale,a=e._startTime;i._timeline;){if(a+=i._startTime,r*=i._timeScale,i._paused)return-100;i=i._timeline}return t<(a/=r)?a-t:n&&a===t||!e._initted&&a-t<2e-10?y:(a+=e.totalDuration()/e._timeScale/r)>t+y?0:a-t-y};n._init=function(){var e,t,n,i,r,a,s=this.vars,o=this._overwrittenProps,l=this._duration,u=!!s.immediateRender,c=s.ease;if(s.startAt){for(i in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={},s.startAt)r[i]=s.startAt[i];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=u&&!1!==s.lazy,r.startAt=r.delay=null,r.onUpdate=s.onUpdate,r.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=L.to(this.target,0,r),u)if(0<this._time)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(i in 0!==this._time&&(u=!1),n={},s)W[i]&&"autoCSS"!==i||(n[i]=s[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=u&&!1!==s.lazy,n.immediateRender=u,this._startAt=L.to(this.target,0,n),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof w?c:"function"==typeof c?new w(c,s.easeParams):M[c]||L.defaultEase:L.defaultEase,s.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,e=0;e<a;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(t&&L._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=s.onUpdate,this._initted=!0},n._initProps=function(e,t,n,i,r){var a,s,o,l,u,c;if(null==e)return!1;for(a in U[e._gsTweenID]&&Z(),this.vars.css||e.style&&e!==h&&e.nodeType&&z.css&&!1!==this.vars.autoCSS&&function(e,t){var n,i={};for(n in e)W[n]||n in t&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!z[n]||z[n]&&z[n]._autoCSS)||(i[n]=e[n],delete e[n]);e.css=i}(this.vars,e),this.vars)if(c=this.vars[a],W[a])c&&(c instanceof Array||c.push&&b(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[a]=c=this._swapSelfInParams(c,this));else if(z[a]&&(l=new z[a])._onInitTween(e,this.vars[a],this,r)){for(this._firstPT=u={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:a,pg:1,pr:l._priority,m:0},s=l._overwriteProps.length;-1<--s;)t[l._overwriteProps[s]]=this._firstPT;(l._priority||l._onInitAllProps)&&(o=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),u._next&&(u._next._prev=u)}else t[a]=V.call(this,e,a,"get",c,a,0,null,this.vars.stringFilter,r);return i&&this._kill(i,e)?this._initProps(e,t,n,i,r):1<this._overwrite&&this._firstPT&&1<n.length&&te(e,this,t,this._overwrite,n)?(this._kill(t,e),this._initProps(e,t,n,i,r)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(U[e._gsTweenID]=!0),o)},n.render=function(e,t,n){var i,r,a,s,o=this._time,l=this._duration,u=this._rawPrevTime;if(l-1e-7<=e&&0<=e)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(u<0||e<=0&&-1e-7<=e||u===y&&"isPause"!==this.data)&&u!==e&&(n=!0,y<u&&(r="onReverseComplete")),this._rawPrevTime=s=!t||e||u===e?e:y);else if(e<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===l&&0<u)&&(r="onReverseComplete",i=this._reversed),e<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||n)&&(0<=u&&(u!==y||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=s=!t||e||u===e?e:y)),(!this._initted||this._startAt&&this._startAt.progress())&&(n=!0);else if(this._totalTime=this._time=e,this._easeType){var c=e/l,d=this._easeType,h=this._easePower;(1===d||3===d&&.5<=c)&&(c=1-c),3===d&&(c*=2),1===h?c*=c:2===h?c*=c*c:3===h?c*=c*c*c:4===h&&(c*=c*c*c*c),this.ratio=1===d?1-c:2===d?c:e/l<.5?c/2:1-c/2}else this.ratio=this._ease.getRatio(e/l);if(this._time!==o||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=u,N.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/l):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&0<=e&&(this._active=!0),0===o&&(this._startAt&&(0<=e?this._startAt.render(e,t,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,t,n),t||(this._time!==o||i||n)&&this._callback("onUpdate")),r&&(this._gc&&!n||(e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,t,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[r]&&this._callback(r),0===l&&this._rawPrevTime===y&&s!==y&&(this._rawPrevTime=0)))}},n._kill=function(e,t,n){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:L.selector(t)||t;var i,r,a,s,o,l,u,c,d,h=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline;if((b(t)||O(t))&&"number"!=typeof t[0])for(i=t.length;-1<--i;)this._kill(e,t[i],n)&&(l=!0);else{if(this._targets){for(i=this._targets.length;-1<--i;)if(t===this._targets[i]){o=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=e?this._overwrittenProps[i]||{}:"all";break}}else{if(t!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(o){if(u=e||o,c=e!==r&&"all"!==r&&e!==o&&("object"!=typeof e||!e._tempKill),n&&(L.onOverwrite||this.vars.onOverwrite)){for(a in u)o[a]&&(d||(d=[]),d.push(a));if((d||!e)&&!ee(this,n,t,d))return!1}for(a in u)(s=o[a])&&(h&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(u)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete o[a]),c&&(r[a]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},n.invalidate=function(){return this._notifyPluginsOfEnabled&&L._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],c.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-y,this.render(Math.min(0,-this._delay))),this},n._enabled=function(e,t){if(v||g.wake(),e&&this._gc){var n,i=this._targets;if(i)for(n=i.length;-1<--n;)this._siblings[n]=J(i[n],this,!0);else this._siblings=J(this.target,this,!0)}return c.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&L._onPluginEvent(e?"_onEnable":"_onDisable",this)},L.to=function(e,t,n){return new L(e,t,n)},L.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new L(e,t,n)},L.fromTo=function(e,t,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new L(e,t,i)},L.delayedCall=function(e,t,n,i,r){return new L(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},L.set=function(e,t){return new L(e,0,t)},L.getTweensOf=function(e,t){if(null==e)return[];var n,i,r,a;if(e="string"!=typeof e?e:L.selector(e)||e,(b(e)||O(e))&&"number"!=typeof e[0]){for(n=e.length,i=[];-1<--n;)i=i.concat(L.getTweensOf(e[n],t));for(n=i.length;-1<--n;)for(a=i[n],r=n;-1<--r;)a===i[r]&&i.splice(n,1)}else if(e._gsTweenID)for(n=(i=J(e).concat()).length;-1<--n;)(i[n]._gc||t&&!i[n].isActive())&&i.splice(n,1);return i||[]},L.killTweensOf=L.killDelayedCallsTo=function(e,t,n){"object"==typeof t&&(n=t,t=!1);for(var i=L.getTweensOf(e,t),r=i.length;-1<--r;)i[r]._kill(n,e)};var ie=E("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ie.prototype},!0);if(n=ie.prototype,ie.version="1.19.0",ie.API=2,n._firstPT=null,n._addTween=V,n.setRatio=$,n._kill=function(e){var t,n=this._overwriteProps,i=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=n.length;-1<--t;)null!=e[n[t]]&&n.splice(t,1);for(;i;)null!=e[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},n._mod=n._roundProps=function(e){for(var t,n=this._firstPT;n;)(t=e[this._propName]||null!=n.n&&e[n.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===n.f?n.t._applyPT.m=t:n.m=t),n=n._next},L._onPluginEvent=function(e,t){var n,i,r,a,s,o=t._firstPT;if("_onInitAllProps"===e){for(;o;){for(s=o._next,i=r;i&&i.pr>o.pr;)i=i._next;(o._prev=i?i._prev:a)?o._prev._next=o:r=o,(o._next=i)?i._prev=o:a=o,o=s}o=t._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[e]&&o.t[e]()&&(n=!0),o=o._next;return n},ie.activate=function(e){for(var t=e.length;-1<--t;)e[t].API===ie.API&&(z[(new e[t])._propName]=e[t]);return!0},s.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,n=e.propName,i=e.priority||0,r=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=E("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){ie.call(this,n,i),this._overwriteProps=r||[]},!0===e.global),o=s.prototype=new ie(n);for(t in(o.constructor=s).API=e.API,a)"function"==typeof e[t]&&(o[a[t]]=e[t]);return s.version=e.version,ie.activate([s]),s},e=h._gsQueue){for(t=0;t<e.length;t++)e[t]();for(n in T)T[n].func||h.console.log("GSAP encountered missing dependency: "+n)}v=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define("bowser",n):e.bowser=n()}(this,0,function(){var w=!0;function s(n){function e(e){var t=n.match(e);return t&&1<t.length&&t[1]||""}var t,i,r,a=e(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(n)&&/android/i.test(n),o=/nexus\s*[0-6]\s*/i.test(n),l=!o&&/nexus\s*[0-9]+/i.test(n),u=/CrOS/.test(n),c=/silk/i.test(n),d=/sailfish/i.test(n),h=/tizen/i.test(n),f=/(web|hpw)os/i.test(n),p=/windows phone/i.test(n),m=(/SamsungBrowser/i.test(n),!p&&/windows/i.test(n)),g=!a&&!c&&/macintosh/i.test(n),v=!s&&!d&&!h&&!f&&/linux/i.test(n),_=e(/edge\/(\d+(\.\d+)?)/i),y=e(/version\/(\d+(\.\d+)?)/i),x=/tablet/i.test(n)&&!/tablet pc/i.test(n),b=!x&&/[^-]mobi/i.test(n),T=/xbox/i.test(n);/opera/i.test(n)?t={name:"Opera",opera:w,version:y||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(n)?t={name:"Opera",opera:w,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(n)?t={name:"Samsung Internet for Android",samsungBrowser:w,version:y||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(n)?t={name:"Opera Coast",coast:w,version:y||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(n)?t={name:"Yandex Browser",yandexbrowser:w,version:y||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(n)?t={name:"UC Browser",ucbrowser:w,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(n)?t={name:"Maxthon",maxthon:w,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(n)?t={name:"Epiphany",epiphany:w,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(n)?t={name:"Puffin",puffin:w,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(n)?t={name:"Sleipnir",sleipnir:w,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(n)?t={name:"K-Meleon",kMeleon:w,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:p?(t={name:"Windows Phone",windowsphone:w},_?(t.msedge=w,t.version=_):(t.msie=w,t.version=e(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(n)?t={name:"Internet Explorer",msie:w,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?t={name:"Chrome",chromeos:w,chromeBook:w,chrome:w,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(n)?t={name:"Microsoft Edge",msedge:w,version:_}:/vivaldi/i.test(n)?t={name:"Vivaldi",vivaldi:w,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||y}:d?t={name:"Sailfish",sailfish:w,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(n)?t={name:"SeaMonkey",seamonkey:w,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(n)?(t={name:"Firefox",firefox:w,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(n)&&(t.firefoxos=w)):c?t={name:"Amazon Silk",silk:w,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(n)?t={name:"PhantomJS",phantom:w,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(n)?t={name:"SlimerJS",slimer:w,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(n)||/rim\stablet/i.test(n)?t={name:"BlackBerry",blackberry:w,version:y||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(t={name:"WebOS",webos:w,version:y||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(n)&&(t.touchpad=w)):/bada/i.test(n)?t={name:"Bada",bada:w,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:h?t={name:"Tizen",tizen:w,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(n)?t={name:"QupZilla",qupzilla:w,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(n)?t={name:"Chromium",chromium:w,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(n)?t={name:"Chrome",chrome:w,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?t={name:"Android",version:y}:/safari|applewebkit/i.test(n)?(t={name:"Safari",safari:w},y&&(t.version=y)):a?(t={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},y&&(t.version=y)):t=/googlebot/i.test(n)?{name:"Googlebot",googlebot:w,version:e(/googlebot\/(\d+(\.\d+))/i)||y}:{name:e(/^(.*)\/(.*) /),version:(i=/^(.*)\/(.*) /,r=n.match(i),r&&1<r.length&&r[2]||"")},!t.msedge&&/(apple)?webkit/i.test(n)?(/(apple)?webkit\/537\.36/i.test(n)?(t.name=t.name||"Blink",t.blink=w):(t.name=t.name||"Webkit",t.webkit=w),!t.version&&y&&(t.version=y)):!t.opera&&/gecko\//i.test(n)&&(t.name=t.name||"Gecko",t.gecko=w,t.version=t.version||e(/gecko\/(\d+(\.\d+)?)/i)),t.windowsphone||t.msedge||!s&&!t.silk?t.windowsphone||t.msedge||!a?g?t.mac=w:T?t.xbox=w:m?t.windows=w:v&&(t.linux=w):(t[a]=w,t.ios=w):t.android=w;var S="";t.windows?S=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):t.windowsphone?S=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):t.mac?S=(S=e(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):a?S=(S=e(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?S=e(/android[ \/-](\d+(\.\d+)*)/i):t.webos?S=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):t.blackberry?S=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):t.bada?S=e(/bada\/(\d+(\.\d+)*)/i):t.tizen&&(S=e(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(t.osversion=S);var E=!t.windows&&S.split(".")[0];return x||l||"ipad"==a||s&&(3==E||4<=E&&!b)||t.silk?t.tablet=w:(b||"iphone"==a||"ipod"==a||s||o||t.blackberry||t.webos||t.bada)&&(t.mobile=w),t.msedge||t.msie&&10<=t.version||t.yandexbrowser&&15<=t.version||t.vivaldi&&1<=t.version||t.chrome&&20<=t.version||t.samsungBrowser&&4<=t.version||t.firefox&&20<=t.version||t.safari&&6<=t.version||t.opera&&10<=t.version||t.ios&&t.osversion&&6<=t.osversion.split(".")[0]||t.blackberry&&10.1<=t.version||t.chromium&&20<=t.version?t.a=w:t.msie&&t.version<10||t.chrome&&t.version<20||t.firefox&&t.version<20||t.safari&&t.version<6||t.opera&&t.version<10||t.ios&&t.osversion&&t.osversion.split(".")[0]<6||t.chromium&&t.version<20?t.c=w:t.x=w,t}var o=s("undefined"!=typeof navigator&&navigator.userAgent||"");function i(e){return e.split(".").length}function r(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function l(e){for(var n=Math.max(i(e[0]),i(e[1])),t=r(e,function(e){var t=n-i(e);return r((e+=new Array(t+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});0<=--n;){if(t[0][n]>t[1][n])return 1;if(t[0][n]!==t[1][n])return-1;if(0===n)return 0}}function a(e,t,n){var i=o;"string"==typeof t&&(n=t,t=void 0),void 0===t&&(t=!1),n&&(i=s(n));var r=""+i.version;for(var a in e)if(e.hasOwnProperty(a)&&i[a]){if("string"!=typeof e[a])throw new Error("Browser version in the minVersion map should be a string: "+a+": "+String(e));return l([r,e[a]])<0}return t}return o.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in o)return!0}return!1},o.isUnsupportedBrowser=a,o.compareVersions=l,o.check=function(e,t,n){return!a(e,t,n)},o._detect=s,o}),function(e,i,t){if(e){for(var r,a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},s=1;s<20;++s)a[111+s]="f"+s;for(s=0;s<=9;++s)a[s+96]=s.toString();T.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},T.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},T.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},T.prototype.reset=function(){return this._callbacks={},this._directMap={},this},T.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" mousetrap "))&&(!function e(t,n){return null!==t&&t!==i&&(t===n||e(t.parentNode,n))}(t,this.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},T.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},T.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);r=null},T.init=function(){var t=T(i);for(var e in t)"_"!==e.charAt(0)&&(T[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},T.init(),e.Mousetrap=T,"undefined"!=typeof module&&module.exports&&(module.exports=T),"function"==typeof define&&define.amd&&define(function(){return T})}function _(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function y(e){if("keypress"!=e.type)return a[e.which]?a[e.which]:n[e.which]?n[e.which]:String.fromCharCode(e.which).toLowerCase();var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}function x(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function u(e,t,n){return n||(n=function(){if(!r)for(var e in r={},a)95<e&&e<112||a.hasOwnProperty(e)&&(r[a[e]]=e);return r}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function b(e,t){var n,i,r,a,s=[];for(n="+"===(a=e)?["+"]:(a=a.replace(/\+{2}/g,"+plus")).split("+"),r=0;r<n.length;++r)i=n[r],l[i]&&(i=l[i]),t&&"keypress"!=t&&o[i]&&(i=o[i],s.push("shift")),x(i)&&s.push(i);return{key:i,modifiers:s,action:t=u(i,s,t)}}function T(e){var p=this;if(e=e||i,!(p instanceof T))return new T(e);p.target=e,p._callbacks={},p._directMap={};var l,m={},u=!1,c=!1,d=!1;function h(e){e=e||{};var t,n=!1;for(t in m)e[t]?n=!0:m[t]=0;n||(d=!1)}function f(e,t,n,i,r,a){var s,o,l,u,c=[],d=n.type;if(!p._callbacks[e])return[];for("keyup"==d&&x(e)&&(t=[e]),s=0;s<p._callbacks[e].length;++s)if(o=p._callbacks[e][s],(i||!o.seq||m[o.seq]==o.level)&&d==o.action&&("keypress"==d&&!n.metaKey&&!n.ctrlKey||(l=t,u=o.modifiers,l.sort().join(",")===u.sort().join(",")))){var h=!i&&o.combo==r,f=i&&o.seq==i&&o.level==a;(h||f)&&p._callbacks[e].splice(s,1),c.push(o)}return c}function g(e,t,n,i){var r,a;p.stopCallback(t,t.target||t.srcElement,n,i)||!1===e(t,n)&&((a=t).preventDefault?a.preventDefault():a.returnValue=!1,(r=t).stopPropagation?r.stopPropagation():r.cancelBubble=!0)}function t(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,n,i=y(e);i&&("keyup"!=e.type||u!==i?p.handleKey(i,(n=[],(t=e).shiftKey&&n.push("shift"),t.altKey&&n.push("alt"),t.ctrlKey&&n.push("ctrl"),t.metaKey&&n.push("meta"),n),e):u=!1)}function o(t,e,n,i){function r(e){return function(){d=e,++m[t],clearTimeout(l),l=setTimeout(h,1e3)}}function a(e){g(n,e,t),"keyup"!==i&&(u=y(e)),setTimeout(h,10)}for(var s=m[t]=0;s<e.length;++s){var o=s+1===e.length?a:r(i||b(e[s+1]).action);v(e[s],o,i,t,s)}}function v(e,t,n,i,r){p._directMap[e+":"+n]=t;var a,s=(e=e.replace(/\s+/g," ")).split(" ");1<s.length?o(e,s,t,n):(a=b(e,n),p._callbacks[a.key]=p._callbacks[a.key]||[],f(a.key,a.modifiers,{type:a.action},i,e,r),p._callbacks[a.key][i?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:i,level:r,combo:e}))}p._handleKey=function(e,t,n){var i,r=f(e,t,n),a={},s=0,o=!1;for(i=0;i<r.length;++i)r[i].seq&&(s=Math.max(s,r[i].level));for(i=0;i<r.length;++i)if(r[i].seq){if(r[i].level!=s)continue;o=!0,a[r[i].seq]=1,g(r[i].callback,n,r[i].combo,r[i].seq)}else o||g(r[i].callback,n,r[i].combo);var l="keypress"==n.type&&c;n.type!=d||x(e)||l||h(a),c=o&&"keydown"==n.type},p._bindMultiple=function(e,t,n){for(var i=0;i<e.length;++i)v(e[i],t,n)},_(e,"keypress",t),_(e,"keydown",t),_(e,"keyup",t)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null),function a(s,o,l){function u(t,e){if(!o[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=o[t]={exports:{}};s[t][0].call(r.exports,function(e){return u(s[t][1][e]||e)},r,r.exports,a,s,o,l)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";var o,i,l,r,u,c={encode:function(e){for(var t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var i=e[n++];i<128||(i<224?i=(31&i)<<6:(i<240?i=(15&i)<<12:(i=(7&i)<<18,i|=(63&e[n++])<<12),i|=(63&e[n++])<<6),i|=63&e[n++]),t.push(String.fromCharCode(i))}return t.join("")}},d={};o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t=0,n=[],i=0|e.length/3;0<i--;){var r=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push(o.charAt(63&r>>6)),n.push(o.charAt(63&r))}if(2==e.length-t){r=(e[t]<<16)+(e[t+1]<<8);n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push(o.charAt(63&r>>6)),n.push("=")}else if(1==e.length-t){r=e[t]<<16;n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push("==")}return n.join("")},l=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),r=function(e){for(var t=0,n=[],i=0|e.length/4;0<i--;){var r=(l[e.charCodeAt(t)]<<18)+(l[e.charCodeAt(t+1)]<<12)+(l[e.charCodeAt(t+2)]<<6)+l[e.charCodeAt(t+3)];n.push(255&r>>16),n.push(255&r>>8),n.push(255&r),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},u={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},d.decodeArray=function(e){var t=r(e);return new Uint8Array(t)},d.encodeASCII=function(e){var t=u.encode(e);return i(t)},d.decodeASCII=function(e){var t=r(e);return u.decode(t)},d.encode=function(e){var t=c.encode(e);return i(t)},d.decode=function(e){var t=r(e);return c.decode(t)},void 0!==n&&(n.decode=d.decode,n.decodeArray=d.decodeArray,n.encode=d.encode)},{}],2:[function(e,t,n){"use strict";!function(e){var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},s={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},h=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,i,r){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var t=function(e,t,n,i,r,a){this.uchar=e||" ",this.penState=new f(t,n,i,r,a)};t.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var i=function(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new f};i.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=o(e);32<=this.pos?d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var r=function(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new i);this.currRow=14,this.nrRollUpRows=null,this.reset()};r.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var i=e.indent,r=Math.max(i-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")}else d.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<15;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+': "'+a+'"'):t.push(a.trim()))}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var p=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new r,this.nonDisplayedMemory=new r,this.lastOutputScreen=new r,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=46<=e,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var m=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};m.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,i,r,a=!1;this.lastTime=e,d.setTime(e);for(var s=0;s<t.length;s+=2)if(i=127&t[s],r=127&t[s+1],16<=i&&i<=31&&i===this.lastCmdA&&r===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+h([i,r])+") is dropped");else if(0!==i||0!==r){if(d.log("DATA","["+h([t[s],t[s+1]])+"] -> ("+h([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(a=this.parseChars(i,r)))if(this.currChNr&&0<=this.currChNr){this.channels[this.currChNr-1].insertChars(a)}else d.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+h([i,r])+" orig: "+h([t[s],t[s+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var i=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?i.cc_RCL():33===t?i.cc_BS():34===t?i.cc_AOF():35===t?i.cc_AON():36===t?i.cc_DER():37===t?i.cc_RU(2):38===t?i.cc_RU(3):39===t?i.cc_RU(4):40===t?i.cc_FON():41===t?i.cc_RDC():42===t?i.cc_TR():43===t?i.cc_RTD():44===t?i.cc_EDM():45===t?i.cc_CR():46===t?i.cc_ENM():47===t&&i.cc_EOC():i.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;var i=this.channels[n-1];return i.insertChars([32]),i.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+h([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,i;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,i=64<=t&&t<=95?1===n?a[e]:l[e]:1===n?s[e]:u[e];var r=this.interpretPAC(i,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=95<t?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},parseChars:function(e,t){var n=null,i=null,r=null;if(17<=(r=25<=e?(n=2,e-8):(n=1,e))&&r<=19){var a;a=17===r?t+80:18===r?t+112:t+144,d.log("INFO","Special char '"+o(a)+"' in channel "+n),i=[a],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(i){var s=h(i);d.log("DEBUG","Char codes =  "+s.join(","))}return i},parseBackgroundAttributes:function(e,t){var n,i,r;return!(!((16===e||24===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&45<=t&&t<=47)||(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=c[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,0))},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};e.logger=d,e.PenState=f,e.CaptionScreen=r,e.Cea608Parser=m,e.findCea608Nalus=function(e,t,n){for(var i=0,r=t,a=[],s=function(e,t,n,i){if(4!==e||t<8)return null;var r=n.getUint8(i),a=n.getUint16(i+1),s=n.getUint32(i+3),o=n.getUint8(i+7);return 181==r&&49==a&&1195456820==s&&3==o};r<t+n;){if(i=e.getUint32(r),6==(31&e.getUint8(r+4)))for(var o=r+5,l=-1;o<r+4+i-1;){l=0;for(var u=255;255===u;)l+=u=e.getUint8(o),o++;var c=0;for(u=255;255===u;)c+=u=e.getUint8(o),o++;s(l,c,e,o)&&a.push([o,c]),o+=c}r+=i+4}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],i=[[],[]];n+=8;var r=31&e.getUint8(n);n+=2;for(var a=0;a<r;a++){var s=e.getUint8(n),o=4&s,l=3&s;n++;var u=e.getUint8(n);n++;var c=e.getUint8(n);n++,o&&(127&u)+(127&c)!=0&&(0===l?(i[0].push(u),i[0].push(c)):1===l&&(i[1].push(u),i[1].push(c)))}return i}}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(u){var c,e,t;for(c=[],t=0,e=u.length;t<e;t+=1)u[t].isRoot?c.push("root"):c.push(u[t].name);var l=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},d=function(e,t,n){var i,r,a,s,o;if(null!==e&&0!==e.length)for(i=0,r=e.length;i<r;i+=1)a=e[i],t.hasOwnProperty(a.name)&&(n.hasOwnProperty(a.name)?a.merge&&(s=t[a.name],o=n[a.name],"object"==typeof s&&"object"==typeof o?l(s,o):null!=a.mergeFunction?n[a.name]=a.mergeFunction(s,o):n[a.name]=s+o):n[a.name]=t[a.name])},h=function e(t,n){var i,r,a,s,o,l,u,c=t;if(null!==c.children&&0!==c.children.length)for(i=0,r=c.children.length;i<r;i+=1)if(l=c.children[i],n.hasOwnProperty(l.name))if(l.isArray)for(a=0,s=(o=n[l.name+"_asArray"]).length;a<s;a+=1)u=o[a],d(c.properties,n,u),e(l,u);else u=n[l.name],d(c.properties,n,u),e(l,u)};return{run:function e(t){var n,i,r,a,s,o,l;if(null===t)return t;if("object"!=typeof t)return t;for(n=0,i=c.length;n<i;n+=1)"root"===c[n]&&(s=u[n],h(s,o=t));for(a in t)if(t.hasOwnProperty(a)&&"__children"!=a){if(-1!==(r=c.indexOf(a)))if((s=u[r]).isArray)for(n=0,i=(l=t[a+"_asArray"]).length;n<i;n+=1)o=l[n],h(s,o);else o=t[a],h(s,o);e(t[a])}return t}}},t.exports=n.default},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(S){function E(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function l(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function w(e,t,n,i){for(var r=0;r<e.length;r++){var a=e[r];if("string"==typeof a){if(a==i)break}else if(a instanceof RegExp){if(a.test(i))break}else if("function"==typeof a&&a(t,n,i))break}return r!=e.length}function M(e,t,n){switch(S.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]}!(e[t]instanceof Array)&&0<S.arrayAccessFormPaths.length&&w(S.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function A(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),1<i.length&&n.setMilliseconds(i[1]),t[6]&&t[7]){var r=60*t[6]+Number(t[7]);r=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*r:r),n.setMinutes(n.getMinutes()-r-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function C(e,t){if(e.nodeType==P.DOCUMENT_NODE){for(var n=new Object,i=e.childNodes,r=0;r<i.length;r++)(s=i[r]).nodeType==P.ELEMENT_NODE&&(S.ignoreRoot?n=C(s):(n={})[o=E(s)]=C(s));return n}if(e.nodeType==P.ELEMENT_NODE){(n=new Object).__cnt=0;var a=[];for(i=e.childNodes,r=0;r<i.length;r++){var s,o=E(s=i[r]);if(s.nodeType!=P.COMMENT_NODE){var l=t+"."+o;if(y=n,x=s.nodeType,b=o,T=l,!(x==P.ELEMENT_NODE&&0<S.xmlElementsFilter.length)||w(S.xmlElementsFilter,y,b,T))if(n.__cnt++,null==n[o]){var u=C(s,l);("#text"!=o||/[^\s]/.test(u))&&((c={})[o]=u,a.push(c)),n[o]=u,M(n,o,l)}else{var c;null!=n[o]&&(n[o]instanceof Array||(n[o]=[n[o]],M(n,o,l))),u=C(s,l),("#text"!=o||/[^\s]/.test(u))&&((c={})[o]=u,a.push(c)),n[o][n[o].length]=u}}}n.__children=a;for(var d=E(e),h=0;h<e.attributes.length;h++){var f=e.attributes[h];n.__cnt++;for(var p=f.value,m=0,g=S.matchers.length;m<g;m++){var v=S.matchers[m];v.test(f,d)&&(p=v.converter(f.value))}n[S.attributePrefix+f.name]=p}var _=e.prefix;return null!=_&&""!=_&&(n.__cnt++,n.__prefix=_),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),S.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==S.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<S.datetimeAccessFormPaths.length){var i=n.split(".#")[0];return w(S.datetimeAccessFormPaths,e,t,i)?A(e):e}return e}(n.__text,o,t+"."+o)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==S.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==S.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||S.keepCData?1<n.__cnt&&null!=n.__text&&S.skipEmptyTextNodesForObj&&(S.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!S.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}var y,x,b,T;if(e.nodeType==P.TEXT_NODE||e.nodeType==P.CDATA_SECTION_NODE)return e.nodeValue}function u(e,t,n,i){var r="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var s=n[a],o=e[s];S.escapeMode&&(o=l(o)),r+=" "+s.substr(S.attributePrefix.length)+"=",S.useDoubleQuotes?r+='"'+o+'"':r+="'"+o+"'"}return r+(i?"/>":">")}function c(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(e,t){return!!("property"==S.arrayAccessForm&&(n=t.toString(),i="_asArray",-1!==n.indexOf(i,n.length-i.length))||0==t.toString().indexOf(S.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function);var n,i}function h(e){var t=0;if(e instanceof Object)for(var n in e)d(e,n)||t++;return t}function f(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(S.attributePrefix)&&t.push(n);return t}function p(e){var t,n,i="";return e instanceof Object?i+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(S.escapeMode?n+=l(t.__text):n+=t.__text),n):null!=e&&(S.escapeMode?i+=l(e):i+=e),i}function m(e,t){return""===e?t:e+"."+t}function g(e,t,n,i){var r="";if(0==e.length)r+=u(e,t,n,!0);else for(var a=0;a<e.length;a++)r+=u(e[a],t,f(e[a]),!1),r+=v(e[a],m(i,t)),r+=c(e[a],t);return r}function v(e,t){var n,i,r,a="";if(0<h(e))for(var s in e)if(!d(e,s)&&(""==t||(n=e,r=m(t,i=s),0==S.jsonPropertiesFilter.length||""==r||w(S.jsonPropertiesFilter,n,i,r)))){var o=e[s],l=f(o);null==o||null==o?a+=u(o,s,l,!0):o instanceof Object?o instanceof Array?a+=g(o,s,l,t):o instanceof Date?(a+=u(o,s,l,!1),a+=o.toISOString(),a+=c(o,s)):0<h(o)||null!=o.__text||null!=o.__cdata?(a+=u(o,s,l,!1),a+=v(o,m(t,s)),a+=c(o,s)):a+=u(o,s,l,!0):(a+=u(o,s,l,!1),a+=p(o),a+=c(o,s))}return a+p(e)}void 0===(S=S||{}).escapeMode&&(S.escapeMode=!0),void 0===S.attributePrefix&&(S.attributePrefix="_"),S.arrayAccessForm=S.arrayAccessForm||"none",S.emptyNodeForm=S.emptyNodeForm||"text",void 0===S.enableToStringFunc&&(S.enableToStringFunc=!0),S.arrayAccessFormPaths=S.arrayAccessFormPaths||[],void 0===S.skipEmptyTextNodesForObj&&(S.skipEmptyTextNodesForObj=!0),void 0===S.stripWhitespaces&&(S.stripWhitespaces=!0),S.datetimeAccessFormPaths=S.datetimeAccessFormPaths||[],void 0===S.useDoubleQuotes&&(S.useDoubleQuotes=!1),S.xmlElementsFilter=S.xmlElementsFilter||[],S.jsonPropertiesFilter=S.jsonPropertiesFilter||[],void 0===S.keepCData&&(S.keepCData=!1),void 0===S.ignoreRoot&&(S.ignoreRoot=!1);var P={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){if(window.ActiveXObject||window,void 0===e)return null;var t;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?A(e):e},this.xml2json=function(e){return C(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return v(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},t.exports=n.default},{}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e(6),a=i(e(117)),s=i(e(148)),o=i(e(95));dashjs.Protection=s.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=o.default,n.default=dashjs,n.MediaPlayer=r.MediaPlayer,n.Protection=s.default,n.MetricsReporting=a.default,n.MediaPlayerFactory=o.default},{117:117,148:148,6:6,95:95}],6:[function(o,e,l){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(l,"__esModule",{value:!0});var n=t(o(93)),i=t(o(51)),r=o(52),a="undefined"!=typeof window&&window||e,s=a.dashjs;s||(s=a.dashjs={}),s.MediaPlayer=n.default,s.FactoryMaker=i.default,s.Version=(0,r.getVersionString)(),l.default=s,l.MediaPlayer=n.default,l.FactoryMaker=i.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{51:51,52:52,93:93}],7:[function(e,t,n){!function(e){"use strict";function c(e){var t=e.charCodeAt(0);return t===n||t===o?62:t===i||t===l?63:t<r?-1:t<r+10?t-r+26+26:t<s+26?t-s:t<a+26?t-a+26:void 0}var d="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),i="/".charCodeAt(0),r="0".charCodeAt(0),a="a".charCodeAt(0),s="A".charCodeAt(0),o="-".charCodeAt(0),l="_".charCodeAt(0);e.toByteArray=function(e){function t(e){o[u++]=e}var n,i,r,a,s,o;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;s="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,o=new d(3*e.length/4-s),r=0<s?e.length-4:e.length;var u=0;for(i=n=0;n<r;n+=4,i+=3)t((16711680&(a=c(e.charAt(n))<<18|c(e.charAt(n+1))<<12|c(e.charAt(n+2))<<6|c(e.charAt(n+3))))>>16),t((65280&a)>>8),t(255&a);return 2===s?t(255&(a=c(e.charAt(n))<<2|c(e.charAt(n+1))>>4)):1===s&&(t((a=c(e.charAt(n))<<10|c(e.charAt(n+1))<<4|c(e.charAt(n+2))>>2)>>8&255),t(255&a)),o},e.fromByteArray=function(e){function t(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}var n,i,r,a,s=e.length%3,o="";for(n=0,r=e.length-s;n<r;n+=3)i=(e[n]<<16)+(e[n+1]<<8)+e[n+2],o+=t((a=i)>>18&63)+t(a>>12&63)+t(a>>6&63)+t(63&a);switch(s){case 1:o+=t((i=e[e.length-1])>>2),o+=t(i<<4&63),o+="==";break;case 2:o+=t((i=(e[e.length-2]<<8)+e[e.length-1])>>10),o+=t(i>>4&63),o+=t(i<<2&63),o+="="}return o}}(void 0===n?this.base64js={}:n)},{}],8:[function(e,t,n){},{}],9:[function(e,t,n){function i(e){return e.toString(this.encoding)}function r(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=e(10).Buffer,o=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!o(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=r;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!(55296<=(r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived);var r;i=(t+=e.toString(this.encoding,0,i)).length-1;if(55296<=(r=t.charCodeAt(i))&&r<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},{10:10}],10:[function(D,e,k){(function(e){"use strict";function t(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?function(e,t){if(e=u(e,t<0?0:0|c(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}(this,e):"string"==typeof e?(t=this,n=e,"string"==typeof(i=1<arguments.length?arguments[1]:"utf8")&&""!==i||(i="utf8"),(t=u(t,0|r(n,i))).write(n,i),t):function(e,t){if(o.isBuffer(t))return n=e,i=t,r=0|c(i.length),n=u(n,r),i.copy(n,0,0,r),n;var n,i,r;if(A(t))return function(e,t){var n=0|c(t.length);e=u(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return l(e,t);if(t instanceof ArrayBuffer)return a=e,s=t,a=o.TYPED_ARRAY_SUPPORT?(s.byteLength,o._augment(new Uint8Array(s))):l(a,new Uint8Array(s))}var a,s;return t.length?function(e,t){var n=0|c(t.length);e=u(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}(e,t):function(e,t){var n,i=0;"Buffer"===t.type&&A(t.data)&&(n=t.data,i=0|c(n.length)),e=u(e,i);for(var r=0;r<i;r+=1)e[r]=255&n[r];return e}(e,t)}(this,e)):1<arguments.length?new o(e,arguments[1]):new o(e);var t,n,i}function l(e,t){var n=0|c(t.length);e=u(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function u(e,t){return o.TYPED_ARRAY_SUPPORT?(e=o._augment(new Uint8Array(t))).__proto__=o.prototype:(e.length=t,e._isBuffer=!0),0!==t&&t<=o.poolSize>>>1&&(e.parent=n),e}function c(e){if(e>=t())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t().toString(16)+" bytes");return 0|e}function r(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return S(e).length;default:if(i)return T(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=t.length;if(a%2!=0)throw new Error("Invalid hex string");a/2<i&&(i=a/2);for(var s=0;s<i;s++){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))throw new Error("Invalid hex string");e[n+s]=o}return s}function v(e,t,n,i){return E(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function d(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,s,o,l,u=e[r],c=null,d=239<u?4:223<u?3:191<u?2:1;if(r+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[r+1]))&&127<(l=(31&u)<<6|63&a)&&(c=l);break;case 3:a=e[r+1],s=e[r+2],128==(192&a)&&128==(192&s)&&2047<(l=(15&u)<<12|(63&a)<<6|63&s)&&(l<55296||57343<l)&&(c=l);break;case 4:a=e[r+1],s=e[r+2],o=e[r+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&65535<(l=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)&&l<1114112&&(c=l)}null===c?(c=65533,d=1):65535<c&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=d}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=C));return n}(i)}function h(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;r++)i+=String.fromCharCode(127&e[r]);return i}function f(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;r++)i+=String.fromCharCode(e[r]);return i}function p(e,t,n){var i,r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var a="",s=t;s<n;s++)a+=(i=e[s])<16?"0"+i.toString(16):i.toString(16);return a}function m(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function s(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,n,i,r,a){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(r<t||t<a)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range")}function i(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;r++)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function a(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;r++)e[n+r]=t>>>8*(i?r:3-r)&255}function y(e,t,n,i,r,a){if(r<t||t<a)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function x(e,t,n,i,r){return r||y(e,t,n,4,34028234663852886e22,-34028234663852886e22),M.write(e,t,n,i,23,4),n+4}function b(e,t,n,i,r){return r||y(e,t,n,8,17976931348623157e292,-17976931348623157e292),M.write(e,t,n,i,52,8),n+8}function T(e,t){t=t||1/0;for(var n,i=e.length,r=null,a=[],s=0;s<i;s++){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!r){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(s+1===i){-1<(t-=3)&&a.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function S(e){return w.toByteArray(function(e){if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(R,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function E(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}var w=D(7),M=D(17),A=D(27);k.Buffer=o,k.SlowBuffer=function e(t,n){if(!(this instanceof e))return new e(t,n);var i=new o(t,n);return delete i.parent,i},k.INSPECT_MAX_BYTES=50,o.poolSize=8192;var n={};(o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}())?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a&&e[r]===t[r];)++r;return r!==a&&(n=e[r],i=t[r]),n<i?-1:i<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!A(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var n;if(void 0===t)for(n=t=0;n<e.length;n++)t+=e[n].length;var i=new o(t),r=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(i,r),r+=a.length}return i},o.byteLength=r,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?d(this,0,e):function(e,t,n){var i,r,a,s=!1;if(e||(e="utf8"),(t|=0)<0&&(t=0),(n=void 0===n||n===1/0?this.length:0|n)>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return p(this,t,n);case"utf8":case"utf-8":return d(this,t,n);case"ascii":return h(this,t,n);case"binary":return f(this,t,n);case"base64":return i=this,a=n,0===(r=t)&&a===i.length?w.fromByteArray(i):w.fromByteArray(i.slice(r,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=k.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function n(e,t,n){for(var i=-1,r=0;n+r<e.length;r++)if(e[n+r]===t[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===t.length)return n+i}else i=-1;return-1}if(2147483647<t?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return n(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=t,t=0|n,n=r}var a,s,o,l,u,c,d,h,f,p=this.length-t;if((void 0===n||p<n)&&(n=p),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var m=!1;;)switch(i){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return h=t,f=n,E(T(e,(d=this).length-h),d,h,f);case"ascii":return v(this,e,t,n);case"binary":return v(this,e,t,n);case"base64":return l=this,u=t,c=n,E(S(e),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=t,o=n,E(function(e,t){for(var n,i,r,a=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),i=n>>8,r=n%256,a.push(r),a.push(i);return a}(e,(a=this).length-s),a,s,o);default:if(m)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),m=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;o.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)n=o._augment(this.subarray(e,t));else{var r=t-e;n=new o(r,void 0);for(var a=0;a<r;a++)n[a]=this[a+e]}return n.length&&(n.parent=this.parent||this),n},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||s(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||s(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},o.prototype.readUInt8=function(e,t){return t||s(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||s(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||s(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||s(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||s(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||s(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||s(e,t,this.length);for(var i=t,r=1,a=this[e+--i];0<i&&(r*=256);)a+=this[e+--i]*r;return(r*=128)<=a&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return t||s(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||s(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||s(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||s(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||s(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||s(e,4,this.length),M.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||s(e,4,this.length),M.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||s(e,8,this.length),M.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||s(e,8,this.length),M.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||_(this,e,t,n,Math.pow(2,8*n),0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||_(this,e,t,n,Math.pow(2,8*n),0);var r=n-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=e/a&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):i(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):i(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):a(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):a(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);_(this,e,t,n,r-1,-r)}var a=0,s=1,o=e<0?1:0;for(this[t]=255&e;++a<n&&(s*=256);)this[t+a]=(e/s>>0)-o&255;return t+n},o.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);_(this,e,t,n,r-1,-r)}var a=n-1,s=1,o=e<0?1:0;for(this[t+a]=255&e;0<=--a&&(s*=256);)this[t+a]=(e/s>>0)-o&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):i(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):i(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):a(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):a(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return x(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return x(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return b(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return b(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,a=i-n;if(this===e&&n<t&&t<i)for(r=a-1;0<=r;r--)e[r+t]=this[r+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(r=0;r<a;r++)e[r+t]=this[r+n];else e._set(this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof e)for(i=t;i<n;i++)this[i]=e;else{var r=T(e.toString()),a=r.length;for(i=t;i<n;i++)this[i]=r[i%a]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new TypeError("Buffer.toArrayBuffer not supported in this browser");if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var P=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._set=e.set,e.get=P.get,e.set=P.set,e.write=P.write,e.toString=P.toString,e.toLocaleString=P.toString,e.toJSON=P.toJSON,e.equals=P.equals,e.compare=P.compare,e.indexOf=P.indexOf,e.copy=P.copy,e.slice=P.slice,e.readUIntLE=P.readUIntLE,e.readUIntBE=P.readUIntBE,e.readUInt8=P.readUInt8,e.readUInt16LE=P.readUInt16LE,e.readUInt16BE=P.readUInt16BE,e.readUInt32LE=P.readUInt32LE,e.readUInt32BE=P.readUInt32BE,e.readIntLE=P.readIntLE,e.readIntBE=P.readIntBE,e.readInt8=P.readInt8,e.readInt16LE=P.readInt16LE,e.readInt16BE=P.readInt16BE,e.readInt32LE=P.readInt32LE,e.readInt32BE=P.readInt32BE,e.readFloatLE=P.readFloatLE,e.readFloatBE=P.readFloatBE,e.readDoubleLE=P.readDoubleLE,e.readDoubleBE=P.readDoubleBE,e.writeUInt8=P.writeUInt8,e.writeUIntLE=P.writeUIntLE,e.writeUIntBE=P.writeUIntBE,e.writeUInt16LE=P.writeUInt16LE,e.writeUInt16BE=P.writeUInt16BE,e.writeUInt32LE=P.writeUInt32LE,e.writeUInt32BE=P.writeUInt32BE,e.writeIntLE=P.writeIntLE,e.writeIntBE=P.writeIntBE,e.writeInt8=P.writeInt8,e.writeInt16LE=P.writeInt16LE,e.writeInt16BE=P.writeInt16BE,e.writeInt32LE=P.writeInt32LE,e.writeInt32BE=P.writeInt32BE,e.writeFloatLE=P.writeFloatLE,e.writeFloatBE=P.writeFloatBE,e.writeDoubleLE=P.writeDoubleLE,e.writeDoubleBE=P.writeDoubleBE,e.fill=P.fill,e.inspect=P.inspect,e.toArrayBuffer=P.toArrayBuffer,e};var R=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{17:17,27:27,7:7}],11:[function(e,t,n){var r={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(s.prototype._boxProcessors[e]=t)},createFile:function(){return new a},createBox:function(e,t,n){var i=s.create(e);return t&&t.append(i,n),i},createFullBox:function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var i=[],r=0;if("utf-8"===n)for(;r<e.byteLength;){var a=e.getUint8(r++);a<128||(a<224?a=(31&a)<<6:(a<240?a=(15&a)<<12:(a=(7&a)<<18,a|=(63&e.getUint8(r++))<<12),a|=(63&e.getUint8(r++))<<6),a|=63&e.getUint8(r++)),i.push(String.fromCharCode(a))}else for(;r<e.byteLength;)i.push(String.fromCharCode(e.getUint8(r++)));return i.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n){if(null==n)return void e.boxes.push(t);var i,r=-1;if("number"==typeof n)r=n;else{if("string"==typeof n)i=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);i=n.type}for(var a=0;a<e.boxes.length;a++)if(i===e.boxes[a].type){r=a+1;break}}e.boxes.splice(r,0,t)}},void 0!==n&&(n.parseBuffer=r.parseBuffer,n.addBoxProcessor=r.addBoxProcessor,n.createFile=r.createFile,n.createBox=r.createBox,n.createFullBox=r.createFullBox,n.Utils=r.Utils),r.Cursor=function(e){this.offset=void 0===e?0:e};var a=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};a.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=s.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},a._sweep=function(e,t,n){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[i],e,t,n)}},a.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,e=this._cursor.offset=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},a.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var s=function(){this._cursor=new r.Cursor};s.parse=function(e){var t=new s;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},s.create=function(e){var t=new s;return t.type=e,t.boxes=[],t},s.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],s.prototype._boxProcessors={},s.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},s.prototype._procFieldArray=function(e,t,n,i){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e][r]=this._readField(n,i);else for(r=0;r<this[e].length;r++)this._writeField(n,i,this[e][r])},s.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},s.prototype._procEntries=function(e,t,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e].push({}),n.call(this,this[e][i]);else for(i=0;i<t;i++)n.call(this,this[e][i])},s.prototype._procSubEntries=function(e,t,n,i){var r;if(this._parsing)for(e[t]=[],r=0;r<n;r++)e[t].push({}),i.call(this,e[t][r]);else for(r=0;r<n;r++)i.call(this,e[t][r])},s.prototype._procEntryField=function(e,t,n,i){this._parsing?e[t]=this._readField(n,i):this._writeField(n,i,e[t])},s.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(s.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},s.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},s.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var i=this._raw.getInt32(n),r=this._raw.getInt32(n+4);t=i*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},s.prototype._readUint=function(e){var t,n,i=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:i=this._raw.getUint8(r);break;case 16:i=this._raw.getUint16(r);break;case 24:i=((t=this._raw.getUint16(r))<<8)+(n=this._raw.getUint8(r+2));break;case 32:i=this._raw.getUint32(r);break;case 64:t=this._raw.getUint32(r),n=this._raw.getUint32(r+4),i=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,i},s.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var i=this._readUint(8);t+=String.fromCharCode(i)}return t},s.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},s.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},s.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<t){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},s.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},s.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},s.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},s.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(s.parse(this))},s.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},s.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},s.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},s.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var i=Math.floor(t/Math.pow(2,32)),r=t-i*Math.pow(2,32);this._rawo.setUint32(n,i),this._rawo.setUint32(n+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},s.prototype._writeUint=function(e,t){if(this._rawo){var n,i,r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(r,t);break;case 16:this._rawo.setUint16(r,t);break;case 24:n=(16776960&t)>>8,i=255&t,this._rawo.setUint16(r,n),this._rawo.setUint8(r+2,i);break;case 32:this._rawo.setUint32(r,t);break;case 64:i=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,n),this._rawo.setUint32(r+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},s.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},s.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},s.prototype._writeTemplate=function(e,t){var n=Math.floor(t),i=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,i)},s.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},s.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},s.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},s.prototype._boxProcessors.avc1=s.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},s.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},s.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},s.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},s.prototype._boxProcessors.free=s.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},s.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},s.prototype._boxProcessors.ftyp=s.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},s.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},s.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},s.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},s.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},s.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},s.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},s.prototype._boxProcessors.mp4a=s.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},s.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},s.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},s.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},s.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},s.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},s.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},s.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},s.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},s.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},s.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},s.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},s.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},s.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},s.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},s.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},s.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},s.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},s.prototype._boxProcessors["url "]=s.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},s.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},s.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},s.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},s.prototype._boxProcessors.vtte=function(){}},{}],12:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e(26)})},{26:26}],13:[function(e,t,n){function o(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||0<e.length&&"number"!=typeof e[0])}var u=Array.prototype.slice,c=e(15),d=e(14),h=t.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var i,r;if(o(e)||o(t))return!1;if(e.prototype!==t.prototype)return!1;if(d(e))return!!d(t)&&(e=u.call(e),t=u.call(t),h(e,t,n));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}try{var a=c(e),s=c(t)}catch(e){return!1}if(a.length!=s.length)return!1;for(a.sort(),s.sort(),i=a.length-1;0<=i;i--)if(a[i]!=s[i])return!1;for(i=a.length-1;0<=i;i--)if(r=a[i],!h(e[r],t[r],n))return!1;return typeof e==typeof t}(e,t,n))}},{14:14,15:15}],14:[function(e,t,n){function i(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var a="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(n=t.exports=a?i:r).supported=i,n.unsupported=r},{}],15:[function(e,t,n){function i(e){var t=[];for(var n in e)t.push(n);return t}(t.exports="function"==typeof Object.keys?Object.keys:i).shim=i},{}],16:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,r,a,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(u(n=this._events[e]))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];n.apply(this,r)}else if(l(n)){for(i=arguments.length,r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];for(i=(s=n.slice()).length,a=0;a<i;a++)s[a].apply(this,r)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned)&&((n=u(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()));return this},i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,r,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(n=this._events[e]).length,i=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(n)){for(a=r;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o(n=this._events[e]))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.listenerCount=function(e,t){return e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}],17:[function(e,t,n){n.read=function(e,t,n,i,r){var a,s,o=8*r-i-1,l=(1<<o)-1,u=l>>1,c=-7,d=n?r-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=o;0<c;a=256*a+e[t+d],d+=h,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=i;0<c;s=256*s+e[t+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),a-=u}return(f?-1:1)*s*Math.pow(2,a-i)},n.write=function(e,t,n,i,r,a){var s,o,l,u=8*a-r-1,c=(1<<u)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),2<=(t+=1<=s+d?h/l:h*Math.pow(2,1-d))*l&&(s++,l/=2),c<=s+d?(o=0,s=c):1<=s+d?(o=(t*l-1)*Math.pow(2,r),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));8<=r;e[n+f]=255&o,f+=p,o/=256,r-=8);for(s=s<<r|o,u+=r;0<u;e[n+f]=255&s,f+=p,s/=256,u-=8);e[n+f-p]|=128*m}},{}],18:[function(e,t,n){!function(e,a,x,o,s){function b(e){this.node=e}function T(){this.events=[],this.head=null,this.body=null}function S(){this.styling=null,this.layout=null}function E(){this.styles={}}function w(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function M(){this.regions={}}function l(e){this.kind=e,this.begin=null,this.end=null,this.styleAttrs=null,this.regionID=null,this.sets=null,this.timeContainer=null}function A(){l.call(this,"body")}function C(){l.call(this,"div")}function P(){l.call(this,"p")}function R(){l.call(this,"span"),this.space=null}function u(){l.call(this,"span"),this.space=null,this.text=null}function D(){l.call(this,"br")}function k(){this.id=null,this.begin=null,this.end=null,this.styleAttrs=null,this.sets=null}function I(){this.begin=null,this.end=null,this.qname=null,this.value=null}function r(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function c(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function d(e,t){var n={};if(null!==e)for(var i in e.attributes){var r=e.attributes[i].uri+" "+e.attributes[i].local,a=o.byQName[r];if(void 0!==a){var s=a.parse(e.attributes[i].value);null!==s?(n[r]=s,a===o.byName.zIndex&&g(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):N(t,"Cannot parse styling attribute "+r+" --\x3e "+e.attributes[i].value)}}return n}function h(e,t,n){for(var i in e.attributes)if(e.attributes[i].uri===t&&e.attributes[i].local===n)return e.attributes[i].value;return null}function f(e,t,n){var i,r=null;return null!==(i=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(r=parseFloat(i[1])/t):null!==(i=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(r=parseFloat(i[1])/e):null!==(i=/^(\d+(?:\.\d+)?)ms$/.exec(n))?r=parseFloat(i[1])/1e3:null!==(i=/^(\d+(?:\.\d+)?)s$/.exec(n))?r=parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)h$/.exec(n))?r=3600*parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)m$/.exec(n))?r=60*parseFloat(i[1]):null!==(i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?r=3600*parseInt(i[1])+60*parseInt(i[2])+parseFloat(i[3]):null!==(i=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(r=3600*parseInt(i[1])+60*parseInt(i[2])+parseInt(i[3])+(null===i[4]?0:parseInt(i[4])/t)),r}function p(e,t,n,i){var r=t&&"seq"===t.timeContainer,a=0;n&&"begin"in n.attributes&&null===(a=f(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&(g(i,"Malformed begin value "+n.attributes.begin.value+" (using 0)"),a=0);var s=r?0:null;n&&"dur"in n.attributes&&null===(s=f(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&g(i,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var o=null;n&&"end"in n.attributes&&null===(o=f(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&g(i,"Malformed end value (ignoring)");var l=0;if(t&&(l=r&&"contents"in t&&0<t.contents.length?t.contents[t.contents.length-1].end:t.begin||0),a+=l,null!==s)o=a+s;else{var u=t&&"end"in t?t.end:Number.POSITIVE_INFINITY;o=null!==o?o+l:u}return{begin:a,end:o}}function L(e,t,n){for(;0<t.styleRefs.length;){var i=t.styleRefs.pop();i in e.styles?(L(e,e.styles[i],n),O(e.styles[i].styleAttrs,t.styleAttrs)):N(n,"Non-existant style id referenced")}}function m(e,t,n,i){for(var r=t.length-1;0<=r;r--){var a=t[r];a in e.styles?O(e.styles[a].styleAttrs,n):N(i,"Non-existant style id referenced")}}function O(e,t){for(var n in e)n in t||(t[n]=e[n])}function g(e,t){if(e&&e.warn&&e.warn(t))throw t}function N(e,t){if(e&&e.error&&e.error(t))throw t}function U(e,t){throw e&&e.fatal&&e.fatal(t),t}function i(e,t){for(var n,i=0,r=e.length-1;i<=r;){var a=e[n=Math.floor((i+r)/2)];if(a<t)i=n+1;else{if(!(t<a))return{found:!0,index:n};r=n-1}}return{found:!1,index:i}}e.fromXML=function(e,f,p){var t=a.parser(!0,{xmlns:!0}),m=[],g=[],v=[],_=0,y=null;t.onclosetag=function(e){if(m[0]instanceof E)for(var t in m[0].styles)L(m[0],m[0].styles[t],f);else if(m[0]instanceof P||m[0]instanceof R){if(1<m[0].contents.length){var n,i=[m[0].contents[0]];for(n=1;n<m[0].contents.length;n++)m[0].contents[n]instanceof u&&i[i.length-1]instanceof u?i[i.length-1].text+=m[0].contents[n].text:i.push(m[0].contents[n]);m[0].contents=i}m[0]instanceof R&&1===m[0].contents.length&&m[0].contents[0]instanceof u&&null===m[0].text&&(m[0].text=m[0].contents[0].text,delete m[0].contents)}else m[0]instanceof b&&(m[0].node.uri===x.ns_tt&&"metadata"===m[0].node.local?_--:0<_&&p&&"onCloseTag"in p&&p.onCloseTag());v.shift(),g.shift(),m.shift()},t.ontext=function(e){if(void 0===m[0]);else if(m[0]instanceof R||m[0]instanceof P){var t=new u;t.initFromText(y,m[0],e,v[0],f),m[0].contents.push(t)}else m[0]instanceof b&&0<_&&p&&"onText"in p&&p.onText(e)},t.onopentag=function(e){var t=e.attributes["xml:space"];t?v.unshift(t.value):0===v.length?v.unshift("default"):v.unshift(v[0]);var n=e.attributes["xml:lang"];if(n?g.unshift(n.value):0===g.length?g.unshift(""):g.unshift(g[0]),e.uri===x.ns_tt)if("tt"===e.local)null!==y&&U("Two <tt> elements at ("+this.line+","+this.column+")"),(y=new T).initFromNode(e,f),m.unshift(y);else if("head"===e.local)m[0]instanceof T||U("Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==y.head&&U("Second <head> element at ("+this.line+","+this.column+")"),y.head=new S,m.unshift(y.head);else if("styling"===e.local)m[0]instanceof S||U("Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==y.head.styling&&U("Second <styling> element at ("+this.line+","+this.column+")"),y.head.styling=new E,m.unshift(y.head.styling);else if("style"===e.local){var i;m[0]instanceof E?((i=new w).initFromNode(e,f),i.id?y.head.styling.styles[i.id]=i:N("<style> element missing @id attribute"),m.unshift(i)):m[0]instanceof k?((i=new w).initFromNode(e,f),O(i.styleAttrs,m[0].styleAttrs),m.unshift(i)):U(f,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)m[0]instanceof S||U(f,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==y.head.layout&&U(f,"Second <layout> element at "+this.line+","+this.column+")"),y.head.layout=new M,m.unshift(y.head.layout);else if("region"===e.local){m[0]instanceof M||U(f,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var r=new k;r.initFromNode(y,e,f),!r.id||r.id in y.head.layout.regions?N(f,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):(y.head.layout.regions[r.id]=r,y._registerEvent(r)),m.unshift(r)}else if("body"===e.local){m[0]instanceof T||U(f,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==y.body&&U(f,"Second <body> element at "+this.line+","+this.column+")");var a=new A;a.initFromNode(y,e,f),y._registerEvent(a),y.body=a,m.unshift(a)}else if("div"===e.local){m[0]instanceof C||m[0]instanceof A||U(f,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var s=new C;s.initFromNode(y,m[0],e,f),y._registerEvent(s),m[0].contents.push(s),m.unshift(s)}else if("p"===e.local){m[0]instanceof C||U(f,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var o=new P;o.initFromNode(y,m[0],e,f),y._registerEvent(o),m[0].contents.push(o),m.unshift(o)}else if("span"===e.local){m[0]instanceof R||m[0]instanceof P||U(f,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var l=new R;l.initFromNode(y,m[0],e,v[0],f),y._registerEvent(l),m[0].contents.push(l),m.unshift(l)}else if("br"===e.local){m[0]instanceof R||m[0]instanceof P||U(f,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var u=new D;u.initFromNode(y,m[0],e,f),y._registerEvent(u),m[0].contents.push(u),m.unshift(u)}else if("set"===e.local){m[0]instanceof R||m[0]instanceof P||m[0]instanceof C||m[0]instanceof A||m[0]instanceof k||m[0]instanceof D||U(f,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var c=new I;c.initFromNode(y,m[0],e,f),y._registerEvent(c),m[0].sets.push(c),m.unshift(c)}else m.unshift(new b(e));else m.unshift(new b(e));if(m[0]instanceof b)if(e.uri===x.ns_tt&&"metadata"===e.local)_++;else if(0<_&&p&&"onOpenTag"in p){var d=[];for(var h in e.attributes)d[e.attributes[h].uri+" "+e.attributes[h].local]={uri:e.attributes[h].uri,local:e.attributes[h].local,value:e.attributes[h].value};p.onOpenTag(e.uri,e.local,d)}},t.write(e).close(),null!==y.head?delete y.head.styling:y.head=new S,null===y.head.layout&&(y.head.layout=new M);var n=!1;for(var i in y.head.layout.regions){n=!0;break}if(!n){var r=k.createDefaultRegion();y.head.layout.regions[r.id]=r}return y},T.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var n=h(e,x.ns_ttp,"cellResolution"),i=15,r=32;if(null!==n){var a=/(\d+) (\d+)/.exec(n);null!==a?(r=parseInt(a[1]),i=parseInt(a[2])):g(t,"Malformed cellResolution value (using initial value instead)")}return{w:r,h:i}}(e,t);var n=function(e,t){var n,i=h(e,x.ns_ttp,"frameRate"),r=30;null!==i&&(null!==(n=/(\d+)/.exec(i))?r=parseInt(n[1]):g(t,"Malformed frame rate attribute (using initial value instead)"));var a=h(e,x.ns_ttp,"frameRateMultiplier"),s=1;null!==a&&(null!==(n=/(\d+) (\d+)/.exec(a))?s=parseInt(n[1])/parseInt(n[2]):g(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var o=s*r,l=1,u=h(e,x.ns_ttp,"tickRate");return null===u?null!==i&&(l=o):null!==(n=/(\d+)/.exec(u))?l=parseInt(n[1]):g(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:o,tickRate:l}}(e,t);this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var n=h(e,x.ns_ittp,"aspectRatio"),i=null;if(null!==n){var r=/(\d+) (\d+)/.exec(n);if(null!==r){var a=parseInt(r[1]),s=parseInt(r[2]);0!==a&&0!==s?i=a/s:N(t,"Illegal aspectRatio values (ignoring)")}else N(t,"Malformed aspectRatio attribute (ignoring)")}return i}(e,t);var i=h(e,x.ns_ttp,"timeBase");null!==i&&"media"!==i&&U(t,"Unsupported time base");var r=function(e,t){var n=h(e,x.ns_tts,"extent");if(null===n)return null;var i=n.split(" ");if(2!==i.length)return g(t,"Malformed extent (ignoring)"),null;var r=s.parseLength(i[0]),a=s.parseLength(i[1]);return a&&r?{h:a,w:r}:(g(t,"Malformed extent values (ignoring)"),null)}(e,t);null===r?this.pxDimensions={h:480,w:640}:("px"===r.h.unit&&"px"===r.w.unit||U(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:r.h.value,w:r.w.value})},T.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=i(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=i(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},T.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},T.prototype.getMediaTimeEvents=function(){return this.events},w.prototype.initFromNode=function(e,t){this.id=r(e),this.styleAttrs=d(e,t),this.styleRefs=c(e)},l.prototype.initFromNode=function(e,t,n,i){var r,a,s,o,l=p(e,t,n,i);this.begin=l.begin,this.end=l.end,this.styleAttrs=d(n,i),null!==e.head&&null!==e.head.styling&&m(e.head.styling,c(n),this.styleAttrs,i),this.regionID=(o=n)&&"region"in o.attributes?o.attributes.region.value:"",this.sets=[],this.timeContainer=(a=i,(s=(r=n)&&"timeContainer"in r.attributes?r.attributes.timeContainer.value:null)&&"par"!==s?"seq"===s?"seq":(N(a,"Illegal value of timeContainer (assuming 'par')"),"par"):"par")},A.prototype.initFromNode=function(e,t,n){l.prototype.initFromNode.call(this,e,null,t,n),this.contents=[]},C.prototype.initFromNode=function(e,t,n,i){l.prototype.initFromNode.call(this,e,t,n,i),this.contents=[]},P.prototype.initFromNode=function(e,t,n,i){l.prototype.initFromNode.call(this,e,t,n,i),this.contents=[]},R.prototype.initFromNode=function(e,t,n,i,r){l.prototype.initFromNode.call(this,e,t,n,r),this.space=i,this.contents=[]},u.prototype.initFromText=function(e,t,n,i,r){l.prototype.initFromNode.call(this,e,t,null,r),this.text=n,this.space=i},D.prototype.initFromNode=function(e,t,n,i){l.prototype.initFromNode.call(this,e,t,n,i)},k.createDefaultRegion=function(){var e=new k;return e.id="",e.begin=0,e.end=Number.POSITIVE_INFINITY,e.styleAttrs={},e.sets=[],e},k.prototype.initFromNode=function(e,t,n){this.id=r(t);var i=p(e,null,t,n);this.begin=i.begin,this.end=i.end,this.styleAttrs=d(t,n),this.sets=[],null!==e.head&&null!==e.head.styling&&m(e.head.styling,c(t),this.styleAttrs,n)},I.prototype.initFromNode=function(e,t,n,i){var r=p(e,t,n,i);this.begin=r.begin,this.end=r.end;var a=d(n,i);for(var s in a){if(this.qname){N(i,"More than one style specified on set");break}this.qname=s,this.value=a[s]}}}(void 0===n?this.imscDoc={}:n,"undefined"==typeof sax?e(45):sax,"undefined"==typeof imscNames?e(22):imscNames,"undefined"==typeof imscStyles?e(23):imscStyles,"undefined"==typeof imscUtils?e(24):imscUtils)},{22:22,23:23,24:24,45:45}],19:[function(e,t,n){!function(e,t,y){function x(e,t,n){var i;if("region"===n.kind?(i=document.createElement("div")).style.position="absolute":"body"===n.kind?i=document.createElement("div"):"div"===n.kind?i=document.createElement("div"):"p"===n.kind?i=document.createElement("p"):"span"===n.kind?i=document.createElement("span"):"br"===n.kind&&(i=document.createElement("br")),i){for(var r in i.style.margin="0",S){var a=S[r],s=n.styleAttrs[a.qname];void 0!==s&&null!==a.map&&a.map(e,i,n,s)}var o=i,l=n.styleAttrs[y.byName.multiRowAlign.qname];if(l&&"auto"!==l){var u=document.createElement("span");u.style.display="inline-block",u.style.textAlign=l,i.appendChild(u),o=u,e.mra=l}var c=n.styleAttrs[y.byName.linePadding.qname];if(c&&0<c&&(e.lp=c),"span"===n.kind&&n.text)if(e.lp||e.mra)for(var d=0;d<n.text.length;d++){var h=document.createElement("span");h.textContent=n.text.charAt(d),i.appendChild(h)}else i.textContent=n.text;for(var f in t.appendChild(i),n.contents)x(e,o,n.contents[f]);if((e.lp||e.mra)&&"p"===n.kind){var p=[];(function e(t,n,i){if(0===t.childElementCount)n.push({element:t,bgcolor:i});else for(var r=t.style.backgroundColor||i,a=t.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&e(a,n,r),a=a.nextSibling})(o,p,"red"),function(e,t){for(var n=null,i=!0,r=!1,a=0;a<=e.length;a++)if(a===e.length||"br"!==e[a].element.localName){if(null===n||a===e.length||!T(e[a].element.getBoundingClientRect().top,e[a].element.getBoundingClientRect().height,e[n].element.getBoundingClientRect().top,e[n].element.getBoundingClientRect().height)){if(t&&!i){for(;0<=--a;)if(0!==e[a].element.getBoundingClientRect().width){if(c=e[a].element,d=e[a].color,h=t,c.style.paddingRight=h+"px",c.style.backgroundColor=d,0!==e[a].element.getBoundingClientRect().width&&T(e[a].element.getBoundingClientRect().top,e[a].element.getBoundingClientRect().height,e[n].element.getBoundingClientRect().top,e[n].element.getBoundingClientRect().height))break;e[a].element.style.paddingRight=null}i=!0;continue}if(a!==e.length&&null!==n&&!r){var s=document.createElement("br");e[a].element.parentElement.insertBefore(s,e[a].element),e.splice(a,0,{element:s}),r=!0;continue}if(a!==e.length&&t)for(;a<e.length;a++)if(0!==e[a].element.getBoundingClientRect().width){o=e[a].element,l=e[a].color,u=t,o.style.paddingLeft=u+"px",o.style.backgroundColor=l;break}r=i=!1,n=a}}else r=!0;var o,l,u;var c,d,h}(p,e.lp*e.h),e.lp&&delete e.lp,e.mra&&delete e.mra}if("region"===n.kind){var m=[];!function e(t,n){if(0===t.childElementCount&&"span"===t.localName){var i=t.getBoundingClientRect();0!==n.length&&T(i.top,i.height,n[n.length-1].top,n[n.length-1].height)?(i.top<n[n.length-1].top&&(n[n.length-1].top=i.top),i.height>n[n.length-1].height&&(n[n.length-1].height=i.height),n[n.length-1].text+=t.textContent):n.push({top:i.top,height:i.height,text:t.textContent})}else for(var r=t.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&e(r,n),r=r.nextSibling}(o,m);var g=n.styleAttrs[y.byName.writingMode.qname];if(("lrtb"===g||"lr"===g||"rltb"===g||"rl"===g)&&e.enableRollUp&&0<n.contents.length&&"after"===n.styleAttrs[y.byName.displayAlign.qname]){var v=new b(""===n.id?"_":n.id,m);if(e.currentISDState[v.id]=v,e.previousISDState&&v.id in e.previousISDState&&0<e.previousISDState[v.id].plist.length&&1<v.plist.length&&v.plist[v.plist.length-2].text===e.previousISDState[v.id].plist[e.previousISDState[v.id].plist.length-1].text){var _=i.firstElementChild;_.style.bottom="-"+v.plist[v.plist.length-1].height+"px",_.style.transition="transform 0.4s",_.style.position="relative",_.style.transform="translateY(-"+v.plist[v.plist.length-1].height+"px)"}}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(e.errorHandler,"Error processing ISD element kind: "+n.kind)}function b(e,t){this.id=e,this.plist=t}function T(e,t,n,i){return e+t<n+i&&n<e||n+i<=e+t&&e<=n}function n(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,i,r,a,s,o,l){var u=i||t.clientHeight,c=r||t.clientWidth;if(null!==e.aspectRatio){var d=u*e.aspectRatio;c<d?u=Math.round(c/e.aspectRatio):c=d}var h=document.createElement("div");h.style.position="relative",h.style.width=c+"px",h.style.height=u+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var f={h:u,w:c,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:s,previousISDState:o,enableRollUp:l||!1,currentISDState:{}};for(var p in t.appendChild(h),e.contents)x(f,h,e.contents[p]);return f.currentISDState};var S=[new n("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,i){t.style.backgroundColor="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")"}),new n("http://www.w3.org/ns/ttml#styling color",function(e,t,n,i){t.style.color="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")"}),new n("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,i){t.style.direction=i}),new n("http://www.w3.org/ns/ttml#styling display",function(e,t,n,i){}),new n("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,i){t.style.display="flex",t.style.flexDirection="column","before"===i?t.style.justifyContent="flex-start":"center"===i?t.style.justifyContent="center":"after"===i&&(t.style.justifyContent="flex-end")}),new n("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,i){e.regionH=i.h*e.h,e.regionW=i.w*e.w;var r=0,a=0,s=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];s&&(r=(s[0]+s[2])*e.h,a=(s[1]+s[3])*e.w),t.style.height=e.regionH-r+"px",t.style.width=e.regionW-a+"px"}),new n("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,i){var r=[];for(var a in i)"monospaceSerif"===i[a]?(r.push("Courier New"),r.push('"Liberation Mono"'),r.push("Courier"),r.push("monospace")):"proportionalSansSerif"===i[a]?(r.push("Arial"),r.push("Helvetica"),r.push('"Liberation Sans"'),r.push("sans-serif")):"monospace"===i[a]?r.push("monospace"):"sansSerif"===i[a]?r.push("sans-serif"):"serif"===i[a]?r.push("serif"):"monospaceSansSerif"===i[a]?(r.push("Consolas"),r.push("monospace")):"proportionalSerif"===i[a]?r.push("serif"):r.push(i[a]);t.style.fontFamily=r.join(",")}),new n("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,i){t.style.fontSize=i*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,i){t.style.fontStyle=i}),new n("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,i){t.style.fontWeight=i}),new n("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,i){t.style.lineHeight="normal"===i?"normal":i*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,i){t.style.opacity=i}),new n("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,i){t.style.top=i.h*e.h+"px",t.style.left=i.w*e.w+"px"}),new n("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,i){t.style.overflow=i}),new n("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,i){var r=[];r[0]=i[0]*e.h+"px",r[1]=i[3]*e.w+"px",r[2]=i[2]*e.h+"px",r[3]=i[1]*e.w+"px",t.style.padding=r.join(" ")}),new n("http://www.w3.org/ns/ttml#styling showBackground",null),new n("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,i){var r,a=n.styleAttrs[y.byName.direction.qname];r="start"===i?"rtl"===a?"right":"left":"end"===i?"rtl"===a?"left":"right":i,t.style.textAlign=r}),new n("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,i){t.style.textDecoration=i.join(" ").replace("lineThrough","line-through")}),new n("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,i){t.style.textShadow="none"===i?"":"rgba("+i.color[0].toString()+","+i.color[1].toString()+","+i.color[2].toString()+","+(i.color[3]/255).toString()+") 0px 0px "+i.thickness*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,i){var r;r="bidiOverride"===i?"bidi-override":i,t.style.unicodeBidi=r}),new n("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,i){t.style.visibility=i}),new n("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,i){"wrap"===i?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new n("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,i){"lrtb"===i||"lr"===i?t.style.writingMode="horizontal-tb":"rltb"===i||"rl"===i?t.style.writingMode="horizontal-tb":"tblr"===i?t.style.writingMode="vertical-lr":"tbrl"!==i&&"tb"!==i||(t.style.writingMode="vertical-rl")}),new n("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,i){t.style.zIndex=i}),new n("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,i){if(null!==e.imgResolver&&null!==i){var r=document.createElement("img"),a=e.imgResolver(i,r);a&&(r.src=a),r.height=e.regionH,r.width=e.regionW,t.appendChild(r)}}),new n("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,i){e.displayForcedOnlyMode&&!1===i&&(t.style.visibility="hidden")})],i={};for(var r in S)i[S[r].qname]=S[r]}(void 0===n?this.imscHTML={}:n,"undefined"==typeof imscNames?e(22):imscNames,"undefined"==typeof imscStyles?e(23):imscStyles)},{22:22,23:23}],20:[function(e,t,n){!function(e,t,I){function L(e,t,n,i,r,a,s,o){if(t<s.begin||t>=s.end)return null;var l="regionID"in s&&""!==s.regionID?s.regionID:a;if(null!==r&&l!==n.id&&(!("contents"in s)||"contents"in s&&0===s.contents.length||""!==l))return null;var u=new O(s);for(var c in s.sets)t<s.sets[c].begin||t>=s.sets[c].end||(u.styleAttrs[s.sets[c].qname]=s.sets[c].value);var d,h={};for(var f in u.styleAttrs)if(h[f]=!0,f===I.byName.writingMode.qname&&!(I.byName.direction.qname in u.styleAttrs)){var p=u.styleAttrs[f];"lrtb"===p||"lr"===p?u.styleAttrs[I.byName.direction.qname]="ltr":"rltb"!==p&&"rl"!==p||(u.styleAttrs[I.byName.direction.qname]="rtl")}if(null!==r)for(var m in I.all){var g=I.all[m];if(g.qname===I.byName.textDecoration.qname){var v=r.styleAttrs[g.qname],_=u.styleAttrs[g.qname],y=[];void 0===_?y=v:-1===_.indexOf("none")?((-1===_.indexOf("noUnderline")&&-1!==v.indexOf("underline")||-1!==_.indexOf("underline"))&&y.push("underline"),(-1===_.indexOf("noLineThrough")&&-1!==v.indexOf("lineThrough")||-1!==_.indexOf("lineThrough"))&&y.push("lineThrough"),(-1===_.indexOf("noOverline")&&-1!==v.indexOf("overline")||-1!==_.indexOf("overline"))&&y.push("overline")):y.push("none"),u.styleAttrs[g.qname]=y}else g.inherit&&g.qname in r.styleAttrs&&!(g.qname in u.styleAttrs)&&(u.styleAttrs[g.qname]=r.styleAttrs[g.qname])}for(var x in I.all){var b=I.all[x];b.qname in u.styleAttrs||("region"===u.kind||!1===b.inherit&&null!==b.initial)&&(u.styleAttrs[b.qname]=b.parse(b.initial),h[b.qname]=!0)}for(var T in I.all){var S=I.all[T];if(S.qname in h&&null!==S.compute){var E=S.compute(e,r,u,u.styleAttrs[S.qname]);null!==E?u.styleAttrs[S.qname]=E:N(o,"Style '"+S.qname+"' on element '"+u.kind+"' cannot be computed")}}if("none"===u.styleAttrs[I.byName.display.qname])return null;for(var w in null===r?d=null===i?[]:[i]:"contents"in s&&(d=s.contents),d){var M=L(e,t,n,i,u,l,d[w]);null!==M&&u.contents.push(M.element)}for(var A in u.styleAttrs)-1===I.byQName[A].applies.indexOf(u.kind)&&delete u.styleAttrs[A];if("span"===u.kind&&u.text&&"default"===u.space){var C=u.text.replace(/\s+/g," ");u.text=C}if("p"===u.kind){var P=[];!function e(t,n){if("contents"in t)for(var i in t.contents)e(t.contents[i],n);else n.push(t)}(u,P);for(var R=0,D="after_br",k=0;;)if("after_br"===D)R>=P.length||"br"===P[R].kind?(D="before_br",k=R,R--):("preserve"!==P[R].space&&(P[R].text=P[R].text.replace(/^\s+/g,"")),0<P[R].text.length?(D="looking_br",R++):P.splice(R,1));else if("before_br"===D)if(R<0||"br"===P[R].kind){if(D="after_br",(R=k+1)>=P.length)break}else if("preserve"!==P[R].space&&(P[R].text=P[R].text.replace(/\s+$/g,"")),0<P[R].text.length){if(D="after_br",(R=k+1)>=P.length)break}else P.splice(R,1),R--;else R>=P.length||"br"===P[R].kind?(D="before_br",k=R,R--):R++;!function e(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var n=t.contents.length;n--;)e(t.contents[n])&&t.contents.splice(n,1);return 0===t.contents.length}}(u)}return"div"===u.kind&&I.byName.backgroundImage.qname in u.styleAttrs||"br"===u.kind||"contents"in u&&0<u.contents.length||"span"===u.kind&&null!==u.text||"region"===u.kind&&"always"===u.styleAttrs[I.byName.showBackground.qname]?{region_id:l,element:u}:null}function s(e){this.contents=[],this.aspectRatio=e.aspectRatio}function O(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function N(e,t){if(e&&e.error&&e.error(t))throw t}e.generateISD=function(e,t,n){var i=new s(e);for(var r in e.head.layout.regions){var a=L(e,t,e.head.layout.regions[r],e.body,null,"",e.head.layout.regions[r],n);null!==a&&i.contents.push(a.element)}return i}}(void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames?e(22):imscNames,"undefined"==typeof imscStyles?e(23):imscStyles)},{22:22,23:23}],21:[function(e,t,n){n.generateISD=e(20).generateISD,n.fromXML=e(18).fromXML,n.renderHTML=e(19).render},{18:18,19:19,20:20}],22:[function(e,t,n){var i;(i=void 0===n?this.imscNames={}:n).ns_tt="http://www.w3.org/ns/ttml",i.ns_tts="http://www.w3.org/ns/ttml#styling",i.ns_ttp="http://www.w3.org/ns/ttml#parameter",i.ns_xml="http://www.w3.org/XML/1998/namespace",i.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",i.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",i.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",i.ns_ebutts="urn:ebu:tt:style"},{}],23:[function(e,t,n){!function(l,e,a){function t(e,t,n,i,r,a,s,o){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=r,this.animatable=a,this.initial=n,this.applies=i,this.parse=s,this.compute=o}for(var n in l.all=[new t(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new t(e.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new t(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new t(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),i=a.parseLength(t[1]);return i&&n?{h:i,w:n}:null},function(e,t,n,i){var r,a;if("auto"===i)r=1;else if("%"===i.h.unit)r=i.h.value/100;else{if("px"!==i.h.unit)return null;r=i.h.value/e.pxDimensions.h}if("auto"===i)a=1;else if("%"===i.w.unit)a=i.w.value/100;else{if("px"!==i.w.unit)return null;a=i.w.value/e.pxDimensions.w}return{h:r,w:a}}),new t(e.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),n=[];for(var i in t)"'"!==t[i].charAt(0)&&'"'!==t[i].charAt(0)&&"default"===t[i]?n.push("monospaceSerif"):n.push(t[i]);return n},null),new t(e.ns_tts,"fontSize","1c",["span"],!0,!0,a.parseLength,function(e,t,n,i){var r;if("%"===i.unit)r=null!==t?t.styleAttrs[l.byName.fontSize.qname]*i.value/100:i.value/100/e.cellResolution.h;else if("em"===i.unit)r=null!==t?t.styleAttrs[l.byName.fontSize.qname]*i.value:i.value/e.cellResolution.h;else if("c"===i.unit)r=i.value/e.cellResolution.h;else{if("px"!==i.unit)return null;r=i.value/e.pxDimensions.h}return r}),new t(e.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:a.parseLength(e)},function(e,t,n,i){var r;if("normal"===i)r=i;else if("%"===i.unit)r=n.styleAttrs[l.byName.fontSize.qname]*i.value/100;else if("em"===i.unit)r=n.styleAttrs[l.byName.fontSize.qname]*i.value;else if("c"===i.unit)r=i.value/e.cellResolution.h;else{if("px"!==i.unit)return null;r=i.value/e.pxDimensions.h}return r}),new t(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new t(e.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),i=a.parseLength(t[1]);return i&&n?{h:i,w:n}:null},function(e,t,n,i){var r,a;if("auto"===i)r=0;else if("%"===i.h.unit)r=i.h.value/100;else{if("px"!==i.h.unit)return null;r=i.h.value/e.pxDimensions.h}if("auto"===i)a=0;else if("%"===i.w.unit)a=i.w.value/100;else{if("px"!==i.w.unit)return null;a=i.w.value/e.pxDimensions.w}return{h:r,w:a}}),new t(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;var n=[];for(var i in t){var r=a.parseLength(t[i]);if(!r)return null;n.push(r)}return n},function(e,t,n,i){var r;if(1===i.length)r=[i[0],i[0],i[0],i[0]];else if(2===i.length)r=[i[0],i[1],i[0],i[1]];else if(3===i.length)r=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;r=[i[0],i[1],i[2],i[3]]}var a=n.styleAttrs[l.byName.writingMode.qname];if("lrtb"===a||"lr"===a)r=[r[0],r[3],r[2],r[1]];else if("rltb"===a||"rl"===a)r=[r[0],r[1],r[2],r[3]];else if("tblr"===a)r=[r[3],r[0],r[1],r[2]];else{if("tbrl"!==a&&"tb"!==a)return null;r=[r[3],r[2],r[1],r[0]]}var s=[];for(var o in r)if(0===r[o].value)s[o]=0;else if("%"===r[o].unit)s[o]="0"===o||"2"===o?n.styleAttrs[l.byName.extent.qname].h*r[o].value/100:n.styleAttrs[l.byName.extent.qname].w*r[o].value/100;else if("em"===r[o].unit)s[o]=n.styleAttrs[l.byName.fontSize.qname]*r[o].value;else if("c"===r[o].unit)s[o]=r[o].value/e.cellResolution.h;else{if("px"!==r[o].unit)return null;s[o]=r[o].value/e.pxDimensions.h}return s}),new t(e.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,i){return"left"===i?"start":"right"===i?"end":i}),new t(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new t(e.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||2<n.length)return null;var i=a.parseColor(n[0]);if(null!==(t.color=i)&&n.shift(),1!==n.length)return null;var r=a.parseLength(n[0]);return r?(t.thickness=r,t):null},function(e,t,n,i){if("none"===i)return i;var r={};if(null===i.color?r.color=n.styleAttrs[l.byName.color.qname]:r.color=i.color,"%"===i.thickness.unit)r.thickness=n.styleAttrs[l.byName.fontSize.qname]*i.thickness.value/100;else if("em"===i.thickness.unit)r.thickness=n.styleAttrs[l.byName.fontSize.qname]*i.thickness.value;else if("c"===i.thickness.unit)r.thickness=i.thickness.value/e.cellResolution.h;else{if("px"!==i.thickness.unit)return null;r.thickness=i.thickness.value/e.pxDimensions.h}return r}),new t(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new t(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new t(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,function(e,t,n,i){return"c"===i.unit?i.value/e.cellResolution.h:null}),new t(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new t(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new t(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null)],l.byQName={},l.all)l.byQName[l.all[n].qname]=l.all[n];for(var i in l.byName={},l.all)l.byName[l.all[i].name]=l.all[i]}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(22):imscNames,"undefined"==typeof imscUtils?e(24):imscUtils)},{22:22,24:24}],24:[function(e,t,n){!function(e){var i=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,r=/rgb\((\d+),(\d+),(\d+)\)/,a=/rgba\((\d+),(\d+),(\d+),(\d+)\)/,s={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var t,n=null;return e in s?n=s[e]:null!==(t=i.exec(e))?n=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),void 0!==t[4]?parseInt(t[4],16):255]:null!==(t=r.exec(e))?n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]:null!==(t=a.exec(e))&&(n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]),n};var o=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=o.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}}(void 0===n?this.imscUtils={}:n)},{}],25:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],26:[function(e,t,n){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(i(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))||!!e._isBuffer);var t}},{}],27:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],28:[function(e,t,n){(function(o){"use strict";!o.version||0===o.version.indexOf("v0.")||0===o.version.indexOf("v1.")&&0!==o.version.indexOf("v1.8.")?t.exports=function(e,t,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var r,a,s=arguments.length;switch(s){case 0:case 1:return o.nextTick(e);case 2:return o.nextTick(function(){e.call(null,t)});case 3:return o.nextTick(function(){e.call(null,t,n)});case 4:return o.nextTick(function(){e.call(null,t,n,i)});default:for(r=new Array(s-1),a=0;a<r.length;)r[a++]=arguments[a];return o.nextTick(function(){e.apply(null,r)})}}:t.exports=o.nextTick}).call(this,e(29))},{29:29}],29:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(c===setTimeout)return setTimeout(t,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&o())}function o(){if(!m){var e=a(s);m=!0;for(var t=p.length;t;){for(f=p,p=[];++g<t;)f&&f[g].run();g=-1,t=p.length}f=null,m=!1,function(t){if(d===clearTimeout)return clearTimeout(t);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(e){c=i}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,p=[],m=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||a(o)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],30:[function(e,t,n){t.exports=e(31)},{31:31}],31:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);u.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",r)}function r(){this.allowHalfOpen||this._writableState.ended||s(a,this)}function a(e){e.end()}var s=e(28),o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=i;var l=e(12);l.inherits=e(25);var u=e(33),c=e(35);l.inherits(i,u);for(var d=o(c.prototype),h=0;h<d.length;h++){var f=d[h];i.prototype[f]||(i.prototype[f]=c.prototype[f])}Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),i.prototype._destroy=function(e,t){this.push(null),this.end(),s(t,e)}},{12:12,25:25,28:28,33:33,35:35}],32:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}t.exports=i;var r=e(34),a=e(12);a.inherits=e(25),a.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{12:12,25:25,34:34}],33:[function(I,L,e){(function(g,e){"use strict";function t(e,t){h=h||I(31),e=e||{},this.objectMode=!!e.objectMode,t instanceof h&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new P,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(C||(C=I(47).StringDecoder),this.decoder=new C(e.encoding),this.encoding=e.encoding)}function n(e){if(h=h||I(31),!(this instanceof n))return new n(e);this._readableState=new t(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),T.call(this)}function r(e,t,n,i,r){var a,s,o,l,u,c,d,h=e._readableState;null===t?(h.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,p(e)}}(e,h)):(r||(o=h,c=l=t,S.isBuffer(c)||c instanceof E||"string"==typeof l||void 0===l||o.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),a=u),a?e.emit("error",a):h.objectMode||t&&0<t.length?("string"==typeof t||h.objectMode||Object.getPrototypeOf(t)===S.prototype||(s=t,t=S.from(s)),i?h.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):f(e,h,t,!0):h.ended?e.emit("error",new Error("stream.push() after EOF")):(h.reading=!1,h.decoder&&!n?(t=h.decoder.write(t),h.objectMode||0!==t.length?f(e,h,t,!1):m(e,h)):f(e,h,t,!1))):i||(h.reading=!1));return!(d=h).ended&&(d.needReadable||d.length<d.highWaterMark||0===d.length)}function f(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&p(e)),m(e,t)}function a(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(k<=(n=e)?n=k:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function p(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(A("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?y(i,e):i(e))}function i(e){A("emit readable"),e.emit("readable"),v(e)}function m(e,t){t.readingMore||(t.readingMore=!0,y(s,e,t))}function s(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(A("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function o(e){A("readable nexttick read 0"),e.read(0)}function l(e,t){t.reading||(A("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;for(A("flow",t.flowing);t.flowing&&null!==e.read(););}function u(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):(i=e,r=t.buffer,a=t.decoder,i<r.head.data.length?(s=r.head.data.slice(0,i),r.head.data=r.head.data.slice(i)):s=i===r.head.data.length?r.shift():a?function(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(s===a.length?r+=a:r+=a.slice(0,e),0==(e-=s)){s===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=a.slice(s);break}++i}return t.length-=i,r}(i,r):function(e,t){var n=S.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,s),0==(e-=s)){s===a.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i).data=a.slice(s);break}++r}return t.length-=r,n}(i,r),n=s),n);var n,i,r,a,s}function c(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,y(d,t,e))}function d(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function _(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}var y=I(28);L.exports=n;var h,x=I(27);n.ReadableState=t;var b=(I(16).EventEmitter,function(e,t){return e.listeners(t).length}),T=I(38),S=I(44).Buffer,E=e.Uint8Array||function(){},w=I(12);w.inherits=I(25);var M=I(8),A=void 0;A=M&&M.debuglog?M.debuglog("stream"):function(){};var C,P=I(36),R=I(37);w.inherits(n,T);var D=["error","close","destroy","pause","resume"];Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),n.prototype.destroy=R.destroy,n.prototype._undestroy=R.undestroy,n.prototype._destroy=function(e,t){this.push(null),t(e)},n.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=S.from(e,t),t=""),n=!0),r(this,e,t,!1,n)},n.prototype.unshift=function(e){return r(this,e,null,!0,!1)},n.prototype.isPaused=function(){return!1===this._readableState.flowing},n.prototype.setEncoding=function(e){return C||(C=I(47).StringDecoder),this._readableState.decoder=new C(e),this._readableState.encoding=e,this};var k=8388608;n.prototype.read=function(e){A("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return A("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?c(this):p(this),null;if(0===(e=a(e,t))&&t.ended)return 0===t.length&&c(this),null;var i,r=t.needReadable;return A("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&A("length less than watermark",r=!0),t.ended||t.reading?A("reading or ended",r=!1):r&&(A("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=a(n,t))),null===(i=0<e?u(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&c(this)),null!==i&&this.emit("data",i),i},n.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},n.prototype.pipe=function(n,e){function i(e,t){A("onunpipe"),e===c&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,A("cleanup"),n.removeListener("close",o),n.removeListener("finish",l),n.removeListener("drain",f),n.removeListener("error",s),n.removeListener("unpipe",i),c.removeListener("end",r),c.removeListener("end",u),c.removeListener("data",a),p=!0,!d.awaitDrain||n._writableState&&!n._writableState.needDrain||f())}function r(){A("onend"),n.end()}function a(e){A("ondata"),(m=!1)!==n.write(e)||m||((1===d.pipesCount&&d.pipes===n||1<d.pipesCount&&-1!==_(d.pipes,n))&&!p&&(A("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,m=!0),c.pause())}function s(e){A("onerror",e),u(),n.removeListener("error",s),0===b(n,"error")&&n.emit("error",e)}function o(){n.removeListener("finish",l),u()}function l(){A("onfinish"),n.removeListener("close",o),u()}function u(){A("unpipe"),c.unpipe(n)}var c=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=n;break;case 1:d.pipes=[d.pipes,n];break;default:d.pipes.push(n)}d.pipesCount+=1,A("pipe count=%d opts=%j",d.pipesCount,e);var t=(!e||!1!==e.end)&&n!==g.stdout&&n!==g.stderr?r:u;d.endEmitted?y(t):c.once("end",t),n.on("unpipe",i);var h,f=(h=c,function(){var e=h._readableState;A("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&b(h,"data")&&(e.flowing=!0,v(h))});n.on("drain",f);var p=!1,m=!1;return c.on("data",a),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?x(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",s),n.once("close",o),n.once("finish",l),n.emit("pipe",c),d.flowing||(A("pipe resume"),c.resume()),n},n.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)i[a].emit("unpipe",this,n);return this}var s=_(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},n.prototype.addListener=n.prototype.on=function(e,t){var n=T.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&p(this):y(o,this))}return n},n.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(A("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,y(l,e,t))),this},n.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this},n.prototype.wrap=function(t){var n=this._readableState,i=!1,r=this;for(var e in t.on("end",function(){if(A("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),t.on("data",function(e){A("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||!(n.objectMode||e&&e.length)||r.push(e)||(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<D.length;a++)t.on(D[a],r.emit.bind(r,D[a]));return r._read=function(e){A("wrapped _read",e),i&&(i=!1,t.resume())},r},n._fromList=u}).call(this,I(29),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,16:16,25:25,27:27,28:28,29:29,31:31,36:36,37:37,38:38,44:44,47:47,8:8}],34:[function(e,t,n){"use strict";function i(n){this.afterTransform=function(e,t){return function(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("write callback called multiple times"));i.writechunk=null,(i.writecb=null)!==n&&void 0!==n&&e.push(n),r(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(n,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e){if(!(this instanceof r))return new r(e);s.call(this,e),this._transformState=new i(this);var n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,t){a(n,e,t)}):a(n)})}function a(e,t,n){if(t)return e.emit("error",t);null!=n&&e.push(n);var i=e._writableState,r=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=r;var s=e(31),o=e(12);o.inherits=e(25),o.inherits(r,s),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},r.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{12:12,25:25,31:31}],35:[function(S,E,e){(function(e,t){"use strict";function d(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function v(){}function n(e,t){s=s||S(31),e=e||{},this.objectMode=!!e.objectMode,t instanceof s&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(d=n,d.writing=!1,d.writecb=null,d.length-=d.writelen,d.writelen=0,t)s=e,o=n,l=i,u=t,c=r,--o.pendingcb,l?(y(c,u),y(g,s,o),s._writableState.errorEmitted=!0,s.emit("error",u)):(c(u),s._writableState.errorEmitted=!0,s.emit("error",u),g(s,o));else{var a=m(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||p(e,n),i?x(h,e,n,a,r):h(e,n,a,r)}var s,o,l,u,c;var d}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function i(e){if(s=s||S(31),!(o.call(i,this)||this instanceof s))return new i(e);this._writableState=new n(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function _(e,t,n,i,r,a){if(!n){var s=(l=i,u=r,(o=t).objectMode||!1===o.decodeStrings||"string"!=typeof l||(l=b.from(l,u)),l);i!==s&&(n=!0,r="buffer",i=s)}var o,l,u,c=t.objectMode?1:i.length;t.length+=c;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:a,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,c,i,r,a);return d}function f(e,t,n,i,r,a,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function h(e,t,n,i){var r,a;n||(r=e,0===(a=t).length&&a.needDrain&&(a.needDrain=!1,r.emit("drain"))),t.pendingcb--,i(),g(e,t)}function p(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),a=t.corkedRequestsFree;a.entry=n;for(var s=0,o=!0;n;)(r[s]=n).isBuf||(o=!1),n=n.next,s+=1;r.allBuffers=o,f(e,t,!0,t.length,r,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new d(t)}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback;if(f(e,t,!1,t.objectMode?1:l.length,l,u,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function a(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),g(t,n)})}function g(e,t){var n,i,r=m(t);return r&&(n=e,(i=t).prefinished||i.finalCalled||("function"==typeof n._final?(i.pendingcb++,i.finalCalled=!0,y(a,n,i)):(i.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}var y=S(28);E.exports=i;var s,x=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?setImmediate:y;i.WritableState=n;var r=S(12);r.inherits=S(25);var o,l={deprecate:S(48)},u=S(38),b=S(44).Buffer,T=t.Uint8Array||function(){},c=S(37);r.inherits(i,u),n.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(n.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(i,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||e&&e._writableState instanceof n}})):o=function(e){return e instanceof this},i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},i.prototype.write=function(e,t,n){var i,r,a,s,o,l,u,c,d,h,f,p=this._writableState,m=!1,g=(i=e,(b.isBuffer(i)||i instanceof T)&&!p.objectMode);return g&&!b.isBuffer(e)&&(f=e,e=b.from(f)),"function"==typeof t&&(n=t,t=null),g?t="buffer":t||(t=p.defaultEncoding),"function"!=typeof n&&(n=v),p.ended?(c=this,d=n,h=new Error("write after end"),c.emit("error",h),y(d,h)):(g||(r=this,a=p,o=n,u=!(l=!0),null===(s=e)?u=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),u&&(r.emit("error",u),y(o,u),l=!1),l))&&(p.pendingcb++,m=_(this,p,g,e,t,n)),m},i.prototype.cork=function(){this._writableState.corked++},i.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||p(this,e))},i.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},i.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},i.prototype._writev=null,i.prototype.end=function(e,t,n){var i,r,a,s=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||s.finished||(i=this,a=n,(r=s).ending=!0,g(i,r),a&&(r.finished?y(a):i.once("finish",a)),r.ended=!0,i.writable=!1)},Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),i.prototype.destroy=c.destroy,i.prototype._undestroy=c.undestroy,i.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,S(29),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,25:25,28:28,29:29,31:31,37:37,38:38,44:44,48:48}],36:[function(e,t,n){"use strict";var o=e(44).Buffer;t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,i=0;n;)r=n.data,a=t,s=i,r.copy(a,s),i+=n.data.length,n=n.next;var r,a,s;return t},e}()},{44:44}],37:[function(e,t,n){"use strict";function a(e,t){e.emit("error",t)}var s=e(28);t.exports={destroy:function(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;i||r?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||s(a,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(s(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{28:28}],38:[function(e,t,n){t.exports=e(16).EventEmitter},{16:16}],39:[function(e,t,n){t.exports=e(40).PassThrough},{40:40}],40:[function(e,t,n){(((n=t.exports=e(33)).Stream=n).Readable=n).Writable=e(35),n.Duplex=e(31),n.Transform=e(34),n.PassThrough=e(32)},{31:31,32:32,33:33,34:34,35:35}],41:[function(e,t,n){t.exports=e(40).Transform},{40:40}],42:[function(e,t,n){t.exports=e(35)},{35:35}],43:[function(e,t,n){var i=n.decimalAdjust=function(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))};t.exports={round10:function(e,t){return i("round",e,t)},floor10:function(e,t){return i("floor",e,t)},ceil10:function(e,t){return i("ceil",e,t)}},t.exports.polyfill=function(){Math.round10||(Math.round10=t.exports.round10),Math.floor10||(Math.floor10=t.exports.floor10),Math.ceil10||(Math.ceil10=t.exports.ceil10)}},{}],44:[function(e,t,n){function i(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return s(e,t,n)}var a=e(10),s=a.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=a:(i(a,n),n.Buffer=r),i(s,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=s(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},{10:10}],45:[function(H,e,t){(function(V){!function(f){function i(e,t){if(!(this instanceof i))return new i(e,t);var n=this;(function(e){for(var t=0,n=P.length;t<n;t++)e[P[t]]=""})(n),n.q=n.c="",n.bufferCheckPosition=f.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=$.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(f.XML_ENTITIES):Object.create(f.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(c)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),a(n,"onready")}function r(e,t){if(!(this instanceof r))return new r(e,t);s.apply(this),this._parser=new i(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,o.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e;n.on(t,e)},enumerable:!0,configurable:!1})})}function e(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function p(e,t){return n=e,"[object RegExp]"===Object.prototype.toString.call(n)?!!t.match(e):e[t];var n}function m(e,t){return!p(e,t)}function a(e,t,n){e[t]&&e[t](n)}function g(e,t,n){e.textNode&&v(e),a(e,t,n)}function v(e){e.textNode=_(e.opt,e.textNode),e.textNode&&a(e,"ontext",e.textNode),e.textNode=""}function _(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function y(e,t){return v(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,a(e,"onerror",t),e}function x(e){return e.sawRoot&&!e.closedRoot&&b(e,"Unclosed root tag"),e.state!==$.BEGIN&&e.state!==$.BEGIN_WHITESPACE&&e.state!==$.TEXT&&y(e,"Unexpected end"),v(e),e.c="",e.closed=!0,a(e,"onend"),i.call(e,e.strict,e.opt),e}function b(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&y(e,t)}function T(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,g(e,"onopentagstart",n)}function S(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),i=n[0],r=n[1];return t&&"xmlns"===e&&(i="xmlns",r=""),{prefix:i,local:r}}function E(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=S(e.attribName,!0),n=t.prefix,i=t.local;if("xmlns"===n)if("xml"===i&&e.attribValue!==l)b(e,"xml: prefix must be bound to "+l+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==u)b(e,"xmlns: prefix must be bound to "+u+"\nActual: "+e.attribValue);else{var r=e.tag,a=e.tags[e.tags.length-1]||e;r.ns===a.ns&&(r.ns=Object.create(a.ns)),r.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,g(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function w(t,e){if(t.opt.xmlns){var n=t.tag,i=S(t.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(b(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=i.prefix);var r=t.tags[t.tags.length-1]||t;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){g(t,"onopennamespace",{prefix:e,uri:n.ns[e]})});for(var a=0,s=t.attribList.length;a<s;a++){var o=t.attribList[a],l=o[0],u=o[1],c=S(l,!0),d=c.prefix,h=c.local,f=""===d?"":n.ns[d]||"",p={name:l,value:u,prefix:d,local:h,uri:f};d&&"xmlns"!==d&&!f&&(b(t,"Unbound namespace prefix: "+JSON.stringify(d)),p.uri=d),t.tag.attributes[l]=p,g(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),g(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=$.TEXT:t.state=$.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function M(n){if(!n.tagName)return b(n,"Weird empty close tag."),n.textNode+="</>",void(n.state=$.TEXT);if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",void(n.state=$.SCRIPT);g(n,"onscript",n.script),n.script=""}var e=n.tags.length,t=n.tagName;n.strict||(t=t[n.looseCase]());for(var i=t;e--&&n.tags[e].name!==i;)b(n,"Unexpected close tag");if(e<0)return b(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",void(n.state=$.TEXT);n.tagName=t;for(var r=n.tags.length;r-- >e;){var a=n.tag=n.tags.pop();n.tagName=n.tag.name,g(n,"onclosetag",n.tagName);var s={};for(var o in a.ns)s[o]=a.ns[o];var l=n.tags[n.tags.length-1]||n;n.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(e){var t=a.ns[e];g(n,"onclosenamespace",{prefix:e,uri:t})})}0===e&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=$.TEXT}function A(e,t){"<"===t?(e.state=$.OPEN_WAKA,e.startTagPosition=e.position):m(R,t)&&(b(e,"Non-whitespace before first tag."),e.textNode=t,e.state=$.TEXT)}function C(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}f.parser=function(e,t){return new i(e,t)},f.SAXParser=i,f.SAXStream=r,f.createStream=function(e,t){return new r(e,t)},f.MAX_BUFFER_LENGTH=65536;var s,P=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];f.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){x(this)},write:function(e){var t,n,i,r,a,s=this;if(this.error)throw this.error;if(s.closed)return y(s,"Cannot write after close. Assign an onready handler.");if(null===e)return x(s);"object"==typeof e&&(e=e.toString());for(var o=0,l="";l=C(e,o++),s.c=l;)switch(s.trackPosition&&(s.position++,"\n"===l?(s.line++,s.column=0):s.column++),s.state){case $.BEGIN:if(s.state=$.BEGIN_WHITESPACE,"\ufeff"===l)continue;A(s,l);continue;case $.BEGIN_WHITESPACE:A(s,l);continue;case $.TEXT:if(s.sawRoot&&!s.closedRoot){for(var u=o-1;l&&"<"!==l&&"&"!==l;)(l=C(e,o++))&&s.trackPosition&&(s.position++,"\n"===l?(s.line++,s.column=0):s.column++);s.textNode+=e.substring(u,o-1)}"<"!==l||s.sawRoot&&s.closedRoot&&!s.strict?(!m(R,l)||s.sawRoot&&!s.closedRoot||b(s,"Text data outside of root node."),"&"===l?s.state=$.TEXT_ENTITY:s.textNode+=l):(s.state=$.OPEN_WAKA,s.startTagPosition=s.position);continue;case $.SCRIPT:"<"===l?s.state=$.SCRIPT_ENDING:s.script+=l;continue;case $.SCRIPT_ENDING:"/"===l?s.state=$.CLOSE_TAG:(s.script+="<"+l,s.state=$.SCRIPT);continue;case $.OPEN_WAKA:if("!"===l)s.state=$.SGML_DECL,s.sgmlDecl="";else if(p(R,l));else if(p(O,l))s.state=$.OPEN_TAG,s.tagName=l;else if("/"===l)s.state=$.CLOSE_TAG,s.tagName="";else if("?"===l)s.state=$.PROC_INST,s.procInstName=s.procInstBody="";else{if(b(s,"Unencoded <"),s.startTagPosition+1<s.position){var c=s.position-s.startTagPosition;l=new Array(c).join(" ")+l}s.textNode+="<"+l,s.state=$.TEXT}continue;case $.SGML_DECL:(s.sgmlDecl+l).toUpperCase()===I?(g(s,"onopencdata"),s.state=$.CDATA,s.sgmlDecl="",s.cdata=""):s.sgmlDecl+l==="--"?(s.state=$.COMMENT,s.comment="",s.sgmlDecl=""):(s.sgmlDecl+l).toUpperCase()===L?(s.state=$.DOCTYPE,(s.doctype||s.sawRoot)&&b(s,"Inappropriately located doctype declaration"),s.doctype="",s.sgmlDecl=""):">"===l?(g(s,"onsgmldeclaration",s.sgmlDecl),s.sgmlDecl="",s.state=$.TEXT):(p(D,l)&&(s.state=$.SGML_DECL_QUOTED),s.sgmlDecl+=l);continue;case $.SGML_DECL_QUOTED:l===s.q&&(s.state=$.SGML_DECL,s.q=""),s.sgmlDecl+=l;continue;case $.DOCTYPE:">"===l?(s.state=$.TEXT,g(s,"ondoctype",s.doctype),s.doctype=!0):(s.doctype+=l,"["===l?s.state=$.DOCTYPE_DTD:p(D,l)&&(s.state=$.DOCTYPE_QUOTED,s.q=l));continue;case $.DOCTYPE_QUOTED:s.doctype+=l,l===s.q&&(s.q="",s.state=$.DOCTYPE);continue;case $.DOCTYPE_DTD:s.doctype+=l,"]"===l?s.state=$.DOCTYPE:p(D,l)&&(s.state=$.DOCTYPE_DTD_QUOTED,s.q=l);continue;case $.DOCTYPE_DTD_QUOTED:s.doctype+=l,l===s.q&&(s.state=$.DOCTYPE_DTD,s.q="");continue;case $.COMMENT:"-"===l?s.state=$.COMMENT_ENDING:s.comment+=l;continue;case $.COMMENT_ENDING:"-"===l?(s.state=$.COMMENT_ENDED,s.comment=_(s.opt,s.comment),s.comment&&g(s,"oncomment",s.comment),s.comment=""):(s.comment+="-"+l,s.state=$.COMMENT);continue;case $.COMMENT_ENDED:">"!==l?(b(s,"Malformed comment"),s.comment+="--"+l,s.state=$.COMMENT):s.state=$.TEXT;continue;case $.CDATA:"]"===l?s.state=$.CDATA_ENDING:s.cdata+=l;continue;case $.CDATA_ENDING:"]"===l?s.state=$.CDATA_ENDING_2:(s.cdata+="]"+l,s.state=$.CDATA);continue;case $.CDATA_ENDING_2:">"===l?(s.cdata&&g(s,"oncdata",s.cdata),g(s,"onclosecdata"),s.cdata="",s.state=$.TEXT):"]"===l?s.cdata+="]":(s.cdata+="]]"+l,s.state=$.CDATA);continue;case $.PROC_INST:"?"===l?s.state=$.PROC_INST_ENDING:p(R,l)?s.state=$.PROC_INST_BODY:s.procInstName+=l;continue;case $.PROC_INST_BODY:if(!s.procInstBody&&p(R,l))continue;"?"===l?s.state=$.PROC_INST_ENDING:s.procInstBody+=l;continue;case $.PROC_INST_ENDING:">"===l?(g(s,"onprocessinginstruction",{name:s.procInstName,body:s.procInstBody}),s.procInstName=s.procInstBody="",s.state=$.TEXT):(s.procInstBody+="?"+l,s.state=$.PROC_INST_BODY);continue;case $.OPEN_TAG:p(N,l)?s.tagName+=l:(T(s),">"===l?w(s):"/"===l?s.state=$.OPEN_TAG_SLASH:(m(R,l)&&b(s,"Invalid character in tag name"),s.state=$.ATTRIB));continue;case $.OPEN_TAG_SLASH:">"===l?(w(s,!0),M(s)):(b(s,"Forward-slash in opening tag not followed by >"),s.state=$.ATTRIB);continue;case $.ATTRIB:if(p(R,l))continue;">"===l?w(s):"/"===l?s.state=$.OPEN_TAG_SLASH:p(O,l)?(s.attribName=l,s.attribValue="",s.state=$.ATTRIB_NAME):b(s,"Invalid attribute name");continue;case $.ATTRIB_NAME:"="===l?s.state=$.ATTRIB_VALUE:">"===l?(b(s,"Attribute without value"),s.attribValue=s.attribName,E(s),w(s)):p(R,l)?s.state=$.ATTRIB_NAME_SAW_WHITE:p(N,l)?s.attribName+=l:b(s,"Invalid attribute name");continue;case $.ATTRIB_NAME_SAW_WHITE:if("="===l)s.state=$.ATTRIB_VALUE;else{if(p(R,l))continue;b(s,"Attribute without value"),s.tag.attributes[s.attribName]="",s.attribValue="",g(s,"onattribute",{name:s.attribName,value:""}),s.attribName="",">"===l?w(s):p(O,l)?(s.attribName=l,s.state=$.ATTRIB_NAME):(b(s,"Invalid attribute name"),s.state=$.ATTRIB)}continue;case $.ATTRIB_VALUE:if(p(R,l))continue;p(D,l)?(s.q=l,s.state=$.ATTRIB_VALUE_QUOTED):(b(s,"Unquoted attribute value"),s.state=$.ATTRIB_VALUE_UNQUOTED,s.attribValue=l);continue;case $.ATTRIB_VALUE_QUOTED:if(l!==s.q){"&"===l?s.state=$.ATTRIB_VALUE_ENTITY_Q:s.attribValue+=l;continue}E(s),s.q="",s.state=$.ATTRIB_VALUE_CLOSED;continue;case $.ATTRIB_VALUE_CLOSED:p(R,l)?s.state=$.ATTRIB:">"===l?w(s):"/"===l?s.state=$.OPEN_TAG_SLASH:p(O,l)?(b(s,"No whitespace between attributes"),s.attribName=l,s.attribValue="",s.state=$.ATTRIB_NAME):b(s,"Invalid attribute name");continue;case $.ATTRIB_VALUE_UNQUOTED:if(m(k,l)){"&"===l?s.state=$.ATTRIB_VALUE_ENTITY_U:s.attribValue+=l;continue}E(s),">"===l?w(s):s.state=$.ATTRIB;continue;case $.CLOSE_TAG:if(s.tagName)">"===l?M(s):p(N,l)?s.tagName+=l:s.script?(s.script+="</"+s.tagName,s.tagName="",s.state=$.SCRIPT):(m(R,l)&&b(s,"Invalid tagname in closing tag"),s.state=$.CLOSE_TAG_SAW_WHITE);else{if(p(R,l))continue;m(O,l)?s.script?(s.script+="</"+l,s.state=$.SCRIPT):b(s,"Invalid tagname in closing tag."):s.tagName=l}continue;case $.CLOSE_TAG_SAW_WHITE:if(p(R,l))continue;">"===l?M(s):b(s,"Invalid characters in closing tag");continue;case $.TEXT_ENTITY:case $.ATTRIB_VALUE_ENTITY_Q:case $.ATTRIB_VALUE_ENTITY_U:var d,h;switch(s.state){case $.TEXT_ENTITY:d=$.TEXT,h="textNode";break;case $.ATTRIB_VALUE_ENTITY_Q:d=$.ATTRIB_VALUE_QUOTED,h="attribValue";break;case $.ATTRIB_VALUE_ENTITY_U:d=$.ATTRIB_VALUE_UNQUOTED,h="attribValue"}";"===l?(s[h]+=(a=i=n=void 0,i=(t=s).entity,r=i.toLowerCase(),a="",t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[r]?t.ENTITIES[r]:("#"===(i=r).charAt(0)&&(a="x"===i.charAt(1)?(i=i.slice(2),(n=parseInt(i,16)).toString(16)):(i=i.slice(1),(n=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),a.toLowerCase()!==i?(b(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(n))),s.entity="",s.state=d):p(s.entity.length?F:U,l)?s.entity+=l:(b(s,"Invalid character in entity name"),s[h]+="&"+s.entity+l,s.entity="",s.state=d);continue;default:throw new Error(s,"Unknown state: "+s.state)}return s.position>=s.bufferCheckPosition&&function(e){for(var t=Math.max(f.MAX_BUFFER_LENGTH,10),n=0,i=0,r=P.length;i<r;i++){var a=e[P[i]].length;if(t<a)switch(P[i]){case"textNode":v(e);break;case"cdata":g(e,"oncdata",e.cdata),e.cdata="";break;case"script":g(e,"onscript",e.script),e.script="";break;default:y(e,"Max buffer length exceeded: "+P[i])}n=Math.max(n,a)}var s=f.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=s+e.position}(s),s},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;v(e=this),""!==e.cdata&&(g(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(g(e,"onscript",e.script),e.script="")}};try{s=H(46).Stream}catch(e){s=function(){}}var o=f.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});(r.prototype=Object.create(s.prototype,{constructor:{value:r}})).write=function(e){if("function"==typeof V&&"function"==typeof V.isBuffer&&V.isBuffer(e)){if(!this._decoder){var t=H(9).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},r.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},r.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===o.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),s.prototype.on.call(n,t,e)};var R="\r\n\t ",t="0124356789",n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",D="'\"",k=R+">",I="[CDATA[",L="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",c={xml:l,xmlns:u};R=e(R),t=e(t),n=e(n);var O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;D=e(D),k=e(k);var d,h,B,$=0;for(var j in f.STATE={BEGIN:$++,BEGIN_WHITESPACE:$++,TEXT:$++,TEXT_ENTITY:$++,OPEN_WAKA:$++,SGML_DECL:$++,SGML_DECL_QUOTED:$++,DOCTYPE:$++,DOCTYPE_QUOTED:$++,DOCTYPE_DTD:$++,DOCTYPE_DTD_QUOTED:$++,COMMENT_STARTING:$++,COMMENT:$++,COMMENT_ENDING:$++,COMMENT_ENDED:$++,CDATA:$++,CDATA_ENDING:$++,CDATA_ENDING_2:$++,PROC_INST:$++,PROC_INST_BODY:$++,PROC_INST_ENDING:$++,OPEN_TAG:$++,OPEN_TAG_SLASH:$++,ATTRIB:$++,ATTRIB_NAME:$++,ATTRIB_NAME_SAW_WHITE:$++,ATTRIB_VALUE:$++,ATTRIB_VALUE_QUOTED:$++,ATTRIB_VALUE_CLOSED:$++,ATTRIB_VALUE_UNQUOTED:$++,ATTRIB_VALUE_ENTITY_Q:$++,ATTRIB_VALUE_ENTITY_U:$++,CLOSE_TAG:$++,CLOSE_TAG_SAW_WHITE:$++,SCRIPT:$++,SCRIPT_ENDING:$++},f.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},f.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(f.ENTITIES).forEach(function(e){var t=f.ENTITIES[e],n="number"==typeof t?String.fromCharCode(t):t;f.ENTITIES[e]=n}),f.STATE)f.STATE[f.STATE[j]]=j;$=f.STATE,String.fromCodePoint||(d=String.fromCharCode,h=Math.floor,B=function(){var e,t,n=[],i=-1,r=arguments.length;if(!r)return"";for(var a="";++i<r;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||1114111<s||h(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,n.push(e,t)),(i+1===r||16384<n.length)&&(a+=d.apply(null,n),n.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:B,configurable:!0,writable:!0}):String.fromCodePoint=B)}(void 0===t?this.sax={}:t)}).call(this,H(10).Buffer)},{10:10,46:46,9:9}],46:[function(e,t,n){function i(){c.call(this)}t.exports=i;var c=e(16).EventEmitter;e(25)(i,c),i.Readable=e(40),i.Writable=e(42),i.Duplex=e(30),i.Transform=e(41),i.PassThrough=e(39),(i.Stream=i).prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function i(){l.readable&&l.resume&&l.resume()}function r(){u||(u=!0,t.end())}function a(){u||(u=!0,"function"==typeof t.destroy&&t.destroy())}function s(e){if(o(),0===c.listenerCount(this,"error"))throw e}function o(){l.removeListener("data",n),t.removeListener("drain",i),l.removeListener("end",r),l.removeListener("close",a),l.removeListener("error",s),t.removeListener("error",s),l.removeListener("end",o),l.removeListener("close",o),t.removeListener("close",o)}var l=this;l.on("data",n),t.on("drain",i),t._isStdio||e&&!1===e.end||(l.on("end",r),l.on("close",a));var u=!1;return l.on("error",s),t.on("error",s),l.on("end",o),l.on("close",o),t.on("close",o),t.emit("pipe",l),t}},{16:16,25:25,30:30,39:39,40:40,41:41,42:42}],47:[function(e,t,n){"use strict";function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(h.isEncoding===f||!f(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=s,this.end=o,t=4;break;case"utf8":this.fillLast=r,t=4;break;case"base64":this.text=l,this.end=u,t=3;break;default:return this.write=c,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function r(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function o(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function c(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}var h=e(44).Buffer,f=h.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};(n.StringDecoder=i).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},i.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=a(t[i]);return 0<=r?(0<r&&(e.lastNeed=r-1),r):--i<n?0:0<=(r=a(t[i]))?(0<r&&(e.lastNeed=r-2),r):--i<n?0:0<=(r=a(t[i]))?(0<r&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{44:44}],48:[function(e,t,n){(function(n){function i(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e,t=this.context,n=(0,o.default)(t).getInstance(),i=void 0,r=void 0,a=void 0,s=void 0;return e={log:function(){var t="",e=null;r&&(e=(new Date).getTime(),t+="["+(e-s)+"]"),a&&this&&this.getClassName&&(t+="["+this.getClassName()+"]",this.getType&&(t+="["+this.getType()+"]")),0<t.length&&(t+=" "),Array.apply(null,arguments).forEach(function(e){t+=e+" "}),i&&console.log(t),n.trigger(l.default.LOG,{message:t})},setLogTimestampVisible:function(e){r=e},setCalleeNameVisible:function(e){a=e},setLogToBrowserConsole:function(e){i=e},getLogToBrowserConsole:function(){return i}},a=!(r=i=!0),s=(new Date).getTime(),e}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(50)),l=i(e(54)),a=i(e(51));r.__dashjs_factory_name="Debug",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{50:50,51:51,54:54}],50:[function(e,t,n){"use strict";function i(){function a(e,n,i){var r=-1;return s[e]&&s[e].some(function(e,t){if(e&&e.callback===n&&(!i||i===e.scope))return r=t,!0}),r}var s={};return{on:function(n,e,t){var i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);if(!(0<=a(n,e,t))){s[n]=s[n]||[];var r={callback:e,scope:t,priority:i};s[n].some(function(e,t){if(e&&i>e.priority)return s[n].splice(t,0,r),!0})||s[n].push(r)}},off:function(e,t,n){if(e&&t&&s[e]){var i=a(e,t,n);i<0||(s[e][i]=null)}},trigger:function(e,t){if(e&&s[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,s[e]=s[e].filter(function(e){return e}),s[e].forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){s={}}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="EventBus";var o=s.default.getSingletonFactory(i);o.EVENT_PRIORITY_LOW=0,o.EVENT_PRIORITY_HIGH=5e3,s.default.updateSingletonFactory(i.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{51:51}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n in u){var i=u[n];if(i.context===e&&i.name===t)return i.instance}return null}function r(e,t,n){for(var i in n)if(n[i].name===e)return void(n[i].factory=t);n.push({name:e,factory:t})}function a(e,t){for(var n in t)if(t[n].name===e)return t[n].factory;return null}function n(e,t,n){for(var i in n)if(n[i].name===e)return void(n[i].factory=t)}function s(e,t,n,i){t.getClassName=function(){return e};var r=o(n)[e];if(r){var a=r.instance;if(!r.override)return a.apply({context:n,factory:l},i);for(var s in a=a.apply({context:n,factory:l,parent:t},i))t.hasOwnProperty(s)&&(t[s]=a[s])}return t}function o(t){var n=void 0;return e.forEach(function(e){e===t&&(n=e)}),n||(e.push(t),n=t),n}var l=void 0,e=[],u=[],c=[],d=[];return l={extend:function(e,t,n,i){var r=o(i);!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:i,setSingletonInstance:function(e,t,n){for(var i in u){var r=u[i];if(r.context===e&&r.name===t)return void(u[i].instance=n)}u.push({name:t,context:e,instance:n})},getSingletonFactory:function(n){var e=a(n.__dashjs_factory_name,c);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return t||(t=i(e,n.__dashjs_factory_name)),t||(t=s(n.__dashjs_factory_name,n.apply({context:e},arguments),e,arguments),u.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}},r(n.__dashjs_factory_name,e,c)),e},getSingletonFactoryByName:function(e){return a(e,c)},updateSingletonFactory:function(e,t){n(e,t,c)},getClassFactory:function(t){var e=a(t.__dashjs_factory_name,d);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return s(t.__dashjs_factory_name,t.apply({context:e},arguments),e,arguments)}}},r(t.__dashjs_factory_name,e,d)),e},getClassFactoryByName:function(e){return a(e,d)},updateClassFactory:function(e,t){n(e,t,d)}}}();n.default=i,t.exports=n.default},{}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return i};var i="2.6.6"},{}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(55),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=s,t.exports=n.default},{55:55}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(53),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=s,t.exports=n.default},{53:53}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,i=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),e}();n.default=r,t.exports=n.default},{}],56:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function s(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function o(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&w[e.streamInfo.id]?w[e.streamInfo.id][e.index]:null}function y(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i];if(e.id===r.id)return r}return null}function i(e){var t=new c.default,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=S.getRepresentationFor(e.index,n);return t.id=e.id,t.quality=e.index,t.bandwidth=S.getBandwidth(i),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,t.mediaInfo=x(e.adaptation),t}function x(e){var t,i=new d.default,n=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return i.id=e.id,i.index=e.index,i.type=e.type,i.streamInfo=a(e.period),i.representationCount=S.getRepresentationCount(n),i.lang=S.getLanguageForAdaptation(n),t=S.getViewpointForAdaptation(n),i.viewpoint=t?t.value:void 0,i.accessibility=S.getAccessibilityForAdaptation(n).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==m.default&&(n=t?"cea-608:"+t:"cea-608",i.embeddedCaptions=!0),n}),i.audioChannelConfiguration=S.getAudioChannelConfigurationForAdaptation(n).map(function(e){return e.value}),i.roles=S.getRolesForAdaptation(n).map(function(e){return e.value}),i.codec=S.getCodec(n),i.mimeType=S.getMimeType(n),i.contentProtection=S.getContentProtectionData(n),i.bitrateList=S.getBitrateListForAdaptation(n),i.contentProtection&&i.contentProtection.forEach(function(e){e.KID=S.getKID(e)}),i.isText=S.getIsTextTrack(i.mimeType),i}function b(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=M.default.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function a(e){var t,n,i=new h.default;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(t=e.mpd,(n=new f.default).DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=S.getDuration(t.manifest),n.isDynamic=S.getIsDynamic(t.manifest),n),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function T(){if(!S||!S.hasOwnProperty("getMpd")||!S.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function l(e){if(!(e&&e.hasOwnProperty("getRepresentationController")&&e.hasOwnProperty("getIndexHandler")&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getType")&&e.hasOwnProperty("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function r(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}function u(e){if(null===e||isNaN(e)||e%1!=0)throw new Error("quality argument is not an integer")}function e(){E=[],w={}}var t,S=void 0,E=void 0,w=void 0;return t={convertDataToRepresentationInfo:i,getDataForMedia:o,getStreamsInfo:function(e){var t=[],n=E;if(e){T();var i=S.getMpd(e);n=S.getRegularPeriods(i)}for(var r=0;r<n.length;r++)t.push(a(n[r]));return t},getMediaInfoForType:function(e,t){if(0===E.length)return null;var n=E[0].mpd.manifest,i=S.getAdaptationForType(n,e.index,t,e);if(!i)return null;var r=y(e,E),a=r.id,s=S.getIndexForAdaptation(i,n,e.index);return w[a]=w[a]||S.getAdaptationsForPeriod(r),x(w[a][s])},getAllMediaInfoForType:function(e,t,n){var i,r=E,a=n,s=[],o=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if(a){T();var h=S.getMpd(a);r=S.getRegularPeriods(h)}else{if(!(0<E.length))return s;a=E[0].mpd.manifest}var f=y(e,r),p=f.id,m=S.getAdaptationsForType(a,e.index,t!==M.default.EMBEDDED_TEXT?t:M.default.VIDEO);if(!m)return s;for(w[p]=w[p]||S.getAdaptationsForPeriod(f),c=0,i=m.length;c<i;c++)if(o=m[c],u=S.getIndexForAdaptation(o,a,e.index),l=x(w[p][u]),t===M.default.EMBEDDED_TEXT){var g=l.accessibility.length;for(d=0;d<g;d++)if(l){var v=l.accessibility[d];if(0===v.indexOf("cea-608:")){var _=v.substring(8).split(";");if("CC"===_[0].substring(0,2))for(d=0;d<_.length;d++)l||(l=x.call(this,w[p][u])),b(l,_[d].substring(0,3),_[d].substring(4)),s.push(l),l=null;else for(d=0;d<_.length;d++)l||(l=x.call(this,w[p][u])),b(l,"CC"+(d+1),_[d]),s.push(l),l=null}else 0===v.indexOf("cea-608")&&(b(l,M.default.CC1,"eng"),s.push(l),l=null)}}else t===M.default.IMAGE?(l.type=M.default.IMAGE,s.push(l),l=null):l&&s.push(l);return s},getCurrentRepresentationInfo:function(e){r(e);var t=e.getCurrentRepresentation();return t?i(t):null},getRepresentationInfoForQuality:function(e,t){r(e),u(t);var n=e.getRepresentationForQuality(t);return n?i(n):null},updateData:function(e){l(e);var t,n=y(e.getStreamInfo(),E),i=e.getMediaInfo(),r=o(i),a=e.getType(),s=void 0;t=i?i.id:null,0<E.length&&(s=t?S.getAdaptationForId(t,E[0].mpd.manifest,n.index):S.getAdaptationForIndex(i.index,E[0].mpd.manifest,n.index),e.getRepresentationController().updateData(s,r,a))},getInitRequest:function(e,t){var n,i=void 0,r=void 0;return l(e),u(t),i=e.getRepresentationController(),r=e.getIndexHandler(),n=i?i.getRepresentationForQuality(t):null,r?r.getInitRequest(n):null},getNextFragmentRequest:function(e,t){var n,i=void 0;return l(e),n=s(t,e.getRepresentationController()),(i=e.getIndexHandler())?i.getNextSegmentRequest(n):null},getFragmentRequestForTime:function(e,t,n,i){var r,a=void 0;return l(e),r=s(t,e.getRepresentationController()),(a=e.getIndexHandler())?a.getSegmentRequestForTime(r,n,i):null},generateFragmentRequestForTime:function(e,t,n){var i,r=void 0;return l(e),i=s(t,e.getRepresentationController()),(r=e.getIndexHandler())?r.generateSegmentRequestForTime(i,n):null},getIndexHandlerTime:function(e){l(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN},setIndexHandlerTime:function(e,t){l(e);var n=e.getIndexHandler();n&&n.setCurrentTime(t)},getEventsFor:function(e,t){var n=[];if(0===E.length)return n;var i=E[0].mpd.manifest;return e instanceof h.default?n=S.getEventsForPeriod(y(e,E)):e instanceof d.default?n=S.getEventStreamForAdaptationSet(i,o(e)):e instanceof c.default&&(n=S.getEventStreamForRepresentation(i,s(e,t.getRepresentationController()))),n},getEvent:function(e,t,n){if(!e||!t)return null;var i=new p.default,r=e.scheme_id_uri,a=e.value,s=e.timescale,o=e.presentation_time_delta,l=e.event_duration,u=e.id,c=e.message_data,d=n*s+o;return t[r]?(i.eventStream=t[r],i.eventStream.value=a,i.eventStream.timescale=s,i.duration=l,i.id=u,i.presentationTime=d,i.messageData=c,i.presentationTimeDelta=o,i):null},setConfig:function(e){e&&e.dashManifestModel&&(S=e.dashManifestModel)},updatePeriods:function(e){if(!e)return null;T();var t=S.getMpd(e);E=S.getRegularPeriods(t),w={}},reset:e},e(),t}Object.defineProperty(n,"__esModule",{value:!0});var M=i(e(100)),c=i(e(219)),d=i(e(217)),h=i(e(220)),f=i(e(216)),p=i(e(83)),a=i(e(51)),m=i(e(2));r.__dashjs_factory_name="DashAdapter",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{100:100,2:2,216:216,217:217,219:219,220:220,51:51,83:83}],57:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(n){function e(){w=-1,A=0,C=NaN,R=P=M=null}function s(e,t,n){var i=T.resolve(n.path),r=void 0,a=void 0;return i&&t!==i.url&&u.isRelative(t)?(r=i.url,a=i.serviceLocation,t&&(r=u.resolve(t,r))):r=t,!u.isRelative(r)&&(e.url=r,e.serviceLocation=a,!0)}function c(e){var t=!1,n=P?P.getStreamInfo().manifestInfo.isDynamic:null;if(n||w!==e.availableSegmentsNumber){var i=(0,j.getSegmentByIndex)(w,e);if(i){var r=parseFloat((i.presentationStartTime-e.adaptation.period.start).toFixed(5)),a=e.adaptation.period.duration;E(e.segmentInfoType+": "+r+" / "+a),t=(e.segmentInfoType!==k.default.SEGMENT_TIMELINE||!n)&&a<=r}else E("isMediaFinished - no segment found")}else t=!0;return t}function d(e){R.getSegments(e,M,w,h)}function h(e,t){var n=P?P.getStreamInfo().manifestInfo.isDynamic:null;if((e.segments=t)&&0<t.length&&(C=isNaN(C)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,C),n&&isNaN(v.getExpectedLiveEdge()))){var i=t[t.length-1].presentationStartTime,r=y.getMetricsFor(D.default.STREAM);v.setExpectedLiveEdge(i),y.updateManifestUpdateInfo(_.getCurrentManifestUpdate(r),{presentationStartTime:i})}}function o(e){if(!e)throw new Error("no representation");e.segments=null,d(e)}function f(e,t,n){var i=t.segments,r=i?i.length:null,a=-1,s=void 0,o=void 0,l=void 0,u=void 0,c=void 0;if(i&&0<r)for(n=null==n?x.getSegmentOverlapToleranceTime():n,c=0;c<r;c++)if(l=(o=i[c]).presentationStartTime,u=o.duration,l<=e+(s=null==n?u/2:n)&&e-s<l+u){a=o.availabilityIdx;break}return a}function p(e){if(null==e)return null;var t=new I.default,n=e.representation,i=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,r=e.media,a=P?P.getType():null;return r=(0,j.replaceTokenForTemplate)(r,"Number",e.replacementNumber),r=(0,j.replaceTokenForTemplate)(r,"Time",e.replacementTime),r=(0,j.replaceTokenForTemplate)(r,"Bandwidth",i),r=(0,j.replaceIDForTemplate)(r,n.id),r=(0,j.unescapeDollarsInTemplate)(r),t.mediaType=a,t.type=O.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=P.getMediaInfo(),t.adaptationIndex=n.adaptation.index,s(t,r,n)?t:void 0}function i(e,t,n){var i=void 0,r=P?P.getType():null,a=P?P.getStreamInfo().manifestInfo.isDynamic:null,s=w,o=!!n&&n.keepIdx,l=n?n.timeThreshold:null,u=!(!n||!n.ignoreIsFinished);return e?(M!==t&&E("Getting the request for "+r+" time : "+(M=t)),d(e),(w=f(t,e,l))<0&&(d(e),w=f(t,e,l)),0<w&&E("Index for "+r+" time "+t+" is "+w),!u&&c(e)?((i=new I.default).action=I.default.ACTION_COMPLETE,i.index=w,i.mediaType=r,i.mediaInfo=P.getMediaInfo(),E("Signal complete in getSegmentRequestForTime -",r)):i=p((0,j.getSegmentByIndex)(w,e)),o&&0<=s&&(w=e.segmentInfoType===k.default.SEGMENT_TIMELINE&&a?w:s),i):null}function t(e){var t=e.representation;t.segments&&m.trigger(N.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function r(e){var t=P?P.getType():null,n=P?P.getStreamInfo().manifestInfo.isDynamic:null;if(!e.error&&t===e.mediaType){var i,r=e.segments,a=e.representation,s=[],o=0,l=void 0,u=void 0,c=void 0;for(l=0,i=r.length;l<i;l++)u=r[l],c=(0,j.getTimeBasedSegment)(v,n,a,u.startTime,u.duration,u.timescale,u.media,u.mediaRange,o),s.push(c),c=null,o++;a.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[i-1].presentationStartTime},a.availableSegmentsNumber=i,h(a,s),$.default.hasInitialization(a)&&m.trigger(N.default.REPRESENTATION_UPDATED,{sender:this,representation:a})}}n=n||{};var a,l=this.context,m=(0,U.default)(l).getInstance(),u=(0,B.default)(l).getInstance(),g=void 0,v=n.timelineConverter,_=n.dashMetrics,y=n.metricsModel,x=n.mediaPlayerModel,b=n.errHandler,T=n.baseURLController,S=void 0,E=void 0,w=void 0,M=void 0,A=void 0,C=void 0,P=void 0,R=void 0;return S={initialize:function(e){var t=(P=e)?P.getStreamInfo().manifestInfo.isDynamic:null;g.initialize(),R=(0,V.default)(l).create(n,t)},getStreamProcessor:function(){return P},getInitRequest:function(e){var t=P?P.getType():null;return e?function(e,t){var n=new I.default,i=e.adaptation.period,r=i.start,a=P?P.getStreamInfo().manifestInfo.isDynamic:null;if(n.mediaType=t,n.type=O.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=v.calcAvailabilityStartTimeFromPresentationTime(r,i.mpd,a),n.availabilityEndTime=v.calcAvailabilityEndTimeFromPresentationTime(r+i.duration,i.mpd,a),n.quality=e.index,n.mediaInfo=P?P.getMediaInfo():null,n.representationId=e.id,s(n,e.initialization,e))return n}(e,t):null},getSegmentRequestForTime:i,getNextSegmentRequest:function(e){var t=void 0,n=void 0,i=P?P.getType():null,r=P?P.getStreamInfo().manifestInfo.isDynamic:null;return e&&-1!==w?(M=null,E("Getting the next request at index: "+ ++w+", type: "+i),!(0,j.getSegmentByIndex)(w,e)&&r?(E("No segment found at index: "+w+". Wait for next loop"),d(e),w--,null):(c(e)?((t=new I.default).action=I.default.ACTION_COMPLETE,t.index=w,t.mediaType=i,t.mediaInfo=P.getMediaInfo(),E("Signal complete -",i)):(d(e),t=p(n=(0,j.getSegmentByIndex)(w,e)),!n&&r&&w--),t)):null},generateSegmentRequestForTime:function(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},i(e,t,{keepIdx:!1,ignoreIsFinished:!0})},updateRepresentation:function(e,t){var n=$.default.hasInitialization(e),i=$.default.hasSegments(e),r=P?P.getType():null,a=P?P.getStreamInfo().manifestInfo.isDynamic:null,s=void 0;if(e.segmentDuration||e.segments||o(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=v.calcSegmentAvailabilityRange(e,a),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return s=new L.default(1,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void m.trigger(N.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:s});t||(w=-1),e.segmentDuration&&o(e),n||g.loadInitialization(e),i||g.loadSegments(e,r,e.indexRange),n&&i&&m.trigger(N.default.REPRESENTATION_UPDATED,{sender:this,representation:e})},updateSegmentList:o,setCurrentTime:function(e){A=e},getCurrentTime:function(){return A},getEarliestTime:function(){return C},reset:function(){e(),m.off(N.default.INITIALIZATION_LOADED,t,S),m.off(N.default.SEGMENTS_LOADED,r,S)}},E=(0,F.default)(l).getInstance().log.bind(S),e(),a=n.mimeType,(g="webm"===a.split("/")[1].toLowerCase()?(0,z.default)(l).getInstance():(0,H.default)(l).getInstance()).setConfig({baseURLController:T,metricsModel:y,mediaPlayerModel:x,errHandler:b}),m.on(N.default.INITIALIZATION_LOADED,t,S),m.on(N.default.SEGMENTS_LOADED,r,S),S}Object.defineProperty(n,"__esModule",{value:!0});var D=i(e(100)),k=i(e(61)),I=i(e(213)),L=i(e(211)),O=e(230),N=i(e(54)),U=i(e(50)),a=i(e(51)),F=i(e(49)),B=i(e(206)),$=i(e(87)),j=e(77),V=i(e(76)),H=i(e(59)),z=i(e(60));r.__dashjs_factory_name="DashHandler";var s=a.default.getClassFactory(r);s.SEGMENTS_UNAVAILABLE_ERROR_CODE=1,a.default.updateClassFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{100:100,206:206,211:211,213:213,230:230,49:49,50:50,51:51,54:54,59:59,60:60,61:61,76:76,77:77,87:87}],58:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function n(e){return t(e,d.default.BUFFER_LEVEL)}function r(e){if(!e)return null;var t=e.HttpList,n=null,i=void 0;if(!t||t.length<=0)return null;for(i=t.length-1;0<=i;){if(t[i].responsecode){n=t[i];break}i--}return n}function s(e){return e&&e.HttpList?e.HttpList:[]}function t(e,t){if(!e)return null;var n=e[t];if(!n)return null;var i=n.length;return i<=0?null:n[i-1]}function o(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),i=0,r=n.length;i<r;i++){var a=n[i],s=a.indexOf(": ");0<s&&(t[a.substring(0,s)]=a.substring(s+2))}return t}function a(e,t,n){var i=void 0,r=void 0,a=void 0,s=void 0,o=void 0;if(e)for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)for(a=i[s].Representation_asArray,o=0;o<a.length;o+=1)if(t===(r=a[o]).id)return n?o:r;return null}var l=(e=e||{}).dashManifestModel,u=e.manifestModel;return{getBandwidthForRepresentation:function(e,t){var n;return null===(n=a(u.getValue().Period_asArray[t],e))?null:n.bandwidth},getIndexForRepresentation:function(e,t){return n=u.getValue().Period_asArray[t],null!==(i=a(n,e,!0))?i:-1;var n,i},getMaxIndexForBufferType:function(e,t){return function(e,t){var n,i,r=void 0,a=void 0,s=void 0,o=void 0;if(!e||!t)return-1;for(a=e.AdaptationSet_asArray,o=0;o<a.length;o+=1)if(r=a[o],s=r.Representation_asArray,n=r,i=t,l.getIsTypeOf(n,i))return s.length;return-1}(u.getValue().Period_asArray[t],e)},getCurrentRepresentationSwitch:function(e){return t(e,d.default.TRACK_SWITCH)},getLatestBufferLevelVO:n,getCurrentBufferLevel:function(e){var t=n(e);return t?(0,h.round10)(t.level/1e3,-3):0},getCurrentHttpRequest:r,getHttpRequests:s,getCurrentDroppedFrames:function(e){return t(e,d.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return t(e,d.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return t(e,d.default.DVR_INFO)},getCurrentManifestUpdate:function(e){return t(e,d.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={},i=r(e);return i&&(n=o(i._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e,t){var n,i={},r=void 0,a=void 0;for(a=(n=s(e)).length-1;0<=a;a--)if((r=n[a]).type===c.HTTPRequest.MPD_TYPE){i=o(r._responseHeaders);break}return void 0===i[t]?null:i[t]},getRequestsQueue:function(e){return e?e.RequestsQueue:null}}}Object.defineProperty(n,"__esModule",{value:!0});var c=e(230),a=i(e(51)),d=i(e(101)),h=e(43);r.__dashjs_factory_name="DashMetrics",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{101:101,230:230,43:43,51:51}],59:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function m(){if(!x||!x.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function g(e){if(e.url){var t=new p.default;return t.type=e.init?d.HTTPRequest.INIT_SEGMENT_TYPE:d.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function o(e,t,n){e?h.trigger(f.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):h.trigger(f.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new s.default(null,"error loading segments",null)})}var e=this.context,v=(0,c.default)(e).getInstance().log,h=(0,l.default)(e).getInstance(),t=void 0,_=void 0,n=void 0,i=void 0,r=void 0,y=void 0,x=void 0;return{setConfig:function(e){e.baseURLController&&(x=e.baseURLController),e.metricsModel&&(i=e.metricsModel),e.mediaPlayerModel&&(r=e.mediaPlayerModel),e.errHandler&&(t=e.errHandler)},initialize:function(){_=(0,u.default)(e).getInstance(),n=(0,a.default)(e).getInstance(),y=(0,T.default)(e).create({errHandler:t,metricsModel:i,mediaPlayerModel:r,requestModifier:n})},loadInitialization:function o(l,e){m();var u=null,c=null,t=x.resolve(l.path),d=e||{init:!0,url:t?t.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};v("Start searching for initialization.");var n=g(d);y.load({request:n,success:function(e){var t,n,i,r,a,s;d.bytesLoaded=d.range.end,c=_.parse(e),n=(t=c).getBox("ftyp"),i=t.getBox("moov"),r=null,s=a=void 0,v("Searching for initialization."),i&&i.isComplete&&(a=n?n.offset:i.offset,s=i.offset+i.size-1,v("Found the initialization.  Range: "+(r=a+"-"+s))),(u=r)?(l.range=u,h.trigger(f.default.INITIALIZATION_LOADED,{representation:l})):(d.range.end=d.bytesLoaded+d.bytesToLoad,o(l,d))},error:function(){h.trigger(f.default.INITIALIZATION_LOADED,{representation:l})}}),v("Perform init search: "+d.url)},loadSegments:function u(c,d,e,t,h){if(m(),e&&(void 0===e.start||void 0===e.end)){var n=e?e.toString().split("-"):null;e=n?{start:parseFloat(n[0]),end:parseFloat(n[1])}:null}h=h||o;var s=null,f=null,i=!!e,r=x.resolve(c.path),p={init:!1,url:r?r.url:void 0,range:i?e:{start:0,end:1500},searching:!i,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500},a=g(p);y.load({request:a,success:function(e){var t=p.bytesToLoad,n=e.byteLength;if(p.bytesLoaded=p.range.end-p.range.start,s=_.parse(e),(f=s.getBox("sidx"))&&f.isComplete){var l=f.references,i=void 0,r=void 0;null!=l&&0<l.length&&(i=1===l[0].reference_type),i?function(){v("Initiate multiple SIDX load."),p.range.end=p.range.start+f.size;var e=void 0,t=void 0,n=void 0,i=void 0,r=[],a=0,s=(f.offset||p.range.start)+f.size,o=function(e){e?(r=r.concat(e),++a>=t&&h(r,c,d)):h(null,c,d)};for(e=0,t=l.length;e<t;e++)i=(n=s)+l[e].referenced_size-1,s+=l[e].referenced_size,u(c,null,{start:n,end:i},p,o)}():(v("Parsing segments from SIDX."),r=function(e,t){for(var n=e.references,i=n.length,r=e.timescale,a=e.earliest_presentation_time,s=t.range.start+e.offset+e.first_offset+e.size,o=[],l=void 0,u=void 0,c=void 0,d=void 0,h=0;h<i;h++)c=n[h].subsegment_duration,d=n[h].referenced_size,(l=new b.default).duration=c,l.startTime=a,l.timescale=r,u=s+d-1,l.mediaRange=s+"-"+u,o.push(l),a+=c,s+=d;return o}(f,p),h(r,c,d))}else{if(f)p.range.start=f.offset||p.range.start,p.range.end=p.range.start+(f.size||t);else{if(n<p.bytesLoaded)return void h(null,c,d);var a=s.getLastBox();a&&a.size?(p.range.start=a.offset+a.size,p.range.end=p.range.start+t):p.range.end+=t}u(c,d,p.range,p,h)}},error:function(){h(null,c,d)}}),v("Perform SIDX load: "+p.url)},reset:function(){y.abort(),n=_=t=y=null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(204)),b=i(e(88)),s=i(e(211)),f=i(e(54)),l=i(e(50)),u=i(e(194)),o=i(e(51)),c=i(e(49)),d=e(230),p=i(e(213)),T=i(e(98));r.__dashjs_factory_name="SegmentBaseLoader",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{194:194,204:204,211:211,213:213,230:230,49:49,50:50,51:51,54:54,88:88,98:98}],60:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function p(e,t,n,i){var r,a,s=void 0,o=void 0,l=void 0,u=void 0,c=void 0,d=void 0;for(o=[],u=0,a=(r=function(e){var t=[],n=void 0,i=void 0,r=(0,x.default)(g).create({data:e});for(r.consumeTagAndSize(_.Segment.Cues);r.moreData()&&r.consumeTagAndSize(_.Segment.Cues.CuePoint,!0);){for((n={}).CueTime=r.parseTag(_.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];r.moreData()&&r.consumeTag(_.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=r.getMatroskaCodedNum(),s=r.getPos();if((i={}).Track=r.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=r.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(i),r.setPos(s+a)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}(e)).length;u<a;u+=1)l=new b.default,s=0,s=u<r.length-1?r[u+1].CueTime-r[u].CueTime:i-r[u].CueTime,l.duration=s,l.startTime=r[u].CueTime,l.timescale=1e3,c=r[u].CueTracks[0].ClusterPosition+t,d=u<r.length-1?r[u+1].CueTracks[0].ClusterPosition+t-1:n-1,l.mediaRange=c+"-"+d,o.push(l);return v("Parsed cues: "+o.length+" cues."),o}function o(){if(!c||!c.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function l(e,t,n){e?u.trigger(d.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):u.trigger(d.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new Error(null,"error loading segments",null)})}function m(e){var t=new S.default;return t.type=e.init?T.HTTPRequest.INIT_SEGMENT_TYPE:T.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}var e,g=this.context,v=(0,h.default)(g).getInstance().log,u=(0,a.default)(g).getInstance(),_=void 0,t=void 0,n=void 0,i=void 0,r=void 0,y=void 0,c=void 0;return e={setConfig:function(e){if(!(e.baseURLController&&e.metricsModel&&e.mediaPlayerModel&&e.errHandler))throw new Error("Missing config parameter(s)");c=e.baseURLController,i=e.metricsModel,r=e.mediaPlayerModel,t=e.errHandler},initialize:function(){n=(0,f.default)(g).getInstance(),y=(0,E.default)(g).create({errHandler:t,metricsModel:i,mediaPlayerModel:r,requestModifier:n})},loadInitialization:function(e,t){o();var n=null,i=c.resolve(e.path),r=i?i.url:void 0,a=e.range.split("-"),s=t||{range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:n,url:r,init:!0};v("Start loading initialization."),n=m(s),y.load({request:n,success:function(){u.trigger(d.default.INITIALIZATION_LOADED,{representation:e})},error:function(){u.trigger(d.default.INITIALIZATION_LOADED,{representation:e})}}),v("Perform init load: "+s.url)},loadSegments:function(t,n,i,r){o();var e=null,a=c.resolve(t.path),s=a?a.url:void 0;r=r||l,e=m({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:e,url:s,init:!1}),v("Parsing ebml header"),y.load({request:e,success:function(e){!function(e,t,n,i){var r,a=(0,x.default)(g).create({data:e}),s=void 0,o=void 0,l=n.split("-"),u=null,c={url:t,range:{start:parseFloat(l[0]),end:parseFloat(l[1])},request:u},d=void 0;for(v("Parse EBML header: "+c.url),a.skipOverElement(_.EBML),a.consumeTag(_.Segment),d=a.getMatroskaCodedNum(),d+=a.getPos(),r=a.getPos();a.moreData()&&!a.consumeTagAndSize(_.Segment.Info,!0);)if(!(a.skipOverElement(_.Segment.SeekHead,!0)||a.skipOverElement(_.Segment.Tracks,!0)||a.skipOverElement(_.Segment.Cues,!0)||a.skipOverElement(_.Void,!0)))throw new Error("no valid top level element found");for(;void 0===s;){var h=a.getMatroskaCodedNum(!0),f=a.getMatroskaCodedNum();switch(h){case _.Segment.Info.Duration.tag:s=a[_.Segment.Info.Duration.parse](f);break;default:a.setPos(a.getPos()+f)}}u=m(c),y.load({request:u,success:function(e){o=p(e,r,d,s),i(o)},error:function(){v("Download Error: Cues "+c.url),i(null)}}),v("Perform cues load: "+c.url+" bytes="+c.range.start+"-"+c.range.end)}(e,s,i,function(e){r(e,t,n)})},error:function(){r(null,t,n)}})},reset:function(){v=n=t=null}},_={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e}Object.defineProperty(n,"__esModule",{value:!0});var d=i(e(54)),a=i(e(50)),x=i(e(198)),s=i(e(51)),h=i(e(49)),f=i(e(204)),b=i(e(88)),T=e(230),S=i(e(213)),E=i(e(98));r.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=s.default.getSingletonFactory(r),t.exports=n.default},{198:198,204:204,213:213,230:230,49:49,50:50,51:51,54:54,88:88,98:98}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),e}());n.default=r,t.exports=n.default},{}],62:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function h(){return x}function f(){return T}function e(){d=-1,x=!(y=null),b=[],C=A=u=l=M=w=S=null}function p(){var e=new Date,t=f(),n=1e3*w.getTime();M.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function m(){var e=P.getStreamInfo(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,i=u.calcSegmentAvailabilityRange(T,n);M.addDVRInfo(P.getType(),w.getTime(),t,i)}function c(e){return b[e]}function g(e){var t=e;x=!1,_.trigger(O.default.AST_IN_FUTURE,{delay:t}),setTimeout(function(){if(!h()){x=!0,_.trigger(O.default.DATA_UPDATE_STARTED,{sender:o}),b.forEach(function(e){e.segmentAvailabilityRange=null});for(var e=0;e<b.length;e++)E.updateRepresentation(b[e],!0)}},t)}function t(e){if(e.sender.getStreamProcessor()===P&&h()){var t=e.representation,n=M.getMetricsFor(D.default.STREAM),i=M.getMetricsFor(f().adaptation.type),r=C.getCurrentManifestUpdate(n),a=!1,s=0,o=void 0,l=void 0;if(t.adaptation.period.mpd.manifest.type===k.default.DYNAMIC&&!t.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var u=t.segmentAvailabilityRange.end-t.segmentAvailabilityRange.start;s=1e3*(w.computeLiveDelay(T.segmentDuration,P.getStreamInfo().manifestInfo.DVRWindowSize)-u)}if(0<s)return m(),g(s),l=new I.default(v,"Segments update failed",null),void _.trigger(O.default.DATA_UPDATE_COMPLETED,{sender:this,data:y,currentRepresentation:T,error:l});if(r){for(var c=0;c<r.representationInfo.length;c++)if((o=r.representationInfo[c]).index===t.index&&o.mediaType===P.getType()){a=!0;break}a||M.addManifestUpdateRepresentationInfo(r,t.id,t.index,t.adaptation.period.index,P.getType(),t.presentationTimeOffset,t.startNumber,t.segmentInfoType)}(function(){for(var e=0,t=b.length;e<t;e++){var n=b[e].segmentInfoType;if(null===b[e].segmentAvailabilityRange||!N.default.hasInitialization(b[e])||(n===k.default.SEGMENT_BASE||n===k.default.BASE_URL)&&!b[e].segments)return!1}return!0})()&&(x=!1,S.setPlaybackQuality(P.getType(),P.getStreamInfo(),(d=T,b.indexOf(d))),M.updateManifestUpdateInfo(r,{latency:T.segmentAvailabilityRange.end-w.getTime()}),C.getCurrentRepresentationSwitch(i)||p(),_.trigger(O.default.DATA_UPDATE_COMPLETED,{sender:this,data:y,currentRepresentation:T}))}var d}function n(e){e.isDynamic&&function(e){for(var t=void 0,n=0,i=b.length;n<i;n++)(t=b[n]).segmentAvailabilityRange=u.calcSegmentAvailabilityRange(t,e)}(e.isDynamic)}function i(e){e.sender.getStreamProcessor()===P&&(R.getValue().doNotUpdateDVRWindowOnBufferUpdated||m())}function r(e){if(e.mediaType===P.getType()&&P.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){T=c(e.newQuality);var t=S.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(t)||l.setSavedBitrateSettings(e.mediaType,t),p()}}function a(e){if(e.newDuration){var t=f();t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}var v=1,s=this.context,_=(0,L.default)(s).getInstance(),o=void 0,y=void 0,d=void 0,x=void 0,b=void 0,T=void 0,S=void 0,E=void 0,w=void 0,M=void 0,l=void 0,u=void 0,A=void 0,C=void 0,P=void 0,R=void 0;return o={initialize:function(){E=P.getIndexHandler()},setConfig:function(e){e.abrController&&(S=e.abrController),e.domStorage&&(l=e.domStorage),e.metricsModel&&(M=e.metricsModel),e.dashMetrics&&(C=e.dashMetrics),e.dashManifestModel&&(A=e.dashManifestModel),e.playbackController&&(w=e.playbackController),e.timelineConverter&&(u=e.timelineConverter),e.manifestModel&&(R=e.manifestModel),e.streamProcessor&&(P=e.streamProcessor)},getData:function(){return y},getDataIndex:function(){return d},isUpdating:h,updateData:function(e,t,n){var i,r=P.getStreamInfo(),a=S.getTopQualityIndexFor(n,r.id),s=S.getMinAllowedIndexFor(n),o=void 0,l=null;if(x=!0,_.trigger(O.default.DATA_UPDATE_STARTED,{sender:this}),i=t,d=A.getIndexForAdaptation(y,i.period.mpd.manifest,i.period.index),b=A.getRepresentationsForAdaptation(i),o=null!==y&&y.id==e.id||n===D.default.FRAGMENTED_TEXT?S.getQualityFor(n,r):(l=S.getThroughputHistory().getAverageThroughput(n)||S.getInitialBitrateFor(n,r),S.getQualityForBitrate(P.getMediaInfo(),l)),void 0!==s&&o<s&&(o=s),a<o&&(o=a),T=c(o),y=e,n!==D.default.VIDEO&&n!==D.default.AUDIO&&n!==D.default.FRAGMENTED_TEXT)return x=!1,void _.trigger(O.default.DATA_UPDATE_COMPLETED,{sender:this,data:y,currentRepresentation:T});for(var u=0;u<b.length;u++)E.updateRepresentation(b[u],!0)},getStreamProcessor:function(){return P},getCurrentRepresentation:f,getRepresentationForQuality:c,reset:function(){_.off(O.default.QUALITY_CHANGE_REQUESTED,r,o),_.off(O.default.REPRESENTATION_UPDATED,t,o),_.off(O.default.WALLCLOCK_TIME_UPDATED,n,o),_.off(O.default.BUFFER_LEVEL_UPDATED,i,o),_.off(O.default.MANIFEST_VALIDITY_CHANGED,a,o),e()}},e(),_.on(O.default.QUALITY_CHANGE_REQUESTED,r,o),_.on(O.default.REPRESENTATION_UPDATED,t,o),_.on(O.default.WALLCLOCK_TIME_UPDATED,n,o),_.on(O.default.BUFFER_LEVEL_UPDATED,i,o),_.on(O.default.MANIFEST_VALIDITY_CHANGED,a,o),o}Object.defineProperty(n,"__esModule",{value:!0});var D=i(e(100)),k=i(e(61)),I=i(e(211)),L=i(e(50)),O=i(e(54)),a=i(e(51)),N=i(e(87));r.__dashjs_factory_name="RepresentationController",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,211:211,50:50,51:51,54:54,61:61,87:87}],63:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function o(e,t){var n=void 0,i=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=!1,u=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),s=t!==w.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length&&e.Representation_asArray[0].hasOwnProperty(M.default.CODECS)&&(0===(o=e.Representation_asArray[0].codecs).search(w.default.STPP)||0===o.search(w.default.WVTT)))return t===w.default.FRAGMENTED_TEXT;if(a){if(1<a.length)return t===w.default.MUXED;a[0]&&a[0].contentType===t&&(u=l=!0)}if(e.hasOwnProperty(M.default.MIME_TYPE)&&(l=s.test(e.mimeType),u=!0),!u)for(n=0,i=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!u&&n<i;)(r=e.Representation_asArray[n]).hasOwnProperty(M.default.MIME_TYPE)&&(l=s.test(r.mimeType),u=!0),n++;return l}function s(e){return o(e,w.default.AUDIO)}function l(e){return o(e,w.default.VIDEO)}function u(e){return o(e,w.default.FRAGMENTED_TEXT)}function c(e){return o(e,w.default.MUXED)}function d(e){return o(e,w.default.IMAGE)}function h(e){return"text/vtt"===e||"application/ttml+xml"===e}function t(e){return e&&e.hasOwnProperty(M.default.ROLE_ASARRAY)?e.Role_asArray:[]}function f(e){return t(e).filter(function(e){return e.value===M.default.MAIN})[0]}function n(){return function(e,t){return e.bandwidth-t.bandwidth}}function p(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function m(e,t,n){var i,r=e&&e.Period_asArray&&E(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[],a=void 0,s=[];for(a=0,i=r.length;a<i;a++)o(r[a],n)&&s.push(p(r[a]));return s}function g(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===M.default.DYNAMIC),t}function v(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=P.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(M.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(n=e.id),n}function _(e,t){var n=[],i=void 0;if(!e)return n;for(i=0;i<e.length;i++){var r=new I.default;if(r.timescale=1,r.representation=t,!e[i].hasOwnProperty(w.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");r.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty(M.default.TIMESCALE)&&(r.timescale=e[i].timescale),e[i].hasOwnProperty(M.default.VALUE)&&(r.value=e[i].value),n.push(r)}return n}e=e||{};var y=this.context,x=(0,O.default)(y).getInstance(),b=e.mediaController,T=e.timelineConverter,S=e.adapter,r="urn:dvb:dash:profile:dvb-dash:2014",E=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return{getIsTypeOf:o,getIsAudio:s,getIsVideo:l,getIsText:function(e){return o(e,w.default.TEXT)},getIsMuxed:c,getIsTextTrack:h,getIsFragmentedText:u,getIsImage:d,getIsMain:f,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(M.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(M.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:t,getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(M.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(M.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var i=t&&t.Period_asArray&&E(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:null;return i&&E(e)?i[e]:null},getIndexForAdaptation:function(e,t,n){var i=t&&t.Period_asArray&&E(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:[],r=i.length;if(e)for(var a=0;a<r;a++)if((0,L.default)(y).getInstance().areEqual(i[a],e))return a;return-1},getAdaptationForId:function(e,t,n){var i,r=t&&t.Period_asArray&&E(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:[],a=void 0;for(a=0,i=r.length;a<i;a++)if(r[a].hasOwnProperty(M.default.ID)&&r[a].id===e)return r[a];return null},getAdaptationsForType:m,getAdaptationForType:function(e,t,n,i){var r=m(e,t,n);if(!r||0===r.length)return null;if(1<r.length&&i){for(var a=b.getCurrentTrackFor(n,i),s=S.getAllMediaInfoForType(i,n),o=0,l=r.length;o<l;o++)if(a&&b.isTracksEqual(a,s[o]))return r[o];for(o=0,l=r.length;o<l;o++)if(f(r[o]))return r[o]}return r[0]},getCodec:function(e,t,n){if(e&&e.Representation_asArray&&0<e.Representation_asArray.length){var i=E(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0],r=i.mimeType+';codecs="'+i.codecs+'"';return n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'),r}return null},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(M.default.CENC_DEFAULT_KID)?e[M.default.CENC_DEFAULT_KID]:null},getContentProtectionData:function(e){return e&&e.hasOwnProperty(M.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:g,getIsDVB:function(e){return n=r,i=!1,(t=e)&&t.profiles&&0<t.profiles.length&&(i=-1!==t.profiles.indexOf(n)),i;var t,n,i},getDuration:function(e){return e&&e.hasOwnProperty(M.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(M.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?p(e).Representation_asArray.map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}}):null},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&E(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n=[],i=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=void 0,u=void 0;if(e&&e.period&&E(e.period.index)){var c=e.period.mpd.manifest.Period_asArray[e.period.index];c&&c.AdaptationSet_asArray&&E(e.index)&&(s=p(c.AdaptationSet_asArray[e.index]))}if(s&&s.Representation_asArray)for(l=0;s&&l<s.Representation_asArray.length;l++)o=s.Representation_asArray[l],(i=new A.default).index=l,i.adaptation=e,o.hasOwnProperty(M.default.ID)&&(i.id=o.id),o.hasOwnProperty(M.default.CODECS)&&(i.codecs=o.codecs),o.hasOwnProperty(M.default.CODEC_PRIVATE_DATA)&&(i.codecPrivateData=o.codecPrivateData),o.hasOwnProperty(M.default.BANDWITH)&&(i.bandwidth=o.bandwidth),o.hasOwnProperty(M.default.WIDTH)&&(i.width=o.width),o.hasOwnProperty(M.default.HEIGHT)&&(i.height=o.height),o.hasOwnProperty(M.default.SCAN_TYPE)&&(i.scanType=o.scanType),o.hasOwnProperty(M.default.MAX_PLAYOUT_RATE)&&(i.maxPlayoutRate=o.maxPlayoutRate),o.hasOwnProperty(M.default.SEGMENT_BASE)?(a=o.SegmentBase,i.segmentInfoType=M.default.SEGMENT_BASE):o.hasOwnProperty(M.default.SEGMENT_LIST)?(a=o.SegmentList).hasOwnProperty(M.default.SEGMENT_TIMELINE)?(i.segmentInfoType=M.default.SEGMENT_TIMELINE,(!(u=a.SegmentTimeline.S_asArray[a.SegmentTimeline.S_asArray.length-1]).hasOwnProperty("r")||0<=u.r)&&(i.useCalculatedLiveEdgeTime=!0)):(i.segmentInfoType=M.default.SEGMENT_LIST,i.useCalculatedLiveEdgeTime=!0):o.hasOwnProperty(M.default.SEGMENT_TEMPLATE)?((a=o.SegmentTemplate).hasOwnProperty(M.default.SEGMENT_TIMELINE)?(i.segmentInfoType=M.default.SEGMENT_TIMELINE,(!(u=a.SegmentTimeline.S_asArray[a.SegmentTimeline.S_asArray.length-1]).hasOwnProperty("r")||0<=u.r)&&(i.useCalculatedLiveEdgeTime=!0)):i.segmentInfoType=M.default.SEGMENT_TEMPLATE,a.hasOwnProperty(M.default.INITIALIZATION_MINUS)&&(i.initialization=a.initialization.split("$Bandwidth$").join(o.bandwidth).split("$RepresentationID$").join(o.id))):i.segmentInfoType=M.default.BASE_URL,i.essentialProperties=(t=o)&&t.EssentialProperty_asArray&&t.EssentialProperty_asArray.length?t.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null,a&&(a.hasOwnProperty(M.default.INITIALIZATION)?(r=a.Initialization).hasOwnProperty(M.default.SOURCE_URL)?i.initialization=r.sourceURL:r.hasOwnProperty(M.default.RANGE)&&(i.range=r.range):o.hasOwnProperty(M.default.MIME_TYPE)&&h(o.mimeType)&&(i.range=0),a.hasOwnProperty(M.default.TIMESCALE)&&(i.timescale=a.timescale),a.hasOwnProperty(M.default.DURATION)&&(i.segmentDuration=a.duration/i.timescale),a.hasOwnProperty(M.default.MEDIA)&&(i.media=a.media),a.hasOwnProperty(M.default.START_NUMBER)&&(i.startNumber=a.startNumber),a.hasOwnProperty(M.default.INDEX_RANGE)&&(i.indexRange=a.indexRange),a.hasOwnProperty(M.default.PRESENTATION_TIME_OFFSET)&&(i.presentationTimeOffset=a.presentationTimeOffset/i.timescale)),i.MSETimeOffset=T.calcMSETimeOffset(i),i.path=[e.period.index,e.index,l],n.push(i);return n},getAdaptationsForPeriod:function(e){var t=e&&E(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],i=void 0,r=void 0,a=void 0;if(t&&t.AdaptationSet_asArray)for(a=0;a<t.AdaptationSet_asArray.length;a++)r=t.AdaptationSet_asArray[a],i=new C.default,r.hasOwnProperty(M.default.ID)&&(i.id=r.id),i.index=a,i.period=e,c(r)?i.type=w.default.MUXED:s(r)?i.type=w.default.AUDIO:l(r)?i.type=w.default.VIDEO:u(r)?i.type=w.default.FRAGMENTED_TEXT:d(r)?i.type=w.default.IMAGE:i.type=w.default.TEXT,n.push(i);return n},getRegularPeriods:function(e){var t,n=!!e&&g(e.manifest),i=[],r=null,a=null,s=null,o=null,l=void 0;for(l=0,t=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;l<t;l++)(a=e.manifest.Period_asArray[l]).hasOwnProperty(M.default.START)?(o=new P.default).start=a.start:null!==r&&a.hasOwnProperty(M.default.DURATION)&&null!==s?((o=new P.default).start=parseFloat((s.start+s.duration).toFixed(5)),o.duration=a.duration):0!==l||n||((o=new P.default).start=0),null!==s&&isNaN(s.duration)&&(s.duration=parseFloat((o.start-s.start).toFixed(5))),null!==o&&(o.id=v(a,l)),null!==o&&a.hasOwnProperty(M.default.DURATION)&&(o.duration=a.duration),null!==o&&(o.index=l,o.mpd=e,i.push(o),r=a,s=o),o=a=null;return 0===i.length||null!==s&&isNaN(s.duration)&&(s.duration=parseFloat((function(e){var t=g(e.mpd.manifest),n=void 0;if(e.mpd.manifest.mediaPresentationDuration)n=e.mpd.manifest.mediaPresentationDuration;else if(e.duration)n=e.duration;else{if(!t)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");n=Number.POSITIVE_INFINITY}return n}(s)-s.start).toFixed(5))),i},getMpd:function(e){var t=new a.default;return e&&((t.manifest=e).hasOwnProperty(M.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(M.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(M.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(M.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(w.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(M.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(M.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,i=n&&e&&E(e.index)?n[e.index].EventStream_asArray:null,r=[],a=void 0,s=void 0;if(i)for(a=0;a<i.length;a++){var o=new I.default;if(o.period=e,o.timescale=1,!i[a].hasOwnProperty(w.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(o.schemeIdUri=i[a].schemeIdUri,i[a].hasOwnProperty(M.default.TIMESCALE)&&(o.timescale=i[a].timescale),i[a].hasOwnProperty(M.default.VALUE)&&(o.value=i[a].value),s=0;s<i[a].Event_asArray.length;s++){var l=new D.default;l.presentationTime=0,l.eventStream=o,i[a].Event_asArray[s].hasOwnProperty(M.default.PRESENTATION_TIME)&&(l.presentationTime=i[a].Event_asArray[s].presentationTime),i[a].Event_asArray[s].hasOwnProperty(M.default.DURATION)&&(l.duration=i[a].Event_asArray[s].duration),i[a].Event_asArray[s].hasOwnProperty(M.default.ID)&&(l.id=i[a].Event_asArray[s].id),r.push(l)}}return r},getEventStreamForAdaptationSet:function(e,t){var n=void 0,i=void 0,r=void 0;return e&&e.Period_asArray&&t&&t.period&&E(t.period.index)&&(i=e.Period_asArray[t.period.index])&&i.AdaptationSet_asArray&&E(t.index)&&(r=i.AdaptationSet_asArray[t.index])&&(n=r.InbandEventStream_asArray),_(n,null)},getEventStreamForRepresentation:function(e,t){var n=void 0,i=void 0,r=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&E(t.adaptation.period.index)&&(i=e.Period_asArray[t.adaptation.period.index])&&i.AdaptationSet_asArray&&E(t.adaptation.index)&&(r=i.AdaptationSet_asArray[t.adaptation.index])&&r.Representation_asArray&&E(t.index)&&(a=r.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),_(n,t)},getUTCTimingSources:function(e){var t=g(e),n=!!e&&e.hasOwnProperty(M.default.AVAILABILITY_START_TIME),i=e?e.UTCTiming_asArray:null,r=[];return(t||n)&&i&&i.forEach(function(e){var t=new R.default;e.hasOwnProperty(w.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(M.default.VALUE)&&(t.value=e.value.toString(),r.push(t)))}),r},getBaseURLsFromElement:function(i){var r=[],e=i.BaseURL_asArray||[i.baseUri],a=!1;return e.some(function(e){if(e){var t=new k.default,n=e.__text||e;return x.isRelative(n)&&(a=!0,i.baseUri&&(n=x.resolve(n,i.baseUri))),t.url=n,e.hasOwnProperty(M.default.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty(M.default.DVB_PRIORITY)&&(t.dvb_priority=e[M.default.DVB_PRIORITY]),e.hasOwnProperty(M.default.DVB_WEIGHT)&&(t.dvb_weight=e[M.default.DVB_WEIGHT]),r.push(t),a}}),r},getRepresentationSortFunction:n,getLocation:function(e){if(e&&e.hasOwnProperty(w.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location}}}Object.defineProperty(n,"__esModule",{value:!0});var w=i(e(100)),M=i(e(61)),A=i(e(87)),C=i(e(81)),P=i(e(86)),a=i(e(85)),R=i(e(89)),D=i(e(83)),k=i(e(82)),I=i(e(84)),L=i(e(203)),O=i(e(206)),s=i(e(51));r.__dashjs_factory_name="DashManifestModel",n.default=s.default.getSingletonFactory(r),t.exports=n.default},{100:100,203:203,206:206,51:51,61:61,81:81,82:82,83:83,84:84,85:85,86:86,87:87,89:89}],64:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t,n=this.context,a=(0,u.default)(n).getInstance().log,s=e.errorHandler,i=void 0,o=void 0,l=void 0;return t={parse:function(t){var e=void 0;!function(){if(!s||!s.hasOwnProperty("manifestError"))throw new Error("Missing config parameter(s)")}();try{var n=window.performance.now();if(!(e=o.xml_str2json(t)))throw new Error("parser error");var i=window.performance.now();l.run(e);var r=window.performance.now();a("Parsing complete: ( xml2json: "+(i-n).toPrecision(3)+"ms, objectiron: "+(r-i).toPrecision(3)+"ms, total: "+((r-n)/1e3).toPrecision(3)+"s)")}catch(e){return s.manifestError("parsing the manifest failed","parse",t,e),null}return e},getMatchers:function(){return i},getIron:function(){return l}},i=[new f.default,new p.default,new m.default,new h.default],o=new d.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:i}),l=new c.default([new g.default,new v.default]),t}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),u=i(e(49)),c=i(e(3)),d=i(e(4)),h=i(e(73)),f=i(e(71)),p=i(e(70)),m=i(e(72)),g=i(e(67)),v=i(e(68));r.__dashjs_factory_name="DashParser",n.default=a.default.getClassFactory(r),t.exports=n.default},{3:3,4:4,49:49,51:51,67:67,68:68,70:70,71:71,72:72,73:73}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),i=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n;this._name=e,this._merge=void 0!==t?t:(n=e)&&n.length&&n.charAt(0)===n.charAt(0).toUpperCase()}return r(i,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),i}();n.default=i,t.exports=n.default},{}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e(65),o=(i=a)&&i.__esModule?i:{default:i},s=function(){function s(e,t,n,i,r){var a=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,s),this._name=e||"",this._properties=[],this._children=n||[],this._isRoot=i||!1,this._isArray=r||!0,Array.isArray(t)&&t.forEach(function(e){a._properties.push(new o.default(e))})}return r(s,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),s}();n.default=s,t.exports=n.default},{65:65}],67:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(66)),a=i(e(61)),s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[a.default.PROFILES,a.default.WIDTH,a.default.HEIGHT,a.default.SAR,a.default.FRAMERATE,a.default.AUDIO_SAMPLING_RATE,a.default.MIME_TYPE,a.default.SEGMENT_PROFILES,a.default.CODECS,a.default.MAXIMUM_SAP_PERIOD,a.default.START_WITH_SAP,a.default.MAX_PLAYOUT_RATE,a.default.CODING_DEPENDENCY,a.default.SCAN_TYPE,a.default.FRAME_PACKING,a.default.AUDIO_CHANNEL_CONFIGURATION,a.default.CONTENT_PROTECTION,a.default.ESSENTIAL_PROPERTY,a.default.SUPPLEMENTAL_PROPERTY,a.default.INBAND_EVENT_STREAM];(function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}})(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,a.default.ADAPTATION_SET,e,[new r.default(a.default.REPRESENTATION,e,[new r.default(a.default.SUB_REPRESENTATION,e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();n.default=s,t.exports=n.default},{61:61,66:66}],68:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(66)),a=i(e(61)),s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[a.default.SEGMENT_BASE,a.default.SEGMENT_TEMPLATE,a.default.SEGMENT_LIST];(function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}})(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,a.default.PERIOD,e,[new r.default(a.default.ADAPTATION_SET,e,[new r.default(a.default.REPRESENTATION,e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();n.default=s,t.exports=n.default},{61:61,66:66}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this._test=e,this._converter=t}return i(n,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),n}();n.default=r,t.exports=n.default},{}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(69),a=(i=r)&&i.__esModule?i:{default:i},s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){var t=s.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var i=60*parseInt(t[9],10)+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*i*60*1e3}return new Date(n)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=o,t.exports=n.default},{69:69}],71:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(69)),a=i(e(100)),s=i(e(61)),o=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,a.default.START_TIME,s.default.DURATION],n=t.length,i=0;i<n;i++)if(e.nodeName===t[i])return o.test(e.value);return!1},function(e){var t=o.exec(e),n=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();n.default=l,t.exports=n.default},{100:100,61:61,69:69}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(69),a=(i=r)&&i.__esModule?i:{default:i},s=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){return parseFloat(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=o,t.exports=n.default},{69:69}],73:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(69)),s=i(e(61)),o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n,i=(a(n={},s.default.MPD,[s.default.ID,s.default.PROFILES]),a(n,s.default.PERIOD,[s.default.ID]),a(n,s.default.BASE_URL,[s.default.SERVICE_LOCATION,s.default.BYTE_RANGE]),a(n,s.default.SEGMENT_BASE,[s.default.INDEX_RANGE]),a(n,s.default.INITIALIZATION,[s.default.RANGE]),a(n,s.default.REPRESENTATION_INDEX,[s.default.RANGE]),a(n,s.default.SEGMENT_LIST,[s.default.INDEX_RANGE]),a(n,s.default.BITSTREAM_SWITCHING,[s.default.RANGE]),a(n,s.default.SEGMENT_URL,[s.default.MEDIA_RANGE,s.default.INDEX_RANGE]),a(n,s.default.SEGMENT_TEMPLATE,[s.default.INDEX_RANGE,s.default.MEDIA,s.default.INDEX,s.default.INITIALIZATION_MINUS,s.default.BITSTREAM_SWITCHING_MINUS]),a(n,s.default.ASSET_IDENTIFIER,[s.default.VALUE,s.default.ID]),a(n,s.default.EVENT_STREAM,[s.default.VALUE]),a(n,s.default.ADAPTATION_SET,[s.default.PROFILES,s.default.MIME_TYPE,s.default.SEGMENT_PROFILES,s.default.CODECS,s.default.CONTENT_TYPE]),a(n,s.default.FRAME_PACKING,[s.default.VALUE,s.default.ID]),a(n,s.default.AUDIO_CHANNEL_CONFIGURATION,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_PROTECTION,[s.default.VALUE,s.default.ID]),a(n,s.default.ESSENTIAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.SUPPLEMENTAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.INBAND_EVENT_STREAM,[s.default.VALUE,s.default.ID]),a(n,s.default.ACCESSIBILITY,[s.default.VALUE,s.default.ID]),a(n,s.default.ROLE,[s.default.VALUE,s.default.ID]),a(n,s.default.RATING,[s.default.VALUE,s.default.ID]),a(n,s.default.VIEWPOINT,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_COMPONENT,[s.default.CONTENT_TYPE]),a(n,s.default.REPRESENTATION,[s.default.ID,s.default.DEPENDENCY_ID,s.default.MEDIA_STREAM_STRUCTURE_ID]),a(n,s.default.SUBSET,[s.default.ID]),a(n,s.default.METRICS,[s.default.METRICS_MINUS]),a(n,s.default.REPORTING,[s.default.VALUE,s.default.ID]),n);if(i.hasOwnProperty(t)){var r=i[t];return void 0!==r&&0<=r.indexOf(e.name)}return!1},function(e){return String(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();n.default=o,t.exports=n.default},{61:61,69:69}],74:[function(e,t,n){"use strict";function i(){var I=void 0;return{getSamplesInfo:function(e){if(!I)throw new Error("boxParser is undefined");if(!e)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,n,i=I.parse(e),r=i.getBoxes("moof"),a=i.getBoxes("mfhd"),s=void 0,o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0,_=void 0,y=void 0;n=i.getBoxes("moof").length,t=a[a.length-1].sequence_number,c=[];var x=-1,b=-1;for(m=o=0;m<r.length;m++){var T=r[m],S=T.getChildBoxes("traf");for(f=0;f<S.length;f++){var E=S[f],w=E.getChildBox("tfhd"),M=E.getChildBox("tfdt");u=M.baseMediaDecodeTime;var A=E.getChildBoxes("trun"),C=E.getChildBoxes("subs");for(p=0;p<A.length;p++){var P=A[p];for(o=P.sample_count,_=(w.base_data_offset||0)+(P.data_offset||0),h=0;h<o;h++){s=void 0!==(d=P.samples[h]).sample_duration?d.sample_duration:w.default_sample_duration,l=void 0!==d.sample_size?d.sample_size:w.default_sample_size;var R={dts:u,cts:u+(void 0!==d.sample_composition_time_offset?d.sample_composition_time_offset:0),duration:s,offset:T.offset+_,size:l,subSizes:[l]};if(C)for(g=0;g<C.length;g++){var D=C[g];if(x<D.entry_count&&b<h&&(x++,b+=D.entries[x].sample_delta),h==b){R.subSizes=[];var k=D.entries[x];for(v=0;v<k.subsample_count;v++)R.subSizes.push(k.subsamples[v].subsample_size)}}c.push(R),_+=l,u+=s}}y=u-M.baseMediaDecodeTime}}return{sampleList:c,lastSequenceNumber:t,totalDuration:y,numSequences:n}},getMediaTimescaleFromMoov:function(e){if(!I)throw new Error("boxParser is undefined");var t=I.parse(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},setConfig:function(e){e&&e.boxParser&&(I=e.boxParser)}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="FragmentedTextBoxParser",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{51:51}],75:[function(e,t,n){"use strict";function i(e,p){var m=(e=e||{}).timelineConverter;return{getSegments:function(e,t,n,i){var r,a,s,o,l=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,u=l.SegmentURL_asArray.length,c=[],d=void 0,h=void 0,f=void 0;for(o=e.startNumber,r=(0,g.decideSegmentListRangeForTemplate)(m,p,e,t,n,i),a=Math.max(r.start,0),s=Math.min(r.end,l.SegmentURL_asArray.length-1),d=a;d<=s;d++)f=l.SegmentURL_asArray[d],(h=(0,g.getIndexBasedSegment)(m,p,e,d)).replacementTime=(o+d-1)*e.segmentDuration,h.media=f.media?f.media:"",h.mediaRange=f.mediaRange,h.index=f.index,h.indexRange=f.indexRange,c.push(h),h=null;return e.availableSegmentsNumber=u,c}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r},g=e(77);i.__dashjs_factory_name="ListSegmentsGetter";var o=s.default.getClassFactory(i);n.default=o,t.exports=n.default},{51:51,77:77}],76:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n,i=this.context,d=void 0,h=void 0,f=void 0;return n={getSegments:function(e,t,n,i,r){var a,s,o,l,u=void 0,c=e.segmentInfoType;c!==p.default.SEGMENT_BASE&&c!==p.default.BASE_URL&&(a=n,s=e.segments,l=o=void 0,!s||0===s.length||(l=s[0].availabilityIdx,o=s[s.length-1].availabilityIdx,a<l||o<a))?(c===p.default.SEGMENT_TIMELINE?u=d.getSegments(e,t,n,r):c===p.default.SEGMENT_TEMPLATE?u=h.getSegments(e,t,n,r):c===p.default.SEGMENT_LIST&&(u=f.getSegments(e,t,n,r)),i&&i(e,u)):u=e.segments}},d=(0,s.default)(i).create(e,t),h=(0,o.default)(i).create(e,t),f=(0,l.default)(i).create(e,t),n}Object.defineProperty(n,"__esModule",{value:!0});var p=i(e(61)),a=i(e(51)),s=i(e(80)),o=i(e(78)),l=i(e(75));r.__dashjs_factory_name="SegmentsGetter";var u=a.default.getClassFactory(r);n.default=u,t.exports=n.default},{51:51,61:61,75:75,78:78,80:80}],77:[function(e,t,n){"use strict";function d(e,t){for(;e.length<t;)e="0"+e;return e}function m(e,t){return e.representation.startNumber+t}function g(e,t,n){var i=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=void 0,u=t.length,c="%0".length;if(!e)return e;for(;;){if((i=e.indexOf("$"+t))<0)return e;if((r=e.indexOf("$",i+u))<0)return e;if((a=e.indexOf("%0",i+u))>i&&a<r)switch(s=e.charAt(r-1),o=parseInt(e.substring(a+c,r-1),10),s){case"d":case"i":case"u":l=d(n.toString(),o);break;case"x":l=d(n.toString(16),o);break;case"X":l=d(n.toString(16),o).toUpperCase();break;case"o":l=d(n.toString(8),o);break;default:return e}else l=n;e=e.substring(0,i)+l+e.substring(r+1)}}function v(e,t){if(!t||!t.segments)return null;var n=t.segments.length,i=void 0,r=void 0;if(e<n&&(i=t.segments[e])&&i.availabilityIdx===e)return i;for(r=0;r<n;r++)if((i=t.segments[r])&&i.availabilityIdx===e)return i;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},n.replaceTokenForTemplate=g,n.getIndexBasedSegment=function(e,t,n,i){var r,a,s=void 0,o=void 0;return o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration),r=parseFloat((n.adaptation.period.start+i*o).toFixed(5)),a=parseFloat((r+o).toFixed(5)),(s=new _.default).representation=n,s.duration=o,s.presentationStartTime=r,s.mediaStartTime=e.calcMediaTimeFromPresentationTime(s.presentationStartTime,n),s.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(s.presentationStartTime,n.adaptation.period.mpd,t),s.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(a,n.adaptation.period.mpd,t),s.wallStartTime=e.calcWallTimeForSegment(s,t),s.replacementNumber=m(s,i),s.availabilityIdx=i,s},n.getTimeBasedSegment=function(e,t,n,i,r,a,s,o,l,u){var c,d,h=i/a,f=Math.min(r/a,n.adaptation.period.mpd.maxSegmentDuration),p=void 0;return d=(c=e.calcPresentationTimeFromMediaTime(h,n))+f,(p=new _.default).representation=n,p.duration=f,p.mediaStartTime=h,p.presentationStartTime=c,p.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,p.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(d,n.adaptation.period.mpd,t),p.wallStartTime=e.calcWallTimeForSegment(p,t),p.replacementTime=u||i,p.replacementNumber=m(p,l),s=g(s=g(s,"Number",p.replacementNumber),"Time",p.replacementTime),p.media=s,p.mediaRange=o,p.availabilityIdx=l,p},n.getSegmentByIndex=v,n.decideSegmentListRangeForTemplate=function(e,t,n,i,r,a){var s=n.segmentDuration,o=n.adaptation.period.mpd.manifest.minBufferTime,l=n.segmentAvailabilityRange,u={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,l.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,l.end)},c=n.segments,d=2*s,h=a||Math.max(2*o,10*s),f=NaN,p=null,m=void 0,g=void 0;return u.start=Math.max(u.start,0),g=t&&!e.isTimeSyncCompleted()?(m=Math.floor(u.start/s),Math.floor(u.end/s)):(f=c&&0<c.length?(p=v(r,n))?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,p.presentationStartTime):0<r?r*s:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,i):0<r?r*s:t?u.end:u.start,m=Math.floor(Math.max(f-d,u.start)/s),Math.floor(Math.min(m+h/s,u.end/s))),{start:m,end:g}};var i,r=e(88),_=(i=r)&&i.__esModule?i:{default:i}},{88:88}],78:[function(e,t,n){"use strict";function i(e,m){var g=e.timelineConverter;return{getSegments:function(e,t,n,i){var r,a,s,o,l=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,u=e.segmentDuration,c=e.segmentAvailabilityRange,d=[],h=null,f=null,p=void 0;for(o=e.startNumber,a=(r=isNaN(u)&&!m?{start:o,end:o}:(0,v.decideSegmentListRangeForTemplate)(g,m,e,t,n,i)).start,s=r.end,p=a;p<=s;p++)(f=(0,v.getIndexBasedSegment)(g,m,e,p)).replacementTime=(o+p-1)*e.segmentDuration,h=l.media,h=(0,v.replaceTokenForTemplate)(h,"Number",f.replacementNumber),h=(0,v.replaceTokenForTemplate)(h,"Time",f.replacementTime),f.media=h,d.push(f),f=null;return isNaN(u)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((c.end-c.start)/u),d}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r},v=e(77);i.__dashjs_factory_name="TemplateSegmentsGetter";var o=s.default.getClassFactory(i);n.default=o,t.exports=n.default},{51:51,77:77}],79:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function t(e){s=e}function i(e,t,n,i){return i?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-s)):t.availabilityStartTime}function o(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*s)/1e3}function e(e){l||void 0!==e.offset&&(t(e.offset/1e3),l=!0)}function n(){s=0,l=!1,u=NaN}var r=this.context,a=(0,c.default)(r).getInstance(),s=void 0,l=void 0,u=void 0;return{initialize:function(){n(),a.on(d.default.TIME_SYNCHRONIZATION_COMPLETED,e,this)},isTimeSyncCompleted:function(){return l},setTimeSyncCompleted:function(e){l=e},getClientTimeOffset:function(){return s},setClientTimeOffset:t,getExpectedLiveEdge:function(){return u},setExpectedLiveEdge:function(e){u=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return i.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return i.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:o,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,i={start:n.start,end:n.start+n.duration};if(!t)return i;if(!l&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=o(new Date,n),s=n.start+n.duration;return i.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start),i.end=s<=a&&a-r<s?s-r:a-r,i},calcWallTimeForSegment:function(e,t){var n=void 0,i=void 0,r=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,i=e.presentationStartTime+n,r=new Date(e.availabilityStartTime.getTime()+1e3*i)),r},calcMSETimeOffset:function(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t},reset:function(){a.off(d.default.TIME_SYNCHRONIZATION_COMPLETED,e,this),n()}}}Object.defineProperty(n,"__esModule",{value:!0});var c=i(e(50)),d=i(e(54)),a=i(e(51));r.__dashjs_factory_name="TimelineConverter",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{50:50,51:51,54:54}],80:[function(e,t,n){"use strict";function i(e,A){var C=(e=e||{}).timelineConverter;return{getSegments:function(r,e,t,n){if(function(){if(!(C&&C.hasOwnProperty("calcMediaTimeFromPresentationTime")&&C.hasOwnProperty("calcSegmentAvailabilityRange")&&C.hasOwnProperty("calcMediaTimeFromPresentationTime")))throw new Error("Missing config parameter(s)")}(),!r)throw new Error("no representation");void 0===e&&(e=null);var i,a=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].SegmentTemplate||r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].SegmentList,s=a.SegmentTimeline,o=a.SegmentURL_asArray,l=0<r.availableSegmentsNumber;i=n||(-1<t||null!==e?10:1/0);var u,c,d,h=0,f=0,p=-1,m=[],g=null,v=void 0,_=void 0,y=void 0,x=void 0,b=void 0,T=void 0,S=void 0,E=void 0,w=function(e,t){var n=a.media,i=e.mediaRange;return o&&(n=o[t].media||"",i=o[t].mediaRange),(0,P.getTimeBasedSegment)(C,A,r,h,e.d,E,n,i,p,e.tManifest)};for(E=r.timescale,u=s.S_asArray,d=t,null!==e&&(g=C.calcMediaTimeFromPresentationTime(e,r)),_=0,c=u.length;_<c;_++){if(x=0,(v=u[_]).hasOwnProperty("r")&&(x=v.r),v.hasOwnProperty("t")&&(f=(h=v.t)/E),x<0){if((T=u[_+1])&&T.hasOwnProperty("t"))b=T.t/E;else{var M=r.segmentAvailabilityRange?r.segmentAvailabilityRange.end:C.calcSegmentAvailabilityRange(r,A).end;b=C.calcMediaTimeFromPresentationTime(M,r),r.segmentDuration=v.d/E}x=Math.ceil((b-f)/(v.d/E))-1}if(S){if(l)break;p+=x+1}else for(y=0;y<=x;y++)if(p++,m.length>i){if(S=!0,l)break}else null!==g?f>=g-v.d/E*1.5&&m.push(w(v,p)):d<=p&&m.push(w(v,p)),f=(h+=v.d)/E}return l||(r.availableSegmentsNumber=p+1),m}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r},P=e(77);i.__dashjs_factory_name="TimelineSegmentsGetter";var o=s.default.getClassFactory(i);n.default=o,t.exports=n.default},{51:51,77:77}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.period=null,this.index=-1,this.type=null},t.exports=n.default},{}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=i||1,this.dvb_weight=r||1};i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default},{}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=n.default},{}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},t.exports=n.default},{}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=n.default},{}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",n.default=i,t.exports=n.default},{}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e(61),s=(i=a)&&i.__esModule?i:{default:i},o=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN}return r(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||(e.segmentInfoType===s.default.BASE_URL||e.segmentInfoType===s.default.SEGMENT_BASE)&&null!==e.range}},{key:"hasSegments",value:function(e){return e.segmentInfoType!==s.default.BASE_URL&&e.segmentInfoType!==s.default.SEGMENT_BASE&&!e.indexRange}}]),e}();n.default=o,t.exports=n.default},{61:61}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=n.default},{}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],90:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t=this.context,r=(0,c.default)(t).getInstance(),a=void 0,s=void 0;return a={checkForExistence:function(t){var e=function(e){r.trigger(d.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})};if(t){var n=new l.default(t.url);s.load({request:n,success:function(){e(!0)},error:function(){e(!1)}})}else e(!1)},load:function(n){var i=function(e,t){r.trigger(d.default.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:a})};n?s.load({request:n,progress:function(){r.trigger(d.default.LOADING_PROGRESS,{request:n})},success:function(e){i(e)},error:function(e,t,n){i(void 0,new u.default(1,n,t))},abort:function(e,t){e&&0===t&&r.trigger(d.default.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:a})}}):i(void 0,new u.default(2,"request is null"))},abort:function(){s&&s.abort()},reset:function(){s&&(s.abort(),s=null)}},s=(0,o.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),a}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(98)),l=i(e(214)),u=i(e(211)),c=i(e(50)),d=i(e(54)),a=i(e(51));r.__dashjs_factory_name="FragmentLoader";var s=a.default.getClassFactory(r);s.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=1,s.FRAGMENT_LOADER_ERROR_NULL_REQUEST=2,a.default.updateClassFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{211:211,214:214,50:50,51:51,54:54,98:98}],91:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){c.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}e=e||{};var u=this.context,c=(0,l.default)(u).getInstance(),d=(0,o.default)(u).getInstance(),h=(0,S.default)(u).getInstance().log,n=void 0,i=void 0,f=void 0,p=void 0,m=e.mssHandler,g=e.errHandler;return n={load:function(l){var e=new _.default(l,x.HTTPRequest.MPD_TYPE);i.load({request:e,success:function(e,t,n){var i=void 0,r=void 0;if(n.responseURL&&n.responseURL!==l?(r=d.parseBaseUrl(n.responseURL),i=n.responseURL):(d.isRelative(l)&&(l=d.resolve(l,window.location.href)),r=d.parseBaseUrl(l)),null===p&&(s=null,p=-1<(a=e).indexOf("SmoothStreamingMedia")?(m?(s=m.createMssParser(),m.registerEvents()):g.manifestError("manifest type unsupported","createParser"),s):-1<a.indexOf("MPD")?(0,T.default)(u).create({errorHandler:g}):s),null!==p){var a,s;f.setMatchers(p.getMatchers()),f.setIron(p.getIron());var o=p.parse(e);o?(o.url=i||l,o.originalUrl||(o.originalUrl=o.url),o.hasOwnProperty(v.default.LOCATION)&&(r=d.parseBaseUrl(o.Location_asArray[0]),h("BaseURI set by Location to: "+r)),o.baseUri=r,o.loadedTime=new Date,f.resolveManifestOnLoad(o)):c.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(1,"parsing failed")})}else c.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(1,"Failed detecting manifest type: "+l)})},error:function(e,t,n){c.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(2,"Failed loading manifest: "+l+", "+n)})}})},reset:function(){c.off(b.default.XLINK_READY,t,n),f&&(f.reset(),f=null),i&&(i.abort(),i=null),m&&m.reset()}},c.on(b.default.XLINK_READY,t,n),i=(0,s.default)(u).create({errHandler:g,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),f=(0,a.default)(u).create({errHandler:g,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),p=null,n}Object.defineProperty(n,"__esModule",{value:!0});var v=i(e(100)),a=i(e(116)),s=i(e(98)),o=i(e(206)),_=i(e(221)),y=i(e(211)),x=e(230),l=i(e(50)),b=i(e(54)),u=i(e(51)),T=i(e(64)),S=i(e(49));r.__dashjs_factory_name="ManifestLoader";var c=u.default.getClassFactory(r);c.MANIFEST_LOADER_ERROR_PARSING_FAILURE=1,c.MANIFEST_LOADER_ERROR_LOADING_FAILURE=2,u.default.updateClassFactory(r.__dashjs_factory_name,c),n.default=c,t.exports=n.default},{100:100,116:116,206:206,211:211,221:221,230:230,49:49,50:50,51:51,54:54,64:64,98:98}],92:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){f=NaN,m=!(g=!1),t()}function t(){null!==p&&(clearInterval(p),p=null)}function i(){t(),isNaN(f)||(d("Refresh manifest in "+f+" seconds."),p=setTimeout(a,1e3*f))}function n(){g=!0;var e=_.getValue(),t=e.url,n=y.getLocation(e);n&&(t=n),v.load(t)}function r(e){_.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;f=y.getManifestUpdatePeriod(e,n),h.trigger(T.default.MANIFEST_UPDATED,{manifest:e}),d("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),m||i()}function a(){m&&!x.getScheduleWhilePaused()||g||n()}function s(e){e.error||r(e.manifest)}function o(){m=!1,i()}function l(){m=!0,t()}function u(){g=!1}var c=this.context,d=(0,S.default)(c).getInstance().log,h=(0,b.default)(c).getInstance(),f=void 0,p=void 0,m=void 0,g=void 0,v=void 0,_=void 0,y=void 0,x=void 0;return{initialize:function(){e(),h.on(T.default.STREAMS_COMPOSED,u,this),h.on(T.default.PLAYBACK_STARTED,o,this),h.on(T.default.PLAYBACK_PAUSED,l,this),h.on(T.default.INTERNAL_MANIFEST_LOADED,s,this)},setManifest:function(e){r(e)},refreshManifest:n,setConfig:function(e){e&&(e.manifestModel&&(_=e.manifestModel),e.dashManifestModel&&(y=e.dashManifestModel),e.mediaPlayerModel&&(x=e.mediaPlayerModel),e.manifestLoader&&(v=e.manifestLoader))},reset:function(){h.off(T.default.PLAYBACK_STARTED,o,this),h.off(T.default.PLAYBACK_PAUSED,l,this),h.off(T.default.STREAMS_COMPOSED,u,this),h.off(T.default.INTERNAL_MANIFEST_LOADED,s,this),e()}}}Object.defineProperty(n,"__esModule",{value:!0});var b=i(e(50)),T=i(e(54)),a=i(e(51)),S=i(e(49));r.__dashjs_factory_name="ManifestUpdater",n.default=a.default.getClassFactory(r),t.exports=n.default},{49:49,50:50,51:51,54:54}],93:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){return!!ee&&!!I}function i(){return(0,Ce.getVersionString)()}function t(){if(!N)throw E;return K.isPaused()}function s(e){var t=y(),n=K.getLiveDelay();if(!t)return 0;var i=t.range.start+e;return i>t.range.end-n&&(i=t.range.end-n),i}function n(e){if(!N)throw E;var t=h().currentTime;if(void 0!==e)t=X.getTimeRelativeToStreamId(t,e);else if(K.getIsDynamic()){var n=y();t=null===n?0:r()-(n.range.end-n.time)}return t}function r(){if(!N)throw E;var e=h().duration;if(K.getIsDynamic()){var t,n=y();if(!n)return 0;e=(t=n.range.end-n.range.start)<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function a(e){U=e}function o(e,t){l(e,t);var n=new ae.default;n.schemeIdUri=e,n.value=t,q.getUTCTimingSources().push(n)}function l(n,i){var r=q.getUTCTimingSources();r.forEach(function(e,t){e.schemeIdUri===n&&e.value===i&&r.splice(t,1)})}function u(){o(ve.default.DEFAULT_UTC_TIMING_SOURCE.scheme,ve.default.DEFAULT_UTC_TIMING_SOURCE.value)}function c(){return Q}function d(e){return G.getReadOnlyMetricsFor(e)}function h(){if(!ee)throw w;return ee.getElement()}function f(e){if(!O)throw A;ee&&ee.reset(),ee=null,e&&((ee=(0,be.default)(P).getInstance()).initialize(),ee.setElement(e),_(),function(){if(!V){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(P).create();V=t.createMetricsReporting({log:k,eventBus:R,mediaElement:h(),dashManifestModel:Z,metricsModel:G,events:we.default,constants:ie.default,metricsConstants:re.default})}}}(),function(){if(!H){var e=dashjs.MssHandler;"function"==typeof e&&(H=e(P).create({eventBus:R,mediaPlayerModel:q,metricsModel:G,playbackController:K,protectionController:j,errHandler:W,events:we.default,constants:ie.default,log:k,initSegmentType:Ie.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Le.default,ISOBoxer:Oe.default}))}}()),g()}function p(e){if(!N)throw E;var t=X.getActiveStreamInfo();return t?$.getTracksFor(e,t):[]}function m(e){if(!O)throw A;if("string"==typeof e){var t=(0,me.default)(P).getInstance();t.initialize(),I=t.parseURI(e)}else I=e;g()}function g(){N&&(N=!1,z.reset(),X.reset(),K.reset(),F.reset(),$.reset(),te.reset(),j&&(j.reset(),j=null,_())),e()&&T()}function v(){return(0,ue.default)(P).create({errHandler:W,metricsModel:G,mediaPlayerModel:q,requestModifier:(0,fe.default)(P).getInstance(),mssHandler:H})}function _(){if(j)return j;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(P).create();return we.default.extend(e.events),Me.default.extend(e.events,{publicOnly:!0}),j=t.createProtectionSystem({log:k,errHandler:W,videoModel:ee,capabilities:Y,eventBus:R,adapter:z,events:we.default,BASE64:Le.default,constants:ie.default})}function y(){var e=G.getReadOnlyMetricsFor(ie.default.VIDEO)||G.getReadOnlyMetricsFor(ie.default.AUDIO);return Q.getCurrentDVRInfo(e)}function x(e){var t=y();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function b(){if(!N)throw E;var e=X.getActiveStreamInfo();return e?X.getStreamById(e.id):null}function T(){var e,t;N||(e=v(),t=(0,xe.default)(P).getInstance({textController:te}),X||(X=(0,oe.default)(P).getInstance()),$.setConfig({errHandler:W,domStorage:ne}),X.setConfig({capabilities:Y,manifestLoader:e,manifestModel:J,dashManifestModel:Z,mediaPlayerModel:q,protectionController:j,adapter:z,metricsModel:G,dashMetrics:Q,errHandler:W,timelineConverter:B,videoModel:ee,playbackController:K,domStorage:ne,abrController:F,mediaController:$,textController:te,sourceBufferController:t}),K.setConfig({streamController:X,metricsModel:G,dashMetrics:Q,manifestModel:J,mediaPlayerModel:q,dashManifestModel:Z,adapter:z,videoModel:ee}),F.setConfig({streamController:X,domStorage:ne,mediaPlayerModel:q,metricsModel:G,dashMetrics:Q,dashManifestModel:Z,manifestModel:J,videoModel:ee,adapter:z}),F.createAbrRulesCollection(),te.setConfig({errHandler:W,manifestModel:J,dashManifestModel:Z,mediaController:$,streamController:X,videoModel:ee}),X.initialize(U,L),N=!0,k("Playback Initialized"),"string"==typeof I?X.load(I):X.loadWithManifest(I))}var S,E="You must first call initialize() to init playback before calling this method",w="You must first call attachView() to set the video element before calling this method",M="You must first call attachSource() with a valid source before calling this method",A="MediaPlayer not initialized!",C="MediaPlayer Invalid Arguments!",P=this.context,R=(0,Ee.default)(P).getInstance(),D=(0,Se.default)(P).getInstance(),k=D.log,I=void 0,L=void 0,O=void 0,N=void 0,U=void 0,F=void 0,B=void 0,$=void 0,j=void 0,V=void 0,H=void 0,z=void 0,G=void 0,q=void 0,W=void 0,Y=void 0,X=void 0,K=void 0,Q=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0;return U=!(N=O=!(S={initialize:function(e,t,n){Y||(Y=(0,de.default)(P).getInstance()),W=(0,ce.default)(P).getInstance(),Y.supportsMediaSource()?O||(O=!0,B=(0,ke.default)(P).getInstance(),F||(F=(0,ye.default)(P).getInstance()),K||(K=(0,se.default)(P).getInstance()),$||($=(0,le.default)(P).getInstance()),z=(0,Pe.default)(P).getInstance(),Z=(0,Re.default)(P).getInstance({mediaController:$,timelineConverter:B,adapter:z}),J=(0,ge.default)(P).getInstance(),Q=(0,De.default)(P).getInstance({manifestModel:J,dashManifestModel:Z}),G=(0,_e.default)(P).getInstance(),te=(0,pe.default)(P).getInstance(),ne=(0,Te.default)(P).getInstance({mediaPlayerModel:q}),z.setConfig({dashManifestModel:Z}),G.setConfig({adapter:z}),u(),a(void 0===n||n),e&&f(e),t&&m(t),k("[dash.js "+i()+"] MediaPlayer has been initialized")):W.capabilityError("mediasource")},setConfig:function(e){e&&(e.capabilities&&(Y=e.capabilities),e.streamController&&(X=e.streamController),e.playbackController&&(K=e.playbackController),e.mediaPlayerModel&&(q=e.mediaPlayerModel),e.abrController&&(F=e.abrController),e.mediaController&&($=e.mediaController))},on:function(e,t,n){R.on(e,t,n)},off:function(e,t,n){R.off(e,t,n)},extend:function(e,t,n){Ae.default.extend(e,t,n,P)},attachView:f,attachSource:m,isReady:e,play:function(){if(!N)throw E;(!U||t()&&N)&&K.play()},isPaused:t,pause:function(){if(!N)throw E;K.pause()},isSeeking:function(){if(!N)throw E;return K.isSeeking()},isDynamic:function(){if(!N)throw E;return K.getIsDynamic()},seek:function(e){if(!N)throw E;if("number"!=typeof e||isNaN(e))throw C;var t=K.getIsDynamic()?s(e):e;K.seek(t)},setPlaybackRate:function(e){if(!ee)throw w;h().playbackRate=e},getPlaybackRate:function(){if(!ee)throw w;return h().playbackRate},setMute:function(e){if(!ee)throw w;h().muted=e},isMuted:function(){if(!ee)throw w;return h().muted},setVolume:function(e){if(!ee)throw w;h().volume=e},getVolume:function(){if(!ee)throw w;return h().volume},time:n,duration:r,timeAsUTC:function(){if(!N)throw E;return n()<0?NaN:x(n())},durationAsUTC:function(){if(!N)throw E;return x(r())},getActiveStream:b,getDVRWindowSize:function(){var e=y();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:s,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(i<10?"0"+i.toString():i.toString())},formatUTC:function(e,t,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],r=new Date(1e3*e),a=r.toLocaleDateString(t),s=r.toLocaleTimeString(t,{hour12:n});return i?s+" "+a:s},getVersion:i,getDebug:function(){return D},getBufferLength:function(e){var t,n=[ie.default.VIDEO,ie.default.AUDIO,ie.default.FRAGMENTED_TEXT];return e?-1===n.indexOf(e)?(k("Warning  - getBufferLength requested for invalid type"),NaN):(t=c().getCurrentBufferLevel(d(e)))||NaN:(t=n.map(function(e){return 0<p(e).length?c().getCurrentBufferLevel(d(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getVideoContainer:function(){return ee?ee.getVideoContainer():null},getTTMLRenderingDiv:function(){return ee?ee.getTTMLRenderingDiv():null},getVideoElement:h,getSource:function(){if(!I)throw M;return I},setLiveDelayFragmentCount:function(e){q.setLiveDelayFragmentCount(e)},setLiveDelay:function(e){q.setLiveDelay(e)},getLiveDelay:function(){return q.getLiveDelay()},useSuggestedPresentationDelay:function(e){q.setUseSuggestedPresentationDelay(e)},enableLastBitrateCaching:function(e,t){q.setLastBitrateCachingInfo(e,t)},enableLastMediaSettingsCaching:function(e,t){q.setLastMediaSettingsCachingInfo(e,t)},setMaxAllowedBitrateFor:function(e,t){F.setMaxAllowedBitrateFor(e,t)},getMaxAllowedBitrateFor:function(e){return F.getMaxAllowedBitrateFor(e)},setMinAllowedBitrateFor:function(e,t){F.setMinAllowedBitrateFor(e,t)},getMinAllowedBitrateFor:function(e){return F.getMinAllowedBitrateFor(e)},setMaxAllowedRepresentationRatioFor:function(e,t){F.setMaxAllowedRepresentationRatioFor(e,t)},getMaxAllowedRepresentationRatioFor:function(e){return F.getMaxAllowedRepresentationRatioFor(e)},setAutoPlay:a,getAutoPlay:function(){return U},setScheduleWhilePaused:function(e){q.setScheduleWhilePaused(e)},getScheduleWhilePaused:function(){return q.getScheduleWhilePaused()},getDashMetrics:c,getMetricsFor:d,getQualityFor:function(e){if(!N)throw E;if(e!==ie.default.IMAGE)return F.getQualityFor(e,X.getActiveStreamInfo());var t=b();if(!t)return-1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1},setQualityFor:function(e,t){if(!N)throw E;if(e===ie.default.IMAGE){var n=b();if(!n)return;var i=n.getThumbnailController();i&&i.setTrackByIndex(t)}F.setPlaybackQuality(e,X.getActiveStreamInfo(),t)},updatePortalSize:function(){F.setElementSize(),F.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return F.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(e){F.setLimitBitrateByPortal(e)},getUsePixelRatioInLimitBitrateByPortal:function(){return F.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(e){F.setUsePixelRatioInLimitBitrateByPortal(e)},setTextDefaultLanguage:function(e){void 0===te&&(te=(0,pe.default)(P).getInstance()),te.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return void 0===te&&(te=(0,pe.default)(P).getInstance()),te.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===te&&(te=(0,pe.default)(P).getInstance()),te.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===te&&(te=(0,pe.default)(P).getInstance()),te.getTextDefaultEnabled()},enableText:function(e){void 0===te&&(te=(0,pe.default)(P).getInstance()),te.enableText(e)},isTextEnabled:function(){return void 0===te&&(te=(0,pe.default)(P).getInstance()),te.isTextEnabled()},setTextTrack:function(e){if(!N)throw E;void 0===te&&(te=(0,pe.default)(P).getInstance()),te.setTextTrack(e)},getBitrateInfoListFor:function(e){if(!N)throw E;var t=b();return t?t.getBitrateListFor(e):[]},setInitialBitrateFor:function(e,t){F.setInitialBitrateFor(e,t)},getInitialBitrateFor:function(e){if(!N)throw E;return F.getInitialBitrateFor(e)},setInitialRepresentationRatioFor:function(e,t){F.setInitialRepresentationRatioFor(e,t)},getInitialRepresentationRatioFor:function(e){return F.getInitialRepresentationRatioFor(e)},getStreamsFromManifest:function(e){if(!N)throw E;return z.getStreamsInfo(e)},getTracksFor:p,getTracksForTypeFromManifest:function(e,t,n){if(!N)throw E;return(n=n||z.getStreamsInfo(t)[0])?z.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!N)throw E;var t=X.getActiveStreamInfo();return t?$.getCurrentTrackFor(e,t):null},setInitialMediaSettingsFor:function(e,t){if(!O)throw A;$.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!O)throw A;return $.getInitialSettings(e)},setCurrentTrack:function(e){if(!N)throw E;$.setTrack(e)},getTrackSwitchModeFor:function(e){if(!O)throw A;return $.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!O)throw A;$.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!O)throw A;$.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!O)throw A;return $.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(e){q.setFastSwitchEnabled(e)},getFastSwitchEnabled:function(){return q.getFastSwitchEnabled()},setMovingAverageMethod:function(e){e===ie.default.MOVING_AVERAGE_SLIDING_WINDOW||e===ie.default.MOVING_AVERAGE_EWMA?q.setMovingAverageMethod(e):k("Warning: Ignoring setMovingAverageMethod("+e+") - unknown value.")},getMovingAverageMethod:function(){return q.getMovingAverageMethod()},getAutoSwitchQualityFor:function(e){return F.getAutoSwitchBitrateFor(e)},setAutoSwitchQualityFor:function(e,t){F.setAutoSwitchBitrateFor(e,t)},setABRStrategy:function(e){e===ie.default.ABR_STRATEGY_DYNAMIC||e===ie.default.ABR_STRATEGY_BOLA||e===ie.default.ABR_STRATEGY_THROUGHPUT?q.setABRStrategy(e):k("Warning: Ignoring setABRStrategy("+e+") - unknown value.")},getABRStrategy:function(){return q.getABRStrategy()},useDefaultABRRules:function(e){q.setUseDefaultABRRules(e)},addABRCustomRule:function(e,t,n){q.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){q.removeABRCustomRule(e)},removeAllABRCustomRule:function(){q.removeAllABRCustomRule()},setBandwidthSafetyFactor:function(e){q.setBandwidthSafetyFactor(e)},getBandwidthSafetyFactor:function(){return q.getBandwidthSafetyFactor()},getAverageThroughput:function(e){var t=F.getThroughputHistory();return t?t.getAverageThroughput(e):0},setAbandonLoadTimeout:function(e){q.setAbandonLoadTimeout(e)},retrieveManifest:function(e,n){var i=v(),r=this;R.on(we.default.INTERNAL_MANIFEST_LOADED,function e(t){t.error?n(null,t.error):n(t.manifest),R.off(we.default.INTERNAL_MANIFEST_LOADED,e,r),i.reset()},r);var t=(0,me.default)(P).getInstance();t.initialize(),i.load(t.parseURI(e))},addUTCTimingSource:o,removeUTCTimingSource:l,clearDefaultUTCTimingSources:function(){q.setUTCTimingSources([])},restoreDefaultUTCTimingSources:u,setBufferToKeep:function(e){q.setBufferToKeep(e)},setBufferAheadToKeep:function(e){q.setBufferAheadToKeep(e)},setBufferPruningInterval:function(e){q.setBufferPruningInterval(e)},setStableBufferTime:function(e){q.setStableBufferTime(e)},getStableBufferTime:function(){return q.getStableBufferTime()},setBufferTimeAtTopQuality:function(e){q.setBufferTimeAtTopQuality(e)},getBufferTimeAtTopQuality:function(){return q.getBufferTimeAtTopQuality()},setBufferTimeAtTopQualityLongForm:function(e){q.setBufferTimeAtTopQualityLongForm(e)},getBufferTimeAtTopQualityLongForm:function(){return q.getBufferTimeAtTopQualityLongForm()},setFragmentLoaderRetryAttempts:function(e){q.setFragmentRetryAttempts(e)},setFragmentLoaderRetryInterval:function(e){q.setFragmentRetryInterval(e)},setManifestLoaderRetryAttempts:function(e){q.setManifestRetryAttempts(e)},setManifestLoaderRetryInterval:function(e){q.setManifestRetryInterval(e)},setXHRWithCredentialsForType:function(e,t){q.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return q.getXHRWithCredentialsForType(e)},setLongFormContentDurationThreshold:function(e){q.setLongFormContentDurationThreshold(e)},setSegmentOverlapToleranceTime:function(e){q.setSegmentOverlapToleranceTime(e)},setCacheLoadThresholdForType:function(e,t){q.setCacheLoadThresholdForType(e,t)},getProtectionController:function(){return _()},attachProtectionController:function(e){j=e},setProtectionData:function(e){L=e},enableManifestDateHeaderTimeSource:function(e){q.setUseManifestDateHeaderTimeSource(e)},displayCaptionsOnTop:function(e){var t=(0,he.default)(P).getInstance();t.setConfig({videoModel:ee}),t.initialize(),t.displayCConTop(e)},attachVideoContainer:function(e){if(!ee)throw w;ee.setVideoContainer(e)},attachTTMLRenderingDiv:function(e){if(!ee)throw w;ee.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return te&&(e=te.getCurrentTrackIdx()),e},getUseDeadTimeLatencyForAbr:function(){return F.getUseDeadTimeLatency()},setUseDeadTimeLatencyForAbr:function(e){F.setUseDeadTimeLatency(e)},getThumbnail:function(e){if(e<0)return null;var t=K.getIsDynamic()?s(e):e,n=X.getStreamForTime(t);if(null===n)return null;var i=n.getThumbnailController(),r=n.getStreamInfo();if(!i||!r)return null;var a=X.getTimeRelativeToStreamId(t,n.getId());return i.get(a)},reset:function(){m(null),f(null),L=null,j&&(j.reset(),j=null),V&&(V.reset(),V=null)}})),z=L=j=null,we.default.extend(Me.default),q=(0,ve.default)(P).getInstance(),S}Object.defineProperty(n,"__esModule",{value:!0});var ie=i(e(100)),re=i(e(101)),ae=i(e(89)),se=i(e(111)),oe=i(e(114)),le=i(e(109)),ue=i(e(91)),ce=i(e(199)),de=i(e(195)),he=i(e(190)),fe=i(e(204)),pe=i(e(188)),me=i(e(145)),ge=i(e(142)),ve=i(e(143)),_e=i(e(144)),ye=i(e(103)),xe=i(e(113)),be=i(e(146)),Te=i(e(197)),Se=i(e(49)),Ee=i(e(50)),we=i(e(54)),Me=i(e(94)),Ae=i(e(51)),Ce=e(52),Pe=i(e(56)),Re=i(e(63)),De=i(e(58)),ke=i(e(79)),Ie=e(230),Le=i(e(1)),Oe=i(e(11));r.__dashjs_factory_name="MediaPlayer";var a=Ae.default.getClassFactory(r);a.events=Me.default,Ae.default.updateClassFactory(r.__dashjs_factory_name,a),n.default=a,t.exports=n.default},{1:1,100:100,101:101,103:103,109:109,11:11,111:111,113:113,114:114,142:142,143:143,144:144,145:145,146:146,188:188,190:190,195:195,197:197,199:199,204:204,230:230,49:49,50:50,51:51,52:52,54:54,56:56,58:58,63:63,79:79,89:89,91:91,94:94}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(55),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=s,t.exports=n.default},{55:55}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(93),a=(i=r)&&i.__esModule?i:{default:i},s=function(){function o(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i=void 0,r=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==u})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(i=(0,a.default)(n).create()).initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+r+" to dash.js player and added content: "+t.src),e._dashjs_player=i}function l(e){for(var t=!0;t;){var n=e;if(t=!1,"video"===n.nodeName.toLowerCase())return n;e=n.parentNode,t=!0}}var u="application/dash+xml";return{create:o,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var i=(t=t||document).querySelectorAll(e),r=0;r<i.length;r++){var a=o(i[r],null);n.push(a)}var s=t.querySelectorAll('source[type="'+u+'"]');for(r=0;r<s.length;r++)a=o(l(s[r]),null),n.push(a);return n}}}(),o=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?s.createAll():o=window.setInterval(function(){window.dashjs&&(window.clearInterval(o),s.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),s.createAll()})),n.default=s,t.exports=n.default},{93:93}],96:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(l){function e(){for(var e=U?U.length:0,t=0;t<e;t++)U[t].getFragmentModel().removeExecutedRequestsBeforeTime(r()+i()),U[t].reset();B=F=!(U=[]),T.off(ee.default.CURRENT_TRACK_CHANGED,u,N)}function t(){e(),$=null,V=!(j={})}function n(){I&&I.pause(),z&&(z.reset(),z=null),t(),b=null,T.off(ee.default.DATA_UPDATE_COMPLETED,g,N),T.off(ee.default.BUFFERING_COMPLETED,m,N),T.off(ee.default.KEY_ERROR,s,N),T.off(ee.default.SERVER_CERTIFICATE_UPDATED,s,N),T.off(ee.default.LICENSE_REQUEST_COMPLETE,s,N),T.off(ee.default.KEY_SYSTEM_SELECTED,s,N),T.off(ee.default.KEY_SESSION_CREATED,s,N)}function i(){return $?$.duration:NaN}function r(){return $?$.start:NaN}function a(){if(!(k&&k.hasOwnProperty("getBitrateList")&&A&&A.hasOwnProperty("getAllMediaInfoForType")&&A.hasOwnProperty("getEventsFor")))throw new Error("Missing config parameter(s)")}function s(e){e.error&&(P.mediaKeySessionError(e.error),b(e.error),n())}function o(e){var t,n=e.type,i=void 0;if(n===Y.default.MUXED&&e)return b(i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),P.manifestError(i,"multiplexedrep",S.getValue()),!1;if(n===Y.default.TEXT||n===Y.default.FRAGMENTED_TEXT||n===Y.default.EMBEDDED_TEXT||n===Y.default.IMAGE)return!0;if(t=e.codec,b(n+" codec: "+t),e.contentProtection&&!C.supportsEncryptedMedia())P.capabilityError("encryptedmedia");else if(!C.supportsCodec(t))return i=n+"Codec ("+t+") is not supported.",P.manifestError(i,"codec",S.getValue()),b(i),!1;return!0}function u(e){if(e.newMediaInfo.streamInfo.id===$.id){var t=v(e.oldMediaInfo);if(t){var n=I.getTime();b("Stream -  Process track changed at current time "+n);var i=e.newMediaInfo,r=S.getValue();b("Stream -  Update stream controller"),r.refreshManifestOnSwitchTrack?(b("Stream -  Refreshing manifest for switch track"),W=e,M.refreshManifest()):(t.updateMediaInfo(i),i.type!==Y.default.FRAGMENTED_TEXT&&(k.updateTopQualityIndex(i),t.switchTrackAsked()))}}}function c(e,t,n,i){var r,a=(0,X.default)(x).create({type:(r=e,r.type===Y.default.TEXT?r.mimeType:r.type),mimeType:e.mimeType,timelineConverter:R,adapter:A,manifestModel:S,dashManifestModel:E,mediaPlayerModel:w,metricsModel:D,dashMetrics:l.dashMetrics,baseURLController:l.baseURLController,stream:N,abrController:k,domStorage:l.domStorage,playbackController:I,mediaController:L,streamController:l.streamController,textController:O,sourceBufferController:l.sourceBufferController,errHandler:P});if(a.initialize(n),k.updateTopQualityIndex(e),i?(a.setBuffer(i.buffer),a.getIndexHandler().setCurrentTime(i.currentTime),U[i.replaceIdx]=a):U.push(a),!i||!i.ignoreMediaInfo)if(e.type===Y.default.TEXT||e.type===Y.default.FRAGMENTED_TEXT){for(var s=void 0,o=0;o<t.length;o++)t[o].index===e.index&&(s=o),a.updateMediaInfo(t[o]);e.type===Y.default.FRAGMENTED_TEXT&&a.updateMediaInfo(t[s])}else a.updateMediaInfo(e)}function d(e,t){var n=A.getAllMediaInfoForType($,e),i=null;if(n&&0!==n.length){for(var r=0,a=n.length;r<a;r++)if(i=n[r],e===Y.default.EMBEDDED_TEXT)O.addEmbeddedTrack(i);else{if(!o(i))continue;L.isMultiTrackSupportedByType(i.type)&&L.addTrack(i,$)}if(e!==Y.default.EMBEDDED_TEXT&&0!==L.getTracksFor(e,$).length){if(e===Y.default.IMAGE)return void(G=(0,Z.default)(x).create({dashManifestModel:E,adapter:A,baseURLController:l.baseURLController,stream:N}));L.checkInitialMediaSettingsForType(e,$),c(L.getCurrentTrackFor(e,$),n,t)}}else b("No "+e+" data.")}function h(e){var i=E.getAdaptationForType(S.getValue(),$.index,e,$);if(!i||!Array.isArray(i.Representation_asArray))return null;i.Representation_asArray=i.Representation_asArray.filter(function(e,t){if(0===t)return!0;var n=E.getCodec(i,t,!0);return!!C.supportsCodec(n)||(b("[Stream] codec not supported: "+n),!1)})}function f(){for(var e=U.length,t=!!j.audio||!!j.video?new Error(y,"Data update failed",null):null,n=0;n<e;n++)if(U[n].isUpdating()||V)return;B&&(H&&H.initialize(S.getValue(),p(Y.default.AUDIO),p(Y.default.VIDEO)),T.trigger(ee.default.STREAM_INITIALIZED,{streamInfo:$,error:t}))}function p(e){for(var t=U.length,n=null,i=0;i<t;i++)if((n=U[i]).getType()===e)return n.getMediaInfo();return null}function m(e){if(e.streamInfo===$){var t=_(),n=t.length;if(0===n)return void b("[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");for(var i=0;i<n;i++)if(!t[i].isBufferingCompleted()&&(t[i].getType()===Y.default.AUDIO||t[i].getType()===Y.default.VIDEO))return void b("[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because streamProcessor "+t[i].getType()+" is not buffering completed");b("[Stream] onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),T.trigger(ee.default.STREAM_BUFFERING_COMPLETED,{streamInfo:$})}}function g(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===$&&(j[t.getType()]=e.error,f())}function v(t){return!!t&&_().filter(function(e){return e.getType()===t.type})[0]}function _(){for(var e=U.length,t=[],n=void 0,i=void 0,r=0;r<e;r++)(n=(i=U[r]).getType())!==Y.default.AUDIO&&n!==Y.default.VIDEO&&n!==Y.default.FRAGMENTED_TEXT||t.push(i);return t}var y=1;l=l||{};var x=this.context,b=(0,te.default)(x).getInstance().log,T=(0,J.default)(x).getInstance(),S=l.manifestModel,E=l.dashManifestModel,w=l.mediaPlayerModel,M=l.manifestUpdater,A=l.adapter,C=l.capabilities,P=l.errHandler,R=l.timelineConverter,D=l.metricsModel,k=l.abrController,I=l.playbackController,L=l.mediaController,O=l.textController,N=void 0,U=void 0,F=void 0,B=void 0,$=void 0,j=void 0,V=void 0,H=void 0,z=void 0,G=void 0,q=void 0,W=void 0;return N={initialize:function(e,t){$=e,(H=t)&&(T.on(ee.default.KEY_ERROR,s,N),T.on(ee.default.SERVER_CERTIFICATE_UPDATED,s,N),T.on(ee.default.LICENSE_REQUEST_COMPLETE,s,N),T.on(ee.default.KEY_SYSTEM_SELECTED,s,N),T.on(ee.default.KEY_SESSION_CREATED,s,N))},activate:function(e){F||(T.on(ee.default.CURRENT_TRACK_CHANGED,u,N),function(e){a();var t=void 0;if(q||((q=(0,K.default)(x).create()).setConfig({manifestModel:S,manifestUpdater:M,playbackController:I}),t=A.getEventsFor($),q.addInlineEvents(t)),V=!0,h(Y.default.VIDEO),h(Y.default.AUDIO),d(Y.default.VIDEO,e),d(Y.default.AUDIO,e),d(Y.default.TEXT,e),d(Y.default.FRAGMENTED_TEXT,e),d(Y.default.EMBEDDED_TEXT,e),d(Y.default.MUXED,e),d(Y.default.IMAGE,e),function(){for(var e=0,t=U.length;e<t;e++)U[e].createBuffer()}(),V=!(B=!0),0===U.length){var n="No streams to play.";P.manifestError(n,"nostreams",S.getValue()),b(n)}else f()}(e),F=!0)},deactivate:e,getDuration:i,getStartTime:r,getId:function(){return $?$.id:NaN},getStreamInfo:function(){return $},getFragmentController:function(){return z},getThumbnailController:function(){return G},getEventController:function(){return q},getBitrateListFor:function(e){if(a(),e===Y.default.IMAGE)return G?G.getBitrateList():[];var t=p(e);return k.getBitrateList(t)},startEventController:function(){q&&q.start()},stopEventController:function(){q&&q.stop()},updateData:function(e){if(b("Manifest updated... updating data system wide."),V=!(F=!1),$=e,q){var t=A.getEventsFor($);q.addInlineEvents(t)}h(Y.default.VIDEO),h(Y.default.AUDIO);for(var n=0,i=U.length;n<i;n++){var r=U[n],a=A.getMediaInfoForType($,r.getType());k.updateTopQualityIndex(a),r.updateMediaInfo(a)}if(W&&"fragmentedText"!==(a=W.newMediaInfo).type){var s=v(W.oldMediaInfo);if(!s)return;s.switchTrackAsked(),W=void 0}V=!1,f()},reset:n,getProcessors:_},t(),z=(0,Q.default)(x).create({mediaPlayerModel:w,metricsModel:D,errHandler:P}),T.on(ee.default.BUFFERING_COMPLETED,m,N),T.on(ee.default.DATA_UPDATE_COMPLETED,g,N),N}Object.defineProperty(n,"__esModule",{value:!0});var Y=i(e(100)),X=i(e(97)),K=i(e(107)),Q=i(e(108)),Z=i(e(191)),J=i(e(50)),ee=i(e(54)),te=i(e(49)),a=i(e(51));r.__dashjs_factory_name="Stream",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,107:107,108:108,191:191,49:49,50:50,51:51,54:54,97:97}],97:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(n){function e(){k=[]}function t(){M=[],w=null,e()}function i(){return f?f.getStreamInfo():null}n=n||{};var r=this.context,a=void 0,s=n.type,o=n.errHandler,l=n.mimeType,u=n.timelineConverter,c=n.adapter,d=n.manifestModel,h=n.mediaPlayerModel,f=n.stream,p=n.abrController,m=n.playbackController,g=n.streamController,v=n.mediaController,_=n.textController,y=n.sourceBufferController,x=n.domStorage,b=n.metricsModel,T=n.dashMetrics,S=n.dashManifestModel,E=void 0,w=void 0,M=void 0,A=void 0,C=void 0,P=void 0,R=void 0,D=void 0,k=void 0;return E={initialize:function(e){var t;(a=(0,B.default)(r).create({mimeType:l,timelineConverter:u,dashMetrics:T,metricsModel:b,mediaPlayerModel:h,baseURLController:n.baseURLController,errHandler:o})).initialize(E),p.registerStreamType(s,E),(D=f.getFragmentController().getModel(s)).setStreamProcessor(E),A=(t=s)===I.default.VIDEO||t===I.default.AUDIO?(0,O.default)(r).create({type:t,metricsModel:b,mediaPlayerModel:h,manifestModel:d,sourceBufferController:y,errHandler:o,streamController:g,mediaController:v,adapter:c,textController:_,abrController:p,playbackController:m,streamProcessor:E}):(0,N.default)(r).create({type:t,metricsModel:b,mediaPlayerModel:h,manifestModel:d,sourceBufferController:y,errHandler:o,streamController:g,mediaController:v,adapter:c,textController:_,abrController:p,playbackController:m,streamProcessor:E}),C=(0,U.default)(r).create({type:s,metricsModel:b,adapter:c,dashMetrics:T,dashManifestModel:S,timelineConverter:u,mediaPlayerModel:h,abrController:p,playbackController:m,streamController:g,textController:_,sourceBufferController:y,streamProcessor:E}),(R=(0,F.default)(r).create()).setConfig({abrController:p,domStorage:x,metricsModel:b,dashMetrics:T,dashManifestModel:S,manifestModel:d,playbackController:m,timelineConverter:u,streamProcessor:E}),A.initialize(e),C.initialize(),R.initialize()},isUpdating:function(){return!!R&&R.isUpdating()},getType:function(){return s},getBufferController:function(){return A},getFragmentModel:function(){return D},getScheduleController:function(){return C},getLiveEdgeFinder:function(){return P},getEventController:function(){return f?f.getEventController():null},getFragmentController:function(){return f?f.getFragmentController():null},getRepresentationController:function(){return R},getIndexHandler:function(){return a},getCurrentRepresentationInfo:function(){return c.getCurrentRepresentationInfo(R)},getRepresentationInfoForQuality:function(e){return c.getRepresentationInfoForQuality(R,e)},getBufferLevel:function(){return A.getBufferLevel()},switchInitData:function(e){A&&A.switchInitData(i().id,e)},isBufferingCompleted:function(){return!!A&&A.getIsBufferingCompleted()},createBuffer:function(){return A.getBuffer()||A.createBuffer(w)},getStreamInfo:i,updateMediaInfo:function(e){e===w||e&&w&&e.type!==w.type||(w=e),-1===M.indexOf(e)&&M.push(e),c.updateData(this)},switchTrackAsked:function(){C.switchTrackAsked()},getMediaInfoArr:function(){return M},getMediaInfo:function(){return w},getMediaSource:function(){return A.getMediaSource()},getBuffer:function(){return A.getBuffer()},setBuffer:function(e){A.setBuffer(e)},registerExternalController:function(e){k.push(e)},unregisterExternalController:function(e){var t=k.indexOf(e);-1!==t&&k.splice(t,1)},getExternalControllers:function(){return k},unregisterAllExternalController:e,reset:function(e){a.reset(),A&&(A.reset(e),A=null),C&&(C.reset(),C=null),R&&(R.reset(),R=null),p&&p.unRegisterStreamType(s),k.forEach(function(e){e.reset()}),t(),f=s=null,P&&(P.reset(),P=null)}},m&&m.getIsDynamic()&&(P=(0,L.default)(r).create({timelineConverter:u,streamProcessor:E})),t(),E}Object.defineProperty(n,"__esModule",{value:!0});var I=i(e(100)),L=i(e(202)),O=i(e(106)),N=i(e(187)),U=i(e(112)),F=i(e(62)),a=i(e(51)),B=i(e(57));r.__dashjs_factory_name="StreamProcessor",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,106:106,112:112,187:187,202:202,51:51,57:57,62:62}],98:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t,n,v=(e=e||{}).errHandler,_=e.metricsModel,y=e.mediaPlayerModel,x=e.requestModifier,b=void 0,T=void 0,S=void 0,E=void 0;return t={load:function(e){e.request&&function e(n,t){var i,r=n.request,a=new XMLHttpRequest,s=[],o=!0,l=!0,u=new Date,c=u,d=0,h=function(e){l=!1,r.requestStartDate=u,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||u,r.checkExistenceOnly||_.addHttpRequest(r.mediaType,null,r.type,r.url,a.responseURL||null,r.serviceLocation||null,r.range||null,r.requestStartDate,r.firstByteDate,r.requestEndDate,a.status,r.duration,a.getAllResponseHeaders(),e?s:null)},f=function(){-1!==b.indexOf(a)&&(b.splice(b.indexOf(a),1),l&&(h(!1),0<t?(t--,S.push(setTimeout(function(){e(n,t)},y.getRetryIntervalForType(r.type)))):(v.downloadError(E[r.type],r.url,r),n.error&&n.error(r,"error",a.statusText),n.complete&&n.complete(r,a.statusText))))};if(!x||!_||!v)throw new Error("config object is not correct or missing");try{var p=x.modifyRequestURL(r.url),m=r.checkExistenceOnly?w.HTTPRequest.HEAD:w.HTTPRequest.GET;a.open(m,p,!0),r.responseType&&(a.responseType=r.responseType),r.range&&a.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=u),(a=x.modifyRequestHeader(a)).withCredentials=y.getXHRWithCredentialsForType(r.type),a.onload=function(){200<=a.status&&a.status<=299&&(h(!0),n.success&&n.success(a.response,a.statusText,a),n.complete&&n.complete(r,a.statusText))},a.onloadend=f,a.onerror=f,a.onprogress=function(e){var t=new Date;o&&(o=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(r.firstByteDate=t)),e.lengthComputable&&(r.bytesLoaded=e.loaded,r.bytesTotal=e.total),s.push({s:c,d:t.getTime()-c.getTime(),b:[e.loaded?e.loaded-d:0]}),c=t,d=e.loaded,n.progress&&n.progress()},a.onabort=function(){n.abort&&n.abort(r,a.status)};var g=(new Date).getTime();isNaN(r.delayLoadingTime)||g>=r.delayLoadingTime?(b.push(a),a.send()):(i={xhr:a},T.push(i),i.delayTimeout=setTimeout(function(){if(-1!==T.indexOf(i)){T.splice(T.indexOf(i),1);try{u=new Date,c=u,b.push(i.xhr),i.xhr.send()}catch(e){i.xhr.onerror()}}},r.delayLoadingTime-g))}catch(e){a.onerror()}}(e,y.getRetryAttemptsForType(e.request.type))},abort:function(){S.forEach(function(e){return clearTimeout(e)}),S=[],T.forEach(function(e){return clearTimeout(e.delayTimeout)}),T=[],b.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}),b=[]}},b=[],T=[],S=[],r(n={},w.HTTPRequest.MPD_TYPE,o.default.DOWNLOAD_ERROR_ID_MANIFEST),r(n,w.HTTPRequest.XLINK_EXPANSION_TYPE,o.default.DOWNLOAD_ERROR_ID_XLINK),r(n,w.HTTPRequest.INIT_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_INITIALIZATION),r(n,w.HTTPRequest.MEDIA_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,w.HTTPRequest.INDEX_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,w.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,w.HTTPRequest.OTHER_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),E=n,t}Object.defineProperty(n,"__esModule",{value:!0});var w=e(230),s=i(e(51)),o=i(e(199));a.__dashjs_factory_name="XHRLoader";var l=s.default.getClassFactory(a);n.default=l,t.exports=n.default},{199:199,230:230,51:51}],99:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,s=(0,h.default)(t).getInstance(),o=(0,u.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(n,i,r){var t=function(e,t){i.resolved=!0,i.resolvedContent=e||null,s.trigger(f.default.XLINK_ELEMENT_LOADED,{element:i,resolveObject:r,error:e||t?null:new l.default(1,"Failed loading Xlink element: "+n)})};if(n===a)t(null,!0);else{var e=new d.default(n,c.HTTPRequest.XLINK_TYPE);o.load({request:e,success:function(e){t(e)},error:function(){t(null)}})}},reset:function(){o&&(o.abort(),o=null)}}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(211)),u=i(e(98)),c=e(230),d=i(e(221)),h=i(e(50)),f=i(e(54)),a=i(e(51));r.__dashjs_factory_name="XlinkLoader";var s=a.default.getClassFactory(r);s.XLINK_LOADER_ERROR_LOADING_FAILURE=1,a.default.updateClassFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{211:211,221:221,230:230,50:50,51:51,54:54,98:98}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma"}}]),e}());n.default=r,t.exports=n.default},{}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),e}());n.default=r,t.exports=n.default},{}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),e}());n.default=r,t.exports=n.default},{}],103:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){A={video:!0,audio:!0},C={},P={},R={},D={},I={},k={},q={},t=!(Z=!(O=!(X={}))),void 0===N&&(N=!1),Y=W=G=void 0,clearTimeout(L),L=null}function n(e){e.mediaType===ee.default.VIDEO&&(G=e.oldQuality,W.push(G,V.getPlaybackQuality()))}function i(e){e.metric!==te.default.HTTP_REQUEST||!e.value||e.value.type!==de.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==ee.default.AUDIO&&e.mediaType!==ee.default.VIDEO||Y.push(e.mediaType,e.value,Z),e.metric!==te.default.BUFFER_LEVEL||e.mediaType!==ee.default.AUDIO&&e.mediaType!==ee.default.VIDEO||function(e,t){var n=H.getABRStrategy();if(n===ee.default.ABR_STRATEGY_BOLA)return X[e]=!0;if(n===ee.default.ABR_STRATEGY_THROUGHPUT)return X[e]=!1;var i=H.getStableBufferTime(),r=i,a=.5*i,s=X[e],o=(s?a:r)<t;(X[e]=o)!==s&&E(o?"AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+").":"AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+").")}(e.mediaType,.001*e.value.level)}function c(e,t){var n,i,r,a,s=void 0;return C[t]=C[t]||{},C[t].hasOwnProperty(e)||(C[t][e]=0),s=function(e,t){var n=e;if(!k[t])return n;var i=d(t);void 0!==i&&(n=Math.max(e,i));var r=o(t);return void 0!==r&&(n=Math.min(n,r)),n}(C[t][e],e),n=s,i=e,r=C[t][e],a=l(i),function(e,t){if(t!==ee.default.VIDEO||!O||!k[t])return e;N||_();var n=B.getValue(),i=$.getAdaptationForType(n,0,t).Representation,r=e;if(0<U&&0<F){for(;0<r&&i[r]&&U<i[r].width&&U-i[r-1].width<i[r].width-U;)r-=1;i.length-2>=r&&i[r].width===i[r+1].width&&(r=Math.min(e,r+1))}return r}(s=isNaN(a)||1<=a||a<0?n:Math.min(n,Math.round(r*a)),e)}function r(e){return R.hasOwnProperty("max")&&R.max.hasOwnProperty(e)?R.max[e]:NaN}function a(e){return R.hasOwnProperty("min")&&R.min.hasOwnProperty(e)?R.min[e]:NaN}function o(e){var t=r(e);return t?p(k[e].getMediaInfo(),t):void 0}function d(e){var t=a(e);if(t){var n=m(k[e].getMediaInfo()),i=p(k[e].getMediaInfo(),t);return n[i]&&i<n.length-1&&n[i].bitrate<1e3*t&&i++,i}}function l(e){return D.hasOwnProperty("max")&&D.max.hasOwnProperty(e)?D.max[e]:1}function h(e){return A[e]}function s(e,t,n,i){var r=t.id,a=v(e);if(null===n||isNaN(n)||n%1!=0)throw new Error("argument is not an integer");var s=c(e,r);n!==a&&0<=n&&n<=s&&f(e,a,n,s,i)}function f(e,t,n,i,r){if(e&&k[e]){var a=k[e].getStreamInfo(),s=a?a.id:null;if(b.getLogToBrowserConsole()){var o=Q.getCurrentBufferLevel(K.getReadOnlyMetricsFor(e));E("AbrController ("+e+") switch from "+t+" to "+n+"/"+i+" (buffer: "+o+") "+(r?JSON.stringify(r):"."))}l=e,c=n,P[u=s]=P[u]||{},P[u][l]=c,T.trigger(ae.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:a,oldQuality:t,newQuality:n,reason:r})}var l,u,c}function u(e,t){I[e].state=t}function p(e,t,n){if(Z&&n&&k[e.type].getCurrentRepresentationInfo()&&k[e.type].getCurrentRepresentationInfo().fragmentDuration){n/=1e3;var i=k[e.type].getCurrentRepresentationInfo().fragmentDuration;if(i<n)return 0;t*=1-n/i}var r=m(e);if(!r||0===r.length)return 0;for(var a=r.length-1;0<=a;a--)if(1e3*t>=r[a].bitrate)return a;return 0}function m(e){if(!e||!e.bitrateList)return null;for(var t=e.bitrateList,n=e.type,i=[],r=void 0,a=0,s=t.length;a<s;a++)(r=new ne.default).mediaType=n,r.qualityIndex=a,r.bitrate=t[a].bandwidth,r.width=t[a].width,r.height=t[a].height,r.scanType=t[a].scanType,i.push(r);return i}function g(e){return X[e]}function v(e){if(e&&k[e]){var t=k[e].getStreamInfo(),n=t?t.id:null;if(n)return P[n]=P[n]||{},P[n].hasOwnProperty(e)||(P[n][e]=0),P[n][e]}return 0}function _(){var e=t&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;U=V.getClientWidth()*e,F=V.getClientHeight()*e}function y(e){var t=e.request.mediaType;if(h(t)){var n=k[t];if(!n)return;var i=(0,se.default)(x).create({abrController:S,streamProcessor:n,currentRequest:e.request,useBufferOccupancyABR:g(t)}),r=w.shouldAbandonFragment(i);if(r.quality>oe.default.NO_CHANGE){var a=n.getFragmentModel();a.getRequests({state:ie.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(a.abortRequests(),u(t,fe),q[t].reset(),q[t].push({oldValue:v(t,M.getActiveStreamInfo()),newValue:r.quality,confidence:1,reason:r.reason}),s(t,M.getActiveStreamInfo(),r.quality,r.reason),clearTimeout(L),L=setTimeout(function(){u(t,pe),L=null},H.getAbandonLoadTimeout()))}}}var x=this.context,b=(0,he.default)(x).getInstance(),T=(0,re.default)(x).getInstance(),S=void 0,E=void 0,w=void 0,M=void 0,A=void 0,C=void 0,P=void 0,R=void 0,D=void 0,k=void 0,I=void 0,L=void 0,O=void 0,t=void 0,N=void 0,U=void 0,F=void 0,B=void 0,$=void 0,j=void 0,V=void 0,H=void 0,z=void 0,G=void 0,q=void 0,W=void 0,Y=void 0,X=void 0,K=void 0,Q=void 0,Z=void 0;return S={isPlayingAtTopQuality:function(e){var t=e.id,n=v(ee.default.AUDIO),i=v(ee.default.VIDEO);return n===c(ee.default.AUDIO,t)&&i===c(ee.default.VIDEO,t)},updateTopQualityIndex:function(e){var t,n,i,r=e.type,a=e.streamInfo.id,s=e.representationCount-1;return t=r,i=s,C[n=a]=C[n]||{},C[n][t]=i,s},getThroughputHistory:function(){return Y},getBitrateList:m,getQualityForBitrate:p,getMaxAllowedBitrateFor:r,getMinAllowedBitrateFor:a,setMaxAllowedBitrateFor:function(e,t){R.max=R.max||{},R.max[e]=t},setMinAllowedBitrateFor:function(e,t){R.min=R.min||{},R.min[e]=t},getMaxAllowedIndexFor:o,getMinAllowedIndexFor:d,getMaxAllowedRepresentationRatioFor:l,setMaxAllowedRepresentationRatioFor:function(e,t){D.max=D.max||{},D.max[e]=t},getInitialBitrateFor:function(e){var t=z.getSavedBitrateSettings(e);if(!R.hasOwnProperty(e))if(D.hasOwnProperty(e)){var n=B.getValue(),i=$.getAdaptationForType(n,0,e).Representation;if(Array.isArray(i)){var r=Math.max(Math.round(i.length*D[e])-1,0);R[e]=i[r].bandwidth}else R[e]=0}else isNaN(t)?R[e]=e===ee.default.VIDEO?1e3:100:R[e]=t;return R[e]},setInitialBitrateFor:function(e,t){R[e]=t},getInitialRepresentationRatioFor:function(e){return D.hasOwnProperty(e)?D[e]:null},setInitialRepresentationRatioFor:function(e,t){D[e]=t},setAutoSwitchBitrateFor:function(e,t){A[e]=t},getAutoSwitchBitrateFor:h,getUseDeadTimeLatency:function(){return Z},setUseDeadTimeLatency:function(e){Z=e},setLimitBitrateByPortal:function(e){O=e},getLimitBitrateByPortal:function(){return O},getUsePixelRatioInLimitBitrateByPortal:function(){return t},setUsePixelRatioInLimitBitrateByPortal:function(e){t=e},getQualityFor:v,getAbandonmentStateFor:function(e){return I[e]?I[e].state:null},setPlaybackQuality:s,checkPlaybackQuality:function(e){if(e&&k&&k[e]){var t=k[e].getStreamInfo(),n=t?t.id:null,i=v(e),r=(0,se.default)(x).create({abrController:S,streamProcessor:k[e],currentValue:i,switchHistory:q[e],droppedFramesHistory:W,useBufferOccupancyABR:g(e)});if(W&&W.push(G,V.getPlaybackQuality()),h(e)){var a=d(e),s=c(e,n),o=w.getMaxQuality(r),l=o.quality;if(void 0!==a&&l<a&&(l=a),s<l&&(l=s),q[e].push({oldValue:i,newValue:l}),l>oe.default.NO_CHANGE&&l!=i)(I[e].state===pe||i<l)&&f(e,i,l,s,o.reason);else if(b.getLogToBrowserConsole()){var u=Q.getCurrentBufferLevel(K.getReadOnlyMetricsFor(e));E("AbrController ("+e+") stay on "+i+"/"+s+" (buffer: "+u+")")}}}},getTopQualityIndexFor:c,setElementSize:_,setWindowResizeEventCalled:function(e){N=e},createAbrRulesCollection:function(){(w=(0,J.default)(x).create({metricsModel:K,dashMetrics:Q,mediaPlayerModel:H,adapter:j})).initialize()},registerStreamType:function(e,t){q[e]=(0,le.default)(x).create(),k[e]=t,I[e]=I[e]||{},I[e].state=pe,X[e]=!1,T.on(ae.default.LOADING_PROGRESS,y,this),e==ee.default.VIDEO&&(T.on(ae.default.QUALITY_CHANGE_RENDERED,n,this),W=(0,ue.default)(x).create(),_()),T.on(ae.default.METRIC_ADDED,i,this),Y=(0,ce.default)(x).create({mediaPlayerModel:H})},unRegisterStreamType:function(e){delete k[e]},setConfig:function(e){e&&(e.streamController&&(M=e.streamController),e.domStorage&&(z=e.domStorage),e.mediaPlayerModel&&(H=e.mediaPlayerModel),e.metricsModel&&(K=e.metricsModel),e.dashMetrics&&(Q=e.dashMetrics),e.dashManifestModel&&($=e.dashManifestModel),e.adapter&&(j=e.adapter),e.manifestModel&&(B=e.manifestModel),e.videoModel&&(V=e.videoModel))},reset:function(){e(),T.off(ae.default.LOADING_PROGRESS,y,this),T.off(ae.default.QUALITY_CHANGE_RENDERED,n,this),T.off(ae.default.METRIC_ADDED,i,this),w&&w.reset()}},E=b.log.bind(S),e(),S}Object.defineProperty(n,"__esModule",{value:!0});var J=i(e(176)),ee=i(e(100)),te=i(e(101)),ne=i(e(210)),ie=i(e(141)),re=i(e(50)),ae=i(e(54)),a=i(e(51)),se=i(e(172)),oe=i(e(173)),le=i(e(174)),ue=i(e(171)),ce=i(e(175)),de=e(230),he=i(e(49)),fe="abandonload",pe="allowload";r.__dashjs_factory_name="AbrController";var s=a.default.getSingletonFactory(r);s.ABANDON_LOAD=fe,s.QUALITY_DEFAULT=0,a.default.updateSingletonFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{100:100,101:101,141:141,171:171,172:172,173:173,174:174,175:175,176:176,210:210,230:230,49:49,50:50,51:51,54:54}],104:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){s.invalidateSelectedIndexes(e.entry)}var t=void 0,n=void 0,i=this.context,r=(0,h.default)(i).getInstance(),a=(0,c.default)(i).getInstance(),s=void 0,o=void 0;return t={reset:function(){s.reset(),o.reset()},initialize:function(e){var t;s.setConfig({dashManifestModel:n}),o.setConfig({dashManifestModel:n}),t=e,s.update(t),o.chooseSelectorFromManifest(t)},resolve:function(e){var t=s.getForPath(e).reduce(function(e,t){var n=o.select(t);return n?(a.isRelative(n.url)?e.url=a.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e):new d.default},new d.default);if(!a.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(s=e.baseURLTreeModel),e.baseURLSelector&&(o=e.baseURLSelector),e.dashManifestModel&&(n=e.dashManifestModel)}},s=(0,l.default)(i).create(),o=(0,u.default)(i).create(),r.on(f.default.SERVICE_LOCATION_BLACKLIST_CHANGED,e,t),t}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(140)),u=i(e(193)),c=i(e(206)),d=i(e(82)),a=i(e(51)),h=i(e(50)),f=i(e(54));r.__dashjs_factory_name="BaseURLController",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{140:140,193:193,206:206,50:50,51:51,54:54,82:82}],105:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){-1===i.indexOf(e)&&(i.push(e),r.trigger(a,{entry:e}))}function n(e){t(e.entry)}e=e||{};var i=[],r=(0,o.default)(this.context).getInstance(),a=e.updateEventName,s=e.addBlacklistEventName;return function(){s&&r.on(s,n,this)}(),{add:t,contains:function(e){return!!(i.length&&e&&e.length)&&-1!==i.indexOf(e)},reset:function(){i=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),o=i(e(50));r.__dashjs_factory_name="BlackListController",n.default=a.default.getClassFactory(r),t.exports=n.default},{50:50,51:51}],106:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){e.fragmentModel===V.getFragmentModel()&&(z("Init fragment finished loading saving to",j+"'s init cache"),re.save(e.chunk),z("Append Init fragment",j," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality),l(e.chunk))}function n(e){if(e.fragmentModel===V.getFragmentModel()){var t=e.chunk,n=t.bytes,i=t.quality,r=V.getRepresentationInfoForQuality(i),a=U.getEventsFor(r.mediaInfo,V),s=U.getEventsFor(r,V);if(a&&0<a.length||s&&0<s.length){var o=function(e,t,n,i){for(var r=Math.max(isNaN(t.startTime)?0:t.startTime,0),a=[],s=[],o=n.concat(i),l=0,u=o.length;l<u;l++)a[o[l].schemeIdUri]=o[l];for(var c=(0,me.default)(P).getInstance().parse(e).getBoxes("emsg"),l=0,u=c.length;l<u;l++){var d=U.getEvent(c[l],a,r);d&&s.push(d)}return s}(n,V.getFragmentModel().getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,quality:i,index:t.index})[0],a,s);V.getEventController().addInbandEvents(o)}l(t)}}function l(e){ne=!0,ee=e,I.append(Z,e),e.mediaInfo.type===le.default.VIDEO&&R.trigger(pe.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function r(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)z("Buffered Range for type:",j,":",e.start(t)," - ",e.end(t))}function i(e){if(Z===e.buffer){if(e.error){if(e.error.code===ce.default.QUOTA_EXCEEDED_ERROR_CODE&&(Y=.8*I.getTotalBufferedTime(Z),z("Quota exceeded for type: "+j+", Critical Buffer: "+Y),0<Y)){var t=Math.max(.2*Y,1),n=Y-t;k.setBufferToKeep(parseFloat(t).toFixed(5)),k.setBufferAheadToKeep(parseFloat(n).toFixed(5))}return void(e.error.code!==ce.default.QUOTA_EXCEEDED_ERROR_CODE&&m()||(z("Clearing playback buffer to overcome quota exceed situation for type: "+j),R.trigger(pe.default.QUOTA_EXCEEDED,{sender:H,criticalBufferLevel:Y}),o()))}ee&&!isNaN(ee.index)&&(K=Math.max(ee.index,K),h());var i=I.getAllRanges(Z);r(i),u(),ne=!1,ee&&R.trigger(pe.default.BYTES_APPENDED,{sender:H,quality:ee.quality,startTime:ee.start,index:ee.index,bufferedRanges:i})}}function a(e){G!==e.newQuality&&j===e.mediaType&&V.getStreamInfo().id===e.streamInfo.id&&(x(V.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),G=e.newQuality)}function s(){q&&(q=!(se=!0),Q=Number.POSITIVE_INFINITY),j!==le.default.FRAGMENTED_TEXT?o():u(),ae=void 0}function o(){var e=function(){var e=[];if(!Z||!Z.buffered||0===Z.buffered.length)return e;var t=$.getTime(),n=Z.buffered.end(Z.buffered.length-1)+.5,i=V.getFragmentModel().getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:.01})[0];if(i){var r={start:0,end:i.startTime-.5},a=V.getFragmentModel().getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:.01})[0];a&&a.startTime!=i.startTime&&(r.end=a.startTime),r.start<r.end&&r.end>Z.buffered.start(0)&&e.push(r);var s={start:i.startTime+i.duration+.5,end:n},o=V.getFragmentModel().getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+.5,threshold:.01})[0];o&&o.startTime!==i.startTime&&(s.start=o.startTime+o.duration+.5),s.start<s.end&&s.start<n&&e.push(s)}else z("getAllRangesWithSafetyFactor for",j,"- No request found in current time position, removing full buffer 0 -",n),e.push({start:0,end:n});return e}();e&&0!==e.length||u(),v(e)}function u(){c(),d()}function c(){$&&(W=I.getBufferLength(Z,function(){var e=$.getTime();if(ae){var t=I.getAllRanges(Z);t&&t.length&&(e=Math.max(t.start(0),ae))}return e}()),R.trigger(pe.default.BUFFER_LEVEL_UPDATED,{sender:H,bufferLevel:W}),f())}function d(){V&&O&&V.getStreamInfo().id===O.getActiveStreamInfo().id&&(D.addBufferState(j,J,V.getScheduleController().getBufferTarget()),D.addBufferLevel(j,new Date,1e3*W))}function h(){Q-1<=K&&!q&&(q=!0,z("[BufferController]["+j+"] checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),R.trigger(pe.default.BUFFERING_COMPLETED,{sender:H,streamInfo:V.getStreamInfo()}))}function f(){"audio"!==j&&"video"!==j||(se&&!q&&$&&$.getTimeToStreamEnd()-W<.5&&(q=!(se=!1),z("[BufferController]["+j+"] checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),R.trigger(pe.default.BUFFERING_COMPLETED,{sender:H,streamInfo:V.getStreamInfo()})),W<.5&&!q?p(ye):(q||W>=k.getStableBufferTime())&&p(_e))}function p(e){J===e||j===le.default.FRAGMENTED_TEXT&&F.getAllTracksAreDisabled()||(J=e,d(),R.trigger(pe.default.BUFFER_LEVEL_STATE_CHANGED,{sender:H,state:e,mediaType:j,streamInfo:V.getStreamInfo()}),R.trigger(e===_e?pe.default.BUFFER_LOADED:pe.default.BUFFER_EMPTY,{mediaType:j}),z(e===_e?"Got enough buffer to start for "+j:"Waiting for more buffer before starting playback for "+j))}function m(){return I.getTotalBufferedTime(Z)<Y}function g(){Z&&j!==le.default.FRAGMENTED_TEXT&&(q||v(function(){var e=[];if(!Z||!Z.buffered||0===Z.buffered.length)return e;var t=$.getTime(),n=Z.buffered,i={start:Math.max(0,t-k.getBufferToKeep()),end:t+k.getBufferAheadToKeep()},r=V.getFragmentModel().getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:.01})[0];if(r&&(i.start=Math.min(r.startTime,i.start),i.end=Math.max(r.startTime+r.duration,i.end)),z("getClearRanges for",j,"- Remove buffer out of ",i.start," - ",i.end),n.start(0)<=i.start){for(var a={start:0,end:i.start},s=0;s<n.length&&n.end(s)<=i.start;s++)a.end=n.end(s);a.start<a.end&&e.push(a)}if(n.end(n.length-1)>=i.end){var o={start:i.end,end:n.end(n.length-1)+.01};o.start<o.end&&e.push(o)}return e}()))}function v(e){e&&Z&&0!==e.length&&(oe.push.apply(oe,e),ie||_())}function _(){if(0!==oe.length){var e=oe.shift();z("Removing",j,"buffer from:",e.start,"to",e.end),ie=!0;var t=$.getTime();t<e.end&&(q=!1,K=0,V.getScheduleController().setSeekTarget(t),U.setIndexHandlerTime(V,t)),I.remove(Z,e.start,e.end,X)}}function y(e){Z===e.buffer&&(z("Removed",j,"buffer from:",e.from,"to",e.to),r(I.getAllRanges(Z)),0===oe.length&&(ie=!1),ie?_():(c(),R.trigger(pe.default.BUFFER_CLEARED,{sender:H,from:e.from,to:e.to,hasEnoughSpaceToAppend:m()})))}function x(e){Z&&Z.timestampOffset!==e&&!isNaN(e)&&(Z.timestampOffset=e)}function b(e){e.sender.getStreamProcessor()!==V||e.error||x(e.currentRepresentation.MSETimeOffset)}function T(e){e.fragmentModel===V.getFragmentModel()&&(Q=e.request.index,h())}function S(e){Z&&e.newMediaInfo.type===j&&e.newMediaInfo.streamInfo.id===V.getStreamInfo().id&&N.getSwitchMode(j)===he.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Z.buffered&&0<Z.buffered.length&&(z("Clearing buffer because track changed - "+(Z.buffered.end(Z.buffered.length-1)+.5)),v([{start:0,end:Z.buffered.end(Z.buffered.length-1)+.5}]),Q=Number.POSITIVE_INFINITY,V.getFragmentModel().abortRequests())}function E(){++te*(k.getWallclockTimeUpdateInterval()/1e3)>=k.getBufferPruningInterval()&&!ne&&(te=0,g())}function w(){f()}function M(e){Z=e}function A(e){X=e}function C(){Y=Number.POSITIVE_INFINITY,J=ye,G=de.default.QUALITY_DEFAULT,Q=Number.POSITIVE_INFINITY,ee=null,se=ie=ne=q=!1,te=W=K=0,oe=[]}e=e||{};var P=this.context,R=(0,fe.default)(P).getInstance(),D=e.metricsModel,k=e.mediaPlayerModel,I=e.sourceBufferController,L=e.errHandler,O=e.streamController,N=e.mediaController,U=e.adapter,F=e.textController,B=e.abrController,$=e.playbackController,j=e.type,V=e.streamProcessor,H=void 0,z=void 0,G=void 0,q=void 0,W=void 0,Y=void 0,X=void 0,K=void 0,Q=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,ae=void 0,se=void 0,oe=void 0;return H={getBufferControllerType:function(){return xe},initialize:function(e){A(e),G=B.getQualityFor(j,V.getStreamInfo()),R.on(pe.default.DATA_UPDATE_COMPLETED,b,this),R.on(pe.default.INIT_FRAGMENT_LOADED,t,this),R.on(pe.default.MEDIA_FRAGMENT_LOADED,n,this),R.on(pe.default.QUALITY_CHANGE_REQUESTED,a,this),R.on(pe.default.STREAM_COMPLETED,T,this),R.on(pe.default.PLAYBACK_PROGRESS,u,this),R.on(pe.default.PLAYBACK_TIME_UPDATED,u,this),R.on(pe.default.PLAYBACK_RATE_CHANGED,w,this),R.on(pe.default.PLAYBACK_SEEKING,s,this),R.on(pe.default.WALLCLOCK_TIME_UPDATED,E,this),R.on(pe.default.CURRENT_TRACK_CHANGED,S,this,fe.default.EVENT_PRIORITY_HIGH),R.on(pe.default.SOURCEBUFFER_APPEND_COMPLETED,i,this),R.on(pe.default.SOURCEBUFFER_REMOVE_COMPLETED,y,this)},createBuffer:function(e){if(!e||!X||!V)return null;var t=null;try{(t=I.createSourceBuffer(X,e))&&t.hasOwnProperty(le.default.INITIALIZE)&&t.initialize(j,V)}catch(e){L.mediaSourceError("Error creating "+j+" source buffer.")}return M(t),x(V.getRepresentationInfoForQuality(G).MSETimeOffset),t},getType:function(){return j},getStreamProcessor:function(){return V},setSeekStartTime:function(e){ae=e},getBuffer:function(){return Z},setBuffer:M,getBufferLevel:function(){return W},setMediaSource:A,getMediaSource:function(){return X},getIsBufferingCompleted:function(){return q},switchInitData:function(e,t){var n=re.extract(e,t);n?(z("Append Init fragment",j," with representationId:",n.representationId," and quality:",n.quality),l(n)):R.trigger(pe.default.INIT_REQUESTED,{sender:H})},getIsPruningInProgress:function(){return ie},reset:function(e){R.off(pe.default.DATA_UPDATE_COMPLETED,b,this),R.off(pe.default.QUALITY_CHANGE_REQUESTED,a,this),R.off(pe.default.INIT_FRAGMENT_LOADED,t,this),R.off(pe.default.MEDIA_FRAGMENT_LOADED,n,this),R.off(pe.default.STREAM_COMPLETED,T,this),R.off(pe.default.CURRENT_TRACK_CHANGED,S,this),R.off(pe.default.PLAYBACK_PROGRESS,u,this),R.off(pe.default.PLAYBACK_TIME_UPDATED,u,this),R.off(pe.default.PLAYBACK_RATE_CHANGED,w,this),R.off(pe.default.PLAYBACK_SEEKING,s,this),R.off(pe.default.WALLCLOCK_TIME_UPDATED,E,this),R.off(pe.default.SOURCEBUFFER_APPEND_COMPLETED,i,this),R.off(pe.default.SOURCEBUFFER_REMOVE_COMPLETED,y,this),C(),e||(I.abort(X,Z),I.removeSourceBuffer(X,Z)),Z=null}},z=(0,ge.default)(P).getInstance().log.bind(H),re=(0,ve.default)(P).getInstance(),C(),H}Object.defineProperty(n,"__esModule",{value:!0});var le=i(e(100)),ue=i(e(141)),ce=i(e(113)),de=i(e(103)),he=i(e(109)),fe=i(e(50)),pe=i(e(54)),me=i(e(194)),a=i(e(51)),ge=i(e(49)),ve=i(e(200)),_e="bufferLoaded",ye="bufferStalled",xe="BufferController";r.__dashjs_factory_name=xe;var s=a.default.getClassFactory(r);s.BUFFER_LOADED=_e,s.BUFFER_EMPTY=ye,a.default.updateClassFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{100:100,103:103,109:109,113:113,141:141,194:194,200:200,49:49,50:50,51:51,54:54}],107:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){b=!1,h={},f={},p={},m=null,v=(g=100)/1e3}function o(){if(!_||!y||!x)throw new Error("setConfig function has to be called previously")}function t(){null!==m&&b&&(clearInterval(m),m=null,b=!1)}function i(e){if(e.eventStream.value==u){var t,n=e.eventStream.timescale||1,i=e.presentationTime/n;t=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/n,c("Manifest validity changed: Valid until: "+i+"; remaining duration: "+t),d.trigger(E.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:i,newDuration:t,newManifestValidAfter:NaN})}}function n(){r(f),r(h),function(){if(p)for(var e=x.getTime(),t=Object.keys(p),n=0;n<t.length;n++){var i=t[n],r=p[i];null!==r&&(r.duration+r.presentationTime)/r.eventStream.timescale<e&&(c("Remove Event "+i+" at time "+e),r=null,delete p[i])}}()}function r(e){var t,n=x.getTime();if(e)for(var i=Object.keys(e),r=0;r<i.length;r++){var a=i[r],s=e[a];void 0!==s&&(0==(t=s.presentationTime/s.eventStream.timescale)||t<=n&&n<t+v)&&(c("Start Event "+a+" at "+n),0<s.duration&&(p[a]=s),s.eventStream.schemeIdUri==l&&s.eventStream.value==u?0===s.duration&&0===s.presentationTimeDelta||(o(),y.refreshManifest()):d.trigger(s.eventStream.schemeIdUri,{event:s}),delete e[a])}}var a,l="urn:mpeg:dash:event:2012",u=1,s=this.context,c=(0,T.default)(s).getInstance().log,d=(0,S.default)(s).getInstance(),h=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0,_=void 0,y=void 0,x=void 0,b=void 0;return a={addInlineEvents:function(e){if(o(),h={},e)for(var t=0;t<e.length;t++){var n=e[t];h[n.id]=n,c("Add inline event with id "+n.id)}c("Added "+e.length+" inline events")},addInbandEvents:function(e){o();for(var t=0;t<e.length;t++){var n=e[t];n.id in f?c("Repeated event with id "+n.id):(n.eventStream.schemeIdUri===l&&void 0===f[n.id]&&i(n),f[n.id]=n,c("Add inband event with id "+n.id))}},stop:t,start:function(){o(),c("Start Event Controller"),b||isNaN(g)||(b=!0,m=setInterval(n,g))},setConfig:function(e){e&&(e.manifestModel&&(_=e.manifestModel),e.manifestUpdater&&(y=e.manifestUpdater),e.playbackController&&(x=e.playbackController))},reset:function(){t(),e()}},e(),a}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),T=i(e(49)),S=i(e(50)),E=i(e(54));r.__dashjs_factory_name="EventController",n.default=a.default.getClassFactory(r),t.exports=n.default},{49:49,50:50,51:51,54:54}],108:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function c(e){return e&&e.type&&e.type===l.HTTPRequest.INIT_SEGMENT_TYPE}function t(){for(var e in f)f[e].reset();f={}}function n(e){if(f[e.request.mediaType]===e.sender){var t=e.request,n=e.response,i=c(t),r=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==p.default.AUDIO&&e.request.mediaType!==p.default.VIDEO||h.trigger(y.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),!n||!r)return void d("No "+t.mediaType+" bytes to push or stream is inactive.");var a=(s=n,o=t,l=r.id,(u=new m.default).streamId=l,u.mediaInfo=o.mediaInfo,u.segmentType=o.type,u.start=o.startTime,u.duration=o.duration,u.end=u.start+u.duration,u.bytes=s,u.index=o.index,u.quality=o.quality,u.representationId=o.representationId,u);h.trigger(i?y.default.INIT_FRAGMENT_LOADED:y.default.MEDIA_FRAGMENT_LOADED,{chunk:a,fragmentModel:e.sender})}var s,o,l,u}e=e||{};var i=this.context,d=(0,x.default)(i).getInstance().log,h=(0,_.default)(i).getInstance(),r=e.errHandler,a=e.mediaPlayerModel,s=e.metricsModel,o=void 0,f=void 0;return o={getModel:function(e){var t=f[e];return t||(t=(0,u.default)(i).create({metricsModel:s,fragmentLoader:(0,g.default)(i).create({metricsModel:s,mediaPlayerModel:a,errHandler:r,requestModifier:(0,v.default)(i).getInstance()})}),f[e]=t),t},isInitializationRequest:c,reset:function(){h.off(y.default.FRAGMENT_LOADING_COMPLETED,n,this),t()}},t(),h.on(y.default.FRAGMENT_LOADING_COMPLETED,n,o),o}Object.defineProperty(n,"__esModule",{value:!0});var p=i(e(100)),l=e(230),m=i(e(212)),u=i(e(141)),g=i(e(90)),v=i(e(204)),_=i(e(50)),y=i(e(54)),a=i(e(51)),x=i(e(49));r.__dashjs_factory_name="FragmentController",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,141:141,204:204,212:212,230:230,49:49,50:50,51:51,54:54,90:90}],109:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function a(e,t){if(!e||!t)return[];var n=t.id;return v[n]&&v[n][e]?v[n][e].list:[]}function l(e,t){return!e||!t||t&&!v[t.id]?null:v[t.id][e].current}function s(e){if(e){var t=e.type,n=e.streamInfo,i=n.id,r=l(t,n);if(v[i]&&v[i][t]&&(!r||!h(e,r))){v[i][t].current=e,r&&g.trigger(S.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:r,newMediaInfo:e,switchMode:_[t]});var a=(o={lang:(s=e).lang,viewpoint:s.viewpoint,roles:s.roles,accessibility:s.accessibility,audioChannelConfiguration:s.audioChannelConfiguration}).lang||o.viewpoint||o.role&&0<o.role.length||o.accessibility&&0<o.accessibility.length||o.audioChannelConfiguration&&0<o.audioChannelConfiguration.length?o:null;a&&v[i][t].storeLastSettings&&(a.roles&&(a.role=a.roles[0],delete a.roles),a.accessibility&&(a.accessibility=a.accessibility[0]),a.audioChannelConfiguration&&(a.audioChannelConfiguration=a.audioChannelConfiguration[0]),y.setSavedMediaSettings(t,a))}}var s,o}function o(e,t){e&&t&&(i[e]=t)}function u(e){return e?i[e]:null}function c(){return r||R}function d(e){return e===T.default.AUDIO||e===T.default.VIDEO||e===T.default.TEXT||e===T.default.FRAGMENTED_TEXT||e===T.default.IMAGE}function h(e,t){var n=e.id===t.id,i=e.viewpoint===t.viewpoint,r=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),s=e.accessibility.toString()===t.accessibility.toString(),o=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&i&&r&&a&&s&&o}function e(){v={},i={audio:null,video:null},_={audio:A,video:M}}function f(t,e){var n=!t.lang||t.lang===e.lang,i=!t.viewpoint||t.viewpoint===e.viewpoint,r=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],a=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],s=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return n&&i&&r&&a&&s}function p(e){var t=c(),n=[],i=function(e){var t=0,n=[],i=void 0;return e.forEach(function(e){i=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t<i?(t=i,n=[e]):i===t&&n.push(e)}),n},r=function(e){var t=0,n=[],i=void 0;return e.forEach(function(e){i=e.representationCount,t<i?(t=i,n=[e]):i===t&&n.push(e)}),n};switch(t){case C:1<(n=i(e)).length&&(n=r(n));break;case P:1<(n=r(e)).length&&(n=i(e));break;default:m("track selection mode is not supported: "+t)}return n[0]}var t,n=this.context,m=(0,w.default)(n).getInstance().log,g=(0,E.default)(n).getInstance(),v=void 0,i=void 0,r=void 0,_=void 0,y=void 0,x=[A,M],b=[C,P];return t={checkInitialMediaSettingsForType:function(e,t){var n=u(e),i=a(e,t),r=[];e!==T.default.FRAGMENTED_TEXT?(n||o(e,n=y.getSavedMediaSettings(e)),i&&0!==i.length&&(n&&i.forEach(function(e){f(n,e)&&r.push(e)}),s(0===r.length?p(i):1<r.length?p(r):r[0]))):s(i[0])},addTrack:function(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,i=u(t);if(e&&d(t)){v[n]=v[n]||{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}};for(var r=v[n][t].list.length,a=0;a<r;a++)if(h(v[n][t].list[a],e))return;v[n][t].list.push(e),i&&f(i,e)&&!l(t,e.streamInfo)&&s(e)}},getTracksFor:a,getCurrentTrackFor:l,isCurrentTrack:function(e){var t=e.type,n=e.streamInfo.id;return v[n]&&v[n][t]&&h(v[n][t].current,e)},setTrack:s,setInitialSettings:o,getInitialSettings:u,setSwitchMode:function(e,t){-1!==x.indexOf(t)?_[e]=t:m("track switch mode is not supported: "+t)},getSwitchMode:function(e){return _[e]},setSelectionModeForInitialTrack:function(e){-1!==b.indexOf(e)?r=e:m("track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:c,isMultiTrackSupportedByType:d,isTracksEqual:h,setConfig:function(e){e&&(e.errHandler&&e.errHandler,e.domStorage&&(y=e.domStorage))},reset:e},e(),t}Object.defineProperty(n,"__esModule",{value:!0});var T=i(e(100)),S=i(e(54)),E=i(e(50)),a=i(e(51)),w=i(e(49)),M="neverReplace",A="alwaysReplace",C="highestBitrate",P="widestRange",R=C;r.__dashjs_factory_name="MediaController";var s=a.default.getSingletonFactory(r);s.TRACK_SWITCH_MODE_NEVER_REPLACE=M,s.TRACK_SWITCH_MODE_ALWAYS_REPLACE=A,s.TRACK_SELECTION_MODE_HIGHEST_BITRATE=C,s.TRACK_SELECTION_MODE_WIDEST_RANGE=P,s.DEFAULT_INIT_TRACK_SELECTION_MODE=R,a.default.updateSingletonFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{100:100,49:49,50:50,51:51,54:54}],110:[function(e,t,n){"use strict";function i(){return{createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,n){"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){var t=e.sourceBuffers,n=t.length;if("open"===e.readyState){for(var i=0;i<n;i++){if(t[i].updating)return;if(0===t[i].buffered.length)return}e.endOfStream()}}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="MediaSourceController",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{51:51}],111:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function t(e){!X&&e.fromStreamInfo&&void 0!==G[e.fromStreamInfo.id]&&(delete W[e.fromStreamInfo.id],delete G[e.fromStreamInfo.id])}function n(){var e=f(!0),t=X?e-Y.start:0;return parseFloat((e+(Y.duration-t)-a()).toFixed(5))}function i(){V&&V.getElement()?V.play():Q=!0}function r(){return V?V.isPaused():null}function e(){V&&V.pause()}function o(){return V?V.isSeeking():null}function l(e){V&&(O.trigger(ie.default.PLAYBACK_SEEK_ASKED),L("Requesting seek to time: "+e),V.setCurrentTime(e))}function a(){return V?V.getTime():null}function s(){return V?V.getPlaybackRate():null}function u(){return V?V.getEnded():null}function c(){return X}function d(){H=NaN,z=null,Q=!1,G={},q=0,W={},V&&(O.off(ie.default.DATA_UPDATE_COMPLETED,v,this),O.off(ie.default.BUFFER_LEVEL_STATE_CHANGED,D,this),O.off(ie.default.BYTES_APPENDED,R,this),m(),V.removeEventListener("canplay",_),V.removeEventListener("play",y),V.removeEventListener("playing",x),V.removeEventListener("pause",b),V.removeEventListener("error",P),V.removeEventListener("seeking",T),V.removeEventListener("seeked",S),V.removeEventListener("timeupdate",E),V.removeEventListener("progress",w),V.removeEventListener("ratechange",M),V.removeEventListener("loadedmetadata",A),V.removeEventListener("ended",C)),X=Y=V=null}function h(){var e=(0,te.default)(I).getInstance().getURIFragmentData(),t=void 0;if(e){t={};var n=parseInt(e.r,10);0<=n&&Y&&n<Y.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.floor(Date.now()/1e3)-Y.manifestInfo.DVRWindowSize+n),t.fragS=parseInt(e.s,10),t.fragT=parseInt(e.t,10)}return t}function f(e,t){var n,i=void 0,r=h();if(n=r?e?Y.start:isNaN(r.fragS)?r.fragT:r.fragS:0,X)isNaN(n)||((i=n-Y.manifestInfo.availableFrom.getTime()/1e3)>H||i<(isNaN(t)?NaN:t-Y.manifestInfo.DVRWindowSize))&&(i=null),i=i||H;else if(!isNaN(n)&&n<Math.max(Y.manifestInfo.duration,Y.duration)&&0<=n)i=n;else{var a=G[Y.id];i=void 0!==a?Math.max(void 0!==a.audio?a.audio:0,void 0!==a.video?a.video:0,Y.start):Y.start}return i}function p(){if(null===z){z=setInterval(function(){var e;O.trigger(ie.default.WALLCLOCK_TIME_UPDATED,{isDynamic:X,time:new Date}),c()&&r()&&(e=Date.now(),(!Z||Z+500<e)&&(Z=e,E()))},K.getWallclockTimeUpdateInterval())}}function m(){clearInterval(z),z=null}function g(){if(!r()&&X&&0!==V.getReadyState()){var e=a(),t=function(e){var t=U.getReadOnlyMetricsFor(J.default.VIDEO)||U.getReadOnlyMetricsFor(J.default.AUDIO),n=F.getCurrentDVRInfo(t),i=n?n.range:null,r=void 0;if(!i)return NaN;if(e>i.end)r=Math.max(i.end-2*Y.manifestInfo.minBufferTime,i.start);else{if(!(e+.25<i.start))return e;r=i.start}return r}(e);!isNaN(t)&&t!==e&&l(t)}}function v(e){if(!e.error){var t=j.convertDataToRepresentationInfo(e.currentRepresentation).mediaInfo.streamInfo;Y.id===t.id&&(Y=t,g())}}function _(){O.trigger(ie.default.CAN_PLAY)}function y(){L("Native video element event: play"),g(),p(),O.trigger(ie.default.PLAYBACK_STARTED,{startTime:a()})}function x(){L("Native video element event: playing"),O.trigger(ie.default.PLAYBACK_PLAYING,{playingTime:a()})}function b(){L("Native video element event: pause"),O.trigger(ie.default.PLAYBACK_PAUSED,{ended:u()})}function T(){var e=a();L("Seeking to: "+e),p(),O.trigger(ie.default.PLAYBACK_SEEKING,{seekTime:e})}function S(){L("Native video element event: seeked"),O.trigger(ie.default.PLAYBACK_SEEKED)}function E(){var e=a();e,O.trigger(ie.default.PLAYBACK_TIME_UPDATED,{timeToEnd:n(),time:e})}function w(){O.trigger(ie.default.PLAYBACK_PROGRESS)}function M(){var e=s();L("Native video element event: ratechange: ",e),O.trigger(ie.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function A(){L("Native video element event: loadedmetadata"),O.trigger(ie.default.PLAYBACK_METADATA_LOADED),p()}function C(){L("Native video element event: ended"),e(),m(),O.trigger(ie.default.PLAYBACK_ENDED)}function P(e){var t=e.target||e.srcElement;O.trigger(ie.default.PLAYBACK_ERROR,{error:t.error})}function R(e){var t=void 0,n=void 0,i=e.bufferedRanges;if(i&&i.length&&(!G[Y.id]||!0!==G[Y.id].started)){var r=e.sender.getType();void 0===W[Y.id]&&(W[Y.id]=[]),W[Y.id][r]=i,void 0===G[Y.id]&&(G[Y.id]=[],G[Y.id].started=!1),void 0===G[Y.id][r]&&(G[Y.id][r]=Math.max(i.start(0),Y.start));var a=N.isVideoTrackPresent(),s=N.isAudioTrackPresent();n=f(!1),s&&a?isNaN(G[Y.id].audio)||isNaN(G[Y.id].video)||(i=G[Y.id].audio<G[Y.id].video?(t=G[Y.id].video>n?G[Y.id].video:n,W[Y.id].audio):(t=G[Y.id].audio>n?G[Y.id].audio:n,W[Y.id].video),function(e,t){if(t&&0<t.length)for(var n=0,i=t.length;n<i;n++)if(e>=t.start(n)&&e<t.end(n))return!0;return!1}(t,i)&&(o()||l(t),G[Y.id].started=!0)):G[Y.id][r]&&(t=G[Y.id][r]>n?G[Y.id][r]:n,o()||l(t),G[Y.id].started=!0)}}function D(e){e.streamInfo.id===Y.id&&V.setStallState(e.mediaType,e.state===ee.default.BUFFER_EMPTY)}var k,I=this.context,L=(0,re.default)(I).getInstance().log,O=(0,ne.default)(I).getInstance(),N=void 0,U=void 0,F=void 0,B=void 0,$=void 0,j=void 0,V=void 0,H=void 0,z=void 0,G=void 0,q=void 0,W=void 0,Y=void 0,X=void 0,K=void 0,Q=void 0,Z=void 0;return k={initialize:function(e){Y=e,V.addEventListener("canplay",_),V.addEventListener("play",y),V.addEventListener("playing",x),V.addEventListener("pause",b),V.addEventListener("error",P),V.addEventListener("seeking",T),V.addEventListener("seeked",S),V.addEventListener("timeupdate",E),V.addEventListener("progress",w),V.addEventListener("ratechange",M),V.addEventListener("loadedmetadata",A),V.addEventListener("ended",C),X=Y.manifestInfo.isDynamic,H=Y.start,O.on(ie.default.DATA_UPDATE_COMPLETED,v,this),O.on(ie.default.BYTES_APPENDED,R,this),O.on(ie.default.BUFFER_LEVEL_STATE_CHANGED,D,this),O.on(ie.default.PERIOD_SWITCH_STARTED,t,this),Q&&(Q=!1,i())},setConfig:function(e){e&&(e.streamController&&(N=e.streamController),e.metricsModel&&(U=e.metricsModel),e.dashMetrics&&(F=e.dashMetrics),e.manifestModel&&(B=e.manifestModel),e.dashManifestModel&&($=e.dashManifestModel),e.mediaPlayerModel&&(K=e.mediaPlayerModel),e.adapter&&(j=e.adapter),e.videoModel&&(V=e.videoModel))},getStartTimeFromUriParameters:h,getStreamStartTime:f,getTimeToStreamEnd:n,getTime:a,getPlaybackRate:s,getPlayedRanges:function(){return V?V.getPlayedRanges():null},getEnded:u,getIsDynamic:c,getStreamController:function(){return N},setLiveStartTime:function(e){H=e},getLiveStartTime:function(){return H},computeLiveDelay:function(e,t){var n,i=$.getMpd(B.getValue()),r=void 0;if(n=K.getUseSuggestedPresentationDelay()&&i.hasOwnProperty(J.default.SUGGESTED_PRESENTATION_DELAY)?i.suggestedPresentationDelay:K.getLiveDelay()?K.getLiveDelay():isNaN(e)?2*Y.manifestInfo.minBufferTime:e*K.getLiveDelayFragmentCount(),0<t){var a=Math.max(t-10,t/2);r=Math.min(n,a)}else r=n;return q=r},getLiveDelay:function(){return q},play:i,isPaused:r,pause:e,isSeeking:o,seek:l,reset:d},d(),k}Object.defineProperty(n,"__esModule",{value:!0});var J=i(e(100)),ee=i(e(106)),te=i(e(145)),ne=i(e(50)),ie=i(e(54)),a=i(e(51)),re=i(e(49));r.__dashjs_factory_name="PlaybackController",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{100:100,106:106,145:145,49:49,50:50,51:51,54:54}],112:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function i(){X&&!G.isBufferingCompleted()&&(P(),Q=!1,K&&(K=!1),r(0),W("Schedule controller starting for "+z))}function t(){Q||(Q=!0,clearTimeout(ie),W("Schedule controller stopping for "+z))}function n(){if(Q||te||!G.getBufferController()||$.isPaused()&&!oe)W("ScheduleController "+z+" - schedule stop!");else{!function(){var e=1.5*X.fragmentDuration,t=Y.getRequests({state:ye.default.FRAGMENT_MODEL_EXECUTED,time:$.getTime()+e,threshold:0})[0];if(t&&-1===de.indexOf(t)&&!N.getIsTextTrack(z)){var n=F.getFastSwitchEnabled(),i=G.getBufferLevel(),r=B.getAbandonmentStateFor(z);n&&t.quality<X.quality&&e<=i&&r!==me.default.ABANDON_LOAD?(o(t),W("Reloading outdated fragment at index: ",t.index)):t.quality>X.quality&&M($.getTime()+G.getBufferLevel())}}();var e=0<de.length,i=G.getStreamInfo();if(he||e||function(e,t){ue[t]=ue[t]||{};var n=B.getTopQualityIndexFor(e,t);return ue[t][e]!=n&&(W("Top quality "+e+" index has changed from "+ue[t][e]+" to "+n),ue[t][e]=n,!0)}(X.mediaInfo.type,i.id)||ae.execute(G,z,j.isVideoTrackPresent())){te=!0,e||he||B.checkPlaybackQuality(z),function(){W("ScheduleController - "+z+" - getNextFragment");var e=G.getFragmentController();if(he)W("ScheduleController - "+z+" - switch track has been asked, get init request for "+z+" with representationid = "+X.id),G.switchInitData(X.id),ce=X.quality,he=!1;else if(X.quality!==ce)W("ScheduleController - "+z+" - quality has changed, get init request for representationid = "+X.id),ce=X.quality,G.switchInitData(X.id);else{var t=de.shift();if(e.isInitializationRequest(t))G.switchInitData(t.representationId);else{var n=void 0;G.getBufferController().getIsPruningInProgress()||!(n=se.execute(G,t))&&i.manifestInfo&&i.manifestInfo.isDynamic&&W("getNextFragment - "+z+" - Playing at the bleeding live edge and frag is not available yet"),n?(W("ScheduleController - "+z+" - getNextFragment - request is "+n.url),Y.executeRequest(n)):(te=!1,r(500))}}}()}else r(500)}}function r(e){clearTimeout(ie),ie=setTimeout(n,e)}function a(e){e.sender&&e.sender.getStreamProcessor()===G&&s(X.quality)}function s(e){var t=L.getInitRequest(G,e);t&&(te=!0,Y.executeRequest(t))}function o(e){de.push(e)}function l(e){if(z===e.mediaType&&G.getStreamInfo().id===e.streamInfo.id){if(null===(X=G.getRepresentationInfoForQuality(e.newQuality))||void 0===X)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");C(new Date,pe.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),P()}}function u(e){if($&&Y){var t=Y.getRequests({state:ye.default.FRAGMENT_MODEL_EXECUTED,time:$.getTime(),threshold:0})[0];t&&$.getTime()>=t.startTime&&(t.quality===le.quality&&t.adaptationIndex===le.adaptationIndex||!e||k.trigger(be.default.QUALITY_CHANGE_RENDERED,{mediaType:z,oldQuality:le.quality,newQuality:t.quality}),le={quality:t.quality,adaptationIndex:t.adaptationIndex})}}function c(e){e.error||e.sender.getStreamProcessor()!==G||(X=L.convertDataToRepresentationInfo(e.currentRepresentation))}function d(e){e.error||G.getStreamInfo().id!==e.streamInfo.id||(X=G.getCurrentRepresentationInfo(),K&&($.getIsDynamic()?(U.setTimeSyncCompleted(!0),function(){var e=G.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),n=X.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,i=t-$.computeLiveDelay(X.fragmentDuration,n),r=L.getFragmentRequestForTime(G,X,i,{ignoreIsFinished:!0});$.setLiveStartTime(r.startTime),(re=$.getStreamStartTime(!1,t))>X.mediaInfo.streamInfo.start+X.mediaInfo.streamInfo.duration&&$.seek(re);var a=O.getCurrentManifestUpdate(I.getMetricsFor(fe.default.STREAM));I.updateManifestUpdateInfo(a,{currentTime:re,presentationStartTime:t,latency:t-re,clientTimeOffset:U.getClientTimeOffset()})}}()):(re=$.getStreamStartTime(!1),G.getBufferController().setSeekStartTime(re))),Q&&i())}function h(e){e.fragmentModel===Y&&(t(),te=!1,W("[ScheduleController] Stream is complete"))}function f(e){e.sender===Y&&(W("[ScheduleController] onFragmentLoadingCompleted for",z),N.getIsTextTrack(z)&&(te=!1),e.error&&e.request.serviceLocation&&!Q&&(o(e.request),te=!1,r(0)))}function p(){u(!0)}function m(e){e.sender.getStreamProcessor()===G&&(te=!1,r(0))}function g(e){e.streamProcessor===G&&(W("[ScheduleController]["+z+"] Request "+e.request.url+" has been aborted"),o(e.request),te=!1,r(0))}function v(e){e.sender.getStreamProcessor()===G&&t()}function _(e){e.sender.getStreamProcessor()===G&&(G.getFragmentModel().syncExecutedRequestsWithBufferedRange(G.getBufferController().getBuffer().buffered,G.getStreamInfo().duration),e.hasEnoughSpaceToAppend&&Q&&i())}function y(e){e.sender.getStreamProcessor()!==G||e.state!==ge.default.BUFFER_EMPTY||$.isSeeking()||(W("Buffer is empty! Stalling!"),C(new Date,pe.PlayListTrace.REBUFFERING_REASON))}function x(e){e.sender.getStreamProcessor()===G&&(t(),te=!1)}function b(){Y.abortRequests(),t()}function T(e){e.sender.getStreamProcessor()===G&&s(e.index)}function S(){!Q&&oe||i()}function E(e){re=e.seekTime,A(0),Q&&i();var t=O.getCurrentManifestUpdate(I.getMetricsFor(fe.default.STREAM)),n=X.DVRWindow&&$?X.DVRWindow.end-$.getTime():NaN;I.updateManifestUpdateInfo(t,{latency:n}),te||r(0)}function w(e){J&&(J.playbackspeed=e.playbackRate.toString())}function M(e){re=e}function A(e){ne=e}function C(e,t){if(Z&&!1===ee){var n=J.start,i=e.getTime()-n.getTime();J.duration=i,J.stopreason=t,Z.trace.push(J),ee=!0}}function P(){Z&&!0===ee&&X&&(ee=!1,(J=new pe.PlayListTrace).representationid=X.id,J.start=new Date,J.mstart=1e3*$.getTime(),J.playbackspeed=$.getPlaybackRate().toString())}function R(){te=!1,ne=0,le={quality:ce=re=NaN,adaptationIndex:NaN},ue={},de=[],he=Q=K=ee=!(J=Z=null)}e=e||{};var D=this.context,k=(0,xe.default)(D).getInstance(),I=e.metricsModel,L=e.adapter,O=e.dashMetrics,N=e.dashManifestModel,U=e.timelineConverter,F=e.mediaPlayerModel,B=e.abrController,$=e.playbackController,j=e.streamController,V=e.textController,H=e.sourceBufferController,z=e.type,G=e.streamProcessor,q=void 0,W=void 0,Y=void 0,X=void 0,K=void 0,Q=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,ae=void 0,se=void 0,oe=void 0,le=void 0,ue=void 0,ce=void 0,de=void 0,he=void 0;return q={initialize:function(){Y=G.getFragmentModel(),oe=F.getScheduleWhilePaused(),ae=(0,ve.default)(D).create({abrController:B,dashMetrics:O,metricsModel:I,mediaPlayerModel:F,textController:V}),se=(0,_e.default)(D).create({adapter:L,sourceBufferController:H,textController:V}),N.getIsTextTrack(z)&&k.on(be.default.TIMED_TEXT_REQUESTED,T,this),k.on(be.default.QUALITY_CHANGE_REQUESTED,l,this),k.on(be.default.DATA_UPDATE_STARTED,v,this),k.on(be.default.DATA_UPDATE_COMPLETED,c,this),k.on(be.default.FRAGMENT_LOADING_COMPLETED,f,this),k.on(be.default.STREAM_COMPLETED,h,this),k.on(be.default.STREAM_INITIALIZED,d,this),k.on(be.default.BUFFER_LEVEL_STATE_CHANGED,y,this),k.on(be.default.BUFFER_CLEARED,_,this),k.on(be.default.BYTES_APPENDED,m,this),k.on(be.default.INIT_REQUESTED,a,this),k.on(be.default.QUOTA_EXCEEDED,x,this),k.on(be.default.PLAYBACK_SEEKING,E,this),k.on(be.default.PLAYBACK_STARTED,S,this),k.on(be.default.PLAYBACK_RATE_CHANGED,w,this),k.on(be.default.PLAYBACK_TIME_UPDATED,p,this),k.on(be.default.URL_RESOLUTION_FAILED,b,this),k.on(be.default.FRAGMENT_LOADING_ABANDONED,g,this)},getType:function(){return z},getSeekTarget:function(){return re},setSeekTarget:M,setTimeToLoadDelay:A,getTimeToLoadDelay:function(){return ne},replaceRequest:o,switchTrackAsked:function(){he=!0},isStarted:function(){return!1===Q},start:i,stop:t,reset:function(){k.off(be.default.DATA_UPDATE_STARTED,v,this),k.off(be.default.DATA_UPDATE_COMPLETED,c,this),k.off(be.default.BUFFER_LEVEL_STATE_CHANGED,y,this),k.off(be.default.QUALITY_CHANGE_REQUESTED,l,this),k.off(be.default.FRAGMENT_LOADING_COMPLETED,f,this),k.off(be.default.STREAM_COMPLETED,h,this),k.off(be.default.STREAM_INITIALIZED,d,this),k.off(be.default.QUOTA_EXCEEDED,x,this),k.off(be.default.BYTES_APPENDED,m,this),k.off(be.default.BUFFER_CLEARED,_,this),k.off(be.default.INIT_REQUESTED,a,this),k.off(be.default.PLAYBACK_RATE_CHANGED,w,this),k.off(be.default.PLAYBACK_SEEKING,E,this),k.off(be.default.PLAYBACK_STARTED,S,this),k.off(be.default.PLAYBACK_TIME_UPDATED,p,this),k.off(be.default.URL_RESOLUTION_FAILED,b,this),k.off(be.default.FRAGMENT_LOADING_ABANDONED,g,this),N.getIsTextTrack(z)&&k.off(be.default.TIMED_TEXT_REQUESTED,T,this),t(),u(!1),R()},setPlayList:function(e){Z=e},getBufferTarget:function(){return ae.getBufferTarget(G,z,j.isVideoTrackPresent())},finalisePlayList:function(e,t){C(e,t),Z=null}},W=(0,Te.default)(D).getInstance().log.bind(q),R(),q}Object.defineProperty(n,"__esModule",{value:!0});var fe=i(e(100)),pe=e(232),me=i(e(103)),ge=i(e(106)),ve=i(e(183)),_e=i(e(184)),ye=i(e(141)),xe=i(e(50)),be=i(e(54)),a=i(e(51)),Te=i(e(49));r.__dashjs_factory_name="ScheduleController",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,103:103,106:106,141:141,183:183,184:184,232:232,49:49,50:50,51:51,54:54}],113:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function r(e,t,n){var i=null,r=0,a=0,s=null,o=null,l=0,u=void 0,c=void 0,d=n||.15;try{i=e.buffered}catch(e){return null}if(null!=i){for(c=0,u=i.length;c<u;c++)if(r=i.start(c),a=i.end(c),null===s)l=Math.abs(r-t),r<=t&&t<a?(s=r,o=a):l<=d&&(s=r,o=a);else{if(!((l=r-o)<=d))break;o=a}if(null!==s)return{start:s,end:o}}return null}function f(e){try{return e.buffered}catch(e){return null}}function a(t,n){var i=void 0,r=function(){t.updating||(clearInterval(i),n())};if(t.updating)if("function"==typeof t.addEventListener)try{t.addEventListener("updateend",function e(){t.updating||(t.removeEventListener("updateend",e,!1),n())},!1)}catch(e){i=setInterval(r,50)}else i=setInterval(r,50);else n()}var t=this.context,s=(0,u.default)(t).getInstance(),o=e.textController;return{append:function(t,e){if(t&&e){var n=e.bytes,i="append"in t?"append":"appendBuffer"in t?"appendBuffer":null,r="Object"===Object.prototype.toString.call(t).slice(8,-1);i&&a(t,function(){try{r?t[i](n,e):t[i](n),a(t,function(){s.trigger(c.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:t,bytes:n})})}catch(e){s.trigger(c.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:t,bytes:n,error:new l.default(e.code,e.message,null)})}})}else s.trigger(c.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:null,bytes:null,error:new l.default(1,"buffer or chunk is not defined",null)})},remove:function(t,n,i,e){t?a(t,function(){try{0<=n&&n<i&&"ended"!==e.readyState&&t.remove(n,i),a(t,function(){s.trigger(c.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:t,from:n,to:i})})}catch(e){s.trigger(c.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:t,from:n,to:i,error:new l.default(e.code,e.message,null)})}}):s.trigger(c.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:t,from:n,to:i,error:new l.default(2,"buffer is not defined",null)})},abort:function(e,t){try{"open"===e.readyState?t.abort():t.resetEmbedded&&"ended"===e.readyState&&t.abort()}catch(e){}},createSourceBuffer:function(e,t){var n=t.codec,i=null;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");i=e.addSourceBuffer(n)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;i=o.getTextSourceBuffer()}return i},removeSourceBuffer:function(e,t){try{e.removeSourceBuffer(t)}catch(e){}},getBufferRange:r,getAllRanges:f,getTotalBufferedTime:function(e){var t,n=f(e),i=0,r=void 0;if(!n)return i;for(r=0,t=n.length;r<t;r++)i+=n.end(r)-n.start(r);return i},getBufferLength:function(e,t,n){var i;return null===(i=r(e,t,n))?0:i.end-t},getRangeDifference:function(e,t){if(!t)return null;var n=f(t),i=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=void 0,u=void 0,c=void 0;if(!n)return null;for(var d=0,h=n.length;d<h;d++){if(o=e.length>d?{start:e.start(d),end:e.end(d)}:null,i=n.start(d),r=n.end(d),!o)return{start:i,end:r};if(a=o.start===i,s=o.end===r,!a||!s){if(a)c={start:o.end,end:r};else{if(!s)return{start:i,end:r};c={start:i,end:o.start}}return l=e.length>d+1?{start:e.start(d+1),end:e.end(d+1)}:null,u=d+1<h?{start:n.start(d+1),end:n.end(d+1)}:null,!l||u&&u.start===l.start&&u.end===l.end||(c.end=l.start),c}}return null}}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(211)),u=i(e(50)),c=i(e(54)),a=i(e(51));r.__dashjs_factory_name="SourceBufferController";var s=a.default.getSingletonFactory(r);s.QUOTA_EXCEEDED_ERROR_CODE=22,a.default.updateSingletonFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{211:211,50:50,51:51,54:54}],114:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function n(){if(m()){var e=ae.getPlaybackQuality();e&&N.addDroppedFrames(me.default.VIDEO,e)}}function i(e){var t=l(e.seekTime);pe&&(s(),fe=!1),t&&t!==Q?(v(Te.PlayListTrace.END_OF_PERIOD_STOP_REASON),c(Q,t,e.seekTime)):v(Te.PlayListTrace.USER_REQUEST_STOP_REASON),_(Te.PlayList.SEEK_START_REASON)}function r(){A("[StreamController][onPlaybackStarted]"),ue?(ue=!1,_(Te.PlayList.INITIAL_PLAYOUT_START_REASON)):le&&(le=!1,_(Te.PlayList.RESUME_FROM_PAUSE_START_REASON),t())}function a(e){A("[StreamController][onPlaybackPaused]"),e.ended||(le=!0,v(Te.PlayListTrace.USER_REQUEST_STOP_REASON),t())}function s(){A("[StreamController][toggleEndPeriodTimer] stop end period timer."),clearTimeout(pe),pe=void 0}function t(){if(fe)if(pe)s();else{var e=se.getTimeToStreamEnd(),t=0<e?1e3*e:0;A("[StreamController][toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in "+t+" milliseconds"),pe=setTimeout(function(){C.trigger(xe.default.PLAYBACK_ENDED)},t)}}function o(){var e=x().isLast;re&&e?(A("[StreamController][onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),F.signalEndOfStream(re)):re&&void 0===pe&&(A("[StreamController][onStreamBufferingCompleted] end of period detected"),!(fe=!0)===le&&t())}function l(e){var t=0,n=null,i=K.length;0<i&&(t+=K[0].getStartTime());for(var r=0;r<i;r++)if(n=K[r],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function u(){var e=function(){if(Q){var e=(t=Q.getStreamInfo().start,n=Q.getStreamInfo().duration,{v:K.filter(function(e){return e.getStreamInfo().start===parseFloat((t+n).toFixed(5))})[0]});if("object"==typeof e)return e.v}var t,n}();e?(de=he=void 0,c(Q,e,NaN)):A("StreamController no next stream found"),v(e?Te.PlayListTrace.END_OF_PERIOD_STOP_REASON:Te.PlayListTrace.END_OF_CONTENT_STOP_REASON),pe=void 0,fe=!1}function c(e,t,n){!te&&t&&e!==t&&(te=!0,C.trigger(xe.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&(e.stopEventController(),e.deactivate()),Q=t,se.initialize(Q.getStreamInfo()),function(n,i){function r(){var e,t;A("MediaSource is open!"),window.URL.revokeObjectURL(a),re.removeEventListener("sourceopen",r),re.removeEventListener("webkitsourceopen",r),d(),e=n,Q.activate(re),he=g(me.default.AUDIO),de=g(me.default.VIDEO),ue||(isNaN(e)?(t=se.getStreamStartTime(!0),Q.getProcessors().forEach(function(e){O.setIndexHandlerTime(e,t)})):se.seek(e)),Q.startEventController(),!ee&&ue||se.play(),te=!1,C.trigger(xe.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Q.getStreamInfo()}),i||C.trigger(xe.default.SOURCE_INITIALIZED)}var a=void 0;re?F.detachMediaSource(ae):re=F.createMediaSource(),re.addEventListener("sourceopen",r,!1),re.addEventListener("webkitsourceopen",r,!1),a=F.attachMediaSource(re,ae),A("MediaSource attached to element.  Waiting on open...")}(n,e))}function d(){var e=Q.getStreamInfo().manifestInfo.duration,t=F.setDuration(re,e);A("Duration successfully set to: "+t)}function h(e){for(var t=0,n=K.length;t<n;t++)if(K[t].getId()===e.id)return K[t];return null}function f(){var e=I.getValue();Z&&(C.trigger(xe.default.PROTECTION_CREATED,{controller:Z,manifest:e}),Z.setMediaElement(ae.getElement()),J&&Z.setProtectionData(J)),function(){try{var e=O.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");var t=U.getCurrentManifestUpdate(N.getMetricsFor(me.default.STREAM));N.updateManifestUpdateInfo(t,{currentTime:se.getTime(),buffered:ae.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:X.getClientTimeOffset()});for(var n=0,i=e.length;n<i;n++){var r=e[n],a=h(r);a?a.updateData(r):(a=(0,ve.default)(M).create({manifestModel:I,dashManifestModel:L,mediaPlayerModel:oe,metricsModel:N,dashMetrics:U,manifestUpdater:D,adapter:O,timelineConverter:X,capabilities:R,errHandler:Y,baseURLController:$,domStorage:j,abrController:V,playbackController:se,mediaController:H,textController:z,sourceBufferController:G,videoModel:ae,streamController:P}),K.push(a),a.initialize(r,Z)),N.addManifestUpdateStreamInfo(t,r.id,r.index,r.start,r.duration)}if(!Q){var s=se.getStartTimeFromUriParameters(),o=null;s&&(o=l(isNaN(s.fragS)?s.fragT:s.fragS)),c(null,null!==o?o:K[0],NaN)}C.trigger(xe.default.STREAMS_COMPOSED)}catch(e){Y.manifestError(e.message,"nostreamscomposed",I.getValue()),ie=!0,E()}}()}function p(l){l.error?(ie=!0,E()):function(){var e=l.manifest;O.updatePeriods(e);var t=O.getStreamsInfo(e)[0],n=O.getMediaInfoForType(t,me.default.VIDEO)||O.getMediaInfoForType(t,me.default.AUDIO),i=void 0,r=void 0;n&&(i=O.getDataForMedia(n),(r=L.getRepresentationsForAdaptation(i)[0].useCalculatedLiveEdgeTime)&&(A("SegmentTimeline detected using calculated Live Edge Time"),oe.setUseManifestDateHeaderTimeSource(!1)));var a=L.getUTCTimingSources(l.manifest),s=!L.getIsDynamic(e)||r?a:a.concat(oe.getUTCTimingSources()),o=W.isHTTPS(l.manifest.url);s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===be.default.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(o?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),o?"https://":"http://"),A("Matching default timing source protocol to manifest protocol: ",e.value))}),$.initialize(e),B.setConfig({metricsModel:N,dashMetrics:U,baseURLController:$}),B.initialize(s,oe.getUseManifestDateHeaderTimeSource())}()}function m(){return de}function g(t){var n=!1;return Q&&Q.getProcessors().forEach(function(e){e.getMediaInfo().type===t&&(n=!0)}),n}function v(n,i){i=i||new Date,ce&&(Q&&Q.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.finalisePlayList(i,n)}),N.addPlayList(ce),ce=null)}function _(e){(ce=new Te.PlayList).start=new Date,ce.mstart=1e3*se.getTime(),ce.starttype=e,Q&&Q.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(ce)})}function y(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}ne=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),A("Video Element Error: "+t),e.error&&A(e.error),Y.mediaSourceError(t),E()}}function x(){return Q?Q.getStreamInfo():null}function b(){if(!(k&&k.hasOwnProperty("load")&&X&&X.hasOwnProperty("initialize")&&X.hasOwnProperty("reset")&&X.hasOwnProperty("getClientTimeOffset")))throw new Error("setConfig function has to be called previously")}function T(e){isNaN(e.newDuration)||d(e.newDuration)}function S(){ce=Q=Z=null,pe=he=de=void 0,fe=!(ee=!(le=!(ue=!(ie=ne=te=!(K=[])))))}function E(){b(),B.reset(),v(ne||ie?Te.PlayListTrace.FAILURE_STOP_REASON:Te.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=K?K.length:0;e<t;e++)K[e].reset(ne);C.off(xe.default.PLAYBACK_TIME_UPDATED,n,this),C.off(xe.default.PLAYBACK_SEEKING,i,this),C.off(xe.default.PLAYBACK_ERROR,y,this),C.off(xe.default.PLAYBACK_STARTED,r,this),C.off(xe.default.PLAYBACK_PAUSED,a,this),C.off(xe.default.PLAYBACK_ENDED,u,this),C.off(xe.default.MANIFEST_UPDATED,p,this),C.off(xe.default.STREAM_BUFFERING_COMPLETED,o,this),C.off(Me.default.METRIC_ADDED,w,this),C.off(xe.default.MANIFEST_VALIDITY_CHANGED,T,this),$.reset(),D.reset(),N.clearAllCurrentMetrics(),I.setValue(null),k.reset(),X.reset(),q.reset(),re&&(F.detachMediaSource(ae),re=null),ae=null,Z&&(Z.setMediaElement(null),J=Z=null,I.getValue()&&C.trigger(xe.default.PROTECTION_DESTROYED,{data:I.getValue().url})),C.trigger(xe.default.STREAM_TEARDOWN_COMPLETE),S()}function w(e){e.metric===ge.default.DVR_INFO&&e.mediaType===me.default.AUDIO&&F.setSeekable(re,e.value.range.start,e.value.range.end)}var M=this.context,A=(0,Se.default)(M).getInstance().log,C=(0,ye.default)(M).getInstance(),P=void 0,R=void 0,D=void 0,k=void 0,I=void 0,L=void 0,O=void 0,N=void 0,U=void 0,F=void 0,B=void 0,$=void 0,j=void 0,V=void 0,H=void 0,z=void 0,G=void 0,q=void 0,W=void 0,Y=void 0,X=void 0,K=void 0,Q=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,ae=void 0,se=void 0,oe=void 0,le=void 0,ue=void 0,ce=void 0,de=void 0,he=void 0,fe=void 0,pe=void 0;return P={initialize:function(e,t){b(),ee=e,J=t,X.initialize(),(D=(0,_e.default)(M).create()).setConfig({manifestModel:I,dashManifestModel:L,mediaPlayerModel:oe,manifestLoader:k}),D.initialize(),$.setConfig({dashManifestModel:L}),C.on(xe.default.TIME_SYNCHRONIZATION_COMPLETED,f,this),C.on(xe.default.PLAYBACK_SEEKING,i,this),C.on(xe.default.PLAYBACK_TIME_UPDATED,n,this),C.on(xe.default.PLAYBACK_ENDED,u,this),C.on(xe.default.PLAYBACK_ERROR,y,this),C.on(xe.default.PLAYBACK_STARTED,r,this),C.on(xe.default.PLAYBACK_PAUSED,a,this),C.on(xe.default.MANIFEST_UPDATED,p,this),C.on(xe.default.STREAM_BUFFERING_COMPLETED,o,this),C.on(xe.default.MANIFEST_VALIDITY_CHANGED,T,this),C.on(Me.default.METRIC_ADDED,w,this)},getActiveStreamInfo:x,isVideoTrackPresent:m,isAudioTrackPresent:function(){return he},getStreamById:function(t){return K.filter(function(e){return e.getId()===t})[0]},getStreamForTime:l,getTimeRelativeToStreamId:function(e,t){for(var n=null,i=0,r=0,a=null,s=K.length,o=0;o<s;o++){if(r=(n=K[o]).getStartTime(),a=n.getDuration(),Number.isFinite(r)&&(i=r),n.getId()===t)return e-i;Number.isFinite(a)&&(i+=a)}return null},load:function(e){b(),k.load(e)},loadWithManifest:function(e){(function(){if(!D||!D.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),D.setManifest(e)},getActiveStreamProcessors:function(){return Q?Q.getProcessors():[]},setConfig:function(e){e&&(e.capabilities&&(R=e.capabilities),e.manifestLoader&&(k=e.manifestLoader),e.manifestModel&&(I=e.manifestModel),e.dashManifestModel&&(L=e.dashManifestModel),e.mediaPlayerModel&&(oe=e.mediaPlayerModel),e.protectionController&&(Z=e.protectionController),e.adapter&&(O=e.adapter),e.metricsModel&&(N=e.metricsModel),e.dashMetrics&&(U=e.dashMetrics),e.errHandler&&(Y=e.errHandler),e.timelineConverter&&(X=e.timelineConverter),e.videoModel&&(ae=e.videoModel),e.playbackController&&(se=e.playbackController),e.domStorage&&(j=e.domStorage),e.abrController&&(V=e.abrController),e.mediaController&&(H=e.mediaController),e.textController&&(z=e.textController),e.sourceBufferController&&(G=e.sourceBufferController))},reset:E},B=(0,Ae.default)(M).getInstance(),$=(0,Ce.default)(M).getInstance(),F=(0,Pe.default)(M).getInstance(),q=(0,Ee.default)(M).getInstance(),W=(0,we.default)(M).getInstance(),S(),P}Object.defineProperty(n,"__esModule",{value:!0});var me=i(e(100)),ge=i(e(101)),ve=i(e(96)),_e=i(e(92)),ye=i(e(50)),xe=i(e(54)),be=i(e(143)),a=i(e(51)),Te=e(232),Se=i(e(49)),Ee=i(e(200)),we=i(e(206)),Me=i(e(94)),Ae=i(e(115)),Ce=i(e(104)),Pe=i(e(110));r.__dashjs_factory_name="StreamController",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{100:100,101:101,104:104,110:110,115:115,143:143,200:200,206:206,232:232,49:49,50:50,51:51,54:54,92:92,94:94,96:96}],115:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function s(e){v=e}function n(e){e}function o(e){g=e}function r(e){var t,n,i,r=Date.parse(e);return isNaN(r)&&(n=t=void 0,i=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),t=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&(parseInt(i[6],10)||0),i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]&&(n=60*parseInt(i[9],10)+parseInt(i[10],10),t+=("+"===i[8]?-1:1)*n*60*1e3),r=new Date(t).getTime()),r}function i(e){return Date.parse(e)}function a(e){return Date.parse(e)}function l(e,t,n){n()}function u(e,t,n){var i=r(e);isNaN(i)?n():t(i)}function h(n,e,i,t,r){var a,s,o=!1,l=new XMLHttpRequest,u=r?w.HTTPRequest.HEAD:w.HTTPRequest.GET,c=e.match(/\S+/g);if(e=c.shift(),a=function(){o||(o=!0,c.length?h(n,c.join(" "),i,t,r):t())},s=function(){var e=void 0,t=void 0;200===l.status&&(e=r?l.getResponseHeader("Date"):l.response,t=n(e),isNaN(t)||(i(t),o=!0))},m.isRelative(e)){var d=T.resolve();d&&(e=m.resolve(e,d.url))}l.open(u,e),l.timeout=5e3,l.onload=s,l.onloadend=a,l.send()}function c(e,t,n){h(a,e,t,n,!0)}function d(e,t,n){s(!1),p.trigger(A.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new E.default(1):null})}var e=this.context,f=(0,C.default)(e).getInstance().log,p=(0,M.default)(e).getInstance(),m=(0,P.default)(e).getInstance(),g=void 0,v=void 0,_=void 0,y=void 0,x=void 0,b=void 0,T=void 0;return{initialize:function(e,t){_=t,g=0,v=!1,y={"urn:mpeg:dash:utc:http-head:2014":c,"urn:mpeg:dash:utc:http-xsdate:2014":h.bind(null,r),"urn:mpeg:dash:utc:http-iso:2014":h.bind(null,i),"urn:mpeg:dash:utc:direct:2014":u,"urn:mpeg:dash:utc:http-head:2012":c,"urn:mpeg:dash:utc:http-xsdate:2012":h.bind(null,r),"urn:mpeg:dash:utc:http-iso:2012":h.bind(null,i),"urn:mpeg:dash:utc:direct:2012":u,"urn:mpeg:dash:utc:http-ntp:2014":l,"urn:mpeg:dash:utc:ntp:2014":l,"urn:mpeg:dash:utc:sntp:2014":l},v||(function e(t,n){var i=n||0,r=t[i],a=function(e,t){var n,i,r,a=!e||!t;a&&_?(n=x.getReadOnlyMetricsFor(S.default.STREAM),i=b.getLatestMPDRequestHeaderValueByID(n,"Date"),r=null!==i?new Date(i).getTime():Number.NaN,isNaN(r)?d(!0):(o(r-(new Date).getTime()),d(!1,r/1e3,g))):d(a,e,t)};s(!0),r?y.hasOwnProperty(r.schemeIdUri)?y[r.schemeIdUri](r.value,function(e){var t=(new Date).getTime(),n=e-t;o(n),f("Local time:      "+new Date(t)),f("Server time:     "+new Date(e)),f("Difference (ms): "+n),a(e,n)},function(){e(t,i+1)}):e(t,i+1):(o(0),a())}(e),n(!0))},getOffsetToDeviceTimeMs:function(){return g},setConfig:function(e){e&&(e.metricsModel&&(x=e.metricsModel),e.dashMetrics&&(b=e.dashMetrics),e.baseURLController&&(T=e.baseURLController))},reset:function(){n(!1),s(!1)}}}Object.defineProperty(n,"__esModule",{value:!0});var S=i(e(100)),E=i(e(211)),w=e(230),M=i(e(50)),A=i(e(54)),a=i(e(51)),C=i(e(49)),P=i(e(206));r.__dashjs_factory_name="TimeSyncController";var s=a.default.getSingletonFactory(r);s.TIME_SYNC_FAILED_ERROR_CODE=1,s.HTTP_TIMEOUT_MS=5e3,a.default.updateSingletonFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{100:100,206:206,211:211,230:230,49:49,50:50,51:51,54:54}],116:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function r(e,t,n){var i={},r=void 0,a=void 0;i.elements=e,i.type=t,i.resolveType=n,0===i.elements.length&&o(i);for(var s=0;s<i.elements.length;s++)r=i.elements[s],a=l.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,f.load(a,r,i)}function t(e){var t,n=void 0,i="";if(n=e.element,t=e.resolveObject,n.resolvedContent){var r=0;0===n.resolvedContent.indexOf("<?xml")&&(r=n.resolvedContent.indexOf("?>")+2),i=n.resolvedContent.substr(0,r)+"<response>"+n.resolvedContent.substr(r)+"</response>",n.resolvedContent=h.xml_str2json(i)}(function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(t)&&o(t)}function o(e){var t=[],n=void 0,i=void 0;if(function(e){var t=[],n=void 0,i=void 0,r=void 0,a=void 0,s=void 0,o=void 0;for(a=e.elements.length-1;0<=a;a--){if(n=e.elements[a],i=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(s=0;s<n.resolvedContent[i].length;s++)r=n.resolvedContent[i][s],t.push(r)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[i].splice(n.index,1),o=0;o<t.length;o++)n.parentElement[i].splice(n.index+o,0,t[o]);t=[]}0<e.elements.length&&c.run(d)}(e),"onActuate"===e.resolveType&&s.trigger(g.default.XLINK_READY,{manifest:d}),e.resolveType===y)switch(e.type){case x:for(n=0;n<d.Period_asArray.length;n++)(i=d.Period_asArray[n]).hasOwnProperty(b+"_asArray")&&(t=t.concat(a(i[b+"_asArray"],i,b,y))),i.hasOwnProperty(T+"_asArray")&&(t=t.concat(a(i[T+"_asArray"],i,T,y)));r(t,b,y);break;case b:s.trigger(g.default.XLINK_READY,{manifest:d})}}function a(e,t,n,i){var r=[],a=void 0,s=void 0,o=void 0;for(s=e.length-1;0<=s;s--)(a=e[s]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(s,1);for(s=0;s<e.length;s++)(a=e[s]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===i&&(o={url:a["xlink:href"],parentElement:t,type:n,index:s,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1},r.push(o));return r}e=e||{};var n=this.context,s=(0,m.default)(n).getInstance(),l=(0,_.default)(n).getInstance(),i=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0;return i={resolveManifestOnLoad:function(e){h=new v.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:u}),r(a((d=e).Period_asArray,d,x,y),x,y)},setMatchers:function(e){e&&(u=e)},setIron:function(e){e&&(c=e)},reset:function(){s.off(g.default.XLINK_ELEMENT_LOADED,t,i),f&&(f.reset(),f=null)}},s.on(g.default.XLINK_ELEMENT_LOADED,t,i),f=(0,p.default)(n).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),i}Object.defineProperty(n,"__esModule",{value:!0});var p=i(e(99)),m=i(e(50)),g=i(e(54)),a=i(e(51)),v=i(e(4)),_=i(e(206)),y="onLoad",x="Period",b="AdaptationSet",T="EventStream";r.__dashjs_factory_name="XlinkController",n.default=a.default.getClassFactory(r),t.exports=n.default},{206:206,4:4,50:50,51:51,54:54,99:99}],117:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var t=this.context;return{createMetricsReporting:function(e){return(0,a.default)(t).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel,metricsConstants:e.metricsConstants,events:e.events}),(0,o.default)(t).create(e)},getReportingFactory:function(){return(0,u.default)(t).getInstance()},getMetricsHandlerFactory:function(){return(0,l.default)(t).getInstance()}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(131)),s=i(e(118)),o=i(e(119)),l=i(e(124)),u=i(e(129));r.__dashjs_factory_name="MetricsReporting";var c=dashjs.FactoryMaker.getClassFactory(r);c.events=s.default,dashjs.FactoryMaker.updateClassFactory(r.__dashjs_factory_name,c),n.default=c,t.exports=n.default},{118:118,119:119,124:124,129:129,131:131}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(55),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=s,t.exports=n.default},{55:55}],119:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(r){function e(e){if(!e.error){var i=Object.keys(a);(0,l.default)(s).getInstance({dashManifestModel:r.dashManifestModel,constants:r.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))i.splice(t,1);else try{var n=(0,o.default)(s).create(r);n.initialize(e),a[t]=n}catch(e){}}),i.forEach(function(e){a[e].reset(),delete a[e]}),n.trigger(u.default.METRICS_INITIALISATION_COMPLETE)}}function t(){Object.keys(a).forEach(function(e){a[e].reset()}),a={}}r=r||{};var a={},s=this.context,n=r.eventBus,i=r.events;return n.on(i.MANIFEST_UPDATED,e),n.on(i.STREAM_TEARDOWN_COMPLETE,t),{reset:function(){n.off(i.MANIFEST_UPDATED,e),n.off(i.STREAM_TEARDOWN_COMPLETE,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(120)),l=i(e(133)),u=i(e(118));r.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{118:118,120:120,133:133}],120:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(t){function n(){i&&i.reset(),r&&r.reset(),a&&a.reset()}t=t||{};var i=void 0,r=void 0,a=void 0,s=this.context;return{initialize:function(e){try{(a=(0,o.default)(s).create({mediaElement:t.mediaElement})).initialize(e.Range),(r=(0,l.default)(s).create({log:t.log,metricsConstants:t.metricsConstants})).initialize(e.Reporting,a),(i=(0,u.default)(s).create({log:t.log,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,r)}catch(e){throw n(),e}},reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(122)),l=i(e(123)),u=i(e(121));r.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{121:121,122:122,123:123}],121:[function(e,t,n){"use strict";function i(e){function t(t){s.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}e=e||{};var s=[],n=void 0,i=this.context,r=e.eventBus,o=e.events,l=(0,u.default)(i).getInstance({log:e.log,eventBus:e.eventBus,metricsConstants:e.metricsConstants});return n={initialize:function(e,a){e.split(",").forEach(function(e,t,n){var i;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var r=n[t+1];r&&-1===r.indexOf("(")&&-1!==r.indexOf(")")&&(e+=","+r,delete n[t+1])}(i=l.create(e,a))&&s.push(i)}),r.on(o.METRIC_ADDED,t,n),r.on(o.METRIC_UPDATED,t,n)},reset:function(){r.off(o.METRIC_ADDED,t,n),r.off(o.METRIC_UPDATED,t,n),s.forEach(function(e){return e.reset()}),s=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(124),u=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{124:124}],122:[function(e,t,n){"use strict";function i(e){e=e||{};var t,a=!1,n=this.context,s=void 0,o=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;s.add(t,n)}),a=!!e[0]._useWallClockTime)},reset:function(){s.clear()},isEnabled:function(){var e,t=s.length;if(!t)return!0;e=a?(new Date).getTime()/1e3:o.currentTime;for(var n=0;n<t;n+=1){var i=s.start(n),r=s.end(n);if(i<=e&&e<r)return!0}return!1}},s=(0,l.default)(n).create(),t}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(196),l=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{196:196}],123:[function(e,t,n){"use strict";function i(e){var i=[],r=(0,s.default)(this.context).getInstance(e);return{initialize:function(e,n){e.some(function(e){var t=r.create(e,n);if(t)return i.push(t),!0})},reset:function(){i.forEach(function(e){return e.reset()}),i=[]},report:function(t,n){i.forEach(function(e){return e.report(t,n)})}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(129),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{129:129}],124:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(r){var a=(r=r||{}).log,s=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,o=this.context,l={BufferLevel:u.default,DVBErrors:c.default,HttpList:d.default,PlayList:h.default,RepSwitchList:h.default,TcpList:h.default};return{create:function(e,t){var n,i=e.match(s);if(i){try{(n=l[i[1]](o).create({eventBus:r.eventBus,metricsConstants:r.metricsConstants})).initialize(i[1],t,i[3],i[5])}catch(e){n=null,a("MetricsHandlerFactory: Could not create handler for type "+i[1]+" with args "+i[3]+", "+i[5]+" ("+e.message+")")}return n}},register:function(e,t){l[e]=t},unregister:function(e){delete l[e]}}}Object.defineProperty(n,"__esModule",{value:!0});var u=i(e(125)),c=i(e(126)),d=i(e(128)),h=i(e(127));r.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{125:125,126:126,127:127,128:128}],125:[function(e,t,n){"use strict";function i(e){function i(){var e=function(){try{return Object.keys(u).map(function(e){return u[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&t!==e.t&&(t=e.t,r.report(s,e))}e=e||{};var r=void 0,a=void 0,s=void 0,o=void 0,t=void 0,n=this.context,l=(0,d.default)(n).getInstance(),u=[],c=e.metricsConstants;return{initialize:function(e,t,n){t&&(a=l.validateN(n),r=t,s=l.reconstructFullMetricName(e,n),o=setInterval(i,a))},reset:function(){clearInterval(o),a=0,t=r=o=null},handleNewMetric:function(e,t,n){e===c.BUFFER_LEVEL&&(u[n]=t)}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(132),d=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{132:132}],126:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(118),s=(i=r)&&i.__esModule?i:{default:i};n.default=dashjs.FactoryMaker.getClassFactory(function(e){function n(){r.off(s.default.METRICS_INITIALISATION_COMPLETE,n,this),r.trigger(s.default.BECAME_REPORTING_PLAYER)}var i=void 0,r=(e=e||{}).eventBus,a=e.metricsConstants;return{initialize:function(e,t){t&&(i=t,r.on(s.default.METRICS_INITIALISATION_COMPLETE,n,this))},reset:function(){i=null},handleNewMetric:function(e,t){e===a.DVB_ERRORS&&i&&i.report(e,t)}}}),t.exports=n.default},{118:118}],127:[function(e,t,n){"use strict";function i(){var n=void 0,i=void 0;return{initialize:function(e,t){n=e,i=t},reset:function(){i=null,n=void 0},handleNewMetric:function(e,t){e===n&&i&&i.report(n,t)}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{}],128:[function(e,t,n){"use strict";function i(e){function r(){var e=n;e.length&&a&&a.report(l,e),n=[]}e=e||{};var a=void 0,s=void 0,o=void 0,l=void 0,u=void 0,n=[],c=(0,d.default)(this.context).getInstance(),i=e.metricsConstants;return{initialize:function(e,t,n,i){t&&(s=c.validateN(n),a=t,i&&i.length&&(o=i),l=c.reconstructFullMetricName(e,n,i),u=setInterval(r,s))},reset:function(){clearInterval(u),n=[],a=o=s=u=null},handleNewMetric:function(e,t){e===i.HTTP_REQUEST&&(o&&o!==t.type||n.push(t))}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(132),d=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{132:132}],129:[function(e,t,n){"use strict";function i(e){e=e||{};var i={"urn:dvb:dash:reporting:2014":o.default},r=this.context,a=e.log,s=e.metricsConstants;return{create:function(t,e){var n=void 0;try{(n=i[t.schemeIdUri](r).create({metricsConstants:s})).initialize(t,e)}catch(e){n=null,a("ReportingFactory: could not create Reporting with schemeIdUri "+t.schemeIdUri+" ("+e.message+")")}return n},register:function(e,t){i[e]=t},unregister:function(e){delete i[e]}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(130),o=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{130:130}],130:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t=this.context,i=(0,h.default)(t).getInstance(),r=(0,f.default)(t).getInstance(),a=!0,s=!1,o=!1,l=null,u=null,n=!0,c=[],d=e.metricsConstants;return{report:function(n,e){Array.isArray(e)||(e=[e]),s&&u.isEnabled()&&e.forEach(function(e){var t=i.serialise(e);a&&n!==d.DVB_ERRORS&&(t="metricname="+n+"&"+t),function(e,t,n){var i=new XMLHttpRequest,r=function(){var e=c.indexOf(i);-1!==e&&(c.splice(e,1),200<=i.status&&i.status<300?t&&t():n&&n())};c.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send()}catch(e){i.onerror()}}(t=l+"?"+t,null,function(){s=!1})})},initialize:function(e,t){var n=void 0;if(u=t,!(l=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");o||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=r.random())&&(s=!0),o=!0)},reset:function(){n||(c.forEach(function(e){return e.abort()}),c=[]),s=o=!1,u=l=null}}}Object.defineProperty(n,"__esModule",{value:!0});var h=i(e(134)),f=i(e(135));r.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{134:134,135:135}],131:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function n(e){var t=new p.default;if(d){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=d.originalUrl||d.url),t.terror||(t.terror=new Date),c.addDVBErrors(t)}}function t(e){e.error||(d=e.manifest)}function i(e){n({errorcode:p.default.BASE_URL_CHANGED,servicelocation:e.entry})}function r(){n({errorcode:p.default.BECAME_REPORTER})}function a(e){switch(e.metric){case h.HTTP_REQUEST:(0===(t=e.value).responsecode||400<=t.responsecode||t.responsecode<100||600<=t.responsecode)&&n({errorcode:t.responsecode||p.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}var t}function s(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=p.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=p.default.CORRUPT_MEDIA_OTHER;break;default:return}n({errorcode:t})}function o(){u.on(f.MANIFEST_UPDATED,t,l),u.on(f.SERVICE_LOCATION_BLACKLIST_CHANGED,i,l),u.on(f.METRIC_ADDED,a,l),u.on(f.METRIC_UPDATED,a,l),u.on(f.PLAYBACK_ERROR,s,l),u.on(m.default.BECAME_REPORTING_PLAYER,r,l)}var l=void 0,u=(e=e||{}).eventBus,c=e.metricsModel,d=void 0,h=e.metricsConstants,f=e.events;return l={initialise:o,reset:function(){u.off(f.MANIFEST_UPDATED,t,l),u.off(f.SERVICE_LOCATION_BLACKLIST_CHANGED,i,l),u.off(f.METRIC_ADDED,a,l),u.off(f.METRIC_UPDATED,a,l),u.off(f.PLAYBACK_ERROR,s,l),u.off(m.default.BECAME_REPORTING_PLAYER,r,l)}},o(),l}Object.defineProperty(n,"__esModule",{value:!0});var p=i(e(136)),m=i(e(118));r.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{118:118,136:136}],132:[function(e,t,n){"use strict";function i(){return{reconstructFullMetricName:function(e,t,n){var i=e;return t&&(i+="("+t,n&&n.length&&(i+=","+n),i+=")"),i},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],133:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var o=(e=e||{}).dashManifestModel,l=e.constants;return{getMetrics:function(r){var t=[];return r.Metrics_asArray&&r.Metrics_asArray.forEach(function(e){var i=new a.default,n=o.getIsDynamic(r);e.hasOwnProperty("metrics")&&(i.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t=new s.default;t.starttime=function(e,t,n){var i,r,a=o.getMpd(e),s=0;return t?s=a.availabilityStartTime.getTime()/1e3:(i=this.getRegularPeriods(a)).length&&(s=i[0].start),r=s,n&&n.hasOwnProperty(l.START_TIME)&&(r+=n.starttime),r}(r,n,e),e.hasOwnProperty("duration")?t.duration=e.duration:t.duration=o.getDuration(r),t._useWallClockTime=n,i.Range.push(t)}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(e){var t=new u.default;if(e.hasOwnProperty(l.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.Reporting.push(t)}}),t.push(i)))}),t}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(137)),s=i(e(138)),u=i(e(139));r.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{137:137,138:138,139:139}],134:[function(e,t,n){"use strict";function i(){return{serialise:function n(e){var t=[],i=[],r=void 0,a=void 0;for(r in e)if(e.hasOwnProperty(r)&&0!==r.indexOf("_")){if(null!=(a=e[r])||(a=""),Array.isArray(a)){if(!a.length)continue;i=[],a.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);i.push(t?e:n(e))}),a=i.map(encodeURIComponent).join(",")}else"string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));t.push(r+"="+a)}return t.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],135:[function(e,t,n){"use strict";function i(){function i(){r&&(s||(s=new t(n)),r.getRandomValues(s),o=0)}var e,r=window.crypto||window.msCrypto,t=Uint32Array,a=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,n=10,s=void 0,o=void 0;return e={random:function(e,t){var n=void 0;return e||(e=0),t||(t=1),r?(o===s.length&&i(),n=s[o]/a,o+=1):n=Math.random(),n*(t-e)+e}},i(),e}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],136:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",n.default=i,t.exports=n.default},{}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=n.default},{}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=n.default},{}],139:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],140:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function r(e,t,n){var i=s.getBaseURLsFromElement(n);e[t]?o.areEqual(i,e[t].data.baseUrls)||(e[t].data.baseUrls=i,e[t].data.selectedIdx=u):e[t]=new c(i)}function e(){a=new c}var t,a=void 0,s=void 0,n=this.context,o=(0,l.default)(n).getInstance();return t={reset:e,update:function(e){var t,n;t=e,n=s.getBaseURLsFromElement(t),o.areEqual(n,a.data.baseUrls)||(a.data.baseUrls=n,a.data.selectedIdx=u),t.Period_asArray&&t.Period_asArray.forEach(function(e,i){r(a.children,i,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){r(a.children[i].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(s.getRepresentationSortFunction()).forEach(function(e,t){r(a.children[i].children[n].children,t,e)})})})},getForPath:function(e){var t=a,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){var i=e||a;n(i.data),i.children&&i.children.forEach(function(e){return t(n,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=u)})},setConfig:function(e){e.dashManifestModel&&(s=e.dashManifestModel)}},e(),t}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(203)),a=i(e(51)),u=NaN,c=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.data={baseUrls:t||null,selectedIdx:n||u},this.children=[]};r.__dashjs_factory_name="BaseURLTreeModel",n.default=a.default.getClassFactory(r),t.exports=n.default},{203:203,51:51}],141:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function r(l){var u;return!!l&&(u=!1,m.some(function(e){if(o=e,l.url===o.url&&(a=l,s=e,!isNaN(a.index)&&a.startTime===s.startTime&&a.adaptationIndex===s.adaptationIndex||(i=l,r=e,isNaN(i.index)&&isNaN(r.index)&&i.quality===r.quality)||(n=e,(t=l).action===y.default.ACTION_COMPLETE&&t.action===n.action)))return u=!0;var t,n,i,r,a,s,o}),u)}function o(e){return isNaN(e.duration)?.25:e.duration/8}function a(n,i){i<=n+.5||(m=m.filter(function(e){var t=o(e);return isNaN(e.startTime)||e.startTime>=i-t||isNaN(e.duration)||e.startTime+e.duration<=n+t}))}function n(e,t){d.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),d.addRequestsQueue(e.mediaType,g,m)}function t(e){e.sender===h&&(g.splice(g.indexOf(e.request),1),e.response&&!e.error&&m.push(e.request),n(e.request,e.error?"failed":T),c.trigger(_.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function i(e){e.sender===h&&c.trigger(_.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function s(){m=[],g=[]}e=e||{};var l=this.context,u=(0,x.default)(l).getInstance().log,c=(0,v.default)(l).getInstance(),d=e.metricsModel,h=e.fragmentLoader,f=void 0,p=void 0,m=void 0,g=void 0;return f={setStreamProcessor:function(e){p=e},getStreamProcessor:function(){return p},getRequests:function(r){var e=r?r.state instanceof Array?r.state:[r.state]:[],a=[];return e.forEach(function(e){var t,n,i=function(e){var t=void 0;switch(e){case b:t=g;break;case T:t=m;break;default:t=[]}return t}(e);a=a.concat((t=i,(n=r).hasOwnProperty("time")?[function(e,t,n){for(var i=e.length-1;0<=i;i--){var r=e[i],a=r.startTime,s=a+r.duration;if(n=isNaN(n)?o(r):n,!isNaN(a)&&!isNaN(s)&&a<=t+n&&t-n<s||isNaN(a)&&isNaN(t))return r}return null}(t,n.time,n.threshold)]:t.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return!1;return!0})))}),a},isFragmentLoaded:r,isFragmentLoadedOrPending:function(e){var t=!1,n=0,i=void 0;if(!(t=r(e)))for(n=0;n<g.length;n++)i=g[n],e.url===i.url&&e.startTime===i.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:function(n){m=m.filter(function(e){var t=o(e);return!(!isNaN(e.startTime)&&void 0===n)&&e.startTime>=n-t})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,i=0,r=e.length;i<r;i++)a(n,e.start(i)),n=e.end(i);0<t&&a(n,t)}else m=[]},abortRequests:function(){h.abort(),g=[]},executeRequest:function(e){switch(e.action){case y.default.ACTION_COMPLETE:m.push(e),n(e,T),u("[FragmentModel] executeRequest trigger STREAM_COMPLETED"),c.trigger(_.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case y.default.ACTION_DOWNLOAD:n(e,b),g.push(e),t=e,c.trigger(_.default.FRAGMENT_LOADING_STARTED,{sender:f,request:t}),h.load(t);break;default:u("Unknown request action.")}var t},reset:function(){c.off(_.default.LOADING_COMPLETED,t,this),c.off(_.default.LOADING_ABANDONED,i,this),h&&h.reset(),s()}},s(),c.on(_.default.LOADING_COMPLETED,t,f),c.on(_.default.LOADING_ABANDONED,i,f),f}Object.defineProperty(n,"__esModule",{value:!0});var v=i(e(50)),_=i(e(54)),a=i(e(51)),y=i(e(213)),x=i(e(49)),b="loading",T="executed";r.__dashjs_factory_name="FragmentModel";var s=a.default.getClassFactory(r);s.FRAGMENT_MODEL_LOADING=b,s.FRAGMENT_MODEL_EXECUTED=T,s.FRAGMENT_MODEL_CANCELED="canceled",s.FRAGMENT_MODEL_FAILED="failed",a.default.updateClassFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{213:213,49:49,50:50,51:51,54:54}],142:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,t=(0,a.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(s.default.MANIFEST_LOADED,{data:e})}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(50)),s=i(e(54)),o=i(e(51));r.__dashjs_factory_name="ManifestModel",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{50:50,51:51,54:54}],143:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){function r(e){var t=void 0;for(t=0;t<P.length;t++)if(P[t].rulename===e)return t;return-1}var e,t,n,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0,_=void 0,y=void 0,x=void 0,b=void 0,T=void 0,S=void 0,E=void 0,w=void 0,M=void 0,A=void 0,C=void 0,P=void 0,R=void 0,D=void 0;return e={setABRStrategy:function(e){w=e},getABRStrategy:function(){return w},setUseDefaultABRRules:function(e){M=e},getUseDefaultABRRules:function(){return M},getABRCustomRules:function(){return P},addABRCustomRule:function(e,t,n){var i=r(t);-1===i?P.push({type:e,rulename:t,rule:n}):(P[i].type=e,P[i].rule=n)},removeABRCustomRule:function(e){var t=r(e);-1!==t&&P.splice(t,1)},removeAllABRCustomRule:function(){P=[]},setBandwidthSafetyFactor:function(e){x=e},getBandwidthSafetyFactor:function(){return x},setAbandonLoadTimeout:function(e){b=e},getAbandonLoadTimeout:function(){return b},setLastBitrateCachingInfo:function(e,t){f.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(f.ttl=t)},getLastBitrateCachingInfo:function(){return f},setLastMediaSettingsCachingInfo:function(e,t){p.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(p.ttl=t)},getLastMediaSettingsCachingInfo:function(){return p},setStableBufferTime:function(e){m=e},getStableBufferTime:function(){return isNaN(m)?C?20:12:m},setBufferTimeAtTopQuality:function(e){g=e},getBufferTimeAtTopQuality:function(){return g},setBufferTimeAtTopQualityLongForm:function(e){v=e},getBufferTimeAtTopQualityLongForm:function(){return v},setLongFormContentDurationThreshold:function(e){_=e},getLongFormContentDurationThreshold:function(){return _},setSegmentOverlapToleranceTime:function(e){y=e},getSegmentOverlapToleranceTime:function(){return y},getCacheLoadThresholdForType:function(e){return D[e]},setCacheLoadThresholdForType:function(e,t){D[e]=t},setBufferToKeep:function(e){c=e},getBufferToKeep:function(){return c},setBufferAheadToKeep:function(e){d=e},getBufferAheadToKeep:function(){return d},setBufferPruningInterval:function(e){h=e},getBufferPruningInterval:function(){return h},setFragmentRetryAttempts:function(e){T[I.HTTPRequest.MEDIA_SEGMENT_TYPE]=e},getFragmentRetryAttempts:function(){return T[I.HTTPRequest.MEDIA_SEGMENT_TYPE]},setManifestRetryAttempts:function(e){T[I.HTTPRequest.MPD_TYPE]=e},getManifestRetryAttempts:function(){return T[I.HTTPRequest.MPD_TYPE]},setRetryAttemptsForType:function(e,t){T[e]=t},getRetryAttemptsForType:function(e){return T[e]},setFragmentRetryInterval:function(e){S[I.HTTPRequest.MEDIA_SEGMENT_TYPE]=e},getFragmentRetryInterval:function(){return S[I.HTTPRequest.MEDIA_SEGMENT_TYPE]},setManifestRetryInterval:function(e){S[I.HTTPRequest.MPD_TYPE]=e},getManifestRetryInterval:function(){return S[I.HTTPRequest.MPD_TYPE]},setRetryIntervalForType:function(e,t){S[e]=t},getRetryIntervalForType:function(e){return S[e]},setWallclockTimeUpdateInterval:function(e){E=e},getWallclockTimeUpdateInterval:function(){return E},setScheduleWhilePaused:function(e){u=e},getScheduleWhilePaused:function(){return u},getUseSuggestedPresentationDelay:function(){return a},setUseSuggestedPresentationDelay:function(e){a=e},setLiveDelayFragmentCount:function(e){o=e},getLiveDelayFragmentCount:function(){return o},getLiveDelay:function(){return l},setLiveDelay:function(e){l=e},setUseManifestDateHeaderTimeSource:function(e){i=e},getUseManifestDateHeaderTimeSource:function(){return i},setUTCTimingSources:function(e){s=e},getUTCTimingSources:function(){return s},setXHRWithCredentialsForType:function t(e,n){e?A[e]=!!n:Object.keys(A).forEach(function(e){t(e,n)})},getXHRWithCredentialsForType:function(e){var t=A[e];return void 0===t?A.default:t},setFastSwitchEnabled:function(e){C=e},getFastSwitchEnabled:function(){return C},setMovingAverageMethod:function(e){R=e},getMovingAverageMethod:function(){return R},reset:function(){}},u=i=!(a=!(s=[])),w=L.default.ABR_STRATEGY_DYNAMIC,f={enabled:!(C=!(M=!0)),ttl:36e4},p={enabled:!0,ttl:36e4},o=4,l=void 0,c=20,d=80,h=10,m=NaN,g=30,v=60,_=600,y=.05,x=.9,b=1e4,A={default:!(E=50)},P=[],R=L.default.MOVING_AVERAGE_SLIDING_WINDOW,k(t={},I.HTTPRequest.MPD_TYPE,3),k(t,I.HTTPRequest.XLINK_EXPANSION_TYPE,1),k(t,I.HTTPRequest.MEDIA_SEGMENT_TYPE,3),k(t,I.HTTPRequest.INIT_SEGMENT_TYPE,3),k(t,I.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),k(t,I.HTTPRequest.INDEX_SEGMENT_TYPE,3),k(t,I.HTTPRequest.OTHER_TYPE,3),T=t,k(n={},I.HTTPRequest.MPD_TYPE,500),k(n,I.HTTPRequest.XLINK_EXPANSION_TYPE,500),k(n,I.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),k(n,I.HTTPRequest.INIT_SEGMENT_TYPE,1e3),k(n,I.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),k(n,I.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),k(n,I.HTTPRequest.OTHER_TYPE,1e3),S=n,(D={})[L.default.VIDEO]=50,D[L.default.AUDIO]=5,e}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),I=e(230),L=i(e(100));r.__dashjs_factory_name="MediaPlayerModel";var s=a.default.getSingletonFactory(r);s.DEFAULT_UTC_TIMING_SOURCE={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},a.default.updateSingletonFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{100:100,230:230,51:51}],144:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function t(){s.trigger(M.default.METRICS_CHANGED)}function i(e){s.trigger(M.default.METRIC_CHANGED,{mediaType:e}),t()}function u(e,t,n){s.trigger(M.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),i(e)}function d(e,t,n){s.trigger(M.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),i(e)}function r(e){var t=void 0;return o.hasOwnProperty(e)?t=o[e]:(t=new l.default,o[e]=t),t}function h(e,t,n){var i=r(e);i[t].push(n),i[t].length>a&&i[t].shift()}function g(e,t,n){h(e,t,n),d(e,t,n)}var e,a=1e3,n=this.context,s=(0,E.default)(n).getInstance(),o=void 0;return e={clearCurrentMetricsForType:function(e){delete o[e],i(e)},clearAllCurrentMetrics:function(){o={},t()},getReadOnlyMetricsFor:function(e){return o.hasOwnProperty(e)?o[e]:null},getMetricsFor:r,addTcpConnection:function(e,t,n,i,r,a){var s=new c.default;return s.tcpid=t,s.dest=n,s.topen=i,s.tclose=r,s.tconnect=a,g(e,v.default.TCP_CONNECTION,s),s},addHttpRequest:function e(t,n,i,r,a,s,o,l,u,c,d,h,f,p){var m=new _.HTTPRequest;return a&&a!==r&&(e(t,null,i,r,null,null,o,l,null,null,null,h,null,null),m.actualurl=a),m.tcpid=n,m.type=i,m.url=r,m.range=o,m.trequest=l,m.tresponse=u,m.responsecode=d,m._tfinish=c,m._stream=t,m._mediaduration=h,m._responseHeaders=f,m._serviceLocation=s,p?p.forEach(function(e){var t,n,i,r,a;t=m,n=e.s,i=e.d,r=e.b,(a=new _.HTTPRequestTrace).s=n,a.d=i,a.b=r,t.trace.push(a),t.interval||(t.interval=0),t.interval+=i}):(delete m.interval,delete m.trace),g(t,v.default.HTTP_REQUEST,m),m},addRepresentationSwitch:function(e,t,n,i,r){var a=new p.default;return a.t=t,a.mt=n,a.to=i,r?a.lto=r:delete a.lto,g(e,v.default.TRACK_SWITCH,a),a},addBufferLevel:function(e,t,n){var i=new m.default;return i.t=t,i.level=n,g(e,v.default.BUFFER_LEVEL,i),i},addBufferState:function(e,t,n){var i=new y.default;return i.target=n,i.state=t,g(e,v.default.BUFFER_STATE,i),i},addDVRInfo:function(e,t,n,i){var r=new x.default;return r.time=t,r.range=i,r.manifestInfo=n,g(e,v.default.DVR_INFO,r),r},addDroppedFrames:function(e,t){var n=new b.default,i=r(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<i.length&&i[i.length-1]==n?i[i.length-1]:(g(e,v.default.DROPPED_FRAMES,n),n)},addSchedulingInfo:function(e,t,n,i,r,a,s,o,l){var u=new S.default;return u.mediaType=e,u.t=t,u.type=n,u.startTime=i,u.availabilityStartTime=r,u.duration=a,u.quality=s,u.range=o,u.state=l,g(e,v.default.SCHEDULING_INFO,u),u},addRequestsQueue:function(e,t,n){var i=new w.default;i.loadingRequests=t,i.executedRequests=n,r(e).RequestsQueue=i,d(e,v.default.REQUESTS_QUEUE,i)},addManifestUpdate:function(e,t,n,i,r,a,s,o,l,u){var c=new T.ManifestUpdate;return c.mediaType=e,c.type=t,c.requestTime=n,c.fetchTime=i,c.availabilityStartTime=r,c.presentationStartTime=a,c.clientTimeOffset=s,c.currentTime=o,c.buffered=l,c.latency=u,h(f.default.STREAM,v.default.MANIFEST_UPDATE,c),d(e,v.default.MANIFEST_UPDATE,c),c},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];u(e.mediaType,v.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,i,r){if(e){var a=new T.ManifestUpdateStreamInfo;return a.id=t,a.index=n,a.start=i,a.duration=r,e.streamInfo.push(a),u(e.mediaType,v.default.MANIFEST_UPDATE_STREAM_INFO,e),a}return null},addManifestUpdateRepresentationInfo:function(e,t,n,i,r,a,s,o){if(e){var l=new T.ManifestUpdateRepresentationInfo;return l.id=t,l.index=n,l.streamIndex=i,l.mediaType=r,l.startNumber=s,l.fragmentInfoType=o,l.presentationTimeOffset=a,e.representationInfo.push(l),u(e.mediaType,v.default.MANIFEST_UPDATE_TRACK_INFO,e),l}return null},addPlayList:function(e){var t=f.default.STREAM;return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,g(t,v.default.PLAY_LIST,e),e},addDVBErrors:function(e){return g(f.default.STREAM,v.default.DVB_ERRORS,e),e},setConfig:function(e){e&&e.adapter&&e.adapter}},o={},e}Object.defineProperty(n,"__esModule",{value:!0});var f=i(e(100)),v=i(e(101)),l=i(e(218)),c=i(e(236)),_=e(230),p=i(e(233)),m=i(e(226)),y=i(e(227)),x=i(e(228)),b=i(e(229)),T=e(231),S=i(e(235)),E=i(e(50)),w=i(e(234)),M=i(e(54)),a=i(e(51));r.__dashjs_factory_name="MetricsModel",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{100:100,101:101,218:218,226:226,227:227,228:228,229:229,230:230,231:231,233:233,234:234,235:235,236:236,50:50,51:51,54:54}],145:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var l=void 0,u=void 0,c=void 0;return{initialize:function(){l=new a.default,u=[],c=!1},parseURI:function(e){function t(e,t,n,i){var r=i[0].split(/[=]/);return i.push({key:r[0],value:r[1]}),i.shift(),i}if(!e)return null;var i=[],n=new RegExp(/[?]/),r=new RegExp(/[#]/),a=new RegExp(/^(https:)?\/\//i),s=n.test(e),o=r.test(e);return c=a.test(e),e.split(/[?#]/).map(function(e,t,n){return 0<t&&(s&&0===u.length?u=n[t].split(/[&]/):o&&(i=n[t].split(/[&]/))),n}),0<u.length&&(u=u.reduce(t,null)),0<i.length&&(i=i.reduce(t,null)).forEach(function(e){l[e.key]=e.value}),e},getURIFragmentData:function(){return l},getURIQueryData:function(){return u},isManifestHTTPS:function(){return c}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(225)),s=i(e(51));r.__dashjs_factory_name="URIQueryAndFragmentModel",n.default=s.default.getSingletonFactory(r),t.exports=n.default},{225:225,51:51}],146:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function t(){c.playbackRate=h||1,c.removeEventListener("canplay",t)}function l(e){c&&(c.readyState<=2&&0<e?c.addEventListener("canplay",t):c.playbackRate=e)}function u(){return 0<d.length}function e(){if(c&&u()&&0===c.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),c.dispatchEvent(e)}}var c=void 0,n=void 0,i=void 0,d=void 0,h=void 0,r=this.context,a=(0,p.default)(r).getInstance().log,s=(0,o.default)(r).getInstance();return{initialize:function(){d=[],s.on(f.default.PLAYBACK_PLAYING,e,this)},setCurrentTime:function(t){if(c.currentTime!=t)try{c.currentTime=t}catch(e){0===c.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){c.currentTime=t},400)}},play:function(){if(c){c.autoplay=!0;var e=c.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&s.trigger(f.default.PLAYBACK_NOT_ALLOWED),a("Caught pending play exception - continuing ("+e+")")})}},isPaused:function(){return c?c.paused:null},pause:function(){c&&(c.pause(),c.autoplay=!1)},isSeeking:function(){return c?c.seeking:null},getTime:function(){return c?c.currentTime:null},getPlaybackRate:function(){return c?c.playbackRate:null},getPlayedRanges:function(){return c?c.played:null},getEnded:function(){return c?c.ended:null},setStallState:function(e,t){var n,i,r,a,s,o;n=e,t?(o=void 0,null===(s=n)||c.seeking||-1!==d.indexOf(s)||(d.push(s),1===d.length&&((o=document.createEvent("Event")).initEvent("waiting",!0,!1),h=c.playbackRate,l(0),c.dispatchEvent(o)))):(i=n,r=d.indexOf(i),a=void 0,null!==i&&(-1!==r&&d.splice(r,1),!1===u()&&0===c.playbackRate&&(l(h||1),c.paused||((a=document.createEvent("Event")).initEvent("playing",!0,!1),c.dispatchEvent(a)))))},getElement:function(){return c},setElement:function(e){(c=e).preload="auto"},setSource:function(e){e?c.src=e:(c.removeAttribute("src"),c.load())},getSource:function(){return c.src},getVideoContainer:function(){return i},setVideoContainer:function(e){i=e},getTTMLRenderingDiv:function(){return n},setTTMLRenderingDiv:function(e){(n=e).style.position="absolute",n.style.display="flex",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.top=0,n.style.left=0},getPlaybackQuality:function(){var e="webkitDroppedFrameCount"in c&&"webkitDecodedFrameCount"in c,t=null;return"getVideoPlaybackQuality"in c?t=c.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:c.webkitDroppedFrameCount,totalVideoFrames:c.webkitDroppedFrameCount+c.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){c&&c.addEventListener(e,t)},removeEventListener:function(e,t){c&&c.removeEventListener(e,t)},getReadyState:function(){return c?c.readyState:NaN},getBufferRange:function(){return c?c.buffered:null},getClientWidth:function(){return c?c.clientWidth:NaN},getClientHeight:function(){return c?c.clientHeight:NaN},getTextTracks:function(){return c?c.textTracks:[]},getTextTrack:function(e,t,n,i,r){if(c)for(var a=0;a<c.textTracks.length;a++)if(c.textTracks[a].kind===e&&(!t||c.textTracks[a].label==t)&&c.textTracks[a].language===n&&c.textTracks[a].isTTML===i&&c.textTracks[a].isEmbedded===r)return c.textTracks[a];return null},addTextTrack:function(e,t,n){return c?c.addTextTrack(e,t,n):null},appendChild:function(e){c&&(c.appendChild(e),void 0!==e.isTTML&&(c.textTracks[c.textTracks.length-1].isTTML=e.isTTML,c.textTracks[c.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){c&&c.removeChild(e)},getVideoWidth:function(){return c?c.videoWidth:NaN},getVideoHeight:function(){return c?c.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return c&&c.parentNode?c.getBoundingClientRect().top-c.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return c&&c.parentNode?c.getBoundingClientRect().left-c.parentNode.getBoundingClientRect().left:NaN},reset:function(){s.off(f.default.PLAYBACK_PLAYING,e,this)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),o=i(e(50)),f=i(e(54)),p=i(e(49));r.__dashjs_factory_name="VideoModel",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{49:49,50:50,51:51,54:54}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),i=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}return r(i,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var i=e[n];"urn:mpeg:dash:mp4protection:2011"===i.schemeIdUri.toLowerCase()&&"cenc"===i.value.toLowerCase()&&(t=i)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),i=n.getUint8(t);return t+=20,0<i&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var n=i.parsePSSHList(t);return n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e.buffer||e),n={},i=0;;){var r,a=void 0,s=void 0,o=i;if(i>=t.buffer.byteLength)break;if(r=i+t.getUint32(i),i+=4,1886614376===t.getUint32(i))if(i+=4,0===(a=t.getUint8(i))||1===a){i++,i+=3,s="";var l=void 0,u=void 0;for(l=0;l<4;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=4,s+="-",l=0;l<2;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,s+="-",l=0;l<2;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,s+="-",l=0;l<2;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,s+="-",l=0;l<6;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;i+=6,s=s.toLowerCase(),t.getUint32(i),i+=4,n[s]=t.buffer.slice(o,r),i=r}else i=r;else i=r}return n}}]),i}();n.default=i,t.exports=n.default},{}],148:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("function"==typeof e[i[Object.keys(i)[0]]])return i}return null}var c=this.context;return{createProtectionSystem:function(e){var t=null,n=(0,h.default)(c).getInstance();n.setConfig({log:e.log,BASE64:e.BASE64}),n.initialize();var i,r,a,s,o,l=(r=(i=e).log,a=i.eventBus,s=i.errHandler,void 0!==(o=i.videoModel.getElement()).onencrypted&&void 0!==o.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(r("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,f.default)(c).create({log:r,eventBus:a,events:i.events})):u(o,v)?(r("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,p.default)(c).create({log:r,eventBus:a,events:i.events,api:u(o,v)})):u(o,g)?(r("EME detected on this user agent! (ProtectionModel_01b)"),(0,m.default)(c).create({log:r,eventBus:a,errHandler:s,events:i.events,api:u(o,g)})):(r("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null));return!t&&l&&(t=(0,d.default)(c).create({protectionModel:l,protectionKeyController:n,adapter:e.adapter,eventBus:e.eventBus,log:e.log,events:e.events,BASE64:e.BASE64,Constants:e.Constants}),e.capabilities.setEncryptedMediaSupported(!0)),t}}}Object.defineProperty(n,"__esModule",{value:!0});var d=i(e(150)),h=i(e(151)),a=i(e(149)),f=i(e(157)),p=i(e(158)),m=i(e(156)),g=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],v=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];r.__dashjs_factory_name="Protection";var s=dashjs.FactoryMaker.getClassFactory(r);s.events=a.default,dashjs.FactoryMaker.updateClassFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{149:149,150:150,151:151,156:156,157:157,158:158}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(55),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=s,t.exports=n.default},{55:55}],150:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function c(e,t){var n=M.default.getPSSHForKeySystem(w,e),i=m(w);if(n){for(var r=_.getAllInitData(),a=0;a<r.length;a++)if(v.initDataEquals(n,r[a]))return void b("DRM: Ignoring initData because we have already seen it!");try{_.createKeySession(n,i,S,t)}catch(e){y.trigger(x.KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+e.message})}}else e?_.createKeySession(e,i,S,t):y.trigger(x.KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+w.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function t(e){e?(_.setMediaElement(e),y.on(x.NEED_KEY,i,this),y.on(x.INTERNAL_KEY_MESSAGE,n,this)):null===e&&(_.setMediaElement(e),y.off(x.NEED_KEY,i,this),y.off(x.INTERNAL_KEY_MESSAGE,n,this))}function m(e){var t=null,n=e.systemString;return p&&(t=n in p?p[n]:null),t}function r(e){var t=m(e),n=[],i=[],r=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:E,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:E;return u&&n.push(new A.default(u.codec,r)),f&&i.push(new A.default(f.codec,a)),new C.default(n,i,"optional","temporary"===S?"optional":"required",[S])}function s(n,o){var l=this,t=[],u=void 0;if(w){for(u=0;u<n.length;u++)if(w===n[u].ks){if("break"===function(){t.push({ks:n[u].ks,configs:[r(w)]});return y.on(x.KEY_SYSTEM_ACCESS_COMPLETE,function e(t){y.off(x.KEY_SYSTEM_ACCESS_COMPLETE,e,l),t.error?o||y.trigger(x.KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+t.error}):(b("DRM: KeySystem Access Granted"),y.trigger(x.KEY_SYSTEM_SELECTED,{data:t.data}),c(n[u].initData,n[u].cdmData))},l),_.requestKeySystemAccess(t),"break"}())break}}else if(void 0===w){var i;!function(){w=null,h.push(n);for(var e=0;e<n.length;e++)t.push({ks:n[e].ks,configs:[r(n[e].ks)]});var a=void 0,s=function e(t){y.off(x.KEY_SYSTEM_ACCESS_COMPLETE,e,l),t.error?(w=void 0,y.off(x.INTERNAL_KEY_SYSTEM_SELECTED,i,l),o||y.trigger(x.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+t.error})):(a=t.data,b("DRM: KeySystem Access Granted ("+a.keySystem.systemString+")!  Selecting key system..."),_.selectKeySystem(a))};i=function e(t){if(y.off(x.INTERNAL_KEY_SYSTEM_SELECTED,e,l),y.off(x.KEY_SYSTEM_ACCESS_COMPLETE,s,l),t.error)w=void 0,o||y.trigger(x.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+t.error});else{w=_.getKeySystem(),y.trigger(x.KEY_SYSTEM_SELECTED,{data:a});var n=m(w);n&&n.serverCertificate&&0<n.serverCertificate.length&&_.setServerCertificate(d.decodeArray(n.serverCertificate).buffer);for(var i=0;i<h.length;i++)for(u=0;u<h[i].length;u++)if(w===h[i][u].ks){if(null===h[i][u].initData&&n&&n.hasOwnProperty("clearkeys")){var r={kids:Object.keys(n.clearkeys)};h[i][u].initData=(new TextEncoder).encode(JSON.stringify(r))}c(h[i][u].initData,h[i][u].cdmData);break}}},y.on(x.INTERNAL_KEY_SYSTEM_SELECTED,i,l),y.on(x.KEY_SYSTEM_ACCESS_COMPLETE,s,l),_.requestKeySystemAccess(t)}()}else h.push(n)}function g(e,t){y.trigger(x.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function n(e){if(b("DRM: onKeyMessage"),e.error)b(e.error);else{var t=e.data;y.trigger(x.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",i=t.message,r=t.sessionToken,a=m(w),s=w.systemString,o=v.getLicenseServer(w,a,n),l={sessionToken:r,messageType:n};if(!o)return b("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+r.getSessionID()),void g(l);if(v.isClearKey(w)){var u=v.processClearKeyLicenseRequest(w,a,i);if(u)return b("DRM: ClearKey license request handled by application!"),g(l),void _.updateKeySession(r,u)}var c=new XMLHttpRequest,d=null;if(a&&a.serverURL){var h=a.serverURL;"string"==typeof h&&""!==h?d=h:"object"==typeof h&&h.hasOwnProperty(n)&&(d=h[n])}else a&&a.laURL&&""!==a.laURL?d=a.laURL:(d=w.getLicenseServerURLFromInitData(M.default.getPSSHData(r.initData)))||(d=e.data.laURL);if(d=o.getServerURLFromMessage(d,i,n)){var f=function(e,t,n,i){var r=e.response?o.getErrorResponse(e.response,n,i):"NONE";g(t,"DRM: "+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+r)};c.open(o.getHTTPMethod(n),d,!0),c.responseType=o.getResponseType(s,n),c.onload=function(){if(200==this.status){var e=o.getLicenseMessage(this.response,s,n);null!==e?(g(l),_.updateKeySession(r,e)):f(this,l,s,n)}else f(this,l,s,n)},c.onabort=function(){g(l,"DRM: "+s+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},c.onerror=function(){g(l,"DRM: "+s+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var p=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(c.withCredentials=!0),c.setRequestHeader(t,e[t])};a&&p(a.httpRequestHeaders),p(w.getRequestHeadersFromMessage(i)),a&&"boolean"==typeof a.withCredentials&&(c.withCredentials=a.withCredentials),c.send(w.getLicenseRequestFromMessage(i))}else g(l,"DRM: No license server URL specified!")}}function i(e){if(b("DRM: onNeedKey"),"cenc"===e.key.initDataType){var t=e.key.initData;if(ArrayBuffer.isView(t)&&(t=t.buffer),w){var n=M.default.getPSSHForKeySystem(w,t);if(n)for(var i=_.getAllInitData(),r=0;r<i.length;r++)if(v.initDataEquals(n,i[r]))return void b("DRM: Ignoring initData because we have already seen it!")}b("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(t)));var a=v.getSupportedKeySystems(t,p);0!==a.length?s(a,!1):b("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else b("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}var a,v=(e=e||{}).protectionKeyController,_=e.protectionModel,o=e.adapter,y=e.eventBus,x=e.events,b=e.log,d=e.BASE64,l=e.Constants,h=void 0,u=void 0,f=void 0,p=void 0,T=void 0,S=void 0,E=void 0,w=void 0;return a={initialize:function(e,t,n){if(!T){var i=void 0;t||n||(i=o.getStreamsInfo()[0]),u=t||(i?o.getMediaInfoForType(i,l.AUDIO):null);var r=(f=n||(i?o.getMediaInfoForType(i,l.VIDEO):null))||u,a=v.getSupportedKeySystemsFromContentProtection(r.contentProtection);a&&0<a.length&&s(a,!0),T=!0}},createKeySession:c,loadKeySession:function(e){_.loadKeySession(e)},removeKeySession:function(e){_.removeKeySession(e)},closeKeySession:function(e){_.closeKeySession(e)},setServerCertificate:function(e){_.setServerCertificate(e)},setMediaElement:t,setSessionType:function(e){S=e},setRobustnessLevel:function(e){E=e},setProtectionData:function(e){p=e,v.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return v.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return v?v.getKeySystems():[]},reset:function(){t(null),w=void 0,_&&(_.reset(),_=null)}},T=!(h=[]),S="temporary",E="",a}Object.defineProperty(n,"__esModule",{value:!0});var M=i(e(147)),A=i(e(169)),C=i(e(168));r.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{147:147,168:168,169:169}],151:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var r=this.context,i=void 0,o=void 0,a=void 0,t=void 0,n=void 0;return{initialize:function(){o=[];var e=void 0;e=(0,d.default)(r).getInstance({BASE64:a}),o.push(e),e=(0,c.default)(r).getInstance({BASE64:a}),o.push(e),e=(0,s.default)(r).getInstance({BASE64:a}),o.push(e),t=e,e=(0,u.default)(r).getInstance({BASE64:a,log:i}),o.push(e),n=e},setProtectionData:function(e){for(var t=0;t<o.length;t++){var n=o[t];n.hasOwnProperty("init")&&n.init((i=n.systemString,r=void 0,r=null,e&&(r=i in e?e[i]:null),r))}var i,r},isClearKey:function(e){return e===t||e===n},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),i=new Uint8Array(t),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0},getKeySystems:function(){return o},getKeySystemBySystemString:function(e){for(var t=0;t<o.length;t++)if(o[t].systemString===e)return o[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,i=void 0,r=void 0,a=[];if(e)for(i=0;i<o.length;++i)for(n=o[i],r=0;r<e.length;++r)if((t=e[r]).schemeIdUri.toLowerCase()===n.schemeIdURI){var s=n.getInitData(t);s?a.push({ks:o[i],initData:s,cdmData:n.getCDMData()}):this.isClearKey(n)&&a.push({ks:n,initData:null})}return a},getSupportedKeySystems:function(e,t){for(var n=[],i=l.default.parsePSSHList(e),r=0;r<o.length;++r){var a=o[r].systemString,s=!t||a in t;o[r].uuid in i&&s&&n.push({ks:o[r],initData:i[o[r].uuid]})}return n},getLicenseServer:function(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var i=null;return t&&t.hasOwnProperty("drmtoday")?i=(0,h.default)(r).getInstance({BASE64:a}):e.systemString===g.default.WIDEVINE_KEYSTEM_STRING?i=(0,p.default)(r).getInstance():e.systemString===g.default.PLAYREADY_KEYSTEM_STRING?i=(0,f.default)(r).getInstance():e.systemString===g.default.CLEARKEY_KEYSTEM_STRING&&(i=(0,m.default)(r).getInstance()),i},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return i("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.log&&(i=e.log),e.BASE64&&(a=e.BASE64))}}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(147)),s=i(e(152)),u=i(e(154)),c=i(e(155)),d=i(e(153)),h=i(e(160)),f=i(e(161)),p=i(e(162)),m=i(e(159)),g=i(e(102));r.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,147:147,152:152,153:153,154:154,155:155,159:159,160:160,161:161,162:162}],152:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(e=e||{}).BASE64;return{uuid:o,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:c,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],a=0;a<i.kids.length;a++){var s=i.kids[a],o=e.clearkeys&&e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!o)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");r.push(new l.default(s,o))}n=new u.default(r)}return n}}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(166)),u=i(e(163)),a=i(e(147)),s=i(e(102)),o="e2719d58-a985-b3c9-781a-b030af78d30e",c=s.default.CLEARKEY_KEYSTEM_STRING;r.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,147:147,163:163,166:166}],153:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function c(){if(!d||!d.hasOwnProperty("decodeArray")||!d.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}var u="utf16",d=(e=e||{}).BASE64;return{uuid:s,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:o,getInitData:function(e){var t,n,i,r=new Uint8Array([112,115,115,104,0,0,0,0]),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=0,o=null,l=void 0,u=void 0;if(c(),"pssh"in e)return h.default.parseInitDataFromContentProtection(e,d);if("pro"in e)o=d.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;o=d.decodeArray(e.prheader.__text)}return t=o.length,n=4+r.length+a.length+4+t,i=new ArrayBuffer(n),l=new Uint8Array(i),(u=new DataView(i)).setUint32(s,n),s+=4,l.set(r,s),s+=r.length,l.set(a,s),s+=a.length,u.setUint32(s,t),s+=4,l.set(o,s),s+=t,l.buffer},getRequestHeadersFromMessage:function(e){var t,n=void 0,i={},r=new DOMParser,a="utf16"===u?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,a);for(var s=(n=r.parseFromString(t,"application/xml")).getElementsByTagName("name"),o=n.getElementsByTagName("value"),l=0;l<s.length;l++)i[s[l].childNodes[0].nodeValue]=o[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i},getLicenseRequestFromMessage:function(e){var t,n=void 0,i=null,r=new DOMParser,a="utf16"===u?new Uint16Array(e):new Uint8Array(e);if(c(),t=String.fromCharCode.apply(null,a),(n=r.parseFromString(t,"application/xml")).getElementsByTagName("Challenge")[0]){var s=n.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;s&&(i=d.decode(s))}return i},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),i=6,r=new DOMParser,a=0;a<n;a++){var s=t.getUint16(i,!0);i+=2;var o=t.getUint16(i,!0);if(i+=2,1===s){var l=e.slice(i,i+o),u=String.fromCharCode.apply(null,new Uint16Array(l)),c=r.parseFromString(u,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var d=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(d)return d}if(c.getElementsByTagName("LUI_URL")[0]){var h=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(h)return h}}else i+=o}return null},getCDMData:function(){var e=void 0,t=void 0,n=void 0,i=void 0;if(c(),l&&l.cdmData){for(e=[],i=0;i<l.cdmData.length;++i)e.push(l.cdmData.charCodeAt(i)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=d.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),n=[],i=0;i<t.length;++i)n.push(t.charCodeAt(i)),n.push(0);return new Uint8Array(n).buffer}return null},setPlayReadyMessageFormat:function(e){if("utf8"!==e&&"utf16"!==e)throw new Error("Illegal PlayReady message format! -- "+e);u=e},init:function(e){e&&(l=e)}}}Object.defineProperty(n,"__esModule",{value:!0});var h=i(e(147)),a=i(e(102)),s="9a04f079-9840-4286-ab92-e65be0885f95",o=a.default.PLAYREADY_KEYSTEM_STRING,l=void 0;r.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,147:147}],154:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.BASE64,l=e.log;return{uuid:o,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:d,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],a=0;a<i.kids.length;a++){var s=i.kids[a],o=e.clearkeys&&e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!o)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");r.push(new u.default(s,o))}n=new c.default(r),l("Warning: ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}Object.defineProperty(n,"__esModule",{value:!0});var u=i(e(166)),c=i(e(163)),a=i(e(147)),s=i(e(102)),o="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",d=s.default.CLEARKEY_KEYSTEM_STRING;r.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,147:147,163:163,166:166}],155:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var n=null,i=(e=e||{}).BASE64;return{uuid:o,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:l,init:function(e){e&&(n=e)},getInitData:function(e){var t=null;return(t=n&&n.pssh?i.decodeArray(n.pssh).buffer:a.default.parseInitDataFromContentProtection(e,i))&&(t=function(e,t){var n=void 0,i=!0,r=void 0,a=void 0,s=void 0;for(n=new Uint8Array(e),a=0;a<=n.length-18;a++)if(18===n[a]&&16===n[a+1]){for(s=r=a+2;s<r+16;s++)if(255!==n[s]){i=!1;break}break}return i&&n.set(t,r),n.buffer}(t,e["cenc:default_KID"])),t},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(147)),s=i(e(102)),o="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=s.default.WIDEVINE_KEYSTEM_STRING;r.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,147:147}],156:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){p[o.cancelKeyRequest](u.systemString,e.sessionID)}function a(e,t){if(t&&e){for(var n=e.length,i=0;i<n;i++)if(e[i].sessionID==t)return e[i];return null}return null}function n(){p.removeEventListener(o.keyerror,v),p.removeEventListener(o.needkey,v),p.removeEventListener(o.keymessage,v),p.removeEventListener(o.keyadded,v)}e=e||{};var i,r=this.context,h=e.eventBus,f=e.events,s=e.log,o=e.api,l=e.errHandler,p=void 0,u=void 0,m=void 0,c=void 0,d=void 0,g=void 0,v=void 0;return i={getAllInitData:function(){for(var e=[],t=0;t<c.length;t++)e.push(c[t].initData);for(t=0;t<d.length;t++)e.push(d[t].initData);return e},requestKeySystemAccess:function(e){var t=p;t||(t=document.createElement("video"));for(var n=!1,i=0;i<e.length;i++)for(var r=e[i].ks.systemString,a=e[i].configs,s=null,o=0;o<a.length;o++){var l=a[o].videoCapabilities;if(l&&0!==l.length){s=[];for(var u=0;u<l.length;u++)""!==t.canPlayType(l[u].contentType,r)&&s.push(l[u])}if(s&&(!s||0!==s.length)){n=!0;var c=new T.default(null,s),d=m.getKeySystemBySystemString(r);h.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{data:new S.default(d,c)});break}}n||h.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return u},selectKeySystem:function(e){u=e.keySystem,h.trigger(f.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){p!==e&&(p&&n(),(p=e)&&(p.addEventListener(o.keyerror,v),p.addEventListener(o.needkey,v),p.addEventListener(o.keymessage,v),p.addEventListener(o.keyadded,v),h.trigger(f.VIDEO_ELEMENT_SELECTED)))},createKeySession:function(e){if(!u)throw new Error("Can not create sessions until you have selected a key system");if(g||0===d.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return c.push(t),p[o.generateKeyRequest](u.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(m.isClearKey(u))for(var i=0;i<t.keyPairs.length;i++)p[o.addKey](u.systemString,t.keyPairs[i].key,t.keyPairs[i].keyID,n);else p[o.addKey](u.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:t,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},reset:function(){p&&n();for(var e=0;e<d.length;e++)t(d[e]);h.trigger(f.TEARDOWN_COMPLETE)}},u=p=null,c=[],d=[],m=(0,_.default)(r).getInstance(),v={handleEvent:function(e){var t=null;switch(e.type){case o.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;h.trigger(f.NEED_KEY,{key:new y.default(n,"cenc")});break;case o.keyerror:if((t=a(d,e.sessionId))||(t=a(c,e.sessionId)),t){var i="";switch(e.errorCode.code){case 1:i+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:i+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:i+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:i+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:i+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:i+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}i+="  System Code = "+e.systemCode,h.trigger(f.KEY_ERROR,{data:new x.default(t,i)})}else s("No session token found for key error");break;case o.keyadded:(t=a(d,e.sessionId))||(t=a(c,e.sessionId)),t?(s("DRM: Key added."),h.trigger(f.KEY_ADDED,{data:t})):s("No session token found for key added");break;case o.keymessage:if((g=null!==e.sessionId&&void 0!==e.sessionId)?!(t=a(d,e.sessionId))&&0<c.length&&(t=c.shift(),d.push(t),t.sessionID=e.sessionId):0<c.length&&(t=c.shift(),d.push(t),0!==c.length&&l.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var r=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=r,h.trigger(f.INTERNAL_KEY_MESSAGE,{data:new b.default(t,r,e.defaultURL)})}else s("No session token found for key message")}}},i}Object.defineProperty(n,"__esModule",{value:!0});var _=i(e(151)),y=i(e(170)),x=i(e(164)),b=i(e(165)),T=i(e(168)),S=i(e(167));r.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{151:151,164:164,165:165,167:167,168:168,170:170}],157:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function r(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function s(e){for(var t=0;t<f.length;t++)if(f[t]===e){f.splice(t,1);break}}function o(e,t,n){var i={session:e,initData:t,handleEvent:function(e){switch(e.type){case"keystatuseschange":l.trigger(u.KEY_STATUSES_CHANGED,{data:this});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;l.trigger(u.INTERNAL_KEY_MESSAGE,{data:new _.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",i),e.addEventListener("message",i),e.closed.then(function(){s(i),c("DRM: Session closed.  SessionID = "+i.getSessionID()),l.trigger(u.KEY_SESSION_CLOSED,{data:i.getSessionID()})}),f.push(i),i}e=e||{};var t,n=this.context,l=e.eventBus,u=e.events,c=e.log,d=void 0,a=void 0,h=void 0,f=void 0,p=void 0,i=void 0;return t={getAllInitData:function(){for(var e=[],t=0;t<f.length;t++)e.push(f[t].initData);return e},requestKeySystemAccess:function(e){!function e(t,n){var i,r,a;r=t[i=n].ks,a=t[i].configs,navigator.requestMediaKeySystemAccess(r.systemString,a).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new y.default(r,t);n.mksa=e,l.trigger(u.KEY_SYSTEM_ACCESS_COMPLETE,{data:n})}).catch(function(){++i<t.length?e(t,i):l.trigger(u.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(e,0)},getKeySystem:function(){return d},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){d=t.keySystem,h=e,a&&a.setMediaKeys(h).then(function(){l.trigger(u.INTERNAL_KEY_SYSTEM_SELECTED)})}).catch(function(){l.trigger(u.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){a!==e&&(a&&(a.removeEventListener("encrypted",p),a.setMediaKeys(null)),(a=e)&&(a.addEventListener("encrypted",p),h&&a.setMediaKeys(h)))},setServerCertificate:function(e){if(!d||!h)throw new Error("Can not set server certificate until you have selected a key system");h.setServerCertificate(e).then(function(){c("DRM: License server certificate successfully updated."),l.trigger(u.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){l.trigger(u.SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})},createKeySession:function(e,t,n){if(!d||!h)throw new Error("Can not create sessions until you have selected a key system");var i=h.createSession(n),r=o(i,e,n),a=this.getKeySystem().systemString===x.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";i.generateRequest(a,e).then(function(){c("DRM: Session created.  SessionID = "+r.getSessionID()),l.trigger(u.KEY_SESSION_CREATED,{data:r})}).catch(function(e){s(r),l.trigger(u.KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})},updateKeySession:function(t,e){var n=t.session;i.isClearKey(d)&&(e=e.toJWK()),n.update(e).catch(function(e){l.trigger(u.KEY_ERROR,{data:new v.default(t,"Error sending update() message! "+e.name)})})},loadKeySession:function(n){if(!d||!h)throw new Error("Can not load sessions until you have selected a key system");var i=h.createSession();i.load(n).then(function(e){if(e){var t=o(i);c("DRM: Session created.  SessionID = "+t.getSessionID()),l.trigger(u.KEY_SESSION_CREATED,{data:t})}else l.trigger(u.KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+n+")"})}).catch(function(e){l.trigger(u.KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+n+")! "+e.name})})},removeKeySession:function(t){t.session.remove().then(function(){c("DRM: Session removed.  SessionID = "+t.getSessionID()),l.trigger(u.KEY_SESSION_REMOVED,{data:t.getSessionID()})},function(e){l.trigger(u.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name})})},closeKeySession:function(t){r(t).catch(function(e){s(t),l.trigger(u.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name})})},reset:function(){var n=f.length,i=void 0;0!==n?function(){for(var t=function(e){s(e),0===f.length&&(a?(a.removeEventListener("encrypted",p),a.setMediaKeys(null).then(function(){l.trigger(u.TEARDOWN_COMPLETE)})):l.trigger(u.TEARDOWN_COMPLETE))},e=0;e<n;e++)!function(e){i.session.closed.then(function(){t(e)}),r(i).catch(function(){t(e)})}(i=f[e])}():l.trigger(u.TEARDOWN_COMPLETE)}},h=a=d=null,f=[],i=(0,m.default)(n).getInstance(),p={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;l.trigger(u.NEED_KEY,{key:new g.default(t,e.initDataType)})}}}},t}Object.defineProperty(n,"__esModule",{value:!0});var m=i(e(151)),g=i(e(170)),v=i(e(164)),_=i(e(165)),y=i(e(167)),x=i(e(102));r.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{102:102,151:151,164:164,165:165,167:167,170:170}],158:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){var t=e.session;t.removeEventListener(g.error,e),t.removeEventListener(g.message,e),t.removeEventListener(g.ready,e),t.removeEventListener(g.close,e);for(var n=0;n<h.length;n++)if(h[n]===e){h.splice(n,1);break}t[g.release]()}function n(){var e=null,t=function(){a.removeEventListener("loadedmetadata",e),a[g.setMediaKeys](c),p.trigger(m.VIDEO_ELEMENT_SELECTED)};1<=a.readyState?t():(e=t.bind(this),a.addEventListener("loadedmetadata",e))}e=e||{};var i,r=this.context,p=e.eventBus,m=e.events,l=e.log,g=e.api,a=void 0,u=void 0,c=void 0,d=void 0,h=void 0,s=void 0,v=void 0;return i={getAllInitData:function(){for(var e=[],t=0;t<h.length;t++)e.push(h[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var i=e[n].ks.systemString,r=e[n].configs,a=null,s=null,o=0;o<r.length;o++){var l=r[o].audioCapabilities,u=r[o].videoCapabilities;if(l&&0!==l.length){a=[];for(var c=0;c<l.length;c++)window[g.MediaKeys].isTypeSupported(i,l[c].contentType)&&a.push(l[c])}if(u&&0!==u.length){s=[];for(var d=0;d<u.length;d++)window[g.MediaKeys].isTypeSupported(i,u[d].contentType)&&s.push(u[d])}if(!(!a&&!s||a&&0===a.length||s&&0===s.length)){t=!0;var h=new x.default(a,s),f=v.getKeySystemBySystemString(i);p.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{data:new b.default(f,h)});break}}t||p.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return u},selectKeySystem:function(e){try{c=e.mediaKeys=new window[g.MediaKeys](e.keySystem.systemString),u=e.keySystem,d=e,a&&n(),p.trigger(m.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){p.trigger(m.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+u.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){a!==e&&(a&&a.removeEventListener(g.needkey,s),(a=e)&&(a.addEventListener(g.needkey,s),c&&n()))},createKeySession:function(e,t,n,i){if(!u||!c||!d)throw new Error("Can not create sessions until you have selected a key system");var r=null;if(null!==d.ksConfiguration.videoCapabilities&&0<d.ksConfiguration.videoCapabilities.length&&(r=d.ksConfiguration.videoCapabilities[0]),null===r&&null!==d.ksConfiguration.audioCapabilities&&0<d.ksConfiguration.audioCapabilities.length&&(r=d.ksConfiguration.audioCapabilities[0]),null===r)throw new Error("Can not create sessions for unknown content types.");var a=r.contentType,s=c.createSession(a,new Uint8Array(e),i?new Uint8Array(i):null),o={session:s,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case g.error:p.trigger(m.KEY_ERROR,{data:new _.default(this,"KeyError")});break;case g.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;p.trigger(m.INTERNAL_KEY_MESSAGE,{data:new y.default(this,t,e.destinationURL)});break;case g.ready:l("DRM: Key added."),p.trigger(m.KEY_ADDED);break;case g.close:l("DRM: Session closed.  SessionID = "+this.getSessionID()),p.trigger(m.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}};s.addEventListener(g.error,o),s.addEventListener(g.message,o),s.addEventListener(g.ready,o),s.addEventListener(g.close,o),h.push(o),l("DRM: Session created.  SessionID = "+o.getSessionID()),p.trigger(m.KEY_SESSION_CREATED,{data:o})},updateKeySession:function(e,t){var n=e.session;v.isClearKey(u)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:t,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},reset:function(){try{for(var e=0;e<h.length;e++)t(h[e]);a&&a.removeEventListener(g.needkey,s),p.trigger(m.TEARDOWN_COMPLETE)}catch(e){p.trigger(m.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}},d=c=u=a=null,h=[],v=(0,o.default)(r).getInstance(),s={handleEvent:function(e){switch(e.type){case g.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;p.trigger(m.NEED_KEY,{key:new f.default(t,"cenc")})}}}},i}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(151)),f=i(e(170)),_=i(e(164)),y=i(e(165)),x=i(e(168)),b=i(e(167));r.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{151:151,164:164,165:165,167:167,168:168,170:170}],159:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){return{getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var i=0;i<n.kids.length;i++)e+=n.kids[i]+"&";return e.substring(0,e.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var i=e.keys[n],r=i.kid.replace(/=/g,""),a=i.k.replace(/=/g,"");t.push(new s.default(r,a))}return new o.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0});var s=i(e(166)),o=i(e(163));r.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{163:163,166:166}],160:[function(e,t,n){"use strict";function i(e){var n=(e=e||{}).BASE64,i={};return i[s.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},i[s.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return i[e].responseType},getLicenseMessage:function(e,t){return function(){if(!n||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),i[t].getLicenseMessage(e)},getErrorResponse:function(e,t){return i[t].getErrorResponse(e)}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(102),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{102:102}],161:[function(e,t,n){"use strict";function i(){function m(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}var g="http://schemas.xmlsoap.org/soap/envelope/";return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=m(e),n=(new window.DOMParser).parseFromString(t,"text/xml"),i=n?n.getElementsByTagNameNS(g,"Envelope")[0]:null,r=i?i.getElementsByTagNameNS(g,"Body")[0]:null;if(r&&r.getElementsByTagNameNS(g,"Fault")[0])return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",i="",r=-1,a=-1;if(window.DOMParser){var s=m(e),o=(new window.DOMParser).parseFromString(s,"text/xml"),l=o?o.getElementsByTagNameNS(g,"Envelope")[0]:null,u=l?l.getElementsByTagNameNS(g,"Body")[0]:null,c=u?u.getElementsByTagNameNS(g,"Fault")[0]:null,d=c?c.getElementsByTagName("detail")[0]:null,h=d?d.getElementsByTagName("Exception")[0]:null,f=null;if(null===c)return s;t=(f=c.getElementsByTagName("faultstring")[0].firstChild)?f.nodeValue:null,null!==h&&(n=(f=h.getElementsByTagName("StatusCode")[0])?f.firstChild.nodeValue:null,r=(i=(f=h.getElementsByTagName("Message")[0])?f.firstChild.nodeValue:null)?i.lastIndexOf("[")+1:-1,a=i?i.indexOf("]"):-1,i=i?i.substring(r,a):"")}var p="code: "+n+", name: "+t;return i&&(p+=", message: "+i),p}.call(this,e)}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],162:[function(e,t,n){"use strict";function i(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],163:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function n(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}return i(n,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var i={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(i)}this.type&&(n.type=this.type);var r=JSON.stringify(n),a=r.length,s=new ArrayBuffer(a),o=new Uint8Array(s);for(e=0;e<a;e++)o[e]=r.charCodeAt(e);return s}}]),n}();n.default=r,t.exports=n.default},{}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.sessionToken=t,this.error=n},t.exports=n.default},{}],165:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=r||"license-request"},t.exports=n.default},{}],166:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.keyID=t,this.key=n},t.exports=n.default},{}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.keySystem=t,this.ksConfiguration=n},t.exports=n.default},{}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i,r,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=r,this.sessionTypes=a},t.exports=n.default},{}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.contentType=t,this.robustness=n},t.exports=n.default},{}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.initData=t,this.initDataType=n},t.exports=n.default},{}],171:[function(e,t,n){"use strict";function i(){var r=[],a=0,s=0;return{push:function(e,t){var n=t.droppedVideoFrames-a;a=t.droppedVideoFrames;var i=t.totalVideoFrames-s;s=t.totalVideoFrames,isNaN(e)||(r[e]?(r[e].droppedVideoFrames+=n,r[e].totalVideoFrames+=i):r[e]={droppedVideoFrames:n,totalVideoFrames:i})},getFrameHistory:function(){return r},reset:function(e){r=[],a=e.droppedVideoFrames,s=e.totalVideoFrames}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="DroppedFramesHistory";var o=s.default.getClassFactory(i);n.default=o,t.exports=n.default},{51:51}],172:[function(e,t,n){"use strict";function i(e){var t=(e=e||{}).abrController,n=e.streamProcessor,i=e.streamProcessor.getCurrentRepresentationInfo(),r=e.switchHistory,a=e.droppedFramesHistory,s=e.currentRequest,o=e.useBufferOccupancyABR;return{getMediaType:function(){return i.mediaInfo.type},getMediaInfo:function(){return i.mediaInfo},getDroppedFramesHistory:function(){return a},getCurrentRequest:function(){return s},getSwitchHistory:function(){return r},getStreamInfo:function(){return i.mediaInfo.streamInfo},getStreamProcessor:function(){return n},getAbrController:function(){return t},getRepresentationInfo:function(){return i},useBufferOccupancyABR:function(){return o}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="RulesContext",n.default=s.default.getClassFactory(i),t.exports=n.default},{51:51}],173:[function(e,t,n){"use strict";function i(e,t,n){var i,r;return(i=n)!==(r=o.DEFAULT)&&i!==o.STRONG&&i!==o.WEAK||(r=i),{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:r}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r},o={DEFAULT:.5,STRONG:1,WEAK:0};i.__dashjs_factory_name="SwitchRequest";var l=s.default.getClassFactory(i);l.NO_CHANGE=-1,l.PRIORITY=o,s.default.updateClassFactory(i.__dashjs_factory_name,l),n.default=l,t.exports=n.default},{51:51}],174:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var s=[],o=[];return{push:function(e){e.newValue===l.default.NO_CHANGE&&(e.newValue=e.oldValue),s[e.oldValue]||(s[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,i=n?-t:0,r=n?0:1;if(s[e.oldValue].drops+=n,s[e.oldValue].dropSize+=i,s[e.oldValue].noDrops+=r,o.push({idx:e.oldValue,noDrop:r,drop:n,dropSize:i}),8<o.length){var a=o.shift();s[a.idx].drops-=a.drop,s[a.idx].dropSize-=a.dropSize,s[a.idx].noDrops-=a.noDrop}},getSwitchRequests:function(){return s},reset:function(){s=[],o=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),l=i(e(173));r.__dashjs_factory_name="SwitchRequestHistory";var s=a.default.getClassFactory(r);n.default=s,t.exports=n.default},{173:173,51:51}],175:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function d(e,t,n,i){var r=Math.pow(.5,n/i.fast);e.fastEstimate=(1-r)*t+r*e.fastEstimate;var a=Math.pow(.5,n/i.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n}function n(e,t,n){return p.getMovingAverageMethod()!==x.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?y.throughputHalfLife:y.latencyHalfLife,i=e?v[t]:_[t];if(!i||i.totalWeight<=0)return NaN;var r=i.fastEstimate/(1-Math.pow(.5,i.totalWeight/n.fast)),a=i.slowEstimate/(1-Math.pow(.5,i.totalWeight/n.slow));return e?Math.min(r,a):Math.max(r,a)}(e,t):(a=function(e,t,n){var i=void 0,r=void 0;if(r=e?(i=m[t],n?o:l):(i=g[t],u),i){if(r>=i.length)r=i.length;else if(e)for(var a=1;a<r;++a){var s=i[-a]/i[-a-1];if((f<=s||s<=1/c)&&(r+=1)===i.length)break}}else r=0;return r}(i=e,r=t,n),s=(i?m:g)[r],0!==a&&s&&0!==s.length?(s=s.slice(-a)).reduce(function(e,t){return e+t})/s.length:NaN);var i,r,a,s}function i(e,t){return n(!0,e,t)}function h(e){m[e]=m[e]||[],g[e]=g[e]||[],v[e]=v[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},_[e]=_[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function t(){m={},g={},v={},_={}}var o=3,l=4,u=4,c=1.3,f=1.3,p=(e=e||{}).mediaPlayerModel,m=void 0,g=void 0,v=void 0,_=void 0,y=void 0,r={push:function(e,t,n){if(t.trace&&t.trace.length){var i=t.tresponse.getTime()-t.trequest.getTime()||1,r=t._tfinish.getTime()-t.tresponse.getTime()||1,a=t.trace.reduce(function(e,t){return e+t.b[0]},0),s=n?r:i+r,o=Math.round(8*a/s);if(h(e),c=r,(u=e)===x.default.VIDEO?c<p.getCacheLoadThresholdForType(x.default.VIDEO):u===x.default.AUDIO?c<p.getCacheLoadThresholdForType(x.default.AUDIO):void 0){if(0<m[e].length&&!m[e].hasCachedEntries)return;m[e].hasCachedEntries=!0}else m[e]&&m[e].hasCachedEntries&&(delete m[l=e],delete g[l],delete v[l],delete _[l],h(l));m[e].push(o),20<m[e].length&&m[e].shift(),g[e].push(i),20<g[e].length&&g[e].shift(),d(v[e],o,.001*r,y.throughputHalfLife),d(_[e],i,1,y.latencyHalfLife)}var l,u,c},getAverageThroughput:i,getSafeAverageThroughput:function(e,t){var n=i(e,t);return isNaN(n)||(n*=p.getBandwidthSafetyFactor()),n},getAverageLatency:function(e){return n(!1,e)},reset:t};return y={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},t(),r}Object.defineProperty(n,"__esModule",{value:!0});var x=i(e(100)),a=i(e(51));r.__dashjs_factory_name="ThroughputHistory",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,51:51}],176:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function n(e){return e.filter(function(e){return e.quality>m.default.NO_CHANGE})}function i(e){var t={},n=void 0,i=void 0,r=void 0,a=void 0,s=void 0;if(0!==e.length){for(t[m.default.PRIORITY.STRONG]=m.default.NO_CHANGE,t[m.default.PRIORITY.WEAK]=m.default.NO_CHANGE,t[m.default.PRIORITY.DEFAULT]=m.default.NO_CHANGE,n=0,i=e.length;n<i;n+=1)(r=e[n]).quality!==m.default.NO_CHANGE&&(t[r.priority]=t[r.priority]>m.default.NO_CHANGE?Math.min(t[r.priority],r.quality):r.quality);return t[m.default.PRIORITY.WEAK]!==m.default.NO_CHANGE&&(a=t[m.default.PRIORITY.WEAK]),t[m.default.PRIORITY.DEFAULT]!==m.default.NO_CHANGE&&(a=t[m.default.PRIORITY.DEFAULT]),t[m.default.PRIORITY.STRONG]!==m.default.NO_CHANGE&&(a=t[m.default.PRIORITY.STRONG]),a!==m.default.NO_CHANGE&&(s=a),(0,m.default)(o).create(s)}}e=e||{};var o=this.context,t=e.mediaPlayerModel,r=e.metricsModel,a=e.dashMetrics,s=void 0,l=void 0;return{initialize:function(){s=[],l=[],t.getUseDefaultABRRules()&&(s.push((0,p.default)(o).create({metricsModel:r,dashMetrics:a,mediaPlayerModel:t})),s.push((0,u.default)(o).create({metricsModel:r,dashMetrics:a})),s.push((0,c.default)(o).create({metricsModel:r,dashMetrics:a})),s.push((0,f.default)(o).create()),s.push((0,h.default)(o).create()),l.push((0,d.default)(o).create({metricsModel:r,dashMetrics:a,mediaPlayerModel:t}))),t.getABRCustomRules().forEach(function(e){e.type===g&&s.push(e.rule(o).create()),e.type===v&&l.push(e.rule(o).create())})},reset:function(){[s,l].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),s=[],l=[]},getMaxQuality:function(t){return i(n(s.map(function(e){return e.getMaxIndex(t)})))||(0,m.default)(o).create()},shouldAbandonFragment:function(t){return i(n(l.map(function(e){return e.shouldAbandon(t)})))||(0,m.default)(o).create()}}}Object.defineProperty(n,"__esModule",{value:!0});var u=i(e(182)),c=i(e(180)),d=i(e(177)),h=i(e(179)),f=i(e(181)),p=i(e(178)),a=i(e(51)),m=i(e(173)),g="qualitySwitchRules",v="abandonFragmentRules";r.__dashjs_factory_name="ABRRulesCollection";var s=a.default.getClassFactory(r);s.QUALITY_SWITCH_RULES=g,s.ABANDON_FRAGMENT_RULES=v,a.default.updateSingletonFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{173:173,177:177,178:178,179:179,180:180,181:181,182:182,51:51}],177:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function A(e){function t(){E={},w={},M=[]}e=e||{};var g=1.8,v=500,_=5,y=this.context,x=(0,a.default)(y).getInstance().log,b=e.mediaPlayerModel,T=e.metricsModel,S=e.dashMetrics,E=void 0,w=void 0,M=void 0,n={shouldAbandon:function(e){var t=(0,C.default)(y).create(C.default.NO_CHANGE,{name:A.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var n,i,r,a,s=e.getMediaInfo(),o=e.getMediaType(),l=e.getCurrentRequest();if(!isNaN(l.index)){r=o,a=l.index,E[r]=E[r]||{},E[r][a]=E[r][a]||{};var u=b.getStableBufferTime();if(S.getCurrentBufferLevel(T.getReadOnlyMetricsFor(o))>u)return t;var c=E[o][l.index];if(null===c||null===l.firstByteDate||w.hasOwnProperty(c.id))return t;if(void 0===c.firstByteTime&&(M[o]=[],c.firstByteTime=l.firstByteDate.getTime(),c.segmentDuration=l.duration,c.bytesTotal=l.bytesTotal,c.id=l.index),c.bytesLoaded=l.bytesLoaded,c.elapsedTime=(new Date).getTime()-c.firstByteTime,0<c.bytesLoaded&&0<c.elapsedTime&&(n=o,i=Math.round(8*c.bytesLoaded/c.elapsedTime),M[n]=M[n]||[],M[n].push(i)),M[o].length>=_&&c.elapsedTime>v&&c.bytesLoaded<c.bytesTotal){var d=M[o].reduce(function(e,t){return e+t},0);if(c.measuredBandwidthInKbps=Math.round(d/M[o].length),c.estimatedTimeOfDownload=+(8*c.bytesTotal/c.measuredBandwidthInKbps/1e3).toFixed(2),c.estimatedTimeOfDownload<c.segmentDuration*g||0===e.getRepresentationInfo().quality)return t;if(!w.hasOwnProperty(c.id)){var h=e.getAbrController(),f=c.bytesTotal-c.bytesLoaded,p=h.getBitrateList(s),m=h.getQualityForBitrate(s,c.measuredBandwidthInKbps*b.getBandwidthSafetyFactor());f>c.bytesTotal*p[m].bitrate/p[h.getQualityFor(o,s.streamInfo)].bitrate&&(t.quality=m,t.reason.throughput=c.measuredBandwidthInKbps,t.reason.fragmentID=c.id,w[c.id]=c,x("AbandonRequestsRule ( ",o,"frag id",c.id,") is asking to abandon and switch to quality to ",m," measured bandwidth was",c.measuredBandwidthInKbps),delete E[o][c.id])}}else c.bytesLoaded===c.bytesTotal&&delete E[o][c.id]}return t},reset:t};return t(),n}Object.defineProperty(n,"__esModule",{value:!0});var C=i(e(173)),r=i(e(51)),a=i(e(49));A.__dashjs_factory_name="AbandonRequestsRule",n.default=r.default.getClassFactory(A),t.exports=n.default},{173:173,49:49,51:51}],178:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function s(e,t,i){var n=i.reduce(function(e,t,n){return t>i[e]?n:e},0);if(0===n)return null;var r=Math.max(e,10+2*t.length),a=(i[n]-1)/(r/10-1);return{gp:a,Vp:10/a}}function S(e){var t={},n=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),i=n.map(function(e){return Math.log(e)});i=i.map(function(e){return e-i[0]+1});var r=d.getStableBufferTime(),a=s(r,n,i);return a?(t.state=1,t.bitrates=n,t.utilities=i,t.stableBufferTime=r,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,E(t)):t.state=0,t}function E(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function w(e,t){var n=d.getStableBufferTime();if(e.stableBufferTime!==n){var i=s(n,e.bitrates,e.utilities);if(i.Vp!==e.Vp||i.gp!==e.gp){var r=R.getCurrentBufferLevel(D.getReadOnlyMetricsFor(t)),a=r+e.placeholderBuffer;a-=10,a*=i.Vp/e.Vp,a+=10,e.stableBufferTime=n,e.Vp=i.Vp,e.gp=i.gp,e.placeholderBuffer=Math.max(0,a-r)}}}function M(e,t){return e.Vp*(e.utilities[t]+e.gp)}function A(e,t){for(var n=e.bitrates[t],i=e.utilities[t],r=0,a=t-1;0<=a;--a)if(e.utilities[a]<e.utilities[t]){var s=e.bitrates[a],o=e.utilities[a],l=e.Vp*(e.gp+(n*o-s*i)/(n-s));r=Math.max(r,l)}return r}function t(){for(var e in k)k.hasOwnProperty(e)&&2===k[e].state&&(k[e].placeholderBuffer=0)}function n(){for(var e in k)if(k.hasOwnProperty(e)){var t=k[e];0!==t.state&&(t.state=1,E(t))}}function i(){}function r(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=k[e.chunk.mediaInfo.type];if(t&&0!==t.state){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,o(t,e.chunk.mediaInfo.type)}}}function a(e){if(e&&e.metric===p.default.HTTP_REQUEST&&e.value&&e.value.type===m.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=k[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),o(t,e.mediaType))}}function o(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var n=R.getCurrentBufferLevel(D.getReadOnlyMetricsFor(t))+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),i=M(e,e.lastQuality),r=Math.max(0,i-n);e.placeholderBuffer=Math.min(r,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function l(e){if(e){var t=k[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function u(e){if(e){var t=k[e.mediaType];if(t&&0!==t.state){var n,i=R.getCurrentBufferLevel(D.getReadOnlyMetricsFor(e.mediaType));n=0<t.abrQuality?A(t,t.abrQuality):10;var r=Math.max(0,n-i);t.placeholderBuffer=Math.min(t.placeholderBuffer,r)}}}function c(){k={}}e=e||{};var C=this.context,P=(0,_.default)(C).getInstance().log,R=e.dashMetrics,D=e.metricsModel,d=e.mediaPlayerModel,h=(0,g.default)(C).getInstance(),f=void 0,k=void 0;return f={getMaxIndex:function(e){var t=e.getMediaInfo(),n=e.getMediaType(),i=D.getReadOnlyMetricsFor(n),r=e.getStreamProcessor(),a=e.getStreamInfo(),s=e.getAbrController(),o=s.getThroughputHistory(),l=a?a.id:null,u=a&&a.manifestInfo&&a.manifestInfo.isDynamic,c=e.useBufferOccupancyABR(),d=(0,I.default)(C).create();if(d.reason=d.reason||{},!c)return d;r.getScheduleController().setTimeToLoadDelay(0);var h,f,p,m=(f=(h=e).getMediaType(),(p=k[f])?0!==p.state&&w(p,f):(p=S(h),k[f]=p),p);if(0===m.state)return P("BOLA ABR rule invoked for media type '"+n+"' with only one bitrate."),d;var g=R.getCurrentBufferLevel(i),v=o.getAverageThroughput(n,u),_=o.getSafeAverageThroughput(n,u),y=o.getAverageLatency(n),x=void 0;if(d.reason.state=m.state,d.reason.throughput=v,d.reason.latency=y,isNaN(v))return d;switch(m.state){case 1:x=s.getQualityForBitrate(t,_,y),d.quality=x,d.reason.throughput=_,m.placeholderBuffer=Math.max(0,A(m,x)-g),m.lastQuality=x,!isNaN(m.lastSegmentDurationS)&&g>=m.lastSegmentDurationS&&(m.state=2);break;case 2:(function(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var i=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,i)}}else i=.001*(n-e.lastSegmentFinishTimeMs),e.placeholderBuffer+=Math.max(0,i);e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,w(e,t)})(m,n),x=function(e,t){for(var n=e.bitrates.length,i=NaN,r=NaN,a=0;a<n;++a){var s=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(r)||r<=s)&&(r=s,i=a)}return i}(m,g+m.placeholderBuffer);var b=s.getQualityForBitrate(t,_,y);x>m.lastQuality&&b<x&&(x=Math.max(b,m.lastQuality));var T=Math.max(0,g+m.placeholderBuffer-M(m,x));T<=m.placeholderBuffer?(m.placeholderBuffer-=T,T=0):(T-=m.placeholderBuffer,m.placeholderBuffer=0,x<s.getTopQualityIndexFor(n,l)?r.getScheduleController().setTimeToLoadDelay(1e3*T):T=0),d.quality=x,d.reason.throughput=v,d.reason.latency=y,d.reason.bufferLevel=g,d.reason.placeholderBuffer=m.placeholderBuffer,d.reason.delay=T,m.lastQuality=x;break;default:P("BOLA ABR rule invoked in bad state."),d.quality=s.getQualityForBitrate(t,_,y),d.reason.state=m.state,d.reason.throughput=_,d.reason.latency=y,m.state=1,E(m)}return d},reset:function(){c(),h.off(v.default.BUFFER_EMPTY,t,f),h.off(v.default.PLAYBACK_SEEKING,n,f),h.off(v.default.PERIOD_SWITCH_STARTED,i,f),h.off(v.default.MEDIA_FRAGMENT_LOADED,r,f),h.off(v.default.METRIC_ADDED,a,f),h.off(v.default.QUALITY_CHANGE_REQUESTED,l,f),h.off(v.default.FRAGMENT_LOADING_ABANDONED,u,f)}},c(),h.on(v.default.BUFFER_EMPTY,t,f),h.on(v.default.PLAYBACK_SEEKING,n,f),h.on(v.default.PERIOD_SWITCH_STARTED,i,f),h.on(v.default.MEDIA_FRAGMENT_LOADED,r,f),h.on(v.default.METRIC_ADDED,a,f),h.on(v.default.QUALITY_CHANGE_REQUESTED,l,f),h.on(v.default.FRAGMENT_LOADING_ABANDONED,u,f),f}Object.defineProperty(n,"__esModule",{value:!0});var p=i(e(101)),I=i(e(173)),a=i(e(51)),m=e(230),g=i(e(50)),v=i(e(54)),_=i(e(49));r.__dashjs_factory_name="BolaRule",n.default=a.default.getClassFactory(r),t.exports=n.default},{101:101,173:173,230:230,49:49,50:50,51:51,54:54}],179:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var o=this.context,l=(0,s.default)(o).getInstance().log,u=.15,c=375;return{getMaxIndex:function(e){var t=e.getDroppedFramesHistory();if(t){for(var n=t.getFrameHistory(),i=0,r=0,a=d.default.NO_CHANGE,s=1;s<n.length;s++)if(n[s]&&(i=n[s].droppedVideoFrames,(r=n[s].totalVideoFrames)>c&&u<i/r)){l("DroppedFramesRule, index: "+(a=s-1)+" Dropped Frames: "+i+" Total Frames: "+r);break}return(0,d.default)(o).create(a,{droppedFrames:i})}return(0,d.default)(o).create()}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),d=i(e(173)),s=i(e(49));r.__dashjs_factory_name="DroppedFramesRule",n.default=a.default.getClassFactory(r),t.exports=n.default},{173:173,49:49,51:51}],180:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){_={}}function n(){t()}e=e||{};var f=.5,p=this.context,m=(0,l.default)(p).getInstance().log,i=(0,a.default)(p).getInstance(),g=e.metricsModel,v=e.dashMetrics,r=void 0,_=void 0;return r={getMaxIndex:function(e){var t=(0,x.default)(p).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!(g&&g.hasOwnProperty("getReadOnlyMetricsFor")&&v&&v.hasOwnProperty("getCurrentBufferLevel")))throw new Error("Missing config parameter(s)")}();var n=e.getMediaType(),i=g.getReadOnlyMetricsFor(n),r=0<i.BufferState.length?i.BufferState[i.BufferState.length-1]:null,a=e.getRepresentationInfo().fragmentDuration;if(!r||!function(e,t){_[e]=_[e]||{};var n=!1;return _[e].firstBufferLoadedEvent?n=!0:t&&t.state===y.default.BUFFER_LOADED&&(_[e].firstBufferLoadedEvent=!0,n=!0),n}(n,r)||!a)return t;if(r.state===y.default.BUFFER_EMPTY)m("Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var s=e.getMediaInfo(),o=e.getAbrController(),l=o.getThroughputHistory(),u=v.getCurrentBufferLevel(i),c=l.getAverageThroughput(n),d=l.getAverageLatency(n),h=c*(u/a)*f;t.quality=o.getQualityForBitrate(s,h,d),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t},reset:function(){t(),i.off(s.default.PLAYBACK_SEEKING,n,r)}},t(),i.on(s.default.PLAYBACK_SEEKING,n,r),r}Object.defineProperty(n,"__esModule",{value:!0});var y=i(e(106)),a=i(e(50)),s=i(e(54)),o=i(e(51)),l=i(e(49)),x=i(e(173));r.__dashjs_factory_name="InsufficientBufferRule",n.default=o.default.getClassFactory(r),t.exports=n.default},{106:106,173:173,49:49,50:50,51:51,54:54}],181:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var l=this.context,u=(0,s.default)(l).getInstance().log,c=.075,d=6;return{getMaxIndex:function(e){for(var t=e?e.getSwitchHistory():null,n=t?t.getSwitchRequests():[],i=0,r=0,a=0,s=(0,h.default)(l).create(),o=0;o<n.length;o++)if(void 0!==n[o]&&(i+=n[o].drops,r+=n[o].noDrops,a+=n[o].dropSize,d<=i+r&&c<i/r)){s.quality=0<o&&0<n[o].drops?o-1:o,s.reason={index:s.quality,drops:i,noDrops:r,dropSize:a},u("Switch history rule index: "+s.quality+" samples: "+(i+r)+" drops: "+i);break}return s}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),s=i(e(49)),h=i(e(173));r.__dashjs_factory_name="SwitchHistoryRule",n.default=a.default.getClassFactory(r),t.exports=n.default},{173:173,49:49,51:51}],182:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var p=this.context,m=(0,s.default)(p).getInstance().log,g=e.metricsModel;return{getMaxIndex:function(e){var t=(0,y.default)(p).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getStreamProcessor")))return t;!function(){if(!g||!g.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error("Missing config parameter(s)")}();var n=e.getMediaInfo(),i=e.getMediaType(),r=g.getReadOnlyMetricsFor(i),a=e.getStreamProcessor(),s=e.getAbrController(),o=e.getStreamInfo(),l=o&&o.manifestInfo?o.manifestInfo.isDynamic:null,u=s.getThroughputHistory(),c=u.getSafeAverageThroughput(i,l),d=u.getAverageLatency(i),h=0<r.BufferState.length?r.BufferState[r.BufferState.length-1]:null,f=e.useBufferOccupancyABR();return!r||isNaN(c)||!h||f||s.getAbandonmentStateFor(i)!==_.default.ABANDON_LOAD&&(h.state===v.default.BUFFER_LOADED||l)&&(t.quality=s.getQualityForBitrate(n,c,d),a.getScheduleController().setTimeToLoadDelay(0),m("ThroughputRule requesting switch to index: ",t.quality,"type: ",i,"Average throughput",Math.round(c),"kbps"),t.reason={throughput:c,latency:d}),t},reset:function(){}}}Object.defineProperty(n,"__esModule",{value:!0});var v=i(e(106)),_=i(e(103)),a=i(e(51)),s=i(e(49)),y=i(e(173));r.__dashjs_factory_name="ThroughputRule",n.default=a.default.getClassFactory(r),t.exports=n.default},{103:103,106:106,173:173,49:49,51:51}],183:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function i(e,t,n){var i=NaN,r=e.getCurrentRepresentationInfo();if(t===h.default.FRAGMENTED_TEXT)i=c.getAllTracksAreDisabled()?0:r.fragmentDuration;else if(t===h.default.AUDIO&&n){var a=o.getCurrentBufferLevel(l.getReadOnlyMetricsFor(h.default.VIDEO));i=isNaN(r.fragmentDuration)?a:Math.max(a,r.fragmentDuration)}else{var s=r.mediaInfo.streamInfo;if(d.isPlayingAtTopQuality(s))i=s.manifestInfo.duration>=u.getLongFormContentDurationThreshold()?u.getBufferTimeAtTopQualityLongForm():u.getBufferTimeAtTopQuality();else i=u.getStableBufferTime()}return i}var o=(e=e||{}).dashMetrics,l=e.metricsModel,u=e.mediaPlayerModel,c=e.textController,d=e.abrController;return{execute:function(e,t,n){return o.getCurrentBufferLevel(l.getReadOnlyMetricsFor(t))<i(e,t,n)},getBufferTarget:i}}Object.defineProperty(n,"__esModule",{value:!0});var h=i(e(100)),a=i(e(51));r.__dashjs_factory_name="BufferLevelRule",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,51:51}],184:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t=this.context,d=(0,a.default)(t).getInstance().log,h=e.adapter,f=e.sourceBufferController,p=e.textController;return{execute:function(e,t){var n=e.getCurrentRepresentationInfo(),i=n.mediaInfo.type,r=e.getScheduleController(),a=r.getSeekTarget(),s=!isNaN(a),o=e.getBuffer(),l=s?a:h.getIndexHandlerTime(e);if(isNaN(l)||i===m.default.FRAGMENTED_TEXT&&p.getAllTracksAreDisabled())return null;if(s&&r.setSeekTarget(NaN),o){var u=f.getBufferRange(o,l);null!==u&&(d("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",i,".",l,"was changed to",u.end),l=u.end)}var c=void 0;if(t)l=t.startTime+t.duration/2,c=h.getFragmentRequestForTime(e,n,l,{timeThreshold:0,ignoreIsFinished:!0});else{for(c=h.getFragmentRequestForTime(e,n,l,{keepIdx:!s});c&&c.action!==g.default.ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(c);)c=h.getNextFragmentRequest(e,n);c&&(isNaN(c.startTime+c.duration)||h.setIndexHandlerTime(e,c.startTime+c.duration),c.delayLoadingTime=(new Date).getTime()+r.getTimeToLoadDelay(),r.setTimeToLoadDelay(0))}return c}}}Object.defineProperty(n,"__esModule",{value:!0});var m=i(e(100)),a=i(e(49)),s=i(e(51)),g=i(e(213));r.__dashjs_factory_name="NextFragmentRequestRule",n.default=s.default.getClassFactory(r),t.exports=n.default},{100:100,213:213,49:49,51:51}],185:[function(e,t,n){"use strict";function i(){function B(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}function i(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function $(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?i(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?i(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}var j=0;return{createHTMLCaptionsFromScreen:function(e,t,n,i){var r=null,a=!1,s=-1,o={start:t,end:n,spans:[]},l="style_cea608_white_black",u={},c={},d=[],h=void 0,f=void 0;for(h=0;h<15;++h){var p=i.rows[h],m="",g=null;if(!1===p.isEmpty()){var v=B(p.chars);null===r&&(r={x:v,y1:h,y2:h+1,p:[]}),v!==s&&a&&(r.p.push(o),o={start:t,end:n,spans:[]},r.y2=h,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===u.hasOwnProperty(r.name)?(d.push(r),u[r.name]=r):u[r.name].p.contat(r.p),r={x:v,y1:h,y2:h+1,p:[]});for(var _=0;_<p.chars.length;++_){var y=p.chars[_],x=y.penState;if(null===g||!x.equals(g)){0<m.trim().length&&(o.spans.push({name:l,line:m,row:h}),m="");var b="style_cea608_"+x.foreground+"_"+x.background;x.underline&&(b+="_underline"),x.italics&&(b+="_italics"),c.hasOwnProperty(b)||(c[b]=JSON.parse(JSON.stringify(x))),g=x,l=b}m+=y.uchar}0<m.trim().length&&o.spans.push({name:l,line:m,row:h}),a=!0,s=v}else a=!1,s=-1,r&&(r.p.push(o),o={start:t,end:n,spans:[]},r.y2=h,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===u.hasOwnProperty(r.name)?(d.push(r),u[r.name]=r):u[r.name].p.contat(r.p),r=null)}r&&(r.p.push(o),r.y2=h+1,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===u.hasOwnProperty(r.name)?(d.push(r),u[r.name]=r):u[r.name].p.contat(r.p),r=null);var T,S=[];for(h=0;h<d.length;++h){var E=d[h],w="sub_cea608_"+j++,M=document.createElement("div");M.id=w;var A="left: "+3.125*(T=E).x+"%; top: "+6.66*T.y1+"%; width: "+(100-3.125*T.x)+"%; height: "+6.66*Math.max(T.y2-1-T.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";M.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+A;var C=document.createElement("div");C.className="paragraph bodyStyle",C.style.cssText=$(e);var P=document.createElement("div");P.className="cueUniWrapper",P.style.cssText="unicode-bidi: normal; direction: ltr;";for(var R=0;R<E.p.length;++R){var D=E.p[R],k=0;for(f=0;f<D.spans.length;++f){var I=D.spans[f];if(0<I.line.length){if(0!==f&&k!=I.row){var L=document.createElement("br");L.className="lineBreak",P.appendChild(L)}var O=!1;k===I.row&&(O=!0),k=I.row;var N=c[I.name],U=document.createElement("span");U.className="spanPadding "+I.name+" customSpanColor",U.style.cssText=$(e,N),0!==f&&O?f===D.spans.length-1?U.textContent=I.line.replace(/\s+$/g,""):U.textContent=I.line:1<D.spans.length&&f<D.spans.length-1&&I.row===D.spans[f+1].row?U.textContent=I.line.replace(/^\s+/g,""):U.textContent=I.line.trim(),P.appendChild(U)}}}C.appendChild(P),M.appendChild(C);var F={bodyStyle:["%",90]};for(f in c)c.hasOwnProperty(f)&&(F[f]=["%",90]);S.push({type:"html",start:t,end:n,cueHTMLElement:M,cueID:w,cellResolution:[32,15],isFromCEA608:!0,regions:d,regionID:E.name,videoHeight:e.videoHeight,videoWidth:e.videoWidth,fontSize:F,lineHeight:{},linePadding:{}})}return S}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{51:51}],186:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){f=e}function n(e){e.sender.getStreamProcessor()===u&&a.trigger(y.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function i(e){e.fragmentModel===u.getFragmentModel()&&e.chunk.bytes&&(g.save(e.chunk),s.append(p,e.chunk))}e=e||{};var r=this.context,a=(0,_.default)(r).getInstance(),s=e.sourceBufferController,o=e.errHandler,l=e.type,u=e.streamProcessor,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0,g=void 0;return c={getBufferControllerType:function(){return b},initialize:function(e){t(e),u.getRepresentationController(),g=(0,x.default)(r).getInstance()},createBuffer:function(e){try{p=s.createSourceBuffer(f,e),h||(p.hasOwnProperty(v.default.INITIALIZE)&&p.initialize(l,u),h=!0)}catch(e){o.mediaSourceError("Error creating "+l+" source buffer.")}return p},getType:function(){return l},getStreamProcessor:function(){return u},setSeekStartTime:function(e){m=e},getSeekStartTime:function(){return m},getBuffer:function(){return p},setBuffer:function(e){p=e},getBufferLevel:function(){return 0},setMediaSource:t,getMediaSource:function(){return f},getIsBufferingCompleted:function(){return d},switchInitData:function(e,t){var n=g.extract(e,t);n?s.append(p,n):a.trigger(y.default.INIT_REQUESTED,{sender:c})},reset:function(e){a.off(y.default.DATA_UPDATE_COMPLETED,n,this),a.off(y.default.INIT_FRAGMENT_LOADED,i,this),e||(s.abort(f,p),s.removeSourceBuffer(f,p))}},function(){p=f=null,d=h=!1,a.on(y.default.DATA_UPDATE_COMPLETED,n,this),a.on(y.default.INIT_FRAGMENT_LOADED,i,this)}(),c}Object.defineProperty(n,"__esModule",{value:!0});var v=i(e(100)),_=i(e(50)),y=i(e(54)),a=i(e(51)),x=i(e(200)),b="NotFragmentedTextBufferController";r.__dashjs_factory_name=b,n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,200:200,50:50,51:51,54:54}],187:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t,n=this.context,i=void 0;return t={getBufferControllerType:function(){return i.getBufferControllerType()},initialize:function(e,t){return i.initialize(e,t)},createBuffer:function(e){return i.createBuffer(e)},getType:function(){return i.getType()},getStreamProcessor:function(){i.getStreamProcessor()},setSeekStartTime:function(e){i.setSeekStartTime(e)},getBuffer:function(){return i.getBuffer()},setBuffer:function(e){i.setBuffer(e)},getBufferLevel:function(){return i.getBufferLevel()},setMediaSource:function(e){i.setMediaSource(e)},getMediaSource:function(){return i.getMediaSource()},getIsBufferingCompleted:function(){return i.getIsBufferingCompleted()},getIsPruningInProgress:function(){return i.getIsPruningInProgress()},switchInitData:function(e,t){i.switchInitData(e,t)},reset:function(e){i.reset(e)}},i=e.type===a.default.FRAGMENTED_TEXT?(0,o.default)(n).create({type:e.type,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,sourceBufferController:e.sourceBufferController,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor}):(0,l.default)(n).create({type:e.type,errHandler:e.errHandler,sourceBufferController:e.sourceBufferController,streamProcessor:e.streamProcessor}),t}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),s=i(e(51)),o=i(e(106)),l=i(e(186));r.__dashjs_factory_name="TextBufferController",n.default=s.default.getClassFactory(r),t.exports=n.default},{100:100,106:106,186:186,51:51}],188:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var t=e.tracks,n=e.index,i=t.findIndex(function(e){return e.lang===m});-1!==i&&(this.setTextTrack(i),n=i),v||this.setTextTrack(-1),g=n,p.trigger(w.default.TEXT_TRACKS_ADDED,{enabled:!_,index:n,tracks:t})}function t(){_=!1}var n=this.context,i=void 0,l=void 0,r=void 0,a=void 0,s=void 0,u=void 0,o=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0,_=void 0;return i={setConfig:function(e){e&&(e.errHandler&&(r=e.errHandler),e.dashManifestModel&&(a=e.dashManifestModel),e.manifestModel&&(s=e.manifestModel),e.mediaController&&(u=e.mediaController),e.videoModel&&(o=e.videoModel),e.streamController&&(c=e.streamController),e.textTracks&&(d=e.textTracks),e.vttParser&&(h=e.vttParser),e.ttmlParser&&(f=e.ttmlParser),l.setConfig({errHandler:r,dashManifestModel:a,manifestModel:s,mediaController:u,videoModel:o,streamController:c,textTracks:d,vttParser:h,ttmlParser:f}))},getTextSourceBuffer:function(){return l},getAllTracksAreDisabled:function(){return _},addEmbeddedTrack:function(e){l.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return m},setTextDefaultLanguage:function(e){"string"==typeof e&&(m=e)},setTextDefaultEnabled:function(e){"boolean"==typeof e&&(v=e)},getTextDefaultEnabled:function(){return v},enableText:function(e){"boolean"==typeof e&&!_!==e&&(e&&this.setTextTrack(g),e||(g=this.getCurrentTrackIdx(),this.setTextTrack(-1)))},isTextEnabled:function(){return!_},setTextTrack:function(e){var t=l.getConfig(),n=t.fragmentModel,i=t.fragmentedTracks,r=d.getCurrentTrackIdx();if(r!==e){d.setModeForTrackIdx(r,y.default.TEXT_HIDDEN),d.setCurrentTrackIdx(e),d.setModeForTrackIdx(e,y.default.TEXT_SHOWING);var a=d.getCurrentTrackInfo();if(a&&a.isFragmented&&!a.isEmbedded)for(var s=0;s<i.length;s++){var o=i[s];a.lang!==o.lang||a.index!==o.index||a.label&&a.label!==o.id||o!==u.getCurrentTrackFor(y.default.FRAGMENTED_TEXT,c.getActiveStreamInfo())&&(n.abortRequests(),n.removeExecutedRequestsBeforeTime(),l.remove(),d.deleteCuesFromTrackIdx(r),u.setTrack(o),l.setCurrentFragmentedTrackIdx(s))}}_=-1===e},getCurrentTrackIdx:function(){return d.getCurrentTrackIdx()},reset:function(){t(),l.resetEmbedded()}},g=-1,v=!(m=""),d=(0,b.default)(n).getInstance(),h=(0,T.default)(n).getInstance(),f=(0,S.default)(n).getInstance(),l=(0,x.default)(n).getInstance(),p=(0,E.default)(n).getInstance(),d.initialize(),p.on(w.default.TEXT_TRACKS_QUEUE_INITIALIZED,e,i),t(),i}Object.defineProperty(n,"__esModule",{value:!0});var y=i(e(100)),a=i(e(51)),x=i(e(189)),b=i(e(190)),T=i(e(207)),S=i(e(205)),E=i(e(50)),w=i(e(54));r.__dashjs_factory_name="TextController",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{100:100,189:189,190:190,205:205,207:207,50:50,51:51,54:54}],189:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&n(t.bytes,t)}function r(){J=[],G=[],(q=(0,_.default)(a).getInstance()).setConfig({videoModel:K}),q.initialize(),o=(0,m.default)(a).getInstance(),(z=(0,p.default)(a).getInstance()).setConfig({boxParser:o}),W=!1,ie=[],ne=[],s=!(te=Z=null),re=(ee=0,y.default)(a).getInstance(),t.on(b.default.VIDEO_CHUNK_RECEIVED,e,this)}function n(e,t){function n(e,t){var n,i,r,a,s=new oe.default,o={subtitle:"subtitles",caption:"captions"};s.captionData=e,s.lang=t.lang,s.label=t.id,s.index=t.index,s.isTTML=(a=!1,t.codec&&0<=t.codec.search(ae.default.STPP)&&(a=!0),t.mimeType&&0<=t.mimeType.search(ae.default.TTML)&&(a=!0),a),s.defaultTrack=(i=t,r=!1,1<J.length&&i.isEmbedded?r=i.id&&i.id===ae.default.CC1:1===J.length?i.id&&"CC"===i.id.substring(0,2)&&(r=!0):0===J.length&&(r=i.index===G[0].index),r),s.isFragmented=W,s.isEmbedded=!!t.isEmbedded,s.kind=(n=0<t.roles.length?o[t.roles[0]]:o.caption)===o.caption||n===o.subtitle?n:o.caption,s.roles=t.roles;var l=(G?G.length:0)+J.length;q.addTextTrack(s,l)}var i=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=void 0,u=void 0,c=t.mediaInfo,d=c.type,h=c.mimeType,f=c.codec||h;if(f){if(d===ae.default.FRAGMENTED_TEXT)if(Y)if(r=(l=z.getSamplesInfo(e)).sampleList,!Q&&0<r.length&&(Q=r[0].cts-t.start*X),0<=f.search(ae.default.STPP))for(H=null!==H?H:B(f),a=0;a<r.length;a++){var p=(S=r[a]).cts,m=p-Q;this.buffered.add(m/X,(m+S.duration)/X);var g=new DataView(e,S.offset,S.subSizes[0]);u=le.default.Utils.dataViewToString(g,ae.default.UTF8);var v=[],_=S.offset+S.subSizes[0];for(s=1;s<S.subSizes.length;s++){var y=new Uint8Array(e,_,S.subSizes[s]),x=String.fromCharCode.apply(null,y);v.push(x),_+=S.subSizes[s]}try{var b=V.getValue().ttmlTimeIsRelative?p/X:0;i=H.parse(u,b,p/X,(p+S.duration)/X,v),q.addCaptions(Z,Q/X,i)}catch(e){$("TTML parser error: "+e.message)}}else{var T=[];for(a=0;a<r.length;a++){var S;(S=r[a]).cts-=Q,this.buffered.add(S.cts/X,(S.cts+S.duration)/X);var E=e.slice(S.offset,S.offset+S.size),w=le.default.parseBuffer(E);for(s=0;s<w.boxes.length;s++){var M=w.boxes[s];if($("VTT box1: "+M.type),"vtte"!==M.type&&"vttc"===M.type)for($("VTT vttc boxes.length = "+M.boxes.length),o=0;o<M.boxes.length;o++){var A=M.boxes[o];if($("VTT box2: "+A.type),"payl"===A.type){var C=A.cue_text;$("VTT cue_text = "+C);var P=S.cts/X,R=(S.cts+S.duration)/X;T.push({start:P,end:R,data:C,styles:{}}),$("VTT "+P+"-"+R+" : "+C)}}}}0<T.length&&q.addCaptions(Z,0,T)}else{for(Y=!0,a=0;a<G.length;a++)n(null,G[a]);X=z.getMediaTimescaleFromMoov(e)}else if(d===ae.default.TEXT){g=new DataView(e,0,e.byteLength);u=le.default.Utils.dataViewToString(g,ae.default.UTF8);try{n(i=B(f).parse(u,0),c)}catch(e){j.timedTextError(e,"parse",u)}}else if(d===ae.default.VIDEO)if(t.segmentType===se.HTTPRequest.INIT_SEGMENT_TYPE){if(0===ee)for(ee=z.getMediaTimescaleFromMoov(e),a=0;a<J.length;a++)n(null,J[a])}else{if(0===ee)return void $("CEA-608: No timescale for embeddedTextTrack yet");var D=function(e,r){return function(e,t,n){var i=null;(i=K.getTTMLRenderingDiv()?re.createHTMLCaptionsFromScreen(K.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}])&&q.addCaptions(r,0,i)}},k=(l=z.getSamplesInfo(e)).lastSequenceNumber;if(!ie[0]&&!ie[1]){var I=void 0,L=void 0;for(a=0;a<J.length;a++){if(J[a].id===ae.default.CC1?L=q.getTrackIdxForId(ae.default.CC1):J[a].id===ae.default.CC3&&(L=q.getTrackIdxForId(ae.default.CC3)),-1===L)return void $("CEA-608: data before track is ready.");I=D(0,L),ie[a]=new ue.default.Cea608Parser(a,{newCue:I},null)}}if(ee&&-1==ne.indexOf(k)){if(null!==te&&k!==te+l.numSequences)for(a=0;a<ie.length;a++)ie[a]&&ie[a].reset();for(var O=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},i=new DataView(e),r=0;r<t.length;r++)for(var a=t[r],s=ue.default.findCea608Nalus(i,a.offset,a.size),o=null,l=0,u=0;u<s.length;u++)for(var c=ue.default.extractCea608DataFromRange(i,s[u]),d=0;d<2;d++)0<c[d].length&&(a.cts!==o?l=0:l+=1,n.fields[d].push([a.cts,c[d],l]),o=a.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}(e,l.sampleList),N=0;N<ie.length;N++){var U=O.fields[N],F=ie[N];if(F)for(a=0;a<U.length;a++)F.addData(U[a][0]/ee,U[a][1])}te=k,ne.push(k)}}}else $("No text type defined")}function B(e){var t=void 0;return 0<=e.search(ae.default.VTT)?t=i:(0<=e.search(ae.default.TTML)||0<=e.search(ae.default.STPP))&&(t=c),t}var a=this.context,$=(0,v.default)(a).getInstance().log,t=(0,x.default)(a).getInstance(),s=!1,o=void 0,j=void 0,l=void 0,V=void 0,u=void 0,H=void 0,i=void 0,c=void 0,z=void 0,G=void 0,q=void 0,W=void 0,d=void 0,Y=void 0,X=void 0,h=void 0,K=void 0,f=void 0,Q=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0;return{initialize:function(e,t){if(Y=!1,X=NaN,h=[],Q=d=H=null,s||r(),G=t.getMediaInfoArr(),q.setConfig({videoModel:K}),q.initialize(),W=!l.getIsTextTrack(e),o=(0,m.default)(a).getInstance(),(z=(0,p.default)(a).getInstance()).setConfig({boxParser:o}),W){d=t.getFragmentModel(),this.buffered=(0,g.default)(a).create(),h=u.getTracksFor(ae.default.FRAGMENTED_TEXT,f.getActiveStreamInfo());for(var n=u.getCurrentTrackFor(ae.default.FRAGMENTED_TEXT,f.getActiveStreamInfo()),i=0;i<h.length;i++)if(h[i]===n){Z=i;break}}},append:n,abort:function(){q.deleteAllTextTracks(),Y=W=!1,X=NaN,h=[],s=!1,J=f=K=d=q=G=z=H=null},addEmbeddedTrack:function(e){s||r(),e.id===ae.default.CC1||e.id===ae.default.CC3?J.push(e):$("Warning: Embedded track "+e.id+" not supported!")},resetEmbedded:function(){t.off(b.default.VIDEO_CHUNK_RECEIVED,e,this),q&&q.deleteAllTextTracks(),s=!1,J=[],ie=[null,null],ne=[],te=null},setConfig:function(e){e&&(e.errHandler&&(j=e.errHandler),e.dashManifestModel&&(l=e.dashManifestModel),e.manifestModel&&(V=e.manifestModel),e.mediaController&&(u=e.mediaController),e.videoModel&&(K=e.videoModel),e.streamController&&(f=e.streamController),e.textTracks&&(q=e.textTracks),e.vttParser&&(i=e.vttParser),e.ttmlParser&&(c=e.ttmlParser))},getConfig:function(){return{errHandler:j,dashManifestModel:l,mediaController:u,videoModel:K,fragmentModel:d,streamController:f,textTracks:q,isFragmented:W,embeddedTracks:J,fragmentedTracks:h}},setCurrentFragmentedTrackIdx:function(e){Z=e},remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var ae=i(e(100)),se=e(230),oe=i(e(222)),p=i(e(74)),m=i(e(194)),g=i(e(196)),a=i(e(51)),v=i(e(49)),_=i(e(190)),y=i(e(185)),le=i(e(11)),ue=i(e(2)),x=i(e(50)),b=i(e(54));r.__dashjs_factory_name="TextSourceBuffer",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{100:100,11:11,185:185,190:190,194:194,196:196,2:2,222:222,230:230,49:49,50:50,51:51,54:54,74:74}],190:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function l(e){var t=g[e].kind,n=void 0!==g[e].label?g[e].label:g[e].lang,i=g[e].lang,r=g[e].isTTML,a=g[e].isEmbedded,s=w?document.createElement("track"):v.addTextTrack(t,n,i);return w&&(s.kind=t,s.label=n,s.srclang=i),s.isEmbedded=a,s.isTTML=r,s}function n(e,t){var n=v.getClientWidth(),i=v.getClientHeight(),r=v.getVideoWidth(),a=v.getVideoHeight(),s=v.getVideoRelativeOffsetTop(),o=v.getVideoRelativeOffsetLeft(),l=r/a,u=!1;e.isFromCEA608&&(l=3.5/3,u=!0);var c=function(e,t,n,i,r,a){var s=0,o=0;n/i<e/t?s=(o=t)/i*n:o=(s=e)/n*i;var l,u,c=0,d=0;return r<s/o?c=(d=o)*r:d=(c=s)/r,l=(e-c)/2,u=(t-d)/2,a?{x:l+.1*c,y:u+.1*d,w:.8*c,h:.8*d}:{x:l,y:u,w:c,h:d}}.call(this,n,i,r,a,l,u),d=c.w,h=c.h,f=c.x,p=c.y;if(d!=T||h!=S||f!=x||p!=b||t){x=f+o,b=p+s,T=d,S=h,E.style.left=x+"px",E.style.top=b+"px",E.style.width=T+"px",E.style.height=S+"px";for(var m=0;e.activeCues&&m<e.activeCues.length;++m){var g=e.activeCues[m];g.scaleCue(g)}M&&document[M]||A?E.style.zIndex=C:E.style.zIndex=null}}function u(e){var t=T,n=S,i=void 0,r=void 0,a=void 0,s=void 0,o=void 0;if(e.cellResolution){var l=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(i in e.linePadding)if(e.linePadding.hasOwnProperty(i)){r=(e.linePadding[i]*l[0]).toString();for(var u=document.getElementsByClassName("spanPadding"),c=0;c<u.length;c++)u[c].style.cssText=u[c].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r),u[c].style.cssText=u[c].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.fontSize){for(i in e.fontSize)if(e.fontSize.hasOwnProperty(i)){"%"===e.fontSize[i][0]?a=e.fontSize[i][1]/100:"c"===e.fontSize[i][0]&&(a=e.fontSize[i][1]),r=(a*l[1]).toString(),o="defaultFontSize"!==i?document.getElementsByClassName(i):document.getElementsByClassName("paragraph");for(var d=0;d<o.length;d++)o[d].style.cssText=o[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.lineHeight)for(i in e.lineHeight)if(e.lineHeight.hasOwnProperty(i)){"%"===e.lineHeight[i][0]?s=e.lineHeight[i][1]/100:"c"===e.fontSize[i][0]&&(s=e.lineHeight[i][1]),r=(s*l[1]).toString(),o=document.getElementsByClassName(i);for(var h=0;h<o.length;h++)o[h].style.cssText=o[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}}}if(e.isd){var f=document.getElementById(e.cueID);f&&E.removeChild(f),p(e)}}function p(a){var e=document.createElement("div");E.appendChild(e),t=(0,D.renderHTML)(a.isd,e,function(e){var t=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(t.test(e)){var i=t.exec(e),r=parseInt(i[4],10)-1;return"data:image/png;base64,"+btoa(a.images[r])}if(n.test(e)){r=(i=n.exec(e))[1];return"data:image/png;base64,"+a.embeddedImages[r]}return null},E.clientHeight,E.clientWidth,!1,function(e){f("[TextTracks][renderCaption]",e)},t,!0),e.id=a.cueID}function c(e){return 0<=e&&g[e]?v.getTextTrack(g[e].kind,g[e].label,g[e].lang,g[e].isTTML,g[e].isEmbedded):null}function d(e){if(e!==y){var t=c(y=e);(function(e){r.call(this),e&&"html"===e.renderingType?function(){if(w){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=v.getElement();n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}}}.call(this):function(){if(w){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}.call(this)}).call(this,t),a&&(clearInterval(a),a=null),t&&"html"===t.renderingType&&(n.call(this,t,!0),a=setInterval(n.bind(this,t),500))}}function i(e){if(e.cues)for(var t=e.cues,n=t.length-1;0<=n;n--)e.removeCue(t[n])}function r(){if(E)for(;E.firstChild;)E.removeChild(E.firstChild)}var e=this.context,h=(0,s.default)(e).getInstance(),f=(0,o.default)(e).getInstance().log,m=void 0,v=void 0,g=void 0,_=void 0,y=void 0,x=void 0,b=void 0,T=void 0,S=void 0,E=void 0,a=void 0,w=void 0,M=void 0,A=void 0,t=void 0,C=void 0;return{initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(m=window.VTTCue||window.TextTrackCue,g=[],_=[],S=T=b=x=0,A=!(y=-1),C=2147483647,t=a=E=null,w=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?M="fullscreenElement":void 0!==document.webkitIsFullScreen?M="webkitIsFullScreen":document.msFullscreenElement?M="msFullscreenElement":document.mozFullScreen&&(M="mozFullScreen"))},displayCConTop:function(e){A=e,E&&!document[M]&&(E.style.zIndex=e?C:null)},addTextTrack:function(e,t){if(g.length!==t){if(g.push(e),g.length===t){g.sort(function(e,t){return e.index-t.index}),E=v.getTTMLRenderingDiv();for(var n=-1,i=0;i<g.length;i++){var r=l.call(this,i);_.push(r),g[i].defaultTrack&&(r.default=!0,n=i),w&&v.appendChild(r);var a=c(i);a&&(a.mode=P.default.TEXT_SHOWING,E&&(g[i].isTTML||g[i].isEmbedded)?a.renderingType="html":a.renderingType="default"),this.addCaptions(i,0,g[i].captionData),h.trigger(R.default.TEXT_TRACK_ADDED)}if(d.call(this,n),0<=n)for(var s=0;s<g.length;s++){var o=c(s);o&&(o.mode=s===n?P.default.TEXT_SHOWING:P.default.TEXT_HIDDEN)}h.trigger(R.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:y,tracks:g})}}else f("Trying to add too many tracks.")},addCaptions:function(e,t,n){var i=c(e),r=this;if(i&&n&&0!==n.length)for(var a in n){var s=void 0,o=n[a];i.cellResolution=o.cellResolution,i.isFromCEA608=o.isFromCEA608,"html"===o.type?((s=new m(o.start-t,o.end-t,"")).cueHTMLElement=o.cueHTMLElement,s.isd=o.isd,s.images=o.images,s.embeddedImages=o.embeddedImages,s.cueID=o.cueID,s.scaleCue=u.bind(r),s.cellResolution=o.cellResolution,s.lineHeight=o.lineHeight,s.linePadding=o.linePadding,s.fontSize=o.fontSize,E.style.left=x+"px",E.style.top=b+"px",E.style.width=T+"px",E.style.height=S+"px",s.onenter=function(){i.mode===P.default.TEXT_SHOWING&&(this.isd?(p(this),f("Cue enter id:"+this.cueID)):(E.appendChild(this.cueHTMLElement),u.call(r,this)))},s.onexit=function(){for(var e=E.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(f("Cue exit id:"+e[t].id),E.removeChild(e[t]))}):(s=new m(o.start-t,o.end-t,o.data),o.styles&&(void 0!==o.styles.align&&"align"in s&&(s.align=o.styles.align),void 0!==o.styles.line&&"line"in s&&(s.line=o.styles.line),void 0!==o.styles.position&&"position"in s&&(s.position=o.styles.position),void 0!==o.styles.size&&"size"in s&&(s.size=o.styles.size))),i.addCue(s)}},getCurrentTrackIdx:function(){return y},setCurrentTrackIdx:d,getTrackIdxForId:function(e){for(var t=-1,n=0;n<g.length;n++)if(g[n].label===e){t=n;break}return t},getCurrentTrackInfo:function(){return g[y]},setModeForTrackIdx:function(e,t){var n=c(e);n&&n.mode!==t&&(n.mode=t)},deleteCuesFromTrackIdx:function(e){var t=c(e);t&&i(t)},deleteAllTextTracks:function(){for(var e=_?_.length:0,t=0;t<e;t++)if(w)v.removeChild(_[t]);else{var n=c(t);n&&(i.call(this,n),n.mode="disabled")}_=[],g=[],a&&(clearInterval(a),a=null),y=-1,r.call(this)},deleteTextTrack:function(e){v.removeChild(_[e]),_.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(v=e.videoModel)}}}Object.defineProperty(n,"__esModule",{value:!0});var P=i(e(100)),s=i(e(50)),R=i(e(54)),a=i(e(51)),o=i(e(49)),D=e(21);r.__dashjs_factory_name="TextTracks",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{100:100,21:21,49:49,50:50,51:51,54:54}],191:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){u&&u.reset()}var n,i=this.context,u=void 0;return n={get:function(e){var t=u.getCurrentTrack();if(!t||t.segmentDuration<=0)return null;var n,i,r,a=Math.floor(e/t.segmentDuration),s=e%t.segmentDuration,o=Math.floor(s*t.tilesHor*t.tilesVert/t.segmentDuration),l=new c.default;return l.url=(i=a+(n=t).startNumber,r=(0,d.replaceTokenForTemplate)(n.templateUrl,"Number",i),r=(0,d.replaceTokenForTemplate)(r,"Time",(i-1)*n.segmentDuration),r=(0,d.replaceTokenForTemplate)(r,"Bandwidth",n.bandwidth),(0,d.unescapeDollarsInTemplate)(r)),l.width=Math.floor(t.widthPerTile),l.height=Math.floor(t.heightPerTile),l.x=Math.floor(o%t.tilesHor)*t.widthPerTile,l.y=Math.floor(o/t.tilesHor)*t.heightPerTile,l},setTrackByIndex:function(e){u.setTrackByIndex(e)},getCurrentTrackIndex:function(){return u.getCurrentTrackIndex()},getBitrateList:function(){var e=u.getTracks();if(!e||0===e.length)return[];var n=0;return e.map(function(e){var t=new l.default;return t.mediaType=s.default.IMAGE,t.qualityIndex=n++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:t},t(),u=(0,o.default)(i).create({dashManifestModel:e.dashManifestModel,adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream}),n}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),s=i(e(100)),c=i(e(223)),o=i(e(192)),l=i(e(210)),d=e(77);r.__dashjs_factory_name="ThumbnailController",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,192:192,210:210,223:223,51:51,77:77}],192:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){n(),function(){if(l&&a&&s){var e=l?l.getStreamInfo():null;if(e){var t=s.getMediaInfoForType(e,h.default.IMAGE);if(t){var n=s.getDataForMedia(t);if(n){var i=a.getRepresentationsForAdaptation(n);i&&0<i.length&&i.forEach(function(e){var t,n,i,r;e.segmentInfoType===f.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media&&(t=e,(n=new p.default).id=t.id,n.bitrate=t.bandwidth,n.width=t.width,n.height=t.height,n.tilesHor=1,n.tilesVert=1,n.startNumber=t.startNumber,n.segmentDuration=t.segmentDuration,n.timescale=t.timescale,n.templateUrl=(i=t,(r=u.isRelative(i.media)?u.resolve(i.media,o.resolve(i.path).url):i.media)?(0,g.replaceIDForTemplate)(r,i.id):""),t.essentialProperties&&t.essentialProperties.forEach(function(e){if("http://dashif.org/thumbnail_tile"===e.schemeIdUri&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(n.tilesHor=parseInt(t[0],10),n.tilesVert=parseInt(t[1],10))}}),0<n.tilesHor&&0<n.tilesVert&&(n.widthPerTile=n.width/n.tilesHor,n.heightPerTile=n.height/n.tilesVert,c.push(n)))}),0<c.length&&(c.sort(function(e,t){return e.bitrate-t.bitrate}),d=c.length-1)}}}}}()}function n(){c=[],d=-1}var i,r=this.context,a=e.dashManifestModel,s=e.adapter,o=e.baseURLController,l=e.stream,u=(0,m.default)(r).getInstance(),c=void 0,d=void 0;return i={initialize:t,getTracks:function(){return c},reset:n,setTrackByIndex:function(e){c&&0!==c.length&&(e>=c.length&&(e=c.length-1),d=e)},getCurrentTrack:function(){return d<0?null:c[d]},getCurrentTrackIndex:function(){return d}},t(),i}Object.defineProperty(n,"__esModule",{value:!0});var h=i(e(100)),f=i(e(61)),a=i(e(51)),p=i(e(224)),m=i(e(206)),g=e(77);r.__dashjs_factory_name="ThumbnailTracks",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,206:206,224:224,51:51,61:61,77:77}],193:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e,t=this.context,r=(0,l.default)(t).getInstance(),n=void 0,i=void 0,a=void 0,s=void 0,o=void 0;return e={chooseSelectorFromManifest:function(e){(function(){if(!n||!n.hasOwnProperty("getIsDVB"))throw new Error("Missing config parameter(s)")})(),o=n.getIsDVB(e)?s:a},select:function(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var i=o.select(t);return i?(e.selectedIdx=t.indexOf(i),i):void r.trigger(u.default.URL_RESOLUTION_FAILED,{error:new Error(1,f)})},reset:function(){i.reset()},setConfig:function(e){e.selector&&(o=e.selector),e.dashManifestModel&&(n=e.dashManifestModel)}},i=(0,c.default)(t).create({updateEventName:u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.default.SERVICE_LOCATION_BLACKLIST_ADD}),a=(0,h.default)(t).create({blacklistController:i}),s=(0,d.default)(t).create({blacklistController:i}),o=a,e}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(50)),u=i(e(54)),c=i(e(105)),d=i(e(209)),h=i(e(208)),a=i(e(51)),f="Failed to resolve a valid URL";r.__dashjs_factory_name="BaseURLSelector";var s=a.default.getClassFactory(r);s.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=1,s.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=f,a.default.updateClassFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{105:105,208:208,209:209,50:50,51:51,54:54}],194:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var i=this.context;return{parse:function(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=o.default.parseBuffer(e),n=(0,a.default)(i).create();return n.setData(t),n}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(201)),s=i(e(51)),o=i(e(11));r.__dashjs_factory_name="BoxParser",n.default=s.default.getSingletonFactory(r),t.exports=n.default},{11:11,201:201,51:51}],195:[function(e,t,n){"use strict";function i(){var e,t=void 0;return t=!(e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}}),e}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="Capabilities",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{51:51}],196:[function(e,t,n){"use strict";function i(){function t(e){if(null===e||isNaN(e)||e%1!=0)throw new Error("index argument is not an integer")}return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],i=this.customTimeRangeArray[t];return n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(n.end=i.end,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(n.start=i.start,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return t(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return t(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="CustomTimeRanges",n.default=s.default.getClassFactory(i),t.exports=n.default},{51:51}],197:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function n(e){if(void 0!==a)return a;a=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return l("Warning: DOMStorage access denied: "+e.message),a}if(!t||e!==p&&"sessionStorage"!==e)return a;try{t.setItem("1","1"),t.removeItem("1"),a=!0}catch(e){l("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return a}function i(){return 6e5*Math.round((new Date).getTime()/6e5)}function s(e,t){return n(e)&&u["get"+t+"CachingInfo"]().enabled}function o(){if(!u||!u.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error("Missing config parameter(s)")}e=e||{};var t,r=this.context,l=(0,c.default)(r).getInstance().log,u=e.mediaPlayerModel,a=void 0;return t={getSavedBitrateSettings:function(e){var t=NaN;if(o(),s(p,m)){var n=h.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(n))||{},r=(new Date).getTime()-parseInt(i.timestamp,10)>=u.getLastMediaSettingsCachingInfo().ttl||!1,a=parseFloat(i.bitrate);isNaN(a)||r?r&&localStorage.removeItem(n):l("Last saved bitrate for "+e+" was "+(t=a))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(s(p,m)&&t){var n=h.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:i()}))}catch(e){l(e.message)}}},getSavedMediaSettings:function(e){if(o(),!s(p,g))return null;var t=null,n=f.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(n))||{},r=(new Date).getTime()-parseInt(i.timestamp,10)>=u.getLastMediaSettingsCachingInfo().ttl||!1;t=i.settings,r&&(localStorage.removeItem(n),t=null)}catch(e){return null}return t},setSavedMediaSettings:function(e,t){if(s(p,g)){var n=f.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:i()}))}catch(e){l(e.message)}}}},n(p)&&d.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){l(e.message)}}}),t}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),c=i(e(49)),d=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],h="dashjs_?_bitrate",f="dashjs_?_settings",p="localStorage",m="LastBitrate",g="LastMediaSettings";r.__dashjs_factory_name="DOMStorage";var s=a.default.getSingletonFactory(r);n.default=s,t.exports=n.default},{49:49,51:51}],198:[function(e,t,n){"use strict";function i(e){function r(e,t){var n=!0,i=0;if(void 0===t&&(t=!1),i=16777215<e.tag?(o.getUint32(l)!==e.tag&&(n=!1),4):65535<e.tag?(256*o.getUint16(l)+o.getUint8(l+2)!==e.tag&&(n=!1),3):255<e.tag?(o.getUint16(l)!==e.tag&&(n=!1),2):(o.getUint8(l)!==e.tag&&(n=!1),1),!n&&e.required&&!t)throw new Error("required tag not found");return n&&(l+=i),n}function a(e){var t=1,n=128,i=-1,r=0,a=o.getUint8(l),s=0;for(s=0;s<8;s+=1){if((a&n)===n){r=void 0===e?a&~n:a,i=s;break}n>>=1}for(s=0;s<i;s+=1,t+=1)r=r<<8|255&o.getUint8(l+t);return l+=t,r}e=e||{};var n=void 0,o=new DataView(e.data),l=0;return n={getPos:function(){return l},setPos:function(e){l=e},consumeTag:r,consumeTagAndSize:function(e,t){var n=r(e,t);return n&&a(),n},parseTag:function(e){var t;return r(e),t=a(),n[e.parse](t)},skipOverElement:function(e,t){var n=r(e,t),i=void 0;return n&&(i=a(),l+=i),n},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=o.getFloat32(l),l+=4;break;case 8:t=o.getFloat64(l),l+=8}return t},getMatroskaUint:function(e){for(var t=0,n=0;n<e;n+=1)t<<=8,t|=255&o.getUint8(l+n);return l+=e,t},moreData:function(){return l<o.byteLength}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="EBMLParser",n.default=s.default.getClassFactory(i),t.exports=n.default},{51:51}],199:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,r=(0,a.default)(e).getInstance();return{capabilityError:function(e){r.trigger(s.default.ERROR,{error:"capability",event:e})},downloadError:function(e,t,n){r.trigger(s.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})},manifestError:function(e,t,n,i){r.trigger(s.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:i}})},timedTextError:function(e,t,n){r.trigger(s.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})},mediaSourceError:function(e){r.trigger(s.default.ERROR,{error:"mediasource",event:e})},mediaKeySessionError:function(e){r.trigger(s.default.ERROR,{error:"key_session",event:e})},mediaKeyMessageError:function(e){r.trigger(s.default.ERROR,{error:"key_message",event:e})}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(50)),s=i(e(54)),o=i(e(51));r.__dashjs_factory_name="ErrorHandler";var l=o.default.getSingletonFactory(r);l.CAPABILITY_ERROR_MEDIASOURCE="mediasource",l.CAPABILITY_ERROR_MEDIAKEYS="mediakeys",l.DOWNLOAD_ERROR_ID_MANIFEST="manifest",l.DOWNLOAD_ERROR_ID_SIDX="SIDX",l.DOWNLOAD_ERROR_ID_CONTENT="content",l.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",l.DOWNLOAD_ERROR_ID_XLINK="xlink",l.MANIFEST_ERROR_ID_CODEC="codec",l.MANIFEST_ERROR_ID_PARSE="parse",l.MANIFEST_ERROR_ID_NOSTREAMS="nostreams",l.TIMED_TEXT_ERROR_ID_PARSE="parse",o.default.updateSingletonFactory(r.__dashjs_factory_name,l),n.default=l,t.exports=n.default},{50:50,51:51,54:54}],200:[function(e,t,n){"use strict";function i(){var i={};return{save:function(e){var t=e.streamId,n=e.representationId;i[t]=i[t]||{},i[t][n]=e},extract:function(e,t){return i&&i[e]&&i[e][t]?i[e][t]:null},reset:function(){i={}}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="InitCache",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{51:51}],201:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function t(e){var t=[];if(!e||!o||"function"!=typeof o.fetchAll)return t;for(var n=o.fetchAll(e),i=void 0,r=0,a=n.length;r<a;r++)(i=s(n[r]))&&t.push(i);return t}function s(e){if(!e)return null;var t=new a.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}var o=void 0;return{getBox:function(e){return e&&o&&o.boxes&&0!==o.boxes.length&&"function"==typeof o.fetch?s(o.fetch(e)):null},getBoxes:t,setData:function(e){o=e},getLastBox:function(){if(!o||!o.boxes||!o.boxes.length)return null;var e=t(o.boxes[o.boxes.length-1].type);return 0<e.length?e[e.length-1]:null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(215)),s=i(e(51));r.__dashjs_factory_name="IsoFile",n.default=s.default.getClassFactory(r),t.exports=n.default},{215:215,51:51}],202:[function(e,t,n){"use strict";function i(e){var n=(e=e||{}).timelineConverter,i=e.streamProcessor;return{getLiveEdge:function(){!function(){if(!(n&&n.hasOwnProperty("getExpectedLiveEdge")&&i&&i.hasOwnProperty("getCurrentRepresentationInfo")))throw new Error("Missing config parameter(s)")}();var e=i.getCurrentRepresentationInfo(),t=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(t=n.getExpectedLiveEdge(),n.setClientTimeOffset(t-e.DVRWindow.end)),t},reset:function(){i=n=null}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="LiveEdgeFinder",n.default=s.default.getClassFactory(i),t.exports=n.default},{51:51}],203:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){return{areEqual:function(e,t){return(0,s.default)(e,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),s=i(e(13));r.__dashjs_factory_name="ObjectUtils",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{13:13,51:51}],204:[function(e,t,n){"use strict";function i(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="RequestModifier",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{51:51}],205:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,y=(0,s.default)(e).getInstance().log,x=0;return{parse:function(e,t,n,i,r){var a=void 0,s=void 0,o="",l=[],u=void 0,c=void 0,d={},h="",f="",p={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void y("Warning: smpte-tt imagetype != PNG. Discarded");h=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){h&&(d[h]=f.trim()),h=f=""},onText:function(e){h&&(f+=e)}};if(!e)throw o="no ttml data to parse",new Error(o);var m,g=(0,b.fromXML)(e,function(e){o=e},p),v=g.getMediaTimeEvents();for(a=0;a<v.length;a++){var _=(0,b.generateISD)(g,v[a],function(e){o=e});for(s=0;s<_.contents.length;s++)1<=_.contents[s].contents.length&&(u=v[a]+t<n?n:v[a]+t)<(c=v[a+1]+t>i?i:v[a+1]+t)&&l.push({start:u,end:c,type:"html",cueID:(m="cue_TTML_"+x,x++,m),isd:_,images:r,embeddedImages:d})}if(""!==o&&y(o),0<l.length)return l;throw new Error(o)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),s=i(e(49)),b=e(21);r.__dashjs_factory_name="TTMLParser",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{21:21,49:49,51:51}],206:[function(e,t,n){"use strict";function i(){function r(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function a(e){var t=e.match(d);return t?t[1]:""}function s(e){var t=e.match(i);return t?t[0]:""}function o(e){return!i.test(e)}function l(e){return o(e)&&"/"===e.charAt(0)}function u(e){return 0===e.indexOf("//")}var n=void 0,i=/^[a-z][a-z0-9+\-.]*:/i,t=/^https?:\/\//i,c=/^https:\/\//i,d=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,e=function(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}},h=function(e,t){var n=r;if(!t)return e;if(!o(e))return e;l(e)&&(n=a),u(e)&&(n=s);var i=n(t);return[i,e].join("/"!==i.charAt(i.length-1)&&"/"!==e.charAt(0)?"/":"")};return function(){try{new window.URL("x","http://y"),n=e}catch(e){}finally{n=n||h}}(),{parseBaseUrl:r,parseOrigin:a,parseScheme:s,isRelative:o,isPathAbsolute:l,isSchemeRelative:u,isHTTPURL:function(e){return t.test(e)},isHTTPS:function(e){return c.test(e)},resolve:function(e,t){return n(e,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="URLUtils",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{51:51}],207:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function p(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function m(e,t){for(var n,i=t,r="",a="";""!==e[i]&&i<e.length;)i++;if(1<(n=i-t))for(var s=0;s<n;s++){if((a=e[t+s]).match(_)){r="";break}r+=a,s!==n-1&&(r+="\n")}else(a=e[t]).match(_)||(r=a);return r}var e,t=this.context,g=(0,s.default)(t).getInstance().log,v=void 0,_=void 0,y=void 0,x=void 0;return e={parse:function(e){var t,n,i,r=[],a=void 0;if(!e)return r;t=(e=e.split(v)).length,a=-1;for(var s=0;s<t;s++){var o=e[s];if(0<o.length&&"WEBVTT"!==o&&o.match(_)){var l=(i=n=void 0,n=o.split(_),(i=n[1].split(x)).shift(),n[1]=i[0],i.shift(),{cuePoints:n,styles:function(e){var n={};return e.forEach(function(e){if(1<e.split(/:/).length){var t=e.split(/:/)[1];t&&-1!=t.search(/%/)&&(t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(n.align=t),(e.match(/line/)||e.match(/L/))&&(n.line=t),(e.match(/position/)||e.match(/P/))&&(n.position=t),(e.match(/size/)||e.match(/S/))&&(n.size=t)}}),n}(i)}),u=l.cuePoints,c=l.styles,d=m(e,s+1),h=p(u[0].replace(y,"")),f=p(u[1].replace(y,""));!isNaN(h)&&!isNaN(f)&&a<=h&&h<f?""!==d?(a=h,r.push({start:h,end:f,data:d,styles:c})):g("Skipping cue due to empty/malformed cue text"):g("Skipping cue due to incorrect cue timing")}}return r}},v=/(?:\r\n|\r|\n)/gm,_=/-->/,y=/(^[\s]+|[\s]+$)/g,x=/\s\b/g,e}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),s=i(e(49));r.__dashjs_factory_name="VTTParser",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{49:49,51:51}],208:[function(e,t,n){"use strict";function i(e){var i=(e=e||{}).blacklistController;return{select:function(e){var n=0,t=void 0;return e&&e.some(function(e,t){return n=t,!i.contains(e.serviceLocation)})&&(t=e[n]),t}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="BasicSelector",n.default=s.default.getClassFactory(i),t.exports=n.default},{51:51}],209:[function(e,t,n){"use strict";function i(e){var n=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t=0,n=[],i=0,r=void 0,a=void 0;if((a=e.sort(function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n}).filter(function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})).length)return 1<a.length&&(a.forEach(function(e){t+=e.dvb_weight,n.push(t)}),r=Math.floor(Math.random()*(t-1)),n.every(function(e,t){return i=t,!(r<e)})),a[i]}((t=[],e.filter(function(e){return!n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)}).filter(function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)})));var t}}}Object.defineProperty(n,"__esModule",{value:!0});var r,a=e(51),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="DVBSelector",n.default=s.default.getClassFactory(i),t.exports=n.default},{51:51}],210:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},t.exports=n.default},{}],211:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.code=t||null,this.message=n||null,this.data=i||null},t.exports=n.default},{}],212:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null},t.exports=n.default},{}],213:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",n.default=i,t.exports=n.default},{}],214:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(213),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=s,t.exports=n.default},{213:213}],215:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function a(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new a(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(t=0;t<e.references.length;t++){var n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n)}}break;case"emsg":this.id=e.id,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];t=0;for(var i=e.samples.length;t<i;t++){var r={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(r)}}}}return i(a,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),a}();n.default=r,t.exports=n.default},{}],216:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=n.default},{}],217:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null},t.exports=n.default},{}],218:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},t.exports=n.default},{}],219:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=n.default},{}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},t.exports=n.default},{}],221:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(100)),a=i(e(213)),s=function(e){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=r.default.STREAM,this.responseType=""}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),n}();n.default=s,t.exports=n.default},{100:100,213:213}],222:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=n.default},{}],223:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},t.exports=n.default},{}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},t.exports=n.default},{}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},t.exports=n.default},{}],226:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.level=null},t.exports=n.default},{}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(106),a=(i=r)&&i.__esModule?i:{default:i};n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY},t.exports=n.default},{106:106}],228:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.time=null,this.range=null,this.manifestInfo=null},t.exports=n.default},{}],229:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.time=null,this.droppedFrames=null},t.exports=n.default},{}],230:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){i(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null};r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.OTHER_TYPE="other",n.HTTPRequest=r,n.HTTPRequestTrace=function e(){i(this,e),this.s=null,this.d=null,this.b=[]}},{}],231:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.ManifestUpdate=function e(){i(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},n.ManifestUpdateStreamInfo=function e(){i(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},n.ManifestUpdateRepresentationInfo=function e(){i(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},{}],232:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){i(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};r.INITIAL_PLAYOUT_START_REASON="initial_playout",r.SEEK_START_REASON="seek",r.RESUME_FROM_PAUSE_START_REASON="resume",r.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){i(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=r,n.PlayListTrace=a},{}],233:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=n.default},{}],234:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.loadingRequests=[],this.executedRequests=[]},t.exports=n.default},{}],235:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=n.default},{}],236:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null},t.exports=n.default},{}]},{},[5]),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e;function h(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function l(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function u(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){for(var n in t)p(t,n)&&(e[n]=t[n]);return p(t,"toString")&&(e.toString=t.toString),p(t,"valueOf")&&(e.valueOf=t.valueOf),e}function g(e,t,n,i){return Et(e,t,n,i,!0).utc()}function v(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}var r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};function _(e){if(null==e._isValid){var t=v(e),n=r.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function y(e){var t=g(NaN);return null!=e?m(v(t),e):v(t).userInvalidated=!0,t}var a=h.momentProperties=[];function x(e,t){var n,i,r;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=v(t)),u(t._locale)||(e._locale=t._locale),0<a.length)for(n=0;n<a.length;n++)u(r=t[i=a[n]])||(e[i]=r);return e}var t=!1;function b(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,h.updateOffset(this),t=!1)}function T(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function S(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function E(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=S(t)),n}function s(e,t,n){var i,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&E(e[i])!==E(t[i]))&&s++;return s+a}function w(e){!1===h.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(r,a){var s=!0;return m(function(){if(null!=h.deprecationHandler&&h.deprecationHandler(null,r),s){for(var e,t=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var i in e+="\n["+n+"] ",arguments[0])e+=i+": "+arguments[0][i]+", ";e=e.slice(0,-2)}else e=arguments[n];t.push(e)}w(r+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),s=!1}return a.apply(this,arguments)},a)}var i={};function M(e,t){null!=h.deprecationHandler&&h.deprecationHandler(e,t),i[e]||(w(t),i[e]=!0)}function A(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function C(e,t){var n,i=m({},e);for(n in t)p(t,n)&&(l(e[n])&&l(t[n])?(i[n]={},m(i[n],e[n]),m(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)p(e,n)&&!p(t,n)&&l(e[n])&&(i[n]=m({},i[n]));return i}function P(e){null!=e&&this.set(e)}h.suppressDeprecationWarnings=!1,h.deprecationHandler=null;var R=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)p(e,t)&&n.push(t);return n};var D={};function k(e,t){var n=e.toLowerCase();D[n]=D[n+"s"]=D[t]=e}function I(e){return"string"==typeof e?D[e]||D[e.toLowerCase()]:void 0}function L(e){var t,n,i={};for(n in e)p(e,n)&&(t=I(n))&&(i[t]=e[n]);return i}var O={};function N(e,t){O[e]=t}function U(t,n){return function(e){return null!=e?(B(this,t,e),h.updateOffset(this,n),this):F(this,t)}}function F(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function B(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function $(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,V=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},z={};function G(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(z[e]=r),t&&(z[t[0]]=function(){return $(r.apply(this,arguments),t[1],t[2])}),n&&(z[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function q(e,t){return e.isValid()?(t=W(t,e.localeData()),H[t]=H[t]||function(i){var e,r,t,a=i.match(j);for(e=0,r=a.length;e<r;e++)z[a[e]]?a[e]=z[a[e]]:a[e]=(t=a[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,n="";for(t=0;t<r;t++)n+=A(a[t])?a[t].call(e,i):a[t];return n}}(t),H[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(V.lastIndex=0;0<=n&&V.test(e);)e=e.replace(V,i),V.lastIndex=0,n-=1;return e}var Y=/\d/,X=/\d\d/,K=/\d{3}/,Q=/\d{4}/,Z=/[+-]?\d{6}/,J=/\d\d?/,ee=/\d\d\d\d?/,te=/\d\d\d\d\d\d?/,ne=/\d{1,3}/,ie=/\d{1,4}/,re=/[+-]?\d{1,6}/,ae=/\d+/,se=/[+-]?\d+/,oe=/Z|[+-]\d\d:?\d\d/gi,le=/Z|[+-]\d\d(?::?\d\d)?/gi,ue=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ce={};function de(e,n,i){ce[e]=A(n)?n:function(e,t){return e&&i?i:n}}function he(e,t){return p(ce,e)?ce[e](t._strict,t._locale):new RegExp(fe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})))}function fe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var pe={};function me(e,n){var t,i=n;for("string"==typeof e&&(e=[e]),c(n)&&(i=function(e,t){t[n]=E(e)}),t=0;t<e.length;t++)pe[e[t]]=i}function ge(e,r){me(e,function(e,t,n,i){n._w=n._w||{},r(e,n._w,n,i)})}var ve=0,_e=1,ye=2,xe=3,be=4,Te=5,Se=6,Ee=7,we=8,Me=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Ae(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),G("MMMM",0,0,function(e){return this.localeData().months(this,e)}),k("month","M"),N("month",8),de("M",J),de("MM",J,X),de("MMM",function(e,t){return t.monthsShortRegex(e)}),de("MMMM",function(e,t){return t.monthsRegex(e)}),me(["M","MM"],function(e,t){t[_e]=E(e)-1}),me(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[_e]=r:v(n).invalidMonth=e});var Ce=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pe="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Re="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function De(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=E(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Ae(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ke(e){return null!=e?(De(this,e),h.updateOffset(this,!0),this):F(this,"Month")}var Ie=ue;var Le=ue;function Oe(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],a=[];for(t=0;t<12;t++)n=g([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),a.sort(e),t=0;t<12;t++)i[t]=fe(i[t]),r[t]=fe(r[t]);for(t=0;t<24;t++)a[t]=fe(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ne(e){return Ue(e)?366:365}function Ue(e){return e%4==0&&e%100!=0||e%400==0}G("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),k("year","y"),N("year",1),de("Y",se),de("YY",J,X),de("YYYY",ie,Q),de("YYYYY",re,Z),de("YYYYYY",re,Z),me(["YYYYY","YYYYYY"],ve),me("YYYY",function(e,t){t[ve]=2===e.length?h.parseTwoDigitYear(e):E(e)}),me("YY",function(e,t){t[ve]=h.parseTwoDigitYear(e)}),me("Y",function(e,t){t[ve]=parseInt(e,10)}),h.parseTwoDigitYear=function(e){return E(e)+(68<E(e)?1900:2e3)};var Fe=U("FullYear",!0);function Be(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function $e(e,t,n){var i=7+t-n;return-((7+Be(e,0,i).getUTCDay()-t)%7)+i-1}function je(e,t,n,i,r){var a,s,o=1+7*(t-1)+(7+n-i)%7+$e(e,i,r);return s=o<=0?Ne(a=e-1)+o:o>Ne(e)?(a=e+1,o-Ne(e)):(a=e,o),{year:a,dayOfYear:s}}function Ve(e,t,n){var i,r,a=$e(e.year(),t,n),s=Math.floor((e.dayOfYear()-a-1)/7)+1;return s<1?i=s+He(r=e.year()-1,t,n):s>He(e.year(),t,n)?(i=s-He(e.year(),t,n),r=e.year()+1):(r=e.year(),i=s),{week:i,year:r}}function He(e,t,n){var i=$e(e,t,n),r=$e(e+1,t,n);return(Ne(e)-i+r)/7}G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),k("week","w"),k("isoWeek","W"),N("week",5),N("isoWeek",5),de("w",J),de("ww",J,X),de("W",J),de("WW",J,X),ge(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=E(e)});G("d",0,"do","day"),G("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),G("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),G("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),k("day","d"),k("weekday","e"),k("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),de("d",J),de("e",J),de("E",J),de("dd",function(e,t){return t.weekdaysMinRegex(e)}),de("ddd",function(e,t){return t.weekdaysShortRegex(e)}),de("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:v(n).invalidWeekday=e}),ge(["d","e","E"],function(e,t,n,i){t[i]=E(e)});var ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ge="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var We=ue;var Ye=ue;var Xe=ue;function Ke(){function e(e,t){return t.length-e.length}var t,n,i,r,a,s=[],o=[],l=[],u=[];for(t=0;t<7;t++)n=g([2e3,1]).day(t),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),a=this.weekdays(n,""),s.push(i),o.push(r),l.push(a),u.push(i),u.push(r),u.push(a);for(s.sort(e),o.sort(e),l.sort(e),u.sort(e),t=0;t<7;t++)o[t]=fe(o[t]),l[t]=fe(l[t]),u[t]=fe(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Qe(){return this.hours()%12||12}function Ze(e,t){G(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Je(e,t){return t._meridiemParse}G("H",["HH",2],0,"hour"),G("h",["hh",2],0,Qe),G("k",["kk",2],0,function(){return this.hours()||24}),G("hmm",0,0,function(){return""+Qe.apply(this)+$(this.minutes(),2)}),G("hmmss",0,0,function(){return""+Qe.apply(this)+$(this.minutes(),2)+$(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+$(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+$(this.minutes(),2)+$(this.seconds(),2)}),Ze("a",!0),Ze("A",!1),k("hour","h"),N("hour",13),de("a",Je),de("A",Je),de("H",J),de("h",J),de("k",J),de("HH",J,X),de("hh",J,X),de("kk",J,X),de("hmm",ee),de("hmmss",te),de("Hmm",ee),de("Hmmss",te),me(["H","HH"],xe),me(["k","kk"],function(e,t,n){var i=E(e);t[xe]=24===i?0:i}),me(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),me(["h","hh"],function(e,t,n){t[xe]=E(e),v(n).bigHour=!0}),me("hmm",function(e,t,n){var i=e.length-2;t[xe]=E(e.substr(0,i)),t[be]=E(e.substr(i)),v(n).bigHour=!0}),me("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[xe]=E(e.substr(0,i)),t[be]=E(e.substr(i,2)),t[Te]=E(e.substr(r)),v(n).bigHour=!0}),me("Hmm",function(e,t,n){var i=e.length-2;t[xe]=E(e.substr(0,i)),t[be]=E(e.substr(i))}),me("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[xe]=E(e.substr(0,i)),t[be]=E(e.substr(i,2)),t[Te]=E(e.substr(r))});var et,tt=U("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Pe,monthsShort:Re,week:{dow:0,doy:6},weekdays:ze,weekdaysMin:qe,weekdaysShort:Ge,meridiemParse:/[ap]\.?m?\.?/i},it={},rt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function st(e){var t=null;if(!it[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=et._abbr,require("./locale/"+e),ot(t)}catch(e){}return it[e]}function ot(e,t){var n;return e&&(n=u(t)?ut(e):lt(e,t))&&(et=n),et._abbr}function lt(e,t){if(null===t)return delete it[e],null;var n=nt;if(t.abbr=e,null!=it[e])M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=it[e]._config;else if(null!=t.parentLocale){if(null==it[t.parentLocale])return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;n=it[t.parentLocale]._config}return it[e]=new P(C(n,t)),rt[e]&&rt[e].forEach(function(e){lt(e.name,e.config)}),ot(e),it[e]}function ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!o(e)){if(t=st(e))return t;e=[e]}return function(e){for(var t,n,i,r,a=0;a<e.length;){for(t=(r=at(e[a]).split("-")).length,n=(n=at(e[a+1]))?n.split("-"):null;0<t;){if(i=st(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&s(r,n,!0)>=t-1)break;t--}a++}return null}(e)}function ct(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[_e]<0||11<n[_e]?_e:n[ye]<1||n[ye]>Ae(n[ve],n[_e])?ye:n[xe]<0||24<n[xe]||24===n[xe]&&(0!==n[be]||0!==n[Te]||0!==n[Se])?xe:n[be]<0||59<n[be]?be:n[Te]<0||59<n[Te]?Te:n[Se]<0||999<n[Se]?Se:-1,v(e)._overflowDayOfYear&&(t<ve||ye<t)&&(t=ye),v(e)._overflowWeeks&&-1===t&&(t=Ee),v(e)._overflowWeekday&&-1===t&&(t=we),v(e).overflow=t),e}var dt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ft=/Z|[+-]\d\d(?::?\d\d)?/,pt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],mt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],gt=/^\/?Date\((\-?\d+)/i;function vt(e){var t,n,i,r,a,s,o=e._i,l=dt.exec(o)||ht.exec(o);if(l){for(v(e).iso=!0,t=0,n=pt.length;t<n;t++)if(pt[t][1].exec(l[1])){r=pt[t][0],i=!1!==pt[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=mt.length;t<n;t++)if(mt[t][1].exec(l[3])){a=(l[2]||" ")+mt[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(l[4]){if(!ft.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=r+(a||"")+(s||""),Tt(e)}else e._isValid=!1}var _t=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function yt(e){var t,n,i,r,a,s,o,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=_t.exec(t)){if(i=n[1]?"ddd"+(5===n[1].length?", ":" "):"",r="D MMM "+(10<n[2].length?"YYYY ":"YY "),a="HH:mm"+(n[4]?":ss":""),n[1]){var u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(n[2]).getDay()];if(n[1].substr(0,3)!==u)return v(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:s=0===o?" +0000":((o="YXWVUTSRQPONZABCDEFGHIKLM".indexOf(n[5][1].toUpperCase())-12)<0?" -":" +")+(""+o).replace(/^-?/,"0").match(/..$/)[0]+"00";break;case 4:s=l[n[5]];break;default:s=l[" GMT"]}n[5]=s,e._i=n.splice(1).join("")," ZZ",e._f=i+r+a+" ZZ",Tt(e),v(e).rfc2822=!0}else e._isValid=!1}function xt(e,t,n){return null!=e?e:null!=t?t:n}function bt(e){var t,n,i,r,a=[];if(!e._d){var s,o;for(s=e,o=new Date(h.now()),i=s._useUTC?[o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()]:[o.getFullYear(),o.getMonth(),o.getDate()],e._w&&null==e._a[ye]&&null==e._a[_e]&&function(e){var t,n,i,r,a,s,o,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,s=4,n=xt(t.GG,e._a[ve],Ve(wt(),1,4).year),i=xt(t.W,1),((r=xt(t.E,1))<1||7<r)&&(l=!0);else{a=e._locale._week.dow,s=e._locale._week.doy;var u=Ve(wt(),a,s);n=xt(t.gg,e._a[ve],u.year),i=xt(t.w,u.week),null!=t.d?((r=t.d)<0||6<r)&&(l=!0):null!=t.e?(r=t.e+a,(t.e<0||6<t.e)&&(l=!0)):r=a}i<1||i>He(n,a,s)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(o=je(n,i,r,a,s),e._a[ve]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=xt(e._a[ve],i[ve]),(e._dayOfYear>Ne(r)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=Be(r,0,e._dayOfYear),e._a[_e]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[xe]&&0===e._a[be]&&0===e._a[Te]&&0===e._a[Se]&&(e._nextDay=!0,e._a[xe]=0),e._d=(e._useUTC?Be:function(e,t,n,i,r,a,s){var o=new Date(e,t,n,i,r,a,s);return e<100&&0<=e&&isFinite(o.getFullYear())&&o.setFullYear(e),o}).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[xe]=24)}}function Tt(e){if(e._f!==h.ISO_8601)if(e._f!==h.RFC_2822){e._a=[],v(e).empty=!0;var t,n,i,r,a,s,o,l,u=""+e._i,c=u.length,d=0;for(i=W(e._f,e._locale).match(j)||[],t=0;t<i.length;t++)r=i[t],(n=(u.match(he(r,e))||[])[0])&&(0<(a=u.substr(0,u.indexOf(n))).length&&v(e).unusedInput.push(a),u=u.slice(u.indexOf(n)+n.length),d+=n.length),z[r]?(n?v(e).empty=!1:v(e).unusedTokens.push(r),s=r,l=e,null!=(o=n)&&p(pe,s)&&pe[s](o,l._a,l,s)):e._strict&&!n&&v(e).unusedTokens.push(r);v(e).charsLeftOver=c-d,0<u.length&&v(e).unusedInput.push(u),e._a[xe]<=12&&!0===v(e).bigHour&&0<e._a[xe]&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[xe]=function(e,t,n){var i;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0)),t)}(e._locale,e._a[xe],e._meridiem),bt(e),ct(e)}else yt(e);else vt(e)}function St(e){var t,n,i,r,a=e._i,s=e._f;return e._locale=e._locale||ut(e._l),null===a||void 0===s&&""===a?y({nullInput:!0}):("string"==typeof a&&(e._i=a=e._locale.preparse(a)),T(a)?new b(ct(a)):(d(a)?e._d=a:o(s)?function(e){var t,n,i,r,a;if(0===e._f.length)return v(e).invalidFormat=!0,e._d=new Date(NaN);for(r=0;r<e._f.length;r++)a=0,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Tt(t),_(t)&&(a+=v(t).charsLeftOver,a+=10*v(t).unusedTokens.length,v(t).score=a,(null==i||a<i)&&(i=a,n=t));m(e,n||t)}(e):s?Tt(e):u(n=(t=e)._i)?t._d=new Date(h.now()):d(n)?t._d=new Date(n.valueOf()):"string"==typeof n?(i=t,null===(r=gt.exec(i._i))?(vt(i),!1===i._isValid&&(delete i._isValid,yt(i),!1===i._isValid&&(delete i._isValid,h.createFromInputFallback(i)))):i._d=new Date(+r[1])):o(n)?(t._a=f(n.slice(0),function(e){return parseInt(e,10)}),bt(t)):l(n)?function(e){if(!e._d){var t=L(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),bt(e)}}(t):c(n)?t._d=new Date(n):h.createFromInputFallback(t),_(e)||(e._d=null),e))}function Et(e,t,n,i,r){var a,s={};return!0!==n&&!1!==n||(i=n,n=void 0),(l(e)&&function(e){var t;for(t in e)return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=e,s._f=t,s._strict=i,(a=new b(ct(St(s))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function wt(e,t,n,i){return Et(e,t,n,i,!1)}h.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),h.ISO_8601=function(){},h.RFC_2822=function(){};var Mt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()}),At=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:y()});function Ct(e,t){var n,i;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return wt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Pt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Rt(e){var t=L(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Pt.indexOf(t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<Pt.length;++i)if(e[Pt[i]]){if(n)return!1;parseFloat(e[Pt[i]])!==E(e[Pt[i]])&&(n=!0)}return!0}(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*o*60*60,this._days=+s+7*a,this._months=+r+3*i+12*n,this._data={},this._locale=ut(),this._bubble()}function Dt(e){return e instanceof Rt}function kt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function It(e,n){G(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+$(~~(e/60),2)+n+$(~~e%60,2)})}It("Z",":"),It("ZZ",""),de("Z",le),de("ZZ",le),me(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ot(le,e)});var Lt=/([\+\-]|\d\d)/gi;function Ot(e,t){var n=(t||"").match(e);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(Lt)||["-",0,0],r=60*i[1]+E(i[2]);return 0===r?0:"+"===i[0]?r:-r}function Nt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(T(e)||d(e)?e.valueOf():wt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),h.updateOffset(n,!1),n):wt(e).local()}function Ut(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ft(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}h.updateOffset=function(){};var Bt=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,$t=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function jt(e,t){var n,i,r,a=e,s=null;return Dt(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:c(e)?(a={},t?a[t]=e:a.milliseconds=e):(s=Bt.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:E(s[ye])*n,h:E(s[xe])*n,m:E(s[be])*n,s:E(s[Te])*n,ms:E(kt(1e3*s[Se]))*n}):(s=$t.exec(e))?(n="-"===s[1]?-1:1,a={y:Vt(s[2],n),M:Vt(s[3],n),w:Vt(s[4],n),d:Vt(s[5],n),h:Vt(s[6],n),m:Vt(s[7],n),s:Vt(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Nt(t,e),e.isBefore(t)?n=Ht(e,t):((n=Ht(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(wt(a.from),wt(a.to)),(a={}).ms=r.milliseconds,a.M=r.months),i=new Rt(a),Dt(e)&&p(e,"_locale")&&(i._locale=e._locale),i}function Vt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ht(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function zt(i,r){return function(e,t){var n;return null===t||isNaN(+t)||(M(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),Gt(this,jt(e="string"==typeof e?+e:e,t),i),this}}function Gt(e,t,n,i){var r=t._milliseconds,a=kt(t._days),s=kt(t._months);e.isValid()&&(i=null==i||i,r&&e._d.setTime(e._d.valueOf()+r*n),a&&B(e,"Date",F(e,"Date")+a*n),s&&De(e,F(e,"Month")+s*n),i&&h.updateOffset(e,a||s))}jt.fn=Rt.prototype,jt.invalid=function(){return jt(NaN)};var qt=zt(1,"add"),Wt=zt(-1,"subtract");function Yt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ut(e))&&(this._locale=t),this)}h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}function Qt(e,t){G(0,[e,e.length],0,t)}function Zt(e,t,n,i,r){var a;return null==e?Ve(this,i,r).year:((a=He(e,i,r))<t&&(t=a),function(e,t,n,i,r){var a=je(e,t,n,i,r),s=Be(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,e,t,n,i,r))}G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Qt("gggg","weekYear"),Qt("ggggg","weekYear"),Qt("GGGG","isoWeekYear"),Qt("GGGGG","isoWeekYear"),k("weekYear","gg"),k("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),de("G",se),de("g",se),de("GG",J,X),de("gg",J,X),de("GGGG",ie,Q),de("gggg",ie,Q),de("GGGGG",re,Z),de("ggggg",re,Z),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=E(e)}),ge(["gg","GG"],function(e,t,n,i){t[i]=h.parseTwoDigitYear(e)}),G("Q",0,"Qo","quarter"),k("quarter","Q"),N("quarter",7),de("Q",Y),me("Q",function(e,t){t[_e]=3*(E(e)-1)}),G("D",["DD",2],"Do","date"),k("date","D"),N("date",9),de("D",J),de("DD",J,X),de("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),me(["D","DD"],ye),me("Do",function(e,t){t[ye]=E(e.match(J)[0])});var Jt=U("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),k("dayOfYear","DDD"),N("dayOfYear",4),de("DDD",ne),de("DDDD",K),me(["DDD","DDDD"],function(e,t,n){n._dayOfYear=E(e)}),G("m",["mm",2],0,"minute"),k("minute","m"),N("minute",14),de("m",J),de("mm",J,X),me(["m","mm"],be);var en=U("Minutes",!1);G("s",["ss",2],0,"second"),k("second","s"),N("second",15),de("s",J),de("ss",J,X),me(["s","ss"],Te);var tn,nn=U("Seconds",!1);for(G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),k("millisecond","ms"),N("millisecond",16),de("S",ne,Y),de("SS",ne,X),de("SSS",ne,K),tn="SSSS";tn.length<=9;tn+="S")de(tn,ae);function rn(e,t){t[Se]=E(1e3*("0."+e))}for(tn="S";tn.length<=9;tn+="S")me(tn,rn);var an=U("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var sn=b.prototype;function on(e){return e}sn.add=qt,sn.calendar=function(e,t){var n=e||wt(),i=Nt(n,this).startOf("day"),r=h.calendarFormat(this,i)||"sameElse",a=t&&(A(t[r])?t[r].call(this,n):t[r]);return this.format(a||this.localeData().calendar(r,this,wt(n)))},sn.clone=function(){return new b(this)},sn.diff=function(e,t,n){var i,r,a,s;return this.isValid()&&(i=Nt(e,this)).isValid()?(r=6e4*(i.utcOffset()-this.utcOffset()),"year"===(t=I(t))||"month"===t||"quarter"===t?(o=this,l=i,d=12*(l.year()-o.year())+(l.month()-o.month()),h=o.clone().add(d,"months"),c=l-h<0?(u=o.clone().add(d-1,"months"),(l-h)/(h-u)):(u=o.clone().add(d+1,"months"),(l-h)/(u-h)),s=-(d+c)||0,"quarter"===t?s/=3:"year"===t&&(s/=12)):(a=this-i,s="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-r)/864e5:"week"===t?(a-r)/6048e5:a),n?s:S(s)):NaN;var o,l,u,c,d,h},sn.endOf=function(e){return void 0===(e=I(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},sn.format=function(e){e||(e=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);var t=q(this,e);return this.localeData().postformat(t)},sn.from=function(e,t){return this.isValid()&&(T(e)&&e.isValid()||wt(e).isValid())?jt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},sn.fromNow=function(e){return this.from(wt(),e)},sn.to=function(e,t){return this.isValid()&&(T(e)&&e.isValid()||wt(e).isValid())?jt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},sn.toNow=function(e){return this.to(wt(),e)},sn.get=function(e){return A(this[e=I(e)])?this[e]():this},sn.invalidAt=function(){return v(this).overflow},sn.isAfter=function(e,t){var n=T(e)?e:wt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=I(u(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},sn.isBefore=function(e,t){var n=T(e)?e:wt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=I(u(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},sn.isBetween=function(e,t,n,i){return("("===(i=i||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))},sn.isSame=function(e,t){var n,i=T(e)?e:wt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=I(t||"millisecond"))?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},sn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},sn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},sn.isValid=function(){return _(this)},sn.lang=Xt,sn.locale=Yt,sn.localeData=Kt,sn.max=At,sn.min=Mt,sn.parsingFlags=function(){return m({},v(this))},sn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:O[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=L(e)),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit]);else if(A(this[e=I(e)]))return this[e](t);return this},sn.startOf=function(e){switch(e=I(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},sn.subtract=Wt,sn.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},sn.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},sn.toDate=function(){return new Date(this.valueOf())},sn.toISOString=function(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||9999<e.year()?q(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):A(Date.prototype.toISOString)?this.toDate().toISOString():q(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},sn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=t+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+r)},sn.toJSON=function(){return this.isValid()?this.toISOString():null},sn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},sn.unix=function(){return Math.floor(this.valueOf()/1e3)},sn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},sn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},sn.year=Fe,sn.isLeapYear=function(){return Ue(this.year())},sn.weekYear=function(e){return Zt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},sn.isoWeekYear=function(e){return Zt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},sn.quarter=sn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},sn.month=ke,sn.daysInMonth=function(){return Ae(this.year(),this.month())},sn.week=sn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},sn.isoWeek=sn.isoWeeks=function(e){var t=Ve(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},sn.weeksInYear=function(){var e=this.localeData()._week;return He(this.year(),e.dow,e.doy)},sn.isoWeeksInYear=function(){return He(this.year(),1,4)},sn.date=Jt,sn.day=sn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-i,"d")):i},sn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},sn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,i=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?i:i-7)},sn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},sn.hour=sn.hours=tt,sn.minute=sn.minutes=en,sn.second=sn.seconds=nn,sn.millisecond=sn.milliseconds=an,sn.utcOffset=function(e,t,n){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?r:Ut(this);if("string"==typeof e){if(null===(e=Ot(le,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=Ut(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Gt(this,jt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null)),this},sn.utc=function(e){return this.utcOffset(0,e)},sn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ut(this),"m")),this},sn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ot(oe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},sn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?wt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},sn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},sn.isLocal=function(){return!!this.isValid()&&!this._isUTC},sn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},sn.isUtc=Ft,sn.isUTC=Ft,sn.zoneAbbr=function(){return this._isUTC?"UTC":""},sn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},sn.dates=n("dates accessor is deprecated. Use date instead.",Jt),sn.months=n("months accessor is deprecated. Use month instead",ke),sn.years=n("years accessor is deprecated. Use year instead",Fe),sn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),sn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e={};if(x(e,this),(e=St(e))._a){var t=e._isUTC?g(e._a):wt(e._a);this._isDSTShifted=this.isValid()&&0<s(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ln=P.prototype;function un(e,t,n,i){var r=ut(),a=g().set(i,t);return r[n](a,e)}function cn(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return un(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=un(e,i,n,"month");return r}function dn(e,t,n,i){t=("boolean"==typeof e?c(t)&&(n=t,t=void 0):(t=e,e=!1,c(n=t)&&(n=t,t=void 0)),t||"");var r,a=ut(),s=e?a._week.dow:0;if(null!=n)return un(t,(n+s)%7,i,"day");var o=[];for(r=0;r<7;r++)o[r]=un(t,(r+s)%7,i,"day");return o}ln.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return A(i)?i.call(t,n):i},ln.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},ln.invalidDate=function(){return this._invalidDate},ln.ordinal=function(e){return this._ordinal.replace("%d",e)},ln.preparse=on,ln.postformat=on,ln.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return A(r)?r(e,t,n,i):r.replace(/%d/i,e)},ln.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return A(n)?n(t):n.replace(/%s/i,t)},ln.set=function(e){var t,n;for(n in e)A(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},ln.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ce).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},ln.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ce.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ln.monthsParse=function(e,t,n){var i,r,a;if(this._monthsParseExact)return function(e,t,n){var i,r,a,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=g([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=Me.call(this._shortMonthsParse,s))?r:null:-1!==(r=Me.call(this._longMonthsParse,s))?r:null:"MMM"===t?-1!==(r=Me.call(this._shortMonthsParse,s))?r:-1!==(r=Me.call(this._longMonthsParse,s))?r:null:-1!==(r=Me.call(this._longMonthsParse,s))?r:-1!==(r=Me.call(this._shortMonthsParse,s))?r:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=g([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},ln.monthsRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Oe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(p(this,"_monthsRegex")||(this._monthsRegex=Le),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},ln.monthsShortRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Oe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(p(this,"_monthsShortRegex")||(this._monthsShortRegex=Ie),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},ln.week=function(e){return Ve(e,this._week.dow,this._week.doy).week},ln.firstDayOfYear=function(){return this._week.doy},ln.firstDayOfWeek=function(){return this._week.dow},ln.weekdays=function(e,t){return e?o(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:o(this._weekdays)?this._weekdays:this._weekdays.standalone},ln.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},ln.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},ln.weekdaysParse=function(e,t,n){var i,r,a;if(this._weekdaysParseExact)return function(e,t,n){var i,r,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=g([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=Me.call(this._weekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Me.call(this._shortWeekdaysParse,s))?r:null:-1!==(r=Me.call(this._minWeekdaysParse,s))?r:null:"dddd"===t?-1!==(r=Me.call(this._weekdaysParse,s))?r:-1!==(r=Me.call(this._shortWeekdaysParse,s))?r:-1!==(r=Me.call(this._minWeekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Me.call(this._shortWeekdaysParse,s))?r:-1!==(r=Me.call(this._weekdaysParse,s))?r:-1!==(r=Me.call(this._minWeekdaysParse,s))?r:null:-1!==(r=Me.call(this._minWeekdaysParse,s))?r:-1!==(r=Me.call(this._weekdaysParse,s))?r:-1!==(r=Me.call(this._shortWeekdaysParse,s))?r:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=g([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},ln.weekdaysRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(p(this,"_weekdaysRegex")||(this._weekdaysRegex=We),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},ln.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ye),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ln.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ln.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},ln.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ot("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===E(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),h.lang=n("moment.lang is deprecated. Use moment.locale instead.",ot),h.langData=n("moment.langData is deprecated. Use moment.localeData instead.",ut);var hn=Math.abs;function fn(e,t,n,i){var r=jt(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function pn(e){return e<0?Math.floor(e):Math.ceil(e)}function mn(e){return 4800*e/146097}function gn(e){return 146097*e/4800}function vn(e){return function(){return this.as(e)}}var _n=vn("ms"),yn=vn("s"),xn=vn("m"),bn=vn("h"),Tn=vn("d"),Sn=vn("w"),En=vn("M"),wn=vn("y");function Mn(e){return function(){return this.isValid()?this._data[e]:NaN}}var An=Mn("milliseconds"),Cn=Mn("seconds"),Pn=Mn("minutes"),Rn=Mn("hours"),Dn=Mn("days"),kn=Mn("months"),In=Mn("years");var Ln=Math.round,On={ss:44,s:45,m:45,h:22,d:26,M:11};var Nn=Math.abs;function Un(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Nn(this._milliseconds)/1e3,i=Nn(this._days),r=Nn(this._months);t=S((e=S(n/60))/60),n%=60,e%=60;var a=S(r/12),s=r%=12,o=i,l=t,u=e,c=n,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(o?o+"D":"")+(l||u||c?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(c?c+"S":""):"P0D"}var Fn=Rt.prototype;return Fn.isValid=function(){return this._isValid},Fn.abs=function(){var e=this._data;return this._milliseconds=hn(this._milliseconds),this._days=hn(this._days),this._months=hn(this._months),e.milliseconds=hn(e.milliseconds),e.seconds=hn(e.seconds),e.minutes=hn(e.minutes),e.hours=hn(e.hours),e.months=hn(e.months),e.years=hn(e.years),this},Fn.add=function(e,t){return fn(this,e,t,1)},Fn.subtract=function(e,t){return fn(this,e,t,-1)},Fn.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=I(e))||"year"===e)return t=this._days+i/864e5,n=this._months+mn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(gn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Fn.asMilliseconds=_n,Fn.asSeconds=yn,Fn.asMinutes=xn,Fn.asHours=bn,Fn.asDays=Tn,Fn.asWeeks=Sn,Fn.asMonths=En,Fn.asYears=wn,Fn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*E(this._months/12):NaN},Fn._bubble=function(){var e,t,n,i,r,a=this._milliseconds,s=this._days,o=this._months,l=this._data;return 0<=a&&0<=s&&0<=o||a<=0&&s<=0&&o<=0||(a+=864e5*pn(gn(o)+s),o=s=0),l.milliseconds=a%1e3,e=S(a/1e3),l.seconds=e%60,t=S(e/60),l.minutes=t%60,n=S(t/60),l.hours=n%24,o+=r=S(mn(s+=S(n/24))),s-=pn(gn(r)),i=S(o/12),o%=12,l.days=s,l.months=o,l.years=i,this},Fn.get=function(e){return e=I(e),this.isValid()?this[e+"s"]():NaN},Fn.milliseconds=An,Fn.seconds=Cn,Fn.minutes=Pn,Fn.hours=Rn,Fn.days=Dn,Fn.weeks=function(){return S(this.days()/7)},Fn.months=kn,Fn.years=In,Fn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,n,i,r,a,s,o,l,u,c,d,h=this.localeData(),f=(n=!e,i=h,r=jt(t=this).abs(),a=Ln(r.as("s")),s=Ln(r.as("m")),o=Ln(r.as("h")),l=Ln(r.as("d")),u=Ln(r.as("M")),c=Ln(r.as("y")),(d=a<=On.ss&&["s",a]||a<On.s&&["ss",a]||s<=1&&["m"]||s<On.m&&["mm",s]||o<=1&&["h"]||o<On.h&&["hh",o]||l<=1&&["d"]||l<On.d&&["dd",l]||u<=1&&["M"]||u<On.M&&["MM",u]||c<=1&&["y"]||["yy",c])[2]=n,d[3]=0<+t,d[4]=i,function(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}.apply(null,d));return e&&(f=h.pastFuture(+this,f)),h.postformat(f)},Fn.toISOString=Un,Fn.toString=Un,Fn.toJSON=Un,Fn.locale=Yt,Fn.localeData=Kt,Fn.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Un),Fn.lang=Xt,G("X",0,0,"unix"),G("x",0,0,"valueOf"),de("x",se),de("X",/[+-]?\d+(\.\d{1,3})?/),me("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),me("x",function(e,t,n){n._d=new Date(E(e))}),h.version="2.18.1",e=wt,h.fn=sn,h.min=function(){return Ct("isBefore",[].slice.call(arguments,0))},h.max=function(){return Ct("isAfter",[].slice.call(arguments,0))},h.now=function(){return Date.now?Date.now():+new Date},h.utc=g,h.unix=function(e){return wt(1e3*e)},h.months=function(e,t){return cn(e,t,"months")},h.isDate=d,h.locale=ot,h.invalid=y,h.duration=jt,h.isMoment=T,h.weekdays=function(e,t,n){return dn(e,t,n,"weekdays")},h.parseZone=function(){return wt.apply(null,arguments).parseZone()},h.localeData=ut,h.isDuration=Dt,h.monthsShort=function(e,t){return cn(e,t,"monthsShort")},h.weekdaysMin=function(e,t,n){return dn(e,t,n,"weekdaysMin")},h.defineLocale=lt,h.updateLocale=function(e,t){if(null!=t){var n,i=nt;null!=it[e]&&(i=it[e]._config),(n=new P(t=C(i,t))).parentLocale=it[e],it[e]=n,ot(e)}else null!=it[e]&&(null!=it[e].parentLocale?it[e]=it[e].parentLocale:null!=it[e]&&delete it[e]);return it[e]},h.locales=function(){return R(it)},h.weekdaysShort=function(e,t,n){return dn(e,t,n,"weekdaysShort")},h.normalizeUnits=I,h.relativeTimeRounding=function(e){return void 0===e?Ln:"function"==typeof e&&(Ln=e,!0)},h.relativeTimeThreshold=function(e,t){return void 0!==On[e]&&(void 0===t?On[e]:(On[e]=t,"s"===e&&(On.ss=t-1),!0))},h.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},h.prototype=sn,h}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],t):t(e.moment)}(this,function(e){"use strict";return e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],t):t(e.moment)}(this,function(e){"use strict";return e.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],t):t(e.moment)}(this,function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}return e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):e.videojs=t(e.window,e.document)}("undefined"!=typeof self?self:this,function(_,h){_=_&&_.hasOwnProperty("default")?_.default:_,h=h&&h.hasOwnProperty("default")?h.default:h;function f(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&a(r,n.prototype),r}).apply(null,arguments)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t(e,t){return t||(t=e.slice(0)),e.raw=t,e}var l=[],e=function(s,o){return function(e,t,n){var i=o.levels[t],r=new RegExp("^("+i+")$");if("log"!==e&&n.unshift(e.toUpperCase()+":"),n.unshift(s+":"),l&&l.push([].concat(n)),_.console){var a=_.console[e];a||"debug"!==e||(a=_.console.info||_.console.log),a&&i&&r.test(e)&&a[Array.isArray(n)?"apply":"call"](_.console,n)}}};var m=function t(n){var i,r="info",a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i("log",r,t)};return i=e(n,a),a.createLogger=function(e){return t(n+": "+e)},a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},a.level=function(e){if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(a.history=function(){return l?[].concat(l):[]}).filter=function(t){return(l||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},a.history.clear=function(){l&&(l.length=0)},a.history.disable=function(){null!==l&&(l.length=0,l=null)},a.history.enable=function(){null===l&&(l=[])},a.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("error",r,t)},a.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("warn",r,t)},a.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("debug",r,t)},a}("VIDEOJS"),g=m.createLogger;var v=function(e){for(var t="",n=0;n<arguments.length;n++)t+=e[n].replace(/\n\r?\s*/g,"")+(arguments[n+1]||"");return t},n=Object.prototype.toString,r=function(e){return u(e)?Object.keys(e):[]};function o(t,n){r(t).forEach(function(e){return n(t[e],e)})}function y(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[n].concat(t)):(t.forEach(function(e){e&&o(e,function(e,t){n[t]=e})}),n)}function u(e){return!!e&&"object"==typeof e}function c(e){return u(e)&&"[object Object]"===n.call(e)&&e.constructor===Object}function i(e,t){if(!e||!t)return"";if("function"!=typeof _.getComputedStyle)return"";var n=_.getComputedStyle(e);return n?n[t]:""}function d(){var e=t(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);return d=function(){return e},e}function x(e){return"string"==typeof e&&/\S/.test(e)}function b(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function T(){return h===_.document}function S(e){return u(e)&&1===e.nodeType}function E(){try{return _.parent!==_.self}catch(e){return!0}}function w(i){return function(e,t){if(!x(e))return h[i](null);x(t)&&(t=h.querySelector(t));var n=S(t)?t:h;return n[i]&&n[i](e)}}function M(e,n,t,i){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===t&&(t={});var r=h.createElement(e);return Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(m.warn(v(d(),e,t)),r.setAttribute(e,t)):"textContent"===e?A(r,t):r[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),i&&q(r,i),r}function A(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function C(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function P(e,t){return b(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function R(e,t){return e.classList?e.classList.add(t):P(e,t)||(e.className=(e.className+" "+t).trim()),e}function D(e,t){return e.classList?e.classList.remove(t):(b(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function k(e,t,n){var i=P(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i)return n?R(e,t):D(e,t),e}function I(n,i){Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})}function L(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&0<e.attributes.length)for(var i=e.attributes,r=i.length-1;0<=r;r--){var a=i[r].name,s=i[r].value;"boolean"!=typeof e[a]&&-1===n.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function O(e,t){return e.getAttribute(t)}function N(e,t,n){e.setAttribute(t,n)}function U(e,t){e.removeAttribute(t)}function F(){h.body.focus(),h.onselectstart=function(){return!1}}function B(){h.onselectstart=function(){return!0}}function $(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(i(e,"height"))),n.width||(n.width=parseFloat(i(e,"width"))),n}}function j(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=h.documentElement,i=h.body,r=n.clientLeft||i.clientLeft||0,a=_.pageXOffset||i.scrollLeft,s=t.left+a-r,o=n.clientTop||i.clientTop||0,l=_.pageYOffset||i.scrollTop,u=t.top+l-o;return{left:Math.round(s),top:Math.round(u)}}function V(e,t){var n={},i=j(e),r=e.offsetWidth,a=e.offsetHeight,s=i.top,o=i.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-l+a)/a)),n.x=Math.max(0,Math.min(1,(u-o)/r)),n}function H(e){return u(e)&&3===e.nodeType}function z(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function G(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),S(e)||H(e)?e:"string"==typeof e&&/\S/.test(e)?h.createTextNode(e):void 0}).filter(function(e){return e})}function q(t,e){return G(e).forEach(function(e){return t.appendChild(e)}),t}function W(e,t){return q(z(e),t)}function Y(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons)}var X=w("querySelector"),K=w("querySelectorAll"),Q=Object.freeze({isReal:T,isEl:S,isInFrame:E,createEl:M,textContent:A,prependTo:C,hasClass:P,addClass:R,removeClass:D,toggleClass:k,setAttributes:I,getAttributes:L,getAttribute:O,setAttribute:N,removeAttribute:U,blockTextSelection:F,unblockTextSelection:B,getBoundingClientRect:$,findPosition:j,getPointerPosition:V,isTextNode:H,emptyEl:z,normalizeContent:G,appendContent:q,insertContent:W,isSingleLeftClick:Y,$:X,$$:K}),Z=1;function J(){return Z++}var ee={},te="vdata"+(new Date).getTime();function ne(e){var t=e[te];return t||(t=e[te]=J()),ee[t]||(ee[t]={}),ee[t]}function ie(e){var t=e[te];return!!t&&!!Object.getOwnPropertyNames(ee[t]).length}function re(t){var e=t[te];if(e){delete ee[e];try{delete t[te]}catch(e){t.removeAttribute?t.removeAttribute(te):t[te]=null}}}function ae(e,t){var n=ne(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&re(e)}function se(t,n,e,i){e.forEach(function(e){t(n,e,i)})}function oe(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var i=e||_.event;for(var r in e={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||h),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var a=h.documentElement,s=h.body;e.pageX=e.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var le=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){le=!0}});_.addEventListener("test",null,e),_.removeEventListener("test",null,e)}catch(e){}}();var ue=["touchstart","touchmove"];function ce(s,e,t){if(Array.isArray(e))return se(ce,s,e,t);var o=ne(s);if(o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),t.guid||(t.guid=J()),o.handlers[e].push(t),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e,t){if(!o.disabled){e=oe(e);var n=o.handlers[e.type];if(n)for(var i=n.slice(0),r=0,a=i.length;r<a&&!e.isImmediatePropagationStopped();r++)try{i[r].call(s,e,t)}catch(e){m.error(e)}}}),1===o.handlers[e].length)if(s.addEventListener){var n=!1;le&&-1<ue.indexOf(e)&&(n={passive:!0}),s.addEventListener(e,o.dispatcher,n)}else s.attachEvent&&s.attachEvent("on"+e,o.dispatcher)}function de(e,t,n){if(ie(e)){var i=ne(e);if(i.handlers){if(Array.isArray(t))return se(de,e,t,n);var r=function(e,t){i.handlers[t]=[],ae(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);ae(e,t)}else r(e,t)}else for(var o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&r(e,o)}}}function he(e,t,n){var i=ie(e)?ne(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=oe(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)he.call(null,r,t,n);else if(!r&&!t.defaultPrevented){var a=ne(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function fe(t,n,i){if(Array.isArray(n))return se(fe,t,n,i);var e=function e(){de(t,n,e),i.apply(this,arguments)};e.guid=i.guid=i.guid||J(),ce(t,n,e)}var pe,me=Object.freeze({fixEvent:oe,on:ce,off:de,trigger:he,one:fe}),ge=!1,ve=function(){if(T()&&!1!==pe.options.autoSetup){var e=Array.prototype.slice.call(h.getElementsByTagName("video")),t=Array.prototype.slice.call(h.getElementsByTagName("audio")),n=Array.prototype.slice.call(h.getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&0<i.length)for(var r=0,a=i.length;r<a;r++){var s=i[r];if(!s||!s.getAttribute){_e(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&pe(s)}else ge||_e(1)}};function _e(e,t){t&&(pe=t),_.setTimeout(ve,e)}T()&&"complete"===h.readyState?ge=!0:fe(_,"load",function(){ge=!0});var ye,xe=function(e){var t=h.createElement("style");return t.className=e,t},be=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Te=function(e,t,n){t.guid||(t.guid=J());var i=function(){return t.apply(e,arguments)};return i.guid=n?n+"_"+t.guid:t.guid,i},Se=function(t,n){var i=Date.now();return function(){var e=Date.now();n<=e-i&&(t.apply(void 0,arguments),i=e)}},Ee=function(){};Ee.prototype.allowedEvents_={},Ee.prototype.addEventListener=Ee.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},ce(this,e,t),this.addEventListener=n},Ee.prototype.removeEventListener=Ee.prototype.off=function(e,t){de(this,e,t)},Ee.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},fe(this,e,t),this.addEventListener=n},Ee.prototype.dispatchEvent=Ee.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=oe(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),he(this,e)},Ee.prototype.queueTrigger=function(e){var t=this;ye||(ye=new Map);var n=e.type||e,i=ye.get(this);i||(i=new Map,ye.set(this,i));var r=i.get(n);i.delete(n),_.clearTimeout(r);var a=_.setTimeout(function(){0===i.size&&(i=null,ye.delete(t)),t.trigger(e)},0);i.set(n,a)};var we=function(t){return t instanceof Ee||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},Me=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Ae=function(e){if(!e.nodeName&&!we(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Ce=function(e){if(!Me(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Pe=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},Re=function(e,t){var n,i,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return r=a?(n=e.eventBusEl_,3<=t.length&&t.shift(),i=t[0],t[1]):(n=t[0],i=t[1],t[2]),Ae(n),Ce(i),Pe(r),{isTargetingSelf:a,target:n,type:i,listener:r=Te(e,r)}},De=function(e,t,n,i){Ae(e),e.nodeName?me[t](e,n,i):e[t](n,i)},ke={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Re(this,n),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(De(s,"on",o,l),!a){var u=function(){return e.off(s,o,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,De(this,"on","dispose",u),De(s,"on","dispose",c)}},one:function(){for(var r=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Re(this,t),a=i.isTargetingSelf,s=i.target,o=i.type,l=i.listener;if(a)De(s,"one",o,l);else{var u=function e(){r.off(s,o,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];l.apply(null,n)};u.guid=l.guid,De(s,"one",o,u)}},off:function(e,t,n){if(!e||Me(e))de(this.eventBusEl_,e,t);else{var i=e,r=t;Ae(i),Ce(r),Pe(n),n=Te(this,n),this.off("dispose",n),i.nodeName?(de(i,r,n),de(i,"dispose",n)):we(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){return he(this.eventBusEl_,e,t)}};function Ie(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=M("span",{className:"vjs-event-bus"});return y(e,ke),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),_.setTimeout(function(){e.eventBusEl_=null},0)}),e}var Le={state:{},setState:function(e){var n,i=this;return"function"==typeof e&&(e=e()),o(e,function(e,t){i.state[t]!==e&&((n=n||{})[t]={from:i.state[t],to:e}),i.state[t]=e}),n&&we(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function Oe(e,t){return y(e,Le),e.state=y({},e.state,t),"function"==typeof e.handleStateChanged&&we(e)&&e.on("statechanged",e.handleStateChanged),e}function Ne(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function Ue(){for(var n={},e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(function(e){e&&o(e,function(e,t){c(e)?(c(n[t])||(n[t]={}),n[t]=Ue(n[t],e)):n[t]=e})}),n}var Fe=function(){function u(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.parentComponent_=null,this.options_=Ue({},this.options_),t=this.options_=Ue(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+J()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&Ie(this,{eventBusKey:this.el_?"el_":null}),Oe(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var e=u.prototype;return e.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),re(this.el_),this.el_=null),this.player_=null},e.player=function(){return this.player_},e.options=function(e){return m.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e&&(this.options_=Ue(this.options_,e)),this.options_},e.el=function(){return this.el_},e.createEl=function(e,t,n){return M(e,t,n)},e.localize=function(e,r,t){void 0===t&&(t=e);var n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[n],s=n&&n.split("-")[0],o=i&&i[s],l=t;return a&&a[e]?l=a[e]:o&&o[e]&&(l=o[e]),r&&(l=l.replace(/\{(\d+)\}/g,function(e,t){var n=r[t-1],i=n;return void 0===n&&(i=e),i})),l},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(e){return this.childIndex_[e]},e.getChild=function(e){if(e)return e=Ne(e),this.childNameIndex_[e]},e.addChild=function(e,t,n){var i,r;if(void 0===t&&(t={}),void 0===n&&(n=this.children_.length),"string"==typeof e){r=Ne(e);var a=t.componentClass||r;t.name=r;var s=u.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(r=r||i.name&&Ne(i.name()))&&(this.childNameIndex_[r]=i),"function"==typeof i.el&&i.el()){var o=this.contentEl().children[n]||null;this.contentEl().insertBefore(i.el(),o)}return i},e.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.initChildren=function(){var r=this,i=this.options_.children;if(i){var e,a=this.options_,n=u.getComponent("Tech");(e=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t,n;return n="string"==typeof e?i[t=e]||r.options_[t]||{}:(t=e.name,e),{name:t,opts:n}}).filter(function(e){var t=u.getComponent(e.opts.componentClass||Ne(e.name));return t&&!n.isTech(t)}).forEach(function(e){var t=e.name,n=e.opts;if(void 0!==a[t]&&(n=a[t]),!1!==n){!0===n&&(n={}),n.playerOptions=r.options_.playerOptions;var i=r.addChild(t,n);i&&(r[t]=i)}})}},e.buildCSSClass=function(){return""},e.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.$=function(e,t){return X(e,t||this.contentEl())},e.$$=function(e,t){return K(e,t||this.contentEl())},e.hasClass=function(e){return P(this.el_,e)},e.addClass=function(e){R(this.el_,e)},e.removeClass=function(e){D(this.el_,e)},e.toggleClass=function(e,t){k(this.el_,e,t)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(e){return O(this.el_,e)},e.setAttribute=function(e,t){N(this.el_,e,t)},e.removeAttribute=function(e){U(this.el_,e)},e.width=function(e,t){return this.dimension("width",e,t)},e.height=function(e,t){return this.dimension("height",e,t)},e.dimensions=function(e,t){this.width(e,!0),this.height(t)},e.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+Ne(e)],10)},e.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof _.getComputedStyle){var n=_.getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}if(0===(t=parseFloat(t))){var i="offset"+Ne(e);t=this.el_[i]}return t},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.emitTapEvents=function(){var i,t=0,r=null;this.on("touchstart",function(e){1===e.touches.length&&(r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=(new Date).getTime(),i=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)i=!1;else if(r){var t=e.touches[0].pageX-r.pageX,n=e.touches[0].pageY-r.pageY;10<Math.sqrt(t*t+n*n)&&(i=!1)}});var e=function(){i=!1};this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(r=null)===i&&((new Date).getTime()-t<200&&(e.preventDefault(),this.trigger("tap")))})},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,n=Te(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){n(),this.clearInterval(t),t=this.setInterval(n,250)});var e=function(e){n(),this.clearInterval(t)};this.on("touchmove",n),this.on("touchend",e),this.on("touchcancel",e)}},e.setTimeout=function(e,t){var n,i,r=this;return e=Te(this,e),n=_.setTimeout(function(){r.off("dispose",i),e()},t),(i=function(){return r.clearTimeout(n)}).guid="vjs-timeout-"+n,this.on("dispose",i),n},e.clearTimeout=function(e){_.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.setInterval=function(e,t){var n=this;e=Te(this,e);var i=_.setInterval(e,t),r=function(){return n.clearInterval(i)};return r.guid="vjs-interval-"+i,this.on("dispose",r),i},e.clearInterval=function(e){_.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.requestAnimationFrame=function(e){var t,n,i=this;return this.supportsRaf_?(e=Te(this,e),t=_.requestAnimationFrame(function(){i.off("dispose",n),e()}),(n=function(){return i.cancelAnimationFrame(t)}).guid="vjs-raf-"+t,this.on("dispose",n),t):this.setTimeout(e,1e3/60)},e.cancelAnimationFrame=function(e){if(this.supportsRaf_){_.cancelAnimationFrame(e);var t=function(){};return t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},u.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n,i=u.getComponent("Tech"),r=i&&i.isTech(t),a=u===t||u.prototype.isPrototypeOf(t.prototype);if(r||!a)throw n=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+n+".");e=Ne(e),u.components_||(u.components_={});var s=u.getComponent("Player");if("Player"===e&&s&&s.players){var o=s.players,l=Object.keys(o);if(o&&0<l.length&&l.map(function(e){return o[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return u.components_[e]=t},u.getComponent=function(e){if(e)return e=Ne(e),u.components_&&u.components_[e]?u.components_[e]:void 0},u}();Fe.prototype.supportsRaf_="function"==typeof _.requestAnimationFrame&&"function"==typeof _.cancelAnimationFrame,Fe.registerComponent("Component",Fe);var Be,$e,je,Ve,He=_.navigator&&_.navigator.userAgent||"",ze=/AppleWebKit\/([\d.]+)/i.exec(He),Ge=ze?parseFloat(ze.pop()):null,qe=/iPad/i.test(He),We=/iPhone/i.test(He)&&!qe,Ye=/iPod/i.test(He),Xe=We||qe||Ye,Ke=(Be=He.match(/OS (\d+)_/i))&&Be[1]?Be[1]:null,Qe=/Android/i.test(He),Ze=function(){var e=He.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Je=Qe&&Ze<5&&Ge<537,et=/Firefox/i.test(He),tt=/Edge/i.test(He),nt=!tt&&(/Chrome/i.test(He)||/CriOS/i.test(He)),it=($e=He.match(/(Chrome|CriOS)\/(\d+)/))&&$e[2]?parseFloat($e[2]):null,rt=(je=/MSIE\s(\d+)\.\d/.exec(He),!(Ve=je&&parseFloat(je[1]))&&/Trident\/7.0/i.test(He)&&/rv:11.0/.test(He)&&(Ve=11),Ve),at=/Safari/i.test(He)&&!nt&&!Qe&&!tt,st=(at||Xe)&&!nt,ot=T()&&("ontouchstart"in _||_.navigator.maxTouchPoints||_.DocumentTouch&&_.document instanceof _.DocumentTouch),lt=Object.freeze({IS_IPAD:qe,IS_IPHONE:We,IS_IPOD:Ye,IS_IOS:Xe,IOS_VERSION:Ke,IS_ANDROID:Qe,ANDROID_VERSION:Ze,IS_NATIVE_ANDROID:Je,IS_FIREFOX:et,IS_EDGE:tt,IS_CHROME:nt,CHROME_VERSION:it,IE_VERSION:rt,IS_SAFARI:at,IS_ANY_SAFARI:st,TOUCH_ENABLED:ot});function ut(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function ct(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ut.bind(null,"start",0,e),end:ut.bind(null,"end",1,e)}}function dt(e,t){return Array.isArray(e)?ct(e):void 0===e||void 0===t?ct():ct([[e,t]])}function ht(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=dt(0,0));for(var a=0;a<e.length;a++)n=e.start(a),t<(i=e.end(a))&&(i=t),r+=i-n;return r/t}for(var ft,pt={},mt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],gt=mt[0],vt=!0,_t=0;_t<mt.length;_t++)if(mt[_t][1]in h){ft=mt[_t];break}if(ft){for(var yt=0;yt<ft.length;yt++)pt[gt[yt]]=ft[yt];vt=ft[0]!==gt[0]}function xt(e){if(e instanceof xt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:u(e)&&("number"==typeof e.code&&(this.code=e.code),y(this,e)),this.message||(this.message=xt.defaultMessages[this.code]||"")}xt.prototype.code=0,xt.prototype.message="",xt.prototype.status=null,xt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],xt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var bt=0;bt<xt.errorTypes.length;bt++)xt[xt.errorTypes[bt]]=bt,xt.prototype[xt.errorTypes[bt]]=bt;var Tt=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(e){i=e}return[i,n]};function St(e){return null!=e&&"function"==typeof e.then}function Et(e){St(e)&&e.then(null,function(e){})}var wt=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,n){return i[t]&&(e[t]=i[t]),e},{cues:i.cues&&Array.prototype.map.call(i.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},Mt=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=wt(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(wt))},At=function(e,n){return e.forEach(function(e){var t=n.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),n.textTracks()},Ct="vjs-modal-dialog",Pt=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=M("div",{className:Ct+"-content"},{role:"document"}),n.descEl_=M("p",{className:Ct+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),A(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}f(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},t.buildCSSClass=function(){return Ct+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},t.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Te(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Te(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),W(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},t.empty=function(){this.trigger("beforemodalempty"),z(this.contentEl()),this.trigger("modalempty")},t.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t.conditionalFocus_=function(){var e=h.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(h,"keydown",this.handleKeyDown))},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(h,"keydown",this.handleKeyDown)},t.handleKeyDown=function(e){if(9===e.which){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}h.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},t.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof _.HTMLAnchorElement||e instanceof _.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof _.HTMLInputElement||e instanceof _.HTMLSelectElement||e instanceof _.HTMLTextAreaElement||e instanceof _.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof _.HTMLIFrameElement||e instanceof _.HTMLObjectElement||e instanceof _.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},e}(Fe);Pt.prototype.options_={pauseOnOpen:!0,temporary:!0},Fe.registerComponent("ModalDialog",Pt);var Rt=function(i){function e(e){var t;void 0===e&&(e=[]),(t=i.call(this)||this).tracks_=[],Object.defineProperty(p(p(t)),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<e.length;n++)t.addTrack(e[n]);return t}f(e,i);var t=e.prototype;return t.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(Ee);for(var Dt in Rt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Rt.prototype.allowedEvents_)Rt.prototype["on"+Dt]=null;var kt=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},It=function(i){function e(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].enabled){kt(e,e[n]);break}return(t=i.call(this,e)||this).changing_=!1,t}return f(e,i),e.prototype.addTrack=function(e){var t=this;e.enabled&&kt(this,e),i.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){t.changing_||(t.changing_=!0,kt(t,e),t.changing_=!1,t.trigger("change"))})},e}(Rt),Lt=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},Ot=function(i){function e(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].selected){Lt(e,e[n]);break}return(t=i.call(this,e)||this).changing_=!1,Object.defineProperty(p(p(t)),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),t}return f(e,i),e.prototype.addTrack=function(e){var t=this;e.selected&&Lt(this,e),i.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){t.changing_||(t.changing_=!0,Lt(t,e),t.changing_=!1,t.trigger("change"))})},e}(Rt),Nt=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.addTrack=function(e){t.prototype.addTrack.call(this,e),e.addEventListener("modechange",Te(this,function(){this.queueTrigger("change")}));-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",Te(this,function(){this.trigger("selectedlanguagechange")}))},e}(Rt),Ut=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}(),Ft=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)},e.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(),Bt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},$t={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},jt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Vt={disabled:"disabled",hidden:"hidden",showing:"showing"},Ht=function(a){function e(e){var t;void 0===e&&(e={}),t=a.call(this)||this;var n={id:e.id||"vjs_track_"+J(),kind:e.kind||"",label:e.label||"",language:e.language||""},i=function(e){Object.defineProperty(p(p(t)),e,{get:function(){return n[e]},set:function(){}})};for(var r in n)i(r);return t}return f(e,a),e}(Ee),zt=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=h.createElement("a");n.href=e;var i,r=""===n.host&&"file:"!==n.protocol;r&&((i=h.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),h.body.appendChild(i));for(var a={},s=0;s<t.length;s++)a[t[s]]=n[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=_.location.protocol),r&&h.body.removeChild(i),a},Gt=function(e){if(!e.match(/^https?:\/\//)){var t=h.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},qt=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},Wt=function(e){var t=_.location,n=zt(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},Yt=Object.freeze({parseUrl:zt,getAbsoluteURL:Gt,getFileExtension:qt,isCrossOrigin:Wt}),Xt=function(e){var t=Kt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Kt=Object.prototype.toString;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Qt(e,t){return e(t={exports:{}},t.exports),t.exports}var Zt=Qt(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),Jt=(Zt.left,Zt.right,Function.prototype.toString),en=/^\s*class\b/,tn=function(e){try{var t=Jt.call(e);return en.test(t)}catch(e){return!1}},nn=Object.prototype.toString,rn="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,an=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(rn)return function(e){try{return!tn(e)&&(Jt.call(e),!0)}catch(e){return!1}}(e);if(tn(e))return!1;var t=nn.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},sn=Object.prototype.toString,on=Object.prototype.hasOwnProperty,ln=function(e,t,n){if(!an(t))throw new TypeError("iterator must be a function");var i;3<=arguments.length&&(i=n),"[object Array]"===sn.call(e)?function(e,t,n){for(var i=0,r=e.length;i<r;i++)on.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))}(e,t,i):"string"==typeof e?function(e,t,n){for(var i=0,r=e.length;i<r;i++)null==n?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)}(e,t,i):function(e,t,n){for(var i in e)on.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))}(e,t,i)},un=function(e){if(!e)return{};var a={};return ln(Zt(e).split("\n"),function(e){var t,n=e.indexOf(":"),i=Zt(e.slice(0,n)).toLowerCase(),r=Zt(e.slice(n+1));void 0===a[i]?a[i]=r:(t=a[i],"[object Array]"===Object.prototype.toString.call(t)?a[i].push(r):a[i]=[a[i],r])}),a},cn=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)dn.call(n,i)&&(e[i]=n[i])}return e},dn=Object.prototype.hasOwnProperty;var hn=pn;function fn(e,t,n){var i=e;return Xt(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=cn(t,{uri:e}),i.callback=n,i}function pn(e,t,n){return mn(t=fn(e,t,n))}function mn(i){if(void 0===i.callback)throw new Error("callback argument missing");var r=!1,a=function(e,t,n){r||(r=!0,i.callback(e,t,n))};function t(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,a(e,m)}function e(){if(!s){var e;clearTimeout(l),e=i.useXDR&&void 0===o.status?200:1223===o.status?204:o.status;var t=m,n=null;return 0!==e?(t={body:function(){var e=void 0;if(e=o.response?o.response:o.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(o),p)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:c,headers:{},url:u,rawRequest:o},o.getAllResponseHeaders&&(t.headers=un(o.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),a(n,t,t.body)}}var n,s,o=i.xhr||null;o||(o=i.cors||i.useXDR?new pn.XDomainRequest:new pn.XMLHttpRequest);var l,u=o.url=i.uri||i.url,c=o.method=i.method||"GET",d=i.body||i.data,h=o.headers=i.headers||{},f=!!i.sync,p=!1,m={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:o};if("json"in i&&!1!==i.json&&(p=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===i.json?d:i.json))),o.onreadystatechange=function(){4===o.readyState&&setTimeout(e,0)},o.onload=e,o.onerror=t,o.onprogress=function(){},o.onabort=function(){s=!0},o.ontimeout=t,o.open(c,u,!f,i.username,i.password),f||(o.withCredentials=!!i.withCredentials),!f&&0<i.timeout&&(l=setTimeout(function(){if(!s){s=!0,o.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},i.timeout)),o.setRequestHeader)for(n in h)h.hasOwnProperty(n)&&o.setRequestHeader(n,h[n]);else if(i.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(o.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(o),o.send(d||null),o}pn.XMLHttpRequest=_.XMLHttpRequest||function(){},pn.XDomainRequest="withCredentials"in new pn.XMLHttpRequest?pn.XMLHttpRequest:_.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(i){pn["delete"===i?"del":i]=function(e,t,n){return(t=fn(e,t,n)).method=i.toUpperCase(),mn(t)}});var gn=function(e,t){var n=new _.WebVTT.Parser(_,_.vttjs,_.WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<i.length&&(_.console&&_.console.groupCollapsed&&_.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(e){return m.error(e)}),_.console&&_.console.groupEnd&&_.console.groupEnd()),n.flush()},vn=function(u){function e(e){var t;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=Ue(e,{kind:jt[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=Vt[n.mode]||"disabled",r=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(i="hidden"),(t=u.call(this,n)||this).tech_=n.tech,t.cues_=[],t.activeCues_=[];var a=new Ft(t.cues_),s=new Ft(t.activeCues_),o=!1,l=Te(p(p(t)),function(){this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1)});return"disabled"!==i&&t.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0),Object.defineProperties(p(p(t)),{default:{get:function(){return r},set:function(){}},mode:{get:function(){return i},set:function(e){var t=this;Vt[e]&&("disabled"!==(i=e)?this.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),n.src?(t.src=n.src,function(e,r){var t={uri:e},n=Wt(e);n&&(t.cors=n),hn(t,Te(this,function(e,t,n){if(e)return m.error(e,t);if(r.loaded_=!0,"function"!=typeof _.WebVTT){if(r.tech_){var i=function(){return gn(n,r)};r.tech_.on("vttjsloaded",i),r.tech_.on("vttjserror",function(){m.error("vttjs failed to load, stopping trying to process "+r.src),r.tech_.off("vttjsloaded",i)})}}else gn(n,r)}))}(n.src,p(p(t)))):t.loaded_=!0,t}f(e,u);var t=e.prototype;return t.addCue=function(e){var t=e;if(_.vttjs&&!(e instanceof _.vttjs.VTTCue)){for(var n in t=new _.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},e}(Ht);vn.prototype.allowedEvents_={cuechange:"cuechange"};var _n=function(r){function e(e){var t;void 0===e&&(e={});var n=Ue(e,{kind:$t[e.kind]||""});t=r.call(this,n)||this;var i=!1;return Object.defineProperty(p(p(t)),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),n.enabled&&(t.enabled=n.enabled),t.loaded_=!0,t}return f(e,r),e}(Ht),yn=function(r){function e(e){var t;void 0===e&&(e={});var n=Ue(e,{kind:Bt[e.kind]||""});t=r.call(this,n)||this;var i=!1;return Object.defineProperty(p(p(t)),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),n.selected&&(t.selected=n.selected),t}return f(e,r),e}(Ht),xn=function(r){function e(e){var t,n;void 0===e&&(e={}),t=r.call(this)||this;var i=new vn(e);return t.kind=i.kind,t.src=i.src,t.srclang=i.language,t.label=i.label,t.default=i.default,Object.defineProperties(p(p(t)),{readyState:{get:function(){return n}},track:{get:function(){return i}}}),n=0,i.addEventListener("loadeddata",function(){n=2,t.trigger({type:"load",target:p(p(t))})}),t}return f(e,r),e}(Ee);xn.prototype.allowedEvents_={load:"load"},xn.NONE=0,xn.LOADING=1,xn.LOADED=2,xn.ERROR=3;var bn={audio:{ListClass:It,TrackClass:_n,capitalName:"Audio"},video:{ListClass:Ot,TrackClass:yn,capitalName:"Video"},text:{ListClass:Nt,TrackClass:vn,capitalName:"Text"}};Object.keys(bn).forEach(function(e){bn[e].getterName=e+"Tracks",bn[e].privateName=e+"Tracks_"});var Tn={remoteText:{ListClass:Nt,TrackClass:vn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Ut,TrackClass:xn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Sn=Ue(bn,Tn);Tn.names=Object.keys(Tn),bn.names=Object.keys(bn),Sn.names=[].concat(Tn.names).concat(bn.names);var En=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function wn(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Mn(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function An(){this.values=En(null)}function Cn(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(n);if(2===s.length)t(s[0],s[1])}}function Pn(t,e,a){var n,i,s,r=t;function o(){var e=Mn(t);if(null===e)throw new wn(wn.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=o(),l(),"--\x3e"!==t.substr(0,3))throw new wn(wn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),l(),e.endTime=o(),l(),n=t,i=e,s=new An,Cn(n,function(e,t){switch(e){case"region":for(var n=a.length-1;0<=n;n--)if(a[n].id===t){s.set(e,a[n].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),r=i[0];s.integer(e,r),s.percent(e,r)&&s.set("snapToLines",!1),s.alt(e,r,["auto"]),2===i.length&&s.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),s.percent(e,i[0]),2===i.length&&s.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),i.region=s.get("region",null),i.vertical=s.get("vertical",""),i.line=s.get("line","auto"),i.lineAlign=s.get("lineAlign","start"),i.snapToLines=s.get("snapToLines",!0),i.size=s.get("size",100),i.align=s.get("align","middle"),i.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},i.align),i.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},i.align)}((wn.prototype=En(Error.prototype)).constructor=wn).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},An.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var Rn={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},Dn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},kn={v:"title",lang:"lang"},In={rt:"ruby"};function Ln(a,n){function e(){if(!n)return null;var e,t=n.match(/^([^<]*)(<[^>]*>?)?/);return e=t[1]?t[1]:t[2],n=n.substr(e.length),e}function t(e){return Rn[e]}function i(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],t);return e}function r(e,t){var n=Dn[e];if(!n)return null;var i=a.document.createElement(n);i.localName=n;var r=kn[e];return r&&t&&(i[r]=t.trim()),i}for(var s,o,l,u=a.document.createElement("div"),c=u,d=[];null!==(s=e());)if("<"!==s[0])c.appendChild(a.document.createTextNode(i(s)));else{if("/"===s[1]){d.length&&d[d.length-1]===s.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var h,f=Mn(s.substr(1,s.length-2));if(f){h=a.document.createProcessingInstruction("timestamp",f),c.appendChild(h);continue}var p=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(h=r(p[1],p[3])))continue;if(o=c,In[(l=h).localName]&&In[l.localName]!==o.localName)continue;p[2]&&(h.className=p[2].substr(1).replace("."," ")),d.push(p[1]),c.appendChild(h),c=h}return u}var On=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Nn(e){for(var t=0;t<On.length;t++){var n=On[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function Un(){}function Fn(e,t,n){Un.call(this),this.cue=t,this.cueDiv=Ln(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:function(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?i[e.length=0]:n}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}for(r(t,e);n=a(t);)for(var i=0;i<n.length;i++)if(Nn(n.charCodeAt(i)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"middle":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Bn(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function $n(e,t,o,l){var n=new Bn(t),i=t.cue,r=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(i),a=[];if(i.snapToLines){var s;switch(i.vertical){case"":a=["+y","-y"],s="height";break;case"rl":a=["+x","-x"],s="width";break;case"lr":a=["-x","+x"],s="width"}var u=n.lineHeight,c=u*Math.round(r),d=o[s]+u,h=a[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),r<0&&(c+=""===i.vertical?o.height:o.width,a=a.reverse()),n.move(h,c)}else{var f=n.lineHeight/o.height*100;switch(i.lineAlign){case"middle":r-=f/2;break;case"end":r-=f}switch(i.vertical){case"":t.applyStyles({top:t.formatStyle(r,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(r,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(r,"%")})}a=["+y","-x","+x","-y"],n=new Bn(t)}var p=function(e,t){for(var n,i=new Bn(e),r=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(o,t[a])||e.within(o)&&e.overlapsAny(l);)e.move(t[a]);if(e.within(o))return e;var s=e.intersectPercentage(o);s<r&&(n=new Bn(e),r=s),e=new Bn(i)}return n||i}(n,a);t.move(p.toCSSCompatValues(o))}function jn(){}Un.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},Un.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Fn.prototype=En(Un.prototype)).constructor=Fn,Bn.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Bn.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Bn.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Bn.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Bn.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Bn.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Bn.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Bn.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},jn.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},jn.convertCueToDOMTree=function(e,t){return e&&t?Ln(e,t):null};jn.processCues=function(i,r,e){if(!i||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var a=i.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",e.appendChild(a),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(r)){var s=[],o=Bn.getSimpleBoxPosition(a),l={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var e,t,n=0;n<r.length;n++)t=r[n],e=new Fn(i,t,l),a.appendChild(e.div),$n(0,e,o,s),t.displayState=e.div,s.push(Bn.getSimpleBoxPosition(e))}()}else for(var t=0;t<r.length;t++)a.appendChild(r[t].displayState)},(jn.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof wn))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var a=this;function t(){for(var e=a.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,a.buffer=e.substr(t),n}function n(e){e.match(/X-TIMESTAMP-MAP/)?Cn(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":n=t,i=new An,Cn(n,function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",Mn(t))}},/[^\d]:/,/,/),a.ontimestampmap&&a.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}var n,i},/=/):Cn(e,function(e,t){switch(e){case"Region":!function(e){var r=new An;if(Cn(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var i=new An;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")){var t=new(a.vttjs.VTTRegion||a.window.VTTRegion);t.width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),a.onregion&&a.onregion(t),a.regionList.push({id:r.get("id"),region:t})}}(t)}},/:/)}e&&(a.buffer+=a.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var r=(i=t()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new wn(wn.Errors.BadSignature);a.state="HEADER"}for(var s=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(s?s=!1:i=t(),a.state){case"HEADER":/:/.test(i)?n(i):i||(a.state="ID");continue;case"NOTE":i||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){a.state="NOTE";break}if(!i)continue;if(a.cue=new(a.vttjs.VTTCue||a.window.VTTCue)(0,0,""),a.state="CUE",-1===i.indexOf("--\x3e")){a.cue.id=i;continue}case"CUE":try{Pn(i,a.cue,a.regionList)}catch(e){a.reportOrThrowError(e),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(s=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=i;continue;case"BADCUE":i||(a.state="ID");continue}}}catch(e){a.reportOrThrowError(e),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new wn(wn.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Vn=jn,Hn={"":1,lr:1,rl:1},zn={start:1,middle:1,end:1,left:1,right:1};function Gn(e){return"string"==typeof e&&(!!zn[e.toLowerCase()]&&e.toLowerCase())}function qn(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,s=t,o=n,l=null,u="",c=!0,d="auto",h="start",f=50,p="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t,n="string"==typeof(t=e)&&!!Hn[t.toLowerCase()]&&t.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");u=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Gn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return f},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");f=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(e){var t=Gn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=Gn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}qn.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Wn=qn,Yn={"":!0,up:!0};function Xn(e){return"number"==typeof e&&0<=e&&e<=100}var Kn=function(){var t=100,n=3,i=0,r=100,a=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!Xn(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!Xn(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Xn(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!Xn(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!Xn(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t,n="string"==typeof(t=e)&&!!Yn[t.toLowerCase()]&&t.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");o=n}}})},Qn=Qt(function(e){var t=e.exports={WebVTT:Vn,VTTCue:Wn,VTTRegion:Kn};_.vttjs=t,_.WebVTT=t.WebVTT;var n=t.VTTCue,i=t.VTTRegion,r=_.VTTCue,a=_.VTTRegion;t.shim=function(){_.VTTCue=n,_.VTTRegion=i},t.restore=function(){_.VTTCue=r,_.VTTRegion=a},_.VTTCue||t.shim()});Qn.WebVTT,Qn.VTTCue,Qn.VTTRegion;var Zn=function(t){function n(n,e){var i;return void 0===n&&(n={}),void 0===e&&(e=function(){}),n.reportTouchActivity=!1,(i=t.call(this,null,n,e)||this).hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),Sn.names.forEach(function(e){var t=Sn[e];n&&n[t.getterName]&&(i[t.privateName]=n[t.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===n["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new Sn.text.ListClass,i.initTrackListeners(),n.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}f(n,t);var e=n.prototype;return e.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},e.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Te(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},e.onDurationChange=function(e){this.duration_=this.duration()},e.buffered=function(){return dt(0,0)},e.bufferedPercent=function(){return ht(this.buffered(),this.duration_)},e.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.dispose=function(){this.clearTracks(bn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.clearTracks=function(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],n=t.length;n--;){var i=t[n];"text"===e&&r.removeRemoteTextTrack(i),t.removeTrack(i)}})},e.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},e.reset=function(){},e.error=function(e){return void 0!==e&&(this.error_=new xt(e),this.trigger("error")),this.error_},e.played=function(){return this.hasStarted_?dt(0,0):dt()},e.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.initTrackListeners=function(){var r=this;bn.names.forEach(function(e){var t=bn[e],n=function(){r.trigger(e+"trackchange")},i=r[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),r.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},e.addWebVttScript_=function(){var e=this;if(!_.WebVTT)if(h.body.contains(this.el())){if(!this.options_["vtt.js"]&&c(Qn)&&0<Object.keys(Qn).length)return void this.trigger("vttjsloaded");var t=h.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),_.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},e.emulateTextTracks=function(){var e=this,n=this.textTracks(),t=this.remoteTextTracks(),i=function(e){return n.addTrack(e.track)},r=function(e){return n.removeTrack(e.track)};t.on("addtrack",i),t.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},s=function(){a();for(var e=0;e<n.length;e++){var t=n[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}};s(),n.addEventListener("change",s),n.addEventListener("addtrack",s),n.addEventListener("removetrack",s),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",r),n.removeEventListener("change",s),n.removeEventListener("addtrack",s),n.removeEventListener("removetrack",s);for(var e=0;e<n.length;e++){n[e].removeEventListener("cuechange",a)}})},e.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var s=new Sn.text.TrackClass(r);return a.addTrack(s),s}(this,e,t,n)},e.createRemoteTextTrack=function(e){var t=Ue(e,{tech:this});return new Tn.remoteTextEl.TrackClass(t)},e.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var i=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(m.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(i.track)}),i},e.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},e.getVideoPlaybackQuality=function(){return{}},e.setPoster=function(){},e.playsinline=function(){},e.setPlaysinline=function(){},e.overrideNativeAudioTracks=function(){},e.overrideNativeVideoTracks=function(){},e.canPlayType=function(){return""},n.canPlayType=function(){return""},n.canPlaySource=function(e,t){return n.canPlayType(e.type)},n.isTech=function(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerTech=function(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ne(e),n.techs_[e]=t,"Tech"!==e&&n.defaultTechOrder_.push(e),t},n.getTech=function(e){if(e)return e=Ne(e),n.techs_&&n.techs_[e]?n.techs_[e]:_&&_.videojs&&_.videojs[e]?(m.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),_.videojs[e]):void 0},n}(Fe);Sn.names.forEach(function(e){var t=Sn[e];Zn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Zn.prototype.featuresVolumeControl=!0,Zn.prototype.featuresMuteControl=!0,Zn.prototype.featuresFullscreenResize=!1,Zn.prototype.featuresPlaybackRate=!1,Zn.prototype.featuresProgressEvents=!1,Zn.prototype.featuresSourceset=!1,Zn.prototype.featuresTimeupdateEvents=!1,Zn.prototype.featuresNativeTextTracks=!1,Zn.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var n=r.sourceHandlers;n||(n=r.sourceHandlers=[]),void 0===t&&(t=n.length),n.splice(t,0,e)},r.canPlayType=function(e){for(var t,n=r.sourceHandlers||[],i=0;i<n.length;i++)if(t=n[i].canPlayType(e))return t;return""},r.selectSourceHandler=function(e,t){for(var n=r.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(e,t))return n[i];return null},r.canPlaySource=function(e,t){var n=r.selectSourceHandler(e,t);return n?n.canHandleSource(e,t):""};["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:m.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Fe.registerComponent("Tech",Zn),Zn.registerTech("Tech",Zn),Zn.defaultTechOrder_=[];var Jn={},ei={},ti={};function ni(e,t,n){e.setTimeout(function(){return function n(i,e,r,a,s,o){void 0===i&&(i={});void 0===e&&(e=[]);void 0===s&&(s=[]);void 0===o&&(o=!1);var t=e,l=t[0],u=t.slice(1);if("string"==typeof l)n(i,Jn[l],r,a,s,o);else if(l){var c=li(a,l);if(!c.setSource)return s.push(c),n(i,u,r,a,s,o);c.setSource(y({},i),function(e,t){if(e)return n(i,u,r,a,s,o);s.push(c),n(t,i.type===t.type?u:Jn[t.type],r,a,s,o)})}else u.length?n(i,u,r,a,s,o):o?r(i,s):n(i,Jn["*"],r,a,s,!0)}(t,Jn[t.type],n,e)},1)}function ii(e,t,n,i){void 0===i&&(i=null);var r="call"+Ne(n),a=e.reduce(oi(r),i),s=a===ti,o=s?null:t[n](a);return function(e,t,n,i){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,o,s),o}var ri={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},ai={setCurrentTime:1},si={play:1,pause:1};function oi(n){return function(e,t){return e===ti?ti:t[n]?t[n](e):e}}function li(e,t){var n=ei[e.id()],i=null;if(null==n)return i=t(e),ei[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=n[r],s=a[0],o=a[1];s===t&&(i=o)}return null===i&&(i=t(e),n.push([t,i])),i}var ui={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},ci=function(e){void 0===e&&(e="");var t=qt(e);return ui[t.toLowerCase()]||""};function di(e){var t=ci(e.src);return!e.type&&t&&(e.type=t),e}var hi=function(u){function e(e,t,n){var i,r=Ue({createEl:!1},t);if(i=u.call(this,e,r,n)||this,t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var a=0,s=t.playerOptions.techOrder;a<s.length;a++){var o=Ne(s[a]),l=Zn.getTech(o);if(o||(l=Fe.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}return i}return f(e,u),e}(Fe);Fe.registerComponent("MediaLoader",hi);var fi=function(r){function e(e,t){var n;return(n=r.call(this,e,t)||this).emitTapEvents(),n.enable(),n}f(e,r);var t=e.prototype;return t.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&m.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=y({role:"button"},n),this.tabIndex_=t.tabIndex;var i=r.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(i),i},t.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},t.createControlTextEl=function(e){return this.controlTextEl_=M("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,A(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},t.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},t.handleClick=function(e){},t.handleFocus=function(e){ce(h,"keydown",Te(this,this.handleKeyPress))},t.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):r.prototype.handleKeyPress&&r.prototype.handleKeyPress.call(this,e)},t.handleBlur=function(e){de(h,"keydown",Te(this,this.handleKeyPress))},e}(Fe);Fe.registerComponent("ClickableComponent",fi);var pi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update(),e.on("posterchange",Te(p(p(n)),n.update)),n}f(e,i);var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update),i.prototype.dispose.call(this)},t.createEl=function(){return M("div",{className:"vjs-poster",tabIndex:-1})},t.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},t.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?Et(this.player_.play()):this.player_.pause())},e}(fi);Fe.registerComponent("PosterImage",pi);var mi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function gi(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function vi(e,t,n){try{e.style[t]=n}catch(e){return}}var _i=function(a){function e(n,e,t){var i;i=a.call(this,n,e,t)||this;var r=Te(p(p(i)),i.updateDisplay);return n.on("loadstart",Te(p(p(i)),i.toggleDisplay)),n.on("texttrackchange",r),n.on("loadedmetadata",Te(p(p(i)),i.preselectTrack)),n.ready(Te(p(p(i)),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",r),n.on("playerresize",r),_.addEventListener("orientationchange",r),n.on("dispose",function(){return _.removeEventListener("orientationchange",r)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),i}f(e,a);var t=e.prototype;return t.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in i?o.kind===a.kind?n=o:n||(n=o):a&&!a.enabled?t=e=n=null:o.default&&("descriptions"!==o.kind||e?o.kind in i&&!t&&(t=o):e=o)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof _.WebVTT&&_.WebVTT.processCues(_,[],this.el_)},t.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,n=null,i=e.length;i--;){var r=e[i];"showing"===r.mode&&("descriptions"===r.kind?t=r:n=r)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},t.updateForTrack=function(e){if("function"==typeof _.WebVTT&&e.activeCues){for(var t=[],n=0;n<e.activeCues.length;n++)t.push(e.activeCues[n]);if(_.WebVTT.processCues(_,t,this.el_),this.player_.textTrackSettings)for(var i=this.player_.textTrackSettings.getValues(),r=t.length;r--;){var a=t[r];if(a){var s=a.displayState;if(i.color&&(s.firstChild.style.color=i.color),i.textOpacity&&vi(s.firstChild,"color",gi(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(s.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&vi(s.firstChild,"backgroundColor",gi(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?vi(s,"backgroundColor",gi(i.windowColor,i.windowOpacity)):s.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===i.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),i.fontPercent&&1!==i.fontPercent){var o=_.parseFloat(s.style.fontSize);s.style.fontSize=o*i.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=mi[i.fontFamily])}}}},e}(Fe);Fe.registerComponent("TextTrackDisplay",_i);var yi=function(r){function e(){return r.apply(this,arguments)||this}return f(e,r),e.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=M("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[t])}),i=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i},e}(Fe);Fe.registerComponent("LoadingSpinner",yi);var xi=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var n=e.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),t=y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=y({type:"button"},n);var i=Fe.prototype.createEl.call(this,"button",t,n);return this.createControlTextEl(i),i},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return m.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Fe.prototype.addChild.call(this,e,t)},n.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyPress=function(e){32!==e.which&&13!==e.which&&t.prototype.handleKeyPress.call(this,e)},e}(fi);Fe.registerComponent("Button",xi);var bi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)Et(t);else{var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(i){var r=function(){return i.focus()};St(t)?t.then(r,function(){}):this.setTimeout(r,1)}else this.player_.focus()}},t.handleKeyPress=function(e){this.mouseused_=!1,i.prototype.handleKeyPress.call(this,e)},t.handleMouseDown=function(e){this.mouseused_=!0},e}(xi);bi.prototype.controlText_="Play Video",Fe.registerComponent("BigPlayButton",bi);var Ti=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).controlText(t&&t.controlText||n.localize("Close")),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},e}(xi);Fe.registerComponent("CloseButton",Ti);var Si=function(i){function e(e,t){var n;return void 0===t&&(t={}),n=i.call(this,e,t)||this,t.replay=void 0===t.replay||t.replay,n.on(e,"play",n.handlePlay),n.on(e,"pause",n.handlePause),t.replay&&n.on(e,"ended",n.handleEnded),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(xi);Si.prototype.controlText_="Play",Fe.registerComponent("PlayToggle",Si);var Ei=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=0<r||0<s?r+":":"")+(i=((r||10<=a)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)},wi=Ei;function Mi(e,t){return void 0===t&&(t=e),wi(e,t)}var Ai=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).throttledUpdateContent=Se(Te(p(p(n)),n.updateContent),25),n.on(e,"timeupdate",n.throttledUpdateContent),n}f(e,i);var t=e.prototype;return t.createEl=function(){var e=this.buildCSSClass(),t=i.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=M("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),t.appendChild(this.contentEl_),t},t.dispose=function(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},t.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=h.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.formatTime_=function(e){return Mi(e)},t.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.updateContent=function(e){},e}(Fe);Ai.prototype.labelText_="Time",Ai.prototype.controlText_="Time",Fe.registerComponent("TimeDisplay",Ai);var Ci=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"ended",n.handleEnded),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},t.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(Ai);Ci.prototype.labelText_="Current Time",Ci.prototype.controlText_="Current Time",Fe.registerComponent("CurrentTimeDisplay",Ci);var Pi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"durationchange",n.updateContent),n.on(e,"loadstart",n.updateContent),n.on(e,"loadedmetadata",n.throttledUpdateContent),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(e){var t=this.player_.duration();this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},e}(Ai);Pi.prototype.labelText_="Duration",Pi.prototype.controlText_="Duration",Fe.registerComponent("DurationDisplay",Pi);var Ri=function(e){function t(){return e.apply(this,arguments)||this}return f(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(Fe);Fe.registerComponent("TimeDivider",Ri);var Di=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"durationchange",n.throttledUpdateContent),n.on(e,"ended",n.handleEnded),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var e=i.prototype.createEl.call(this);return e.insertBefore(M("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},t.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},e}(Ai);Di.prototype.labelText_="Remaining Time",Di.prototype.controlText_="Remaining Time",Fe.registerComponent("RemainingTimeDisplay",Di);var ki=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}f(e,i);var t=e.prototype;return t.createEl=function(){var e=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=M("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.dispose=function(){this.contentEl_=null,i.prototype.dispose.call(this)},t.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},e}(Fe);Fe.registerComponent("LiveDisplay",ki);var Ii=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}f(e,i);var t=e.prototype;return t.createEl=function(){var e=i.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=M("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},t.updateLiveEdgeStatus=function(e){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,i.prototype.dispose.call(this)},e}(xi);Ii.prototype.controlText_="Seek to live, currently playing live",Fe.registerComponent("SeekToLive",Ii);var Li=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}f(e,i);var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t.className=t.className+" vjs-slider",t=y({tabIndex:0},t),n=y({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),i.prototype.createEl.call(this,e,t,n)},t.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||nt||e.preventDefault(),F(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.handleMouseMove=function(e){},t.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;B(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%",i=t.el().style;return this.vertical()?i.height=n:i.width=n,e}}},t.calculateDistance=function(e){var t=V(this.el_,e);return this.vertical()?t.y:t.x},t.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Fe);Fe.registerComponent("Slider",Li);var Oi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).partEls_=[],n.on(e,"progress",n.update),n}f(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},t.dispose=function(){this.partEls_=null,i.prototype.dispose.call(this)},t.update=function(e){var t=this.player_.liveTracker,n=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),a=this.partEls_,s=this.$(".vjs-control-text-loaded-percentage"),o=function(e,t,n){var i=e/t||0;return i=100*(1<=i?1:i),n&&(i=i.toFixed(2)),i+"%"};this.el_.style.width=o(r,i),A(s,o(r,i,!0));for(var l=0;l<n.length;l++){var u=n.start(l),c=n.end(l),d=a[l];d||(d=this.el_.appendChild(M()),a[l]=d),d.style.left=o(u,r),d.style.width=o(c-u,r)}for(var h=a.length;h>n.length;h--)this.el_.removeChild(a[h-1]);a.length=n.length},e}(Fe);Fe.registerComponent("LoadProgressBar",Oi);var Ni=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var i=$(this.el_),r=$(this.player_.el()),a=e.width*t;if(r&&i){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=i.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>i.width&&(l=i.width),this.el_.style.right="-"+l+"px",A(this.el_,n)}},n.updateTime=function(r,a,s,o){var l=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e,t=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var n=l.player_.liveTracker.liveWindow(),i=n-a*n;e=(i<1?"":"-")+Mi(i,n)}else e=Mi(s,t);l.update(r,a,e),o&&o()})},t}(Fe);Fe.registerComponent("TimeTooltip",Ni);var Ui=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}},t}(Fe);Ui.prototype.options_={children:[]},Xe||Qe||Ui.prototype.options_.children.push("timeTooltip"),Fe.registerComponent("PlayProgressBar",Ui);var Fi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update=Se(Te(p(p(n)),n.update),25),n}f(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,function(){n.el_.style.left=e.width*t+"px"})},e}(Fe);Fi.prototype.options_={children:["timeTooltip"]},Fe.registerComponent("MouseTimeDisplay",Fi);var Bi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).setEventHandlers_(),n}f(e,i);var t=e.prototype;return t.setEventHandlers_=function(){var t=this;this.update=Se(Te(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],function(){t.clearInterval(t.updateInterval),t.updateInterval=t.setInterval(function(){t.requestAnimationFrame(function(){t.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(e){t.player_.liveTracker&&t.player_.liveTracker.isLive()&&"ended"!==e.type||t.clearInterval(t.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update_=function(e,t){var n=this.player_.liveTracker,i=this.player_.duration();n&&n.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Mi(e,i),Mi(i,i)],"{1} of {2}")),this.bar.update($(this.el_),t)},t.update=function(e){var t=i.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.handleEnded=function(e){this.update_(this.player_.duration(),1)},t.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),1<=e?1:e||0},t.handleMouseDown=function(e){Y(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,e))},t.handleMouseMove=function(e){if(Y(e)){var t,n=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){var r=i.seekableStart(),a=i.liveCurrentTime();if(a<=(t=r+n*i.liveWindow())&&(t=a),t<=r&&(t=r+.1),t===1/0)return}else(t=n*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},t.enable=function(){i.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=function(){i.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.handleMouseUp=function(e){i.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Et(this.player_.play())},t.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):i.prototype.handleKeyPress&&i.prototype.handleKeyPress.call(this,e)},e}(Li);Bi.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Xe||Qe||Bi.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Bi.prototype.playerEvent="timeupdate",Fe.registerComponent("SeekBar",Bi);var $i=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).handleMouseMove=Se(Te(p(p(n)),n.handleMouseMove),25),n.throttledHandleMouseSeek=Se(Te(p(p(n)),n.handleMouseSeek),25),n.enable(),n}f(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("mouseTimeDisplay"),i=t.el(),r=$(i),a=V(i,e).x;1<a?a=1:a<0&&(a=0),n&&n.update(r,a)}},t.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.enabled=function(){return this.enabled_},t.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},e}(Fe);$i.prototype.options_={children:["seekBar"]},Fe.registerComponent("ProgressControl",$i);var ji=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"fullscreenchange",n.handleFullscreenChange),!1===h[pt.fullscreenEnabled]&&n.disable(),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(xi);ji.prototype.controlText_="Fullscreen",Fe.registerComponent("FullscreenToggle",ji);var Vi=function(e){function t(){return e.apply(this,arguments)||this}return f(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Fe);Fe.registerComponent("VolumeLevel",Vi);var Hi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on("slideractive",n.updateLastVolume_),n.on(e,"volumechange",n.updateARIAAttributes),e.ready(function(){return n.updateARIAAttributes()}),n}f(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(e){Y(e)&&i.prototype.handleMouseDown.call(this,e)},t.handleMouseMove=function(e){Y(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},e}(Li);Hi.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Hi.prototype.playerEvent="volumechange",Fe.registerComponent("VolumeBar",Hi);var zi=function(a){function e(e,t){var n,i,r;return void 0===t&&(t={}),t.vertical=t.vertical||!1,(void 0===t.volumeBar||c(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),n=a.call(this,e,t)||this,i=p(p(n)),(r=e).tech_&&!r.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),n.throttledHandleMouseMove=Se(Te(p(p(n)),n.handleMouseMove),25),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}f(e,a);var t=e.prototype;return t.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},t.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},e}(Fe);zi.prototype.options_={children:["volumeBar"]},Fe.registerComponent("VolumeControl",zi);var Gi=function(a){function e(e,t){var n,i,r;return n=a.call(this,e,t)||this,i=p(p(n)),(r=e).tech_&&!r.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(r,"loadstart",function(){r.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),n.on(e,["loadstart","volumechange"],n.update),n}f(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},t.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(e){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var e=this.player_.volume(),t=3;Xe&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)D(this.el_,"vjs-vol-"+n);R(this.el_,"vjs-vol-"+t)},t.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},e}(xi);Gi.prototype.controlText_="Mute",Fe.registerComponent("MuteToggle",Gi);var qi=function(i){function e(e,t){var n;return void 0===t&&(t={}),void 0!==t.inline?t.inline=t.inline:t.inline=!0,(void 0===t.volumeControl||c(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(n=i.call(this,e,t)||this).on(e,["loadstart"],n.volumePanelState_),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}f(e,i);var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},e}(Fe);qi.prototype.options_={children:["muteToggle","volumeControl"]},Fe.registerComponent("VolumePanel",qi);var Wi=function(i){function e(e,t){var n;return n=i.call(this,e,t)||this,t&&(n.menuButton_=t.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyPress),n}f(e,i);var t=e.prototype;return t.addItem=function(t){this.addChild(t),t.on("blur",Te(this,this.handleBlur)),t.on(["tap","click"],Te(this,function(e){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())}))},t.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=M(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ce(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},t.dispose=function(){this.contentEl_=null,i.prototype.dispose.call(this)},t.handleBlur=function(e){var t=e.relatedTarget||h.activeElement;if(!this.children().some(function(e){return e.el()===t})){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},t.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},e}(Fe);Fe.registerComponent("Menu",Wi);var Yi=function(r){function e(e,t){var n;void 0===t&&(t={}),(n=r.call(this,e,t)||this).menuButton_=new xi(e,t),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var i=xi.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+i,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"focus",n.handleFocus),n.on(n.menuButton_,"blur",n.handleBlur),n.on(n.menuButton_,"mouseenter",function(){n.menu.show()}),n.on("keydown",n.handleSubmenuKeyPress),n}f(e,r);var t=e.prototype;return t.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.createMenu=function(){var e=new Wi(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=M("li",{className:"vjs-menu-title",innerHTML:Ne(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),C(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},t.createItems=function(){},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+xi.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+r.prototype.buildCSSClass.call(this)},t.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},t.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleFocus=function(){ce(h,"keydown",Te(this,this.handleKeyPress))},t.handleBlur=function(){de(h,"keydown",Te(this,this.handleKeyPress))},t.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):13!==e.which&&38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},t.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Xe&&E())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Fe);Fe.registerComponent("MenuButton",Yi);var Xi=function(a){function e(e,t){var n,i=t.tracks;if((n=a.call(this,e,t)||this).items.length<=1&&n.hide(),!i)return p(n);var r=Te(p(p(n)),n.update);return i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),n.player_.on("ready",r),n.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}),n}return f(e,a),e}(Yi);Fe.registerComponent("TrackButton",Xi);var Ki=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).selectable=t.selectable,n.isSelected_=t.selected||!1,n.multiSelectable=t.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}f(e,i);var t=e.prototype;return t.createEl=function(e,t,n){return this.nonIconControl=!0,i.prototype.createEl.call(this,"li",y({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),n)},t.handleClick=function(e){this.selected(!0)},t.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(fi);Fe.registerComponent("MenuItem",Ki);var Qi=function(l){function e(e,t){var i,n=t.track,r=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode,(i=l.call(this,e,t)||this).track=n;var a,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(p(p(i)),t)},o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(p(p(i)),t)};(e.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",o),i.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",o)}),void 0===r.onchange)&&i.on(["tap","click"],function(){if("object"!=typeof _.Event)try{a=new _.Event("change")}catch(e){}a||(a=h.createEvent("Event")).initEvent("change",!0,!0),r.dispatchEvent(a)});return i.handleTracksChange(),i}f(e,l);var t=e.prototype;return t.handleClick=function(e){var t=this.track.kind,n=this.track.kinds,i=this.player_.textTracks();if(n||(n=[t]),l.prototype.handleClick.call(this,e),i)for(var r=0;r<i.length;r++){var a=i[r];a===this.track&&-1<n.indexOf(a.kind)?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled")}},t.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,l.prototype.dispose.call(this)},e}(Ki);Fe.registerComponent("TextTrackMenuItem",Qi);var Zi=function(n){function e(e,t){return t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,n.call(this,e,t)||this}f(e,n);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},t.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Qi);Fe.registerComponent("OffTextTrackMenuItem",Zi);var Ji=function(n){function e(e,t){return void 0===t&&(t={}),t.tracks=e.textTracks(),n.call(this,e,t)||this}return f(e,n),e.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=Qi),this.label_&&(n=this.label_+" off"),e.push(new Zi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(-1<this.kinds_.indexOf(a.kind)){var s=new t(this.player_,{track:a,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},e}(Xi);Fe.registerComponent("TextTrackButton",Ji);var er=function(s){function e(e,t){var n,i=t.track,r=t.cue,a=e.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=a&&a<r.endTime,(n=s.call(this,e,t)||this).track=i,n.cue=r,i.addEventListener("cuechange",Te(p(p(n)),n.update)),n}f(e,s);var t=e.prototype;return t.handleClick=function(e){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},e}(Ki);Fe.registerComponent("ChaptersTrackMenuItem",er);var tr=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},t.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),i.prototype.update.call(this)},t.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},t.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ne(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},t.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],a=new er(this.player_,{track:this.track_,cue:r});e.push(a)}return e},e}(Ji);tr.prototype.kind_="chapters",tr.prototype.controlText_="Chapters",Fe.registerComponent("ChaptersButton",tr);var nr=function(s){function e(e,t,n){var i;i=s.call(this,e,t,n)||this;var r=e.textTracks(),a=Te(p(p(i)),i.handleTracksChange);return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}f(e,s);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},e}(Ji);nr.prototype.kind_="descriptions",nr.prototype.controlText_="Descriptions",Fe.registerComponent("DescriptionsButton",nr);var ir=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},e}(Ji);ir.prototype.kind_="subtitles",ir.prototype.controlText_="Subtitles",Fe.registerComponent("SubtitlesButton",ir);var rr=function(i){function e(e,t){var n;return t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(n=i.call(this,e,t)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+t.kind+" settings dialog"),n}return f(e,i),e.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},e}(Qi);Fe.registerComponent("CaptionSettingsMenuItem",rr);var ar=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new rr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,e)},e}(Ji);ar.prototype.kind_="captions",ar.prototype.controlText_="Captions",Fe.registerComponent("CaptionsButton",ar);var sr=function(r){function e(){return r.apply(this,arguments)||this}return f(e,r),e.prototype.createEl=function(e,t,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",r.prototype.createEl.call(this,e,y({innerHTML:i},t),n)},e}(Qi);Fe.registerComponent("SubsCapsMenuItem",sr);var or=function(i){function e(e,t){var n;return void 0===t&&(t={}),(n=i.call(this,e,t)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(Ne(n.label_)),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new rr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=i.prototype.createItems.call(this,e,sr)},e}(Ji);or.prototype.kinds_=["captions","subtitles"],or.prototype.controlText_="Subtitles",Fe.registerComponent("SubsCapsButton",or);var lr=function(s){function e(e,t){var i,n=t.track,r=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,(i=s.call(this,e,t)||this).track=n,i.addClass("vjs-"+n.kind+"-menu-item");var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(p(p(i)),t)};return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}f(e,s);var t=e.prototype;return t.createEl=function(e,t,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",s.prototype.createEl.call(this,e,y({innerHTML:i},t),n)},t.handleClick=function(e){var t=this.player_.audioTracks();s.prototype.handleClick.call(this,e);for(var n=0;n<t.length;n++){var i=t[n];i.enabled=i===this.track}},t.handleTracksChange=function(e){this.selected(this.track.enabled)},e}(Ki);Fe.registerComponent("AudioTrackMenuItem",lr);var ur=function(n){function e(e,t){return void 0===t&&(t={}),t.tracks=e.audioTracks(),n.call(this,e,t)||this}f(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new lr(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},e}(Xi);ur.prototype.controlText_="Audio Track",Fe.registerComponent("AudioTrackButton",ur);var cr=function(a){function e(e,t){var n,i=t.rate,r=parseFloat(i,10);return t.label=i,t.selected=1===r,t.selectable=!0,t.multiSelectable=!1,(n=a.call(this,e,t)||this).label=i,n.rate=r,n.on(e,"ratechange",n.update),n}f(e,a);var t=e.prototype;return t.handleClick=function(e){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(e){this.selected(this.player().playbackRate()===this.rate)},e}(Ki);cr.prototype.contentElType="button",Fe.registerComponent("PlaybackRateMenuItem",cr);var dr=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateVisibility(),n.updateLabel(),n.on(e,"loadstart",n.updateVisibility),n.on(e,"ratechange",n.updateLabel),n}f(e,i);var t=e.prototype;return t.createEl=function(){var e=i.prototype.createEl.call(this);return this.labelEl_=M("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},t.dispose=function(){this.labelEl_=null,i.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},t.createMenu=function(){var e=new Wi(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;0<=n;n--)e.addChild(new cr(this.player(),{rate:t[n]+"x"}));return e},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),i=n[0],r=0;r<n.length;r++)if(n[r]>t){i=n[r];break}this.player().playbackRate(i)},t.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},t.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(Yi);dr.prototype.controlText_="Playback Rate",Fe.registerComponent("PlaybackRateMenuButton",dr);var hr=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Fe);Fe.registerComponent("Spacer",hr);var fr=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e},e}(hr);Fe.registerComponent("CustomControlSpacer",fr);var pr=function(e){function t(){return e.apply(this,arguments)||this}return f(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Fe);pr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Fe.registerComponent("ControlBar",pr);var mr=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"error",n.open),n}f(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},t.content=function(){var e=this.player().error();return e?this.localize(e.message):""},e}(Pt);mr.prototype.options_=Ue(Pt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Fe.registerComponent("ErrorDisplay",mr);var gr="vjs-text-track-settings",vr=["#000","Black"],_r=["#00F","Blue"],yr=["#0FF","Cyan"],xr=["#0F0","Green"],br=["#F0F","Magenta"],Tr=["#F00","Red"],Sr=["#FFF","White"],Er=["#FF0","Yellow"],wr=["1","Opaque"],Mr=["0.5","Semi-Transparent"],Ar=["0","Transparent"],Cr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[vr,Sr,Tr,xr,_r,Er,br,yr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[wr,Mr,Ar]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Sr,vr,Tr,xr,_r,Er,br,yr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[wr,Mr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ar,Mr,wr]}};function Pr(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}Cr.windowColor.options=Cr.backgroundColor.options;var Rr=function(i){function e(e,t){var n;return t.temporary=!1,(n=i.call(this,e,t)||this).updateDisplay=Te(p(p(n)),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=M("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===t.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),o(Cr,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}f(e,i);var t=e.prototype;return t.dispose=function(){this.endDialog=null,i.prototype.dispose.call(this)},t.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=Cr[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',i.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return M("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return M("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var e=this.localize("restore all settings to the default values");return M("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var n,i,e,s=this;return i=function(e,t,n){var i,r,a=(i=s.$(t.selector),r=t.parser,Pr(i.options[i.options.selectedIndex].value,r));return void 0!==a&&(e[n]=a),e},void 0===(e={})&&(e=0),r(n=Cr).reduce(function(e,t){return i(e,n[t],t)},e)},t.setValues=function(n){var i=this;o(Cr,function(e,t){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(Pr(e.options[i].value,n)===t){e.selectedIndex=i;break}}(i.$(e.selector),n[t],e.parser)})},t.setDefaults=function(){var n=this;o(Cr,function(e){var t=e.hasOwnProperty("default")?e.default:0;n.$(e.selector).selectedIndex=t})},t.restoreSettings=function(){var e;try{e=JSON.parse(_.localStorage.getItem(gr))}catch(e){m.warn(e)}e&&this.setValues(e)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?_.localStorage.setItem(gr,JSON.stringify(e)):_.localStorage.removeItem(gr)}catch(e){m.warn(e)}}},t.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(h,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},e}(Pt);Fe.registerComponent("TextTrackSettings",Rr);var Dr=function(a){function e(e,t){var n,i=t.ResizeObserver||_.ResizeObserver;null===t.ResizeObserver&&(i=!1);var r=Ue({createEl:!i,reportTouchActivity:!1},t);return(n=a.call(this,e,r)||this).ResizeObserver=t.ResizeObserver||_.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=function(i,r,a,s){var o;void 0===s&&(s=_);var e=function(){var e=this,t=arguments,n=function(){n=o=null,a||i.apply(e,t)};!o&&a&&i.apply(e,t),s.clearTimeout(o),o=s.setTimeout(n,r)};return e.cancel=function(){s.clearTimeout(o),o=null},e}(function(){n.resizeHandler()},100,!1,p(p(n))),i?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(e.el())):(n.loadListener_=function(){n.el_&&n.el_.contentWindow&&ce(n.el_.contentWindow,"resize",n.debouncedHandler_)},n.one("load",n.loadListener_)),n}f(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},t.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&de(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},e}(Fe);Fe.registerComponent("ResizeManager",Dr);var kr=function(r){function e(e,t){var n,i=Ue({createEl:!1},t);return(n=r.call(this,e,i)||this).reset_(),n.on(n.player_,"durationchange",n.handleDurationchange),n}f(e,r);var t=e.prototype;return t.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),n=this.seekableIncrement_;return e!==1/0&&t<=e-(2*n+.07)},t.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var e=this.player_.seekable();if(e&&e.length){var t=this.seekableEnd();t!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrement_=Math.abs(t-this.lastSeekEnd_)),this.pastSeekEnd_=0,this.lastSeekEnd_=t,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},t.startTracking=function(){var e=this;this.isTracking()||(this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.one(this.player_,"play",this.handlePlay),this.timeupdateSeen_||(this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},t.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},t.stopTracking=function(){this.isTracking()&&this.reset_()},t.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},t.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},t.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){return this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},t.dispose=function(){this.stopTracking(),r.prototype.dispose.call(this)},e}(Fe);Fe.registerComponent("LiveTracker",kr);var Ir=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var s=n[a].src;s&&-1===i.indexOf(s)&&i.push(s)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},Lr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=h.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=h.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",_.Element.prototype.appendChild.call(this,n),this.innerHTML}}),Or=function(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},Nr=function(a){var s=a.el();if(!s.resetSourceWatch_){var t={},e=Or([a.el(),_.HTMLMediaElement.prototype,_.Element.prototype,Lr],"innerHTML"),n=function(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.apply(s,t);return Ir(a),i}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){s[e]&&(t[e]=s[e],s[e]=n(t[e]))}),Object.defineProperty(s,"innerHTML",Ue(e,{set:n(e.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(t).forEach(function(e){s[e]=t[e]}),Object.defineProperty(s,"innerHTML",e)},a.one("sourceset",s.resetSourceWatch_)}},Ur=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Gt(_.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return _.Element.prototype.setAttribute.call(this,"src",e),e}}),Fr=function(i){if(i.featuresSourceset){var r=i.el();if(!r.resetSourceset_){var n=Or([i.el(),_.HTMLMediaElement.prototype,Ur],"src"),a=r.setAttribute,t=r.load;Object.defineProperty(r,"src",Ue(n,{set:function(e){var t=n.set.call(r,e);return i.triggerSourceset(r.src),t}})),r.setAttribute=function(e,t){var n=a.call(r,e,t);return/src/i.test(e)&&i.triggerSourceset(r.src),n},r.load=function(){var e=t.call(r);return Ir(i)||(i.triggerSourceset(""),Nr(i)),e},r.currentSrc?i.triggerSourceset(r.currentSrc):Ir(i)||Nr(i),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=t,r.setAttribute=a,Object.defineProperty(r,"src",n),r.resetSourceWatch_&&r.resetSourceWatch_()}}}};function Br(){var e=t(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return Br=function(){return e},e}var $r=function(c){function o(e,t){var n;n=c.call(this,e,t)||this;var i=e.source,r=!1;if(i&&(n.el_.currentSrc!==i.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(i):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var a=n.el_.childNodes,s=a.length,o=[];s--;){var l=a[s];"track"===l.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(l),n.remoteTextTracks().addTrack(l.track),n.textTracks().addTrack(l.track),r||n.el_.hasAttribute("crossorigin")||!Wt(l.src)||(r=!0)):o.push(l))}for(var u=0;u<o.length;u++)n.el_.removeChild(o[u])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&r&&m.warn(v(Br())),n.restoreMetadataTracksInIOSNativePlayer_(),(ot||We||Je)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}f(o,c);var e=o.prototype;return e.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),o.disposeMediaElement(this.el_),this.options_=null,c.prototype.dispose.call(this)},e.setupSourcesetHandling_=function(){Fr(this)},e.restoreMetadataTracksInIOSNativePlayer_=function(){var i,r=this.textTracks(),e=function(){i=[];for(var e=0;e<r.length;e++){var t=r[e];"metadata"===t.kind&&i.push({track:t,storedMode:t.mode})}};e(),r.addEventListener("change",e),this.on("dispose",function(){return r.removeEventListener("change",e)});var t=function e(){for(var t=0;t<i.length;t++){var n=i[t];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}r.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",e),r.removeEventListener("change",t),r.addEventListener("change",t)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",e),r.addEventListener("change",e),r.removeEventListener("change",t)})},e.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach(function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},e.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},e.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},e.proxyNativeTracksForType_=function(e){var i=this,t=bn[e],r=this.el()[t.getterName],a=this[t.getterName]();if(this["featuresNative"+t.capitalName+"Tracks"]&&r&&r.addEventListener){var s={change:function(e){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}},n=function(){for(var e=[],t=0;t<a.length;t++){for(var n=!1,i=0;i<r.length;i++)if(r[i]===a[t]){n=!0;break}n||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(function(t){var n=s[t];r.addEventListener(t,n),i.on("dispose",function(e){return r.removeEventListener(t,n)})}),this.on("loadstart",n),this.on("dispose",function(e){return i.off("loadstart",n)})}},e.proxyNativeTracks_=function(){var t=this;bn.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},e.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),o.disposeMediaElement(e),e=t}else{e=h.createElement("video");var n=Ue({},this.options_.tag&&L(this.options_.tag));ot&&!0===this.options_.nativeControlsForTouch||delete n.controls,I(e,y(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&N(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],r=0;r<i.length;r++){var a=i[r],s=this.options_[a];void 0!==s&&(s?N(e,a,a):U(e,a),e[a]=s)}return e},e.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},e.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){m(e,"Video is not ready. (Video.js)")}},e.duration=function(){var t=this;if(this.el_.duration===1/0&&Qe&&nt&&0===this.el_.currentTime){return this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN}return this.el_.duration||NaN},e.width=function(){return this.el_.offsetWidth},e.height=function(){return this.el_.offsetHeight},e.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},e.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=_.navigator&&_.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},e.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},e.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},e.reset=function(){o.resetMediaElement(this.el_)},e.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.setControls=function(e){this.el_.controls=!!e},e.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):c.prototype.addTextTrack.call(this,e,t,n)},e.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,e);var t=h.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},e.addRemoteTextTrack=function(e,t){var n=c.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},e.removeRemoteTextTrack=function(e){if(c.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},e.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),_.performance&&"function"==typeof _.performance.now?e.creationTime=_.performance.now():_.performance&&_.performance.timing&&"number"==typeof _.performance.timing.navigationStart&&(e.creationTime=_.Date.now()-_.performance.timing.navigationStart),e},o}(Zn);if(T()){$r.TEST_VID=h.createElement("video");var jr=h.createElement("track");jr.kind="captions",jr.srclang="en",jr.label="English",$r.TEST_VID.appendChild(jr)}$r.isSupported=function(){try{$r.TEST_VID.volume=.5}catch(e){return!1}return!(!$r.TEST_VID||!$r.TEST_VID.canPlayType)},$r.canPlayType=function(e){return $r.TEST_VID.canPlayType(e)},$r.canPlaySource=function(e,t){return $r.canPlayType(e.type)},$r.canControlVolume=function(){try{var e=$r.TEST_VID.volume;return $r.TEST_VID.volume=e/2+.1,e!==$r.TEST_VID.volume}catch(e){return!1}},$r.canMuteVolume=function(){try{var e=$r.TEST_VID.muted;return $r.TEST_VID.muted=!e,$r.TEST_VID.muted?N($r.TEST_VID,"muted","muted"):U($r.TEST_VID,"muted"),e!==$r.TEST_VID.muted}catch(e){return!1}},$r.canControlPlaybackRate=function(){if(Qe&&nt&&it<58)return!1;try{var e=$r.TEST_VID.playbackRate;return $r.TEST_VID.playbackRate=e/2+.1,e!==$r.TEST_VID.playbackRate}catch(e){return!1}},$r.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(h.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(h.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(h.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(h.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},$r.supportsNativeTextTracks=function(){return st||Xe&&nt},$r.supportsNativeVideoTracks=function(){return!(!$r.TEST_VID||!$r.TEST_VID.videoTracks)},$r.supportsNativeAudioTracks=function(){return!(!$r.TEST_VID||!$r.TEST_VID.audioTracks)},$r.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],$r.prototype.featuresVolumeControl=$r.canControlVolume(),$r.prototype.featuresMuteControl=$r.canMuteVolume(),$r.prototype.featuresPlaybackRate=$r.canControlPlaybackRate(),$r.prototype.featuresSourceset=$r.canOverrideAttributes(),$r.prototype.movingMediaElementInDOM=!Xe,$r.prototype.featuresFullscreenResize=!0,$r.prototype.featuresProgressEvents=!0,$r.prototype.featuresTimeupdateEvents=!0,$r.prototype.featuresNativeTextTracks=$r.supportsNativeTextTracks(),$r.prototype.featuresNativeVideoTracks=$r.supportsNativeVideoTracks(),$r.prototype.featuresNativeAudioTracks=$r.supportsNativeAudioTracks();var Vr=$r.TEST_VID&&$r.TEST_VID.constructor.prototype.canPlayType,Hr=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;function zr(){var e=t(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);return zr=function(){return e},e}$r.patchCanPlayType=function(){4<=Ze&&!et&&!nt&&($r.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Hr.test(e)?"maybe":Vr.call(this,e)})},$r.unpatchCanPlayType=function(){var e=$r.TEST_VID.constructor.prototype.canPlayType;return $r.TEST_VID.constructor.prototype.canPlayType=Vr,e},$r.patchCanPlayType(),$r.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},$r.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){$r.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){$r.prototype["set"+Ne(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){$r.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){$r.prototype["set"+Ne(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){$r.prototype[e]=function(){return this.el_[e]()}}),Zn.withSourceHandlers($r),$r.nativeSourceHandler={},$r.nativeSourceHandler.canPlayType=function(e){try{return $r.TEST_VID.canPlayType(e)}catch(e){return""}},$r.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return $r.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=qt(e.src);return $r.nativeSourceHandler.canPlayType("video/"+n)}return""},$r.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},$r.nativeSourceHandler.dispose=function(){},$r.registerSourceHandler($r.nativeSourceHandler),Zn.registerTech("Html5",$r);var Gr=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],qr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Wr=["tiny","xsmall","small","medium","large","xlarge","huge"],Yr={};Wr.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Yr[e]="vjs-layout-"+t});var Xr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Kr=function(c){function d(e,t,n){var i;if(e.id=e.id||t.id||"vjs_video_"+J(),(t=y(d.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var r=e.closest("[lang]");r&&r.getAttribute&&(t.language=r.getAttribute("lang"))}else for(var a=e;a&&1===a.nodeType;){if(L(a).hasOwnProperty("lang")){t.language=a.getAttribute("lang");break}a=a.parentNode}if((i=c.call(this,null,t,n)||this).log=g(i.id_),i.isPosterFromTech_=!1,i.queuedCallbacks_=[],i.isReady_=!1,i.hasStarted_=!1,i.userActive_=!1,!i.options_||!i.options_.techOrder||!i.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(i.tag=e,i.tagAttributes=e&&L(e),i.language(i.options_.language),t.languages){var s={};Object.getOwnPropertyNames(t.languages).forEach(function(e){s[e.toLowerCase()]=t.languages[e]}),i.languages_=s}else i.languages_=d.prototype.options_.languages;i.cache_={},i.poster_=t.poster||"",i.controls_=!!t.controls,i.cache_.lastVolume=1,e.controls=!1,e.removeAttribute("controls"),e.hasAttribute("autoplay")?i.options_.autoplay=!0:i.autoplay(i.options_.autoplay),i.scrubbing_=!1,i.el_=i.createEl(),i.cache_.lastPlaybackRate=i.defaultPlaybackRate(),Ie(p(p(i)),{eventBusKey:"el_"}),i.fluid_&&i.on("playerreset",i.updateStyleEl_);var o=Ue(i.options_);if(t.plugins){var l=t.plugins;Object.keys(l).forEach(function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](l[e])},p(p(i)))}i.options_.playerOptions=o,i.middleware_=[],i.initChildren(),i.isAudio("audio"===e.nodeName.toLowerCase()),i.controls()?i.addClass("vjs-controls-enabled"):i.addClass("vjs-controls-disabled"),i.el_.setAttribute("role","region"),i.isAudio()?i.el_.setAttribute("aria-label",i.localize("Audio Player")):i.el_.setAttribute("aria-label",i.localize("Video Player")),i.isAudio()&&i.addClass("vjs-audio"),i.flexNotSupported_()&&i.addClass("vjs-no-flex"),Xe||i.addClass("vjs-workinghover"),d.players[i.id_]=p(p(i));var u="7.4.2".split(".")[0];return i.addClass("vjs-v"+u),i.userActive(!0),i.reportUserActivity(),i.one("play",i.listenForUserActivity_),pt.fullscreenchange&&(i.on(pt.fullscreenchange,i.handleFullscreenChange_),(rt||et&&vt)&&i.on(h,pt.fullscreenchange,i.handleFullscreenChange_)),i.on("stageclick",i.handleStageClick_),i.breakpoints(i.options_.breakpoints),i.responsive(i.options_.responsive),i.changingSrc_=!1,i.playWaitingForReady_=!1,i.playOnLoadstart_=null,i}f(d,c);var e=d.prototype;return e.dispose=function(){this.trigger("dispose"),this.off("dispose"),(rt||et&&vt)&&this.off(h,pt.fullscreenchange,this.handleFullscreenChange_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),d.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),ei[this.id()]=null,c.prototype.dispose.call(this)},e.createEl=function(){var t,n=this.tag,e=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();e?t=this.el_=n.parentNode:i||(t=this.el_=c.prototype.createEl.call(this,"div"));var r=L(n);if(i){for(t=this.el_=n,n=this.tag=h.createElement("video");t.children.length;)n.appendChild(t.firstChild);P(t,"video-js")||R(t,"video-js"),t.appendChild(n),e=this.playerElIngest_=t,Object.keys(t).forEach(function(e){n[e]=t[e]})}if(n.setAttribute("tabindex","-1"),r.tabindex="-1",rt&&(n.setAttribute("role","application"),r.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(e){i&&"class"===e||t.setAttribute(e,r[e]),i&&n.setAttribute(e,r[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==_.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=xe("vjs-styles-dimensions");var a=X(".vjs-styles-defaults"),s=X("head");s.insertBefore(this.styleEl_,a?a.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var o=n.getElementsByTagName("a"),l=0;l<o.length;l++){var u=o.item(l);R(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!e&&n.parentNode.insertBefore(t,n),C(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=t},e.width=function(e){return this.dimension("width",e)},e.height=function(e){return this.dimension("height",e)},e.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?m.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},e.fluid=function(e){if(void 0===e)return!!this.fluid_;var t,n;this.fluid_=!!e,we(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),we(t=function(){this.on("playerreset",this.updateStyleEl_)})?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},e.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},e.updateStyleEl_=function(){if(!0!==_.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),be(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(0<=a&&(o.width=a),0<=s&&(o.height=s))}},e.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=Ne(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(Zn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Sn.names.forEach(function(e){var t=Sn[e];a[t.getterName]=n[t.privateName]}),y(a,this.options_[i]),y(a,this.options_[r]),y(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var s=Zn.getTech(e);if(!s)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new s(a),this.tech_.ready(Te(this,this.handleTechReady_),!0),At(this.textTracksJson_||[],this.tech_),Gr.forEach(function(e){n.on(n.tech_,e,n["handleTech"+Ne(e)+"_"])}),Object.keys(qr).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+qr[t]+"_"].bind(n),event:e}):n["handleTech"+qr[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||C(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.unloadTech_=function(){var n=this;Sn.names.forEach(function(e){var t=Sn[e];n[t.privateName]=n[t.getterName]()}),this.textTracksJson_=Mt(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.tech=function(e){return void 0===e&&m.warn(v(zr())),this.tech_},e.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},e.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},e.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},e.manualAutoplay_=function(t){var n=this;if(this.tech_&&"string"==typeof t){var e,i=function(){var t=n.muted();n.muted(!0);var e=n.play();if(e&&e.then&&e.catch)return e.catch(function(e){n.muted(t)})};if("any"===t?(e=this.play())&&e.then&&e.catch&&e.catch(function(){return i()}):e="muted"===t?i():this.play(),e&&e.then&&e.catch)return e.then(function(){n.trigger({type:"autoplay-success",autoplay:t})}).catch(function(e){n.trigger({type:"autoplay-failure",autoplay:t})})}},e.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return ci(t)}(this,t)),this.cache_.source=Ue({},e,{src:t,type:n});for(var i=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var l=L(a[o]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},e.handleTechSourceset_=function(e){var i=this;if(!this.changingSrc_){var t=function(e){return i.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;if(n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(t=function(){}),t(r),!e.src){this.tech_.one(["sourceset","loadstart"],function e(t){if("sourceset"!==t.type){var n=i.techGet("currentSrc");i.lastSource_.tech=n,i.updateSourceCaches_(n)}i.tech_.off(["sourceset","loadstart"],e)})}}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},e.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var n=this.currentTime();this.on("timeupdate",function e(){n!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",e))})},e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},e.handleTechFirstPlay_=function(){this.options_.starttime&&(m.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.handleTechClick_=function(e){Y(e)&&this.controls_&&(this.paused()?Et(this.play()):this.pause())},e.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},e.handleTechTap_=function(){this.userActive(!this.userActive())},e.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.handleTechTouchEnd_=function(e){e.preventDefault()},e.handleStageClick_=function(){this.reportUserActivity()},e.handleFullscreenChange_=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0),this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen"),vt&&t&&this.trigger("fullscreenchange")},e.documentFullscreenChange_=function(e){var t=pt;this.isFullscreen(h[t.fullscreenElement]),!1===this.isFullscreen()&&(de(h,t.fullscreenchange,Te(this,this.documentFullscreenChange_)),vt?this.handleFullscreenChange_({},!1):this.on(pt.fullscreenchange,this.handleFullscreenChange_))},e.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},e.handleTechError_=function(){var e=this.tech_.error();this.error(e)},e.handleTechTextData_=function(){var e=null;1<arguments.length&&(e=arguments[1]),this.trigger("textdata",e)},e.getCache=function(){return this.cache_},e.techCall_=function(r,a){this.ready(function(){if(r in ai)return e=this.middleware_,t=this.tech_,i=a,t[n=r](e.reduce(oi(n),i));if(r in si)return ii(this.middleware_,this.tech_,r,a);var e,t,n,i;try{this.tech_&&this.tech_[r](a)}catch(e){throw m(e),e}},!0)},e.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in ri)return e=this.middleware_,n=this.tech_,i=t,e.reduceRight(oi(i),n[i]());if(t in si)return ii(this.middleware_,this.tech_,t);var e,n,i;try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw m("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw m("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw m(e),e}}},e.play=function(){var t=this,e=this.options_.Promise||_.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},e.play_=function(e){var t=this;if(void 0===e&&(e=Et),this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void e(this.techGet_("play"));this.playOnLoadstart_=function(){t.playOnLoadstart_=null,e(t.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){t.playWaitingForReady_=!1,e(t.play())})}},e.pause=function(){this.techCall_("pause")},e.paused=function(){return!1!==this.techGet_("paused")},e.played=function(){return this.techGet_("played")||dt(0,0)},e.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},e.remainingTime=function(){return this.duration()-this.currentTime()},e.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=dt(0,0)),e},e.bufferedPercent=function(){return ht(this.buffered(),this.duration())},e.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return t<n&&(n=t),n},e.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},e.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},e.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},e.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},e.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},e.requestFullscreen=function(){var e=pt;this.isFullscreen(!0),e.requestFullscreen?(vt||this.off(pt.fullscreenchange,this.handleFullscreenChange_),ce(h,e.fullscreenchange,Te(this,this.documentFullscreenChange_)),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},e.exitFullscreen=function(){var e=pt;this.isFullscreen(!1),e.requestFullscreen?(de(h,e.fullscreenchange,Te(this,this.documentFullscreenChange_)),h[e.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},e.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=h.documentElement.style.overflow,ce(h,"keydown",Te(this,this.fullWindowOnEscKey)),h.documentElement.style.overflow="hidden",R(h.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},e.exitFullWindow=function(){this.isFullWindow=!1,de(h,"keydown",this.fullWindowOnEscKey),h.documentElement.style.overflow=this.docOrigOverflow,D(h.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=Zn.getTech(r);if(a||(a=Fe.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else m.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.selectSource=function(e){var n,i=this,t=this.options_.techOrder.map(function(e){return[e,Zn.getTech(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(m.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,n,i){var r;return e.some(function(t){return n.some(function(e){if(r=i(t,e))return!0})}),r},a=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return(this.options_.sourceOrder?r(e,t,(n=a,function(e,t){return n(t,e)})):r(t,e,a))||!1},e.src=function(e){var r=this;if(void 0===e)return this.cache_.src||"";var a=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(e){e=t(e),Array.isArray(e)?n=n.concat(e):u(e)&&n.push(e)}),e=n}else e="string"==typeof e&&e.trim()?[di({src:e})]:u(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[di(e)]:[];return e}(e);a.length?(this.changingSrc_=!0,this.cache_.sources=a,this.updateSourceCaches_(a[0]),ni(this,a[0],function(e,t){var n,i;if(r.middleware_=t,r.cache_.sources=a,r.updateSourceCaches_(e),r.src_(e))return 1<a.length?r.src(a.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady());n=t,i=r.tech_,n.forEach(function(e){return e.setTech&&e.setTech(i)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},e.src_=function(e){var t,n,i=this,r=this.selectSource([e]);return!r||(t=r.tech,n=this.techName_,Ne(t)!==Ne(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){i.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},e.load=function(){this.techCall_("load")},e.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),we(this)&&this.trigger("playerreset")},e.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},e.currentSource=function(){return this.cache_.source||{}},e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},e.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=t||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",t)},e.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},e.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},e.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},e.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new xt(e),this.addClass("vjs-error"),m.error("(CODE:"+this.error_.code+" "+xt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},e.reportUserActivity=function(e){this.userActivity_=!0},e.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.listenForUserActivity_=function(){var t,n,i,r=Te(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===n&&e.screenY===i||(n=e.screenX,i=e.screenY,r())}),this.on("mouseup",function(e){r(),this.clearInterval(t)});var a,e=this.getChild("controlBar");e&&(e.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),e.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},e.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},e.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},e.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},e.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},e.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},e.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},e.languages=function(){return Ue(d.prototype.options_.languages,this.languages_)},e.toJSON=function(){var e=Ue(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=Ue(i)).player=void 0,e.tracks[n]=i}return e},e.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new Pt(this,t);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},e.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Wr.length;n++){var i=Wr[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Yr[e]),this.addClass(Yr[i]),this.breakpoint_=i;break}}},e.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},e.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=y({},Xr,e),this.updateCurrentBreakpoint_()),y(this.breakpoints_)},e.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},e.currentBreakpoint=function(){return this.breakpoint_},e.currentBreakpointClass=function(){return Yr[this.breakpoint_]||""},d.getTagSettings=function(e){var t={sources:[],tracks:[]},n=L(e),i=n["data-setup"];if(P(e,"vjs-fill")&&(n.fill=!0),P(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=Tt(i||"{}"),a=r[0],s=r[1];a&&m.error(a),y(n,s)}if(y(t,n),e.hasChildNodes())for(var o=e.childNodes,l=0,u=o.length;l<u;l++){var c=o[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(L(c)):"track"===d&&t.tracks.push(L(c))}return t},e.flexNotSupported_=function(){var e=h.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},d}(Fe);Sn.names.forEach(function(e){var t=Sn[e];Kr.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Kr.players={};var Qr=_.navigator;Kr.prototype.options_={techOrder:Zn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Qr&&(Qr.languages&&Qr.languages[0]||Qr.userLanguage||Qr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Kr.prototype[e]=function(){return this.techGet_(e)}}),Gr.forEach(function(e){Kr.prototype["handleTech"+Ne(e)+"_"]=function(){return this.trigger(e)}}),Fe.registerComponent("Player",Kr);var Zr="plugin",Jr="activePlugins_",ea={},ta=function(e){return ea.hasOwnProperty(e)},na=function(e){return ta(e)?ea[e]:void 0},ia=function(e,t){e[Jr]=e[Jr]||{},e[Jr][t]=!0},ra=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},aa=function(r,a){return a.prototype.name=r,function(){ra(this,{name:r,plugin:a,instance:null},!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=s(a,[this].concat(t));return this[r]=function(){return i},ra(this,i.getEventHash()),i}},sa=function(){function a(e){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,Ie(this),delete this.trigger,Oe(this,this.constructor.defaultState),ia(e,this.name),this.dispose=Te(this,this.dispose),e.on("dispose",this.dispose)}var e=a.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},e.trigger=function(e,t){return void 0===t&&(t={}),he(this.eventBusEl_,e,this.getEventHash(t))},e.handleStateChanged=function(e){},e.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Jr][e]=!1,this.player=this.state=null,t[e]=aa(e,ea[e])},a.isBasic=function(e){var t="string"==typeof e?na(e):e;return"function"==typeof t&&!a.prototype.isPrototypeOf(t.prototype)},a.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(ta(e))m.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Kr.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof t+".");var n,i,r;return ea[e]=t,e!==Zr&&(a.isBasic(t)?Kr.prototype[e]=(n=e,i=t,r=function(){ra(this,{name:n,plugin:i,instance:null},!0);var e=i.apply(this,arguments);return ia(this,n),ra(this,{name:n,plugin:i,instance:e}),e},Object.keys(i).forEach(function(e){r[e]=i[e]}),r):Kr.prototype[e]=aa(e,t)),t},a.deregisterPlugin=function(e){if(e===Zr)throw new Error("Cannot de-register base plugin.");ta(e)&&(delete ea[e],delete Kr.prototype[e])},a.getPlugins=function(e){var n;return void 0===e&&(e=Object.keys(ea)),e.forEach(function(e){var t=na(e);t&&((n=n||{})[e]=t)}),n},a.getPluginVersion=function(e){var t=na(e);return t&&t.VERSION||""},a}();sa.getPlugin=na,sa.BASE_PLUGIN_NAME=Zr,sa.registerPlugin(Zr,sa),Kr.prototype.usingPlugin=function(e){return!!this[Jr]&&!0===this[Jr][e]},Kr.prototype.hasPlugin=function(e){return!!ta(e)};var oa=function(e){return 0===e.indexOf("#")?e.slice(1):e};function la(e,n,t){var i=la.getPlayer(e);if(i)return n&&m.warn('Player "'+e+'" is already initialised. Options will not be applied.'),t&&i.ready(t),i;var r="string"==typeof e?X("#"+oa(e)):e;if(!S(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");h.body.contains(r)||m.warn("The element supplied is not included in the DOM"),n=n||{},la.hooks("beforesetup").forEach(function(e){var t=e(r,Ue(n));u(t)&&!Array.isArray(t)?n=Ue(n,t):m.error("please return an object in beforesetup hooks")});var a=Fe.getComponent("Player");return i=new a(r,n,t),la.hooks("setup").forEach(function(e){return e(i)}),i}if(la.hooks_={},la.hooks=function(e,t){return la.hooks_[e]=la.hooks_[e]||[],t&&(la.hooks_[e]=la.hooks_[e].concat(t)),la.hooks_[e]},la.hook=function(e,t){la.hooks(e,t)},la.hookOnce=function(n,e){la.hooks(n,[].concat(e).map(function(t){return function e(){return la.removeHook(n,e),t.apply(void 0,arguments)}}))},la.removeHook=function(e,t){var n=la.hooks(e).indexOf(t);return!(n<=-1)&&(la.hooks_[e]=la.hooks_[e].slice(),la.hooks_[e].splice(n,1),!0)},!0!==_.VIDEOJS_NO_DYNAMIC_STYLE&&T()){var ua=X(".vjs-styles-defaults");if(!ua){ua=xe("vjs-styles-defaults");var ca=X("head");ca&&ca.insertBefore(ua,ca.firstChild),be(ua,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}_e(1,la),la.VERSION="7.4.2",la.options=Kr.prototype.options_,la.getPlayers=function(){return Kr.players},la.getPlayer=function(e){var t,n=Kr.players;if("string"==typeof e){var i=oa(e),r=n[i];if(r)return r;t=X("#"+i)}else t=e;if(S(t)){var a=t,s=a.player,o=a.playerId;if(s||n[o])return s||n[o]}},la.getAllPlayers=function(){return Object.keys(Kr.players).map(function(e){return Kr.players[e]}).filter(Boolean)},la.players=Kr.players,la.getComponent=Fe.getComponent,la.registerComponent=function(e,t){Zn.isTech(t)&&m.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Fe.registerComponent.call(Fe,e,t)},la.getTech=Zn.getTech,la.registerTech=Zn.registerTech,la.use=function(e,t){Jn[e]=Jn[e]||[],Jn[e].push(t)},Object.defineProperty(la,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(la.middleware,"TERMINATOR",{value:ti,writeable:!1,enumerable:!0}),la.browser=lt,la.TOUCH_ENABLED=ot,la.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},i={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(n,e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},la.mergeOptions=Ue,la.bind=Te,la.registerPlugin=sa.registerPlugin,la.deregisterPlugin=sa.deregisterPlugin,la.plugin=function(e,t){return m.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),sa.registerPlugin(e,t)},la.getPlugins=sa.getPlugins,la.getPlugin=sa.getPlugin,la.getPluginVersion=sa.getPluginVersion,la.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),la.options.languages=Ue(la.options.languages,((n={})[e]=t,n)),la.options.languages[e]},la.log=m,la.createLogger=g,la.createTimeRange=la.createTimeRanges=dt,la.formatTime=Mi,la.setFormatTime=function(e){wi=e},la.resetFormatTime=function(){wi=Ei},la.parseUrl=zt,la.isCrossOrigin=Wt,la.EventTarget=Ee,la.on=ce,la.one=fe,la.off=de,la.trigger=he,la.xhr=hn,la.TextTrack=vn,la.AudioTrack=_n,la.VideoTrack=yn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){la[e]=function(){return m.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Q[e].apply(null,arguments)}}),la.computedStyle=i,la.dom=Q,la.url=Yt;var da=Qt(function(e,t){var n,c,i,r,d;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=d.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=d.normalizePath(i.path),d.buildURLFromParts(i)}var r=d.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var a=d.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=c.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=d.normalizePath(u)}else o.path=a.path,r.params||(o.params=a.params,r.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(o)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=d}),ha=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pa=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ma=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ga=function(){function e(){ha(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},e.prototype.trigger=function(e){var t=this.listeners[e],n=void 0,i=void 0,r=void 0;if(t)if(2===arguments.length)for(i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),i=t.length,n=0;n<i;++n)t[n].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),va=function(t){function n(){ha(this,n);var e=ma(this,t.call(this));return e.buffer="",e}return pa(n,t),n.prototype.push=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},n}(ga),_a=function(e){for(var t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=t.length,r=void 0;i--;)""!==t[i]&&((r=/([^=]*)=(.*)/.exec(t[i]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),n[r[0]]=r[1]);return n},ya=function(t){function n(){ha(this,n);var e=ma(this,t.call(this));return e.customParsers=[],e}return pa(n,t),n.prototype.push=function(e){var t=void 0,n=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0]){for(var i=0;i<this.customParsers.length;i++)if(this.customParsers[i].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var r=_a(t[1]);if(r.URI&&(n.uri=r.URI),r.BYTERANGE){var a=r.BYTERANGE.split("@"),s=a[0],o=a[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),o&&(n.byterange.offset=parseInt(o,10))}}this.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=_a(t[1]),n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION.split("x"),u={};l[0]&&(u.width=parseInt(l[0],10)),l[1]&&(u.height=parseInt(l[1],10)),n.attributes.RESOLUTION=u}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=_a(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=_a(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=_a(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}else this.trigger("data",{type:"uri",uri:e})},n.prototype.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0})},n}(ga),xa=function(t){function n(){ha(this,n);var e=ma(this,t.call(this));e.lineStream=new va,e.parseStream=new ya,e.lineStream.pipe(e.parseStream);var r=e,a=[],s={},o=void 0,l=void 0,u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var n=void 0,i=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((s.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((s.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(s.duration=t.duration),0===t.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(l.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):l=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){o={},t.uri&&(o.uri=t.uri),t.byterange&&(o.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes?(s.attributes||(s.attributes={}),fa(s.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},n=e[t.attributes["GROUP-ID"]],(i={default:/yes/i.test(t.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(i.language=t.attributes.LANGUAGE),t.attributes.URI&&(i.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(i.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(i.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(i.forced=/yes/i.test(t.attributes.FORCED)),n[t.attributes.NAME]=i}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),s.dateTimeString=t.dateTimeString,s.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=t.data},"cue-out-cont":function(){s.cueOutCont=t.data},"cue-in":function(){s.cueIn=t.data}}[t.tagType]||function(){}).call(r)},uri:function(){s.uri=t.uri,a.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=c,o&&(s.map=o),s={}},comment:function(){},custom:function(){t.segment?(s.custom=s.custom||{},s.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)}),e}return pa(n,t),n.prototype.push=function(e){this.lineStream.push(e)},n.prototype.end=function(){this.lineStream.push("\n")},n.prototype.addParser=function(e){this.parseStream.addParser(e)},n}(ga),ba=function(e){return!!e&&"object"==typeof e},Ta=function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(t,n){return Object.keys(n).forEach(function(e){Array.isArray(t[e])&&Array.isArray(n[e])?t[e]=t[e].concat(n[e]):ba(t[e])&&ba(n[e])?t[e]=i(t[e],n[e]):t[e]=n[e]}),t},{})},Sa=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},Ea=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},wa=function(e){var t;return(t=e.reduce(function(e,t){var n,i=t.attributes.id+(t.attributes.lang||"");e[i]?(t.segments[0].discontinuity=!0,(n=e[i].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):e[i]=t;return e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){var t,i;return e.discontinuityStarts=(t=e.segments,i="discontinuity",t.reduce(function(e,t,n){return t[i]&&e.push(n),e},[])),e})},Ma=function(e){var t,n=e.attributes,i=e.segments,r={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(r.contentProtection=n.contentProtection),r};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Aa,Ca=(function(e,t){var n,c,i,r,d;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=d.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=d.normalizePath(i.path),d.buildURLFromParts(i)}var r=d.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var a=d.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=c.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=d.normalizePath(u)}else o.path=a.path,r.params||(o.params=a.params,r.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(o)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=d}(Aa={exports:{}},Aa.exports),Aa.exports),Pa=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=Ca.buildAbsoluteURL(_.location.href,e)),Ca.buildAbsoluteURL(e,t))},Ra=function(e){var t=e.baseUrl,n=void 0===t?"":t,i=e.source,r=void 0===i?"":i,a=e.range,s=void 0===a?"":a,o={uri:r,resolvedUri:Pa(n||"",r)};if(s){var l=s.split("-"),u=parseInt(l[0],10),c=parseInt(l[1],10);o.byterange={length:c-u,offset:u}}return o},Da=function(e,t){for(var n,i,r,a,s,o,l,u,c,d,h,f,p=e.type,m=void 0===p?"static":p,g=e.minimumUpdatePeriod,v=void 0===g?0:g,_=e.media,y=void 0===_?"":_,x=e.sourceDuration,b=e.timescale,T=void 0===b?1:b,S=e.startNumber,E=void 0===S?1:S,w=e.periodIndex,M=[],A=-1,C=0;C<t.length;C++){var P=t[C],R=P.d,D=P.r||0,k=P.t||0;A<0&&(A=k),k&&A<k&&(A=k);var I=void 0;if(D<0){var L=C+1;I=L===t.length?"dynamic"===m&&0<v&&0<y.indexOf("$Number$")?(i=A,r=R,void 0,a=(n=e).NOW,s=n.clientOffset,o=n.availabilityStartTime,l=n.timescale,u=void 0===l?1:l,c=n.start,d=void 0===c?0:c,h=n.minimumUpdatePeriod,f=(a+s)/1e3+(void 0===h?0:h)-(o+d),Math.ceil((f*u-i)/r)):(x*T-A)/R:(t[L].t-A)/R}else I=D+1;for(var O=E+M.length+I,N=E+M.length;N<O;)M.push({number:N,duration:R/T,time:A,timeline:w}),A+=R,N++}return M},ka={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/i))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,o=e.start,l=void 0===o?0:o,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,f=(t+n)/1e3,p=i+l,m=f+c-p,g=Math.ceil(m*a/s),v=Math.floor((f-p-h)*a/s),_=Math.floor((f-p)*a/s);return{start:Math.max(0,v),end:Math.min(g,_)}}},Ia=function(e){var o,t=e.type,n=void 0===t?"static":t,i=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.sourceDuration,l=ka[n](e),u=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(l.start,l.end).map((o=e,function(e,t){var n=o.duration,i=o.timescale,r=void 0===i?1:i,a=o.periodIndex,s=o.startNumber;return{number:(void 0===s?1:s)+e,duration:n/r,timeline:a,time:t*n}}));if("static"===n){var c=u.length-1;u[c].duration=s-i/a*c}return u},La=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Oa=function(e,t){return e.replace(La,(a=t,function(e,t,n,i){if("$$"===e)return"$";if(void 0===a[t])return e;var r=""+a[t];return"RepresentationID"===t?r:(i=n?parseInt(i,10):1)<=r.length?r:""+new Array(i-r.length+1).join("0")+r}));var a},Na=function(n,e){var t,i,r={RepresentationID:n.id,Bandwidth:n.bandwidth||0},a=n.initialization,s=void 0===a?{sourceURL:"",range:""}:a,o=Ra({baseUrl:n.baseUrl,source:Oa(s.sourceURL,r),range:s.range});return(i=e,(t=n).duration||i?t.duration?Ia(t):Da(t,i):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]).map(function(e){r.Number=e.number,r.Time=e.time;var t=Oa(n.media||"",r);return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:Pa(n.baseUrl||"",t),map:o,number:e.number}})},Ua="INVALID_NUMBER_OF_PERIOD",Fa="DASH_EMPTY_MANIFEST",Ba="DASH_INVALID_XML",$a="NO_BASE_URL",ja="SEGMENT_TIME_UNSPECIFIED",Va="UNSUPPORTED_UTC_TIMING_SCHEME",Ha=function(l,e){var t=l.duration,n=l.segmentUrls,i=void 0===n?[]:n;if(!t&&!e||t&&e)throw new Error(ja);var r,a=i.map(function(e){return n=e,i=(t=l).baseUrl,r=t.initialization,s=Ra({baseUrl:i,source:(a=void 0===r?{}:r).sourceURL,range:a.range}),(o=Ra({baseUrl:i,source:n.media,range:n.mediaRange})).map=s,o;var t,n,i,r,a,s,o});return t&&(r=Ia(l)),e&&(r=Da(l,e)),r.map(function(e,t){if(a[t]){var n=a[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}}).filter(function(e){return e})},za=function(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,r=e.sourceDuration,a=e.timescale,s=void 0===a?1:a,o=e.indexRange,l=void 0===o?"":o,u=e.duration;if(!t)throw new Error($a);var c=Ra({baseUrl:t,source:i.sourceURL,range:i.range}),d=Ra({baseUrl:t,source:t,range:l});if(d.map=c,u){var h=Ia(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else r&&(d.duration=r/s,d.timeline=0);return d.number=0,[d]},Ga=function(e){var t,n,i=e.attributes,r=e.segmentInfo;if(r.template?(n=Na,t=Ta(i,r.template)):r.base?(n=za,t=Ta(i,r.base)):r.list&&(n=Ha,t=Ta(i,r.list)),!n)return{attributes:i};var a=n(t,r.timeline);if(t.duration){var s=t,o=s.duration,l=s.timescale,u=void 0===l?1:l;t.duration=o/u}else a.length?t.duration=a.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return{attributes:t,segments:a}},qa=function(e,t){return Ea(e.childNodes).filter(function(e){return e.tagName===t})},Wa=function(e){return e.textContent.trim()},Ya=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(l||0)},Xa={mediaPresentationDuration:function(e){return Ya(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Ya(e)},timeShiftBufferDepth:function(e){return Ya(e)},start:function(e){return Ya(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Ya(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Ka=function(e){return e&&e.attributes?Ea(e.attributes).reduce(function(e,t){var n=Xa[t.name]||Xa.DEFAULT;return e[t.name]=n(t.value),e},{}):{}};var Qa,Za,Ja,es,ts,ns={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},is=function(e,n){return n.length?Sa(e.map(function(t){return n.map(function(e){return Pa(t,Wa(e))})})):e},rs=function(e){var t=qa(e,"SegmentTemplate")[0],n=qa(e,"SegmentList")[0],i=n&&qa(n,"SegmentURL").map(function(e){return Ta({tag:"SegmentURL"},Ka(e))}),r=qa(e,"SegmentBase")[0],a=n||t,s=a&&qa(a,"SegmentTimeline")[0],o=n||r||t,l=o&&qa(o,"Initialization")[0],u=t&&Ka(t);u&&l?u.initialization=l&&Ka(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,timeline:s&&qa(s,"S").map(function(e){return Ka(e)}),list:n&&Ta(Ka(n),{segmentUrls:i,initialization:Ka(l)}),base:r&&Ta(Ka(r),{initialization:Ka(l)})};return Object.keys(c).forEach(function(e){c[e]||delete c[e]}),c},as=function(e){return e.reduce(function(e,t){var n=Ka(t),i=ns[n.schemeIdUri];if(i){e[i]={attributes:n};var r=qa(t,"cenc:pssh")[0];if(r){var a=Wa(r),s=a&&function(e){for(var t=_.atob(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(a);e[i].pssh=s}}return e},{})},ss=function(f,p,m){return function(e){var t=Ka(e),n=is(p,qa(e,"BaseURL")),i=qa(e,"Role")[0],r={role:Ka(i)},a=Ta(f,t,r),s=as(qa(e,"ContentProtection"));Object.keys(s).length&&(a=Ta(a,{contentProtection:s}));var o,l,u,c=rs(e),d=qa(e,"Representation"),h=Ta(m,c);return Sa(d.map((o=a,l=n,u=h,function(e){var t=qa(e,"BaseURL"),n=is(l,t),i=Ta(o,Ka(e)),r=rs(e);return n.map(function(e){return{segmentInfo:Ta(u,r),attributes:Ta(i,{baseUrl:e})}})})))}},os=function(e,t){void 0===t&&(t={});var n=t,i=n.manifestUri,r=void 0===i?"":i,a=n.NOW,s=void 0===a?Date.now():a,o=n.clientOffset,l=void 0===o?0:o,u=qa(e,"Period");if(!u.length)throw new Error(Ua);var c,d,h=Ka(e),f=is([r],qa(e,"BaseURL"));return h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=s,h.clientOffset=l,Sa(u.map((c=h,d=f,function(e,t){var n=is(d,qa(e,"BaseURL")),i=Ka(e),r=parseInt(i.id,10),a=_.isNaN(r)?t:r,s=Ta(c,{periodIndex:a}),o=qa(e,"AdaptationSet"),l=rs(e);return Sa(o.map(ss(s,n,l)))})))},ls=function(e){if(""===e)throw new Error(Fa);var t=(new _.DOMParser).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw new Error(Ba);return n},us=function(e,t){return function(e){var t;if(!e.length)return{};var n=e[0].attributes,i=n.sourceDuration,r=n.minimumUpdatePeriod,a=void 0===r?0:r,s=wa(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(Ma),o=wa(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),l=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),u={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:i,playlists:s,minimumUpdatePeriod:1e3*a};return o.length&&(u.mediaGroups.AUDIO.audio=o.reduce(function(e,t){var n,i,r,a,s,o=t.attributes.role&&t.attributes.role.value||"main",l=t.attributes.lang||"",u="main";return l&&(u=t.attributes.lang+" ("+o+")"),e[u]&&e[u].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[u]={language:l,autoselect:!0,default:"main"===o,playlists:[(n=t,r=n.attributes,a=n.segments,s={attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:a,mediaSequence:a.length?a[0].number:1},r.contentProtection&&(s.contentProtection=r.contentProtection),s)],uri:""}),e},{})),l.length&&(u.mediaGroups.SUBTITLES.subs=l.reduce(function(e,t){var n,i,r,a,s=t.attributes.lang||"text";return e[s]||(e[s]={language:s,default:!1,autoselect:!1,playlists:[(n=t,r=n.attributes,a=n.segments,void 0===a&&(a=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration),{attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:a,mediaSequence:a.length?a[0].number:1})],uri:""}),e},{})),u}(os(ls(e),t).map(Ga))},cs=function(e){return function(e){var t=qa(e,"UTCTiming")[0];if(!t)return null;var n=Ka(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Va)}return n}(ls(e))},ds=function(e){return e>>>0};Ja=function(e){return Qa(e,["moov","trak"]).reduce(function(e,t){var n,i,r,a,s;return(n=Qa(t,["tkhd"])[0])?(i=n[0],a=ds(n[r=0===i?12:20]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),(s=Qa(t,["mdia","mdhd"])[0])?(r=0===(i=s[0])?12:20,e[a]=ds(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),e):null):null},{})},es=function(r,e){var t,n,i;return t=Qa(e,["moof","traf"]),n=[].concat.apply([],t.map(function(i){return Qa(i,["tfhd"]).map(function(e){var t,n;return t=ds(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),n=r[t]||9e4,(Qa(i,["tfdt"]).map(function(e){var t,n;return t=e[0],n=ds(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=ds(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0]||1/0)/n})})),i=Math.min.apply(null,n),isFinite(i)?i:0},ts=function(e){var t=Qa(e,["moov","trak"]),o=[];return t.forEach(function(e){var t=Qa(e,["mdia","hdlr"]),s=Qa(e,["tkhd"]);t.forEach(function(e,t){var n,i,r=Za(e.subarray(8,12)),a=s[t];"vide"===r&&(i=0===(n=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?n.getUint32(12):n.getUint32(20),o.push(i))})}),o};var hs,fs,ps,ms,gs,vs,_s,ys,xs,bs,Ts,Ss,Es,ws,Ms,As,Cs,Ps,Rs,Ds,ks,Is,Ls,Os,Ns,Us,Fs,Bs,$s,js,Vs,Hs,zs,Gs,qs,Ws,Ys,Xs,Ks,Qs,Zs={findBox:Qa=function(e,t){var n,i,r,a,s,o=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=ds(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),r=Za(e.subarray(n+4,n+8)),a=1<i?n+i:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(n+8,a)):(s=Qa(e.subarray(n+8,a),t.slice(1))).length&&(o=o.concat(s))),n=a;return o},parseType:Za=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},timescale:Ja,startTime:es,videoTrackIds:ts},Js=Math.pow(2,32)-1;!function(){var e;if(Is={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in Is)Is.hasOwnProperty(e)&&(Is[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);Ls=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Ns=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Os=new Uint8Array([0,0,0,1]),Us=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Fs=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Bs={video:Us,audio:Fs},Vs=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),js=new Uint8Array([0,0,0,0,0,0,0,0]),Hs=new Uint8Array([0,0,0,0,0,0,0,0]),zs=Hs,Gs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),qs=Hs,$s=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),hs=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},fs=function(){return hs(Is.dinf,hs(Is.dref,Vs))},ps=function(e){return hs(Is.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},Ms=function(e){return hs(Is.hdlr,Bs[e])},ws=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),hs(Is.mdhd,t)},Es=function(e){return hs(Is.mdia,ws(e),Ms(e.type),vs(e))},gs=function(e){return hs(Is.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},vs=function(e){return hs(Is.minf,"video"===e.type?hs(Is.vmhd,$s):hs(Is.smhd,js),fs(),Cs(e))},_s=function(e,t){for(var n=[],i=t.length;i--;)n[i]=Rs(t[i]);return hs.apply(null,[Is.moof,gs(e)].concat(n))},ys=function(e){for(var t=e.length,n=[];t--;)n[t]=Ts(e[t]);return hs.apply(null,[Is.moov,bs(4294967295)].concat(n).concat(xs(e)))},xs=function(e){for(var t=e.length,n=[];t--;)n[t]=Ds(e[t]);return hs.apply(null,[Is.mvex].concat(n))},bs=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return hs(Is.mvhd,t)},As=function(e){var t,n,i=e.samples||[],r=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,r[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return hs(Is.sdtp,r)},Cs=function(e){return hs(Is.stbl,Ps(e),hs(Is.stts,qs),hs(Is.stsc,zs),hs(Is.stsz,Gs),hs(Is.stco,Hs))},Ps=function(e){return hs(Is.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?Ws(e):Ys(e))},Ws=function(e){var t,n=e.sps||[],i=e.pps||[],r=[],a=[];for(t=0;t<n.length;t++)r.push((65280&n[t].byteLength)>>>8),r.push(255&n[t].byteLength),r=r.concat(Array.prototype.slice.call(n[t]));for(t=0;t<i.length;t++)a.push((65280&i[t].byteLength)>>>8),a.push(255&i[t].byteLength),a=a.concat(Array.prototype.slice.call(i[t]));return hs(Is.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),hs(Is.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(r).concat([i.length]).concat(a))),hs(Is.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},Ys=function(e){return hs(Is.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),ps(e))},Ss=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return hs(Is.tkhd,t)},Rs=function(e){var t,n,i,r,a,s;return t=hs(Is.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(Js+1)),s=Math.floor(e.baseMediaDecodeTime%(Js+1)),n=hs(Is.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),92,"audio"===e.type?(i=ks(e,92),hs(Is.traf,t,n,i)):(r=As(e),i=ks(e,r.length+92),hs(Is.traf,t,n,i,r))},Ts=function(e){return e.duration=e.duration||4294967295,hs(Is.trak,Ss(e),Es(e))},Ds=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),hs(Is.trex,t)},Qs=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},Ks=function(e,t){var n,i,r,a;for(t+=20+16*(i=e.samples||[]).length,n=Qs(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return hs(Is.trun,new Uint8Array(n))},Xs=function(e,t){var n,i,r,a;for(t+=20+8*(i=e.samples||[]).length,n=Qs(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return hs(Is.trun,new Uint8Array(n))},ks=function(e,t){return"audio"===e.type?Xs(e,t):Ks(e,t)};var eo={ftyp:ms=function(){return hs(Is.ftyp,Ls,Os,Ls,Ns)},mdat:function(e){return hs(Is.mdat,e)},moof:_s,moov:ys,initSegment:function(e){var t,n=ms(),i=ys(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}},to=function(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var n;return!!a[e]&&(n=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(n,1),-1<n)},this.trigger=function(e){var t,n,i,r;if(t=a[e])if(2===arguments.length)for(i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(i=t.length,n=0;n<i;++n)t[n].apply(this,r)}},this.dispose=function(){a={}}}};to.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},to.prototype.push=function(e){this.trigger("data",e)},to.prototype.flush=function(e){this.trigger("done",e)};var no,io,ro,ao,so,oo,lo,uo=to,co=function(e){var t,n,i=[],r=[];for(t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.push(i),r},ho=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},fo=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},po=function(e,t){var n,i,r,a,s,o,l,u=t||0,c=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)s=a[i],o=s,l=void 0,(l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=u,l.compositionTimeOffset=o.pts-o.dts,l.duration=o.duration,l.size=4*o.length,l.size+=o.byteLength,o.keyFrame&&(l.flags.dependsOn=2,l.flags.isNonSyncSample=0),u+=(r=l).size,c.push(r);return c},mo=function(e){var t,n,i,r,a,s,o=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)s=a[i],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c},go=[33,16,5,32,164,27],vo=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],_o=function(e){for(var t=[];e--;)t.push(0);return t},yo={96e3:[go,[227,64],_o(154),[56]],88200:[go,[231],_o(170),[56]],64e3:[go,[248,192],_o(240),[56]],48e3:[go,[255,192],_o(268),[55,148,128],_o(54),[112]],44100:[go,[255,192],_o(268),[55,163,128],_o(84),[112]],32e3:[go,[255,192],_o(268),[55,234],_o(226),[112]],24e3:[go,[255,192],_o(268),[55,255,128],_o(268),[111,112],_o(126),[224]],16e3:[go,[255,192],_o(268),[55,255,128],_o(268),[111,255],_o(269),[223,108],_o(195),[1,192]],12e3:[vo,_o(268),[3,127,248],_o(268),[6,255,240],_o(268),[13,255,224],_o(268),[27,253,128],_o(259),[56]],11025:[vo,_o(268),[3,127,248],_o(268),[6,255,240],_o(268),[13,255,224],_o(268),[27,255,192],_o(268),[55,175,128],_o(108),[112]],8e3:[vo,_o(268),[3,121,16],_o(47),[7]]},xo=(no=yo,Object.keys(no).reduce(function(e,t){return e[t]=new Uint8Array(no[t].reduce(function(e,t){return e.concat(t)},[])),e},{}));oo=function(e,t){return io(so(e,t))},lo=function(e,t){return ro(ao(e),t)};io=function(e){return 9e4*e},ro=function(e,t){return e*t},ao=function(e){return e/9e4},so=function(e,t){return e/t};var bo=oo,To=lo,So=function(e,t,n,i){var r,a,s,o,l=0,u=0,c=0;if(t.length&&(r=bo(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(9e4/(e.samplerate/1024)),n&&i&&(l=r-Math.max(n,i),c=(u=Math.floor(l/a))*a),!(u<1||45e3<c))){for((s=xo[e.samplerate])||(s=t[0].data),o=0;o<u;o++)t.splice(o,0,{data:s});e.baseMediaDecodeTime-=Math.floor(To(c,e.samplerate))}},Eo=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},wo=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},Mo=function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r},Ao=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Co=function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},Po=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ro=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n},Do=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},ko=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},Io=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},Lo=4,Oo=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new $o(0,0),new $o(0,1),new $o(1,0),new $o(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};(Oo.prototype=new uo).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Ro(e.escapedRBSP)).payloadType===Lo&&(n=Do(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=ko(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Oo.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},Oo.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Oo.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Oo.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Oo.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var No={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Uo=function(e){return null===e?"":(e=No[e]||e,String.fromCharCode(e))},Fo=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Bo=function(){for(var e=[],t=15;t--;)e.push("");return e},$o=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Bo();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Bo();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Bo()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=Uo((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Uo((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=Fo.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=Uo(i),a+=Uo(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};$o.prototype=new uo,$o.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},$o.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Bo(),this.nonDisplayed_=Bo(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},$o.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},$o.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},$o.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},$o.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},$o.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},$o.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},$o.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},$o.prototype.isNormalChar=function(e){return 32<=e&&e<=127},$o.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Bo(),this.displayed_=Bo()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},$o.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},$o.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},$o.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},$o.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},$o.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},$o.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var jo={CaptionStream:Oo,Cea608Stream:$o},Vo={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ho=function(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e},zo=function e(t){var n,i;e.prototype.init.call(this),this.type_=t,this.push=function(e){e.type===this.type_&&(void 0===i&&(i=e.dts),e.dts=Ho(e.dts,i),e.pts=Ho(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.discontinuity=function(){n=i=void 0}};zo.prototype=new uo;var Go,qo=zo,Wo=Ho,Yo=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},Xo=function(e,t,n){return decodeURIComponent(Yo(e,t,n))},Ko=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Qo={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Xo(e.data,1,t),e.value=Xo(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Xo(e.data,1,t),e.url=Xo(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(Yo(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Go=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},u=0,c=[],d=0;if(Go.prototype.init.call(this),this.dispatchType=Vo.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,i,r,a;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(e),d+=e.data.byteLength,1===c.length&&(u=Ko(e.data.subarray(6,10)),u+=10),!(d<u)){for(t={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<u;)t.data.set(c[0].data.subarray(0,u-a),a),a+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();n=10,64&t.data[5]&&(n+=4,n+=Ko(t.data.subarray(10,14)),u-=Ko(t.data.subarray(16,20)));do{if((i=Ko(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((r={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+i+10)}).key=r.id,Qo[r.id]&&(Qo[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var s=r.data,o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;o*=4,o+=3&s[7],r.timeStamp=o,void 0===t.pts&&void 0===t.dts&&(t.pts=r.timeStamp,t.dts=r.timeStamp),this.trigger("timestamp",r)}t.frames.push(r),n+=10,n+=i}while(n<u);this.trigger("data",t)}}}).prototype=new uo;var Zo,Jo,el,tl=Go,nl=qo;(Zo=function(){var r=new Uint8Array(188),a=0;Zo.prototype.init.call(this),this.push=function(e){var t,n=0,i=188;for(a?((t=new Uint8Array(e.byteLength+a)).set(r.subarray(0,a)),t.set(e,a),a=0):t=e;i<t.byteLength;)71!==t[n]||71!==t[i]?(n++,i++):(this.trigger("data",t.subarray(n,i)),n+=188,i+=188);n<t.byteLength&&(r.set(t.subarray(n),0),a=t.byteLength-n)},this.flush=function(){188===a&&71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")}}).prototype=new uo,(Jo=function(){var i,r,a,s;Jo.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,i=function(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),"pat"===t.type?r(e.subarray(n),t):a(e.subarray(n),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],s.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=s.pmtPid},a=function(e,t){var n,i;if(1&e[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var r=e[i],a=(31&e[i+1])<<8|e[i+2];r===Vo.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=a:r===Vo.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=a:r===Vo.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][a]=r),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=s.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",i(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",i(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Vo.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Vo.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new uo,Jo.STREAM_TYPES={h264:27,adts:15},(el=function(){var h=this,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},s=function(e,t,n){var i,r,a=new Uint8Array(e.size),s={type:t},o=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,o=0;o<e.data.length;o++)r=e.data[o],a.set(r.data,l),l+=r.data.byteLength;var u,c,d;u=a,(c=s).packetLength=6+(u[4]<<8|u[5]),c.dataAlignmentIndicator=0!=(4&u[6]),192&(d=u[7])&&(c.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,c.pts*=4,c.pts+=(6&u[13])>>>1,c.dts=c.pts,64&d&&(c.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,c.dts*=4,c.dts+=(6&u[18])>>>1)),c.data=u.subarray(9+u[8]),i="video"===t||s.packetLength<=e.size,(n||i)&&(e.size=0,e.data.length=0),i&&h.trigger("data",s)}};el.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,t;switch(n.streamType){case Vo.H264_STREAM_TYPE:case Vo.H264_STREAM_TYPE:e=i,t="video";break;case Vo.ADTS_STREAM_TYPE:e=r,t="audio";break;case Vo.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},t=n.programMapTable;null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),h.trigger("data",e)}})[n.type]()},this.flush=function(){s(i,"video"),s(r,"audio"),s(a,"timed-metadata"),this.trigger("done")}}).prototype=new uo;var il={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Zo,TransportParseStream:Jo,ElementaryStream:el,TimestampRolloverStream:nl,CaptionStream:jo.CaptionStream,Cea608Stream:jo.Cea608Stream,MetadataStream:tl};for(var rl in Vo)Vo.hasOwnProperty(rl)&&(il[rl]=Vo[rl]);var al,sl=il,ol=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(al=function(){var u;al.prototype.init.call(this),this.push=function(e){var t,n,i,r,a,s,o=0,l=0;if("audio"===e.type)for(u?(r=u,(u=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),u.set(e.data,r.byteLength)):u=e.data;o+5<u.length;)if(255===u[o]&&240==(246&u[o+1])){if(n=2*(1&~u[o+1]),t=(3&u[o+3])<<11|u[o+4]<<3|(224&u[o+5])>>5,s=9e4*(a=1024*(1+(3&u[o+6])))/ol[(60&u[o+2])>>>2],i=o+t,u.byteLength<i)return;if(this.trigger("data",{pts:e.pts+l*s,dts:e.dts+l*s,sampleCount:a,audioobjecttype:1+(u[o+2]>>>6&3),channelcount:(1&u[o+2])<<2|(192&u[o+3])>>>6,samplerate:ol[(60&u[o+2])>>>2],samplingfrequencyindex:(60&u[o+2])>>>2,samplesize:16,data:u.subarray(o+7+n,i)}),u.byteLength===i)return void(u=void 0);l++,u=u.subarray(i)}else o++},this.flush=function(){this.trigger("done")}}).prototype=new uo;var ll,ul,cl,dl=al,hl=function(i){var r=i.byteLength,a=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var e=i.byteLength-r,t=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");t.set(i.subarray(e,e+n)),a=new DataView(t.buffer).getUint32(0),s=8*n,r-=n},this.skipBits=function(e){var t;e<s||(e-=s,e-=8*(t=Math.floor(e/8)),r-=t,this.loadWord()),a<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),n=a>>>32-t;return 0<(s-=t)?a<<=t:0<r&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){var e;for(e=0;e<s;++e)if(0!=(a&2147483648>>>e))return a<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(ul=function(){var n,i,r=0;ul.prototype.init.call(this),this.push=function(e){var t;for(i=i?((t=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),t.set(e.data,i.byteLength),t):e.data;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&this.trigger("data",i.subarray(r+3,n-2));1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}this.trigger("data",i.subarray(r+3,n-2)),r=n-2,n+=3;break;default:n+=3}i=i.subarray(r),n-=r,r=0},this.flush=function(){i&&3<i.byteLength&&this.trigger("data",i.subarray(r+3)),i=null,r=0,this.trigger("done")}}).prototype=new uo,cl={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(ll=function(){var n,i,r,a,s,o,y,t=new ul;ll.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(i=e.trackId,r=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:i,pts:r,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=s(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),this.flush=function(){t.flush()},y=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},s=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},o=function(e){var t,n,i,r,a,s,o,l,u,c,d,h,f,p=0,m=0,g=0,v=0,_=1;if(n=(t=new hl(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),cl[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==a?8:12,f=0;f<d;f++)t.readBoolean()&&y(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),o=t.readUnsignedExpGolomb(),f=0;f<o;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(_=h[0]/h[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(l+1)-2*p-2*m)*_),height:(2-c)*(u+1)*16-2*g-2*v}}}).prototype=new uo;var fl,pl={H264Stream:ll,NalByteStream:ul},ml=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],gl=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},vl={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return ml[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=gl(e.subarray(10,14)));do{if((n=gl(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r)))break;var a=i.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}}t+=10,t+=n}while(t<e.byteLength);return null}};(fl=function(){var o=new Uint8Array,l=0;fl.prototype.init.call(this),this.setTimestamp=function(e){l=e},this.push=function(e){var t,n,i,r,a=0,s=0;for(o.length?(r=o.length,(o=new Uint8Array(e.byteLength+r)).set(o.subarray(0,r)),o.set(e,r)):o=e;3<=o.length-s;)if(o[s]!=="I".charCodeAt(0)||o[s+1]!=="D".charCodeAt(0)||o[s+2]!=="3".charCodeAt(0))if(255!=(255&o[s])||240!=(240&o[s+1]))s++;else{if(o.length-s<7)break;if(s+(a=vl.parseAdtsSize(o,s))>o.length)break;i={type:"audio",data:o.subarray(s,s+a),pts:l,dts:l},this.trigger("data",i),s+=a}else{if(o.length-s<10)break;if(s+(a=vl.parseId3TagSize(o,s))>o.length)break;n={type:"timed-metadata",data:o.subarray(s,s+a)},this.trigger("data",n),s+=a}t=o.length-s,o=0<t?o.subarray(s):new Uint8Array}}).prototype=new uo;var _l,yl,xl,bl,Tl=fl,Sl=pl.H264Stream,El=vl.isLikelyAacData,wl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ml=["width","height","profileIdc","levelIdc","profileCompatibility"],Al=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};(yl=function(r,a){var s=[],o=0,l=0,u=0,c=1/0;a=a||{},yl.prototype.init.call(this),this.push=function(t){Po(r,t),r&&wl.forEach(function(e){r[e]=t[e]}),s.push(t)},this.setEarliestDts=function(e){l=e-r.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){c=e},this.setAudioAppendStart=function(e){u=e},this.flush=function(){var e,t,n,i;0!==s.length&&(e=Eo(s,r,l),r.baseMediaDecodeTime=Co(r,a.keepOriginalTimestamps),So(r,e,u,c),r.samples=wo(e),n=eo.mdat(Mo(e)),s=[],t=eo.moof(o,[r]),i=new Uint8Array(t.byteLength+n.byteLength),o++,i.set(t),i.set(n,t.byteLength),Ao(r),this.trigger("data",{track:r,boxes:i})),this.trigger("done","AudioSegmentStream")}}).prototype=new uo,(_l=function(o,l){var t,n,u=0,c=[],d=[];l=l||{},_l.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(e){Po(o,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,o.sps=[e.data],Ml.forEach(function(e){o[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,o.pps=[e.data]),c.push(e)},this.flush=function(){for(var e,t,n,i,r,a;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0===c.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=co(c),(n=ho(e))[0][0].keyFrame||((t=this.getGopForFusion_(c[0],o))?(n.unshift(t),n.byteLength+=t.byteLength,n.nalCount+=t.nalCount,n.pts=t.pts,n.dts=t.dts,n.duration+=t.duration):n=fo(n)),d.length){var s;if(!(s=l.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n)))return this.gopCache_.unshift({gop:n.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ao(o),n=s}Po(o,n),o.samples=po(n),r=eo.mdat(mo(n)),o.baseMediaDecodeTime=Co(o,l.keepOriginalTimestamps),this.trigger("processedGopsInfo",n.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:n.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),i=eo.moof(u,[o]),a=new Uint8Array(i.byteLength+r.byteLength),u++,a.set(i),a.set(r,i.byteLength),this.trigger("data",{track:o,boxes:a}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){Ao(o),n=t=void 0},this.getGopForFusion_=function(e){var t,n,i,r,a,s=1/0;for(a=0;a<this.gopCache_.length;a++)i=(r=this.gopCache_[a]).gop,o.pps&&Al(o.pps[0],r.pps[0])&&o.sps&&Al(o.sps[0],r.sps[0])&&(i.dts<o.timelineStartInfo.dts||-1e4<=(t=e.dts-i.dts-i.duration)&&t<=45e3&&(!n||t<s)&&(n=r,s=t));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,o,l;for(a=e.byteLength,s=e.nalCount,o=e.duration,t=n=0;t<d.length&&n<e.length&&(i=d[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,o-=r.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=o,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,o;for(t=d.length-1,n=e.length-1,a=null,s=!1;0<=t&&0<=n;){if(i=d[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===d.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(o=s?n:a))return e;var l=e.slice(o),u=l.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){d=e}}).prototype=new uo,(bl=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps&&(this.keepOriginalTimestamps=e.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,bl.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new uo,bl.prototype.flush=function(e){var t,n,i,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Ml.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,wl.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=eo.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=t.startPts,this.keepOriginalTimestamps||(t.startTime-=o),t.startTime/=9e4,t.endTime=t.endPts,this.keepOriginalTimestamps||(t.endTime-=o),t.endTime/=9e4,s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts,this.keepOriginalTimestamps||(n.cueTime-=o),n.cueTime/=9e4,s.metadata.push(n);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(xl=function(i){var r,a,s=this,n=!0;xl.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new sl.MetadataStream,t.aacStream=new Tl,t.audioTimestampRolloverStream=new sl.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new sl.TimestampRolloverStream("timed-metadata"),t.adtsStream=new dl,t.coalesceStream=new bl(i,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new yl(a,i),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new sl.MetadataStream,n.packetStream=new sl.TransportPacketStream,n.parseStream=new sl.TransportParseStream,n.elementaryStream=new sl.ElementaryStream,n.videoTimestampRolloverStream=new sl.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new sl.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new sl.TimestampRolloverStream("timed-metadata"),n.adtsStream=new dl,n.h264Stream=new Sl,n.captionStream=new sl.CaptionStream,n.coalesceStream=new bl(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new _l(r,i),n.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new yl(a,i),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,Ao(a),i.keepOriginalTimestamps||(a.timelineStartInfo.baseMediaDecodeTime=e),t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[],t.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,Ao(r),t.captionStream.reset(),i.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=e)),t.timedMetadataTimestampRolloverStream&&t.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(n){var t=El(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new uo;var Cl,Pl,Rl={Transmuxer:xl,VideoSegmentStream:_l,AudioSegmentStream:yl,AUDIO_PROPERTIES:wl,VIDEO_PROPERTIES:Ml},Dl=Zs.parseType,kl=function(e){return new Date(1e3*e-20828448e5)},Il=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Ll={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Cl(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(i=6,r=0;r<o;r++)n=a.getUint16(i),i+=2,s.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=a.getUint16(i),i+=2,s.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:Dl(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push(Dl(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:Cl(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Cl(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:Dl(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r}(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=kl(n.getUint32(i)),i+=8,r.modificationTime=kl(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8):(r.creationTime=kl(n.getUint32(i)),i+=4,r.modificationTime=kl(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4),r.duration=n.getUint32(i),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:Cl(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Cl(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(n.streamDescriptor=Cl(e.subarray(28))[0]),n},moof:function(e){return{boxes:Cl(e)}},moov:function(e){return{boxes:Cl(e)}},mvex:function(e){return{boxes:Cl(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=kl(t.getUint32(n)),n+=8,i.modificationTime=kl(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8):(i.creationTime=kl(t.getUint32(n)),n+=4,i.modificationTime=kl(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4),i.duration=t.getUint32(n),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(t=24;r;t+=12,r--)i.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Cl(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Cl(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return Ll.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],s=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=kl(t.getUint32(n)),n+=8,i.modificationTime=kl(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8):(i.creationTime=kl(t.getUint32(n)),n+=4,i.modificationTime=kl(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4),i.duration=t.getUint32(n),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/16,i},traf:function(e){return{boxes:Cl(e)}},trak:function(e){return{boxes:Cl(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:Il(e.subarray(d,d+4))},d+=4,s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),u&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=Il(e.subarray(d,d+4)),d+=4),u&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},Ol={inspect:Cl=function(e){for(var t,n,i,r,a,s=0,o=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),c=0;c<e.length;++c)u[c]=e[c];for(t=new DataView(l);s<e.byteLength;)n=t.getUint32(s),i=Dl(e.subarray(s+4,s+8)),r=1<n?s+n:e.byteLength,(a=(Ll[i]||function(e){return{data:e}})(e.subarray(s+8,r))).size=n,a.type=i,o.push(a),s=r;return o},textify:Pl=function(e,t){var a;return t=t||0,a=new Array(2*t+1).join(" "),e.map(function(r,e){return a+r.type+"\n"+Object.keys(r).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t=a+"  "+e+": ",n=r[e];if(n instanceof Uint8Array||n instanceof Uint32Array){var i=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return i?1===i.length?t+"<"+i.join("").slice(1)+">":t+"<\n"+i.map(function(e){return a+"  "+e}).join("\n")+"\n"+a+"  >":t+"<>"}return t+JSON.stringify(n,null,2).split("\n").map(function(e,t){return 0===t?e:a+"  "+e}).join("\n")}).join("\n")+(r.boxes?"\n"+Pl(r.boxes,t+1):"")}).join("\n")},parseTfdt:Ll.tfdt,parseHdlr:Ll.hdlr,parseTfhd:Ll.tfhd,parseTrun:Ll.trun},Nl=Io,Ul=jo.CaptionStream,Fl=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},Bl=function(e,v){var i=Zs.findBox(e,["moof","traf"]),t=Zs.findBox(e,["mdat"]),_={},r=[];return t.forEach(function(e,t){var n=i[t];r.push({mdat:e,traf:n})}),r.forEach(function(e){var t,n,i,r,a,s,o,l,u=e.mdat,c=e.traf,d=Zs.findBox(c,["tfhd"]),h=Ol.parseTfhd(d[0]),f=h.trackId,p=Zs.findBox(c,["tfdt"]),m=0<p.length?Ol.parseTfdt(p[0]).baseMediaDecodeTime:0,g=Zs.findBox(c,["trun"]);v===f&&0<g.length&&(n=g,r=m,a=(i=h).defaultSampleDuration||0,s=i.defaultSampleSize||0,o=i.trackId,l=[],n.forEach(function(e){var t=Ol.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=a),void 0===e.size&&(e.size=s),e.trackId=o,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration}),l=l.concat(t)}),t=function(e,t,n){var i,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=Fl(r,t);i={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Nl(u),trackId:n},c?(i.pts=c.pts,i.dts=c.dts,s=c):(i.pts=s.pts,i.dts=s.dts),l.push(i)}return l}(u,l,f),_[f]||(_[f]=[]),_[f]=_[f].concat(t))}),_},$l={generator:eo,probe:Zs,Transmuxer:Rl.Transmuxer,AudioSegmentStream:Rl.AudioSegmentStream,VideoSegmentStream:Rl.VideoSegmentStream,CaptionParser:function(){var t,l,u,c,d,e=!1;this.isInitialized=function(){return e},this.init=function(){t=new Ul,e=!0,t.on("data",function(e){e.startTime=e.startPts/c,e.endTime=e.endPts/c,d.captions.push(e),d.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||u===e[0]&&c===t[u])},this.parse=function(e,t,n){var i,r,a,s;if(!this.isInitialized())return null;if(!t||!n)return null;if(this.isNewInit(t,n))u=t[0],c=n[u];else if(!u||!c)return l.push(e),null;for(;0<l.length;){var o=l.shift();this.parse(o,t,n)}return r=e,s=c,null!==(i=(a=u)?{seiNals:Bl(r,a)[a],timescale:s}:null)&&i.seiNals?(this.pushNals(i.seiNals),this.flushStream(),d):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=function(){d.captions=[],d.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){l=[],c=u=null,d?this.clearParsedCaptions():d={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}}.CaptionParser,jl=function(e){var t=31&e[1];return t<<=8,t|=e[2]},Vl=function(e){return!!(64&e[1])},Hl=function(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t},zl=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Gl={parseType:function(e,t){var n=jl(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Vl(e),n=4+Hl(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Vl(e),i=4+Hl(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var s=i+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:Vl,parsePesType:function(e,t){switch(t[jl(e)]){case Vo.H264_STREAM_TYPE:return"video";case Vo.ADTS_STREAM_TYPE:return"audio";case Vo.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Vl(e))return null;var t=4+Hl(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+Hl(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===zl(31&n[r+3])&&(a=!0);1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===zl(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===zl(31&n[r+3])&&(a=!0),a}},ql=Wo,Wl={};Wl.ts=Gl,Wl.aac=vl;var Yl=function(e,t,n){for(var i,r,a,s,o=0,l=188,u=!1;l<=e.byteLength;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o++,l++;else{switch(i=e.subarray(o,l),Wl.ts.parseType(i,t.pid)){case"pes":r=Wl.ts.parsePesType(i,t.table),a=Wl.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=Wl.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0)}if(u)break;o+=188,l+=188}for(o=(l=e.byteLength)-188,u=!1;0<=o;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o--,l--;else{switch(i=e.subarray(o,l),Wl.ts.parseType(i,t.pid)){case"pes":r=Wl.ts.parsePesType(i,t.table),a=Wl.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=Wl.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0)}if(u)break;o-=188,l-=188}},Xl=function(e,t,n){for(var i,r,a,s,o,l,u,c=0,d=188,h=!1,f={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{switch(i=e.subarray(c,d),Wl.ts.parseType(i,t.pid)){case"pes":if(r=Wl.ts.parsePesType(i,t.table),a=Wl.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!h&&(s=Wl.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0),!n.firstKeyFrame)){if(a&&0!==f.size){for(o=new Uint8Array(f.size),l=0;f.data.length;)u=f.data.shift(),o.set(u,l),l+=u.byteLength;Wl.ts.videoPacketContainsKeyFrame(o)&&(n.firstKeyFrame=Wl.ts.parsePesTime(o),n.firstKeyFrame.type="video"),f.size=0}f.data.push(i),f.size+=i.byteLength}}if(h&&n.firstKeyFrame)break;c+=188,d+=188}for(c=(d=e.byteLength)-188,h=!1;0<=c;)if(71!==e[c]||71!==e[d])c--,d--;else{switch(i=e.subarray(c,d),Wl.ts.parseType(i,t.pid)){case"pes":r=Wl.ts.parsePesType(i,t.table),a=Wl.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(s=Wl.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0)}if(h)break;c-=188,d-=188}},Kl=function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=188;r<e.byteLength;)if(71!==e[i]||71!==e[r])i++,r++;else{switch(n=e.subarray(i,r),Wl.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=Wl.ts.parsePat(n));break;case"pmt":t.table||(t.table=Wl.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=188,r+=188}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case Vo.H264_STREAM_TYPE:n.video=[],Xl(e,t,n),0===n.video.length&&delete n.video;break;case Vo.ADTS_STREAM_TYPE:n.audio=[],Yl(e,t,n),0===n.audio.length&&delete n.audio}}return n},Ql=function(e,t){var n;return(n=Wl.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,s=0,o=0;3<=e.length-o;){switch(Wl.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=Wl.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=Wl.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=Wl.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=Wl.aac.parseSampleRate(t)),i++,o+=s;break;default:o++}if(n)return null}if(null===r||null===a)return null;var l=9e4/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]}}(e):Kl(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=ql(e.dts,n),e.pts=ql(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var i=t;if(void 0===i&&(i=e.video[0].dts),e.video.forEach(function(e){e.dts=ql(e.dts,i),e.pts=ql(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=ql(r.dts,i),r.pts=ql(r.pts,i),r.dtsTime=r.dts/9e4,r.ptsTime=r.dts/9e4}}}(n,t),n):null};var Zl=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Jl=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),eu=null,tu=function(){function c(e){Zl(this,c),eu||(eu=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=void 0,s=void 0,o=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=u[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,p=16843009*l[d=l[c=l[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*l[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}()),this._tables=[[eu[0][0].slice(),eu[0][1].slice(),eu[0][2].slice(),eu[0][3].slice(),eu[0][4].slice()],[eu[1][0].slice(),eu[1][1].slice(),eu[1][2].slice(),eu[1][3].slice(),eu[1][4].slice()]];var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=this._tables[0][4],o=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=l;t<4*l+28;t++)i=r[t-1],(t%l==0||8===l&&t%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%l==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],a[n]=t<=4||n<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}return c.prototype.decrypt=function(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],l=i^s[1],u=n^s[2],c=t^s[3],d=void 0,h=void 0,f=void 0,p=s.length/4-2,m=void 0,g=4,v=this._tables[1],_=v[0],y=v[1],x=v[2],b=v[3],T=v[4];for(m=0;m<p;m++)d=_[o>>>24]^y[l>>16&255]^x[u>>8&255]^b[255&c]^s[g],h=_[l>>>24]^y[u>>16&255]^x[c>>8&255]^b[255&o]^s[g+1],f=_[u>>>24]^y[c>>16&255]^x[o>>8&255]^b[255&l]^s[g+2],c=_[c>>>24]^y[o>>16&255]^x[l>>8&255]^b[255&u]^s[g+3],g+=4,o=d,l=h,u=f;for(m=0;m<4;m++)r[(3&-m)+a]=T[o>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&c]^s[g++],d=o,o=l,l=u,u=c,c=d},c}(),nu=function(){function e(){Zl(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),iu=function(t){function n(){Zl(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,nu));return e.jobs=[],e.delay=1,e.timeout_=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n}(nu),ru=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},au=function(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new tu(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0;for(o=n[0],l=n[1],u=n[2],c=n[3],m=0;m<i.length;m+=4)d=ru(i[m]),h=ru(i[m+1]),f=ru(i[m+2]),p=ru(i[m+3]),r.decrypt(d,h,f,p,s,m),s[m]=ru(s[m]^o),s[m+1]=ru(s[m+1]^l),s[m+2]=ru(s[m+2]^u),s[m+3]=ru(s[m+3]^c),o=d,l=h,u=f,c=p;return a},su=function(){function l(e,t,n,i){Zl(this,l);var r=l.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new iu,this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s)),o=r;o<a.length;o+=r)n=new Uint32Array([ru(a[o-4]),ru(a[o-3]),ru(a[o-2]),ru(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s));this.asyncStream_.push(function(){var e;i(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))})}return l.prototype.decryptChunk_=function(t,n,i,r){return function(){var e=au(t,n,i);r.set(e,t.byteOffset)}},Jl(l,null,[{key:"STEP",get:function(){return 32e3}}]),l}(),ou=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=da.buildAbsoluteURL(_.location.href,e)),da.buildAbsoluteURL(e,t))},lu=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},uu=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),cu=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},du=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},hu=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},fu=la.mergeOptions,pu=la.EventTarget,mu=la.log,gu=function(r,a){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in r.mediaGroups[e])for(var n in r.mediaGroups[e][t]){var i=r.mediaGroups[e][t][n];a(i,e,t,n)}})},vu=function(e,t){var n=fu(e,{}),i=n.playlists[t.uri];if(!i)return null;if(i.segments&&t.segments&&i.segments.length===t.segments.length&&i.mediaSequence===t.mediaSequence)return null;var r=fu(i,t);i.segments&&(r.segments=function(e,t,n){var i=t.slice();n=n||0;for(var r=Math.min(e.length,t.length+n),a=n;a<r;a++)i[a-n]=fu(e[a],i[a-n]);return i}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)),r.segments.forEach(function(e){var t,n;t=e,n=r.resolvedUri,t.resolvedUri||(t.resolvedUri=ou(n,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=ou(n,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=ou(n,t.map.uri))});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===t.uri&&(n.playlists[a]=r);return n.playlists[t.uri]=r,n},_u=function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];(e.playlists[n.uri]=n).resolvedUri=ou(e.uri,n.uri),n.id=t,n.attributes||(n.attributes={},mu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},yu=function(t){gu(t,function(e){e.uri&&(e.resolvedUri=ou(t.uri,e.uri))})},xu=function(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)},bu=function(e){function r(e,t,n){lu(this,r);var i=du(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));if(i.srcUrl=e,i.hls_=t,i.withCredentials=n,!i.srcUrl)throw new Error("A non-empty playlist URL is required");return i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:ou(i.master.uri,i.media().uri),withCredentials:i.withCredentials},function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)}))}),i}return cu(r,pu),uu(r,[{key:"playlistRequestError",value:function(e,t,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var n=this;this.request=null,this.state="HAVE_METADATA";var i=new xa;i.push(e.responseText),i.end(),i.manifest.uri=t,i.manifest.attributes=i.manifest.attributes||{};var r=vu(this.master,i.manifest);this.targetDuration=i.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[i.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(_.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=_.setTimeout(function(){n.trigger("mediaupdatetimeout")},xu(this.media(),!!r))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),_.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(n){var i=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}var e=!this.media_||n.uri!==this.media_.uri;if(this.master.playlists[n.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e){if(this.state="SWITCHING_MEDIA",this.request){if(ou(this.master.uri,n.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:ou(this.master.uri,n.uri),withCredentials:this.withCredentials},function(e,t){if(i.request){if(e)return i.playlistRequestError(i.request,n.uri,r);i.haveMetadata(t,n.uri),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),_.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;_.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=_.setTimeout(function(){return t.load()},i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"HLS playlist request error at URL: "+i.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");var n=new xa;return n.push(t.responseText),n.end(),i.state="HAVE_MASTER",n.manifest.uri=i.srcUrl,n.manifest.playlists?(i.master=n.manifest,_u(i.master),yu(i.master),i.trigger("loadedplaylist"),void(i.request||i.media(n.manifest.playlists[0]))):(i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:_.location.href,playlists:[{uri:i.srcUrl,id:0}]},i.master.playlists[i.srcUrl]=i.master.playlists[0],i.master.playlists[0].resolvedUri=i.srcUrl,i.master.playlists[0].attributes=i.master.playlists[0].attributes||{},i.haveMetadata(t,i.srcUrl),i.trigger("loadedmetadata"))}})}}]),r}(),Tu=la.createTimeRange,Su=function(e,t,n){var i,r;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t)).precise?i.result:(r=function(e,t){for(var n=0,i=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?r.result:i.result+n},Eu=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return _.Infinity}return Su(e,t,n)},wu=function(e,t,n){var i=0;if(n<t){var r=[n,t];t=r[0],n=r[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)i+=e.targetDuration;t=0}for(var s=t;s<n;s++)i+=e.segments[s].duration;return i},Mu=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,n=e.segments[t].duration||e.targetDuration,i=n+2*e.targetDuration;t--&&!(i<=(n+=e.segments[t].duration)););return Math.max(0,t)},Au=function(e,t,n){if(!e||!e.segments)return null;if(e.endList)return Eu(e);if(null===t)return null;t=t||0;var i=n?Mu(e):e.segments.length;return Su(e,e.mediaSequence+i,t)},Cu=function(e){return e-Math.floor(e)==0},Pu=function(e,t){if(Cu(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,i=1;i<=n;i++){var r=Math.pow(10,i),a=t*r;if(Cu(a)||i===n)return(a+e)/r}},Ru=Pu.bind(null,1),Du=Pu.bind(null,-1),ku=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Iu=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Lu=function(e){var t=ku(e);return!e.disabled&&!t},Ou=function(e,t){return t.attributes&&t.attributes[e]},Nu=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Lu(e)&&(e.attributes.BANDWIDTH||0)<n}).length},Uu={duration:Eu,seekable:function(e,t){var n=t||0,i=Au(e,t,!0);return null===i?Tu():Tu(n,i)},safeLiveIndex:Mu,getMediaInfoForTime:function(e,t,n,i){var r=void 0,a=void 0,s=e.segments.length,o=t-i;if(o<0){if(0<n)for(r=n-1;0<=r;r--)if(a=e.segments[r],0<(o+=Du(a.duration)))return{mediaIndex:r,startTime:i-wu(e,n,r)};return{mediaIndex:0,startTime:t}}if(n<0){for(r=n;r<0;r++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(r=n;r<s;r++)if(a=e.segments[r],(o-=Ru(a.duration))<0)return{mediaIndex:r,startTime:i+wu(e,n,r)};return{mediaIndex:s-1,startTime:t}},isEnabled:Lu,isDisabled:function(e){return e.disabled},isBlacklisted:ku,isIncompatible:Iu,playlistEnd:Au,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Ou,estimateSegmentRequestTime:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return Ou("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:Nu},Fu=la.xhr,Bu=la.mergeOptions,$u=function(){return function e(t,i){t=Bu({timeout:45e3},t);var n=e.beforeRequest||la.Hls.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(t);r&&(t=r)}var a=Fu(t,function(e,t){var n=a.response;!e&&n&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=n.byteLength||n.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t.headers&&(a.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(a.timedout=!0),e||a.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(a&&(n||a.responseText)))),i(e,a)}),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}},ju=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Vu=function(e){return 32<=e&&e<126?String.fromCharCode(e):"."},Hu=function(n){var i={};return Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[e]=t}),i},zu=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Gu=function(e){for(var t=Array.prototype.slice.call(e),n="",i=0;i<t.length/16;i++)n+=t.slice(16*i,16*i+16).map(ju).join("")+" "+t.slice(16*i,16*i+16).map(Vu).join("")+"\n";return n},qu=Object.freeze({createTransferableMessage:Hu,initSegmentId:zu,hexDump:Gu,tagDump:function(e){var t=e.bytes;return Gu(t)},textRanges:function(e){var t,n,i="",r=void 0;for(r=0;r<e.length;r++)i+=(n=r,(t=e).start(n)+"-"+t.end(n)+" ");return i}}),Wu=function(e,t,n,i){var r=void 0;if("stream"===t){r=new Date(1e3*i+n.getTime());var a=e.toISOString(),s=n.toISOString(),o=r.toISOString();return s<=a&&a<=o}if("player"===t)return r=i+n,n<=e&&e<=r},Yu=function(e,t,n){if(!n.segments||0===n.segments.length)return null;if("player"!==t&&"stream"!==t)return null;for(var i=0,r=0;r<n.segments.length;r++){var a=n.segments[r],s=i+a.duration,o=void 0,l=void 0;l="player"===t?(o=a.start,i):(o=a.dateTimeObject,a.dateTimeObject);var u=void 0!==a.start&&void 0!==a.end&&Wu(e,t,o,a.end-a.start),c=Wu(e,t,l,a.duration);if(u)return{segment:a,estimatedStart:l,type:"accurate"};if(c)return{segment:a,estimatedStart:l,type:"estimate"};i=s}return null},Xu=function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,r=e.callback;if(!r)throw new Error("getStreamTime: callback must be provided");if(!t||void 0===i)return r({message:"getStreamTime: playlist and time must be provided"});var a=Yu(i,"player",t);if(!a)return r({message:"valid streamTime was not found"});if("estimate"===a.type)return r({message:"Accurate streamTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:i};return a.segment.dateTimeObject&&(s.programDateTime=a.segment.dateTimeObject.toISOString()),r(null,s)},Ku=function e(t){var n=t.streamTime,i=t.playlist,r=t.retryCount,a=void 0===r?2:r,s=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,u=t.tech,c=t.callback;if(!c)throw new Error("seekToStreamTime: callback must be provided");if(void 0===n||!i||!s)return c({message:"seekToStreamTime: streamTime, seekTo and playlist must be provided"});if(!i.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var d=function(e,t){var n=void 0;try{n=new Date(e)}catch(e){return null}return Yu(n,"stream",t)}(n,i);if(!d)return c({message:n+" was not found in the stream"});if("estimate"===d.type)return 0===a?c({message:n+" is not buffered yet. Try again"}):e({streamTime:n,playlist:i,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:c});var h=d.segment,f=function(e,t){var n=void 0,i=void 0;try{n=new Date(e),i=new Date(t)}catch(e){}var r=n.getTime();return(i.getTime()-r)/1e3}(h.dateTimeObject,n),p=h.start+f;u.one("seeked",function(){return c(null,u.currentTime())}),l&&u.pause(),s(p)},Qu=function(e,t){var n=[],i=void 0;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return la.createTimeRanges(n)},Zu=function(e,n){return Qu(e,function(e,t){return e-1/30<=n&&n<=t+1/30})},Ju=function(e,t){return Qu(e,function(e){return t<=e-1/30})},ec=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},tc=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},nc=function(e,t,n){var i=void 0,r=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime<=t&&r.endTime>=e&&n.removeCue(r)},ic=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},rc=function(e,t,n){var r=_.WebKitDataCue||_.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),n){var a=ic(e.mediaSource_.duration);if(n.forEach(function(e){var i=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var t,n=new r(i,i,e.value||e.url||e.data||"");n.frame=e,n.value=e,t=n,Object.defineProperties(t.frame,{id:{get:function(){return la.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return la.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return la.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}}),this.metadataTrack_.addCue(n)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var i=e.metadataTrack_.cues,s=[],o=0;o<i.length;o++)i[o]&&s.push(i[o]);var l=s.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),u=Object.keys(l).sort(function(e,t){return Number(e)-Number(t)});u.forEach(function(e,t){var n=l[e],i=Number(u[t+1])||a;n.forEach(function(e){e.endTime=i})})}}},ac="undefined"!=typeof window?window:{},sc="undefined"==typeof Symbol?"__target":Symbol(),oc="application/javascript",lc=ac.BlobBuilder||ac.WebKitBlobBuilder||ac.MozBlobBuilder||ac.MSBlobBuilder,uc=ac.URL||ac.webkitURL||uc&&uc.msURL,cc=ac.Worker;function dc(r,a){return function(e){var t=this;if(!a)return new cc(r);if(cc&&!e){var n=mc(a.toString().replace(/^function.+?{/,"").slice(0,-1));return this[sc]=new cc(n),function(e,t){if(!e||!t)return;var n=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&uc.revokeObjectURL(e.objURL),n.call(e)}}(this[sc],n),this[sc]}var i={postMessage:function(e){t.onmessage&&setTimeout(function(){t.onmessage({data:e,target:i})})}};a.call(i),this.postMessage=function(e){setTimeout(function(){i.onmessage({data:e,target:t})})},this.isThisThread=!0}}if(cc){var hc,fc=mc("self.onmessage = function () {}"),pc=new Uint8Array(1);try{(hc=new cc(fc)).postMessage(pc,[pc.buffer])}catch(e){cc=null}finally{uc.revokeObjectURL(fc),hc&&hc.terminate()}}function mc(t){try{return uc.createObjectURL(new Blob([t],{type:oc}))}catch(e){var n=new lc;return n.append(t),uc.createObjectURL(n.getBlob(type))}}var gc=new dc("./transmuxer-worker.worker.js",function(e,t){var Ot=this;!function(){var o,t,n,r,a,i,e,s,l,u,c,d,h,f,p,m,g,v,_,y,x,b,T,S,E,w,M,A,C,P,R,D,k,I,L,O,N,U,F,B,$=Math.pow(2,32)-1;!function(){var e;if(b={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in b)b.hasOwnProperty(e)&&(b[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);T=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),E=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),S=new Uint8Array([0,0,0,1]),w=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),M=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:w,audio:M},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),k=D,I=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),L=D,C=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),o=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},t=function(){return o(b.dinf,o(b.dref,R))},n=function(e){return o(b.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},p=function(e){return o(b.hdlr,A[e])},f=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),o(b.mdhd,t)},h=function(e){return o(b.mdia,f(e),p(e.type),i(e))},a=function(e){return o(b.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},i=function(e){return o(b.minf,"video"===e.type?o(b.vmhd,C):o(b.smhd,P),t(),g(e))},e=function(e,t){for(var n=[],i=t.length;i--;)n[i]=_(t[i]);return o.apply(null,[b.moof,a(e)].concat(n))},s=function(e){for(var t=e.length,n=[];t--;)n[t]=c(e[t]);return o.apply(null,[b.moov,u(4294967295)].concat(n).concat(l(e)))},l=function(e){for(var t=e.length,n=[];t--;)n[t]=y(e[t]);return o.apply(null,[b.mvex].concat(n))},u=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(b.mvhd,t)},m=function(e){var t,n,i=e.samples||[],r=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,r[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return o(b.sdtp,r)},g=function(e){return o(b.stbl,v(e),o(b.stts,L),o(b.stsc,k),o(b.stsz,I),o(b.stco,D))},v=function(e){return o(b.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?O(e):N(e))},O=function(e){var t,n=e.sps||[],i=e.pps||[],r=[],a=[];for(t=0;t<n.length;t++)r.push((65280&n[t].byteLength)>>>8),r.push(255&n[t].byteLength),r=r.concat(Array.prototype.slice.call(n[t]));for(t=0;t<i.length;t++)a.push((65280&i[t].byteLength)>>>8),a.push(255&i[t].byteLength),a=a.concat(Array.prototype.slice.call(i[t]));return o(b.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(b.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(r).concat([i.length]).concat(a))),o(b.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},N=function(e){return o(b.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),n(e))},d=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return o(b.tkhd,t)},_=function(e){var t,n,i,r,a,s;return t=o(b.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/($+1)),s=Math.floor(e.baseMediaDecodeTime%($+1)),n=o(b.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),92,"audio"===e.type?(i=x(e,92),o(b.traf,t,n,i)):(r=m(e),i=x(e,r.length+92),o(b.traf,t,n,i,r))},c=function(e){return e.duration=e.duration||4294967295,o(b.trak,d(e),h(e))},y=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),o(b.trex,t)},B=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},F=function(e,t){var n,i,r,a;for(t+=20+16*(i=e.samples||[]).length,n=B(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return o(b.trun,new Uint8Array(n))},U=function(e,t){var n,i,r,a;for(t+=20+8*(i=e.samples||[]).length,n=B(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return o(b.trun,new Uint8Array(n))},x=function(e,t){return"audio"===e.type?U(e,t):F(e,t)};var j,V,H,z,G,q={ftyp:r=function(){return o(b.ftyp,T,S,T,E)},mdat:function(e){return o(b.mdat,e)},moof:e,moov:s,initSegment:function(e){var t,n=r(),i=s(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}},W=function(e){return e>>>0};H=function(e){return j(e,["moov","trak"]).reduce(function(e,t){var n,i,r,a,s;return(n=j(t,["tkhd"])[0])?(i=n[0],a=W(n[r=0===i?12:20]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),(s=j(t,["mdia","mdhd"])[0])?(r=0===(i=s[0])?12:20,e[a]=W(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),e):null):null},{})},z=function(r,e){var t,n,i;return t=j(e,["moof","traf"]),n=[].concat.apply([],t.map(function(i){return j(i,["tfhd"]).map(function(e){var t,n;return t=W(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),n=r[t]||9e4,(j(i,["tfdt"]).map(function(e){var t,n;return t=e[0],n=W(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=W(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0]||1/0)/n})})),i=Math.min.apply(null,n),isFinite(i)?i:0},G=function(e){var t=j(e,["moov","trak"]),o=[];return t.forEach(function(e){var t=j(e,["mdia","hdlr"]),s=j(e,["tkhd"]);t.forEach(function(e,t){var n,i,r=V(e.subarray(8,12)),a=s[t];"vide"===r&&(i=0===(n=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?n.getUint32(12):n.getUint32(20),o.push(i))})}),o};var Y={findBox:j=function(e,t){var n,i,r,a,s,o=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=W(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),r=V(e.subarray(n+4,n+8)),a=1<i?n+i:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(n+8,a)):(s=j(e.subarray(n+8,a),t.slice(1))).length&&(o=o.concat(s))),n=a;return o},parseType:V=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},timescale:H,startTime:z,videoTrackIds:G},X=function(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var n;return!!a[e]&&(n=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(n,1),-1<n)},this.trigger=function(e){var t,n,i,r;if(t=a[e])if(2===arguments.length)for(i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(i=t.length,n=0;n<i;++n)t[n].apply(this,r)}},this.dispose=function(){a={}}}};X.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},X.prototype.push=function(e){this.trigger("data",e)},X.prototype.flush=function(e){this.trigger("done",e)};var K,Q,Z,J,ee,te,ne,ie=X,re=function(e){var t,n,i=[],r=[];for(t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.push(i),r},ae=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},se=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},oe=function(e,t){var n,i,r,a,s,o,l,u=t||0,c=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)s=a[i],o=s,l=void 0,(l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=u,l.compositionTimeOffset=o.pts-o.dts,l.duration=o.duration,l.size=4*o.length,l.size+=o.byteLength,o.keyFrame&&(l.flags.dependsOn=2,l.flags.isNonSyncSample=0),u+=(r=l).size,c.push(r);return c},le=function(e){var t,n,i,r,a,s,o=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)s=a[i],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c},ue=[33,16,5,32,164,27],ce=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],de=function(e){for(var t=[];e--;)t.push(0);return t},he={96e3:[ue,[227,64],de(154),[56]],88200:[ue,[231],de(170),[56]],64e3:[ue,[248,192],de(240),[56]],48e3:[ue,[255,192],de(268),[55,148,128],de(54),[112]],44100:[ue,[255,192],de(268),[55,163,128],de(84),[112]],32e3:[ue,[255,192],de(268),[55,234],de(226),[112]],24e3:[ue,[255,192],de(268),[55,255,128],de(268),[111,112],de(126),[224]],16e3:[ue,[255,192],de(268),[55,255,128],de(268),[111,255],de(269),[223,108],de(195),[1,192]],12e3:[ce,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,253,128],de(259),[56]],11025:[ce,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,255,192],de(268),[55,175,128],de(108),[112]],8e3:[ce,de(268),[3,121,16],de(47),[7]]},fe=(K=he,Object.keys(K).reduce(function(e,t){return e[t]=new Uint8Array(K[t].reduce(function(e,t){return e.concat(t)},[])),e},{}));te=function(e,t){return Q(ee(e,t))},ne=function(e,t){return Z(J(e),t)};Q=function(e){return 9e4*e},Z=function(e,t){return e*t},J=function(e){return e/9e4},ee=function(e,t){return e/t};var pe=te,me=ne,ge=function(e,t,n,i){var r,a,s,o,l=0,u=0,c=0;if(t.length&&(r=pe(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(9e4/(e.samplerate/1024)),n&&i&&(l=r-Math.max(n,i),c=(u=Math.floor(l/a))*a),!(u<1||45e3<c))){for((s=fe[e.samplerate])||(s=t[0].data),o=0;o<u;o++)t.splice(o,0,{data:s});e.baseMediaDecodeTime-=Math.floor(me(c,e.samplerate))}},ve=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},_e=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},ye=function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r},xe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},be=function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},Te=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Se=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n},Ee=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},we=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},Me=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},Ae=4,Ce=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Ie(0,0),new Ie(0,1),new Ie(1,0),new Ie(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};(Ce.prototype=new ie).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Se(e.escapedRBSP)).payloadType===Ae&&(n=Ee(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=we(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Ce.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},Ce.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Ce.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Ce.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Ce.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var Pe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Re=function(e){return null===e?"":(e=Pe[e]||e,String.fromCharCode(e))},De=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ke=function(){for(var e=[],t=15;t--;)e.push("");return e},Ie=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ke();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ke();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ke()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=Re((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Re((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=De.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=Re(i),a+=Re(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ie.prototype=new ie,Ie.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ie.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ke(),this.nonDisplayed_=ke(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ie.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ie.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},Ie.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},Ie.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},Ie.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},Ie.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},Ie.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},Ie.prototype.isNormalChar=function(e){return 32<=e&&e<=127},Ie.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ke(),this.displayed_=ke()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ie.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},Ie.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Ie.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Ie.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Ie.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ie.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Le={CaptionStream:Ce,Cea608Stream:Ie},Oe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ne=function(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e},Ue=function e(t){var n,i;e.prototype.init.call(this),this.type_=t,this.push=function(e){e.type===this.type_&&(void 0===i&&(i=e.dts),e.dts=Ne(e.dts,i),e.pts=Ne(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.discontinuity=function(){n=i=void 0}};Ue.prototype=new ie;var Fe,Be=Ue,$e=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},je=function(e,t,n){return decodeURIComponent($e(e,t,n))},Ve=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},He={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.value=je(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.url=je(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape($e(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Fe=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},u=0,c=[],d=0;if(Fe.prototype.init.call(this),this.dispatchType=Oe.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,i,r,a;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(e),d+=e.data.byteLength,1===c.length&&(u=Ve(e.data.subarray(6,10)),u+=10),!(d<u)){for(t={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<u;)t.data.set(c[0].data.subarray(0,u-a),a),a+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();n=10,64&t.data[5]&&(n+=4,n+=Ve(t.data.subarray(10,14)),u-=Ve(t.data.subarray(16,20)));do{if((i=Ve(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((r={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+i+10)}).key=r.id,He[r.id]&&(He[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var s=r.data,o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;o*=4,o+=3&s[7],r.timeStamp=o,void 0===t.pts&&void 0===t.dts&&(t.pts=r.timeStamp,t.dts=r.timeStamp),this.trigger("timestamp",r)}t.frames.push(r),n+=10,n+=i}while(n<u);this.trigger("data",t)}}}).prototype=new ie;var ze,Ge,qe,We=Fe,Ye=Be;(ze=function(){var r=new Uint8Array(188),a=0;ze.prototype.init.call(this),this.push=function(e){var t,n=0,i=188;for(a?((t=new Uint8Array(e.byteLength+a)).set(r.subarray(0,a)),t.set(e,a),a=0):t=e;i<t.byteLength;)71!==t[n]||71!==t[i]?(n++,i++):(this.trigger("data",t.subarray(n,i)),n+=188,i+=188);n<t.byteLength&&(r.set(t.subarray(n),0),a=t.byteLength-n)},this.flush=function(){188===a&&71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")}}).prototype=new ie,(Ge=function(){var i,r,a,s;Ge.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,i=function(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),"pat"===t.type?r(e.subarray(n),t):a(e.subarray(n),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],s.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=s.pmtPid},a=function(e,t){var n,i;if(1&e[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var r=e[i],a=(31&e[i+1])<<8|e[i+2];r===Oe.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=a:r===Oe.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=a:r===Oe.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][a]=r),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=s.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",i(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",i(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Oe.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Oe.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new ie,Ge.STREAM_TYPES={h264:27,adts:15},(qe=function(){var h=this,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},s=function(e,t,n){var i,r,a=new Uint8Array(e.size),s={type:t},o=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,o=0;o<e.data.length;o++)r=e.data[o],a.set(r.data,l),l+=r.data.byteLength;var u,c,d;u=a,(c=s).packetLength=6+(u[4]<<8|u[5]),c.dataAlignmentIndicator=0!=(4&u[6]),192&(d=u[7])&&(c.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,c.pts*=4,c.pts+=(6&u[13])>>>1,c.dts=c.pts,64&d&&(c.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,c.dts*=4,c.dts+=(6&u[18])>>>1)),c.data=u.subarray(9+u[8]),i="video"===t||s.packetLength<=e.size,(n||i)&&(e.size=0,e.data.length=0),i&&h.trigger("data",s)}};qe.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,t;switch(n.streamType){case Oe.H264_STREAM_TYPE:case Oe.H264_STREAM_TYPE:e=i,t="video";break;case Oe.ADTS_STREAM_TYPE:e=r,t="audio";break;case Oe.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},t=n.programMapTable;null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),h.trigger("data",e)}})[n.type]()},this.flush=function(){s(i,"video"),s(r,"audio"),s(a,"timed-metadata"),this.trigger("done")}}).prototype=new ie;var Xe={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ze,TransportParseStream:Ge,ElementaryStream:qe,TimestampRolloverStream:Ye,CaptionStream:Le.CaptionStream,Cea608Stream:Le.Cea608Stream,MetadataStream:We};for(var Ke in Oe)Oe.hasOwnProperty(Ke)&&(Xe[Ke]=Oe[Ke]);var Qe,Ze=Xe,Je=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Qe=function(){var u;Qe.prototype.init.call(this),this.push=function(e){var t,n,i,r,a,s,o=0,l=0;if("audio"===e.type)for(u?(r=u,(u=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),u.set(e.data,r.byteLength)):u=e.data;o+5<u.length;)if(255===u[o]&&240==(246&u[o+1])){if(n=2*(1&~u[o+1]),t=(3&u[o+3])<<11|u[o+4]<<3|(224&u[o+5])>>5,s=9e4*(a=1024*(1+(3&u[o+6])))/Je[(60&u[o+2])>>>2],i=o+t,u.byteLength<i)return;if(this.trigger("data",{pts:e.pts+l*s,dts:e.dts+l*s,sampleCount:a,audioobjecttype:1+(u[o+2]>>>6&3),channelcount:(1&u[o+2])<<2|(192&u[o+3])>>>6,samplerate:Je[(60&u[o+2])>>>2],samplingfrequencyindex:(60&u[o+2])>>>2,samplesize:16,data:u.subarray(o+7+n,i)}),u.byteLength===i)return void(u=void 0);l++,u=u.subarray(i)}else o++},this.flush=function(){this.trigger("done")}}).prototype=new ie;var et,tt,nt,it=Qe,rt=function(i){var r=i.byteLength,a=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var e=i.byteLength-r,t=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");t.set(i.subarray(e,e+n)),a=new DataView(t.buffer).getUint32(0),s=8*n,r-=n},this.skipBits=function(e){var t;e<s||(e-=s,e-=8*(t=Math.floor(e/8)),r-=t,this.loadWord()),a<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),n=a>>>32-t;return 0<(s-=t)?a<<=t:0<r&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){var e;for(e=0;e<s;++e)if(0!=(a&2147483648>>>e))return a<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(tt=function(){var n,i,r=0;tt.prototype.init.call(this),this.push=function(e){var t;for(i=i?((t=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),t.set(e.data,i.byteLength),t):e.data;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&this.trigger("data",i.subarray(r+3,n-2));1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}this.trigger("data",i.subarray(r+3,n-2)),r=n-2,n+=3;break;default:n+=3}i=i.subarray(r),n-=r,r=0},this.flush=function(){i&&3<i.byteLength&&this.trigger("data",i.subarray(r+3)),i=null,r=0,this.trigger("done")}}).prototype=new ie,nt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(et=function(){var n,i,r,a,s,o,y,t=new tt;et.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(i=e.trackId,r=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:i,pts:r,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=s(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),this.flush=function(){t.flush()},y=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},s=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},o=function(e){var t,n,i,r,a,s,o,l,u,c,d,h,f,p=0,m=0,g=0,v=0,_=1;if(n=(t=new rt(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),nt[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==a?8:12,f=0;f<d;f++)t.readBoolean()&&y(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),o=t.readUnsignedExpGolomb(),f=0;f<o;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(_=h[0]/h[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(l+1)-2*p-2*m)*_),height:(2-c)*(u+1)*16-2*g-2*v}}}).prototype=new ie;var at,st={H264Stream:et,NalByteStream:tt},ot=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},lt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},ut=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n};(at=function(){var o=new Uint8Array,l=0;at.prototype.init.call(this),this.setTimestamp=function(e){l=e},this.push=function(e){var t,n,i,r,a=0,s=0;for(o.length?(r=o.length,(o=new Uint8Array(e.byteLength+r)).set(o.subarray(0,r)),o.set(e,r)):o=e;3<=o.length-s;)if(o[s]!=="I".charCodeAt(0)||o[s+1]!=="D".charCodeAt(0)||o[s+2]!=="3".charCodeAt(0))if(255!=(255&o[s])||240!=(240&o[s+1]))s++;else{if(o.length-s<7)break;if(s+(a=ut(o,s))>o.length)break;i={type:"audio",data:o.subarray(s,s+a),pts:l,dts:l},this.trigger("data",i),s+=a}else{if(o.length-s<10)break;if(s+(a=lt(o,s))>o.length)break;n={type:"timed-metadata",data:o.subarray(s,s+a)},this.trigger("data",n),s+=a}t=o.length-s,o=0<t?o.subarray(s):new Uint8Array}}).prototype=new ie;var ct,dt,ht,ft,pt=at,mt=st.H264Stream,gt=ot,vt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],_t=["width","height","profileIdc","levelIdc","profileCompatibility"],yt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};(dt=function(r,a){var s=[],o=0,l=0,u=0,c=1/0;a=a||{},dt.prototype.init.call(this),this.push=function(t){Te(r,t),r&&vt.forEach(function(e){r[e]=t[e]}),s.push(t)},this.setEarliestDts=function(e){l=e-r.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){c=e},this.setAudioAppendStart=function(e){u=e},this.flush=function(){var e,t,n,i;0!==s.length&&(e=ve(s,r,l),r.baseMediaDecodeTime=be(r,a.keepOriginalTimestamps),ge(r,e,u,c),r.samples=_e(e),n=q.mdat(ye(e)),s=[],t=q.moof(o,[r]),i=new Uint8Array(t.byteLength+n.byteLength),o++,i.set(t),i.set(n,t.byteLength),xe(r),this.trigger("data",{track:r,boxes:i})),this.trigger("done","AudioSegmentStream")}}).prototype=new ie,(ct=function(o,l){var t,n,u=0,c=[],d=[];l=l||{},ct.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(e){Te(o,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,o.sps=[e.data],_t.forEach(function(e){o[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,o.pps=[e.data]),c.push(e)},this.flush=function(){for(var e,t,n,i,r,a;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0===c.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=re(c),(n=ae(e))[0][0].keyFrame||((t=this.getGopForFusion_(c[0],o))?(n.unshift(t),n.byteLength+=t.byteLength,n.nalCount+=t.nalCount,n.pts=t.pts,n.dts=t.dts,n.duration+=t.duration):n=se(n)),d.length){var s;if(!(s=l.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n)))return this.gopCache_.unshift({gop:n.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");xe(o),n=s}Te(o,n),o.samples=oe(n),r=q.mdat(le(n)),o.baseMediaDecodeTime=be(o,l.keepOriginalTimestamps),this.trigger("processedGopsInfo",n.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:n.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),i=q.moof(u,[o]),a=new Uint8Array(i.byteLength+r.byteLength),u++,a.set(i),a.set(r,i.byteLength),this.trigger("data",{track:o,boxes:a}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){xe(o),n=t=void 0},this.getGopForFusion_=function(e){var t,n,i,r,a,s=1/0;for(a=0;a<this.gopCache_.length;a++)i=(r=this.gopCache_[a]).gop,o.pps&&yt(o.pps[0],r.pps[0])&&o.sps&&yt(o.sps[0],r.sps[0])&&(i.dts<o.timelineStartInfo.dts||-1e4<=(t=e.dts-i.dts-i.duration)&&t<=45e3&&(!n||t<s)&&(n=r,s=t));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,o,l;for(a=e.byteLength,s=e.nalCount,o=e.duration,t=n=0;t<d.length&&n<e.length&&(i=d[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,o-=r.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=o,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,o;for(t=d.length-1,n=e.length-1,a=null,s=!1;0<=t&&0<=n;){if(i=d[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===d.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(o=s?n:a))return e;var l=e.slice(o),u=l.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){d=e}}).prototype=new ie,(ft=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps&&(this.keepOriginalTimestamps=e.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ft.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new ie,ft.prototype.flush=function(e){var t,n,i,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,_t.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,vt.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=q.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=t.startPts,this.keepOriginalTimestamps||(t.startTime-=o),t.startTime/=9e4,t.endTime=t.endPts,this.keepOriginalTimestamps||(t.endTime-=o),t.endTime/=9e4,s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts,this.keepOriginalTimestamps||(n.cueTime-=o),n.cueTime/=9e4,s.metadata.push(n);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(ht=function(i){var r,a,s=this,n=!0;ht.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new Ze.MetadataStream,t.aacStream=new pt,t.audioTimestampRolloverStream=new Ze.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Ze.TimestampRolloverStream("timed-metadata"),t.adtsStream=new it,t.coalesceStream=new ft(i,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new dt(a,i),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new Ze.MetadataStream,n.packetStream=new Ze.TransportPacketStream,n.parseStream=new Ze.TransportParseStream,n.elementaryStream=new Ze.ElementaryStream,n.videoTimestampRolloverStream=new Ze.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new Ze.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new Ze.TimestampRolloverStream("timed-metadata"),n.adtsStream=new it,n.h264Stream=new mt,n.captionStream=new Ze.CaptionStream,n.coalesceStream=new ft(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new ct(r,i),n.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new dt(a,i),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,xe(a),i.keepOriginalTimestamps||(a.timelineStartInfo.baseMediaDecodeTime=e),t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[],t.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,xe(r),t.captionStream.reset(),i.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=e)),t.timedMetadataTimestampRolloverStream&&t.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(n){var t=gt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new ie;var xt,bt,Tt={Transmuxer:ht,VideoSegmentStream:ct,AudioSegmentStream:dt,AUDIO_PROPERTIES:vt,VIDEO_PROPERTIES:_t},St=Y.parseType,Et=function(e){return new Date(1e3*e-20828448e5)},wt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Mt={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:xt(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(i=6,r=0;r<o;r++)n=a.getUint16(i),i+=2,s.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=a.getUint16(i),i+=2,s.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:St(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push(St(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:xt(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:xt(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:St(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r}(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=Et(n.getUint32(i)),i+=8,r.modificationTime=Et(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8):(r.creationTime=Et(n.getUint32(i)),i+=4,r.modificationTime=Et(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4),r.duration=n.getUint32(i),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:xt(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:xt(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(n.streamDescriptor=xt(e.subarray(28))[0]),n},moof:function(e){return{boxes:xt(e)}},moov:function(e){return{boxes:xt(e)}},mvex:function(e){return{boxes:xt(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=Et(t.getUint32(n)),n+=8,i.modificationTime=Et(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8):(i.creationTime=Et(t.getUint32(n)),n+=4,i.modificationTime=Et(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4),i.duration=t.getUint32(n),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(t=24;r;t+=12,r--)i.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:xt(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:xt(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return Mt.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],s=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=Et(t.getUint32(n)),n+=8,i.modificationTime=Et(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8):(i.creationTime=Et(t.getUint32(n)),n+=4,i.modificationTime=Et(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4),i.duration=t.getUint32(n),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/16,i},traf:function(e){return{boxes:xt(e)}},trak:function(e){return{boxes:xt(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:wt(e.subarray(d,d+4))},d+=4,s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),u&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=wt(e.subarray(d,d+4)),d+=4),u&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},At={inspect:xt=function(e){for(var t,n,i,r,a,s=0,o=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),c=0;c<e.length;++c)u[c]=e[c];for(t=new DataView(l);s<e.byteLength;)n=t.getUint32(s),i=St(e.subarray(s+4,s+8)),r=1<n?s+n:e.byteLength,(a=(Mt[i]||function(e){return{data:e}})(e.subarray(s+8,r))).size=n,a.type=i,o.push(a),s=r;return o},textify:bt=function(e,t){var a;return t=t||0,a=new Array(2*t+1).join(" "),e.map(function(r,e){return a+r.type+"\n"+Object.keys(r).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t=a+"  "+e+": ",n=r[e];if(n instanceof Uint8Array||n instanceof Uint32Array){var i=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return i?1===i.length?t+"<"+i.join("").slice(1)+">":t+"<\n"+i.map(function(e){return a+"  "+e}).join("\n")+"\n"+a+"  >":t+"<>"}return t+JSON.stringify(n,null,2).split("\n").map(function(e,t){return 0===t?e:a+"  "+e}).join("\n")}).join("\n")+(r.boxes?"\n"+bt(r.boxes,t+1):"")}).join("\n")},parseTfdt:Mt.tfdt,parseHdlr:Mt.hdlr,parseTfhd:Mt.tfhd,parseTrun:Mt.trun},Ct=Me,Pt=Le.CaptionStream,Rt=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},Dt=function(e,v){var i=Y.findBox(e,["moof","traf"]),t=Y.findBox(e,["mdat"]),_={},r=[];return t.forEach(function(e,t){var n=i[t];r.push({mdat:e,traf:n})}),r.forEach(function(e){var t,n,i,r,a,s,o,l,u=e.mdat,c=e.traf,d=Y.findBox(c,["tfhd"]),h=At.parseTfhd(d[0]),f=h.trackId,p=Y.findBox(c,["tfdt"]),m=0<p.length?At.parseTfdt(p[0]).baseMediaDecodeTime:0,g=Y.findBox(c,["trun"]);v===f&&0<g.length&&(n=g,r=m,a=(i=h).defaultSampleDuration||0,s=i.defaultSampleSize||0,o=i.trackId,l=[],n.forEach(function(e){var t=At.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=a),void 0===e.size&&(e.size=s),e.trackId=o,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration}),l=l.concat(t)}),t=function(e,t,n){var i,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=Rt(r,t);i={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Ct(u),trackId:n},c?(i.pts=c.pts,i.dts=c.dts,s=c):(i.pts=s.pts,i.dts=s.dts),l.push(i)}return l}(u,l,f),_[f]||(_[f]=[]),_[f]=_[f].concat(t))}),_},kt={generator:q,probe:Y,Transmuxer:Tt.Transmuxer,AudioSegmentStream:Tt.AudioSegmentStream,VideoSegmentStream:Tt.VideoSegmentStream,CaptionParser:function(){var t,l,u,c,d,e=!1;this.isInitialized=function(){return e},this.init=function(){t=new Pt,e=!0,t.on("data",function(e){e.startTime=e.startPts/c,e.endTime=e.endPts/c,d.captions.push(e),d.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||u===e[0]&&c===t[u])},this.parse=function(e,t,n){var i,r,a,s;if(!this.isInitialized())return null;if(!t||!n)return null;if(this.isNewInit(t,n))u=t[0],c=n[u];else if(!u||!c)return l.push(e),null;for(;0<l.length;){var o=l.shift();this.parse(o,t,n)}return r=e,s=c,null!==(i=(a=u)?{seiNals:Dt(r,a)[a],timescale:s}:null)&&i.seiNals?(this.pushNals(i.seiNals),this.flushStream(),d):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=function(){d.captions=[],d.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){l=[],c=u=null,d?this.clearParsedCaptions():d={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},It=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),Lt=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=t||{},this.self=e,this.init()}return It(n,[{key:"init",value:function(){var i,e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new kt.Transmuxer(this.options),i=this.self,(e=this.transmuxer).on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,i.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){i.postMessage({action:"caption",data:e})}),e.on("done",function(e){i.postMessage({action:"done"})}),e.on("gopInfo",function(e){i.postMessage({action:"gopInfo",gopInfo:e})})}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),n}();new function(t){t.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Lt(t,e.data.options):(this.messageHandlers||(this.messageHandlers=new Lt(t)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}(Ot)}()}),vc={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},_c=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})},yc=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n={codecCount:0};return n.codecCount=t.split(",").length,n.codecCount=n.codecCount||2,(e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t))&&(n.videoCodec=e[2],n.videoObjectTypeIndicator=e[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),n.audioProfile=n.audioProfile&&n.audioProfile[2],n},xc=function(e,t,n){return e+"/"+t+'; codecs="'+n.filter(function(e){return!!e}).join(", ")+'"'},bc=function(e,t){var n,i,r=(n=t).segments&&n.segments.length&&n.segments[0].map?"mp4":"mp2t",a=(i=t.attributes||{}).CODECS?yc(i.CODECS):vc,s=t.attributes||{},o=!0,l=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&s.AUDIO){var u=e.mediaGroups.AUDIO[s.AUDIO];if(u)for(var c in o=!(l=!0),u)if(!u[c].uri&&!u[c].playlists){o=!0;break}}l&&!a.audioProfile&&(o||(a.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return yc(r.playlists[0].attributes.CODECS).audioProfile}return null}(e,s.AUDIO)),a.audioProfile||(la.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),a.audioProfile=vc.audioProfile));var d={};a.videoCodec&&(d.video=""+a.videoCodec+a.videoObjectTypeIndicator),a.audioProfile&&(d.audio="mp4a.40."+a.audioProfile);var h=xc("audio",r,[d.audio]),f=xc("video",r,[d.video]),p=xc("video",r,[d.video,d.audio]);return l?!o&&d.video?[f,h]:o||d.video?[p,h]:[h,h]:d.video?[p]:[h]},Tc=function(e){return/mp4a\.\d+.\d+/i.test(e)},Sc=function(e){return/avc1\.[\da-f]+/i.test(e)},Ec=function(e){function r(e,t){lu(this,r);var n=du(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,la.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=t,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=la.browser.IE_VERSION;var i={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){Tc(e)?n.audioCodec_=e:Sc(e)&&(n.videoCodec_=e)}),n.transmuxer_=new gc,n.transmuxer_.postMessage({action:"init",options:i}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return function(e,t,n){var i=null,r=null,a=0,s=[],o=[];if(!e&&!t)return la.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return la.createTimeRange();for(var l=e.buffered,u=t.buffered,c=l.length;c--;)s.push({time:l.start(c),type:"start"}),s.push({time:l.end(c),type:"end"});for(c=u.length;c--;)s.push({time:u.start(c),type:"start"}),s.push({time:u.end(c),type:"end"});for(s.sort(function(e,t){return e.time-t.time}),c=0;c<s.length;c++)"start"===s[c].type?2==++a&&(i=s[c].time):"end"===s[c].type&&1==--a&&(r=s[c].time),null!==i&&null!==r&&(o.push([i,r]),r=i=null);return la.createTimeRanges(o)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}return cu(r,la.EventTarget),uu(r,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,n){var i=t.player_;if(n.captions&&n.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[r]){i.tech_.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var i=this,r=["audio","video"];r.forEach(function(t){if(i[t+"Codec_"]&&!i[t+"Buffer_"]){var n=null;if(i.mediaSource_[t+"Buffer_"])(n=i.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+i[t+"Codec_"]+'"';n=function(e,t){var n=e.addSourceBuffer(t),i=Object.create(null);i.updating=!1,i.realBuffer_=n;var r=function(t){"function"==typeof n[t]?i[t]=function(){return n[t].apply(n,arguments)}:void 0===i[t]&&Object.defineProperty(i,t,{get:function(){return n[t]},set:function(e){return n[t]=e}})};for(var a in n)r(a);return i}(i.mediaSource_.nativeMediaSource_,e),i.mediaSource_[t+"Buffer_"]=n}i[t+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(e){n.addEventListener(e,function(){if("audio"!==t||!i.audioDisabled_)return"updateend"===e&&(i[t+"Buffer_"].updating=!1),r.every(function(e){return!("audio"!==e||!i.audioDisabled_)||(t===e||!i[e+"Buffer_"]||!i[e+"Buffer_"].updating)})?i.trigger(e):void 0})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(e,t,n){if(null==t||!e.length)return[];var i=Math.ceil(9e4*(t-n+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil(9e4*(t-i)),a=Math.ceil(9e4*(n-i)),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),nc(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)nc(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,i=t.data,r=t.initSegment;return e[n].segments.push(i),e[n].bytes+=i.byteLength,e[n].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),rc(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,i=void 0;if(e.bytes){i=new Uint8Array(e.bytes),e.segments.forEach(function(e){i.set(e,n),n+=e.byteLength});try{t.updating=!0,t.appendBuffer(i)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),r}(),wc=function(e){function t(){lu(this,t);var a=du(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e=void 0;for(e in a.nativeMediaSource_=new _.MediaSource,a.nativeMediaSource_)e in t.prototype||"function"!=typeof a.nativeMediaSource_[e]||(a[e]=a.nativeMediaSource_[e].bind(a.nativeMediaSource_));return a.duration_=NaN,Object.defineProperty(a,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(a,"seekable",{get:function(){return this.duration_===1/0?la.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(a,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),a.sourceBuffers=[],a.activeSourceBuffers_=[],a.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var e=a.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void a.activeSourceBuffers_.push(e)}for(var n=!1,i=!0,t=0;t<a.player_.audioTracks().length;t++){var r=a.player_.audioTracks()[t];if(r.enabled&&"main"!==r.kind){i=!(n=!0);break}}a.sourceBuffers.forEach(function(e,t){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=n;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,i=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=t?i:!i,e.audioDisabled_))return;a.activeSourceBuffers_.push(e)})},a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},a.onHlsReset_=function(){a.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},a.onHlsSegmentTimeMapping_=function(t){a.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},a),a.on("sourceopen",function(e){var t=h.querySelector('[src="'+a.url_+'"]');t&&(a.player_=la(t.parentNode),a.player_&&(a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)))}),a.on("sourceended",function(e){for(var t=ic(a.duration),n=0;n<a.sourceBuffers.length;n++){var i=a.sourceBuffers[n],r=i.metadataTrack_&&i.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=t)}}),a.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),a}return cu(t,la.EventTarget),uu(t,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var r,t,n=void 0,i=(r={type:"",parameters:{}},t=e.trim().split(";"),r.type=t.shift().trim(),t.forEach(function(e){var t=e.trim().split("=");if(1<t.length){var n=t[0].replace(/"/g,"").trim(),i=t[1].replace(/"/g,"").trim();r.parameters[n]=i}}),r);if(/^(video|audio)\/mp2t$/i.test(i.type)){var a=[];i.parameters&&i.parameters.codecs&&(a=i.parameters.codecs.split(","),a=(a=_c(a)).filter(function(e){return Tc(e)||Sc(e)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),n=new Ec(this,a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),n.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else n=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(n),n}}]),t}(),Mc=0;la.mediaSources={};var Ac=function(e,t){var n=la.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},Cc=function(){return!!_.MediaSource&&!!_.MediaSource.isTypeSupported&&_.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Pc=function(){if(this.MediaSource={open:Ac,supportsNativeMediaSources:Cc},Cc())return new wc;throw new Error("Cannot use create a virtual MediaSource for this video")};Pc.open=Ac,Pc.supportsNativeMediaSources=Cc;var Rc={createObjectURL:function(e){var t=void 0;return e instanceof wc?(t=_.URL.createObjectURL(e.nativeMediaSource_),e.url_=t):e instanceof wc?(t="blob:vjs-media-source/"+Mc,Mc++,la.mediaSources[t]=e,t):(t=_.URL.createObjectURL(e),e.url_=t)}};la.MediaSource=Pc,la.URL=Rc;var Dc=la.EventTarget,kc=la.mergeOptions,Ic=function(e,t){for(var s=kc(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),n=0;n<t.playlists.length;n++){var i=vu(s,t.playlists[n]);i&&(s=i)}return gu(t,function(e,t,n,i){if(e.playlists&&e.playlists.length){var r=e.playlists[0].uri,a=vu(s,e.playlists[0]);a&&((s=a).mediaGroups[t][n][i].playlists[0]=s.playlists[r])}}),s},Lc=function(e){function a(e,t,n,i){lu(this,a);var r=du(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));if(r.hls_=t,r.withCredentials=n,!e)throw new Error("A non-empty playlist URL or playlist is required");return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_()}),"string"==typeof e?(r.srcUrl=e,r.state="HAVE_NOTHING",du(r)):(r.masterPlaylistLoader_=i,r.state="HAVE_METADATA",r.started=!0,r.media(e),_.setTimeout(function(){r.trigger("loadedmetadata")},0),r)}return cu(a,Dc),uu(a,[{key:"dispose",value:function(){this.stopRequest(),_.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var t=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var n=!this.media_||e.uri!==this.media_.uri;this.state="HAVE_METADATA",n&&(this.media_&&this.trigger("mediachanging"),this.media_=e,this.refreshMedia_(),"HAVE_MASTER"!==t&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest(),_.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(e){var t=this;_.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=_.setTimeout(function(){return t.load()},i)}else this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=us(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});a.uri=this.srcUrl;for(var e=0;e<a.playlists.length;e++){var t="placeholder-uri-"+e;a.playlists[e].uri=t,a.playlists[t]=a.playlists[e]}return gu(a,function(e,t,n,i){if(e.playlists&&e.playlists.length){var r="placeholder-uri-"+t+"-"+n+"-"+i;e.playlists[0].uri=r,a.playlists[r]=e.playlists[0]}}),_u(a),yu(a),a}},{key:"start",value:function(){var n=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(n.request){if(n.request=null,e)return n.error={status:t.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.masterXml_=t.responseText,t.responseHeaders&&t.responseHeaders.date?n.masterLoaded_=Date.parse(t.responseHeaders.date):n.masterLoaded_=Date.now(),n.syncClientServerClock_(n.onClientServerClockSync_.bind(n))}})}},{key:"syncClientServerClock_",value:function(i){var r=this,a=cs(this.masterXml_);return null===a?(this.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===a.method?(this.clientOffset_=a.value-Date.now(),i()):void(this.request=this.hls_.xhr({uri:ou(this.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(e,t){if(r.request){if(e)return r.clientOffset_=r.masterLoaded_-Date.now(),i();var n=void 0;n="HEAD"===a.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):r.masterLoaded_:Date.parse(t.responseText),r.clientOffset_=n-Date.now(),i()}}))}},{key:"onClientServerClockSync_",value:function(){var e=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),_.setTimeout(function(){e.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&_.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var i=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"DASH playlist request error at URL: "+i.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.masterXml_=t.responseText;var n=i.parseMasterXml();i.master=Ic(i.master,n),_.setTimeout(function(){i.trigger("minimumUpdatePeriod")},i.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var e=this,t=void 0,n=void 0;n=this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(t=this.master,this.parseMasterXml());var i=Ic(t,n);i?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=i:this.master=i,this.media_=i.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=_.setTimeout(function(){e.trigger("mediaupdatetimeout")},xu(this.media(),!!i))),this.trigger("loadedplaylist")}}]),a}(),Oc=function(e){return la.log.debug?la.log.debug.bind(la,"VHS:",e+" >"):function(){}};function Nc(){}var Uc=function(){function r(e,t,n,i){lu(this,r),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=n,this.mimeType_=t,this.logger_=Oc("SourceUpdater["+n+"]["+t+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,t,i)):this.createSourceBuffer_(t,i)}return uu(r,[{key:"createSourceBuffer_",value:function(e,t){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){n.start_()}):this.start_()}},{key:"start_",value:function(){var t=this;this.started_=!0,this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null,t.logger_("buffered ["+ec(t.buffered())+"]"),e&&e(),t.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(e)},t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:la.createTimeRanges()}},{key:"remove",value:function(e,t){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Nc;this.processedAppend_&&this.queueCallback_(function(){n.logger_("remove ["+e+" => "+t+"]"),n.sourceBuffer_.remove(e,t)},i)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),r}(),Fc={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Bc=2,$c=-101,jc=-102,Vc=function(e){var t,n,i={};return e.byterange&&(i.Range=(t=e.byterange,n=t.offset+t.length-1,"bytes="+t.offset+"-"+n)),i},Hc=function(e){e.forEach(function(e){e.abort()})},zc=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:$c,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:jc,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Bc,xhr:t}:null},Gc=function(n,s,o){var l=0,u=!1;return function(e,t){var i,r,a;if(!u)return e?(u=!0,Hc(n),o(e,t)):(l+=1)===n.length?(t.endOfAllRequests=Date.now(),t.encryptedBytes?(r=t,a=o,(i=s).addEventListener("message",function e(t){if(t.data.source===r.requestId){i.removeEventListener("message",e);var n=t.data.decrypted;return r.bytes=new Uint8Array(n.bytes,n.byteOffset,n.byteLength),a(null,r)}}),void i.postMessage(Hu({source:r.requestId,encrypted:r.encryptedBytes,key:r.key.bytes,iv:r.key.iv}),[r.encryptedBytes.buffer,r.key.bytes.buffer])):o(null,t)):void 0}},qc=function(r,a){return function(e){var t,n,i;return r.stats=la.mergeOptions(r.stats,(n=(t=e).target,(i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-n.requestTime||0}).bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),a(e,r)}},Wc=function(e,t,n,i,r,a,s){var o,l,u,c,d,h=[],f=Gc(h,n,s);if(r.key){var p=e(la.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),(o=r,l=f,function(e,t){var n=t.response,i=zc(e,t);if(i)return l(i,o);if(16!==n.byteLength)return l({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:Bc,xhr:t},o);var r=new DataView(n);return o.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),l(null,o)}));h.push(p)}if(r.map&&!r.map.bytes){var m=e(la.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Vc(r.map)}),(u=r,c=i,d=f,function(e,t){var n=t.response,i=zc(e,t);return i?d(i,u):0===n.byteLength?d({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Bc,xhr:t},u):(u.map.bytes=new Uint8Array(t.response),c.isInitialized()||c.init(),u.map.timescales=Zs.timescale(u.map.bytes),u.map.videoTrackIds=Zs.videoTrackIds(u.map.bytes),d(null,u))}));h.push(m)}var g,v,_,y=e(la.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Vc(r)}),(g=r,v=i,_=f,function(e,t){var n,i=t.response,r=zc(e,t),a=void 0;return r?_(r,g):0===i.byteLength?_({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Bc,xhr:t},g):(g.stats={bandwidth:(n=t).bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0},g.key?g.encryptedBytes=new Uint8Array(t.response):g.bytes=new Uint8Array(t.response),g.map&&g.map.bytes&&(v.isInitialized()||v.init(),(a=v.parse(g.bytes,g.map.videoTrackIds,g.map.timescales))&&a.captions&&(g.captionStreams=a.captionStreams,g.fmp4Captions=a.captions)),_(null,g))}));return y.addEventListener("progress",qc(r,a)),h.push(y),function(){return Hc(h)}},Yc=function(e,t){var n;return e&&(n=_.getComputedStyle(e))?n[t]:""},Xc=function(e,i){var r=e.slice();e.sort(function(e,t){var n=i(e,t);return 0===n?r.indexOf(e)-r.indexOf(t):n})},Kc=function(e,t){var n=void 0,i=void 0;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||_.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i=i||_.Number.MAX_VALUE)},Qc=function(e,t,n){if(!e||!t)return!1;var i=n===e.segments.length;return e.endList&&"open"===t.readyState&&i},Zc=function(e){return"number"==typeof e&&isFinite(e)},Jc=function(e){function n(e){lu(this,n);var t=du(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.captionParser_=new $l,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=Oc("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}return cu(n,la.EventTarget),uu(n,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():la.createTimeRanges()}},{key:"initSegment",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=zu(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),i||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Uc(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=n?n.id:null;if(this.logger_("playlist update ["+r+" => "+e.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===e.uri){var a=e.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),i&&(i.mediaIndex-=a,0<=i.mediaIndex&&(i.segment=e.segments[i.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(_.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,n),nc(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)nc(e,t,this.inbandTextTracks_[i])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&_.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=_.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&_.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=_.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e)Qc(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(e))}}},{key:"checkBuffer_",value:function(e,t,n,i,r,a){var s=0,o=void 0;e.length&&(s=e.end(e.length-1));var l=Math.max(0,s-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!i&&1<=l)return null;if(null===a)return n=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,n,null,!0);if(null!==n){var u=t.segments[n];return o=u&&u.end?u.end:s,this.generateSegmentInfo_(t,n+1,o,!1)}if(this.fetchAtBuffer_){var c=Uu.getMediaInfoForTime(t,s,a.segmentIndex,a.time);n=c.mediaIndex,o=c.startTime}else{var d=Uu.getMediaInfoForTime(t,r,a.segmentIndex,a.time);n=d.mediaIndex,o=d.startTime}return this.generateSegmentInfo_(t,n,o,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,n,i){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:i,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=Uu.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=a)return!1;var s=function(e){var t=e.master,n=e.currentTime,i=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,u=t.playlists.filter(function(e){return!Uu.isIncompatible(e)}),c=u.filter(Uu.isEnabled);c.length||(c=u.filter(function(e){return!Uu.isDisabled(e)}));var d=c.filter(Uu.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,r,o,n)?1:2;return{playlist:e,rebufferingImpact:Uu.estimateSegmentRequestTime(a,i,e)*t-s}}),h=d.filter(function(e){return e.rebufferingImpact<=0});return Xc(h,function(e,t){return Kc(t.playlist,e.playlist)}),h.length?h[0]:(Xc(d,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),d[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-a-s.rebufferingImpact,l=.5;return a<=1/30&&(l=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<l?!1:(this.bandwidth=s.playlist.attributes.BANDWIDTH*Fc.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Wc(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t,n,i,r,a=(t=this.seekable_(),n=this.currentTime_(),i=this.playlist_.targetDuration||10,r=void 0,r=t.length&&0<t.start(0)&&t.start(0)<n?t.start(0):n-30,Math.min(r,n-i));0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key={resolvedUri:t.key.resolvedUri,iv:i}}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===jc?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===$c?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(!function(e,t,n){for(var i in n)if(!e[i]){t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(i);e[i]=r||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var r=e.inbandTextTracks,t=e.captionArray,a=e.timestampOffset;if(t){var s=window.WebKitDataCue||window.VTTCue;t.forEach(function(e){var t=e.stream,n=e.startTime,i=e.endTime;r[t]&&(n+=a,i+=a,r[t].addCue(new s(n,i,e.text)))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,n=t.segment,i=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&i&&(i.containsAudio||i.containsVideo)&&(this.startingMedia_={containsAudio:i.containsAudio,containsVideo:i.containsVideo});var r,a,s,o=(r=this.loaderType_,a=this.startingMedia_,s=i,"main"===r&&a&&s?s.containsAudio||s.containsVideo?a.containsVideo&&!s.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.containsVideo&&s.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(o)return this.error({message:o,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var l,u,c,d,h,f,p,m,g,v,_,y=this.syncController_.mappingForTimeline(t.timeline);if(null!==y&&this.trigger({type:"segmenttimemapping",mapping:y}),this.state="APPENDING",n.map){var x=zu(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==x){var b=this.initSegment(n.map);this.sourceUpdater_.appendBuffer(b.bytes,function(){e.activeInitSegmentId_=x})}}t.byteLength=t.bytes.byteLength,"number"==typeof n.start&&"number"==typeof n.end?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration,this.logger_((u=(l=t).segment,c=u.start,d=u.end,h=l.playlist,f=h.mediaSequence,p=h.id,m=h.segments,g=void 0===m?[]:m,v=l.mediaIndex,_=l.timeline,["appending ["+v+"] of ["+f+", "+(f+g.length)+"] from playlist ["+p+"]","["+c+" => "+d+"] in timeline ["+_+"]"].join(" "))),this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;(this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration)?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),Qc(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if(Zc(n)&&Zc(i)){nc(n,i,this.segmentMetadataTrack_);var r=_.WebKitDataCue||_.VTTCue,a={dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:n,end:i},s=new r(n,i,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),n}(),ed=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},td=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),nd=function(e){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};lu(this,i);var n=du(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.mediaSource_=null,n.subtitlesTrack_=null,n}return cu(i,Jc),uu(i,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return la.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return la.createTimeRanges([[t,n]])}},{key:"initSegment",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=zu(e),i=this.initSegments_[n];if(t&&!i&&e.bytes){var r=td.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(td,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){nc(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,n=e.segment;if("function"!=typeof _.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var i=function(){t.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",i),void this.subtitlesTrack_.tech_.one("vttjserror",function(){t.subtitlesTrack_.tech_.off("vttjsloaded",i),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")})}n.requested=!0;try{this.parseVTTCues_(e)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime),e.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var e=void 0,n=!1;"function"==typeof _.TextDecoder?e=new _.TextDecoder("utf8"):(e=_.WebVTT.StringDecoder(),n=!0);var i=new _.WebVTT.Parser(_,_.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=t.cues.push.bind(t.cues),i.ontimestampmap=function(e){return t.timestampmap=e},i.onparsingerror=function(e){la.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var r=t.segment.map.bytes;n&&(r=ed(r)),i.parse(r)}var a=t.bytes;n&&(a=ed(a)),i.parse(a),i.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!n.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,o-i.duration)}}}else i.empty=!0}}]),i}(),id=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},rd=Ql,ad=[{name:"VOD",run:function(e,t,n,i,r){if(n===1/0)return null;return{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(r-c);if(null!==o&&o<d)break;o=d,s={time:c,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,n,i,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===i&&void 0!==u.start){var c=Math.abs(r-u.start);if(null!==o&&o<c)break;(!s||null===o||c<=o)&&(o=c,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=t.discontinuitySequence+o+1,c=e.discontinuities[u];if(c){var d=Math.abs(r-c.time);if(null!==s&&s<d)break;(!a||null===s||d<=s)&&(s=d,a={time:c.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],sd=function(e){function t(){lu(this,t);var e=du(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Oc("SyncController"),e}return cu(t,la.EventTarget),uu(t,[{key:"getSyncPoint",value:function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<i.segmentIndex&&(i.time*=-1),Math.abs(i.time+wu(e,i.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,n,i){for(var r=[],a=0;a<ad.length;a++){var s=ad[a],o=s.run(this,e,t,n,i);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<i&&(i=s,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;0<=n;n--){var i=e.segments[n];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,n=e.playlist,i=void 0;return(i=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,i)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:t.start})),i}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=Zs.timescale(t.map.bytes),i=Zs.startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=i),{start:i,end:i+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=rd(e.bytes,this.inspectCache_),n=void 0,i=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,i=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,i=t.audio[1].dtsTime),{start:n,end:i,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)i={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=i,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+i.time+"] [mapping: "+i.mapping+"]"),n.start=e.startOfSegment,n.end=t.end+i.mapping;else{if(!i)return!1;n.start=t.start+i.mapping,n.end=t.end+i.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var l=void 0;l=s<0?n.start-wu(t,e.mediaIndex,r):n.end+wu(t,e.mediaIndex+1,r),this.discontinuities[a]={time:l,accuracy:o}}}}}]),t}(),od=new dc("./decrypter-worker.worker.js",function(e,t){var d,n,h,g,i,u,v,s,r=this;d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),h=null,g=function(){function c(e){d(this,c),h||(h=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=void 0,s=void 0,o=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=u[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,p=16843009*l[d=l[c=l[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*l[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}()),this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=this._tables[0][4],o=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=l;t<4*l+28;t++)i=r[t-1],(t%l==0||8===l&&t%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%l==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],a[n]=t<=4||n<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}return c.prototype.decrypt=function(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],l=i^s[1],u=n^s[2],c=t^s[3],d=void 0,h=void 0,f=void 0,p=s.length/4-2,m=void 0,g=4,v=this._tables[1],_=v[0],y=v[1],x=v[2],b=v[3],T=v[4];for(m=0;m<p;m++)d=_[o>>>24]^y[l>>16&255]^x[u>>8&255]^b[255&c]^s[g],h=_[l>>>24]^y[u>>16&255]^x[c>>8&255]^b[255&o]^s[g+1],f=_[u>>>24]^y[c>>16&255]^x[o>>8&255]^b[255&l]^s[g+2],c=_[c>>>24]^y[o>>16&255]^x[l>>8&255]^b[255&u]^s[g+3],g+=4,o=d,l=h,u=f;for(m=0;m<4;m++)r[(3&-m)+a]=T[o>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&c]^s[g++],d=o,o=l,l=u,u=c,c=d},c}(),i=function(){function e(){d(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),u=function(t){function n(){d(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,i));return e.jobs=[],e.delay=1,e.timeout_=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n}(i),v=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},s=function(){function l(e,t,n,i){d(this,l);var r=l.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new u,this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s)),o=r;o<a.length;o+=r)n=new Uint32Array([v(a[o-4]),v(a[o-3]),v(a[o-2]),v(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s));this.asyncStream_.push(function(){var e;i(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))})}return l.prototype.decryptChunk_=function(t,n,i,r){return function(){var e=function(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new g(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0;for(o=n[0],l=n[1],u=n[2],c=n[3],m=0;m<i.length;m+=4)d=v(i[m]),h=v(i[m+1]),f=v(i[m+2]),p=v(i[m+3]),r.decrypt(d,h,f,p,s,m),s[m]=v(s[m]^o),s[m+1]=v(s[m+1]^l),s[m+2]=v(s[m+2]^u),s[m+3]=v(s[m+3]^c),o=d,l=h,u=f,c=p;return a}(t,n,i);r.set(e,t.byteOffset)}},n(l,null,[{key:"STEP",get:function(){return 32e3}}]),l}(),new function(a){a.onmessage=function(e){var r=e.data,t=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),n=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),i=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new s(t,n,i,function(e,t){var n,i;a.postMessage((n={source:r.source,decrypted:t},i={},Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[e]=t}),i),[t.buffer])})}}(r)}),ld=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},ud=function(e,t){(t.activePlaylistLoader=e).load()},cd={AUDIO:function(l,u){return function(){var e=u.segmentLoaders[l],t=u.mediaTypes[l],n=u.blacklistCurrentPlaylist;ld(e,t);var i=t.activeTrack(),r=t.activeGroup(),a=(r.filter(function(e){return e.default})[0]||r[0]).id,s=t.tracks[a];if(i!==s){for(var o in la.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[o].enabled=t.tracks[o]===s;t.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(i,r){return function(){var e=r.segmentLoaders[i],t=r.mediaTypes[i];la.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),ld(e,t);var n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}}},dd={AUDIO:function(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",cd[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",cd[e](e,n))}},hd=function(t,n){return function(e){return e.attributes[t]===n}},fd=function(t){return function(e){return e.resolvedUri===t}},pd={AUDIO:function(e,t){var n,i,r=t.hls,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions.withCredentials,l=t.master,u=l.mediaGroups,c=l.playlists,d=t.mediaTypes[e],h=d.groups,f=d.tracks,p=t.masterPlaylistLoader;for(var m in u[e]&&0!==Object.keys(u[e]).length||(u[e]={main:{default:{default:!0}}}),u[e]){h[m]||(h[m]=[]);var g=c.filter(hd(e,m));for(var v in u[e][m]){var _=u[e][m][v];g.filter(fd(_.resolvedUri)).length&&delete _.resolvedUri;var y=void 0;if(y=_.resolvedUri?new bu(_.resolvedUri,r,o):_.playlists&&"dash"===a?new Lc(_.playlists[0],r,o,p):null,_=la.mergeOptions({id:v,playlistLoader:y},_),dd[e](e,_.playlistLoader,t),h[m].push(_),void 0===f[v]){var x=new la.AudioTrack({id:v,kind:(n=_,i=void 0,i=n.default?"main":"alternative",n.characteristics&&0<=n.characteristics.indexOf("public.accessibility.describes-video")&&(i="main-desc"),i),enabled:!1,language:_.language,default:_.default,label:v});f[v]=x}}}s.on("error",cd[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.hls,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions.withCredentials,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in o[e])for(var f in u[h]||(u[h]=[]),o[e][h])if(!o[e][h][f].forced){var p=o[e][h][f],m=void 0;if("hls"===r?m=new bu(p.resolvedUri,i,s):"dash"===r&&(m=new Lc(p.playlists[0],i,s,d)),p=la.mergeOptions({id:f,playlistLoader:m},p),dd[e](e,p.playlistLoader,t),u[h].push(p),void 0===c[f]){var g=n.addRemoteTextTrack({id:f,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:f},!1).track;c[f]=g}}a.on("error",cd[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in i[e])for(var l in a[o]||(a[o]=[]),i[e][o]){var u=i[e][o][l];if(u.instreamId.match(/CC\d/)&&(a[o].push(la.mergeOptions({id:l},u)),void 0===s[l])){var c=n.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track;s[l]=c}}}},md={AUDIO:function(n,i){return function(){var e=i.mediaTypes[n].tracks;for(var t in e)if(e[t].enabled)return e[t];return null}},SUBTITLES:function(n,i){return function(){var e=i.mediaTypes[n].tracks;for(var t in e)if("showing"===e[t].mode)return e[t];return null}}},gd=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){pd[e](e,t)});var n=t.mediaTypes,e=t.masterPlaylistLoader,i=t.tech,r=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){var a,s,o,l,u,c;n[e].activeGroup=(a=e,s=t,function(t){var e=s.masterPlaylistLoader,n=s.mediaTypes[a].groups,i=e.media();if(!i)return null;var r=null;return i.attributes[a]&&(r=n[i.attributes[a]]),r=r||n.main,void 0===t?r:null===t?null:r.filter(function(e){return e.id===t.id})[0]||null}),n[e].activeTrack=md[e](e,t),n[e].onGroupChanged=(o=e,l=t,function(){var e=l.segmentLoaders,t=e[o],n=e.main,i=l.mediaTypes[o],r=i.activeTrack(),a=i.activeGroup(r),s=i.activePlaylistLoader;ld(t,i),a&&(a.playlistLoader?(t.resyncLoader(),ud(a.playlistLoader,i)):s&&n.resetEverything())}),n[e].onTrackChanged=(u=e,c=t,function(){var e=c.segmentLoaders,t=e[u],n=e.main,i=c.mediaTypes[u],r=i.activeTrack(),a=i.activeGroup(r),s=i.activePlaylistLoader;ld(t,i),a&&(a.playlistLoader?(s!==a.playlistLoader&&(t.track&&t.track(r),t.resetEverything()),ud(a.playlistLoader,i)):n.resetEverything())})});var a=n.AUDIO.activeGroup(),s=(a.filter(function(e){return e.default})[0]||a[0]).id;n.AUDIO.tracks[s].enabled=!0,n.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return n[e].onGroupChanged()})});var o=function(){n.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})};for(var l in i.audioTracks().addEventListener("change",o),i.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),r.on("dispose",function(){i.audioTracks().removeEventListener("change",o),i.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),n.AUDIO.tracks)i.audioTracks().addTrack(n.AUDIO.tracks[l])},vd=void 0,_d=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],yd=function(e){function p(e){lu(this,p);var t,n=du(this,(p.__proto__||Object.getPrototypeOf(p)).call(this)),i=e.url,r=e.withCredentials,a=e.tech,s=e.bandwidth,o=e.externHls,l=e.useCueTags,u=e.blacklistDuration,c=e.enableLowInitialPlaylist,d=e.sourceType,h=e.seekTo;if(!i)throw new Error("A non-empty playlist URL is required");vd=o,n.withCredentials=r,n.tech_=a,n.hls_=a.hls,n.seekTo_=h,n.sourceType_=d,n.useCueTags_=l,n.blacklistDuration=u,n.enableLowInitialPlaylist=c,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:n.withCredentials,timeout:null},n.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Nc,activeTrack:Nc,onGroupChanged:Nc,onTrackChanged:Nc}}),t),n.mediaSource=new la.MediaSource,n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_.bind(n)),n.seekable_=la.createTimeRanges(),n.hasPlayed_=function(){return!1},n.syncController_=new sd(e),n.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new od,n.inbandTextTracks_={};var f={hls:n.hls_,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.mediaSource.duration},hasPlayed:function(){return n.hasPlayed_()},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:s,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_};return n.masterPlaylistLoader_="dash"===n.sourceType_?new Lc(i,n.hls_,n.withCredentials):new bu(i,n.hls_,n.withCredentials),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Jc(la.mergeOptions(f,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),e),n.audioSegmentLoader_=new Jc(la.mergeOptions(f,{loaderType:"audio"}),e),n.subtitleSegmentLoader_=new nd(la.mergeOptions(f,{loaderType:"vtt"}),e),n.setupSegmentLoaderListeners_(),_d.forEach(function(e){n[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(n,e)}),n.logger_=Oc("MPC"),n.masterPlaylistLoader_.load(),n}return cu(p,la.EventTarget),uu(p,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=i.masterPlaylistLoader_.media(),t=1.5*i.masterPlaylistLoader_.targetDuration*1e3;Nu(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=t,e.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.mainSegmentLoader_.load()),gd({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,hls:i.hls_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),e);try{i.setupSourceBuffers_()}catch(e){return la.log.warn("Failed to create SourceBuffers",e),i.mediaSource.endOfStream("decode")}i.setupFirstPlay(),i.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=i.masterPlaylistLoader_.media();if(!e){i.excludeUnsupportedVariants_();var t=void 0;return i.enableLowInitialPlaylist&&(t=i.selectInitialPlaylist()),t||(t=i.selectPlaylist()),i.initialMedia_=t,void i.masterPlaylistLoader_.media(i.initialMedia_)}if(i.useCueTags_&&i.updateAdCues_(e),i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.updateDuration(),i.tech_.paused()||(i.mainSegmentLoader_.load(),i.audioSegmentLoader_&&i.audioSegmentLoader_.load()),!e.endList){var n=function(){var e=i.seekable();0!==e.length&&i.mediaSource.addSeekableRange_(e.start(0),e.end(0))};if(i.duration()!==1/0){i.tech_.one("durationchange",function e(){i.duration()===1/0?n():i.tech_.one("durationchange",e)})}else n()}}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=i.masterPlaylistLoader_.media(),t=1.5*i.masterPlaylistLoader_.targetDuration*1e3;Nu(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=t,i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=i.masterPlaylistLoader_.media();i.stuckAtPlaylistEnd_(e)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),i.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a]){n.AUDIO[a][s].uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),vd.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),vd.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(n.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=a.selectPlaylist(),t=a.masterPlaylistLoader_.media(),n=a.tech_.buffered(),i=n.length?n.end(n.length-1)-a.tech_.currentTime():0,r=a.bufferLowWaterLine();(!t.endList||a.duration()<Fc.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||r<=i)&&a.masterPlaylistLoader_.media(e),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){la.browser.IE_VERSION||la.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(la.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(n.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return la.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=vd.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=.1;var a=r.end(r.length-1);return a-i<=.1&&n-a<=.1}},{key:"blacklistCurrentPlaylist",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i=void 0;if(i=t.playlist||this.masterPlaylistLoader_.media(),n=n||t.blacklistDuration||this.blacklistDuration,!i){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(Lu).length;return r?(la.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r)):(i.excludeUntil=Date.now()+1e3*n,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),e=this.selectPlaylist(),la.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(e))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Zu(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:vd.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var i=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==i&&0!==(e=vd.Playlist.seekable(n,i)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(t=vd.Playlist.seekable(n,i)).length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=la.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.logger_("seekable updated ["+ec(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){var t=this,e=this.mediaSource.duration,n=vd.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered(),r=function e(){t.mediaSource.duration=n,t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)};0<i.length&&(n=Math.max(n,i.end(i.length-1))),e!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){var i=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var t=i.mediaTypes_[e].groups;for(var n in t)t[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=bc(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=1<e.length&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new la.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&_.MediaSource&&_.MediaSource.isTypeSupported&&!_.MediaSource.isTypeSupported('video/mp4; codecs="'+e.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return _c([e])[0]})+'"')&&(e.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var n=2,i=null,t=void 0;e.attributes.CODECS&&(t=yc(e.attributes.CODECS),i=t.videoCodec,n=t.codecCount),this.master().playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};e.attributes.CODECS&&(t=yc(e.attributes.CODECS)),t.codecCount!==n&&(e.excludeUntil=1/0),t.videoCodec!==i&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var i=n,r=void 0,a=0;a<e.segments.length;a++){var s=e.segments[a];if(r||(r=id(t,i+s.duration/2)),r){if("cueIn"in s){r.endTime=i,r.adEndTime=i,i+=s.duration,r=null;continue}if(i<r.endTime){i+=s.duration;continue}r.endTime+=s.duration}else if("cueOut"in s&&((r=new _.VTTCue(i,i+s.duration,s.cueOut)).adStartTime=i,r.adEndTime=i+parseFloat(s.cueOut),t.addCue(r)),"cueOutCont"in s){var o,l,u=s.cueOutCont.split("/").map(parseFloat),c=hu(u,2);o=c[0],l=c[1],(r=new _.VTTCue(i,i+s.duration,"")).adStartTime=i-o,r.adEndTime=r.adStartTime+l,t.addCue(r)}i+=s.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Fc.GOAL_BUFFER_LENGTH,n=Fc.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Fc.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Fc.BUFFER_LOW_WATER_LINE,n=Fc.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Fc.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,i)}}]),p}(),xd=function e(t,n,i){lu(this,e);var r,a,s,o=t.masterPlaylistController_,l=o[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION;this.width=u.width,this.height=u.height}this.bandwidth=n.attributes.BANDWIDTH,this.id=i,this.enabled=(r=t.playlists,a=n.uri,s=l,function(e){var t=r.master.playlists[a],n=Iu(t),i=Lu(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(s(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},bd=["seeking","seeked","pause","playing","error"],Td=function(){function s(e){var t=this;lu(this,s),this.tech_=e.tech,this.seekable=e.seekable,this.seekTo=e.seekTo,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Oc("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},i=function(){return t.techWaiting_()},r=function(){return t.cancelTimer_()},a=function(){return t.fixesBadSeeks_()};this.tech_.on("seekablechanged",a),this.tech_.on("waiting",i),this.tech_.on(bd,r),this.tech_.on("canplay",n),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",a),t.tech_.off("waiting",i),t.tech_.off(bd,r),t.tech_.off("canplay",n),t.checkCurrentTimeTimeout_&&_.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}return uu(s,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&_.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=_.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),n=void 0;this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1));this.beforeSeekableWindow_(e,t)&&(n=e.start(0)+.1);return void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+ec(e)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Zu(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.buffered(),r=Ju(i,t);if(this.videoUnderflow_(r,i,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var a=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(!e.length)return!1;var r=e.end(e.length-1)+.1;return!n.endList&&i&&(r=e.end(e.length-1)+3*n.targetDuration),r<t}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-.1)}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var i=this.gapFromVideoUnderflow_(t,n);if(i)return this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=Ju(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.seekTo(i.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=function(e){if(e.length<2)return la.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return la.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&2<t-r)return{start:r,end:a}}return null}}]),s}(),Sd={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Ed=function(e){!function t(n,e){var i=0,r=0,a=la.mergeOptions(Sd,e);n.ready(function(){n.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){r&&n.currentTime(r)},o=function(e){null!=e&&(r=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(e),n.trigger({type:"usage",name:"hls-error-reload"}),n.play())},l=function(){if(Date.now()-i<1e3*a.errorInterval)n.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return i=Date.now(),a.getSource.call(n,o);la.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function e(){n.off("loadedmetadata",s),n.off("error",l),n.off("dispose",e)};n.on("error",l),n.on("dispose",u),n.reloadSourceOnError=function(e){u(),t(n,e)}}(this,e)};la.use("*",function(t){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(e){return t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(e),e},play:function(){t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(t.currentTime())}}});var wd={PlaylistLoader:bu,Playlist:Uu,Decrypter:su,AsyncStream:iu,decrypt:au,utils:qu,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,t,n,i,r){var a=e.playlists.map(function(e){var t,n;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||_.Number.MAX_VALUE,width:t,height:n,playlist:e}});Xc(a,function(e,t){return e.bandwidth-t.bandwidth});var s=(a=a.filter(function(e){return!Uu.isIncompatible(e.playlist)})).filter(function(e){return Uu.isEnabled(e.playlist)});s.length||(s=a.filter(function(e){return!Uu.isDisabled(e.playlist)}));var o=s.filter(function(e){return e.bandwidth*Fc.BANDWIDTH_VARIANCE<t}),l=o[o.length-1],u=o.filter(function(e){return e.bandwidth===l.bandwidth})[0];if(!1===r){var c=u||s[0]||a[0];return c?c.playlist:null}var d=o.filter(function(e){return e.width&&e.height});Xc(d,function(e,t){return e.width-t.width});var h=d.filter(function(e){return e.width===n&&e.height===i});l=h[h.length-1];var f=h.filter(function(e){return e.bandwidth===l.bandwidth})[0],p=void 0,m=void 0,g=void 0;f||(m=(p=d.filter(function(e){return e.width>n||e.height>i})).filter(function(e){return e.width===p[0].width&&e.height===p[0].height}),l=m[m.length-1],g=m.filter(function(e){return e.bandwidth===l.bandwidth})[0]);var v=g||f||u||s[0]||a[0];return v?v.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Yc(this.tech_.el(),"width"),10),parseInt(Yc(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(Uu.isEnabled);return Xc(e,function(e,t){return Kc(e,t)}),e.filter(function(e){return yc(e.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Kc,comparePlaylistResolution:function(e,t){var n=void 0,i=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||_.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||_.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:$u()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(wd,t,{get:function(){return la.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),Fc[t]},set:function(e){la.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?la.log.warn("value of Hls."+t+" must be greater than or equal to 0"):Fc[t]=e}})});var Md="videojs-vhs",Ad=function(e){if(/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e))return"hls";return/^application\/dash\+xml/i.test(e)?"dash":null},Cd=function(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.uri){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};wd.canPlaySource=function(){return la.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Pd=function(e){if("dash"===e.options_.sourceType){var t=la.players[e.tech_.options_.playerId];if(t.eme){var n=function(e,t,n){if(!e)return e;var i={};for(var r in e)i[r]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(i[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(i[r].url=e[r]);return la.mergeOptions(e,i)}(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());n&&(t.currentSource().keySystems=n,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}},Rd=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Md);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};wd.supportsNativeHls=function(){var t=h.createElement("video");if(!la.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(t.canPlayType(e))})}(),wd.supportsNativeDash=!!la.getTech("Html5").isSupported()&&/maybe|probably/i.test(h.createElement("video").canPlayType("application/dash+xml")),wd.supportsTypeNatively=function(e){return"hls"===e?wd.supportsNativeHls:"dash"===e&&wd.supportsNativeDash},wd.isSupported=function(){return la.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Dd=la.getComponent("Component"),kd=function(e){function a(e,t,n){lu(this,a);var i=du(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,n.hls));if(t.options_&&t.options_.playerId){var r=la(t.options_.playerId);r.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return la.log.warn("player.hls is deprecated. Use player.tech().hls instead."),t.trigger({type:"usage",name:"hls-player-access"}),i},configurable:!0}),r.vhs=i,(r.dash=i).player_=r}if(i.tech_=t,i.source_=e,i.stats={},i.setOptions_(),i.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(h,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;t&&t.contains(i.tech_.el())&&i.masterPlaylistController_.smoothQualityChange_()}),i.on(i.tech_,"seeking",function(){this.tech_.seeking()&&0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),i.on(i.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),i.on(i.tech_,"play",i.play),i}return cu(a,Dd),uu(a,[{key:"setOptions_",value:function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var e=Rd();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Fc.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Fc.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var i=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=wd,this.options_.sourceType=Ad(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e),i.setCurrentTime(e)},this.masterPlaylistController_=new yd(this.options_),this.playbackWatcher_=new Td(la.mergeOptions(this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){la.players[i.tech_.options_.playerId].error(i.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):wd.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=wd.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=0<this.throughput?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){la.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return tc(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return tc(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){i.options_.useBandwidthFromLocalStorage&&function(e){if(!window.localStorage)return;var t=Rd();t=t?la.mergeOptions(t,e):e;try{window.localStorage.setItem(Md,JSON.stringify(t))}catch(e){return}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var n,e;e=(n=i).playlists,n.representations=function(){return e.master.playlists.filter(function(e){return!Iu(e)}).map(function(e,t){return new xd(n,e,e.uri)})},Pd(i)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return i.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(la.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var n=this,e=la.players[this.tech_.options_.playerId];e&&e.qualityLevels&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,e;t=n.qualityLevels_,(e=n).representations().forEach(function(e){t.addQualityLevel(e)}),Cd(t,e.playlists)}),this.playlists.on("mediachange",function(){Cd(n.qualityLevels_,n.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"dispose",this).call(this)}},{key:"convertToStreamTime",value:function(e,t){return Xu({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToStreamTime",value:function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2;return Ku({streamTime:e,playlist:this.masterPlaylistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),a}(),Id={name:"videojs-http-streaming",VERSION:"1.6.0",canHandleSource:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=la.mergeOptions(la.options,t);return Id.canPlayType(e.type,n)},handleSource:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=la.mergeOptions(la.options,n);return t.hls=new kd(e,t,i),t.hls.xhr=$u(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=la.mergeOptions(la.options,t).hls.overrideNative,i=Ad(e);return i&&(!wd.supportsTypeNatively(i)||n)?"maybe":""}};return void 0!==la.MediaSource&&void 0!==la.URL||(la.MediaSource=Pc,la.URL=Rc),Pc.supportsNativeMediaSources()&&la.getTech("Html5").registerSourceHandler(Id,0),la.HlsHandler=kd,la.HlsSourceHandler=Id,la.Hls=wd,la.use||la.registerComponent("Hls",wd),la.options.hls=la.options.hls||{},la.registerPlugin?la.registerPlugin("reloadSourceOnError",Ed):la.plugin("reloadSourceOnError",Ed),la}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),function(a,i,t){"use strict";var r=/^([a-z+\w\+\.\-]+:\/\/)?([^\/?#]*)?(\/[^?#]*)?(\?[^#]*)?(\#.*)?/i;function s(e,t){this._value=e,this._expired=!1,setTimeout(function(){this._expired=!0}.bind(this),1e3*(t-1))}function o(e,t){this._timeStart=performance.now(),Object.assign(this,e),this.rawSrc_=e.rawSrc?e.rawSrc:e.src,this.type=e.type,"AKAMAI"===e.tokenType&&this.tokenize_(t)}Object.defineProperties(s.prototype,{value:{get:function(){return this._value}},expired:{get:function(){return this._expired}}}),o.prototype={generateToken_:function(e){var t=this.rawSrc_.match(r)[3],n=e+"/akahd/token?acl="+t.substring(0,t.lastIndexOf("/")+1)+"*";try{i.xhr(n,{sync:!0,json:!0},function(e,t,n){this.token_=new s(n.token.authparams,n.token.window),this._response=t,this._timeEnd=performance.now()}.bind(this))}catch(e){i.log.error("VJS-SRG-TOKEN: An error ocurred while retrieving the token, playback will resume without it: ",e)}},tokenize_:function(e){this.generateToken_(e),this.token?this.src=new t(this.rawSrc_).addSearch(t.parseQuery(this.token.value)).toString():this.src=this.rawSrc_}},Object.defineProperties(o.prototype,{rawSrc:{get:function(){return this.rawSrc_}},token:{get:function(){return this.token_}}}),i.registerPlugin("tokenize",function(e){var n,i=e.host,r={src:this.src};this.src=function(e){if(e&&Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=new o(e[t],i),this._timeErrorEnd=performance.now(),e[t]._timeResult=(isNaN(e[t]._timeEnd)?this._timeErrorEnd:e[t]._timeEnd)-e[t]._timeStart;n=e}else e&&(e=new o(e,i),this._timeErrorEnd=performance.now(),e._timeResult=(isNaN(e._timeEnd)?this._timeErrorEnd:e._timeEnd)-e._timeStart,n=e);return r.src.call(this,e)},this.recoverExpiredError_=function(){var e=this.currentSource();e.token&&e.token.expired&&(this.src(e),this.starttime?this.starttime(this.recoverExpireErrorPosition_):this.one("timeupdate",function(){this.currentTime(this.recoverExpireErrorPosition_)}))},this.getCurrentTokenizedSources=function(){return n},this.on("play",function(){this.recoverExpireErrorPosition_&&this.recoverExpiredError_()}),this.on("error",function(e){var t=this.error();if(t.code===a.MediaError.MEDIA_ERR_DECODE||t.code===a.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED){var n=this.currentSource();n.token&&n.token.expired&&(e.preventDefault(),e.stopImmediatePropagation(),this.recoverExpireErrorPosition_=this.currentTime(),t.code===a.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED&&this.recoverExpiredError_())}})})}(window,window.videojs,window.URI),function(e,l,u){"use strict";function c(){this.domParser_=new DOMParser}c.prototype={parseTTMLCues_:function(e){for(var t=e.getElementsByTagName("span"),n=l.duration(e.getAttribute("begin")).asSeconds(),i=l.duration(e.getAttribute("end")).asSeconds(),r=e.getAttribute("xml:id"),a=[],s=0;s<t.length;s++){var o=t[s];a.push({startTime:n,endTime:i,id:r+"_"+s,text:o.textContent.trim(),color:o.getAttribute("tts:color"),backgroundColor:o.getAttribute("tts:backgroundColor")})}return a},parseTTML:function(e){for(var t=this.domParser_.parseFromString(e,"text/html").getElementsByTagName("p"),n=[],i=0;i<t.length;i++)n=n.concat(this.parseTTMLCues_(t[i]));return n}},u.registerPlugin("ttml",function(e){var o={addRemoteTextTrack:this.addRemoteTextTrack};this.addRemoteTextTrack=function(e,t){var r,a=new c,n=e.src,i=e.type&&"application/ttml+xml"===e.type||e.mimeType&&"application/ttml+xml"===e.mimeType;if(e.src=i?void 0:e.src,r=o.addRemoteTextTrack.apply(this,arguments),i&&r&&r.track){var s=r.track;s.loaded_=!1,u.xhr(n,{},function(e,t,n){if(e||300<=t.statusCode)this.removeRemoteTextTrack(s);else{var i=a.parseTTML(n);0<i.length?(s.loaded_=!0,i.forEach(function(e){r.track.addCue(e)})):(u.log.warn("Captions is empty or was not in TTML format: "+t.url),this.removeRemoteTextTrack(s))}}.bind(this))}return r}})}(window,window.moment,window.videojs),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("global/document"),require("video.js"),require("global/window")):"function"==typeof define&&define.amd?define(["exports","global/document","video.js","global/window"],t):t(e.videojsContribEme={},e.document,e.videojs,e.window)}(this,function(e,a,c,g){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a,c=c&&c.hasOwnProperty("default")?c.default:c,g=g&&g.hasOwnProperty("default")?g.default:g;var s=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),i=new DataView(t),r=0;r<n.byteLength;r++)if(n.getUint8(r)!==i.getUint8(r))return!1;return!0},o=function(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e},l=function(){var t=c.mergeOptions.apply(c,arguments);return Object.keys(t).forEach(function(e){null===t[e]&&delete t[e]}),t},u=function(e,t,n,i){var r=function(e){var t=(new g.DOMParser).parseFromString(String.fromCharCode.apply(null,new Uint16Array(e)),"application/xml"),n=t.getElementsByTagName("HttpHeaders")[0],i={};if(n)for(var r=n.getElementsByTagName("name"),a=n.getElementsByTagName("value"),s=0;s<r.length;s++)i[r[s].childNodes[0].nodeValue]=a[s].childNodes[0].nodeValue;var o,l=t.getElementsByTagName("Challenge")[0];return l&&(o=g.atob(l.childNodes[0].nodeValue)),{headers:i,message:o}}(t),a=r.message,s=l(r.headers,n.emeHeaders,e.licenseHeaders);c.xhr({uri:e.url,method:"post",headers:s,body:a,responseType:"arraybuffer"},i)},p=function(e){var t=e.mediaKeys,i=e.initDataType,r=e.initData,a=e.options,s=e.getLicense,o=e.removeSession,l=e.eventBus,u=t.createSession();return new Promise(function(t,n){u.addEventListener("message",function(e){s(a,e.message).then(function(e){t(u.update(e))}).catch(function(e){n(e)})},!1),u.addEventListener("keystatuseschange",function(n){var i=!1;u.keyStatuses.forEach(function(e,t){switch(l.trigger({keyId:t,status:e,target:u,type:"keystatuschange"}),e){case"expired":i=!0;break;case"internal-error":c.log.warn('Key status reported as "internal-error." Leaving the session open since we don\'t have enough details to know if this error is fatal.',n)}}),i&&u.close().then(function(){o(r)})},!1),u.generateRequest(i,r).catch(function(){n("Unable to create or initialize key session")})})},m=function(r,a){return function(e,t){return new Promise(function(n,i){r(e,t,function(e,t){a&&a.trigger("licenserequestattempted"),e?i(e):n(t)})})}},v=function(e,t){if("string"==typeof t&&(t={url:t}),!t.url&&!t.getLicense)throw new Error("Neither URL nor getLicense function provided to get license");var r,n;return t.url&&!t.getLicense&&(t.getLicense="com.microsoft.playready"===e?(n=t,function(e,t,i){u(n,t,e,function(e,t,n){e?i(e):i(null,n)})}):(r=t,function(e,t,i){var n=l({"Content-type":"application/octet-stream"},e.emeHeaders,r.licenseHeaders);c.xhr({uri:r.url,method:"POST",responseType:"arraybuffer",body:t,headers:n},function(e,t,n){e?i(e):i(null,n)})})),t},d=function(e){var r,t,l=e.video,u=e.initDataType,c=e.initData,a=e.keySystemAccess,d=e.options,h=e.removeSession,f=e.eventBus,n=Promise.resolve();void 0===l.mediaKeysObject&&(l.mediaKeysObject=null,l.pendingSessionData=[],n=new Promise(function(n,i){l.keySystem=a.keySystem,(t=v(a.keySystem,d.keySystems[a.keySystem])).getCertificate?t.getCertificate(d,function(e,t){e?i(e):(r=t,n())}):n(a)}).then(function(){return a.createMediaKeys()}).then(function(e){return function(e){var t=e.video,n=e.certificate,i=e.createdMediaKeys,r=e.options,a=e.getLicense,s=e.removeSession,o=e.eventBus;t.mediaKeysObject=i;var l=[];n&&l.push(i.setServerCertificate(n));for(var u=0;u<t.pendingSessionData.length;u++){var c=t.pendingSessionData[u];l.push(p({mediaKeys:t.mediaKeysObject,initDataType:c.initDataType,initData:c.initData,options:r,getLicense:a,removeSession:s,eventBus:o}))}return t.pendingSessionData=[],l.push(t.setMediaKeys(i)),Promise.all(l)}({video:l,certificate:r,createdMediaKeys:e,options:d,getLicense:m(t.getLicense,f),removeSession:h,eventBus:f})}).catch(function(e){return e?Promise.reject(e):Promise.reject("Failed to create and initialize a MediaKeys object")}));return n.then(function(){return e={video:l,initDataType:u,initData:c,options:d,getLicense:l.keySystem?m(v(l.keySystem,d.keySystems[l.keySystem]).getLicense,f):null,removeSession:h,eventBus:f},t=e.video,n=e.initDataType,i=e.initData,r=e.options,a=e.getLicense,s=e.removeSession,o=e.eventBus,t.mediaKeysObject?p({mediaKeys:t.mediaKeysObject,initDataType:n,initData:i,options:r,getLicense:a,removeSession:s,eventBus:o}):(t.pendingSessionData.push({initDataType:n,initData:i}),Promise.resolve());var e,t,n,i,r,a,s,o})},_="com.apple.fps.1_0",y=function(e){var t=e.initData,n=e.id,i=e.cert;"string"==typeof n&&(n=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(n));var r=0,a=new ArrayBuffer(t.byteLength+4+n.byteLength+4+i.byteLength),s=new DataView(a);new Uint8Array(a,r,t.byteLength).set(t),r+=t.byteLength,s.setUint32(r,n.byteLength,!0),r+=4;var o=new Uint16Array(a,r,n.length);return o.set(n),r+=o.byteLength,s.setUint32(r,i.byteLength,!0),r+=4,new Uint8Array(a,r,i.byteLength).set(i),new Uint8Array(a,0,a.byteLength)},x=function(e,t){return r=t,n=String.fromCharCode.apply(null,new Uint16Array(r.buffer)),(i=a.createElement("a")).href=n,i.hostname;var n,i,r},i=function(e){var n,a,i=e.video,d=e.initData,h=e.options,f=e.eventBus,t=h.keySystems[_],r=t.getCertificate||(n=t,function(e,i){var t=l(e.emeHeaders,n.certificateHeaders);c.xhr({uri:n.certificateUri,responseType:"arraybuffer",headers:t},function(e,t,n){e?i(e):i(null,new Uint8Array(n))})}),p=t.getContentId||x,m=t.getLicense||(a=t,function(e,t,n,i){var r=l({"Content-type":"application/octet-stream"},e.emeHeaders,a.licenseHeaders);c.xhr({uri:a.licenseUri,method:"POST",responseType:"arraybuffer",body:n,headers:r},function(e,t,n){e?i(e):i(null,n)})});return new Promise(function(n,i){r(h,function(e,t){e?i(e):n(t)})}).then(function(e){return t={video:i,cert:e,initData:d,getLicense:m,options:h,contentId:p(h,d),eventBus:f},r=t.video,a=t.contentId,s=t.initData,o=t.cert,l=t.options,u=t.getLicense,c=t.eventBus,new Promise(function(e,n){if(!r.webkitKeys)try{r.webkitSetMediaKeys(new g.WebKitMediaKeys(_))}catch(e){return void n("Could not create MediaKeys")}var i;try{i=r.webkitKeys.createSession("video/mp4",y({id:a,initData:s,cert:o}))}catch(e){return void n("Could not create key session")}i.contentId=a,i.addEventListener("webkitkeymessage",function(e){u(l,a,e.message,function(e,t){c&&c.trigger("licenserequestattempted"),e?n(e):i.update(new Uint8Array(t))})}),i.addEventListener("webkitkeyadded",function(){e()}),i.addEventListener("webkitkeyerror",function(){var e=i.error;n("KeySession error: code "+e.code+", systemCode "+e.systemCode)})});var t,r,a,s,o,l,u,c})},h="com.microsoft.playready",f=function(e,t,s,o){var l=e.msKeys.createSession("video/mp4",t);if(!l)throw new Error("Could not create key session.");l.addEventListener("mskeymessage",function(e){var t,n,i,r,a;n=l,i=e,r=o,"function"!=typeof(a=(t=s).keySystems[h]).getKey?("string"==typeof a?a={url:a}:"boolean"==typeof a&&(a={}),a.url||(a.url=i.destinationURL),u(a,i.message.buffer,t,function(e,t){r&&r.trigger("licenserequestattempted"),e?r.trigger({message:"Unable to request key from url: "+a.url,target:n,type:"mskeyerror"}):n.update(new Uint8Array(t.body))})):a.getKey(t,i.destinationURL,i.message.buffer,function(e,t){e?r.trigger({message:"Unable to get key: "+e,target:n,type:"mskeyerror"}):n.update(t)})}),l.addEventListener("mskeyerror",function(e){o.trigger({message:"Unexpected key error from key session with code: "+l.error.code+" and systemCode: "+l.error.systemCode,target:l,type:"mskeyerror"})}),l.addEventListener("mskeyadded",function(){o.trigger({target:l,type:"mskeyadded"})})},b=function(e,t){for(var n=0;n<e.length;n++)if(e[n].initData){var i=o(e[n].initData),r=o(t);if(s(i,r))return!0}return!1},T=function(e,t){for(var n=0;n<e.length;n++)if(e[n].initData===t)return void e.splice(n,1)},S=function(n,i,r,a){if(!i||!i.keySystems)return Promise.resolve();var s,o,l=n.initData;return(s=i.keySystems,Object.keys(s).forEach(function(t){var n={},e=s[t].audioContentType,i=s[t].videoContentType;e&&(n.audioCapabilities=[{contentType:e}]),i&&(n.videoCapabilities=[{contentType:i}]),o=o?o.catch(function(e){return g.navigator.requestMediaKeySystemAccess(t,[n])}):g.navigator.requestMediaKeySystemAccess(t,[n])}),o).then(function(e){var t=e.keySystem;return i.keySystems[t]&&i.keySystems[t].pssh&&(l=i.keySystems[t].pssh),b(r,l)||!l?Promise.resolve():(r.push({initData:l}),d({video:n.target,initDataType:n.initDataType,initData:l,keySystemAccess:e,options:i,removeSession:T.bind(null,r),eventBus:a}))})},r=function(e,t,n){return t.keySystems&&t.keySystems[_]&&e.initData?i({video:e.target,initData:e.initData,options:t,eventBus:n}):Promise.resolve()},E=function(e,t,n,i){if(t.keySystems&&t.keySystems[h]&&!n.reduce(function(e,t){return e||t.playready},!1)){var r=e.initData;t.keySystems[h]&&t.keySystems[h].pssh&&(r=t.keySystems[h].pssh),r&&(n.push({playready:!0,initData:r}),function(e){var t=e.video,n=e.initData,i=e.options,r=e.eventBus;t.msKeys&&delete t.msKeys;try{t.msSetMediaKeys(new g.MSMediaKeys(h))}catch(e){throw new Error("Unable to create media keys for PlayReady key system. Error: "+e.message)}f(t,n,i,r)}({video:e.target,initData:r,options:t,eventBus:i}))}},w=function(e){return c.mergeOptions(e.currentSource(),e.eme.options)},M=function(e){var t=e.src();t!==e.eme.activeSrc&&(e.eme.activeSrc=t,e.eme.sessions=[])},t=function(n){return function(e){var t=e?e.message||e:null;n.error({code:5,message:t})}},n=function(s){void 0===s&&(s={});var o=this,l=t(o);o.ready(function(){return n=l,void("video"===(t=o).$(".vjs-tech").tagName.toLowerCase()&&(M(t),g.navigator.userAgent.match(/Safari/i)&&!g.navigator.userAgent.match(/Chrome/i)?t.tech_.el_.addEventListener("webkitneedkey",function(e){M(t),r(e,w(t),t.tech_).catch(n)}):t.tech_.el_.addEventListener("encrypted",function(e){M(t),S(e,w(t),t.eme.sessions,t.tech_).catch(n)}),c.browser.IS_EDGE||(t.tech_.el_.addEventListener("msneedkey",function(e){M(t);try{E(e,w(t),t.eme.sessions,t.tech_)}catch(e){n(e)}}),t.tech_.on("mskeyerror",n),t.on("dispose",function(){t.tech_.off("mskeyerror",n)}))));var t,n}),o.eme={initializeMediaKeys:function(e,n,i){void 0===e&&(e={}),void 0===n&&(n=function(){}),void 0===i&&(i=!1);var t=c.mergeOptions(o.currentSource(),s,e),r={initDataType:"cenc",initData:null,target:o.tech_.el_};if(M(o),o.tech_.el_.setMediaKeys)S(r,t,o.eme.sessions,o.tech_).then(function(){return n()}).catch(function(e){n(e),i||l(e)});else if(o.tech_.el_.msSetMediaKeys){var a=function e(t){o.tech_.off("mskeyadded",e),o.tech_.off("mskeyerror",e),"mskeyerror"===t.type?(n(t.target.error),i||l(t.message)):n()};o.tech_.one("mskeyadded",a),o.tech_.one("mskeyerror",a);try{E(r,t,o.eme.sessions,o.tech_)}catch(e){o.tech_.off("mskeyadded",a),o.tech_.off("mskeyerror",a),n(e),i||l(e)}}},options:s}};(c.registerPlugin||c.plugin)("eme",n),e.hasSession=b,e.removeSession=T,e.handleEncryptedEvent=S,e.handleWebKitNeedKeyEvent=r,e.handleMsNeedKeyEvent=E,e.getOptions=w,e.setupSessions=M,e.emeErrorHandler=t,e.default=n,Object.defineProperty(e,"__esModule",{value:!0})}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojsDash=e()}}(function(){return function a(s,o,l){function u(n,e){if(!o[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=o[n]={exports:{}};s[n][0].call(r.exports,function(e){var t=s[n][1][e];return u(t||e)},r,r.exports,a,s,o,l)}return o[n].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,i){(function(e){"use strict";i.__esModule=!0,i.default=function(e,t){e.dash.mediaPlayer.on(n.default.MediaPlayer.events.PLAYBACK_METADATA_LOADED,function(e,t){var i=e.dash.mediaPlayer,r=i.getTracksFor("audio"),a=e.audioTracks();function s(e){return"dash-audio-"+e}function o(e,n){return e.find(function(e){var t=e.index;return s(t)===n.id})}a.length&&t.clearTracks(["audio"]);var n=i.getCurrentTrackFor("audio");r.forEach(function(e){var t=e.lang;e.roles&&e.roles.length&&(t+=" ("+e.roles.join(", ")+")"),a.addTrack(new l.default.AudioTrack({enabled:e===n,id:s(e.index),kind:e.kind||"main",label:t,language:e.lang}))}),a.addEventListener("change",function(){for(var e=0;e<a.length;e++){var t=a[e];if(t.enabled){var n=o(r,t);i.setCurrentTrack(n)}else;}})}.bind(null,e,t))};var n=t("undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null),l=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null);function t(e){return e&&e.__esModule?e:{default:e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(e){"use strict";n.__esModule=!0,n.default=function(n,e,t){window.VTTCue&&!/\[native code\]/.test(window.VTTCue.toString())&&(window.VTTCue=!1);var i=[];if(e.featuresNativeTextTracks)return void l.default.log.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash");var r=n.dash.mediaPlayer;function a(){i.forEach(n.removeRemoteTextTrack.bind(n)),i=[]}function s(e){e.index;var t=e.tracks;r.off(o.default.MediaPlayer.events.TEXT_TRACKS_ADDED,s),a(),t.length&&(i=function(s,e,o){var l=[],t=o.map(function(e){return{dashTrack:e,trackConfig:{label:e.lang,language:e.lang,srclang:e.lang}}}).map(function(e){var t=e.trackConfig,n=e.dashTrack,i=s.addRemoteTextTrack(t,!0);return l.push({textTrack:i.track,dashTrack:n}),i});function n(){for(var e=s.dash.mediaPlayer,r=s.textTracks(),a=-1,t=function(e){var t=r[e];if("showing"===t.mode){var n=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}(l,function(e){return e.textTrack===t}),i=n?n.dashTrack:null;i&&(a=o.indexOf(i))}},n=0;n<r.length;n+=1)t(n);a!==e.getCurrentTextTrackIndex()&&e.setTextTrack(a)}return s.textTracks().on("change",n),s.one("loadstart",function(){s.textTracks().off("change",n)}),n(),t}(n,0,t))}r.on(o.default.MediaPlayer.events.TEXT_TRACKS_ADDED,s),r.on(o.default.MediaPlayer.events.CAN_PLAY,function(){r.off(o.default.MediaPlayer.events.TEXT_TRACKS_ADDED,s),n.one("loadstart",a)})};var o=t("undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null),l=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null);function t(e){return e&&e.__esModule?e:{default:e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(r,e,a){(function(e){"use strict";a.__esModule=!0;var t=n(r("global/window")),s=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),o=n("undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null),l=n(r("./setup-audio-tracks")),u=n(r("./setup-text-tracks"));function n(e){return e&&e.__esModule?e:{default:e}}var i=function(){function i(t,e,r){var a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=r||e.options_,this.player=(0,s.default)(r.playerId),this.player.dash=this.player.dash||{},this.tech_=e,this.el_=e.el(),this.elParent_=this.el_.parentNode,t.src){e.isReady_=!1,i.updateSourceData&&(s.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),t=i.updateSourceData(t)),i.hooks("updatesource").forEach(function(e){t=e(t)});var n=t.src;this.keySystemOptions_=i.buildDashJSProtData(t.keySystemOptions),this.player.dash.mediaPlayer=o.default.MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,i.useVideoJSDebug&&(s.default.log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),i.useVideoJSDebug(this.mediaPlayer_)),i.beforeInitialize&&(s.default.log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),i.beforeInitialize(this.player,this.mediaPlayer_)),i.hooks("beforeinitialize").forEach(function(e){e(a.player,a.mediaPlayer_)}),this.mediaPlayer_.initialize(),r.dash&&Object.keys(r.dash).forEach(function(e){var t,n="set"+e.charAt(0).toUpperCase()+e.slice(1),i=r.dash[e];a.mediaPlayer_.hasOwnProperty(n)&&(s.default.log.warn("Using dash options in videojs-contrib-dash without the set prefix has been deprecated. Change '"+e+"' to '"+n+"'"),e=n),a.mediaPlayer_.hasOwnProperty(e)?(Array.isArray(i)||(i=[i]),(t=a.mediaPlayer_)[e].apply(t,i)):s.default.log.warn("Warning: dash configuration option unrecognized: "+e)}),this.mediaPlayer_.attachView(this.el_),this.mediaPlayer_.setAutoPlay(!1),l.default.call(null,this.player,e),u.default.call(null,this.player,e,r),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(n),this.tech_.triggerReady()}}return i.buildDashJSProtData=function(e){var t={};if(!e||!Array.isArray(e))return null;for(var n=0;n<e.length;n++){var i=e[n],r=s.default.mergeOptions({},i.options);r.licenseUrl&&(r.serverURL=r.licenseUrl,delete r.licenseUrl),t[i.name]=r}return t},i.prototype.dispose=function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.player.dash&&delete this.player.dash},i.prototype.seekable=function(){if(this.el_.duration===Number.MAX_VALUE){if(!this.mediaPlayer_.isSeeking()){var e=this.el_.currentTime-this.mediaPlayer_.time(),t=e+this.mediaPlayer_.getDVRWindowSize();this.currSeekable_={start:function(){return e},end:function(){return t},length:1}}if(this.currSeekable_)return this.currSeekable_}var n=this.el_.seekable;return 0<n.length&&n.end(n.length-1)===Number.MAX_VALUE?{start:function(){return 0},end:function(){return 1/0},length:1}:n},i.prototype.duration=function(){var e=this.el_.duration;if(e!==Number.MAX_VALUE)return e;var t=this.mediaPlayer_.getDVRWindowSize();return t||1/0},i.hooks=function(e,t){return i.hooks_[e]=i.hooks_[e]||[],t&&(i.hooks_[e]=i.hooks_[e].concat(t)),i.hooks_[e]},i.hook=function(e,t){i.hooks(e,t)},i.removeHook=function(e,t){var n=i.hooks(e).indexOf(t);return-1!==n&&(i.hooks_[e]=i.hooks_[e].slice(),i.hooks_[e].splice(n,1),!0)},i}();i.hooks_={};s.default.DashSourceHandler=function(){return{canHandleSource:function(e){return function(t){t=JSON.parse(JSON.stringify(t)),i.updateSourceData&&(s.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),t=i.updateSourceData(t)),i.hooks("updatesource").forEach(function(e){t=e(t)});var e=document.createElement("video");return!(t.keySystemOptions&&!navigator.requestMediaKeySystemAccess&&!e.msSetMediaKeys)}(e)?s.default.DashSourceHandler.canPlayType(e.type)?"probably":/\.mpd/i.test(e.src)?"maybe":"":""},handleSource:function(e,t,n){return new i(e,t,n)},canPlayType:function(e){return s.default.DashSourceHandler.canPlayType(e)}}},s.default.DashSourceHandler.canPlayType=function(e){return/^application\/dash\+xml/i.test(e)?"probably":""},t.default.MediaSource&&s.default.getTech("Html5").registerSourceHandler(s.default.DashSourceHandler(),0),s.default.Html5DashJS=i,a.default=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./setup-audio-tracks":1,"./setup-text-tracks":2,"global/window":3}]},{},[4])(4)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsFlash=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var r,t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},n=e.getComponent("Tech"),a=e.dom,o=e.url,l=e.createTimeRange,u=e.mergeOptions,i=s&&s.navigator||{},c=function(i){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,t));return e.source&&n.ready(function(){this.setSource(e.source)},!0),e.startTime&&n.ready(function(){this.load(),this.play(),this.currentTime(e.startTime)},!0),s.videojs=s.videojs||{},s.videojs.Flash=s.videojs.Flash||{},s.videojs.Flash.onReady=a.onReady,s.videojs.Flash.onEvent=a.onEvent,s.videojs.Flash.onError=a.onError,n.on("seeked",function(){this.lastSeekTarget_=void 0}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i),a.prototype.createEl=function(){var e=this.options_;e.swf||(e.swf="https://vjs.zencdn.net/swf/5.4.2/video-js.swf");var t=e.techId,n=u({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),i=u({wmode:"opaque",bgcolor:"#000000"},e.params),r=u({id:t,name:t,class:"vjs-tech"},e.attributes);return this.el_=a.embed(e.swf,n,i,r),(this.el_.tech=this).el_},a.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},a.prototype.pause=function(){this.el_.vjs_pause()},a.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},a.prototype.setSrc=function(e){var t=this;e=o.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},a.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},a.prototype.setCurrentTime=function(e){var t=this.seekable();t.length&&(e=(e=e>t.start(0)?e:t.start(0))<t.end(t.length-1)?e:t.end(t.length-1),this.lastSeekTarget_=e,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",e),i.prototype.setCurrentTime.call(this))},a.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},a.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},a.prototype.duration=function(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return 0<=e?e:1/0},a.prototype.load=function(){this.el_.vjs_load()},a.prototype.poster=function(){this.el_.vjs_getProperty("poster")},a.prototype.setPoster=function(){},a.prototype.seekable=function(){var e=this.duration();return 0===e?l():l(0,e)},a.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?l():l(e[0][0],e[0][1])},a.prototype.supportsFullScreen=function(){return!1},a.prototype.enterFullScreen=function(){return!1},a.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return s.performance&&"function"==typeof s.performance.now?e.creationTime=s.performance.now():s.performance&&s.performance.timing&&"number"==typeof s.performance.timing.navigationStart&&(e.creationTime=s.Date.now()-s.performance.timing.navigationStart),e},a}(n),d=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],h=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],f=c.prototype;function p(t){var e=t.charAt(0).toUpperCase()+t.slice(1);f["set"+e]=function(e){return this.el_.vjs_setProperty(t,e)}}function m(e){f[e]=function(){return this.el_.vjs_getProperty(e)}}for(var g=0;g<d.length;g++)m(d[g]),p(d[g]);for(var v=0;v<h.length;v++)m(h[v]);return c.isSupported=function(){return!((!e.browser.IS_CHROME||e.browser.IS_ANDROID&&e.browser.IS_IOS)&&(!e.browser.IS_SAFARI||e.browser.IS_IOS)&&!e.browser.IS_EDGE)||10<=c.version()[0]},n.withSourceHandlers(c),c.nativeSourceHandler={},c.nativeSourceHandler.canPlayType=function(e){return e in c.formats?"maybe":""},c.nativeSourceHandler.canHandleSource=function(e,t){var n,i,r=void 0;return r=e.type?e.type.replace(/;.*/,"").toLowerCase():(n=e.src,(i=o.getFileExtension(n))?"video/"+i:""),c.nativeSourceHandler.canPlayType(r)},c.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},c.nativeSourceHandler.dispose=function(){},c.registerSourceHandler(c.nativeSourceHandler),c.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},c.onReady=function(e){var t=a.$("#"+e),n=t&&t.tech;n&&n.el()&&c.checkReady(n)},c.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){c.checkReady(e)},50))},c.onEvent=function(e,t){var n=a.$("#"+e).tech,i=Array.prototype.slice.call(arguments,2);n.setTimeout(function(){n.trigger(t,i)},1)},c.onError=function(e,t){var n=a.$("#"+e).tech;if("srcnotfound"===t)return n.error(4);"string"==typeof t?n.error("FLASH: "+t):(t.origin="flash",n.error(t))},c.version=function(){var t="0,0,0";try{t=new s.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{i.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(i.plugins["Shockwave Flash 2.0"]||i.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(e){}}return t.split(",")},c.embed=function(e,t,n,i){var r=c.getEmbedCode(e,t,n,i);return a.createEl("div",{innerHTML:r}).childNodes[0]},c.getEmbedCode=function(e,t,n,i){var r="",a="",s="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){r+=e+"="+t[e]+"&amp;"}),n=u({movie:e,flashvars:r,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(e){a+='<param name="'+e+'" value="'+n[e]+'" />'}),i=u({data:e,width:"100%",height:"100%"},i),Object.getOwnPropertyNames(i).forEach(function(e){s+=e+'="'+i[e]+'" '}),'<object type="application/x-shockwave-flash" '+s+">"+a+"</object>"},(r=c).streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},r.streamFromParts=function(e,t){return e+"&"+t},r.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var n=e.search(/&(?![\w-]+=)/),i=void 0;return-1!==n?i=n+1:0===(n=i=e.lastIndexOf("/")+1)&&(n=i=e.length),t.connection=e.substring(0,n),t.stream=e.substring(i,e.length),t},r.isStreamingType=function(e){return e in r.streamingFormats},r.RTMP_RE=/^rtmp[set]?:\/\//i,r.isStreamingSrc=function(e){return r.RTMP_RE.test(e)},r.rtmpSourceHandler={},r.rtmpSourceHandler.canPlayType=function(e){return r.isStreamingType(e)?"maybe":""},r.rtmpSourceHandler.canHandleSource=function(e,t){var n=r.rtmpSourceHandler.canPlayType(e.type);return n||(r.isStreamingSrc(e.src)?"maybe":"")},r.rtmpSourceHandler.handleSource=function(e,t,n){var i=r.streamToParts(e.src);t.setRtmpConnection(i.connection),t.setRtmpStream(i.stream)},r.registerSourceHandler(r.rtmpSourceHandler),n.getTech("Flash")?(e.log.warn("Not using videojs-flash as it appears to already be registered"),e.log.warn("videojs-flash should only be used with video.js@6 and above")):e.registerTech("Flash",c),c.VERSION="2.2.1",c}),function(e){var t=window.videojs.getTech("Flash");t.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV","application/adobe-f4m":"F4M","application/adobe-f4v":"F4V"},t.prototype.featuresTimeupdateEvents=!0}(),function(u,c){"use strict";c.registerPlugin("chromecast",function(e){var t,i,r,a,s,o,n=c.getTech("Chromecast"),l=e;this.canCastCurrentSrc_=function(){var e=n.canPlaySource(this.currentSource());return"maybe"===e||"probably"===e},this.getCastDeviceName=function(){return this.castName_},this.initCastConnection_=function(){null!=u.cast&&(a=this,(t=u.cast.framework.CastContext.getInstance()).addEventListener(u.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,function(e){switch(e.sessionState){case u.cast.framework.SessionState.SESSION_STARTED:this.onLaunchSuccess_();break;case u.cast.framework.SessionState.SESSION_RESUMED:break;case u.cast.framework.SessionState.SESSION_ENDED:this.onCastStopped_()}}.bind(this)),t.setOptions({receiverApplicationId:l.appID?l.appID:u.chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID}),a.trigger("chromecast-initialized"))},this.isCastReady=function(){return!!t},this.isCasting=function(){return!!i},this.launchCasting=function(){},this.onCastStopped_=function(e,t){if(i&&(i.endSession(!0),i=void 0),o.isLive)a.trigger("chromecast-stopped"),this.reset(),this.trigger("chromecast-force-to-live");else{a.currentSrc();var n=r.currentTime;a.trigger("chromecast-stopped"),a.loadTech_("html5"),a.src({src:this.currentSource().rawSrc_}),a.currentTime(n),a.play()}},this.onLaunchSuccess_=function(e){i=u.cast.framework.CastContext.getInstance().getCurrentSession();var t=new u.chrome.cast.media.MediaInfo(l.urn);t.metadata=new u.chrome.cast.media.GenericMediaMetadata,t.metadata.title=l.title,t.metadata.subtitle=l.subtitle;var n=new u.chrome.cast.media.LoadRequest(t);n.currentTime=a.currentTime(),n.customData={server:l.server},this.castName_=i.getCastDevice().friendlyName,o=l.metadata,a.trigger("loading"),i.loadMedia(n).then(function(){r=new u.cast.framework.RemotePlayer,s=new u.cast.framework.RemotePlayerController(r),this.options_.chromecast={cast:u.chrome.cast,apiSession:i,localPlayer:a,remotePlayer:r,remotePlayerController:s},a.trigger("chromecast-media-loaded"),a.loadTech_("Chromecast")}.bind(this),function(e){u.console.log("Error code: "+e)})},this.one("ready",function(){this.initCastConnection_()})})}(window,window.videojs),function(e){"use strict";var t=e.getComponent("Component"),n=e.getTech("Tech"),i=window.chrome,r=e.extend(n,{constructor:function(e,t){n.prototype.constructor.apply(this,arguments),this.apiSession_=this.options_.apiSession,this.localPlayer_=this.options_.localPlayer,this.remotePlayer_=this.options_.remotePlayer,this.remotePlayerController_=this.options_.remotePlayerController,this.currentTime_=this.localPlayer_.currentTime(),this.urn_=this.options_.urn,this.remotePlayer_.paused_=!1,this.remotePlayer_.muted_=!1,this.startProgressTimer_(),this.triggerReady(),this.remotePlayer_.isMuted&&this.remotePlayerController_.muteOrUnmute(),this.localPlayer_.trigger("play")},_playOrPause:function(){this.remotePlayer_.isPaused?this.localPlayer_.trigger("pause"):this.localPlayer_.trigger("play"),this.remotePlayerController_.playOrPause()},buffered:function(){},controls:function(){return!1},currentTime:function(){return this.remotePlayer_.currentTime},dispose:function(){},duration:function(){return this.remotePlayer_.duration},ended:function(){return this.remotePlayer_.duration<=this.remotePlayer_.currentTime},incrementCurrentTime_:function(){this.remotePlayer_&&"PLAYING"===this.remotePlayer_.playerState&&(this.remotePlayer_.currentTime<this.remotePlayer_.duration?(this.currentTime_=this.remotePlayer_.currentTime,this.trigger("timeupdate")):clearInterval(this.progressTime_))},muted:function(){return this.muted_},onSeekSuccess:function(e){},play:function(){this._playOrPause()},pause:function(){this._playOrPause()},paused:function(){return this.remotePlayer_.isPaused},resetSrc_:function(e){e()},seekable:function(){},seek:function(e){this.setCurrentTime(e)},setCurrentTime:function(e){var t=this._remotePlayer.duration;this._remotePlayer.currentTime=Math.min(t-1,e),this.remotePlayerController_.seek()},setMuted:function(e){},setVolume:function(e){},startProgressTimer_:function(){this.progressTimer_&&clearInterval(this.progressTimer_),this.progressTimer_=setInterval(this.incrementCurrentTime_.bind(this),1e3)},stopCasting:function(){this.apiSession_&&(this.apiSession_.endSession(!0),this.apiSession_=void 0)},supportsFullScreen:function(){},supportsStarttime:function(){return!1},volume:function(){}});r.prototype.options_={},r.prototype.featuresVolumeControl=!0,r.prototype.featuresPlaybackRate=!1,r.prototype.movingMediaElementInDOM=!1,r.prototype.featuresFullscreenResize=!1,r.prototype.featuresTimeupdateEvents=!1,r.prototype.featuresProgressEvents=!1,r.prototype.featuresNativeTextTracks=!0,r.prototype.featuresNativeAudioTracks=!0,r.prototype.featuresNativeVideoTracks=!1,r.canPlaySource=function(e){return i&&e.type?this.supportsCasting_(e.type):this.supportsCasting_(e.src)},r.isSupported=function(){return!0},r.supportsCasting_=function(e){return/^application\/(?:dash\+xml|(x-|vnd\.apple\.)mpegurl)/i.test(e)?"probably":/^video\/(mpd|mp4|webm|m3u8)/i.test(e)?"maybe":""},void 0!==n.registerTech?n.registerTech("Chromecast",r):t.registerComponent("Chromecast",r)}(window.videojs,document),function(e,t){"use strict";var n=t.getTech("Html5"),i=t.getTech("Flash");i.prototype.supportsStarttime=function(){return!0},i.prototype.starttime=function(e){void 0!==e&&0<e&&(this.seekable().length?this.setCurrentTime(e):setTimeout(this.starttime.bind(this,e),10))},n.prototype.supportsStarttime=function(){return!1},t.registerPlugin("offset",function(e){var t=e.start,n=e.end,i=e.starttime,r={buffered:this.buffered,duration:this.duration,currentTime:this.currentTime,ended:this.ended,handleTechReady_:this.handleTechReady_};this.resetOffset_=function(e,t){this.offset_={start:e,end:t,duration:void 0!==e&&void 0!==t?t-e:void 0,ended:!1}},this.applyStarttime_=function(){void 0!==this.starttime_&&(this.techGet_("supportsStarttime")?this.techCall_("starttime",this.starttime_+(this.offset_?this.offset_.start:0)):this.one("timeupdate",function(){this.offset_?0===this.starttime_&&0===this.offset_.start||this.currentTime(this.starttime_):0!==this.starttime_&&this.currentTime(this.starttime_)}))},this.starttime=function(e){if(void 0===e)return this.starttime_;this.starttime_=e,this.applyStarttime_()},this.offset=function(e,t,n){var i,r;(r=t)<=(i=e)||void 0===i||void 0===r?(this.offset_=void 0)!==n&&this.starttime(n):(this.resetOffset_(e,t),this.starttime(void 0!==n?n:0))},this.buffered=function(){var e=r.buffered.call(this);return this.offset_&&e&&0<e.length?{length:e.length,_buffer:e,_offset:this.offset_,start:function(e){var t=this._buffer.start(e)-this._offset.start;return t<0?0:t},end:function(e){var t=this._buffer.end(e)-this._offset.start;return t>this._offset.end?this._offset.end:t}}:e},this.duration=function(e){if(this.offset_&&void 0===e){var t=r.duration.call(this);return t<this.offset_.end?t-this.offset_.start:this.offset_.duration}if(void 0===e)return r.duration.call(this);r.duration.call(this,e)},this.currentTime=function(e){if(this.offset_){if(void 0===e){var t=r.currentTime.call(this)-this.offset_.start;return t<0?0:t}var n=e+this.offset_.start;r.currentTime.call(this,n>this.offset_.end?this.offset_.end:n)}else{if(void 0===e)return r.currentTime.call(this);r.currentTime.call(this,e)}},this.ended=function(){return this.offset_?this.offset_.ended:r.ended.call(this)},this.handleTechReady_=function(){this.offset(t,n,i),r.handleTechReady_.call(this)},this.on("timeupdate",function(){this.offset_&&(this.currentTime()>=this.offset_.duration?(this.pause(),this.offset_.ended=!0,this.trigger("ended")):this.offset_.ended=!1)}.bind(this))})}(window,window.videojs),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/document")):"function"==typeof define&&define.amd?define(["video.js","global/document"],t):e.videojsContribQualityLevels=t(e.videojs,e.document)}(this,function(a,s){"use strict";function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}a=a&&a.hasOwnProperty("default")?a.default:a,s=s&&s.hasOwnProperty("default")?s.default:s;var l=function e(t){var n=this;if(a.browser.IS_IE8)for(var i in n=s.createElement("custom"),e.prototype)"constructor"!==i&&(n[i]=e.prototype[i]);return n.id=t.id,n.label=n.id,n.width=t.width,n.height=t.height,n.bitrate=t.bandwidth,n.enabled_=t.enabled,Object.defineProperty(n,"enabled",{get:function(){return n.enabled_()},set:function(e){n.enabled_(e)}}),n},r=function(i){var e,t;function r(){var e,t=o(o(e=i.call(this)||this));if(a.browser.IS_IE8)for(var n in t=s.createElement("custom"),r.prototype)"constructor"!==n&&(t[n]=r.prototype[n]);return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get:function(){return t.selectedIndex_}}),Object.defineProperty(t,"length",{get:function(){return t.levels_.length}}),t||o(e)}t=i,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var n=this.levels_.length;return t=new l(e),""+n in this||Object.defineProperty(this,n,{get:function(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},n.removeQualityLevel=function(e){for(var t=null,n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},n.getQualityLevelById=function(e){for(var t=0,n=this.length;t<n;t++){var i=this[t];if(i.id===e)return i}return null},n.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},r}(a.EventTarget);for(var e in r.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},r.prototype.allowedEvents_)r.prototype["on"+e]=null;var t=a.registerPlugin||a.plugin,n=function(e){return t=this,a.mergeOptions({},e),n=t.qualityLevels,i=new r,t.on("dispose",function e(){i.dispose(),t.qualityLevels=n,t.off("dispose",e)}),t.qualityLevels=function(){return i},t.qualityLevels.VERSION="2.0.9",i;var t,n,i};return t("qualityLevels",n),n.VERSION="2.0.9",n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.THREE=e.THREE||{})}(this,function(e){"use strict";function t(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:0<e?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var n,i,r,a,s,o,V=0,H=1,z=2,U=1,F=2,B=0,X=1,K=2,Ce=1,l=2,Pe=0,G=0,q=1,W=2,Y=3,Q=4,Z=5,Re=100,De=204,ke=205,J=0,ee=1,te=2,ne=3,ie=4,re=5,ae=6,se=7,$=0,j=1,oe=2,le=0,Ie=1,ue=2,ce=3,de=4,he=301,fe=302,pe=303,me=304,ge=305,ve=306,_e=307,Le=1001,Oe=1003,Ne=1004,Ue=1005,Fe=1006,Be=1008,$e=1009,je=1012,Ve=1014,He=1015,ze=1016,Ge=1020,qe=1022,We=1023,u=We,Ye=1026,Xe=1027,Ke=0,p=3e3,c=3001,m=3007,d=3002,h=3004,f=3005,g=3006,v=3200,ye=3201,Qe={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),a=0,function(){for(var e=0;e<36;e++)8===e||13===e||18===e||23===e?r[e]="-":14===e?r[e]="4":(a<=2&&(a=33554432+16777216*Math.random()|0),n=15&a,a>>=4,r[e]=i[19===e?3&n|8:n]);return r.join("")}),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:n<=e?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:n<=e?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Qe.DEG2RAD},radToDeg:function(e){return e*Qe.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};function xe(e,t){this.x=e||0,this.y=t||0}Object.defineProperties(xe.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(xe.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(s=new xe,o=new xe,function(e,t){return s.set(e,e),o.set(t,t),this.clamp(s,o)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}});var _,y,x,b,T,S,E,w,M,A,C,P,R,D,k,I,L,O,N,be=0;function Te(e,t,n,i,r,a,s,o,l,u){Object.defineProperty(this,"id",{value:be++}),this.uuid=Qe.generateUUID(),this.name="",this.image=void 0!==e?e:Te.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Te.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Le,this.wrapT=void 0!==i?i:Le,this.magFilter=void 0!==r?r:Fe,this.minFilter=void 0!==a?a:Be,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:We,this.type=void 0!==o?o:$e,this.offset=new xe(0,0),this.repeat=new xe(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:p,this.version=0,this.onUpdate=null}function Ze(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function Se(e,t,n){this.uuid=Qe.generateUUID(),this.width=e,this.height=t,this.scissor=new Ze(0,0,e,t),this.scissorTest=!1,this.viewport=new Ze(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Fe),this.texture=new Te(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Ee(e,t,n){Se.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function we(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function Je(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function et(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function tt(e,t,n,i,r,a,s,o,l,u,c,d){Te.call(this,null,a,s,o,l,u,i,r,c,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:Oe,this.minFilter=void 0!==u?u:Oe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Me(e,t,n,i,r,a,s,o,l,u){Te.call(this,e=void 0!==e?e:[],t=void 0!==t?t:he,n,i,r,a,s,o,l,u),this.flipY=!1}Te.DEFAULT_IMAGE=void 0,Te.DEFAULT_MAPPING=300,Object.defineProperty(Te.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Te.prototype,t.prototype,{constructor:Te,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t,n,i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=Qe.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:(t=r,void 0!==t.toDataURL?n=t:((n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0,t.width,t.height)),2048<n.width||2048<n.height?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png"))}),i.image=r.uuid}return e.textures[this.uuid]=i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||1<e.x)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case Le:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case Le:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.assign(Ze.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=e.elements,s=a[0],o=a[4],l=a[8],u=a[1],c=a[5],d=a[9],h=a[2],f=a[6],p=a[10];if(Math.abs(o-u)<.01&&Math.abs(l-h)<.01&&Math.abs(d-f)<.01){if(Math.abs(o+u)<.1&&Math.abs(l+h)<.1&&Math.abs(d+f)<.1&&Math.abs(s+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(s+1)/2,g=(c+1)/2,v=(p+1)/2,_=(o+u)/4,y=(l+h)/4,x=(d+f)/4;return g<m&&v<m?r=m<.01?(n=0,i=.707106781):(i=_/(n=Math.sqrt(m)),y/n):v<g?r=g<.01?(i=0,n=.707106781):(n=_/(i=Math.sqrt(g)),x/i):v<.01?(i=n=.707106781,r=0):(n=y/(r=Math.sqrt(v)),i=x/r),this.set(n,i,r,t),this}var b=Math.sqrt((f-d)*(f-d)+(l-h)*(l-h)+(u-o)*(u-o));return Math.abs(b)<.001&&(b=1),this.x=(f-d)/b,this.y=(l-h)/b,this.z=(u-o)/b,this.w=Math.acos((s+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return void 0===_&&(_=new Ze,y=new Ze),_.set(e,e,e,e),y.set(t,t,t,t),this.clamp(_,y)},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Object.assign(Se.prototype,t.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((Ee.prototype=Object.create(Se.prototype)).constructor=Ee).prototype.isWebGLRenderTargetCube=!0,Object.assign(we,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,s){var o=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],d=r[a+0],h=r[a+1],f=r[a+2],p=r[a+3];if(c!==p||o!==d||l!==h||u!==f){var m=1-s,g=o*d+l*h+u*f+c*p,v=0<=g?1:-1,_=1-g*g;if(_>Number.EPSILON){var y=Math.sqrt(_),x=Math.atan2(y,g*v);m=Math.sin(m*x)/y,s=Math.sin(s*x)/y}var b=s*v;if(o=o*m+d*b,l=l*m+h*b,u=u*m+f*b,c=c*m+p*b,m===1-s){var T=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=T,l*=T,u*=T,c*=T}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(we.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(we.prototype,{set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,a=e.order,s=Math.cos,o=Math.sin,l=s(n/2),u=s(i/2),c=s(r/2),d=o(n/2),h=o(i/2),f=o(r/2);return"XYZ"===a?(this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f):"YXZ"===a?(this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f):"ZXY"===a?(this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f):"ZYX"===a?(this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f):"YZX"===a?(this._x=d*u*c+l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c-d*h*f):"XZY"===a&&(this._x=d*u*c-l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c+d*h*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],a=n[8],s=n[1],o=n[5],l=n[9],u=n[2],c=n[6],d=n[10],h=i+o+d;return 0<h?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(s-r)*t):o<i&&d<i?(t=2*Math.sqrt(1+i-o-d),this._w=(c-l)/t,this._x=.25*t,this._y=(r+s)/t,this._z=(a+u)/t):d<o?(t=2*Math.sqrt(1+o-i-d),this._w=(a-u)/t,this._x=(r+s)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+d-i-o),this._w=(s-r)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:(b=new Je,function(e,t){return void 0===b&&(b=new Je),(x=e.dot(t)+1)<1e-6?(x=0,Math.abs(e.x)>Math.abs(e.z)?b.set(-e.y,e.x,0):b.set(0,-e.z,e.y)):b.crossVectors(e,t),this._x=b.x,this._y=b.y,this._z=b.z,this._w=x,this.normalize()}),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+a*s+i*l-r*o,this._y=i*u+a*o+r*s-n*l,this._z=r*u+a*l+n*o-i*s,this._w=a*u-n*s-i*o-r*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,s=a*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=a,this._x=n,this._y=i,this._z=r,this;var o=Math.sqrt(1-s*s);if(Math.abs(o)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var l=Math.atan2(o,s),u=Math.sin((1-t)*l)/o,c=Math.sin(t*l)/o;return this._w=a*u+this._w*c,this._x=n*u+this._x*c,this._y=i*u+this._y*c,this._z=r*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Je.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(P=new we,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(P.setFromEuler(e))}),applyAxisAngle:(C=new we,function(e,t){return this.applyQuaternion(C.setFromAxisAngle(e,t))}),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*i-s*n,u=o*n+s*t-r*i,c=o*i+r*n-a*t,d=-r*t-a*n-s*i;return this.x=l*o+d*-r+u*-s-c*-a,this.y=u*o+d*-a+c*-r-l*-s,this.z=c*o+d*-s+l*-a-u*-r,this},project:(A=new et,function(e){return A.multiplyMatrices(e.projectionMatrix,A.getInverse(e.matrixWorld)),this.applyMatrix4(A)}),unproject:(M=new et,function(e){return M.multiplyMatrices(e.matrixWorld,M.getInverse(e.projectionMatrix)),this.applyMatrix4(M)}),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:(E=new Je,w=new Je,function(e,t){return E.set(e,e,e),w.set(t,t,t),this.clamp(E,w)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,i=this.y,r=this.z;return this.x=i*e.z-r*e.y,this.y=r*e.x-n*e.z,this.z=n*e.y-i*e.x,this},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:(S=new Je,function(e){return S.copy(this).projectOnVector(e),this.sub(S)}),reflect:(T=new Je,function(e){return this.sub(T.copy(e).multiplyScalar(2*this.dot(e)))}),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Qe.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(et.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,a,s,o,l,u,c,d,h,f,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new et).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(N=new Je,function(e){var t=this.elements,n=e.elements,i=1/N.setFromMatrixColumn(e,0).length(),r=1/N.setFromMatrixColumn(e,1).length(),a=1/N.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var d=a*u,h=a*c,f=s*u,p=s*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=h+f*l,t[5]=d-p*l,t[9]=-s*o,t[2]=p-d*l,t[6]=f+h*l,t[10]=a*o}else if("YXZ"===e.order){var m=o*u,g=o*c,v=l*u,_=l*c;t[0]=m+_*s,t[4]=v*s-g,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-s,t[2]=g*s-v,t[6]=_+m*s,t[10]=a*o}else if("ZXY"===e.order){m=o*u,g=o*c,v=l*u,_=l*c;t[0]=m-_*s,t[4]=-a*c,t[8]=v+g*s,t[1]=g+v*s,t[5]=a*u,t[9]=_-m*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){d=a*u,h=a*c,f=s*u,p=s*c;t[0]=o*u,t[4]=f*l-h,t[8]=d*l+p,t[1]=o*c,t[5]=p*l+d,t[9]=h*l-f,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){var y=a*o,x=a*l,b=s*o,T=s*l;t[0]=o*u,t[4]=T-y*c,t[8]=b*c+x,t[1]=c,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=x*c+b,t[10]=y-T*c}else if("XZY"===e.order){y=a*o,x=a*l,b=s*o,T=s*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=y*c+T,t[5]=a*u,t[9]=x*c-b,t[2]=b*c-x,t[6]=s*u,t[10]=T*c+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,i=e._y,r=e._z,a=e._w,s=n+n,o=i+i,l=r+r,u=n*s,c=n*o,d=n*l,h=i*o,f=i*l,p=r*l,m=a*s,g=a*o,v=a*l;return t[0]=1-(h+p),t[4]=c-v,t[8]=d+g,t[1]=c+v,t[5]=1-(u+p),t[9]=f-m,t[2]=d-g,t[6]=f+m,t[10]=1-(u+h),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:(I=new Je,L=new Je,O=new Je,function(e,t,n){var i=this.elements;return O.subVectors(e,t),0===O.lengthSq()&&(O.z=1),O.normalize(),I.crossVectors(n,O),0===I.lengthSq()&&(1===Math.abs(n.z)?O.x+=1e-4:O.z+=1e-4,O.normalize(),I.crossVectors(n,O)),I.normalize(),L.crossVectors(O,I),i[0]=I.x,i[4]=L.x,i[8]=O.x,i[1]=I.y,i[5]=L.y,i[9]=O.y,i[2]=I.z,i[6]=L.z,i[10]=O.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],_=n[7],y=n[11],x=n[15],b=i[0],T=i[4],S=i[8],E=i[12],w=i[1],M=i[5],A=i[9],C=i[13],P=i[2],R=i[6],D=i[10],k=i[14],I=i[3],L=i[7],O=i[11],N=i[15];return r[0]=a*b+s*w+o*P+l*I,r[4]=a*T+s*M+o*R+l*L,r[8]=a*S+s*A+o*D+l*O,r[12]=a*E+s*C+o*k+l*N,r[1]=u*b+c*w+d*P+h*I,r[5]=u*T+c*M+d*R+h*L,r[9]=u*S+c*A+d*D+h*O,r[13]=u*E+c*C+d*k+h*N,r[2]=f*b+p*w+m*P+g*I,r[6]=f*T+p*M+m*R+g*L,r[10]=f*S+p*A+m*D+g*O,r[14]=f*E+p*C+m*k+g*N,r[3]=v*b+_*w+y*P+x*I,r[7]=v*T+_*M+y*R+x*L,r[11]=v*S+_*A+y*D+x*O,r[15]=v*E+_*C+y*k+x*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:(k=new Je,function(e){for(var t=0,n=e.count;t<n;t++)k.x=e.getX(t),k.y=e.getY(t),k.z=e.getZ(t),k.applyMatrix4(this),e.setXYZ(t,k.x,k.y,k.z);return e}),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+r*o*c-i*l*c-r*s*d+n*l*d+i*s*h-n*o*h)+e[7]*(+t*o*h-t*l*d+r*a*d-i*a*h+i*l*u-r*o*u)+e[11]*(+t*l*c-t*s*h-r*a*c+n*a*h+r*s*u-n*l*u)+e[15]*(-i*s*u-t*o*c+t*s*d+i*a*c-n*a*d+n*o*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],c=i[6],d=i[7],h=i[8],f=i[9],p=i[10],m=i[11],g=i[12],v=i[13],_=i[14],y=i[15],x=f*_*d-v*p*d+v*c*m-u*_*m-f*c*y+u*p*y,b=g*p*d-h*_*d-g*c*m+l*_*m+h*c*y-l*p*y,T=h*v*d-g*f*d+g*u*m-l*v*m-h*u*y+l*f*y,S=g*f*c-h*v*c-g*u*p+l*v*p+h*u*_-l*f*_,E=r*x+a*b+s*T+o*S;if(0===E){var w="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(w);return console.warn(w),this.identity()}var M=1/E;return n[0]=x*M,n[1]=(v*p*o-f*_*o-v*s*m+a*_*m+f*s*y-a*p*y)*M,n[2]=(u*_*o-v*c*o+v*s*d-a*_*d-u*s*y+a*c*y)*M,n[3]=(f*c*o-u*p*o-f*s*d+a*p*d+u*s*m-a*c*m)*M,n[4]=b*M,n[5]=(h*_*o-g*p*o+g*s*m-r*_*m-h*s*y+r*p*y)*M,n[6]=(g*c*o-l*_*o-g*s*d+r*_*d+l*s*y-r*c*y)*M,n[7]=(l*p*o-h*c*o+h*s*d-r*p*d-l*s*m+r*c*m)*M,n[8]=T*M,n[9]=(g*f*o-h*v*o-g*a*m+r*v*m+h*a*y-r*f*y)*M,n[10]=(l*v*o-g*u*o+g*a*d-r*v*d-l*a*y+r*u*y)*M,n[11]=(h*u*o-l*f*o-h*a*d+r*f*d+l*a*m-r*u*m)*M,n[12]=S*M,n[13]=(h*v*s-g*f*s+g*a*p-r*v*p-h*a*_+r*f*_)*M,n[14]=(g*u*s-l*v*s-g*a*c+r*v*c+l*a*_-r*u*_)*M,n[15]=(l*f*s-h*u*s+h*a*c-r*f*c-l*a*p+r*u*p)*M,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,u=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,u*s+n,u*o-i*a,0,l*o-i*s,u*o+i*a,r*o*o+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:(R=new Je,D=new et,function(e,t,n){var i=this.elements,r=R.set(i[0],i[1],i[2]).length(),a=R.set(i[4],i[5],i[6]).length(),s=R.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],D.copy(this);var o=1/r,l=1/a,u=1/s;return D.elements[0]*=o,D.elements[1]*=o,D.elements[2]*=o,D.elements[4]*=l,D.elements[5]*=l,D.elements[6]*=l,D.elements[8]*=u,D.elements[9]*=u,D.elements[10]*=u,t.setFromRotationMatrix(D),n.x=r,n.y=a,n.z=s,this}),makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,o=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),d=-(a+r)/(a-r),h=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var s=this.elements,o=1/(t-e),l=1/(n-i),u=1/(a-r),c=(t+e)*o,d=(n+i)*l,h=(a+r)*u;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),((tt.prototype=Object.create(Te.prototype)).constructor=tt).prototype.isDataTexture=!0,((Me.prototype=Object.create(Te.prototype)).constructor=Me).prototype.isCubeTexture=!0,Object.defineProperty(Me.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ae=new Te,nt=new Me;function it(){this.seq=[],this.map={}}var rt=[],at=[],st=new Float32Array(16),ot=new Float32Array(9);function lt(e,t,n){var i=e[0];if(i<=0||0<i)return e;var r=t*n,a=rt[r];if(void 0===a&&(a=new Float32Array(r),rt[r]=a),0!==t){i.toArray(a,0);for(var s=1,o=0;s!==t;++s)o+=n,e[s].toArray(a,o)}return a}function ut(e,t){var n=at[t];void 0===n&&(n=new Int32Array(t),at[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function ct(e,t){e.uniform1f(this.addr,t)}function dt(e,t){e.uniform1i(this.addr,t)}function ht(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function ft(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function pt(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function mt(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function gt(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(ot.set(t.elements),e.uniformMatrix3fv(this.addr,!1,ot))}function vt(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(st.set(t.elements),e.uniformMatrix4fv(this.addr,!1,st))}function _t(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTexture2D(t||Ae,i)}function yt(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTextureCube(t||nt,i)}function xt(e,t){e.uniform2iv(this.addr,t)}function bt(e,t){e.uniform3iv(this.addr,t)}function Tt(e,t){e.uniform4iv(this.addr,t)}function St(e,t){e.uniform1fv(this.addr,t)}function Et(e,t){e.uniform1iv(this.addr,t)}function wt(e,t){e.uniform2fv(this.addr,lt(t,this.size,2))}function Mt(e,t){e.uniform3fv(this.addr,lt(t,this.size,3))}function At(e,t){e.uniform4fv(this.addr,lt(t,this.size,4))}function Ct(e,t){e.uniformMatrix2fv(this.addr,!1,lt(t,this.size,4))}function Pt(e,t){e.uniformMatrix3fv(this.addr,!1,lt(t,this.size,9))}function Rt(e,t){e.uniformMatrix4fv(this.addr,!1,lt(t,this.size,16))}function Dt(e,t,n){var i=t.length,r=ut(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2D(t[a]||Ae,r[a])}function kt(e,t,n){var i=t.length,r=ut(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTextureCube(t[a]||nt,r[a])}function It(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(e){case 5126:return ct;case 35664:return ht;case 35665:return ft;case 35666:return pt;case 35674:return mt;case 35675:return gt;case 35676:return vt;case 35678:case 36198:return _t;case 35680:return yt;case 5124:case 35670:return dt;case 35667:case 35671:return xt;case 35668:case 35672:return bt;case 35669:case 35673:return Tt}}(t.type)}function Lt(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return St;case 35664:return wt;case 35665:return Mt;case 35666:return At;case 35674:return Ct;case 35675:return Pt;case 35676:return Rt;case 35678:return Dt;case 35680:return kt;case 5124:case 35670:return Et;case 35667:case 35671:return xt;case 35668:case 35672:return bt;case 35669:case 35673:return Tt}}(t.type)}function Ot(e){this.id=e,it.call(this)}Ot.prototype.setValue=function(e,t){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var a=n[i];a.setValue(e,t[a.id])}};var Nt=/([\w\d_]+)(\])?(\[|\.)?/g;function Ut(e,t){e.seq.push(t),e.map[t.id]=t}function Ft(e,t,n){var i=e.name,r=i.length;for(Nt.lastIndex=0;;){var a=Nt.exec(i),s=Nt.lastIndex,o=a[1],l="]"===a[2],u=a[3];if(l&&(o|=0),void 0===u||"["===u&&s+2===r){Ut(n,void 0===u?new It(o,e,t):new Lt(o,e,t));break}var c=n.map[o];void 0===c&&Ut(n,c=new Ot(o)),n=c}}function Bt(e,t,n){it.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var a=e.getActiveUniform(t,r),s=a.name;Ft(a,e.getUniformLocation(t,s),this)}}Bt.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},Bt.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},Bt.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var s=t[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,i)}},Bt.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n};var $t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function jt(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(jt.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function a(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(e,t,n){if(e=Qe.euclideanModulo(e,1),t=Qe.clamp(t,0,1),n=Qe.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=a(r,i,e+1/3),this.g=a(r,i,e),this.b=a(r,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(s,o,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u,c=(u=n[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}t&&0<t.length&&(void 0!==(u=$t[t])?this.setHex(u):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=0<t?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,i=e||{h:0,s:0,l:0},r=this.r,a=this.g,s=this.b,o=Math.max(r,a,s),l=Math.min(r,a,s),u=(l+o)/2;if(l===o)n=t=0;else{var c=o-l;switch(n=u<=.5?c/(o+l):c/(2-o-l),o){case r:t=(a-s)/c+(a<s?6:0);break;case a:t=(s-r)/c+2;break;case s:t=(r-a)/c+4}t/=6}return i.h=t,i.s=n,i.l=u,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Vt,Ht,zt={common:{diffuse:{value:new jt(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Ze(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jt(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new jt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Ze(0,0,1,1)}}},Gt={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}},qt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = asin( flipNormal * reflectVec.y ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},Wt={basic:{uniforms:Gt.merge([zt.common,zt.aomap,zt.lightmap,zt.fog]),vertexShader:qt.meshbasic_vert,fragmentShader:qt.meshbasic_frag},lambert:{uniforms:Gt.merge([zt.common,zt.aomap,zt.lightmap,zt.emissivemap,zt.fog,zt.lights,{emissive:{value:new jt(0)}}]),vertexShader:qt.meshlambert_vert,fragmentShader:qt.meshlambert_frag},phong:{uniforms:Gt.merge([zt.common,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.gradientmap,zt.fog,zt.lights,{emissive:{value:new jt(0)},specular:{value:new jt(1118481)},shininess:{value:30}}]),vertexShader:qt.meshphong_vert,fragmentShader:qt.meshphong_frag},standard:{uniforms:Gt.merge([zt.common,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.roughnessmap,zt.metalnessmap,zt.fog,zt.lights,{emissive:{value:new jt(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:qt.meshphysical_vert,fragmentShader:qt.meshphysical_frag},points:{uniforms:Gt.merge([zt.points,zt.fog]),vertexShader:qt.points_vert,fragmentShader:qt.points_frag},dashed:{uniforms:Gt.merge([zt.common,zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qt.linedashed_vert,fragmentShader:qt.linedashed_frag},depth:{uniforms:Gt.merge([zt.common,zt.displacementmap]),vertexShader:qt.depth_vert,fragmentShader:qt.depth_frag},normal:{uniforms:Gt.merge([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,{opacity:{value:1}}]),vertexShader:qt.normal_vert,fragmentShader:qt.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qt.cube_vert,fragmentShader:qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:qt.equirect_vert,fragmentShader:qt.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new Je}},vertexShader:qt.distanceRGBA_vert,fragmentShader:qt.distanceRGBA_frag}};function Yt(e,t){this.min=void 0!==e?e:new xe(1/0,1/0),this.max=void 0!==t?t:new xe(-1/0,-1/0)}function Xt(_,y){var x,b,o,T,S,E,w,M,A=_.context,C=_.state;function P(){var e,t,n,i,r,a=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),s=new Uint16Array([0,1,2,0,2,3]);x=A.createBuffer(),b=A.createBuffer(),A.bindBuffer(A.ARRAY_BUFFER,x),A.bufferData(A.ARRAY_BUFFER,a,A.STATIC_DRAW),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,b),A.bufferData(A.ELEMENT_ARRAY_BUFFER,s,A.STATIC_DRAW),w=A.createTexture(),M=A.createTexture(),C.bindTexture(A.TEXTURE_2D,w),A.texImage2D(A.TEXTURE_2D,0,A.RGB,16,16,0,A.RGB,A.UNSIGNED_BYTE,null),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.NEAREST),C.bindTexture(A.TEXTURE_2D,M),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,16,16,0,A.RGBA,A.UNSIGNED_BYTE,null),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.NEAREST),o={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},e=o,t=A.createProgram(),n=A.createShader(A.FRAGMENT_SHADER),i=A.createShader(A.VERTEX_SHADER),r="precision "+_.getPrecision()+" float;\n",A.shaderSource(n,r+e.fragmentShader),A.shaderSource(i,r+e.vertexShader),A.compileShader(n),A.compileShader(i),A.attachShader(t,n),A.attachShader(t,i),A.linkProgram(t),T=t,S={vertex:A.getAttribLocation(T,"position"),uv:A.getAttribLocation(T,"uv")},E={renderType:A.getUniformLocation(T,"renderType"),map:A.getUniformLocation(T,"map"),occlusionMap:A.getUniformLocation(T,"occlusionMap"),opacity:A.getUniformLocation(T,"opacity"),color:A.getUniformLocation(T,"color"),scale:A.getUniformLocation(T,"scale"),rotation:A.getUniformLocation(T,"rotation"),screenPosition:A.getUniformLocation(T,"screenPosition")}}this.render=function(e,t,n){if(0!==y.length){var i=new Je,r=n.w/n.z,a=.5*n.z,s=.5*n.w,o=16/n.w,l=new xe(o*r,o),u=new Je(1,1,0),c=new xe(1,1),d=new Yt;d.min.set(n.x,n.y),d.max.set(n.x+(n.z-16),n.y+(n.w-16)),void 0===T&&P(),A.useProgram(T),C.initAttributes(),C.enableAttribute(S.vertex),C.enableAttribute(S.uv),C.disableUnusedAttributes(),A.uniform1i(E.occlusionMap,0),A.uniform1i(E.map,1),A.bindBuffer(A.ARRAY_BUFFER,x),A.vertexAttribPointer(S.vertex,2,A.FLOAT,!1,16,0),A.vertexAttribPointer(S.uv,2,A.FLOAT,!1,16,8),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,b),C.disable(A.CULL_FACE),C.buffers.depth.setMask(!1);for(var h=0,f=y.length;h<f;h++){o=16/n.w,l.set(o*r,o);var p=y[h];if(i.set(p.matrixWorld.elements[12],p.matrixWorld.elements[13],p.matrixWorld.elements[14]),i.applyMatrix4(t.matrixWorldInverse),i.applyMatrix4(t.projectionMatrix),u.copy(i),c.x=n.x+u.x*a+a-8,c.y=n.y+u.y*s+s-8,!0===d.containsPoint(c)){C.activeTexture(A.TEXTURE0),C.bindTexture(A.TEXTURE_2D,null),C.activeTexture(A.TEXTURE1),C.bindTexture(A.TEXTURE_2D,w),A.copyTexImage2D(A.TEXTURE_2D,0,A.RGB,c.x,c.y,16,16,0),A.uniform1i(E.renderType,0),A.uniform2f(E.scale,l.x,l.y),A.uniform3f(E.screenPosition,u.x,u.y,u.z),C.disable(A.BLEND),C.enable(A.DEPTH_TEST),A.drawElements(A.TRIANGLES,6,A.UNSIGNED_SHORT,0),C.activeTexture(A.TEXTURE0),C.bindTexture(A.TEXTURE_2D,M),A.copyTexImage2D(A.TEXTURE_2D,0,A.RGBA,c.x,c.y,16,16,0),A.uniform1i(E.renderType,1),C.disable(A.DEPTH_TEST),C.activeTexture(A.TEXTURE1),C.bindTexture(A.TEXTURE_2D,w),A.drawElements(A.TRIANGLES,6,A.UNSIGNED_SHORT,0),p.positionScreen.copy(u),p.customUpdateCallback?p.customUpdateCallback(p):p.updateLensFlares(),A.uniform1i(E.renderType,2),C.enable(A.BLEND);for(var m=0,g=p.lensFlares.length;m<g;m++){var v=p.lensFlares[m];.001<v.opacity&&.001<v.scale&&(u.x=v.x,u.y=v.y,u.z=v.z,o=v.size*v.scale/n.w,l.x=o*r,l.y=o,A.uniform3f(E.screenPosition,u.x,u.y,u.z),A.uniform2f(E.scale,l.x,l.y),A.uniform1f(E.rotation,v.rotation),A.uniform1f(E.opacity,v.opacity),A.uniform3f(E.color,v.color.r,v.color.g,v.color.b),C.setBlending(v.blending,v.blendEquation,v.blendSrc,v.blendDst),_.setTexture2D(v.texture,1),A.drawElements(A.TRIANGLES,6,A.UNSIGNED_SHORT,0))}}}C.enable(A.CULL_FACE),C.enable(A.DEPTH_TEST),C.buffers.depth.setMask(!0),_.resetGLState()}}}function Kt(d,h){var f,p,m,g,v,_,y=d.context,x=d.state,b=new Je,T=new we,S=new Je;function E(){var e,t,n,i=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),r=new Uint16Array([0,1,2,0,2,3]);f=y.createBuffer(),p=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,f),y.bufferData(y.ARRAY_BUFFER,i,y.STATIC_DRAW),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,p),y.bufferData(y.ELEMENT_ARRAY_BUFFER,r,y.STATIC_DRAW),e=y.createProgram(),t=y.createShader(y.VERTEX_SHADER),n=y.createShader(y.FRAGMENT_SHADER),y.shaderSource(t,["precision "+d.getPrecision()+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),y.shaderSource(n,["precision "+d.getPrecision()+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),y.compileShader(t),y.compileShader(n),y.attachShader(e,t),y.attachShader(e,n),y.linkProgram(e),m=e,g={position:y.getAttribLocation(m,"position"),uv:y.getAttribLocation(m,"uv")},v={uvOffset:y.getUniformLocation(m,"uvOffset"),uvScale:y.getUniformLocation(m,"uvScale"),rotation:y.getUniformLocation(m,"rotation"),scale:y.getUniformLocation(m,"scale"),color:y.getUniformLocation(m,"color"),map:y.getUniformLocation(m,"map"),opacity:y.getUniformLocation(m,"opacity"),modelViewMatrix:y.getUniformLocation(m,"modelViewMatrix"),projectionMatrix:y.getUniformLocation(m,"projectionMatrix"),fogType:y.getUniformLocation(m,"fogType"),fogDensity:y.getUniformLocation(m,"fogDensity"),fogNear:y.getUniformLocation(m,"fogNear"),fogFar:y.getUniformLocation(m,"fogFar"),fogColor:y.getUniformLocation(m,"fogColor"),alphaTest:y.getUniformLocation(m,"alphaTest")};var a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");a.width=8,a.height=8;var s=a.getContext("2d");s.fillStyle="white",s.fillRect(0,0,8,8),(_=new Te(a)).needsUpdate=!0}function w(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(e,t){if(0!==h.length){void 0===m&&E(),y.useProgram(m),x.initAttributes(),x.enableAttribute(g.position),x.enableAttribute(g.uv),x.disableUnusedAttributes(),x.disable(y.CULL_FACE),x.enable(y.BLEND),y.bindBuffer(y.ARRAY_BUFFER,f),y.vertexAttribPointer(g.position,2,y.FLOAT,!1,16,0),y.vertexAttribPointer(g.uv,2,y.FLOAT,!1,16,8),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,p),y.uniformMatrix4fv(v.projectionMatrix,!1,t.projectionMatrix.elements),x.activeTexture(y.TEXTURE0),y.uniform1i(v.map,0);var n=0,i=0,r=e.fog;r?(y.uniform3f(v.fogColor,r.color.r,r.color.g,r.color.b),r.isFog?(y.uniform1f(v.fogNear,r.near),y.uniform1f(v.fogFar,r.far),y.uniform1i(v.fogType,1),i=n=1):r.isFogExp2&&(y.uniform1f(v.fogDensity,r.density),y.uniform1i(v.fogType,2),i=n=2)):(y.uniform1i(v.fogType,0),i=n=0);for(var a=0,s=h.length;a<s;a++){(l=h[a]).modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,l.matrixWorld),l.z=-l.modelViewMatrix.elements[14]}h.sort(w);var o=[];for(a=0,s=h.length;a<s;a++){var l,u=(l=h[a]).material;if(!1!==u.visible){l.onBeforeRender(d,e,t,void 0,u,void 0),y.uniform1f(v.alphaTest,u.alphaTest),y.uniformMatrix4fv(v.modelViewMatrix,!1,l.modelViewMatrix.elements),l.matrixWorld.decompose(b,T,S),o[0]=S.x,o[1]=S.y;var c=0;e.fog&&u.fog&&(c=i),n!==c&&(y.uniform1i(v.fogType,c),n=c),null!==u.map?(y.uniform2f(v.uvOffset,u.map.offset.x,u.map.offset.y),y.uniform2f(v.uvScale,u.map.repeat.x,u.map.repeat.y)):(y.uniform2f(v.uvOffset,0,0),y.uniform2f(v.uvScale,1,1)),y.uniform1f(v.opacity,u.opacity),y.uniform3f(v.color,u.color.r,u.color.g,u.color.b),y.uniform1f(v.rotation,u.rotation),y.uniform2fv(v.scale,o),x.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst,u.blendEquationAlpha,u.blendSrcAlpha,u.blendDstAlpha,u.premultipliedAlpha),x.buffers.depth.setTest(u.depthTest),x.buffers.depth.setMask(u.depthWrite),u.map?d.setTexture2D(u.map,0):d.setTexture2D(_,0),y.drawElements(y.TRIANGLES,6,y.UNSIGNED_SHORT,0),l.onAfterRender(d,e,t,void 0,u,void 0)}}x.enable(y.CULL_FACE),d.resetGLState()}}}Wt.physical={uniforms:Gt.merge([Wt.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:qt.meshphysical_vert,fragmentShader:qt.meshphysical_frag},Object.assign(Yt.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(Ht=new xe,function(e,t){var n=Ht.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new xe;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new xe;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new xe).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new xe).copy(e).clamp(this.min,this.max)},distanceToPoint:(Vt=new xe,function(e){return Vt.copy(e).clamp(this.min,this.max).sub(e).length()}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Qt,Zt,Jt,en,tn,nn,rn,an,sn,on,ln,un,cn,dn,hn,fn,pn,mn,gn,vn=0;function _n(){Object.defineProperty(this,"id",{value:vn++}),this.uuid=Qe.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=q,this.side=B,this.shading=l,this.vertexColors=Pe,this.opacity=1,this.transparent=!1,this.blendSrc=De,this.blendDst=ke,this.blendEquation=Re,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ne,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.needsUpdate=!0}function yn(e){_n.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},(this.index0AttributeName=void 0)!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function xn(e){_n.call(this),this.type="MeshDepthMaterial",this.depthPacking=v,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function bn(e,t){this.min=void 0!==e?e:new Je(1/0,1/0,1/0),this.max=void 0!==t?t:new Je(-1/0,-1/0,-1/0)}function Tn(e,t){this.center=void 0!==e?e:new Je,this.radius=void 0!==t?t:0}function Sn(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function En(e,t){this.normal=void 0!==e?e:new Je(1,0,0),this.constant=void 0!==t?t:0}function wn(e,t,n,i,r,a){this.planes=[void 0!==e?e:new En,void 0!==t?t:new En,void 0!==n?n:new En,void 0!==i?i:new En,void 0!==r?r:new En,void 0!==a?a:new En]}function Mn(_,e,m,t){var y=_.context,x=_.state,b=new wn,T=new et,S=e.shadows,E=new xe,w=new xe(t.maxTextureSize,t.maxTextureSize),M=new Je,A=new Je,g=1,v=2,n=1+(g|v),C=new Array(n),P=new Array(n),R={},D=[new Je(1,0,0),new Je(-1,0,0),new Je(0,0,1),new Je(0,0,-1),new Je(0,1,0),new Je(0,-1,0)],k=[new Je(0,1,0),new Je(0,1,0),new Je(0,1,0),new Je(0,1,0),new Je(0,0,1),new Je(0,0,-1)],I=[new Ze,new Ze,new Ze,new Ze,new Ze,new Ze],i=new xn;i.depthPacking=ye,i.clipping=!0;for(var r=Wt.distanceRGBA,a=Gt.clone(r.uniforms),s=0;s!==n;++s){var o=0!=(s&g),l=0!=(s&v),u=i.clone();u.morphTargets=o,u.skinning=l,C[s]=u;var c=new yn({defines:{USE_SHADOWMAP:""},uniforms:a,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,morphTargets:o,skinning:l,clipping:!0});P[s]=c}var L=this;function O(e,t,n,i){var r=e.geometry,a=null,s=C,o=e.customDepthMaterial;if(n&&(s=P,o=e.customDistanceMaterial),o)a=o;else{var l=!1;t.morphTargets&&(r&&r.isBufferGeometry?l=r.morphAttributes&&r.morphAttributes.position&&0<r.morphAttributes.position.length:r&&r.isGeometry&&(l=r.morphTargets&&0<r.morphTargets.length)),e.isSkinnedMesh&&!1===t.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var u=e.isSkinnedMesh&&t.skinning,c=0;l&&(c|=g),u&&(c|=v),a=s[c]}if(_.localClippingEnabled&&!0===t.clipShadows&&0!==t.clippingPlanes.length){var d=a.uuid,h=t.uuid,f=R[d];void 0===f&&(f={},R[d]=f);var p=f[h];void 0===p&&(p=a.clone(),f[h]=p),a=p}a.visible=t.visible,a.wireframe=t.wireframe;var m=t.side;return L.renderSingleSided&&m==K&&(m=B),L.renderReverseSided&&(m===B?m=X:m===X&&(m=B)),a.side=m,a.clipShadows=t.clipShadows,a.clippingPlanes=t.clippingPlanes,a.wireframeLinewidth=t.wireframeLinewidth,a.linewidth=t.linewidth,n&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(i),a}function N(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!e.frustumCulled||b.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld);var r=m.update(e),a=e.material;if(Array.isArray(a))for(var s=r.groups,o=0,l=s.length;o<l;o++){var u=s[o],c=a[u.materialIndex];if(c&&c.visible){var d=O(e,c,i,A);_.renderBufferDirect(n,null,r,d,e,u)}}else if(a.visible){d=O(e,a,i,A);_.renderBufferDirect(n,null,r,d,e,null)}}for(var h=e.children,f=0,p=h.length;f<p;f++)N(h[f],t,n,i)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=U,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,t){if(!1!==L.enabled&&(!1!==L.autoUpdate||!1!==L.needsUpdate)&&0!==S.length){var n;x.disable(y.BLEND),x.buffers.color.setClear(1,1,1,1),x.buffers.depth.setTest(!0),x.setScissorTest(!1);for(var i=0,r=S.length;i<r;i++){var a=S[i],s=a.shadow,o=a&&a.isPointLight;if(void 0!==s){var l=s.camera;if(E.copy(s.mapSize),E.min(w),o){var u=E.x,c=E.y;I[0].set(2*u,c,u,c),I[1].set(0,c,u,c),I[2].set(3*u,c,u,c),I[3].set(u,c,u,c),I[4].set(3*u,0,u,c),I[5].set(u,0,u,c),E.x*=4,E.y*=2}if(null===s.map){var d={minFilter:Oe,magFilter:Oe,format:We};s.map=new Se(E.x,E.y,d),s.map.texture.name=a.name+".shadowMap",l.updateProjectionMatrix()}s.isSpotLightShadow&&s.update(a);var h=s.map,f=s.matrix;A.setFromMatrixPosition(a.matrixWorld),l.position.copy(A),o?(n=6,f.makeTranslation(-A.x,-A.y,-A.z)):(n=1,M.setFromMatrixPosition(a.target.matrixWorld),l.lookAt(M),l.updateMatrixWorld(),f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(l.projectionMatrix),f.multiply(l.matrixWorldInverse)),_.setRenderTarget(h),_.clear();for(var p=0;p<n;p++){if(o){M.copy(l.position),M.add(D[p]),l.up.copy(k[p]),l.lookAt(M),l.updateMatrixWorld();var m=I[p];x.viewport(m)}T.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),b.setFromMatrix(T),N(e,t,l,o)}}else console.warn("THREE.WebGLShadowMap:",a,"has no shadow.")}var g=_.getClearColor(),v=_.getClearAlpha();_.setClearColor(g,v),L.needsUpdate=!1}}}function An(l){var u={};return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),u[e.uuid]},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var t=u[e.uuid];t&&(l.deleteBuffer(t.buffer),delete u[e.uuid])},update:function(e,t){e.isInterleavedBufferAttribute&&(e=e.data);var n,i,r,a,s,o=u[e.uuid];void 0===o?u[e.uuid]=function(e,t){var n=e.array,i=e.dynamic?l.DYNAMIC_DRAW:l.STATIC_DRAW,r=l.createBuffer();l.bindBuffer(t,r),l.bufferData(t,n,i),e.onUploadCallback();var a=l.FLOAT;return n instanceof Float32Array?a=l.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=l.UNSIGNED_SHORT:n instanceof Int16Array?a=l.SHORT:n instanceof Uint32Array?a=l.UNSIGNED_INT:n instanceof Int32Array?a=l.INT:n instanceof Int8Array?a=l.BYTE:n instanceof Uint8Array&&(a=l.UNSIGNED_BYTE),{buffer:r,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(e,t):o.version<e.version&&(n=o.buffer,r=t,a=(i=e).array,s=i.updateRange,l.bindBuffer(r,n),!1===i.dynamic?l.bufferData(r,a,l.STATIC_DRAW):-1===s.count?l.bufferSubData(r,0,a):0===s.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(l.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),o.version=e.version)}}}function Cn(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||Cn.DefaultOrder}function Pn(){this.mask=1}Object.assign(_n.prototype,t.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==q&&(n.blending=this.blending),this.shading!==l&&(n.shading=this.shading),this.side!==B&&(n.side=this.side),this.vertexColors!==Pe&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,n.dithering=this.dithering,t){var r=i(e.textures),a=i(e.images);0<r.length&&(n.textures=r),0<a.length&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((yn.prototype=Object.create(_n.prototype)).constructor=yn).prototype.isShaderMaterial=!0,yn.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gt.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},yn.prototype.toJSON=function(e){var t=_n.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},((xn.prototype=Object.create(_n.prototype)).constructor=xn).prototype.isMeshDepthMaterial=!0,xn.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Object.assign(bn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=e.length;o<l;o+=3){var u=e[o],c=e[o+1],d=e[o+2];u<t&&(t=u),c<n&&(n=c),d<i&&(i=d),r<u&&(r=u),a<c&&(a=c),s<d&&(s=d)}return this.min.set(t,n,i),this.max.set(r,a,s),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=e.count;o<l;o++){var u=e.getX(o),c=e.getY(o),d=e.getZ(o);u<t&&(t=u),c<n&&(n=c),d<i&&(i=d),r<u&&(r=u),a<c&&(a=c),s<d&&(s=d)}return this.min.set(t,n,i),this.max.set(r,a,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(nn=new Je,function(e,t){var n=nn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Je;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Je;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:(tn=new Je,function(e){var s=this;return e.updateMatrixWorld(!0),e.traverse(function(e){var t,n,i=e.geometry;if(void 0!==i)if(i.isGeometry){var r=i.vertices;for(t=0,n=r.length;t<n;t++)tn.copy(r[t]),tn.applyMatrix4(e.matrixWorld),s.expandByPoint(tn)}else if(i.isBufferGeometry){var a=i.attributes.position;if(void 0!==a)for(t=0,n=a.count;t<n;t++)tn.fromBufferAttribute(a,t).applyMatrix4(e.matrixWorld),s.expandByPoint(tn)}}),this}),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new Je).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(en=new Je,function(e){return this.clampPoint(e.center,en),en.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return n=0<e.normal.x?(t=e.normal.x*this.min.x,e.normal.x*this.max.x):(t=e.normal.x*this.max.x,e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){return(t||new Je).copy(e).clamp(this.min,this.max)},distanceToPoint:(Jt=new Je,function(e){return Jt.copy(e).clamp(this.min,this.max).sub(e).length()}),getBoundingSphere:(Zt=new Je,function(e){var t=e||new Tn;return this.getCenter(t.center),t.radius=.5*this.getSize(Zt).length(),t}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Qt=[new Je,new Je,new Je,new Je,new Je,new Je,new Je,new Je],function(e){return this.isEmpty()||(Qt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qt)),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Tn.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(rn=new bn,function(e,t){var n=this.center;void 0!==t?n.copy(t):rn.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),i=t||new Je;return i.copy(e),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){var t=e||new bn;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Sn.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,a,s,o,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=t,u[4]=r,u[5]=o,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:(an=new Je,function(e){for(var t=0,n=e.count;t<n;t++)an.x=e.getX(t),an.y=e.getY(t),an.z=e.getZ(t),an.applyMatrix3(this),e.setXYZ(t,an.x,an.y,an.z);return e}),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],f=n[8],p=i[0],m=i[3],g=i[6],v=i[1],_=i[4],y=i[7],x=i[2],b=i[5],T=i[8];return r[0]=a*p+s*v+o*x,r[3]=a*m+s*_+o*b,r[6]=a*g+s*y+o*T,r[1]=l*p+u*v+c*x,r[4]=l*m+u*_+c*b,r[7]=l*g+u*y+c*T,r[2]=d*p+h*v+f*x,r[5]=d*m+h*_+f*b,r[8]=d*g+h*y+f*T,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-n*r*u+n*s*o+i*r*l-i*a*o},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],a=n[1],s=n[2],o=n[3],l=n[4],u=n[5],c=n[6],d=n[7],h=n[8],f=h*l-u*d,p=u*c-h*o,m=d*o-l*c,g=r*f+a*p+s*m;if(0===g){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var _=1/g;return i[0]=f*_,i[1]=(s*d-h*a)*_,i[2]=(u*a-s*l)*_,i[3]=p*_,i[4]=(h*r-s*c)*_,i[5]=(s*o-u*r)*_,i[6]=m*_,i[7]=(a*c-d*r)*_,i[8]=(l*r-a*o)*_,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}),Object.assign(En.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:(un=new Je,cn=new Je,function(e,t,n){var i=un.subVectors(n,t).cross(cn.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new Je).copy(this.normal).multiplyScalar(n)},intersectLine:(ln=new Je,function(e,t){var n=t||new Je,i=e.delta(ln),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?n.copy(e.start):void 0;var a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||1<a?void 0:n.copy(i).multiplyScalar(a).add(e.start)}),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&0<n||n<0&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new Je).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(sn=new Je,on=new Sn,function(e,t){var n=this.coplanarPoint(sn).applyMatrix4(e),i=t||on.getNormalMatrix(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(wn.prototype,{set:function(e,t,n,i,r,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5],u=n[6],c=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],_=n[15];return t[0].setComponents(s-i,c-o,p-d,_-m).normalize(),t[1].setComponents(s+i,c+o,p+d,_+m).normalize(),t[2].setComponents(s+r,c+l,p+h,_+g).normalize(),t[3].setComponents(s-r,c-l,p-h,_-g).normalize(),t[4].setComponents(s-a,c-u,p-f,_-v).normalize(),t[5].setComponents(s+a,c+u,p+f,_+v).normalize(),this},intersectsObject:(pn=new Tn,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),pn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(pn)}),intersectsSprite:(fn=new Tn,function(e){return fn.center.set(0,0,0),fn.radius=.7071067811865476,fn.applyMatrix4(e.matrixWorld),this.intersectsSphere(fn)}),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:(dn=new Je,hn=new Je,function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];dn.x=0<i.normal.x?e.min.x:e.max.x,hn.x=0<i.normal.x?e.max.x:e.min.x,dn.y=0<i.normal.y?e.min.y:e.max.y,hn.y=0<i.normal.y?e.max.y:e.min.y,dn.z=0<i.normal.z?e.min.z:e.max.z,hn.z=0<i.normal.z?e.max.z:e.min.z;var r=i.distanceToPoint(dn),a=i.distanceToPoint(hn);if(r<0&&a<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}),Cn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Cn.DefaultOrder="XYZ",Object.defineProperties(Cn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Cn.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Qe.clamp,r=e.elements,a=r[0],s=r[4],o=r[8],l=r[1],u=r[5],c=r[9],d=r[2],h=r[6],f=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(h,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,f))):"XZY"===t?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:(gn=new et,function(e,t,n){return gn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gn,t,n)}),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(mn=new we,function(e){return mn.setFromEuler(this),this.setFromQuaternion(mn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Je(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Pn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var Rn,Dn,kn,In,Ln,On,Nn,Un,Fn,Bn,$n,jn,Vn,Hn,zn,Gn,qn,Wn=0;function Yn(){Object.defineProperty(this,"id",{value:Wn++}),this.uuid=Qe.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yn.DefaultUp.clone();var e=new Je,t=new Cn,n=new we,i=new Je(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new et},normalMatrix:{value:new Sn}}),this.matrix=new et,this.matrixWorld=new et,this.matrixAutoUpdate=Yn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Pn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Xn(){Yn.call(this),this.type="Camera",this.matrixWorldInverse=new et,this.projectionMatrix=new et}function Kn(e,t,n,i,r,a){Xn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Qn(e,t,n,i){Xn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Zn(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Je,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new jt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Yn.DefaultUp=new Je(0,1,0),Yn.DefaultMatrixAutoUpdate=!0,Object.assign(Yn.prototype,t.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Gn=new we,function(e,t){return Gn.setFromAxisAngle(e,t),this.quaternion.multiply(Gn),this}),rotateX:(zn=new Je(1,0,0),function(e){return this.rotateOnAxis(zn,e)}),rotateY:(Hn=new Je(0,1,0),function(e){return this.rotateOnAxis(Hn,e)}),rotateZ:(Vn=new Je(0,0,1),function(e){return this.rotateOnAxis(Vn,e)}),translateOnAxis:(jn=new Je,function(e,t){return jn.copy(e).applyQuaternion(this.quaternion),this.position.add(jn.multiplyScalar(t)),this}),translateX:($n=new Je(1,0,0),function(e){return this.translateOnAxis($n,e)}),translateY:(Bn=new Je(0,1,0),function(e){return this.translateOnAxis(Bn,e)}),translateZ:(Fn=new Je(0,0,1),function(e){return this.translateOnAxis(Fn,e)}),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Un=new et,function(e){return e.applyMatrix4(Un.getInverse(this.matrixWorld))}),lookAt:(Nn=new et,function(e){this.isCamera?Nn.lookAt(this.position,e,this.up):Nn.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(Nn)}),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){var t=e||new Je;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Ln=new Je,On=new Je,function(e){var t=e||new we;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ln,t,On),t}),getWorldRotation:(In=new we,function(e){var t=e||new Cn;return this.getWorldQuaternion(In),t.setFromQuaternion(In,this.rotation.order,!1)}),getWorldScale:(Dn=new Je,kn=new we,function(e){var t=e||new Je;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Dn,kn,t),t}),getWorldDirection:(Rn=new we,function(e){var t=e||new Je;return this.getWorldQuaternion(Rn),t.set(0,0,1).applyQuaternion(Rn)}),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},toJSON:function(n){var e=void 0===n||""===n,t={};e&&(n={geometries:{},materials:{},textures:{},images:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,t){return void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(n)),t.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(i.geometry=r(n.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var a=[],s=0,o=this.material.length;s<o;s++)a.push(r(n.materials,this.material[s]));i.material=a}else i.material=r(n.materials,this.material);if(0<this.children.length){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(n).object)}if(e){var l=h(n.geometries),u=h(n.materials),c=h(n.textures),d=h(n.images);0<l.length&&(t.geometries=l),0<u.length&&(t.materials=u),0<c.length&&(t.textures=c),0<d.length&&(t.images=d)}return t.object=i,t;function h(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),Xn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Xn,isCamera:!0,copy:function(e,t){return Yn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:(qn=new we,function(e){var t=e||new Je;return this.getWorldQuaternion(qn),t.set(0,0,-1).applyQuaternion(qn)}),updateMatrixWorld:function(e){Yn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Kn.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Kn,isOrthographicCamera:!0,copy:function(e,t){return Xn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:i,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;a=(r+=c*(this.view.offsetX/l))+c*(this.view.width/l),o=(s-=d*(this.view.offsetY/u))-d*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far)},toJSON:function(e){var t=Yn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Qn.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Qn,isPerspectiveCamera:!0,copy:function(e,t){return Xn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Qe.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Qe.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Qe.RAD2DEG*Math.atan(Math.tan(.5*Qe.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:i,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Qe.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==a){var s=a.fullWidth,o=a.fullHeight;r+=a.offsetX*i/s,t-=a.offsetY*n/o,i*=a.width/s,n*=a.height/o}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far)},toJSON:function(e){var t=Yn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Object.assign(Zn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Jn,ei,ti,ni,ii,ri,ai,si,oi,li,ui,ci,di,hi,fi,pi,mi,gi,vi,_i,yi,xi,bi,Ti,Si,Ei,wi,Mi,Ai,Ci,Pi,Ri,Di,ki,Ii,Li,Oi,Ni,Ui=0;function Fi(){return Ui++}function Bi(){Object.defineProperty(this,"id",{value:Fi()}),this.uuid=Qe.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function $i(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Qe.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function ji(e,t){$i.call(this,new Int8Array(e),t)}function Vi(e,t){$i.call(this,new Uint8Array(e),t)}function Hi(e,t){$i.call(this,new Uint8ClampedArray(e),t)}function zi(e,t){$i.call(this,new Int16Array(e),t)}function Gi(e,t){$i.call(this,new Uint16Array(e),t)}function qi(e,t){$i.call(this,new Int32Array(e),t)}function Wi(e,t){$i.call(this,new Uint32Array(e),t)}function Yi(e,t){$i.call(this,new Float32Array(e),t)}function Xi(e,t){$i.call(this,new Float64Array(e),t)}function Ki(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Qi(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}function Zi(){Object.defineProperty(this,"id",{value:Fi()}),this.uuid=Qe.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Ji(e,t,n,i,r,a){Bi.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new er(e,t,n,i,r,a)),this.mergeVertices()}function er(e,t,n,i,r,a){Zi.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var P=this;i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var R=[],D=[],k=[],I=[],L=0,O=0;function s(e,t,n,i,r,a,s,o,l,u,c){var d,h,f=a/l,p=s/u,m=a/2,g=s/2,v=o/2,_=l+1,y=u+1,x=0,b=0,T=new Je;for(h=0;h<y;h++){var S=h*p-g;for(d=0;d<_;d++){var E=d*f-m;T[e]=E*i,T[t]=S*r,T[n]=v,D.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=0<o?1:-1,k.push(T.x,T.y,T.z),I.push(d/l),I.push(1-h/u),x+=1}}for(h=0;h<u;h++)for(d=0;d<l;d++){var w=L+d+_*h,M=L+d+_*(h+1),A=L+(d+1)+_*(h+1),C=L+(d+1)+_*h;R.push(w,M,C),R.push(M,A,C),b+=6}P.addGroup(O,b,c),O+=b,L+=x}s("z","y","x",-1,-1,n,t,e,a,r,0),s("z","y","x",1,-1,n,t,-e,a,r,1),s("x","z","y",1,1,e,n,t,i,a,2),s("x","z","y",1,-1,e,n,-t,i,a,3),s("x","y","z",1,-1,e,t,n,i,r,4),s("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(R),this.addAttribute("position",new Yi(D,3)),this.addAttribute("normal",new Yi(k,3)),this.addAttribute("uv",new Yi(I,2))}function tr(e,t,n,i){Bi.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new nr(e,t,n,i)),this.mergeVertices()}function nr(e,t,n,i){Zi.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,a,s=e/2,o=t/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,d=u+1,h=e/l,f=t/u,p=[],m=[],g=[],v=[];for(a=0;a<d;a++){var _=a*f-o;for(r=0;r<c;r++){var y=r*h-s;m.push(y,-_,0),g.push(0,0,1),v.push(r/l),v.push(1-a/u)}}for(a=0;a<u;a++)for(r=0;r<l;r++){var x=r+c*a,b=r+c*(a+1),T=r+1+c*(a+1),S=r+1+c*a;p.push(x,b,S),p.push(b,T,S)}this.setIndex(p),this.addAttribute("position",new Yi(m,3)),this.addAttribute("normal",new Yi(g,3)),this.addAttribute("uv",new Yi(v,2))}function ir(e){_n.call(this),this.type="MeshBasicMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function rr(e,t){this.origin=void 0!==e?e:new Je,this.direction=void 0!==t?t:new Je}function ar(e,t){this.start=void 0!==e?e:new Je,this.end=void 0!==t?t:new Je}function sr(e,t,n){this.a=void 0!==e?e:new Je,this.b=void 0!==t?t:new Je,this.c=void 0!==n?n:new Je}function or(e,t){Yn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Zi,this.material=void 0!==t?t:new ir({color:16777215*Math.random()}),this.drawMode=Ke,this.updateMorphTargets()}function lr(r,n,a,i){var s,o,l,u,c=new jt(0),d=0;function h(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return c},setClearColor:function(e,t){c.set(e),h(c,d=void 0!==t?t:1)},getClearAlpha:function(){return d},setClearAlpha:function(e){h(c,d=e)},render:function(e,t,n){var i=e.background;null===i?h(c,d):i&&i.isColor&&(h(i,1),n=!0),(r.autoClear||n)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),i&&i.isCubeTexture?(void 0===l&&(l=new Qn,u=new or(new er(5,5,5),new yn({uniforms:Wt.cube.uniforms,vertexShader:Wt.cube.vertexShader,fragmentShader:Wt.cube.fragmentShader,side:X,depthTest:!1,depthWrite:!1,fog:!1}))),l.projectionMatrix.copy(t.projectionMatrix),l.matrixWorld.extractRotation(t.matrixWorld),l.matrixWorldInverse.getInverse(l.matrixWorld),u.material.uniforms.tCube.value=i,u.modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,u.matrixWorld),a.update(u),r.renderBufferDirect(l,null,u.geometry,u.material,u,null)):i&&i.isTexture&&(void 0===s&&(s=new Kn(-1,1,1,-1,0,1),o=new or(new nr(2,2),new ir({depthTest:!1,depthWrite:!1,fog:!1}))),o.material.map=i,a.update(o),r.renderBufferDirect(s,null,o.geometry,o.material,o,null))}}}function ur(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function cr(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function dr(){var l=[],u=-1,c=[],d=-1;return{opaque:l,transparent:c,init:function(){d=u=-1},push:function(e,t,n,i,r){var a,s;s=n.transparent?(a=c,++d):(a=l,++u);var o=a[s];o?(o.id=e.id,o.object=e,o.geometry=t,o.material=n,o.program=n.program,o.renderOrder=e.renderOrder,o.z=i,o.group=r):(o={id:e.id,object:e,geometry:t,material:n,program:n.program,renderOrder:e.renderOrder,z:i,group:r},a.push(o))},finish:function(){l.length=u+1,c.length=d+1},sort:function(){l.sort(ur),c.sort(cr)}}}function hr(){var r={};return{get:function(e,t){var n=e.id+","+t.id,i=r[n];return void 0===i&&(i=new dr,r[n]=i),i},dispose:function(){r={}}}}function fr(r,a,s){var o,l,u;this.setMode=function(e){o=e},this.setIndex=function(e){l=e.type,u=e.bytesPerElement},this.render=function(e,t){r.drawElements(o,t,l,e*u),s.calls++,s.vertices+=t,o===r.TRIANGLES&&(s.faces+=t/3)},this.renderInstances=function(e,t,n){var i=a.get("ANGLE_instanced_arrays");null!==i?(i.drawElementsInstancedANGLE(o,n,l,t*u,e.maxInstancedCount),s.calls++,s.vertices+=n*e.maxInstancedCount,o===r.TRIANGLES&&(s.faces+=e.maxInstancedCount*n/3)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function pr(a,s,o){var l;this.setMode=function(e){l=e},this.render=function(e,t){a.drawArrays(l,e,t),o.calls++,o.vertices+=t,l===a.TRIANGLES&&(o.faces+=t/3)},this.renderInstances=function(e,t,n){var i=s.get("ANGLE_instanced_arrays");if(null!==i){var r=e.attributes.position;r.isInterleavedBufferAttribute?(n=r.data.count,i.drawArraysInstancedANGLE(l,0,n,e.maxInstancedCount)):i.drawArraysInstancedANGLE(l,t,n,e.maxInstancedCount),o.calls++,o.vertices+=n*e.maxInstancedCount,l===a.TRIANGLES&&(o.faces+=e.maxInstancedCount*n/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function mr(d,h,a){var s={},f={};function o(e){var t=e.target,n=s[t.id];for(var i in null!==n.index&&h.remove(n.index),n.attributes)h.remove(n.attributes[i]);t.removeEventListener("dispose",o),delete s[t.id];var r=f[t.id];r&&(h.remove(r),delete f[t.id]),(r=f[n.id])&&(h.remove(r),delete f[n.id]),a.geometries--}return{get:function(e,t){var n=s[t.id];return n||(t.addEventListener("dispose",o),t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Zi).setFromObject(e)),n=t._bufferGeometry),s[t.id]=n,a.geometries++,n)},update:function(e){var t=e.index,n=e.attributes;for(var i in null!==t&&h.update(t,d.ELEMENT_ARRAY_BUFFER),n)h.update(n[i],d.ARRAY_BUFFER);var r=e.morphAttributes;for(var i in r)for(var a=r[i],s=0,o=a.length;s<o;s++)h.update(a[s],d.ARRAY_BUFFER)},getWireframeAttribute:function(e){var t=f[e.id];if(t)return t;var n,i=[],r=e.index,a=e.attributes;if(null!==r)for(var s=0,o=(n=r.array).length;s<o;s+=3){var l=n[s+0],u=n[s+1],c=n[s+2];i.push(l,u,u,c,c,l)}else for(s=0,o=(n=a.position.array).length/3-1;s<o;s+=3)l=s+0,u=s+1,c=s+2,i.push(l,u,u,c,c,l);return t=new(65535<Qi(i)?Wi:Gi)(i,1),h.update(t,d.ELEMENT_ARRAY_BUFFER),f[e.id]=t}}}function gr(){var n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":t={direction:new Je,color:new jt,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"SpotLight":t={position:new Je,direction:new Je,color:new jt,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"PointLight":t={position:new Je,color:new jt,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"HemisphereLight":t={direction:new Je,skyColor:new jt,groundColor:new jt};break;case"RectAreaLight":t={color:new jt,position:new Je,halfWidth:new Je,halfHeight:new Je}}return n[e.id]=t}}}function vr(e,r,a){var s={};return{update:function(e){var t=a.frame,n=e.geometry,i=r.get(e,n);return s[i.id]!==t&&(n.isGeometry&&i.updateFromObject(e),r.update(i),s[i.id]=t),i},clear:function(){s={}}}}function _r(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),i}Object.assign(Bi.prototype,t.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=(new Sn).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var a=0,s=r.vertexNormals.length;a<s;a++)r.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:(ri=new et,function(e){return ri.makeRotationX(e),this.applyMatrix(ri),this}),rotateY:(ii=new et,function(e){return ii.makeRotationY(e),this.applyMatrix(ii),this}),rotateZ:(ni=new et,function(e){return ni.makeRotationZ(e),this.applyMatrix(ni),this}),translate:(ti=new et,function(e,t,n){return ti.makeTranslation(e,t,n),this.applyMatrix(ti),this}),scale:(ei=new et,function(e,t,n){return ei.makeScale(e,t,n),this.applyMatrix(ei),this}),lookAt:(Jn=new Yn,function(e){Jn.lookAt(e),Jn.updateMatrix(),this.applyMatrix(Jn.matrix)}),fromBufferGeometry:function(e){var a=this,t=null!==e.index?e.index.array:void 0,n=e.attributes,i=n.position.array,s=void 0!==n.normal?n.normal.array:void 0,o=void 0!==n.color?n.color.array:void 0,l=void 0!==n.uv?n.uv.array:void 0,u=void 0!==n.uv2?n.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=[],d=[],h=[],r=0,f=0;r<i.length;r+=3,f+=2)a.vertices.push(new Je(i[r],i[r+1],i[r+2])),void 0!==s&&c.push(new Je(s[r],s[r+1],s[r+2])),void 0!==o&&a.colors.push(new jt(o[r],o[r+1],o[r+2])),void 0!==l&&d.push(new xe(l[f],l[f+1])),void 0!==u&&h.push(new xe(u[f],u[f+1]));function p(e,t,n,i){var r=new Zn(e,t,n,void 0!==s?[c[e].clone(),c[t].clone(),c[n].clone()]:[],void 0!==o?[a.colors[e].clone(),a.colors[t].clone(),a.colors[n].clone()]:[],i);a.faces.push(r),void 0!==l&&a.faceVertexUvs[0].push([d[e].clone(),d[t].clone(),d[n].clone()]),void 0!==u&&a.faceVertexUvs[1].push([h[e].clone(),h[t].clone(),h[n].clone()])}var m=e.groups;if(0<m.length)for(r=0;r<m.length;r++)for(var g=m[r],v=g.start,_=(f=v,v+g.count);f<_;f+=3)void 0!==t?p(t[f],t[f+1],t[f+2],g.materialIndex):p(f,f+1,f+2,g.materialIndex);else if(void 0!==t)for(r=0;r<t.length;r+=3)p(t[r],t[r+1],t[r+2]);else for(r=0;r<i.length/3;r+=3)p(r,r+1,r+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new et;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new Je,t=new Je,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],s=this.vertices[r.b],o=this.vertices[r.c];e.subVectors(o,s),t.subVectors(a,s),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,a,s;for(void 0===e&&(e=!0),s=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)s[t]=new Je;if(e){var o,l,u,c=new Je,d=new Je;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],o=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),d.subVectors(o,l),c.cross(d),s[a.a].add(c),s[a.b].add(c),s[a.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)s[(a=this.faces[i]).a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)s[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var h=(a=this.faces[i]).vertexNormals;3===h.length?(h[0].copy(s[a.a]),h[1].copy(s[a.b]),h[2].copy(s[a.c])):(h[0]=s[a.a].clone(),h[1]=s[a.b].clone(),h[2]=s[a.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var a=new Bi;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s=this.morphNormals[e].faceNormals,o=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Je,u={a:new Je,b:new Je,c:new Je},s.push(l),o.push(u)}var l,u,c=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,i=t.length;n<i;n++)0<n&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new bn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Tn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],d=this.colors,h=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Sn).getNormalMatrix(t));for(var f=0,p=s.length;f<p;f++){var m=s[f].clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(f=0,p=h.length;f<p;f++)d.push(h[f].clone());for(f=0,p=l.length;f<p;f++){var g,v,_,y=l[f],x=y.vertexNormals,b=y.vertexColors;(g=new Zn(y.a+r,y.b+r,y.c+r)).normal.copy(y.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var T=0,S=x.length;T<S;T++)v=x[T].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),g.vertexNormals.push(v);g.color.copy(y.color);for(T=0,S=b.length;T<S;T++)_=b[T],g.vertexColors.push(_.clone());g.materialIndex=y.materialIndex+n,o.push(g)}for(f=0,p=c.length;f<p;f++){var E=c[f],w=[];if(void 0!==E){for(T=0,S=E.length;T<S;T++)w.push(E[T].clone());u.push(w)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,a,s,o,l={},u=[],c=[],d=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var h=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],a=[r.a,r.b,r.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){h.push(n);break}}for(n=h.length-1;0<=n;n--){var p=h[n];for(this.faces.splice(p,1),s=0,o=this.faceVertexUvs.length;s<o;s++)this.faceVertexUvs[s].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,r,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),s&&s.length===t&&(r=[]);for(n=0;n<t;n++){var o=e[n]._id;i&&i.push(a[o]),r&&r.push(s[o])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var s=[],o=[],l={},u=[],c={},d=[],h={};for(r=0;r<this.faces.length;r++){var f=this.faces[r],p=void 0!==this.faceVertexUvs[0][r],m=0<f.normal.length(),g=0<f.vertexNormals.length,v=1!==f.color.r||1!==f.color.g||1!==f.color.b,_=0<f.vertexColors.length,y=0;if(y=S(y=S(y=S(y=S(y=S(y=S(y=S(y=S(y,0,0),1,!0),2,!1),3,p),4,m),5,g),6,v),7,_),s.push(y),s.push(f.a,f.b,f.c),s.push(f.materialIndex),p){var x=this.faceVertexUvs[0][r];s.push(M(x[0]),M(x[1]),M(x[2]))}if(m&&s.push(E(f.normal)),g){var b=f.vertexNormals;s.push(E(b[0]),E(b[1]),E(b[2]))}if(v&&s.push(w(f.color)),_){var T=f.vertexColors;s.push(w(T[0]),w(T[1]),w(T[2]))}}function S(e,t,n){return n?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=o.length/3,o.push(e.x,e.y,e.z)),l[t]}function w(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function M(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=d.length/2,d.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=i,e.data.normals=o,0<u.length&&(e.data.colors=u),0<d.length&&(e.data.uvs=[d]),e.data.faces=s,e},clone:function(){return(new Bi).copy(this)},copy:function(e){var t,n,i,r,a,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.vertices;for(t=0,n=o.length;t<n;t++)this.vertices.push(o[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=c.length;i<r;i++){var d=c[i],h=[];for(a=0,s=d.length;a<s;a++){var f=d[a];h.push(f.clone())}this.faceVertexUvs[t].push(h)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],i=0,r=p[t].vertices.length;i<r;i++)m.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(m.normals=[],i=0,r=p[t].normals.length;i<r;i++)m.normals.push(p[t].normals[i].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],i=0,r=g[t].vertexNormals.length;i<r;i++){var _=g[t].vertexNormals[i],y={};y.a=_.a.clone(),y.b=_.b.clone(),y.c=_.c.clone(),v.vertexNormals.push(y)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],i=0,r=g[t].faceNormals.length;i<r;i++)v.faceNormals.push(g[t].faceNormals[i].clone());this.morphNormals.push(v)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var b=e.skinIndices;for(t=0,n=b.length;t<n;t++)this.skinIndices.push(b[t].clone());var T=e.lineDistances;for(t=0,n=T.length;t<n;t++)this.lineDistances.push(T[t]);var S=e.boundingBox;null!==S&&(this.boundingBox=S.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty($i.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign($i.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new jt),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];t[n++]=a.a,t[n++]=a.b,t[n++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new xe),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Je),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Ze),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(ji.prototype=Object.create($i.prototype)).constructor=ji,(Vi.prototype=Object.create($i.prototype)).constructor=Vi,(Hi.prototype=Object.create($i.prototype)).constructor=Hi,(zi.prototype=Object.create($i.prototype)).constructor=zi,(Gi.prototype=Object.create($i.prototype)).constructor=Gi,(qi.prototype=Object.create($i.prototype)).constructor=qi,(Wi.prototype=Object.create($i.prototype)).constructor=Wi,(Yi.prototype=Object.create($i.prototype)).constructor=Yi,(Xi.prototype=Object.create($i.prototype)).constructor=Xi,Object.assign(Ki.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,a=0;a<r.length;a++){var s=r[a];s.materialIndex!==i&&(i=s.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&0<r[0].length,s=r[1]&&0<r[1].length,o=e.morphTargets,l=o.length;if(0<l){t=[];for(var u=0;u<l;u++)t[u]=[];this.morphTargets.position=t}var c,d=e.morphNormals,h=d.length;if(0<h){c=[];for(u=0;u<h;u++)c[u]=[];this.morphTargets.normal=c}var f=e.skinIndices,p=e.skinWeights,m=f.length===i.length,g=p.length===i.length;for(u=0;u<n.length;u++){var v=n[u];this.vertices.push(i[v.a],i[v.b],i[v.c]);var _=v.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var y=v.normal;this.normals.push(y,y,y)}var x,b=v.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var T=v.color;this.colors.push(T,T,T)}if(!0===a)void 0!==(x=r[0][u])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new xe,new xe,new xe));if(!0===s)void 0!==(x=r[1][u])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new xe,new xe,new xe));for(var S=0;S<l;S++){var E=o[S].vertices;t[S].push(E[v.a],E[v.b],E[v.c])}for(S=0;S<h;S++){var w=d[S].vertexNormals[u];c[S].push(w.a,w.b,w.c)}m&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),g&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}}),Zi.MaxIndex=65535,Object.assign(Zi.prototype,t.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<Qi(e)?Wi:Gi)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new $i(t,arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Sn).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:(hi=new et,function(e){return hi.makeRotationX(e),this.applyMatrix(hi),this}),rotateY:(di=new et,function(e){return di.makeRotationY(e),this.applyMatrix(di),this}),rotateZ:(ci=new et,function(e){return ci.makeRotationZ(e),this.applyMatrix(ci),this}),translate:(ui=new et,function(e,t,n){return ui.makeTranslation(e,t,n),this.applyMatrix(ui),this}),scale:(li=new et,function(e,t,n){return li.makeScale(e,t,n),this.applyMatrix(li),this}),lookAt:(oi=new Yn,function(e){oi.lookAt(e),oi.updateMatrix(),this.applyMatrix(oi.matrix)}),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Yi(3*t.vertices.length,3),i=new Yi(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new Yi(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ki).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new $i(t,3).copyVector3sArray(e.vertices)),0<e.normals.length){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new $i(n,3).copyVector3sArray(e.normals))}if(0<e.colors.length){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new $i(i,3).copyColorsArray(e.colors))}if(0<e.uvs.length){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new $i(r,2).copyVector2sArray(e.uvs))}if(0<e.uvs2.length){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new $i(a,2).copyVector2sArray(e.uvs2))}if(0<e.indices.length){var s=new(65535<Qi(e.indices)?Uint32Array:Uint16Array)(3*e.indices.length);this.setIndex(new $i(s,1).copyIndicesArray(e.indices))}for(var o in this.groups=e.groups,e.morphTargets){for(var l=[],u=e.morphTargets[o],c=0,d=u.length;c<d;c++){var h=u[c],f=new Yi(3*h.length,3);l.push(f.copyVector3sArray(h))}this.morphAttributes[o]=l}if(0<e.skinIndices.length){var p=new Yi(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(0<e.skinWeights.length){var m=new Yi(4*e.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new bn);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:(ai=new bn,si=new Je,function(){null===this.boundingSphere&&(this.boundingSphere=new Tn);var e=this.attributes.position;if(e){var t=this.boundingSphere.center;ai.setFromBufferAttribute(e),ai.getCenter(t);for(var n=0,i=0,r=e.count;i<r;i++)si.x=e.getX(i),si.y=e.getY(i),si.z=e.getZ(i),n=Math.max(n,t.distanceToSquared(si));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new $i(new Float32Array(i.length),3));else for(var r=t.normal.array,a=0,s=r.length;a<s;a++)r[a]=0;var o,l,u,c=t.normal.array,d=new Je,h=new Je,f=new Je,p=new Je,m=new Je;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var v=0,_=n.length;v<_;++v){var y=n[v],x=y.start;for(a=x,s=x+y.count;a<s;a+=3)o=3*g[a+0],l=3*g[a+1],u=3*g[a+2],d.fromArray(i,o),h.fromArray(i,l),f.fromArray(i,u),p.subVectors(f,h),m.subVectors(d,h),p.cross(m),c[o]+=p.x,c[o+1]+=p.y,c[o+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}}else for(a=0,s=i.length;a<s;a+=9)d.fromArray(i,a),h.fromArray(i,a+3),f.fromArray(i,a+6),p.subVectors(f,h),m.subVectors(d,h),p.cross(m),c[a]=p.x,c[a+1]=p.y,c[a+2]=p.z,c[a+3]=p.x,c[a+4]=p.y,c[a+5]=p.z,c[a+6]=p.x,c[a+7]=p.y,c[a+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0);var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,a=e.attributes[i],s=a.array,o=0,l=a.itemSize*t;o<s.length;o++,l++)r[l]=s[o];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,n,i,r=this.attributes.normal,a=0,s=r.count;a<s;a++)e=r.getX(a),t=r.getY(a),n=r.getZ(a),i=1/Math.sqrt(e*e+t*t+n*n),r.setXYZ(a,e*i,t*i,n*i)},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Zi,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],a=r.array,s=r.itemSize,o=new a.constructor(t.length*s),l=0,u=0,c=0,d=t.length;c<d;c++){l=t[c]*s;for(var h=0;h<s;h++)o[u++]=a[l++]}e.addAttribute(i,new $i(o,s))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var a=this.attributes;for(var n in a){var s=a[n];r=Array.prototype.slice.call(s.array);e.data.attributes[n]={itemSize:s.itemSize,type:s.array.constructor.name,array:r,normalized:s.normalized}}var o=this.groups;0<o.length&&(e.data.groups=JSON.parse(JSON.stringify(o)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Zi).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var a=e.attributes;for(t in a){var s=a[t];this.addAttribute(t,s.clone())}var o=e.morphAttributes;for(t in o){var l=[],u=o[t];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,i=c.length;n<i;n++){var d=c[n];this.addGroup(d.start,d.count,d.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(Ji.prototype=Object.create(Bi.prototype)).constructor=Ji,(er.prototype=Object.create(Zi.prototype)).constructor=er,(tr.prototype=Object.create(Bi.prototype)).constructor=tr,(nr.prototype=Object.create(Zi.prototype)).constructor=nr,((ir.prototype=Object.create(_n.prototype)).constructor=ir).prototype.isMeshBasicMaterial=!0,ir.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.assign(rr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new Je).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:(Si=new Je,function(e){return this.origin.copy(this.at(e,Si)),this}),closestPointToPoint:function(e,t){var n=t||new Je;n.subVectors(e,this.origin);var i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:(Ti=new Je,function(e){var t=Ti.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ti.copy(this.direction).multiplyScalar(t).add(this.origin),Ti.distanceToSquared(e))}),distanceSqToSegment:(yi=new Je,xi=new Je,bi=new Je,function(e,t,n,i){yi.copy(e).add(t).multiplyScalar(.5),xi.copy(t).sub(e).normalize(),bi.copy(this.origin).sub(yi);var r,a,s,o,l=.5*e.distanceTo(t),u=-this.direction.dot(xi),c=bi.dot(this.direction),d=-bi.dot(xi),h=bi.lengthSq(),f=Math.abs(1-u*u);if(0<f)if(a=u*c-d,o=l*f,0<=(r=u*d-c))if(-o<=a)if(a<=o){var p=1/f;s=(r*=p)*(r+u*(a*=p)+2*c)+a*(u*r+a+2*d)+h}else a=l,s=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*d)+h;else a=-l,s=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*d)+h;else s=a<=-o?-(r=Math.max(0,-(-u*l+c)))*r+(a=0<r?-l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h:a<=o?(r=0,(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+h):-(r=Math.max(0,-(u*l+c)))*r+(a=0<r?l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h;else a=0<u?-l:l,s=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(xi).multiplyScalar(a).add(yi),s}),intersectSphere:(_i=new Je,function(e,t){_i.subVectors(e.center,this.origin);var n=_i.dot(this.direction),i=_i.dot(_i)-n*n,r=e.radius*e.radius;if(r<i)return null;var a=Math.sqrt(r-i),s=n-a,o=n+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return 0<=n?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,a,s,o,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return i=0<=l?(n=(e.min.x-d.x)*l,(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,(e.min.x-d.x)*l),(a=0<=u?(r=(e.min.y-d.y)*u,(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,(e.min.y-d.y)*u))<n||i<r?null:((n<r||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),(o=0<=c?(s=(e.min.z-d.z)*c,(e.max.z-d.z)*c):(s=(e.max.z-d.z)*c,(e.min.z-d.z)*c))<n||i<s?null:((n<s||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(0<=n?n:i,t)))},intersectsBox:(vi=new Je,function(e){return null!==this.intersectBox(e,vi)}),intersectTriangle:(fi=new Je,pi=new Je,mi=new Je,gi=new Je,function(e,t,n,i,r){pi.subVectors(t,e),mi.subVectors(n,e),gi.crossVectors(pi,mi);var a,s=this.direction.dot(gi);if(0<s){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}fi.subVectors(this.origin,e);var o=a*this.direction.dot(mi.crossVectors(fi,mi));if(o<0)return null;var l=a*this.direction.dot(pi.cross(fi));if(l<0)return null;if(s<o+l)return null;var u=-a*fi.dot(gi);return u<0?null:this.at(u/s,r)}),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(ar.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new Je).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new Je).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new Je;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Ei=new Je,wi=new Je,function(e,t){Ei.subVectors(e,this.start),wi.subVectors(this.end,this.start);var n=wi.dot(wi),i=wi.dot(Ei)/n;return t&&(i=Qe.clamp(i,0,1)),i}),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t),r=n||new Je;return this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(sr,{normal:(Ri=new Je,function(e,t,n,i){var r=i||new Je;r.subVectors(n,t),Ri.subVectors(e,t),r.cross(Ri);var a=r.lengthSq();return 0<a?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}),barycoordFromPoint:(Ai=new Je,Ci=new Je,Pi=new Je,function(e,t,n,i,r){Ai.subVectors(i,t),Ci.subVectors(n,t),Pi.subVectors(e,t);var a=Ai.dot(Ai),s=Ai.dot(Ci),o=Ai.dot(Pi),l=Ci.dot(Ci),u=Ci.dot(Pi),c=a*l-s*s,d=r||new Je;if(0===c)return d.set(-2,-1,-1);var h=1/c,f=(l*o-s*u)*h,p=(a*u-s*o)*h;return d.set(1-f-p,p,f)}),containsPoint:(Mi=new Je,function(e,t,n,i){var r=sr.barycoordFromPoint(e,t,n,i,Mi);return 0<=r.x&&0<=r.y&&r.x+r.y<=1})}),Object.assign(sr.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:(Oi=new Je,Ni=new Je,function(){return Oi.subVectors(this.c,this.b),Ni.subVectors(this.a,this.b),.5*Oi.cross(Ni).length()}),midpoint:function(e){return(e||new Je).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return sr.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new En).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return sr.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return sr.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:(Di=new En,ki=[new ar,new ar,new ar],Ii=new Je,Li=new Je,function(e,t){var n=t||new Je,i=1/0;if(Di.setFromCoplanarPoints(this.a,this.b,this.c),Di.projectPoint(e,Ii),!0===this.containsPoint(Ii))n.copy(Ii);else{ki[0].set(this.a,this.b),ki[1].set(this.b,this.c),ki[2].set(this.c,this.a);for(var r=0;r<ki.length;r++){ki[r].closestPointToPoint(Ii,!0,Li);var a=Ii.distanceToSquared(Li);a<i&&(i=a,n.copy(Li))}}return n}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),or.prototype=Object.assign(Object.create(Yn.prototype),{constructor:or,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Yn.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(0<a.length){var s=r[a[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var o=i.morphTargets;if(void 0!==o&&0<o.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var I=new et,L=new rr,O=new Tn,N=new Je,U=new Je,F=new Je,B=new Je,$=new Je,j=new Je,V=new xe,H=new xe,z=new xe,o=new Je,G=new Je,u=new Je;function q(e,t,n,i,r,a,s){return sr.barycoordFromPoint(e,t,n,i,o),r.multiplyScalar(o.x),a.multiplyScalar(o.y),s.multiplyScalar(o.z),r.add(a).add(s),r.clone()}function W(e,t,n,i,r,a,s){var o=e.material;if(null===(o.side===X?n.intersectTriangle(a,r,i,!0,s):n.intersectTriangle(i,r,a,o.side!==K,s)))return null;u.copy(s),u.applyMatrix4(e.matrixWorld);var l=t.ray.origin.distanceTo(u);return l<t.near||l>t.far?null:{distance:l,point:u.clone(),object:e}}function Y(e,t,n,i,r,a,s,o){N.fromBufferAttribute(i,a),U.fromBufferAttribute(i,s),F.fromBufferAttribute(i,o);var l=W(e,t,n,N,U,F,G);return l&&(r&&(V.fromBufferAttribute(r,a),H.fromBufferAttribute(r,s),z.fromBufferAttribute(r,o),l.uv=q(G,N,U,F,V,H,z)),l.face=new Zn(a,s,o,sr.normal(N,U,F)),l.faceIndex=a),l}return function(e,t){var n,i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),O.copy(i.boundingSphere),O.applyMatrix4(a),!1!==e.ray.intersectsSphere(O)&&(I.getInverse(a),L.copy(e.ray).applyMatrix4(I),null===i.boundingBox||!1!==L.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var s,o,l,u,c,d=i.index,h=i.attributes.position,f=i.attributes.uv;if(null!==d)for(u=0,c=d.count;u<c;u+=3)s=d.getX(u),o=d.getX(u+1),l=d.getX(u+2),(n=Y(this,e,L,h,f,s,o,l))&&(n.faceIndex=Math.floor(u/3),t.push(n));else for(u=0,c=h.count;u<c;u+=3)(n=Y(this,e,L,h,f,s=u,o=u+1,l=u+2))&&(n.index=s,t.push(n))}else if(i.isGeometry){var p,m,g,v,_=Array.isArray(r),y=i.vertices,x=i.faces,b=i.faceVertexUvs[0];0<b.length&&(v=b);for(var T=0,S=x.length;T<S;T++){var E=x[T],w=_?r[E.materialIndex]:r;if(void 0!==w){if(p=y[E.a],m=y[E.b],g=y[E.c],!0===w.morphTargets){var M=i.morphTargets,A=this.morphTargetInfluences;N.set(0,0,0),U.set(0,0,0),F.set(0,0,0);for(var C=0,P=M.length;C<P;C++){var R=A[C];if(0!==R){var D=M[C].vertices;N.addScaledVector(B.subVectors(D[E.a],p),R),U.addScaledVector($.subVectors(D[E.b],m),R),F.addScaledVector(j.subVectors(D[E.c],g),R)}}N.add(p),U.add(m),F.add(g),p=N,m=U,g=F}if(n=W(this,e,L,p,m,g,G)){if(v&&v[T]){var k=v[T];V.copy(k[0]),H.copy(k[1]),z.copy(k[2]),n.uv=q(G,p,m,g,V,H,z)}n.face=E,n.faceIndex=T,t.push(n)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var yr,xr,br,Tr,Sr,Er,wr,Mr,Ar,Cr,Pr,Rr,Dr,kr,Ir=0;function Lr(e){switch(e){case p:return["Linear","( value )"];case c:return["sRGB","( value )"];case d:return["RGBE","( value )"];case h:return["RGBM","( value, 7.0 )"];case f:return["RGBM","( value, 16.0 )"];case g:return["RGBD","( value, 256.0 )"];case m:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Or(e,t){var n=Lr(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Nr(e){return""!==e}function Ur(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Fr(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var n=qt[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Fr(n)})}function Br(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]");return r})}function $r(e,t,n,i,r){var a=e.context,s=n.extensions,o=n.defines,l=i.vertexShader,u=i.fragmentShader,c="SHADOWMAP_TYPE_BASIC";r.shadowMapType===U?c="SHADOWMAP_TYPE_PCF":r.shadowMapType===F&&(c="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case he:case fe:d="ENVMAP_TYPE_CUBE";break;case ve:case _e:d="ENVMAP_TYPE_CUBE_UV";break;case pe:case me:d="ENVMAP_TYPE_EQUIREC";break;case ge:d="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case fe:case me:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case $:f="ENVMAP_BLENDING_MULTIPLY";break;case j:f="ENVMAP_BLENDING_MIX";break;case oe:f="ENVMAP_BLENDING_ADD"}}var p,m,g,v,_,y,x,b,T=0<e.gammaFactor?e.gammaFactor:1,S=(p=s,m=r,g=e.extensions,[(p=p||{}).derivatives||m.envMapCubeUV||m.bumpMap||m.normalMap||m.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(p.fragDepth||m.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",p.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(p.shaderTextureLOD||m.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Nr).join("\n")),E=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),w=a.createProgram();_=n.isRawShaderMaterial?(v=[E,"\n"].filter(Nr).join("\n"),[S,E,"\n"].filter(Nr).join("\n")):(v=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+i.name,E,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+T,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Nr).join("\n"),[S,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+i.name,E,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+T,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.envMap?"#define "+h:"",r.envMap?"#define "+f:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==le?"#define TONE_MAPPING":"",r.toneMapping!==le?qt.tonemapping_pars_fragment:"",r.toneMapping!==le?function(e,t){var n;switch(t){case Ie:n="Linear";break;case ue:n="Reinhard";break;case ce:n="Uncharted2";break;case de:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?qt.encodings_pars_fragment:"",r.mapEncoding?Or("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?Or("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Or("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?(y="linearToOutputTexel",x=r.outputEncoding,b=Lr(x),"vec4 "+y+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Nr).join("\n")),l=Ur(l=Fr(l),r),u=Ur(u=Fr(u),r),n.isShaderMaterial||(l=Br(l),u=Br(u));var M=v+l,A=_+u,C=_r(a,a.VERTEX_SHADER,M),P=_r(a,a.FRAGMENT_SHADER,A);a.attachShader(w,C),a.attachShader(w,P),void 0!==n.index0AttributeName?a.bindAttribLocation(w,0,n.index0AttributeName):!0===r.morphTargets&&a.bindAttribLocation(w,0,"position"),a.linkProgram(w);var R,D,k=a.getProgramInfoLog(w),I=a.getShaderInfoLog(C),L=a.getShaderInfoLog(P),O=!0,N=!0;return!1===a.getProgramParameter(w,a.LINK_STATUS)?(O=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(w,a.VALIDATE_STATUS),"gl.getProgramInfoLog",k,I,L)):""!==k?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",k):""!==I&&""!==L||(N=!1),N&&(this.diagnostics={runnable:O,material:n,programLog:k,vertexShader:{log:I,prefix:v},fragmentShader:{log:L,prefix:_}}),a.deleteShader(C),a.deleteShader(P),this.getUniforms=function(){return void 0===R&&(R=new Bt(a,w,e)),R},this.getAttributes=function(){return void 0===D&&(D=function(e,t,n){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<r;a++){var s=e.getActiveAttrib(t,a).name;i[s]=e.getAttribLocation(t,s)}return i}(a,w)),D},this.destroy=function(){a.deleteProgram(w),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Ir++,this.code=t,this.usedTimes=1,this.program=w,this.vertexShader=C,this.fragmentShader=P,this}function jr(c,d){var l=[],h={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function f(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=p,n===p&&t&&(n=m),n}this.getParameters=function(e,t,n,i,r,a){var s=h[e.type],o=a.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(d.floatVertexTextures)return 1024;var n=d.maxVertexUniforms,i=Math.floor((n-20)/4),r=Math.min(i,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}(a):0,l=c.getPrecision();null!==e.precision&&(l=d.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",l,"instead.");var u=c.getRenderTarget();return{shaderID:s,precision:l,supportsVertexTextures:d.vertexTextures,outputEncoding:f(u?u.texture:null,c.gammaOutput),map:!!e.map,mapEncoding:f(e.map,c.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:f(e.envMap,c.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===ve||e.envMap.mapping===_e),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:f(e.emissiveMap,c.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!n,useFog:e.fog,fogExp:n&&n.isFogExp2,flatShading:e.shading===Ce,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:d.logarithmicDepthBuffer,skinning:e.skinning&&0<o,maxBones:o,useVertexTexture:d.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:c.maxMorphTargets,maxMorphNormals:c.maxMorphNormals,numDirLights:t.directional.length,numPointLights:t.point.length,numSpotLights:t.spot.length,numRectAreaLights:t.rectArea.length,numHemiLights:t.hemi.length,numClippingPlanes:i,numClipIntersection:r,dithering:e.dithering,shadowMapEnabled:c.shadowMap.enabled&&a.receiveShadow&&0<t.shadows.length,shadowMapType:c.shadowMap.type,toneMapping:c.toneMapping,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===K,flipSided:e.side===X,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);for(var r=0;r<a.length;r++)n.push(t[a[r]]);return n.push(e.onBeforeCompile.toString()),n.push(c.gammaOutput),n.join()},this.acquireProgram=function(e,t,n,i){for(var r,a=0,s=l.length;a<s;a++){var o=l[a];if(o.code===i){++(r=o).usedTimes;break}}return void 0===r&&(r=new $r(c,i,e,t,n),l.push(r)),r},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},this.programs=l}function Vr(p,r,m,g,v,_,y){var f="undefined"!=typeof WebGL2RenderingContext&&p instanceof WebGL2RenderingContext;function x(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function b(e){return Qe.isPowerOfTwo(e.width)&&Qe.isPowerOfTwo(e.height)}function T(e,t){return e.generateMipmaps&&t&&e.minFilter!==Oe&&e.minFilter!==Fe}function a(e){return e===Oe||e===Ne||e===Ue?p.NEAREST:p.LINEAR}function S(e){var t=e.target;t.removeEventListener("dispose",S),function(e){var t=g.get(e);if(e.image&&t.__image__webglTextureCube)p.deleteTexture(t.__image__webglTextureCube);else{if(void 0===t.__webglInit)return;p.deleteTexture(t.__webglTexture)}g.remove(e)}(t),y.textures--}function s(e){var t=e.target;t.removeEventListener("dispose",s),function(e){var t=g.get(e),n=g.get(e.texture);if(!e)return;void 0!==n.__webglTexture&&p.deleteTexture(n.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var i=0;i<6;i++)p.deleteFramebuffer(t.__webglFramebuffer[i]),t.__webglDepthbuffer&&p.deleteRenderbuffer(t.__webglDepthbuffer[i]);else p.deleteFramebuffer(t.__webglFramebuffer),t.__webglDepthbuffer&&p.deleteRenderbuffer(t.__webglDepthbuffer);g.remove(e.texture),g.remove(e)}(t),y.textures--}function o(e,t){var n=g.get(e);if(0<e.version&&n.__version!==e.version){var i=e.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==i.complete)return void function(e,t,n){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",S),e.__webglTexture=p.createTexture(),y.textures++);m.activeTexture(p.TEXTURE0+n),m.bindTexture(p.TEXTURE_2D,e.__webglTexture),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,t.flipY),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),p.pixelStorei(p.UNPACK_ALIGNMENT,t.unpackAlignment);var i=x(t.image,v.maxTextureSize);r=t,(r.wrapS!==Le||r.wrapT!==Le||r.minFilter!==Oe&&r.minFilter!==Fe)&&!1===b(i)&&(i=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=Qe.nearestPowerOfTwo(e.width),t.height=Qe.nearestPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}(i));var r;var a=b(i),s=_(t.format),o=_(t.type);E(p.TEXTURE_2D,t,a);var l,u=t.mipmaps;if(t.isDepthTexture){var c=p.DEPTH_COMPONENT;if(t.type===He){if(!f)throw new Error("Float Depth Texture only supported in WebGL2.0");c=p.DEPTH_COMPONENT32F}else f&&(c=p.DEPTH_COMPONENT16);t.format===Ye&&c===p.DEPTH_COMPONENT&&t.type!==je&&t.type!==Ve&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=je,o=_(t.type)),t.format===Xe&&(c=p.DEPTH_STENCIL,t.type!==Ge&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=Ge,o=_(t.type))),m.texImage2D(p.TEXTURE_2D,0,c,i.width,i.height,0,s,o,null)}else if(t.isDataTexture)if(0<u.length&&a){for(var d=0,h=u.length;d<h;d++)l=u[d],m.texImage2D(p.TEXTURE_2D,d,s,l.width,l.height,0,s,o,l.data);t.generateMipmaps=!1}else m.texImage2D(p.TEXTURE_2D,0,s,i.width,i.height,0,s,o,i.data);else if(t.isCompressedTexture)for(var d=0,h=u.length;d<h;d++)l=u[d],t.format!==We&&t.format!==qe?-1<m.getCompressedTextureFormats().indexOf(s)?m.compressedTexImage2D(p.TEXTURE_2D,d,s,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):m.texImage2D(p.TEXTURE_2D,d,s,l.width,l.height,0,s,o,l.data);else if(0<u.length&&a){for(var d=0,h=u.length;d<h;d++)l=u[d],m.texImage2D(p.TEXTURE_2D,d,s,s,o,l);t.generateMipmaps=!1}else m.texImage2D(p.TEXTURE_2D,0,s,s,o,i);T(t,a)&&p.generateMipmap(p.TEXTURE_2D);e.__version=t.version,t.onUpdate&&t.onUpdate(t)}(n,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}m.activeTexture(p.TEXTURE0+t),m.bindTexture(p.TEXTURE_2D,n.__webglTexture)}function E(e,t,n){var i;if(n?(p.texParameteri(e,p.TEXTURE_WRAP_S,_(t.wrapS)),p.texParameteri(e,p.TEXTURE_WRAP_T,_(t.wrapT)),p.texParameteri(e,p.TEXTURE_MAG_FILTER,_(t.magFilter)),p.texParameteri(e,p.TEXTURE_MIN_FILTER,_(t.minFilter))):(p.texParameteri(e,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(e,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),t.wrapS===Le&&t.wrapT===Le||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",t),p.texParameteri(e,p.TEXTURE_MAG_FILTER,a(t.magFilter)),p.texParameteri(e,p.TEXTURE_MIN_FILTER,a(t.minFilter)),t.minFilter!==Oe&&t.minFilter!==Fe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",t)),i=r.get("EXT_texture_filter_anisotropic")){if(t.type===He&&null===r.get("OES_texture_float_linear"))return;if(t.type===ze&&null===r.get("OES_texture_half_float_linear"))return;(1<t.anisotropy||g.get(t).__currentAnisotropy)&&(p.texParameterf(e,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,v.getMaxAnisotropy())),g.get(t).__currentAnisotropy=t.anisotropy)}}function l(e,t,n,i){var r=_(t.texture.format),a=_(t.texture.type);m.texImage2D(i,0,r,t.width,t.height,0,r,a,null),p.bindFramebuffer(p.FRAMEBUFFER,e),p.framebufferTexture2D(p.FRAMEBUFFER,n,i,g.get(t.texture).__webglTexture,0),p.bindFramebuffer(p.FRAMEBUFFER,null)}function u(e,t){p.bindRenderbuffer(p.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_COMPONENT16,t.width,t.height),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_STENCIL,t.width,t.height),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,e)):p.renderbufferStorage(p.RENDERBUFFER,p.RGBA4,t.width,t.height),p.bindRenderbuffer(p.RENDERBUFFER,null)}function c(e){var t=g.get(e),n=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,t){if(t&&t.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(p.bindFramebuffer(p.FRAMEBUFFER,e),!t.depthTexture||!t.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");g.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),o(t.depthTexture,0);var n=g.get(t.depthTexture).__webglTexture;if(t.depthTexture.format===Ye)p.framebufferTexture2D(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.TEXTURE_2D,n,0);else{if(t.depthTexture.format!==Xe)throw new Error("Unknown depthTexture format");p.framebufferTexture2D(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.TEXTURE_2D,n,0)}}(t.__webglFramebuffer,e)}else if(n){t.__webglDepthbuffer=[];for(var i=0;i<6;i++)p.bindFramebuffer(p.FRAMEBUFFER,t.__webglFramebuffer[i]),t.__webglDepthbuffer[i]=p.createRenderbuffer(),u(t.__webglDepthbuffer[i],e)}else p.bindFramebuffer(p.FRAMEBUFFER,t.__webglFramebuffer),t.__webglDepthbuffer=p.createRenderbuffer(),u(t.__webglDepthbuffer,e);p.bindFramebuffer(p.FRAMEBUFFER,null)}this.setTexture2D=o,this.setTextureCube=function(e,t){var n=g.get(e);if(6===e.image.length)if(0<e.version&&n.__version!==e.version){n.__image__webglTextureCube||(e.addEventListener("dispose",S),n.__image__webglTextureCube=p.createTexture(),y.textures++),m.activeTexture(p.TEXTURE0+t),m.bindTexture(p.TEXTURE_CUBE_MAP,n.__image__webglTextureCube),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var i=e&&e.isCompressedTexture,r=e.image[0]&&e.image[0].isDataTexture,a=[],s=0;s<6;s++)a[s]=i||r?r?e.image[s].image:e.image[s]:x(e.image[s],v.maxCubemapSize);var o=b(a[0]),l=_(e.format),u=_(e.type);for(E(p.TEXTURE_CUBE_MAP,e,o),s=0;s<6;s++)if(i)for(var c,d=a[s].mipmaps,h=0,f=d.length;h<f;h++)c=d[h],e.format!==We&&e.format!==qe?-1<m.getCompressedTextureFormats().indexOf(l)?m.compressedTexImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+s,h,l,c.width,c.height,0,c.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):m.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+s,h,l,c.width,c.height,0,l,u,c.data);else r?m.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,l,a[s].width,a[s].height,0,l,u,a[s].data):m.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,l,l,u,a[s]);T(e,o)&&p.generateMipmap(p.TEXTURE_CUBE_MAP),n.__version=e.version,e.onUpdate&&e.onUpdate(e)}else m.activeTexture(p.TEXTURE0+t),m.bindTexture(p.TEXTURE_CUBE_MAP,n.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,t){m.activeTexture(p.TEXTURE0+t),m.bindTexture(p.TEXTURE_CUBE_MAP,g.get(e).__webglTexture)},this.setupRenderTarget=function(e){var t=g.get(e),n=g.get(e.texture);e.addEventListener("dispose",s),n.__webglTexture=p.createTexture(),y.textures++;var i=!0===e.isWebGLRenderTargetCube,r=b(e);if(i){t.__webglFramebuffer=[];for(var a=0;a<6;a++)t.__webglFramebuffer[a]=p.createFramebuffer()}else t.__webglFramebuffer=p.createFramebuffer();if(i){for(m.bindTexture(p.TEXTURE_CUBE_MAP,n.__webglTexture),E(p.TEXTURE_CUBE_MAP,e.texture,r),a=0;a<6;a++)l(t.__webglFramebuffer[a],e,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+a);T(e.texture,r)&&p.generateMipmap(p.TEXTURE_CUBE_MAP),m.bindTexture(p.TEXTURE_CUBE_MAP,null)}else m.bindTexture(p.TEXTURE_2D,n.__webglTexture),E(p.TEXTURE_2D,e.texture,r),l(t.__webglFramebuffer,e,p.COLOR_ATTACHMENT0,p.TEXTURE_2D),T(e.texture,r)&&p.generateMipmap(p.TEXTURE_2D),m.bindTexture(p.TEXTURE_2D,null);e.depthBuffer&&c(e)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(T(t,b(e))){var n=e.isWebGLRenderTargetCube?p.TEXTURE_CUBE_MAP:p.TEXTURE_2D,i=g.get(t).__webglTexture;m.bindTexture(n,i),p.generateMipmap(n),m.bindTexture(n,null)}}}function Hr(){var i={};return{get:function(e){var t=e.uuid,n=i[t];return void 0===n&&(n={},i[t]=n),n},remove:function(e){delete i[e.uuid]},clear:function(){i={}}}}function zr(c,n,l){var t=new function(){var t=!1,a=new Ze,n=null,s=new Ze;return{setMask:function(e){n===e||t||(c.colorMask(e,e,e,e),n=e)},setLocked:function(e){t=e},setClear:function(e,t,n,i,r){!0===r&&(e*=i,t*=i,n*=i),a.set(e,t,n,i),!1===s.equals(a)&&(c.clearColor(e,t,n,i),s.copy(a))},reset:function(){t=!1,n=null,s.set(0,0,0,1)}}},i=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?O(c.DEPTH_TEST):N(c.DEPTH_TEST)},setMask:function(e){n===e||t||(c.depthMask(e),n=e)},setFunc:function(e){if(i!==e){if(e)switch(e){case J:c.depthFunc(c.NEVER);break;case ee:c.depthFunc(c.ALWAYS);break;case te:c.depthFunc(c.LESS);break;case ne:c.depthFunc(c.LEQUAL);break;case ie:c.depthFunc(c.EQUAL);break;case re:c.depthFunc(c.GEQUAL);break;case ae:c.depthFunc(c.GREATER);break;case se:c.depthFunc(c.NOTEQUAL);break;default:c.depthFunc(c.LEQUAL)}else c.depthFunc(c.LEQUAL);i=e}},setLocked:function(e){t=e},setClear:function(e){r!==e&&(c.clearDepth(e),r=e)},reset:function(){t=!1,r=i=n=null}}},r=new function(){var t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,u=null;return{setTest:function(e){e?O(c.STENCIL_TEST):N(c.STENCIL_TEST)},setMask:function(e){n===e||t||(c.stencilMask(e),n=e)},setFunc:function(e,t,n){i===e&&r===t&&a===n||(c.stencilFunc(e,t,n),i=e,r=t,a=n)},setOp:function(e,t,n){s===e&&o===t&&l===n||(c.stencilOp(e,t,n),s=e,o=t,l=n)},setLocked:function(e){t=e},setClear:function(e){u!==e&&(c.clearStencil(e),u=e)},reset:function(){t=!1,u=l=o=s=a=r=i=n=null}}},e=c.getParameter(c.MAX_VERTEX_ATTRIBS),a=new Uint8Array(e),s=new Uint8Array(e),o=new Uint8Array(e),u={},d=null,h=null,f=null,p=null,m=null,g=null,v=null,_=null,y=!1,x=null,b=null,T=null,S=null,E=null,w=null,M=c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS),A=parseFloat(/^WebGL\ ([0-9])/.exec(c.getParameter(c.VERSION))[1]),C=1<=parseFloat(A),P=null,R={},D=new Ze,k=new Ze;function I(e,t,n){var i=new Uint8Array(4),r=c.createTexture();c.bindTexture(e,r),c.texParameteri(e,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(e,c.TEXTURE_MAG_FILTER,c.NEAREST);for(var a=0;a<n;a++)c.texImage2D(t+a,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,i);return r}var L={};function O(e){!0!==u[e]&&(c.enable(e),u[e]=!0)}function N(e){!1!==u[e]&&(c.disable(e),u[e]=!1)}function U(e,t,n,i,r,a,s,o){e!==G?O(c.BLEND):N(c.BLEND),e===Z||e===h&&o===y||(e===W?o?(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):(c.blendEquation(c.FUNC_ADD),c.blendFunc(c.SRC_ALPHA,c.ONE)):e===Y?o?(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ZERO,c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ONE_MINUS_SRC_ALPHA)):(c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ZERO,c.ONE_MINUS_SRC_COLOR)):e===Q?o?(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA)):(c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ZERO,c.SRC_COLOR)):o?(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)):(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)),h=e,y=o),e===Z?(r=r||t,a=a||n,s=s||i,t===f&&r===g||(c.blendEquationSeparate(l(t),l(r)),f=t,g=r),n===p&&i===m&&a===v&&s===_||(c.blendFuncSeparate(l(n),l(i),l(a),l(s)),p=n,m=i,v=a,_=s)):_=v=g=m=p=f=null}function F(e){x!==e&&(e?c.frontFace(c.CW):c.frontFace(c.CCW),x=e)}function B(e){e!==V?(O(c.CULL_FACE),e!==b&&(e===H?c.cullFace(c.BACK):e===z?c.cullFace(c.FRONT):c.cullFace(c.FRONT_AND_BACK))):N(c.CULL_FACE),b=e}function $(e,t,n){e?(O(c.POLYGON_OFFSET_FILL),S===t&&E===n||(c.polygonOffset(t,n),S=t,E=n)):N(c.POLYGON_OFFSET_FILL)}function j(e){void 0===e&&(e=c.TEXTURE0+M-1),P!==e&&(c.activeTexture(e),P=e)}return L[c.TEXTURE_2D]=I(c.TEXTURE_2D,c.TEXTURE_2D,1),L[c.TEXTURE_CUBE_MAP]=I(c.TEXTURE_CUBE_MAP,c.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:t,depth:i,stencil:r},init:function(){t.setClear(0,0,0,1),i.setClear(1),r.setClear(0),O(c.DEPTH_TEST),i.setFunc(ne),F(!1),B(H),O(c.CULL_FACE),O(c.BLEND),U(q)},initAttributes:function(){for(var e=0,t=a.length;e<t;e++)a[e]=0},enableAttribute:function(e){a[e]=1,0===s[e]&&(c.enableVertexAttribArray(e),s[e]=1),0!==o[e]&&(n.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(e,0),o[e]=0)},enableAttributeAndDivisor:function(e,t){a[e]=1,0===s[e]&&(c.enableVertexAttribArray(e),s[e]=1),o[e]!==t&&(n.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(e,t),o[e]=t)},disableUnusedAttributes:function(){for(var e=0,t=s.length;e!==t;++e)s[e]!==a[e]&&(c.disableVertexAttribArray(e),s[e]=0)},enable:O,disable:N,getCompressedTextureFormats:function(){if(null===d&&(d=[],n.get("WEBGL_compressed_texture_pvrtc")||n.get("WEBGL_compressed_texture_s3tc")||n.get("WEBGL_compressed_texture_etc1")))for(var e=c.getParameter(c.COMPRESSED_TEXTURE_FORMATS),t=0;t<e.length;t++)d.push(e[t]);return d},setBlending:U,setMaterial:function(e){e.side===K?N(c.CULL_FACE):O(c.CULL_FACE),F(e.side===X),!0===e.transparent?U(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):U(G),i.setFunc(e.depthFunc),i.setTest(e.depthTest),i.setMask(e.depthWrite),t.setMask(e.colorWrite),$(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:F,setCullFace:B,setLineWidth:function(e){e!==T&&(C&&c.lineWidth(e),T=e)},setPolygonOffset:$,getScissorTest:function(){return w},setScissorTest:function(e){(w=e)?O(c.SCISSOR_TEST):N(c.SCISSOR_TEST)},activeTexture:j,bindTexture:function(e,t){null===P&&j();var n=R[P];void 0===n&&(n={type:void 0,texture:void 0},R[P]=n),n.type===e&&n.texture===t||(c.bindTexture(e,t||L[e]),n.type=e,n.texture=t)},compressedTexImage2D:function(){try{c.compressedTexImage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{c.texImage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===D.equals(e)&&(c.scissor(e.x,e.y,e.z,e.w),D.copy(e))},viewport:function(e){!1===k.equals(e)&&(c.viewport(e.x,e.y,e.z,e.w),k.copy(e))},reset:function(){for(var e=0;e<s.length;e++)1===s[e]&&(c.disableVertexAttribArray(e),s[e]=0);u={},R={},b=x=h=P=d=null,t.reset(),i.reset(),r.reset()}}}function Gr(t,n,e){var i;function r(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var a=void 0!==e.precision?e.precision:"highp",s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var o=!0===e.logarithmicDepthBuffer&&!!n.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_TEXTURE_SIZE),d=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),h=t.getParameter(t.MAX_VERTEX_ATTRIBS),f=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),p=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=0<u,v=!!n.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var e=n.get("EXT_texture_filter_anisotropic");return i=null!==e?t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:o,maxTextures:l,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:d,maxAttributes:h,maxVertexUniforms:f,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v}}function qr(e){Qn.call(this),this.cameras=e||[]}function Wr(i){var r=this,s=null,o=null;"VRFrameData"in window&&(o=new window.VRFrameData);var l=new et,u=new et,c=new et,d=new Qn;d.bounds=new Ze(0,0,.5,1),d.layers.enable(1);var h=new Qn;h.bounds=new Ze(.5,0,.5,1),h.layers.enable(2);var a,f,p=new qr([d,h]);p.layers.enable(1),p.layers.enable(2),window.addEventListener("vrdisplaypresentchange",function(){if(s.isPresenting){var e=s.getEyeParameters("left"),t=e.renderWidth,n=e.renderHeight;f=i.getPixelRatio(),a=i.getSize(),i.setDrawingBufferSize(2*t,n,1)}else r.enabled&&i.setDrawingBufferSize(a.width,a.height,f)},!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return s},this.setDevice=function(e){void 0!==e&&(s=e)},this.getCamera=function(e){if(null===s)return e;s.depthNear=e.near,s.depthFar=e.far,s.getFrameData(o);var t=o.pose;null!==t.position?e.position.fromArray(t.position):e.position.set(0,0,0),null!==t.orientation&&e.quaternion.fromArray(t.orientation),e.updateMatrixWorld();var n=s.stageParameters;if(this.standing&&n&&(u.fromArray(n.sittingToStandingTransform),c.getInverse(u),e.matrixWorld.multiply(u),e.matrixWorldInverse.multiply(c)),!1===s.isPresenting)return e;p.matrixWorld.copy(e.matrixWorld),p.matrixWorldInverse.copy(e.matrixWorldInverse),d.matrixWorldInverse.fromArray(o.leftViewMatrix),h.matrixWorldInverse.fromArray(o.rightViewMatrix),this.standing&&n&&(d.matrixWorldInverse.multiply(c),h.matrixWorldInverse.multiply(c));var i=e.parent;null!==i&&(l.getInverse(i.matrixWorld),d.matrixWorldInverse.multiply(l),h.matrixWorldInverse.multiply(l)),d.matrixWorld.getInverse(d.matrixWorldInverse),h.matrixWorld.getInverse(h.matrixWorldInverse),d.projectionMatrix.fromArray(o.leftProjectionMatrix),h.projectionMatrix.fromArray(o.rightProjectionMatrix),p.projectionMatrix.copy(d.projectionMatrix);var r=s.getLayers();if(r.length){var a=r[0];null!==a.leftBounds&&4===a.leftBounds.length&&d.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&h.bounds.fromArray(a.rightBounds)}return p},this.getStandingMatrix=function(){return u},this.submitFrame=function(){s&&s.isPresenting&&s.submitFrame()}}function Yr(n){var i={};return{get:function(e){if(void 0!==i[e])return i[e];var t;switch(e){case"WEBGL_depth_texture":t=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":t=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":t=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":t=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":t=n.getExtension("WEBGL_compressed_texture_etc1");break;default:t=n.getExtension(e)}return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),i[e]=t}}}function Xr(){var c=this,d=null,h=0,f=!1,p=!1,m=new En,g=new Sn,v={value:null,needsUpdate:!1};function _(){v.value!==d&&(v.value=d,v.needsUpdate=0<h),c.numPlanes=h,c.numIntersection=0}function y(e,t,n,i){var r=null!==e?e.length:0,a=null;if(0!==r){if(a=v.value,!0!==i||null===a){var s=n+4*r,o=t.matrixWorldInverse;g.getNormalMatrix(o),(null===a||a.length<s)&&(a=new Float32Array(s));for(var l=0,u=n;l!==r;++l,u+=4)m.copy(e[l]).applyMatrix4(o,g),m.normal.toArray(a,u),a[u+3]=m.constant}v.value=a,v.needsUpdate=!0}return c.numPlanes=r,a}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,n){var i=0!==e.length||t||0!==h||f;return f=t,d=y(e,n,0),h=e.length,i},this.beginShadows=function(){p=!0,y(null)},this.endShadows=function(){p=!1,_()},this.setState=function(e,t,n,i,r,a){if(!f||null===e||0===e.length||p&&!n)p?y(null):_();else{var s=p?0:h,o=4*s,l=r.clippingState||null;v.value=l,l=y(e,i,o,a);for(var u=0;u!==o;++u)l[u]=d[u];r.clippingState=l,this.numIntersection=t?this.numPlanes:0,this.numPlanes+=s}}}function Kr(e){console.log("THREE.WebGLRenderer","86");var r=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,f=[],p=null,R=new Float32Array(8),m=[],g=[];this.domElement=r,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Ie,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var D,k=this,I=null,u=null,d=null,L=-1,O="",N=null,U=null,c=new Ze,h=null,v=new Ze,F=0,x=r.width,B=r.height,$=1,_=new Ze(0,0,x,B),y=!1,b=new Ze(0,0,x,B),T=new wn,j=new Xr,V=!1,H=!1,S=new et,z=new Je,E=new et,w=new et,G={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},M={geometries:0,textures:0},A={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:A,memory:M,programs:null};try{var C={alpha:n,depth:i,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l};if(null===(D=t||r.getContext("webgl",C)||r.getContext("experimental-webgl",C)))throw null!==r.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===D.getShaderPrecisionFormat&&(D.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),r.addEventListener("webglcontextlost",me,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var q=new Yr(D);q.get("WEBGL_depth_texture"),q.get("OES_texture_float"),q.get("OES_texture_float_linear"),q.get("OES_texture_half_float"),q.get("OES_texture_half_float_linear"),q.get("OES_standard_derivatives"),q.get("ANGLE_instanced_arrays"),q.get("OES_element_index_uint")&&(Zi.MaxIndex=4294967296);var W=new Gr(D,q,e),Y=new zr(D,q,Ae),X=new Hr,P=new Vr(D,q,Y,X,W,Ae,M),K=new An(D),Q=new mr(D,K,M),Z=new vr(D,Q,A),J=new jr(this,W),ee=new gr,te=new hr,ne=new lr(this,Y,Z,o),ie=new Wr(this);this.info.programs=J.programs;var re=new pr(D,q,A),ae=new fr(D,q,A);function se(){return null===u?$:1}function oe(){Y.init(),Y.scissor(c.copy(_).multiplyScalar($)),Y.viewport(v.copy(b).multiplyScalar($))}function le(){N=I=null,O="",L=-1,Y.reset()}oe(),this.context=D,this.capabilities=W,this.extensions=q,this.properties=X,this.renderLists=te,this.state=Y,this.vr=ie;var ue=new Mn(this,G,Z,W);this.shadowMap=ue;var ce,de,he,fe=new Kt(this,m),pe=new Xt(this,g);function me(e){e.preventDefault(),le(),oe(),X.clear(),Z.clear()}function ge(e){var t,n=e.target;n.removeEventListener("dispose",ge),ve(t=n),X.remove(t)}function ve(e){var t=X.get(e).program;(e.program=void 0)!==t&&J.releaseProgram(t)}function _e(e,t){return Math.abs(t[0])-Math.abs(e[0])}function ye(e,t,n,i){for(var r=0,a=e.length;r<a;r++){var s=e[r],o=s.object,l=s.geometry,u=void 0===i?s.material:i,c=s.group;if(n.isArrayCamera)for(var d=(U=n).cameras,h=0,f=d.length;h<f;h++){var p=d[h];if(o.layers.test(p.layers)){var m=p.bounds,g=m.x*x,v=m.y*B,_=m.z*x,y=m.w*B;k.setViewport(g,v,_,y),k.setScissor(g,v,_,y),k.setScissorTest(!0),xe(o,t,p,l,u,c)}}else U=null,xe(o,t,n,l,u,c)}}function xe(e,t,n,i,r,a){if(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.onBeforeRender(k,t,n,i,r,a),e.isImmediateRenderObject){Y.setMaterial(r);var s=Te(n,t.fog,r,e);O="",o=s,l=r,e.render(function(e){k.renderBufferImmediate(e,o,l)})}else k.renderBufferDirect(n,t.fog,i,r,e,a);var o,l;e.onAfterRender(k,t,n,i,r,a)}function be(e,t,n){var i=X.get(e),r=J.getParameters(e,G,t,j.numPlanes,j.numIntersection,n),a=J.getProgramCode(e,r),s=i.program,o=!0;if(void 0===s)e.addEventListener("dispose",ge);else if(s.code!==a)ve(e);else{if(void 0!==r.shaderID)return;o=!1}if(o){if(r.shaderID){var l=Wt[r.shaderID];i.shader={name:e.type,uniforms:Gt.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader),s=J.acquireProgram(e,i.shader,r,a),i.program=s,e.program=s}var u=s.getAttributes();if(e.morphTargets)for(var c=e.numSupportedMorphTargets=0;c<k.maxMorphTargets;c++)0<=u["morphTarget"+c]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(c=e.numSupportedMorphNormals=0;c<k.maxMorphNormals;c++)0<=u["morphNormal"+c]&&e.numSupportedMorphNormals++;var d=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=j.numPlanes,i.numIntersection=j.numIntersection,d.clippingPlanes=j.uniform),i.fog=t,i.lightsHash=G.hash,e.lights&&(d.ambientLightColor.value=G.ambient,d.directionalLights.value=G.directional,d.spotLights.value=G.spot,d.rectAreaLights.value=G.rectArea,d.pointLights.value=G.point,d.hemisphereLights.value=G.hemi,d.directionalShadowMap.value=G.directionalShadowMap,d.directionalShadowMatrix.value=G.directionalShadowMatrix,d.spotShadowMap.value=G.spotShadowMap,d.spotShadowMatrix.value=G.spotShadowMatrix,d.pointShadowMap.value=G.pointShadowMap,d.pointShadowMatrix.value=G.pointShadowMatrix);var h=i.program.getUniforms(),f=Bt.seqWithValue(h.seq,d);i.uniformsList=f}function Te(e,t,n,i){F=0;var r=X.get(n);if(V&&(H||e!==N)){var a=e===N&&n.id===L;j.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,a)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:n.lights&&r.lightsHash!==G.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===j.numPlanes&&r.numIntersection===j.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(be(n,t,i),n.needsUpdate=!1);var s,o,l,u,c,d,h,f,p,m,g,v,_=!1,y=!1,x=!1,b=r.program,T=b.getUniforms(),S=r.shader.uniforms;if(b.id!==I&&(D.useProgram(b.program),I=b.id,x=y=_=!0),n.id!==L&&(L=n.id,y=!0),_||e!==N){if(T.setValue(D,"projectionMatrix",e.projectionMatrix),W.logarithmicDepthBuffer&&T.setValue(D,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),N!==(U||e)&&(N=U||e,x=y=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var E=T.map.cameraPosition;void 0!==E&&E.setValue(D,z.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&T.setValue(D,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){T.setOptional(D,i,"bindMatrix"),T.setOptional(D,i,"bindMatrixInverse");var w=i.skeleton;if(w){var M=w.bones;if(W.floatVertexTextures){if(void 0===w.boneTexture){var A=Math.sqrt(4*M.length);A=Qe.nextPowerOfTwo(Math.ceil(A)),A=Math.max(A,4);var C=new Float32Array(A*A*4);C.set(w.boneMatrices);var P=new tt(C,A,A,We,He);w.boneMatrices=C,w.boneTexture=P,w.boneTextureSize=A}T.setValue(D,"boneTexture",w.boneTexture),T.setValue(D,"boneTextureSize",w.boneTextureSize)}else T.setOptional(D,w,"boneMatrices")}}return y&&(T.setValue(D,"toneMappingExposure",k.toneMappingExposure),T.setValue(D,"toneMappingWhitePoint",k.toneMappingWhitePoint),n.lights&&(v=x,(g=S).ambientLightColor.needsUpdate=v,g.directionalLights.needsUpdate=v,g.pointLights.needsUpdate=v,g.spotLights.needsUpdate=v,g.rectAreaLights.needsUpdate=v,g.hemisphereLights.needsUpdate=v),t&&n.fog&&(m=t,(p=S).fogColor.value=m.color,m.isFog?(p.fogNear.value=m.near,p.fogFar.value=m.far):m.isFogExp2&&(p.fogDensity.value=m.density)),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial)&&function(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity);e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity);t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap);if(void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var i=n.offset,r=n.repeat;e.offsetRepeat.value.set(i.x,i.y,r.x,r.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}(S,n),n.isLineBasicMaterial?Se(S,n):n.isLineDashedMaterial?(Se(S,n),f=n,(h=S).dashSize.value=f.dashSize,h.totalSize.value=f.dashSize+f.gapSize,h.scale.value=f.scale):n.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*$,e.scale.value=.5*B,e.map.value=t.map,null!==t.map){var n=t.map.offset,i=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,i.x,i.y)}}(S,n):n.isMeshLambertMaterial?(c=S,(d=n).emissiveMap&&(c.emissiveMap.value=d.emissiveMap)):n.isMeshToonMaterial?(Ee(l=S,u=n),u.gradientMap&&(l.gradientMap.value=u.gradientMap)):n.isMeshPhongMaterial?Ee(S,n):n.isMeshPhysicalMaterial?(o=n,(s=S).clearCoat.value=o.clearCoat,s.clearCoatRoughness.value=o.clearCoatRoughness,we(s,o)):n.isMeshStandardMaterial?we(S,n):n.isMeshDepthMaterial?n.displacementMap&&(S.displacementMap.value=n.displacementMap,S.displacementScale.value=n.displacementScale,S.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(S,n),void 0!==S.ltcMat&&(S.ltcMat.value=zt.LTC_MAT_TEXTURE),void 0!==S.ltcMag&&(S.ltcMag.value=zt.LTC_MAG_TEXTURE),Bt.upload(D,r.uniformsList,S,k)),T.setValue(D,"modelViewMatrix",i.modelViewMatrix),T.setValue(D,"normalMatrix",i.normalMatrix),T.setValue(D,"modelMatrix",i.matrixWorld),b}function Se(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function Ee(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function we(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function Me(e,t){var n,i,r,a,s,o,l,u,c=0,d=0,h=0,f=t.matrixWorldInverse,p=0,m=0,g=0,v=0,_=0;for(n=0,i=e.length;n<i;n++)if(s=(r=e[n]).color,o=r.intensity,l=r.distance,u=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)c+=s.r*o,d+=s.g*o,h+=s.b*o;else if(r.isDirectionalLight){(y=ee.get(r)).color.copy(r.color).multiplyScalar(r.intensity),y.direction.setFromMatrixPosition(r.matrixWorld),z.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub(z),y.direction.transformDirection(f),y.shadow=r.castShadow,r.castShadow&&(a=r.shadow,y.shadowBias=a.bias,y.shadowRadius=a.radius,y.shadowMapSize=a.mapSize),G.directionalShadowMap[p]=u,G.directionalShadowMatrix[p]=r.shadow.matrix,G.directional[p]=y,p++}else if(r.isSpotLight){(y=ee.get(r)).position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(f),y.color.copy(s).multiplyScalar(o),y.distance=l,y.direction.setFromMatrixPosition(r.matrixWorld),z.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub(z),y.direction.transformDirection(f),y.coneCos=Math.cos(r.angle),y.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(a=r.shadow,y.shadowBias=a.bias,y.shadowRadius=a.radius,y.shadowMapSize=a.mapSize),G.spotShadowMap[g]=u,G.spotShadowMatrix[g]=r.shadow.matrix,G.spot[g]=y,g++}else if(r.isRectAreaLight){(y=ee.get(r)).color.copy(s).multiplyScalar(o/(r.width*r.height)),y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(f),w.identity(),E.copy(r.matrixWorld),E.premultiply(f),w.extractRotation(E),y.halfWidth.set(.5*r.width,0,0),y.halfHeight.set(0,.5*r.height,0),y.halfWidth.applyMatrix4(w),y.halfHeight.applyMatrix4(w),G.rectArea[v]=y,v++}else if(r.isPointLight){(y=ee.get(r)).position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(f),y.color.copy(r.color).multiplyScalar(r.intensity),y.distance=r.distance,y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(a=r.shadow,y.shadowBias=a.bias,y.shadowRadius=a.radius,y.shadowMapSize=a.mapSize),G.pointShadowMap[m]=u,G.pointShadowMatrix[m]=r.shadow.matrix,G.point[m]=y,m++}else if(r.isHemisphereLight){var y;(y=ee.get(r)).direction.setFromMatrixPosition(r.matrixWorld),y.direction.transformDirection(f),y.direction.normalize(),y.skyColor.copy(r.color).multiplyScalar(o),y.groundColor.copy(r.groundColor).multiplyScalar(o),G.hemi[_]=y,_++}G.ambient[0]=c,G.ambient[1]=d,G.ambient[2]=h,G.directional.length=p,G.spot.length=g,G.rectArea.length=v,G.point.length=m,G.hemi.length=_,G.hash=p+","+m+","+g+","+v+","+_+","+G.shadows.length}function Ae(e){var t;if(1e3===e)return D.REPEAT;if(e===Le)return D.CLAMP_TO_EDGE;if(1002===e)return D.MIRRORED_REPEAT;if(e===Oe)return D.NEAREST;if(e===Ne)return D.NEAREST_MIPMAP_NEAREST;if(e===Ue)return D.NEAREST_MIPMAP_LINEAR;if(e===Fe)return D.LINEAR;if(1007===e)return D.LINEAR_MIPMAP_NEAREST;if(e===Be)return D.LINEAR_MIPMAP_LINEAR;if(e===$e)return D.UNSIGNED_BYTE;if(1017===e)return D.UNSIGNED_SHORT_4_4_4_4;if(1018===e)return D.UNSIGNED_SHORT_5_5_5_1;if(1019===e)return D.UNSIGNED_SHORT_5_6_5;if(1010===e)return D.BYTE;if(1011===e)return D.SHORT;if(e===je)return D.UNSIGNED_SHORT;if(1013===e)return D.INT;if(e===Ve)return D.UNSIGNED_INT;if(e===He)return D.FLOAT;if(e===ze&&null!==(t=q.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(1021===e)return D.ALPHA;if(e===qe)return D.RGB;if(e===We)return D.RGBA;if(1024===e)return D.LUMINANCE;if(1025===e)return D.LUMINANCE_ALPHA;if(e===Ye)return D.DEPTH_COMPONENT;if(e===Xe)return D.DEPTH_STENCIL;if(e===Re)return D.FUNC_ADD;if(101===e)return D.FUNC_SUBTRACT;if(102===e)return D.FUNC_REVERSE_SUBTRACT;if(200===e)return D.ZERO;if(201===e)return D.ONE;if(202===e)return D.SRC_COLOR;if(203===e)return D.ONE_MINUS_SRC_COLOR;if(e===De)return D.SRC_ALPHA;if(e===ke)return D.ONE_MINUS_SRC_ALPHA;if(206===e)return D.DST_ALPHA;if(207===e)return D.ONE_MINUS_DST_ALPHA;if(208===e)return D.DST_COLOR;if(209===e)return D.ONE_MINUS_DST_COLOR;if(210===e)return D.SRC_ALPHA_SATURATE;if((2001===e||2002===e||2003===e||2004===e)&&null!==(t=q.get("WEBGL_compressed_texture_s3tc"))){if(2001===e)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===e)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===e)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===e)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((2100===e||2101===e||2102===e||2103===e)&&null!==(t=q.get("WEBGL_compressed_texture_pvrtc"))){if(2100===e)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===e)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===e)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===e)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===e&&null!==(t=q.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((103===e||104===e)&&null!==(t=q.get("EXT_blend_minmax"))){if(103===e)return t.MIN_EXT;if(104===e)return t.MAX_EXT}return e===Ge&&null!==(t=q.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return D},this.getContextAttributes=function(){return D.getContextAttributes()},this.forceContextLoss=function(){var e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.getMaxAnisotropy=function(){return W.getMaxAnisotropy()},this.getPrecision=function(){return W.precision},this.getPixelRatio=function(){return $},this.setPixelRatio=function(e){void 0!==e&&($=e,this.setSize(x,B,!1))},this.getSize=function(){return{width:x,height:B}},this.setSize=function(e,t,n){var i=ie.getDevice();i&&i.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(x=e,B=t,r.width=e*$,r.height=t*$,!1!==n&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:x*$,height:B*$}},this.setDrawingBufferSize=function(e,t,n){x=e,B=t,$=n,r.width=e*n,r.height=t*n,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,i){b.set(e,B-t-i,n,i),Y.viewport(v.copy(b).multiplyScalar($))},this.setScissor=function(e,t,n,i){_.set(e,B-t-i,n,i),Y.scissor(c.copy(_).multiplyScalar($))},this.setScissorTest=function(e){Y.setScissorTest(y=e)},this.getClearColor=ne.getClearColor,this.setClearColor=ne.setClearColor,this.getClearAlpha=ne.getClearAlpha,this.setClearAlpha=ne.setClearAlpha,this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=D.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=D.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=D.STENCIL_BUFFER_BIT),D.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.resetGLState=le,this.dispose=function(){r.removeEventListener("webglcontextlost",me,!1),te.dispose()},this.renderBufferImmediate=function(e,t,n){Y.initAttributes();var i=X.get(e);e.hasPositions&&!i.position&&(i.position=D.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=D.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=D.createBuffer()),e.hasColors&&!i.color&&(i.color=D.createBuffer());var r=t.getAttributes();if(e.hasPositions&&(D.bindBuffer(D.ARRAY_BUFFER,i.position),D.bufferData(D.ARRAY_BUFFER,e.positionArray,D.DYNAMIC_DRAW),Y.enableAttribute(r.position),D.vertexAttribPointer(r.position,3,D.FLOAT,!1,0,0)),e.hasNormals){if(D.bindBuffer(D.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.shading===Ce)for(var a=0,s=3*e.count;a<s;a+=9){var o=e.normalArray,l=(o[a+0]+o[a+3]+o[a+6])/3,u=(o[a+1]+o[a+4]+o[a+7])/3,c=(o[a+2]+o[a+5]+o[a+8])/3;o[a+0]=l,o[a+1]=u,o[a+2]=c,o[a+3]=l,o[a+4]=u,o[a+5]=c,o[a+6]=l,o[a+7]=u,o[a+8]=c}D.bufferData(D.ARRAY_BUFFER,e.normalArray,D.DYNAMIC_DRAW),Y.enableAttribute(r.normal),D.vertexAttribPointer(r.normal,3,D.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(D.bindBuffer(D.ARRAY_BUFFER,i.uv),D.bufferData(D.ARRAY_BUFFER,e.uvArray,D.DYNAMIC_DRAW),Y.enableAttribute(r.uv),D.vertexAttribPointer(K.uv,2,D.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==Pe&&(D.bindBuffer(D.ARRAY_BUFFER,i.color),D.bufferData(D.ARRAY_BUFFER,e.colorArray,D.DYNAMIC_DRAW),Y.enableAttribute(r.color),D.vertexAttribPointer(r.color,3,D.FLOAT,!1,0,0)),Y.disableUnusedAttributes(),D.drawArrays(D.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){Y.setMaterial(i);var s=Te(e,t,i,r),o=n.id+"_"+s.id+"_"+(!0===i.wireframe),l=!1;o!==O&&(O=o,l=!0);var u=r.morphTargetInfluences;if(void 0!==u){for(var c=[],d=0,h=u.length;d<h;d++){var f=u[d];c.push([f,d])}c.sort(_e),8<c.length&&(c.length=8);var p=n.morphAttributes;for(d=0,h=c.length;d<h;d++){f=c[d];if(R[d]=f[0],0!==f[0]){var m=f[1];!0===i.morphTargets&&p.position&&n.addAttribute("morphTarget"+d,p.position[m]),!0===i.morphNormals&&p.normal&&n.addAttribute("morphNormal"+d,p.normal[m])}else!0===i.morphTargets&&n.removeAttribute("morphTarget"+d),!0===i.morphNormals&&n.removeAttribute("morphNormal"+d)}d=c.length;for(var g=R.length;d<g;d++)R[d]=0;s.getUniforms().setValue(D,"morphTargetInfluences",R),l=!0}m=n.index;var v,_=n.attributes.position,y=1;!0===i.wireframe&&(m=Q.getWireframeAttribute(n),y=2);var x=re;null!==m&&(v=K.get(m),(x=ae).setIndex(v)),l&&(!function(e,t,n,i){if(n&&n.isInstancedBufferGeometry&&null===q.get("ANGLE_instanced_arrays"))return console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0);Y.initAttributes();var r=n.attributes,a=t.getAttributes(),s=e.defaultAttributeValues;for(var o in a){var l=a[o];if(0<=l){var u=r[o];if(void 0!==u){var c=u.normalized,d=u.itemSize,h=K.get(u),f=h.buffer,p=h.type,m=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var g=u.data,v=g.stride,_=u.offset;g&&g.isInstancedInterleavedBuffer?(Y.enableAttributeAndDivisor(l,g.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=g.meshPerAttribute*g.count)):Y.enableAttribute(l),D.bindBuffer(D.ARRAY_BUFFER,f),D.vertexAttribPointer(l,d,p,c,v*m,(i*v+_)*m)}else u.isInstancedBufferAttribute?(Y.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):Y.enableAttribute(l),D.bindBuffer(D.ARRAY_BUFFER,f),D.vertexAttribPointer(l,d,p,c,0,i*d*m)}else if(void 0!==s){var y=s[o];if(void 0!==y)switch(y.length){case 2:D.vertexAttrib2fv(l,y);break;case 3:D.vertexAttrib3fv(l,y);break;case 4:D.vertexAttrib4fv(l,y);break;default:D.vertexAttrib1fv(l,y)}}}}Y.disableUnusedAttributes()}(i,s,n),null!==m&&D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,v.buffer));var b=0;null!==m?b=m.count:void 0!==_&&(b=_.count);var T=n.drawRange.start*y,S=n.drawRange.count*y,E=null!==a?a.start*y:0,w=null!==a?a.count*y:1/0,M=Math.max(T,E),A=Math.min(b,T+S,E+w)-1,C=Math.max(0,A-M+1);if(0!==C){if(r.isMesh)if(!0===i.wireframe)Y.setLineWidth(i.wireframeLinewidth*se()),x.setMode(D.LINES);else switch(r.drawMode){case Ke:x.setMode(D.TRIANGLES);break;case 1:x.setMode(D.TRIANGLE_STRIP);break;case 2:x.setMode(D.TRIANGLE_FAN)}else if(r.isLine){var P=i.linewidth;void 0===P&&(P=1),Y.setLineWidth(P*se()),r.isLineSegments?x.setMode(D.LINES):r.isLineLoop?x.setMode(D.LINE_LOOP):x.setMode(D.LINE_STRIP)}else r.isPoints&&x.setMode(D.POINTS);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&x.renderInstances(n,M,C):x.render(M,C)}},this.compile=function(n,e){f=[],n.traverse(function(e){e.isLight&&f.push(e)}),Me(f,e),n.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var t=0;t<e.material.length;t++)be(e.material[t],n.fog,e);else be(e.material,n.fog,e)})},this.animate=function(t){(ie.getDevice()||window).requestAnimationFrame(function e(){t(),(ie.getDevice()||window).requestAnimationFrame(e)})},this.render=function(e,t,n,i){if(t&&t.isCamera){O="",L=-1,!(N=null)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ie.enabled&&(t=ie.getCamera(t)),S.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),T.setFromMatrix(S),f.length=0,m.length=0,g.length=0,H=this.localClippingEnabled,V=j.init(this.clippingPlanes,H,t),(p=te.get(e,t)).init(),function e(t,n,i){if(!t.visible)return;var r=t.layers.test(n.layers);if(r)if(t.isLight)f.push(t);else if(t.isSprite)t.frustumCulled&&!T.intersectsSprite(t)||m.push(t);else if(t.isLensFlare)g.push(t);else if(t.isImmediateRenderObject)i&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(S),p.push(t,null,t.material,z.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||T.intersectsObject(t))){i&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(S);var a=Z.update(t),s=t.material;if(Array.isArray(s))for(var o=a.groups,l=0,u=o.length;l<u;l++){var c=o[l],d=s[c.materialIndex];d&&d.visible&&p.push(t,a,d,z.z,c)}else s.visible&&p.push(t,a,s,z.z,null)}var h=t.children;for(var l=0,u=h.length;l<u;l++)e(h[l],n,i)}(e,t,k.sortObjects),p.finish(),!0===k.sortObjects&&p.sort(),V&&j.beginShadows(),function(e){for(var t=0,n=0,i=e.length;n<i;n++){var r=e[n];r.castShadow&&(G.shadows[t]=r,t++)}G.shadows.length=t}(f),ue.render(e,t),Me(f,t),V&&j.endShadows(),A.frame++,A.calls=0,A.vertices=0,A.faces=0,void(A.points=0)===n&&(n=null),this.setRenderTarget(n),ne.render(e,t,i);var r=p.opaque,a=p.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;r.length&&ye(r,e,t,s),a.length&&ye(a,e,t,s)}else r.length&&ye(r,e,t),a.length&&ye(a,e,t);fe.render(e,t),pe.render(e,t,v),n&&P.updateRenderTargetMipmap(n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),t.isArrayCamera&&k.setScissorTest(!1),ie.enabled&&ie.submitFrame()}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(e,t){Y.setCullFace(e),Y.setFlipSided(0===t)},this.allocTextureUnit=function(){var e=F;return e>=W.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+W.maxTextures),F+=1,e},this.setTexture2D=(ce=!1,function(e,t){e&&e.isWebGLRenderTarget&&(ce||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ce=!0),e=e.texture),P.setTexture2D(e,t)}),this.setTexture=(de=!1,function(e,t){de||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),de=!0),P.setTexture2D(e,t)}),this.setTextureCube=(he=!1,function(e,t){e&&e.isWebGLRenderTargetCube&&(he||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),he=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?P.setTextureCube(e,t):P.setTextureCubeDynamic(e,t)}),this.getRenderTarget=function(){return u},this.setRenderTarget=function(e){(u=e)&&void 0===X.get(e).__webglFramebuffer&&P.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var i=X.get(e);t=n?i.__webglFramebuffer[e.activeCubeFace]:i.__webglFramebuffer,c.copy(e.scissor),h=e.scissorTest,v.copy(e.viewport)}else t=null,c.copy(_).multiplyScalar($),h=y,v.copy(b).multiplyScalar($);if(d!==t&&(D.bindFramebuffer(D.FRAMEBUFFER,t),d=t),Y.scissor(c),Y.setScissorTest(h),Y.viewport(v),n){var r=X.get(e.texture);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,a){if(e&&e.isWebGLRenderTarget){var s=X.get(e).__webglFramebuffer;if(s){var o=!1;s!==d&&(D.bindFramebuffer(D.FRAMEBUFFER,s),o=!0);try{var l=e.texture,u=l.format,c=l.type;if(u!==We&&Ae(u)!==D.getParameter(D.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===$e||Ae(c)===D.getParameter(D.IMPLEMENTATION_COLOR_READ_TYPE)||c===He&&(q.get("OES_texture_float")||q.get("WEBGL_color_buffer_float"))||c===ze&&q.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");D.checkFramebufferStatus(D.FRAMEBUFFER)===D.FRAMEBUFFER_COMPLETE?0<=t&&t<=e.width-i&&0<=n&&n<=e.height-r&&D.readPixels(t,n,i,r,Ae(u),Ae(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&D.bindFramebuffer(D.FRAMEBUFFER,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Qr(e,t){this.name="",this.color=new jt(e),this.density=void 0!==t?t:25e-5}function Zr(e,t,n){this.name="",this.color=new jt(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Jr(){Yn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ea(e,t,n,i,r){Yn.call(this),this.lensFlares=[],this.positionScreen=new Je,(this.customUpdateCallback=void 0)!==e&&this.add(e,t,n,i,r)}function ta(e){_n.call(this),this.type="SpriteMaterial",this.color=new jt(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function na(e){Yn.call(this),this.type="Sprite",this.material=void 0!==e?e:new ta}function ia(){Yn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ra(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new et)}}function aa(){Yn.call(this),this.type="Bone"}function sa(e,t){or.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new et,this.bindMatrixInverse=new et;var n=new ra(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function oa(e){_n.call(this),this.type="LineBasicMaterial",this.color=new jt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function la(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new ua(e,t);Yn.call(this),this.type="Line",this.geometry=void 0!==e?e:new Zi,this.material=void 0!==t?t:new oa({color:16777215*Math.random()})}function ua(e,t){la.call(this,e,t),this.type="LineSegments"}function ca(e,t){la.call(this,e,t),this.type="LineLoop"}function da(e){_n.call(this),this.type="PointsMaterial",this.color=new jt(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function ha(e,t){Yn.call(this),this.type="Points",this.geometry=void 0!==e?e:new Zi,this.material=void 0!==t?t:new da({color:16777215*Math.random()})}function fa(){Yn.call(this),this.type="Group"}function pa(t,e,n,i,r,a,s,o,l){Te.call(this,t,e,n,i,r,a,s,o,l),this.generateMipmaps=!1;var u=this;!function e(){requestAnimationFrame(e),t.readyState>=t.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}()}function ma(e,t,n,i,r,a,s,o,l,u,c,d){Te.call(this,null,a,s,o,l,u,i,r,c,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function ga(e,t,n,i,r,a,s,o,l){Te.call(this,e,t,n,i,r,a,s,o,l),this.needsUpdate=!0}function va(e,t,n,i,r,a,s,o,l,u){if((u=void 0!==u?u:Ye)!==Ye&&u!==Xe)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ye&&(n=je),void 0===n&&u===Xe&&(n=Ge),Te.call(this,null,i,r,a,s,o,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:Oe,this.minFilter=void 0!==o?o:Oe,this.flipY=!1,this.generateMipmaps=!1}function _a(e){Zi.call(this),this.type="WireframeGeometry";var t,n,i,r,a,s,o,l,u,c,d=[],h=[0,0],f={},p=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var g=m[t];for(n=0;n<3;n++)o=g[p[n]],l=g[p[(n+1)%3]],h[0]=Math.min(o,l),h[1]=Math.max(o,l),void 0===f[u=h[0]+","+h[1]]&&(f[u]={index1:h[0],index2:h[1]})}for(u in f)s=f[u],c=e.vertices[s.index1],d.push(c.x,c.y,c.z),c=e.vertices[s.index2],d.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var v,_,y,x,b,T;if(c=new Je,null!==e.index){for(v=e.attributes.position,_=e.index,0===(y=e.groups).length&&(y=[{start:0,count:_.count,materialIndex:0}]),r=0,a=y.length;r<a;++r)for(i=(t=(x=y[r]).start)+x.count;t<i;t+=3)for(n=0;n<3;n++)o=_.getX(t+n),l=_.getX(t+(n+1)%3),h[0]=Math.min(o,l),h[1]=Math.max(o,l),void 0===f[u=h[0]+","+h[1]]&&(f[u]={index1:h[0],index2:h[1]});for(u in f)s=f[u],c.fromBufferAttribute(v,s.index1),d.push(c.x,c.y,c.z),c.fromBufferAttribute(v,s.index2),d.push(c.x,c.y,c.z)}else for(t=0,i=(v=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)b=3*t+n,c.fromBufferAttribute(v,b),d.push(c.x,c.y,c.z),T=3*t+(n+1)%3,c.fromBufferAttribute(v,T),d.push(c.x,c.y,c.z)}this.addAttribute("position",new Yi(d,3))}function ya(e,t,n){Bi.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new xa(e,t,n)),this.mergeVertices()}function xa(e,t,n){Zi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,a=[],s=[],o=[],l=[],u=new Je,c=new Je,d=new Je,h=new Je,f=new Je,p=t+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=t;r++){var g=r/t;c=e(g,m,c),s.push(c.x,c.y,c.z),0<=g-1e-5?(d=e(g-1e-5,m,d),h.subVectors(c,d)):(d=e(g+1e-5,m,d),h.subVectors(d,c)),0<=m-1e-5?(d=e(g,m-1e-5,d),f.subVectors(c,d)):(d=e(g,m+1e-5,d),f.subVectors(d,c)),u.crossVectors(h,f).normalize(),o.push(u.x,u.y,u.z),l.push(g,m)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var v=i*p+r,_=i*p+r+1,y=(i+1)*p+r+1,x=(i+1)*p+r;a.push(v,_,x),a.push(_,y,x)}this.setIndex(a),this.addAttribute("position",new Yi(s,3)),this.addAttribute("normal",new Yi(o,3)),this.addAttribute("uv",new Yi(l,2))}function ba(e,t,n,i){Bi.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Ta(e,t,n,i)),this.mergeVertices()}function Ta(i,a,e,t){Zi.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:i,indices:a,radius:e,detail:t},e=e||1;var c=[],d=[];function s(e,t,n,i){var r,a,s=Math.pow(2,i),o=[];for(r=0;r<=s;r++){o[r]=[];var l=e.clone().lerp(n,r/s),u=t.clone().lerp(n,r/s),c=s-r;for(a=0;a<=c;a++)o[r][a]=0===a&&r===s?l:l.clone().lerp(u,a/c)}for(r=0;r<s;r++)for(a=0;a<2*(s-r)-1;a++){var d=Math.floor(a/2);a%2==0?(h(o[r][d+1]),h(o[r+1][d]),h(o[r][d])):(h(o[r][d+1]),h(o[r+1][d+1]),h(o[r+1][d]))}}function h(e){c.push(e.x,e.y,e.z)}function o(e,t){var n=3*e;t.x=i[n+0],t.y=i[n+1],t.z=i[n+2]}function f(e,t,n,i){i<0&&1===e.x&&(d[t]=e.x-1),0===n.x&&0===n.z&&(d[t]=i/2/Math.PI+.5)}function p(e){return Math.atan2(e.z,-e.x)}!function(e){for(var t=new Je,n=new Je,i=new Je,r=0;r<a.length;r+=3)o(a[r+0],t),o(a[r+1],n),o(a[r+2],i),s(t,n,i,e)}(t=t||0),function(e){for(var t=new Je,n=0;n<c.length;n+=3)t.x=c[n+0],t.y=c[n+1],t.z=c[n+2],t.normalize().multiplyScalar(e),c[n+0]=t.x,c[n+1]=t.y,c[n+2]=t.z}(e),function(){for(var e=new Je,t=0;t<c.length;t+=3){e.x=c[t+0],e.y=c[t+1],e.z=c[t+2];var n=p(e)/2/Math.PI+.5,i=(r=e,Math.atan2(-r.y,Math.sqrt(r.x*r.x+r.z*r.z))/Math.PI+.5);d.push(n,1-i)}var r;(function(){for(var e=new Je,t=new Je,n=new Je,i=new Je,r=new xe,a=new xe,s=new xe,o=0,l=0;o<c.length;o+=9,l+=6){e.set(c[o+0],c[o+1],c[o+2]),t.set(c[o+3],c[o+4],c[o+5]),n.set(c[o+6],c[o+7],c[o+8]),r.set(d[l+0],d[l+1]),a.set(d[l+2],d[l+3]),s.set(d[l+4],d[l+5]),i.copy(e).add(t).add(n).divideScalar(3);var u=p(i);f(r,l+0,e,u),f(a,l+2,t,u),f(s,l+4,n,u)}})(),function(){for(var e=0;e<d.length;e+=6){var t=d[e+0],n=d[e+2],i=d[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);.9<r&&a<.1&&(t<.2&&(d[e+0]+=1),n<.2&&(d[e+2]+=1),i<.2&&(d[e+4]+=1))}}()}(),this.addAttribute("position",new Yi(c,3)),this.addAttribute("normal",new Yi(c.slice(),3)),this.addAttribute("uv",new Yi(d,2)),0===t?this.computeVertexNormals():this.normalizeNormals()}function Sa(e,t){Bi.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ea(e,t)),this.mergeVertices()}function Ea(e,t){Ta.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function wa(e,t){Bi.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ma(e,t)),this.mergeVertices()}function Ma(e,t){Ta.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Aa(e,t){Bi.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ca(e,t)),this.mergeVertices()}function Ca(e,t){var n=(1+Math.sqrt(5))/2;Ta.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Pa(e,t){Bi.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ra(e,t)),this.mergeVertices()}function Ra(e,t){var n=(1+Math.sqrt(5))/2,i=1/n;Ta.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Da(e,t,n,i,r,a){Bi.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new ka(e,t,n,i,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function ka(o,l,u,c,e){Zi.call(this),this.type="TubeBufferGeometry",this.parameters={path:o,tubularSegments:l,radius:u,radialSegments:c,closed:e},l=l||64,u=u||1,c=c||8,e=e||!1;var d=o.computeFrenetFrames(l,e);this.tangents=d.tangents,this.normals=d.normals,this.binormals=d.binormals;var r,h,f=new Je,p=new Je,t=new xe,m=[],g=[],n=[],a=[];function i(e){var t=o.getPointAt(e/l),n=d.normals[e],i=d.binormals[e];for(h=0;h<=c;h++){var r=h/c*Math.PI*2,a=Math.sin(r),s=-Math.cos(r);p.x=s*n.x+a*i.x,p.y=s*n.y+a*i.y,p.z=s*n.z+a*i.z,p.normalize(),g.push(p.x,p.y,p.z),f.x=t.x+u*p.x,f.y=t.y+u*p.y,f.z=t.z+u*p.z,m.push(f.x,f.y,f.z)}}!function(){for(r=0;r<l;r++)i(r);i(!1===e?l:0),function(){for(r=0;r<=l;r++)for(h=0;h<=c;h++)t.x=r/l,t.y=h/c,n.push(t.x,t.y)}(),function(){for(h=1;h<=l;h++)for(r=1;r<=c;r++){var e=(c+1)*(h-1)+(r-1),t=(c+1)*h+(r-1),n=(c+1)*h+r,i=(c+1)*(h-1)+r;a.push(e,t,i),a.push(t,n,i)}}()}(),this.setIndex(a),this.addAttribute("position",new Yi(m,3)),this.addAttribute("normal",new Yi(g,3)),this.addAttribute("uv",new Yi(n,2))}function Ia(e,t,n,i,r,a,s){Bi.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new La(e,t,n,i,r,a)),this.mergeVertices()}function La(e,t,n,i,r,a){Zi.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},e=e||100,t=t||40,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var s,o,l=[],u=[],c=[],d=[],h=new Je,f=new Je,p=new Je,m=new Je,g=new Je,v=new Je,_=new Je;for(s=0;s<=n;++s){var y=s/n*r*Math.PI*2;for(A(y,r,a,e,p),A(y+.01,r,a,e,m),v.subVectors(m,p),_.addVectors(m,p),g.crossVectors(v,_),_.crossVectors(g,v),g.normalize(),_.normalize(),o=0;o<=i;++o){var x=o/i*Math.PI*2,b=-t*Math.cos(x),T=t*Math.sin(x);h.x=p.x+(b*_.x+T*g.x),h.y=p.y+(b*_.y+T*g.y),h.z=p.z+(b*_.z+T*g.z),u.push(h.x,h.y,h.z),f.subVectors(h,p).normalize(),c.push(f.x,f.y,f.z),d.push(s/n),d.push(o/i)}}for(o=1;o<=n;o++)for(s=1;s<=i;s++){var S=(i+1)*(o-1)+(s-1),E=(i+1)*o+(s-1),w=(i+1)*o+s,M=(i+1)*(o-1)+s;l.push(S,E,M),l.push(E,w,M)}function A(e,t,n,i,r){var a=Math.cos(e),s=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(o)*.5}this.setIndex(l),this.addAttribute("position",new Yi(u,3)),this.addAttribute("normal",new Yi(c,3)),this.addAttribute("uv",new Yi(d,2))}function Oa(e,t,n,i,r){Bi.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Na(e,t,n,i,r)),this.mergeVertices()}function Na(e,t,n,i,r){Zi.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||100,t=t||40,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,s,o=[],l=[],u=[],c=[],d=new Je,h=new Je,f=new Je;for(a=0;a<=n;a++)for(s=0;s<=i;s++){var p=s/i*r,m=a/n*Math.PI*2;h.x=(e+t*Math.cos(m))*Math.cos(p),h.y=(e+t*Math.cos(m))*Math.sin(p),h.z=t*Math.sin(m),l.push(h.x,h.y,h.z),d.x=e*Math.cos(p),d.y=e*Math.sin(p),f.subVectors(h,d).normalize(),u.push(f.x,f.y,f.z),c.push(s/i),c.push(a/n)}for(a=1;a<=n;a++)for(s=1;s<=i;s++){var g=(i+1)*a+s-1,v=(i+1)*(a-1)+s-1,_=(i+1)*(a-1)+s,y=(i+1)*a+s;o.push(g,v,y),o.push(v,_,y)}this.setIndex(o),this.addAttribute("position",new Yi(l,3)),this.addAttribute("normal",new Yi(u,3)),this.addAttribute("uv",new Yi(c,2))}qr.prototype=Object.assign(Object.create(Qn.prototype),{constructor:qr,isArrayCamera:!0}),Qr.prototype.isFogExp2=!0,Qr.prototype.clone=function(){return new Qr(this.color.getHex(),this.density)},Qr.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Zr.prototype.isFog=!0,Zr.prototype.clone=function(){return new Zr(this.color.getHex(),this.near,this.far)},Zr.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Jr.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Jr,copy:function(e,t){return Yn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Yn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),ea.prototype=Object.assign(Object.create(Yn.prototype),{constructor:ea,isLensFlare:!0,copy:function(e){Yn.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,i,r,a){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===r&&(r=new jt(16777215)),void 0===i&&(i=q),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:r,blending:i})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,i=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(e=0;e<n;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+i*t.distance,t.y=this.positionScreen.y+r*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),((ta.prototype=Object.create(_n.prototype)).constructor=ta).prototype.isSpriteMaterial=!0,ta.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},na.prototype=Object.assign(Object.create(Yn.prototype),{constructor:na,isSprite:!0,raycast:(yr=new Je,xr=new Je,br=new Je,function(e,t){xr.setFromMatrixPosition(this.matrixWorld),e.ray.closestPointToPoint(xr,yr),br.setFromMatrixScale(this.matrixWorld);var n=br.x*br.y/4;if(!(xr.distanceToSquared(yr)>n)){var i=e.ray.origin.distanceTo(yr);i<e.near||i>e.far||t.push({distance:i,point:yr.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)}}),ia.prototype=Object.assign(Object.create(Yn.prototype),{constructor:ia,copy:function(e){Yn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(Er=new Je,function(e,t){Er.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Er);this.getObjectForDistance(n).raycast(e,t)}),update:(Tr=new Je,Sr=new Je,function(e){var t=this.levels;if(1<t.length){Tr.setFromMatrixPosition(e.matrixWorld),Sr.setFromMatrixPosition(this.matrixWorld);var n=Tr.distanceTo(Sr);t[0].object.visible=!0;for(var i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(;i<r;i++)t[i].object.visible=!1}}),toJSON:function(e){var t=Yn.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign(ra.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new et;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(wr=new et,Mr=new et,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var s=e[r]?e[r].matrixWorld:Mr;wr.multiplyMatrices(s,t[r]),wr.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new ra(this.bones,this.boneInverses)}}),aa.prototype=Object.assign(Object.create(Yn.prototype),{constructor:aa,isBone:!0}),sa.prototype=Object.assign(Object.create(or.prototype),{constructor:sa,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],e=new aa,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.lengthManhattan())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new Ze,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),(e=1/i.lengthManhattan())!==1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){or.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),((oa.prototype=Object.create(_n.prototype)).constructor=oa).prototype.isLineBasicMaterial=!0,oa.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},la.prototype=Object.assign(Object.create(Yn.prototype),{constructor:la,isLine:!0,raycast:(Ar=new et,Cr=new rr,Pr=new Tn,function(e,t){var n=e.linePrecision,i=n*n,r=this.geometry,a=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),Pr.copy(r.boundingSphere),Pr.applyMatrix4(a),!1!==e.ray.intersectsSphere(Pr)){Ar.getInverse(a),Cr.copy(e.ray).applyMatrix4(Ar);var s=new Je,o=new Je,l=new Je,u=new Je,c=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var d=r.index,h=r.attributes.position.array;if(null!==d)for(var f=d.array,p=0,m=f.length-1;p<m;p+=c){var g=f[p],v=f[p+1];s.fromArray(h,3*g),o.fromArray(h,3*v),i<Cr.distanceSqToSegment(s,o,u,l)||(u.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(u))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}))}else for(p=0,m=h.length/3-1;p<m;p+=c)s.fromArray(h,3*p),o.fromArray(h,3*p+3),i<Cr.distanceSqToSegment(s,o,u,l)||(u.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(u))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}))}else if(r.isGeometry){var _=r.vertices,y=_.length;for(p=0;p<y-1;p+=c){var x;i<Cr.distanceSqToSegment(_[p],_[p+1],u,l)||(u.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(u))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}))}}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ua.prototype=Object.assign(Object.create(la.prototype),{constructor:ua,isLineSegments:!0}),ca.prototype=Object.assign(Object.create(la.prototype),{constructor:ca,isLineLoop:!0}),((da.prototype=Object.create(_n.prototype)).constructor=da).prototype.isPointsMaterial=!0,da.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},ha.prototype=Object.assign(Object.create(Yn.prototype),{constructor:ha,isPoints:!0,raycast:(Rr=new et,Dr=new rr,kr=new Tn,function(a,s){var o=this,e=this.geometry,l=this.matrixWorld,t=a.params.Points.threshold;if(null===e.boundingSphere&&e.computeBoundingSphere(),kr.copy(e.boundingSphere),kr.applyMatrix4(l),kr.radius+=t,!1!==a.ray.intersectsSphere(kr)){Rr.getInverse(l),Dr.copy(a.ray).applyMatrix4(Rr);var n=t/((this.scale.x+this.scale.y+this.scale.z)/3),u=n*n,i=new Je;if(e.isBufferGeometry){var r=e.index,c=e.attributes.position.array;if(null!==r)for(var d=r.array,h=0,f=d.length;h<f;h++){var p=d[h];i.fromArray(c,3*p),v(i,p)}else{h=0;for(var m=c.length/3;h<m;h++)i.fromArray(c,3*h),v(i,h)}}else{var g=e.vertices;for(h=0,m=g.length;h<m;h++)v(g[h],h)}}function v(e,t){var n=Dr.distanceSqToPoint(e);if(n<u){var i=Dr.closestPointToPoint(e);i.applyMatrix4(l);var r=a.ray.origin.distanceTo(i);if(r<a.near||r>a.far)return;s.push({distance:r,distanceToRay:Math.sqrt(n),point:i.clone(),index:t,face:null,object:o})}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),fa.prototype=Object.assign(Object.create(Yn.prototype),{constructor:fa}),(pa.prototype=Object.create(Te.prototype)).constructor=pa,((ma.prototype=Object.create(Te.prototype)).constructor=ma).prototype.isCompressedTexture=!0,(ga.prototype=Object.create(Te.prototype)).constructor=ga,((va.prototype=Object.create(Te.prototype)).constructor=va).prototype.isDepthTexture=!0,(_a.prototype=Object.create(Zi.prototype)).constructor=_a,(ya.prototype=Object.create(Bi.prototype)).constructor=ya,(xa.prototype=Object.create(Zi.prototype)).constructor=xa,(ba.prototype=Object.create(Bi.prototype)).constructor=ba,(Ta.prototype=Object.create(Zi.prototype)).constructor=Ta,(Sa.prototype=Object.create(Bi.prototype)).constructor=Sa,(Ea.prototype=Object.create(Ta.prototype)).constructor=Ea,(wa.prototype=Object.create(Bi.prototype)).constructor=wa,(Ma.prototype=Object.create(Ta.prototype)).constructor=Ma,(Aa.prototype=Object.create(Bi.prototype)).constructor=Aa,(Ca.prototype=Object.create(Ta.prototype)).constructor=Ca,(Pa.prototype=Object.create(Bi.prototype)).constructor=Pa,(Ra.prototype=Object.create(Ta.prototype)).constructor=Ra,(Da.prototype=Object.create(Bi.prototype)).constructor=Da,(ka.prototype=Object.create(Zi.prototype)).constructor=ka,(Ia.prototype=Object.create(Bi.prototype)).constructor=Ia,(La.prototype=Object.create(Zi.prototype)).constructor=La,(Oa.prototype=Object.create(Bi.prototype)).constructor=Oa,(Na.prototype=Object.create(Zi.prototype)).constructor=Na;var Ua={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},triangulate:function(){function g(e,t,n,i,r,a){var s,o,l,u,c,d,h,f,p,m,g,v,_,y,x,b,T;if(o=e[a[t]].x,l=e[a[t]].y,u=e[a[n]].x,c=e[a[n]].y,d=e[a[i]].x,(u-o)*((h=e[a[i]].y)-l)-(c-l)*(d-o)<=0)return!1;for(m=d-u,g=h-c,v=o-d,_=l-h,y=u-o,x=c-l,s=0;s<r;s++)if(f=e[a[s]].x,p=e[a[s]].y,!(f===o&&p===l||f===u&&p===c||f===d&&p===h)&&(b=y*(p-l)-x*(f-o),T=v*(p-h)-_*(f-d),m*(p-c)-g*(f-u)>=-Number.EPSILON&&T>=-Number.EPSILON&&b>=-Number.EPSILON))return!1;return!0}return function(e,t){var n=e.length;if(n<3)return null;var i,r,a,s=[],o=[],l=[];if(0<Ua.area(e))for(r=0;r<n;r++)o[r]=r;else for(r=0;r<n;r++)o[r]=n-1-r;var u=n,c=2*u;for(r=u-1;2<u;){if(c--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),t?l:s;if(u<=(i=r)&&(i=0),u<=(r=i+1)&&(r=0),u<=(a=r+1)&&(a=0),g(e,i,r,a,u,o)){var d,h,f,p,m;for(d=o[i],h=o[r],f=o[a],s.push([e[d],e[h],e[f]]),l.push([o[i],o[r],o[a]]),m=(p=r)+1;m<u;p++,m++)o[p]=o[m];c=2*--u}}return t?l:s}}(),triangulateShape:function(e,t){function n(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function w(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function E(e,t,n,i,r){var a=t.x-e.x,s=t.y-e.y,o=i.x-n.x,l=i.y-n.y,u=e.x-n.x,c=e.y-n.y,d=s*o-a*l,h=s*u-a*c;if(Math.abs(d)>Number.EPSILON){var f;if(0<d){if(h<0||d<h)return[];if((f=l*u-o*c)<0||d<f)return[]}else{if(0<h||h<d)return[];if(0<(f=l*u-o*c)||f<d)return[]}if(0===f)return!r||0!==h&&h!==d?[e]:[];if(f===d)return!r||0!==h&&h!==d?[t]:[];if(0===h)return[n];if(h===d)return[i];var p=f/d;return[{x:e.x+p*a,y:e.y+p*s}]}if(0!==h||l*u!=o*c)return[];var m,g,v,_,y,x,b,T,S=0===a&&0===s,E=0===o&&0===l;return S&&E?e.x!==n.x||e.y!==n.y?[]:[e]:S?w(n,i,e)?[e]:[]:E?w(e,t,n)?[n]:[]:(T=0!==a?(_=e.x<t.x?(v=(m=e).x,(g=t).x):(v=(m=t).x,(g=e).x),n.x<i.x?(b=(y=n).x,(x=i).x):(b=(y=i).x,(x=n).x)):(_=e.y<t.y?(v=(m=e).y,(g=t).y):(v=(m=t).y,(g=e).y),n.y<i.y?(b=(y=n).y,(x=i).y):(b=(y=i).y,(x=n).y)),v<=b?_<b?[]:_===b?r?[]:[y]:_<=T?[y,g]:[y,x]:T<v?[]:v===T?r?[]:[m]:_<=T?[m,g]:[m,x])}function M(e,t,n,i){var r=t.x-e.x,a=t.y-e.y,s=n.x-e.x,o=n.y-e.y,l=i.x-e.x,u=i.y-e.y,c=r*o-a*s,d=r*u-a*l;if(Math.abs(c)>Number.EPSILON){var h=l*o-u*s;return 0<c?0<=d&&0<=h:0<=d||0<=h}return 0<d}n(e),t.forEach(n);for(var i,r,a,s,o,l,u={},c=e.concat(),d=0,h=t.length;d<h;d++)Array.prototype.push.apply(c,t[d]);for(i=0,r=c.length;i<r;i++)void 0!==u[o=c[i].x+":"+c[i].y]&&console.warn("THREE.ShapeUtils: Duplicate point",o,i),u[o]=i;var f=function(e,s){var u,c=e.concat();function t(e,t){var n=c.length-1,i=e-1;i<0&&(i=n);var r=e+1;n<r&&(r=0);var a=M(c[e],c[i],c[r],u[t]);if(!a)return!1;var s=u.length-1,o=t-1;o<0&&(o=s);var l=t+1;return s<l&&(l=0),!!(a=M(u[t],u[o],u[l],c[e]))}function n(e,t){var n,i;for(n=0;n<c.length;n++)if(i=n+1,i%=c.length,0<E(e,t,c[n],c[i],!0).length)return!0;return!1}var o=[];function i(e,t){var n,i,r,a;for(n=0;n<o.length;n++)for(i=s[o[n]],r=0;r<i.length;r++)if(a=r+1,a%=i.length,0<E(e,t,i[r],i[a],!0).length)return!0;return!1}for(var r,a,l,d,h,f,p,m,g,v,_=[],y=0,x=s.length;y<x;y++)o.push(y);for(var b=0,T=2*o.length;0<o.length;){if(--T<0){console.log("Infinite Loop! Holes left:"+o.length+", Probably Hole outside Shape!");break}for(a=b;a<c.length;a++){for(l=c[a],r=-1,y=0;y<o.length;y++)if(h=o[y],void 0===_[f=l.x+":"+l.y+":"+h]){u=s[h];for(var S=0;S<u.length;S++)if(d=u[S],t(a,S)&&!n(l,d)&&!i(l,d)){r=S,o.splice(y,1),p=c.slice(0,a+1),m=c.slice(a),g=u.slice(r),v=u.slice(0,r+1),c=p.concat(g).concat(v).concat(m),b=a;break}if(0<=r)break;_[f]=!0}if(0<=r)break}}return c}(e,t),p=Ua.triangulate(f,!1);for(i=0,r=p.length;i<r;i++)for(s=p[i],a=0;a<3;a++)void 0!==(l=u[o=s[a].x+":"+s[a].y])&&(s[a]=l);return p.concat()},isClockWise:function(e){return Ua.area(e)<0}};function Fa(e,t){Bi.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Ba(e,t)),this.mergeVertices()}function Ba(e,t){void 0!==e&&(Zi.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function $a(e,t){Bi.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new ja(e,t)),this.mergeVertices()}function ja(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Bi;var i=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Ba.call(this,i,t),this.type="TextBufferGeometry"}function Va(e,t,n,i,r,a,s){Bi.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Ha(e,t,n,i,r,a,s)),this.mergeVertices()}function Ha(e,t,n,i,r,a,s){Zi.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var o,l,u=(a=void 0!==a?a:0)+(s=void 0!==s?s:Math.PI),c=0,d=[],h=new Je,f=new Je,p=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var _=[],y=l/n;for(o=0;o<=t;o++){var x=o/t;h.x=-e*Math.cos(i+x*r)*Math.sin(a+y*s),h.y=e*Math.cos(a+y*s),h.z=e*Math.sin(i+x*r)*Math.sin(a+y*s),m.push(h.x,h.y,h.z),f.set(h.x,h.y,h.z).normalize(),g.push(f.x,f.y,f.z),v.push(x,1-y),_.push(c++)}d.push(_)}for(l=0;l<n;l++)for(o=0;o<t;o++){var b=d[l][o+1],T=d[l][o],S=d[l+1][o],E=d[l+1][o+1];(0!==l||0<a)&&p.push(b,T,E),(l!==n-1||u<Math.PI)&&p.push(T,S,E)}this.setIndex(p),this.addAttribute("position",new Yi(m,3)),this.addAttribute("normal",new Yi(g,3)),this.addAttribute("uv",new Yi(v,2))}function za(e,t,n,i,r,a){Bi.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Ga(e,t,n,i,r,a)),this.mergeVertices()}function Ga(e,t,n,i,r,a){Zi.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},e=e||20,t=t||50,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var s,o,l,u=[],c=[],d=[],h=[],f=e,p=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new Je,g=new xe;for(o=0;o<=i;o++){for(l=0;l<=n;l++)s=r+l/n*a,m.x=f*Math.cos(s),m.y=f*Math.sin(s),c.push(m.x,m.y,m.z),d.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,h.push(g.x,g.y);f+=p}for(o=0;o<i;o++){var v=o*(n+1);for(l=0;l<n;l++){var _=s=l+v,y=s+n+1,x=s+n+2,b=s+1;u.push(_,y,b),u.push(y,x,b)}}this.setIndex(u),this.addAttribute("position",new Yi(c,3)),this.addAttribute("normal",new Yi(d,3)),this.addAttribute("uv",new Yi(h,2))}function qa(e,t,n,i){Bi.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new Wa(e,t,n,i)),this.mergeVertices()}function Wa(e,t,n,i){Zi.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Qe.clamp(i,0,2*Math.PI);var r,a,s,o=[],l=[],u=[],c=1/t,d=new Je,h=new xe;for(a=0;a<=t;a++){var f=n+a*c*i,p=Math.sin(f),m=Math.cos(f);for(s=0;s<=e.length-1;s++)d.x=e[s].x*p,d.y=e[s].y,d.z=e[s].x*m,l.push(d.x,d.y,d.z),h.x=a/t,h.y=s/(e.length-1),u.push(h.x,h.y)}for(a=0;a<t;a++)for(s=0;s<e.length-1;s++){var g=r=s+a*e.length,v=r+e.length,_=r+e.length+1,y=r+1;o.push(g,v,y),o.push(v,_,y)}if(this.setIndex(o),this.addAttribute("position",new Yi(l,3)),this.addAttribute("uv",new Yi(u,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,b=new Je,T=new Je,S=new Je;for(r=t*e.length*3,s=a=0;a<e.length;a++,s+=3)b.x=x[s+0],b.y=x[s+1],b.z=x[s+2],T.x=x[r+s+0],T.y=x[r+s+1],T.z=x[r+s+2],S.addVectors(b,T).normalize(),x[s+0]=x[r+s+0]=S.x,x[s+1]=x[r+s+1]=S.y,x[s+2]=x[r+s+2]=S.z}}function Ya(e,t){Bi.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Xa(e,t)),this.mergeVertices()}function Xa(e,p){Zi.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:p},p=p||12;var m=[],g=[],v=[],_=[],t=0,y=0;if(!1===Array.isArray(e))i(e);else for(var n=0;n<e.length;n++)i(e[n]),this.addGroup(t,y,n),t+=y,y=0;function i(e){var t,n,i,r=g.length/3,a=e.extractPoints(p),s=a.shape,o=a.holes;if(!1===Ua.isClockWise(s))for(s=s.reverse(),t=0,n=o.length;t<n;t++)i=o[t],!0===Ua.isClockWise(i)&&(o[t]=i.reverse());var l=Ua.triangulateShape(s,o);for(t=0,n=o.length;t<n;t++)i=o[t],s=s.concat(i);for(t=0,n=s.length;t<n;t++){var u=s[t];g.push(u.x,u.y,0),v.push(0,0,1),_.push(u.x,u.y)}for(t=0,n=l.length;t<n;t++){var c=l[t],d=c[0]+r,h=c[1]+r,f=c[2]+r;m.push(d,h,f),y+=3}}this.setIndex(m),this.addAttribute("position",new Yi(g,3)),this.addAttribute("normal",new Yi(v,3)),this.addAttribute("uv",new Yi(_,2))}function Ka(e,t){Zi.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,a,s=[],o=Math.cos(Qe.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(a=new Bi).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,h=a.faces,f=0,p=h.length;f<p;f++)for(var m=h[f],g=0;g<3;g++)n=m[c[g]],i=m[c[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===u[r=l[0]+","+l[1]]?u[r]={index1:l[0],index2:l[1],face1:f,face2:void 0}:u[r].face2=f;for(r in u){var v=u[r];if(void 0===v.face2||h[v.face1].normal.dot(h[v.face2].normal)<=o){var _=d[v.index1];s.push(_.x,_.y,_.z),_=d[v.index2],s.push(_.x,_.y,_.z)}}this.addAttribute("position",new Yi(s,3))}function Qa(e,t,n,i,r,a,s,o){Bi.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Za(e,t,n,i,r,a,s,o)),this.mergeVertices()}function Za(v,_,y,x,b,e,T,S){Zi.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:v,radiusBottom:_,height:y,radialSegments:x,heightSegments:b,openEnded:e,thetaStart:T,thetaLength:S};var E=this;v=void 0!==v?v:20,_=void 0!==_?_:20,y=void 0!==y?y:100,x=Math.floor(x)||8,b=Math.floor(b)||1,e=void 0!==e&&e,T=void 0!==T?T:0,S=void 0!==S?S:2*Math.PI;var w=[],M=[],A=[],C=[],P=0,R=[],D=y/2,k=0;function t(e){var t,n,i,r=new xe,a=new Je,s=0,o=!0===e?v:_,l=!0===e?1:-1;for(n=P,t=1;t<=x;t++)M.push(0,D*l,0),A.push(0,l,0),C.push(.5,.5),P++;for(i=P,t=0;t<=x;t++){var u=t/x*S+T,c=Math.cos(u),d=Math.sin(u);a.x=o*d,a.y=D*l,a.z=o*c,M.push(a.x,a.y,a.z),A.push(0,l,0),r.x=.5*c+.5,r.y=.5*d*l+.5,C.push(r.x,r.y),P++}for(t=0;t<x;t++){var h=n+t,f=i+t;!0===e?w.push(f,f+1,h):w.push(f+1,f,h),s+=3}E.addGroup(k,s,!0===e?1:2),k+=s}!function(){var e,t,n=new Je,i=new Je,r=0,a=(_-v)/y;for(t=0;t<=b;t++){var s=[],o=t/b,l=o*(_-v)+v;for(e=0;e<=x;e++){var u=e/x,c=u*S+T,d=Math.sin(c),h=Math.cos(c);i.x=l*d,i.y=-o*y+D,i.z=l*h,M.push(i.x,i.y,i.z),n.set(d,a,h).normalize(),A.push(n.x,n.y,n.z),C.push(u,1-o),s.push(P++)}R.push(s)}for(e=0;e<x;e++)for(t=0;t<b;t++){var f=R[t][e],p=R[t+1][e],m=R[t+1][e+1],g=R[t][e+1];w.push(f,p,g),w.push(p,m,g),r+=6}E.addGroup(k,r,0),k+=r}(),!1===e&&(0<v&&t(!0),0<_&&t(!1)),this.setIndex(w),this.addAttribute("position",new Yi(M,3)),this.addAttribute("normal",new Yi(A,3)),this.addAttribute("uv",new Yi(C,2))}function Ja(e,t,n,i,r,a,s){Qa.call(this,0,e,t,n,i,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}function es(e,t,n,i,r,a,s){Za.call(this,0,e,t,n,i,r,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}function ts(e,t,n,i){Bi.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new ns(e,t,n,i)),this.mergeVertices()}function ns(e,t,n,i){Zi.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,s=[],o=[],l=[],u=[],c=new Je,d=new xe;for(o.push(0,0,0),l.push(0,0,1),u.push(.5,.5),a=0,r=3;a<=t;a++,r+=3){var h=n+a/t*i;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),l.push(0,0,1),d.x=(o[r]/e+1)/2,d.y=(o[r+1]/e+1)/2,u.push(d.x,d.y)}for(r=1;r<=t;r++)s.push(r,r+1,0);this.setIndex(s),this.addAttribute("position",new Yi(o,3)),this.addAttribute("normal",new Yi(l,3)),this.addAttribute("uv",new Yi(u,2))}(Fa.prototype=Object.create(Bi.prototype)).constructor=Fa,((Ba.prototype=Object.create(Zi.prototype)).constructor=Ba).prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index;return{position:t,uv:i,index:r?Array.prototype.slice.call(r.array):[]}},Ba.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var i=0;i<n;i++){var r=e[i];this.addShape(r,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new Yi(t.arrays.position,3)),this.addAttribute("uv",new Yi(t.arrays.uv,2))},Ba.prototype.addShape=function(e,i){var t,n,r,a,s,o,l,u,c=i.arrays?i.arrays:this.getArrays(),d=c.position,h=c.index,f=c.uv,p=[],m=void 0!==i.amount?i.amount:100,g=void 0!==i.bevelThickness?i.bevelThickness:6,v=void 0!==i.bevelSize?i.bevelSize:g-2,_=void 0!==i.bevelSegments?i.bevelSegments:3,y=void 0===i.bevelEnabled||i.bevelEnabled,x=void 0!==i.curveSegments?i.curveSegments:12,b=void 0!==i.steps?i.steps:1,T=i.extrudePath,S=!1,E=void 0!==i.UVGenerator?i.UVGenerator:Fa.WorldUVGenerator;T&&(t=T.getSpacedPoints(b),y=!(S=!0),n=void 0!==i.frames?i.frames:T.computeFrenetFrames(b,!1),r=new Je,a=new Je,s=new Je),y||(v=g=_=0);var w=this,M=e.extractPoints(x),A=M.shape,C=M.holes;if(!Ua.isClockWise(A))for(A=A.reverse(),l=0,u=C.length;l<u;l++)o=C[l],Ua.isClockWise(o)&&(C[l]=o.reverse());var P=Ua.triangulateShape(A,C),R=A;for(l=0,u=C.length;l<u;l++)o=C[l],A=A.concat(o);function D(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var k,I,L,O,N,U,F=A.length,B=P.length;function $(e,t,n){var i,r,a,s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=s*s+o*o,d=s*u-o*l;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(l*l+u*u),p=t.x-o/h,m=t.y+s/h,g=((n.x-u/f-p)*u-(n.y+l/f-m)*l)/(s*u-o*l),v=(i=p+s*g-e.x)*i+(r=m+o*g-e.y)*r;if(v<=2)return new xe(i,r);a=Math.sqrt(v/2)}else{var _=!1;s>Number.EPSILON?l>Number.EPSILON&&(_=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(_=!0):Math.sign(o)===Math.sign(u)&&(_=!0),a=_?(i=-o,r=s,Math.sqrt(c)):(i=s,r=o,Math.sqrt(c/2))}return new xe(i/a,r/a)}for(var j=[],V=0,H=R.length,z=H-1,G=V+1;V<H;V++,z++,G++)z===H&&(z=0),G===H&&(G=0),j[V]=$(R[V],R[z],R[G]);var q,W,Y=[],X=j.concat();for(l=0,u=C.length;l<u;l++){for(o=C[l],q=[],V=0,z=(H=o.length)-1,G=V+1;V<H;V++,z++,G++)z===H&&(z=0),G===H&&(G=0),q[V]=$(o[V],o[z],o[G]);Y.push(q),X=X.concat(q)}for(k=0;k<_;k++){for(L=k/_,O=g*Math.cos(L*Math.PI/2),I=v*Math.sin(L*Math.PI/2),V=0,H=R.length;V<H;V++)Q((N=D(R[V],j[V],I)).x,N.y,-O);for(l=0,u=C.length;l<u;l++)for(o=C[l],q=Y[l],V=0,H=o.length;V<H;V++)Q((N=D(o[V],q[V],I)).x,N.y,-O)}for(I=v,V=0;V<F;V++)N=y?D(A[V],X[V],I):A[V],S?(a.copy(n.normals[0]).multiplyScalar(N.x),r.copy(n.binormals[0]).multiplyScalar(N.y),s.copy(t[0]).add(a).add(r),Q(s.x,s.y,s.z)):Q(N.x,N.y,0);for(W=1;W<=b;W++)for(V=0;V<F;V++)N=y?D(A[V],X[V],I):A[V],S?(a.copy(n.normals[W]).multiplyScalar(N.x),r.copy(n.binormals[W]).multiplyScalar(N.y),s.copy(t[W]).add(a).add(r),Q(s.x,s.y,s.z)):Q(N.x,N.y,m/b*W);for(k=_-1;0<=k;k--){for(L=k/_,O=g*Math.cos(L*Math.PI/2),I=v*Math.sin(L*Math.PI/2),V=0,H=R.length;V<H;V++)Q((N=D(R[V],j[V],I)).x,N.y,m+O);for(l=0,u=C.length;l<u;l++)for(o=C[l],q=Y[l],V=0,H=o.length;V<H;V++)N=D(o[V],q[V],I),S?Q(N.x,N.y+t[b-1].y,t[b-1].x+O):Q(N.x,N.y,m+O)}function K(e,t){var n,i;for(V=e.length;0<=--V;){(i=(n=V)-1)<0&&(i=e.length-1);var r=0,a=b+2*_;for(r=0;r<a;r++){var s=F*r,o=F*(r+1);J(t+n+s,t+i+s,t+i+o,t+n+o,e,r,a,n,i)}}}function Q(e,t,n){p.push(e),p.push(t),p.push(n)}function Z(e,t,n){ee(e),ee(t),ee(n);var i=d.length/3,r=E.generateTopUV(w,d,i-3,i-2,i-1);te(r[0]),te(r[1]),te(r[2])}function J(e,t,n,i,r,a,s,o,l){ee(e),ee(t),ee(i),ee(t),ee(n),ee(i);var u=d.length/3,c=E.generateSideWallUV(w,d,u-6,u-3,u-2,u-1);te(c[0]),te(c[1]),te(c[3]),te(c[1]),te(c[2]),te(c[3])}function ee(e){h.push(d.length/3),d.push(p[3*e+0]),d.push(p[3*e+1]),d.push(p[3*e+2])}function te(e){f.push(e.x),f.push(e.y)}!function(){var e=d.length/3;if(y){var t=0,n=F*t;for(V=0;V<B;V++)Z((U=P[V])[2]+n,U[1]+n,U[0]+n);for(n=F*(t=b+2*_),V=0;V<B;V++)Z((U=P[V])[0]+n,U[1]+n,U[2]+n)}else{for(V=0;V<B;V++)Z((U=P[V])[2],U[1],U[0]);for(V=0;V<B;V++)Z((U=P[V])[0]+F*b,U[1]+F*b,U[2]+F*b)}w.addGroup(e,d.length/3-e,void 0!==i.material?i.material:0)}(),function(){var e=d.length/3,t=0;for(K(R,t),t+=R.length,l=0,u=C.length;l<u;l++)K(o=C[l],t),t+=o.length;w.addGroup(e,d.length/3-e,void 0!==i.extrudeMaterial?i.extrudeMaterial:1)}(),i.arrays||(this.setIndex(h),this.addAttribute("position",new Yi(d,3)),this.addAttribute("uv",new Yi(i.arrays.uv,2)))},Fa.WorldUVGenerator={generateTopUV:function(e,t,n,i,r){var a=t[3*n],s=t[3*n+1],o=t[3*i],l=t[3*i+1],u=t[3*r],c=t[3*r+1];return[new xe(a,s),new xe(o,l),new xe(u,c)]},generateSideWallUV:function(e,t,n,i,r,a){var s=t[3*n],o=t[3*n+1],l=t[3*n+2],u=t[3*i],c=t[3*i+1],d=t[3*i+2],h=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-c)<.01?[new xe(s,1-l),new xe(u,1-d),new xe(h,1-p),new xe(m,1-v)]:[new xe(o,1-l),new xe(c,1-d),new xe(f,1-p),new xe(g,1-v)]}},($a.prototype=Object.create(Bi.prototype)).constructor=$a,(ja.prototype=Object.create(Ba.prototype)).constructor=ja,(Va.prototype=Object.create(Bi.prototype)).constructor=Va,(Ha.prototype=Object.create(Zi.prototype)).constructor=Ha,(za.prototype=Object.create(Bi.prototype)).constructor=za,(Ga.prototype=Object.create(Zi.prototype)).constructor=Ga,(qa.prototype=Object.create(Bi.prototype)).constructor=qa,(Wa.prototype=Object.create(Zi.prototype)).constructor=Wa,(Ya.prototype=Object.create(Bi.prototype)).constructor=Ya,(Xa.prototype=Object.create(Zi.prototype)).constructor=Xa,(Ka.prototype=Object.create(Zi.prototype)).constructor=Ka,(Qa.prototype=Object.create(Bi.prototype)).constructor=Qa,(Za.prototype=Object.create(Zi.prototype)).constructor=Za,(Ja.prototype=Object.create(Qa.prototype)).constructor=Ja,(es.prototype=Object.create(Za.prototype)).constructor=es,(ts.prototype=Object.create(Bi.prototype)).constructor=ts,(ns.prototype=Object.create(Zi.prototype)).constructor=ns;var is=Object.freeze({WireframeGeometry:_a,ParametricGeometry:ya,ParametricBufferGeometry:xa,TetrahedronGeometry:Sa,TetrahedronBufferGeometry:Ea,OctahedronGeometry:wa,OctahedronBufferGeometry:Ma,IcosahedronGeometry:Aa,IcosahedronBufferGeometry:Ca,DodecahedronGeometry:Pa,DodecahedronBufferGeometry:Ra,PolyhedronGeometry:ba,PolyhedronBufferGeometry:Ta,TubeGeometry:Da,TubeBufferGeometry:ka,TorusKnotGeometry:Ia,TorusKnotBufferGeometry:La,TorusGeometry:Oa,TorusBufferGeometry:Na,TextGeometry:$a,TextBufferGeometry:ja,SphereGeometry:Va,SphereBufferGeometry:Ha,RingGeometry:za,RingBufferGeometry:Ga,PlaneGeometry:tr,PlaneBufferGeometry:nr,LatheGeometry:qa,LatheBufferGeometry:Wa,ShapeGeometry:Ya,ShapeBufferGeometry:Xa,ExtrudeGeometry:Fa,ExtrudeBufferGeometry:Ba,EdgesGeometry:Ka,ConeGeometry:Ja,ConeBufferGeometry:es,CylinderGeometry:Qa,CylinderBufferGeometry:Za,CircleGeometry:ts,CircleBufferGeometry:ns,BoxGeometry:Ji,BoxBufferGeometry:er});function rs(e){yn.call(this,{uniforms:Gt.merge([zt.lights,{opacity:{value:1}}]),vertexShader:qt.shadow_vert,fragmentShader:qt.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}}),this.setValues(e)}function as(e){yn.call(this,e),this.type="RawShaderMaterial"}function ss(e){_n.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new jt(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function os(e){ss.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function ls(e){_n.call(this),this.type="MeshPhongMaterial",this.color=new jt(16777215),this.specular=new jt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function us(e){ls.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function cs(e){_n.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ds(e){_n.call(this),this.type="MeshLambertMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function hs(e){_n.call(this),this.type="LineDashedMaterial",this.color=new jt(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}((rs.prototype=Object.create(yn.prototype)).constructor=rs).prototype.isShadowMaterial=!0,((as.prototype=Object.create(yn.prototype)).constructor=as).prototype.isRawShaderMaterial=!0,((ss.prototype=Object.create(_n.prototype)).constructor=ss).prototype.isMeshStandardMaterial=!0,ss.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((os.prototype=Object.create(ss.prototype)).constructor=os).prototype.isMeshPhysicalMaterial=!0,os.prototype.copy=function(e){return ss.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},((ls.prototype=Object.create(_n.prototype)).constructor=ls).prototype.isMeshPhongMaterial=!0,ls.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((us.prototype=Object.create(ls.prototype)).constructor=us).prototype.isMeshToonMaterial=!0,us.prototype.copy=function(e){return ls.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},((cs.prototype=Object.create(_n.prototype)).constructor=cs).prototype.isMeshNormalMaterial=!0,cs.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((ds.prototype=Object.create(_n.prototype)).constructor=ds).prototype.isMeshLambertMaterial=!0,ds.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((hs.prototype=Object.create(_n.prototype)).constructor=hs).prototype.isLineDashedMaterial=!0,hs.prototype.copy=function(e){return _n.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var fs=Object.freeze({ShadowMaterial:rs,SpriteMaterial:ta,RawShaderMaterial:as,ShaderMaterial:yn,PointsMaterial:da,MeshPhysicalMaterial:os,MeshStandardMaterial:ss,MeshPhongMaterial:ls,MeshToonMaterial:us,MeshNormalMaterial:cs,MeshLambertMaterial:ds,MeshDepthMaterial:xn,MeshBasicMaterial:ir,LineDashedMaterial:hs,LineBasicMaterial:oa,Material:_n}),ps={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function ms(e,t,n){var i=this,r=!1,a=0,s=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,s),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)}}var gs=new ms;function vs(e){this.manager=void 0!==e?e:gs}function _s(e){this.manager=void 0!==e?e:gs,this._parser=null}function ys(e){this.manager=void 0!==e?e:gs,this._parser=null}function xs(e){this.manager=void 0!==e?e:gs}function bs(e){this.manager=void 0!==e?e:gs}function Ts(e){this.manager=void 0!==e?e:gs}function Ss(e,t){Yn.call(this),this.type="Light",this.color=new jt(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Es(e,t,n){Ss.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Yn.DefaultUp),this.updateMatrix(),this.groundColor=new jt(t)}function ws(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new xe(512,512),this.map=null,this.matrix=new et}function Ms(){ws.call(this,new Qn(50,1,.5,500))}function As(e,t,n,i,r,a){Ss.call(this,e,t),this.type="SpotLight",this.position.copy(Yn.DefaultUp),this.updateMatrix(),this.target=new Yn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Ms}function Cs(e,t,n,i){Ss.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new ws(new Qn(90,1,.5,500))}function Ps(){ws.call(this,new Kn(-5,5,5,-5,.5,500))}function Rs(e,t){Ss.call(this,e,t),this.type="DirectionalLight",this.position.copy(Yn.DefaultUp),this.updateMatrix(),this.target=new Yn,this.shadow=new Ps}function Ds(e,t){Ss.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ks(e,t,n,i){Ss.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}Object.assign(vs.prototype,{load:function(n,i,t,r){void 0===n&&(n=""),void 0!==this.path&&(n=this.path+n);var a=this,e=ps.get(n);if(void 0!==e)return a.manager.itemStart(n),setTimeout(function(){i&&i(e),a.manager.itemEnd(n)},0),e;var s=n.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var o=s[1],l=!!s[2],u=s[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var c,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":c=new ArrayBuffer(u.length);for(var h=new Uint8Array(c),f=0;f<u.length;f++)h[f]=u.charCodeAt(f);"blob"===d&&(c=new Blob([c],{type:o}));break;case"document":var p=new DOMParser;c=p.parseFromString(u,o);break;case"json":c=JSON.parse(u);break;default:c=u}window.setTimeout(function(){i&&i(c),a.manager.itemEnd(n)},0)}catch(e){window.setTimeout(function(){r&&r(e),a.manager.itemEnd(n),a.manager.itemError(n)},0)}}else{var m=new XMLHttpRequest;for(var g in m.open("GET",n,!0),m.addEventListener("load",function(e){var t=e.target.response;ps.add(n,t),200===this.status?(i&&i(t),a.manager.itemEnd(n)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),i&&i(t),a.manager.itemEnd(n)):(r&&r(e),a.manager.itemEnd(n),a.manager.itemError(n))},!1),void 0!==t&&m.addEventListener("progress",function(e){t(e)},!1),m.addEventListener("error",function(e){r&&r(e),a.manager.itemEnd(n),a.manager.itemError(n)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return a.manager.itemStart(n),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(_s.prototype,{load:function(e,a,t,i){var s=this,o=[],l=new ma;l.image=o;var r=new vs(this.manager);function n(n){r.load(e[n],function(e){var t=s._parser(e,!0);o[n]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(u+=1)&&(1===t.mipmapCount&&(l.minFilter=Fe),l.format=t.format,l.needsUpdate=!0,a&&a(l))},t,i)}if(r.setPath(this.path),r.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,d=e.length;c<d;++c)n(c);else r.load(e,function(e){var t=s._parser(e,!0);if(t.isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,i=0;i<n;i++){o[i]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)o[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+r]),o[i].format=t.format,o[i].width=t.width,o[i].height=t.height}else l.image.width=t.width,l.image.height=t.height,l.mipmaps=t.mipmaps;1===t.mipmapCount&&(l.minFilter=Fe),l.format=t.format,l.needsUpdate=!0,a&&a(l)},t,i);return l},setPath:function(e){return this.path=e,this}}),Object.assign(ys.prototype,{load:function(e,n,t,i){var r=this,a=new tt,s=new vs(this.manager);return s.setResponseType("arraybuffer"),s.load(e,function(e){var t=r._parser(e);t&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:Le,a.wrapT=void 0!==t.wrapT?t.wrapT:Le,a.magFilter=void 0!==t.magFilter?t.magFilter:Fe,a.minFilter=void 0!==t.minFilter?t.minFilter:Be,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps),1===t.mipmapCount&&(a.minFilter=Fe),a.needsUpdate=!0,n&&n(a,t))},t,i),a}}),Object.assign(xs.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,a=ps.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){ps.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),s.addEventListener("error",function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(bs.prototype,{load:function(e,n,t,i){var r=new Me,a=new xs(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var s=0;function o(t){a.load(e[t],function(e){r.images[t]=e,6===++s&&(r.needsUpdate=!0,n&&n(r))},void 0,i)}for(var l=0;l<e.length;++l)o(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ts.prototype,{load:function(t,n,e,i){var r=new xs(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);var a=new Te;return a.image=r.load(t,function(){var e=0<t.search(/\.(jpg|jpeg)$/)||0===t.search(/^data\:image\/jpeg/);a.format=e?qe:We,a.needsUpdate=!0,void 0!==n&&n(a)},e,i),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Ss.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Ss,isLight:!0,copy:function(e){return Yn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Yn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Es.prototype=Object.assign(Object.create(Ss.prototype),{constructor:Es,isHemisphereLight:!0,copy:function(e){return Ss.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ws.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ms.prototype=Object.assign(Object.create(ws.prototype),{constructor:Ms,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Qe.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),As.prototype=Object.assign(Object.create(Ss.prototype),{constructor:As,isSpotLight:!0,copy:function(e){return Ss.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Cs.prototype=Object.assign(Object.create(Ss.prototype),{constructor:Cs,isPointLight:!0,copy:function(e){return Ss.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ps.prototype=Object.assign(Object.create(ws.prototype),{constructor:Ps}),Rs.prototype=Object.assign(Object.create(Ss.prototype),{constructor:Rs,isDirectionalLight:!0,copy:function(e){return Ss.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ds.prototype=Object.assign(Object.create(Ss.prototype),{constructor:Ds,isAmbientLight:!0}),ks.prototype=Object.assign(Object.create(Ss.prototype),{constructor:ks,isRectAreaLight:!0,copy:function(e){return Ss.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Ss.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var Is,Ls={arraySlice:function(e,t,n){return Ls.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(n){for(var e=n.length,t=new Array(e),i=0;i!==e;++i)t[i]=i;return t.sort(function(e,t){return n[e]-n[t]}),t},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,s=0;s!==i;++a)for(var o=n[a]*t,l=0;l!==t;++l)r[s++]=e[o+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var s=a[i];if(void 0!==s)if(Array.isArray(s))for(;void 0!==(s=a[i])&&(t.push(a.time),n.push.apply(n,s)),void 0!==(a=e[r++]););else if(void 0!==s.toArray)for(;void 0!==(s=a[i])&&(t.push(a.time),s.toArray(n,n.length)),void 0!==(a=e[r++]););else for(;void 0!==(s=a[i])&&(t.push(a.time),n.push(s)),void 0!==(a=e[r++]););}}};function Os(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Ns(e,t,n,i){Os.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Us(e,t,n,i){Os.call(this,e,t,n,i)}function Fs(e,t,n,i){Os.call(this,e,t,n,i)}function Bs(e,t,n,i){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=Ls.convertArray(t,this.TimeBufferType),this.values=Ls.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function $s(e,t,n,i){Bs.call(this,e,t,n,i)}function js(e,t,n,i){Os.call(this,e,t,n,i)}function Vs(e,t,n,i){Bs.call(this,e,t,n,i)}function Hs(e,t,n,i){Bs.call(this,e,t,n,i)}function zs(e,t,n,i){Bs.call(this,e,t,n,i)}function Gs(e,t,n){Bs.call(this,e,t,n)}function qs(e,t,n,i){Bs.call(this,e,t,n,i)}function Ws(e,t,n,i){Bs.apply(this,arguments)}function Ys(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Qe.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Xs(e){this.manager=void 0!==e?e:gs,this.textures={}}function Ks(e){this.manager=void 0!==e?e:gs}Object.assign(Os.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===s)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(r<=e)break e;var o=t[1];e<o&&(n=2,r=o);for(s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===s)break;if(i=r,(r=t[--n-1])<=e)break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(e,t,n,i){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}}),Object.assign(Os.prototype,{beforeStart_:Os.prototype.copySampleValue_,afterEnd_:Os.prototype.copySampleValue_}),Ns.prototype=Object.assign(Object.create(Os.prototype),{constructor:Ns,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=e,s=2*t-n;break;case 2402:s=t+i[r=i.length-2]-i[r+1];break;default:r=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*n-t;break;case 2402:o=n+i[a=1]-i[0];break;default:a=e-1,o=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=r*u,this._offsetNext=a*u},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(i-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,_=(-1-h)*m+(1.5+h)*p+.5*f,y=h*m-h*p,x=0;x!==s;++x)r[x]=g*a[u+x]+v*a[l+x]+_*a[o+x]+y*a[c+x];return r}}),Us.prototype=Object.assign(Object.create(Os.prototype),{constructor:Us,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(n-t)/(i-t),c=1-u,d=0;d!==s;++d)r[d]=a[l+d]*c+a[o+d]*u;return r}}),Fs.prototype=Object.assign(Object.create(Os.prototype),{constructor:Fs,interpolate_:function(e,t,n,i){return this.copySampleValue_(e-1)}}),Is={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Fs(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Us(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ns(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrackPrototype:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){a<=r&&(r=(a=Math.max(a,1))-1);var s=this.getValueSize();this.times=Ls.arraySlice(n,r,a),this.values=Ls.arraySlice(this.values,r*s,a*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),e=!1);for(var a=null,s=0;s!==r;s++){var o=n[s];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,s,o),e=!1;break}if(null!==a&&o<a){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,s,o,a),e=!1;break}a=o}if(void 0!==i&&Ls.isTypedArray(i)){s=0;for(var l=i.length;s!==l;++s){var u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,s,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,a=e.length-1,s=1;s<a;++s){var o=!1,l=e[s];if(l!==e[s+1]&&(1!==s||l!==l[0]))if(i)o=!0;else for(var u=s*n,c=u-n,d=u+n,h=0;h!==n;++h){var f=t[u+h];if(f!==t[c+h]||f!==t[d+h]){o=!0;break}}if(o){if(s!==r){e[r]=e[s];var p=s*n,m=r*n;for(h=0;h!==n;++h)t[m+h]=t[p+h]}++r}}if(0<a){e[r]=e[a];for(p=a*n,m=r*n,h=0;h!==n;++h)t[m+h]=t[p+h];++r}return r!==e.length&&(this.times=Ls.arraySlice(e,0,r),this.values=Ls.arraySlice(t,0,r*n)),this}},$s.prototype=Object.assign(Object.create(Is),{constructor:$s,ValueTypeName:"vector"}),js.prototype=Object.assign(Object.create(Os.prototype),{constructor:js,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=(n-t)/(i-t),u=o+s;o!==u;o+=4)we.slerpFlat(r,0,a,o-s,a,o,l);return r}}),Vs.prototype=Object.assign(Object.create(Is),{constructor:Vs,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new js(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Hs.prototype=Object.assign(Object.create(Is),{constructor:Hs,ValueTypeName:"number"}),zs.prototype=Object.assign(Object.create(Is),{constructor:zs,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Gs.prototype=Object.assign(Object.create(Is),{constructor:Gs,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),qs.prototype=Object.assign(Object.create(Is),{constructor:qs,ValueTypeName:"color"}),(Ws.prototype=Is).constructor=Ws,Object.assign(Ws,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=Ws._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],i=[];Ls.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Ls.convertArray(e.times,Array),values:Ls.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hs;case"vector":case"vector2":case"vector3":case"vector4":return $s;case"color":return qs;case"quaternion":return Vs;case"bool":case"boolean":return Gs;case"string":return zs}throw new Error("Unsupported typeName: "+e)}}),Object.assign(Ys,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(Ws.parse(n[r]).scale(i));return new Ys(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t},r=0,a=n.length;r!==a;++r)t.push(Ws.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,a=[],s=0;s<r;s++){var o=[],l=[];o.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);var u=Ls.getKeyframeOrder(o);o=Ls.sortedArray(o,1,u),l=Ls.sortedArray(l,1,u),i||0!==o[0]||(o.push(r),l.push(l[0])),a.push(new Hs(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/n))}return new Ys(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var o=e[a],l=o.name.match(r);if(l&&1<l.length){var u=i[d=l[1]];u||(i[d]=u=[]),u.push(o)}}var c=[];for(var d in i)c.push(Ys.CreateFromMorphTargetSequence(d,i[d],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],s=[];Ls.flattenJSON(n,a,s,i),0!==a.length&&r.push(new e(t,a,s))}},i=[],r=e.name||"default",a=e.length||-1,s=e.fps||30,o=e.hierarchy||[],l=0;l<o.length;l++){var u=o[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},d=0;d<u.length;d++)if(u[d].morphTargets)for(var h=0;h<u[d].morphTargets.length;h++)c[u[d].morphTargets[h]]=-1;for(var f in c){var p=[],m=[];for(h=0;h!==u[d].morphTargets.length;++h){var g=u[d];p.push(g.time),m.push(g.morphTarget===f?1:0)}i.push(new Hs(".morphTargetInfluence["+f+"]",p,m))}a=c.length*(s||1)}else{var v=".bones["+t[l].name+"]";n($s,v+".position",u,"pos",i),n(Vs,v+".quaternion",u,"rot",i),n($s,v+".scale",u,"scl",i)}}return 0===i.length?null:new Ys(r,a,i)}}),Object.assign(Ys.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Xs.prototype,{load:function(e,t,n,i){var r=this;new vs(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new fs[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.shading&&(i.shading=e.shading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalScale){var r=e.normalScale;!1===Array.isArray(r)&&(r=[r,r]),i.normalScale=(new xe).fromArray(r)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),i}}),Object.assign(Ks.prototype,{load:function(e,t,n,i){var r=this;new vs(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new Zi,n=e.data.index;if(void 0!==n){var i=new no[n.type](n.array);t.setIndex(new $i(i,1))}var r=e.data.attributes;for(var a in r){var s=r[a];i=new no[s.type](s.array);t.addAttribute(a,new $i(i,s.itemSize,s.normalized))}var o=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==o)for(var l=0,u=o.length;l!==u;++l){var c=o[l];t.addGroup(c.start,c.count,c.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var h=new Je;void 0!==d.center&&h.fromArray(d.center),t.boundingSphere=new Tn(h,d.radius)}return t}});var Qs,Zs,Js,eo,to,no={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function io(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function ro(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:gs,this.withCredentials=!1}function ao(e){this.manager=void 0!==e?e:gs,this.texturePath=""}io.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],a=t[n+1];if(r.test(e))return a}return null}},Object.assign(io.prototype,{crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:(Qs={NoBlending:G,NormalBlending:q,AdditiveBlending:W,SubtractiveBlending:Y,MultiplyBlending:Q,CustomBlending:Z},Zs=new jt,Js=new Ts,eo=new Xs,function(e,u,c){var d={};function t(e,t,n,i,r){var a,s=u+e,o=io.Handlers.get(s);a=null!==o?o.load(s):(Js.setCrossOrigin(c),Js.load(s)),void 0!==t&&(a.repeat.fromArray(t),1!==t[0]&&(a.wrapS=1e3),1!==t[1]&&(a.wrapT=1e3)),void 0!==n&&a.offset.fromArray(n),void 0!==i&&("repeat"===i[0]&&(a.wrapS=1e3),"mirror"===i[0]&&(a.wrapS=1002),"repeat"===i[1]&&(a.wrapT=1e3),"mirror"===i[1]&&(a.wrapT=1002)),void 0!==r&&(a.anisotropy=r);var l=Qe.generateUUID();return d[l]=a,l}var n={uuid:Qe.generateUUID(),type:"MeshLambertMaterial"};for(var i in e){var r=e[i];switch(i){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":n.name=r;break;case"blending":n.blending=Qs[r];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",i,"is no longer supported.");break;case"colorDiffuse":n.color=Zs.fromArray(r).getHex();break;case"colorSpecular":n.specular=Zs.fromArray(r).getHex();break;case"colorEmissive":n.emissive=Zs.fromArray(r).getHex();break;case"specularCoef":n.shininess=r;break;case"shading":"basic"===r.toLowerCase()&&(n.type="MeshBasicMaterial"),"phong"===r.toLowerCase()&&(n.type="MeshPhongMaterial"),"standard"===r.toLowerCase()&&(n.type="MeshStandardMaterial");break;case"mapDiffuse":n.map=t(r,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":n.emissiveMap=t(r,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":n.lightMap=t(r,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":n.aoMap=t(r,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":n.bumpMap=t(r,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":n.bumpScale=r;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":n.normalMap=t(r,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":n.normalScale=[r,r];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":n.specularMap=t(r,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":n.metalnessMap=t(r,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":n.roughnessMap=t(r,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":n.alphaMap=t(r,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":n.side=X;break;case"doubleSided":n.side=K;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),n.opacity=r;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":n[i]=r;break;case"vertexColors":!0===r&&(n.vertexColors=2),"face"===r&&(n.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",i,r)}}return"MeshBasicMaterial"===n.type&&delete n.emissive,"MeshPhongMaterial"!==n.type&&delete n.specular,n.opacity<1&&(n.transparent=!0),eo.setTextures(d),eo.parse(n)})}),Object.assign(ro.prototype,{load:function(a,s,e,t){var o=this,l=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:io.prototype.extractUrlBase(a),n=new vs(this.manager);n.setWithCredentials(this.withCredentials),n.load(a,function(e){var t=JSON.parse(e),n=t.metadata;if(void 0!==n){var i=n.type;if(void 0!==i){if("object"===i.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");if("scene"===i.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.")}}var r=o.parse(t,l);s(r.geometry,r.materials)},e,t)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new Bi;return function(e,t){function n(e,t){return e&1<<t}var i,r,a,s,o,l,u,c,d,h,f,p,m,g,v,_,y,x,b,T,S,E,w,M,A,C=e.faces,P=e.vertices,R=e.normals,D=e.colors,k=e.scale,I=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&I++;for(i=0;i<I;i++)t.faceVertexUvs[i]=[]}for(s=0,o=P.length;s<o;)(x=new Je).x=P[s++]*k,x.y=P[s++]*k,x.z=P[s++]*k,t.vertices.push(x);for(s=0,o=C.length;s<o;)if(f=n(h=C[s++],0),p=n(h,1),m=n(h,3),g=n(h,4),v=n(h,5),_=n(h,6),y=n(h,7),f){if((T=new Zn).a=C[s],T.b=C[s+1],T.c=C[s+3],(S=new Zn).a=C[s+1],S.b=C[s+2],S.c=C[s+3],s+=4,p&&(d=C[s++],T.materialIndex=d,S.materialIndex=d),a=t.faces.length,m)for(i=0;i<I;i++)for(M=e.uvs[i],t.faceVertexUvs[i][a]=[],t.faceVertexUvs[i][a+1]=[],r=0;r<4;r++)A=new xe(M[2*(c=C[s++])],M[2*c+1]),2!==r&&t.faceVertexUvs[i][a].push(A),0!==r&&t.faceVertexUvs[i][a+1].push(A);if(g&&(u=3*C[s++],T.normal.set(R[u++],R[u++],R[u]),S.normal.copy(T.normal)),v)for(i=0;i<4;i++)u=3*C[s++],w=new Je(R[u++],R[u++],R[u]),2!==i&&T.vertexNormals.push(w),0!==i&&S.vertexNormals.push(w);if(_&&(E=D[l=C[s++]],T.color.setHex(E),S.color.setHex(E)),y)for(i=0;i<4;i++)E=D[l=C[s++]],2!==i&&T.vertexColors.push(new jt(E)),0!==i&&S.vertexColors.push(new jt(E));t.faces.push(T),t.faces.push(S)}else{if((b=new Zn).a=C[s++],b.b=C[s++],b.c=C[s++],p&&(d=C[s++],b.materialIndex=d),a=t.faces.length,m)for(i=0;i<I;i++)for(M=e.uvs[i],t.faceVertexUvs[i][a]=[],r=0;r<3;r++)A=new xe(M[2*(c=C[s++])],M[2*c+1]),t.faceVertexUvs[i][a].push(A);if(g&&(u=3*C[s++],b.normal.set(R[u++],R[u++],R[u])),v)for(i=0;i<3;i++)u=3*C[s++],w=new Je(R[u++],R[u++],R[u]),b.vertexNormals.push(w);if(_&&(l=C[s++],b.color.setHex(D[l])),y)for(i=0;i<3;i++)l=C[s++],b.vertexColors.push(new jt(D[l]));t.faces.push(b)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var a=e.skinWeights[i],s=1<n?e.skinWeights[i+1]:0,o=2<n?e.skinWeights[i+2]:0,l=3<n?e.skinWeights[i+3]:0;t.skinWeights.push(new Ze(a,s,o,l))}if(e.skinIndices)for(i=0,r=e.skinIndices.length;i<r;i+=n){var u=e.skinIndices[i],c=1<n?e.skinIndices[i+1]:0,d=2<n?e.skinIndices[i+2]:0,h=3<n?e.skinIndices[i+3]:0;t.skinIndices.push(new Ze(u,c,d,h))}t.bones=e.bones,t.bones&&0<t.bones.length&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var a=t.morphTargets[i].vertices,s=e.morphTargets[i].vertices,o=0,l=s.length;o<l;o+=3){var u=new Je;u.x=s[o]*n,u.y=s[o+1]*n,u.z=s[o+2]*n,a.push(u)}}if(void 0!==e.morphColors&&0<e.morphColors.length){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=t.faces,d=e.morphColors[0].colors;for(i=0,r=c.length;i<r;i++)c[i].color.fromArray(d,3*i)}}(e,n),function(e,t){var n=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var a=Ys.parseAnimation(i[r],t.bones);a&&n.push(a)}if(t.morphTargets){var s=Ys.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(s)}0<n.length&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:io.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(ao.prototype,{load:function(i,r,e,a){""===this.texturePath&&(this.texturePath=i.substring(0,i.lastIndexOf("/")+1));var s=this;new vs(s.manager).load(i,function(e){var t=null;try{t=JSON.parse(e)}catch(e){return void 0!==a&&a(e),void console.error("THREE:ObjectLoader: Can't parse "+i+".",e.message)}var n=t.metadata;void 0!==n&&void 0!==n.type&&"geometry"!==n.type.toLowerCase()?s.parse(t,r):console.error("THREE.ObjectLoader: Can't load "+i+". Use THREE.JSONLoader instead.")},e,a)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),r=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,r),s=this.parseObject(e.object,n,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new ro,i=new Ks,r=0,a=e.length;r<a;r++){var s,o=e[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new is[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new is[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new is[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new is[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new is[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new is[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new is[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new is[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new is[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new is[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new is[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"BufferGeometry":s=i.parse(o);break;case"Geometry":s=n.parse(o,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),t[o.uuid]=s}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new Xs;i.setTextures(t);for(var r=0,a=e.length;r<a;r++){var s=e[r];if("MultiMaterial"===s.type){for(var o=[],l=0;l<s.materials.length;l++)o.push(i.parse(s.materials[l]));n[s.uuid]=o}else n[s.uuid]=i.parse(s)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=Ys.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&0<e.length){var a=new xs(new ms(t));a.setCrossOrigin(this.crossOrigin);for(var s=0,o=e.length;s<o;s++){var l=e[s],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;i[l.uuid]=r(u)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var o=new Te(t[s.image]);o.needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,so)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],oo),o.wrapT=n(s.wrap[1],oo)),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,lo)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,lo)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),i[s.uuid]=o}return i},parseObject:(to=new et,function(e,t,a){var n;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function r(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];void 0===a[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(a[r])}return t}return void 0===a[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),a[e]}}switch(e.type){case"Scene":n=new Jr,void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new jt(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new Zr(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new Qr(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new Qn(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new Kn(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":n=new Ds(e.color,e.intensity);break;case"DirectionalLight":n=new Rs(e.color,e.intensity);break;case"PointLight":n=new Cs(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new ks(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new As(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new Es(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var s=i(e.geometry),o=r(e.material);n=s.bones&&0<s.bones.length?new sa(s,o):new or(s,o);break;case"LOD":n=new ia;break;case"Line":n=new la(i(e.geometry),r(e.material),e.mode);break;case"LineLoop":n=new ca(i(e.geometry),r(e.material));break;case"LineSegments":n=new ua(i(e.geometry),r(e.material));break;case"PointCloud":case"Points":n=new ha(i(e.geometry),r(e.material));break;case"Sprite":n=new na(r(e.material));break;case"Group":n=new fa;break;default:n=new Yn}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(to.fromArray(e.matrix),to.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.children)for(var l in e.children)n.add(this.parseObject(e.children[l],t,a));if("LOD"===e.type)for(var u=e.levels,c=0;c<u.length;c++){var d=u[c];void 0!==(l=n.getObjectByProperty("uuid",d.object))&&n.addLevel(l,d.distance)}return n})});var so={UVMapping:300,CubeReflectionMapping:he,CubeRefractionMapping:fe,EquirectangularReflectionMapping:pe,EquirectangularRefractionMapping:me,SphericalReflectionMapping:ge,CubeUVReflectionMapping:ve,CubeUVRefractionMapping:_e},oo={RepeatWrapping:1e3,ClampToEdgeWrapping:Le,MirroredRepeatWrapping:1002},lo={NearestFilter:Oe,NearestMipMapNearestFilter:Ne,NearestMipMapLinearFilter:Ue,LinearFilter:Fe,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:Be};function uo(e,t,n,i,r){var a=.5*(i-t),s=.5*(r-n),o=e*e;return(2*n-2*i+a+s)*(e*o)+(-3*n+3*i-2*a-s)*o+a*e+n}function co(e,t,n,i){return(s=1-e)*s*t+2*(1-(a=e))*a*n+(r=e)*r*i;var r,a,s}function ho(e,t,n,i,r){return(u=1-e)*u*u*t+3*(l=1-(o=e))*l*o*n+3*(1-(s=e))*s*s*i+(a=e)*a*a*r;var a,s,o,l,u}function fo(){this.arcLengthDivisions=200}function po(e,t){fo.call(this),this.v1=e,this.v2=t}function mo(){fo.call(this),this.curves=[],this.autoClose=!1}function go(e,t,n,i,r,a,s,o){fo.call(this),this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o||0}function vo(e){fo.call(this),this.points=void 0===e?[]:e}function _o(e,t,n,i){fo.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=i}function yo(e,t,n){fo.call(this),this.v0=e,this.v1=t,this.v2=n}Object.assign(fo.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(r),i.push(a),r=t;return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var s,o=0,l=a-1;o<=l;)if((s=i[r=Math.floor(o+(l-o)/2)]-n)<0)o=r+1;else{if(!(0<s)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),1<n&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,a=new Je,s=[],o=[],l=[],u=new Je,c=new et;for(n=0;n<=e;n++)i=n/e,s[n]=this.getTangentAt(i),s[n].normalize();o[0]=new Je,l[0]=new Je;var d=Number.MAX_VALUE,h=Math.abs(s[0].x),f=Math.abs(s[0].y),p=Math.abs(s[0].z);for(h<=d&&(d=h,a.set(1,0,0)),f<=d&&(d=f,a.set(0,1,0)),p<=d&&a.set(0,0,1),u.crossVectors(s[0],a).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]),n=1;n<=e;n++)o[n]=o[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(s[n-1],s[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(Qe.clamp(s[n-1].dot(s[n]),-1,1)),o[n].applyMatrix4(c.makeRotationAxis(u,r))),l[n].crossVectors(s[n],o[n]);if(!0===t)for(r=Math.acos(Qe.clamp(o[0].dot(o[e]),-1,1)),r/=e,0<s[0].dot(u.crossVectors(o[0],o[e]))&&(r=-r),n=1;n<=e;n++)o[n].applyMatrix4(c.makeRotationAxis(s[n],r*n)),l[n].crossVectors(s[n],o[n]);return{tangents:s,normals:o,binormals:l}}}),((po.prototype=Object.create(fo.prototype)).constructor=po).prototype.isLineCurve=!0,po.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},po.prototype.getPointAt=function(e){return this.getPoint(e)},po.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},mo.prototype=Object.assign(Object.create(fo.prototype),{constructor:mo,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new po(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],s=a.getLength(),o=0===s?0:1-r/s;return a.getPointAt(o)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],s=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s),l=0;l<o.length;l++){var u=o[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Bi,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new Je(r.x,r.y,r.z||0))}return t}}),((go.prototype=Object.create(fo.prototype)).constructor=go).prototype.isEllipseCurve=!0,go.prototype.getPoint=function(e){for(var t=2*Math.PI,n=this.aEndAngle-this.aStartAngle,i=Math.abs(n)<Number.EPSILON;n<0;)n+=t;for(;t<n;)n-=t;n<Number.EPSILON&&(n=i?0:t),!0!==this.aClockwise||i||(n===t?n=-t:n-=t);var r=this.aStartAngle+e*n,a=this.aX+this.xRadius*Math.cos(r),s=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){var o=Math.cos(this.aRotation),l=Math.sin(this.aRotation),u=a-this.aX,c=s-this.aY;a=u*o-c*l+this.aX,s=u*l+c*o+this.aY}return new xe(a,s)},((vo.prototype=Object.create(fo.prototype)).constructor=vo).prototype.isSplineCurve=!0,vo.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,i=Math.floor(n),r=n-i,a=t[0===i?i:i-1],s=t[i],o=t[i>t.length-2?t.length-1:i+1],l=t[i>t.length-3?t.length-1:i+2];return new xe(uo(r,a.x,s.x,o.x,l.x),uo(r,a.y,s.y,o.y,l.y))},((_o.prototype=Object.create(fo.prototype)).constructor=_o).prototype.getPoint=function(e){var t=this.v0,n=this.v1,i=this.v2,r=this.v3;return new xe(ho(e,t.x,n.x,i.x,r.x),ho(e,t.y,n.y,i.y,r.y))},((yo.prototype=Object.create(fo.prototype)).constructor=yo).prototype.getPoint=function(e){var t=this.v0,n=this.v1,i=this.v2;return new xe(co(e,t.x,n.x,i.x),co(e,t.y,n.y,i.y))};var xo,bo=Object.assign(Object.create(mo.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new po(this.currentPoint.clone(),new xe(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new yo(this.currentPoint.clone(),new xe(e,t),new xe(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,a){var s=new _o(this.currentPoint.clone(),new xe(e,t),new xe(n,i),new xe(r,a));this.curves.push(s),this.currentPoint.set(r,a)},splineThru:function(e){var t=new vo([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,a){var s=this.currentPoint.x,o=this.currentPoint.y;this.absarc(e+s,t+o,n,i,r,a)},absarc:function(e,t,n,i,r,a){this.absellipse(e,t,n,n,i,r,a)},ellipse:function(e,t,n,i,r,a,s,o){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,n,i,r,a,s,o)},absellipse:function(e,t,n,i,r,a,s,o){var l=new go(e,t,n,i,r,a,s,o);if(0<this.curves.length){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});function To(e){mo.call(this),this.currentPoint=new xe,e&&this.fromPoints(e)}function So(){To.apply(this,arguments),this.holes=[]}function Eo(){this.subPaths=[],this.currentPath=null}function wo(e){this.data=e}function Mo(e){this.manager=void 0!==e?e:gs}(To.prototype=bo).constructor=To,So.prototype=Object.assign(Object.create(bo),{constructor:So,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),Object.assign(Eo.prototype,{moveTo:function(e,t){this.currentPath=new To,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,a){this.currentPath.bezierCurveTo(e,t,n,i,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new So;a.curves=r.curves,t.push(a)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var s=t[r],o=t[a],l=o.x-s.x,u=o.y-s.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(s=t[a],l=-l,o=t[r],u=-u),e.y<s.y||e.y>o.y)continue;if(e.y===s.y){if(e.x===s.x)return!0}else{var c=u*(e.x-s.x)-l*(e.y-s.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==s.y)continue;if(o.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=o.x)return!0}}return i}var r=Ua.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var s,o,l,u=[];if(1===a.length)return o=a[0],(l=new So).curves=o.curves,u.push(l),u;var c=!r(a[0].getPoints());c=e?!c:c;var d,h,f=[],p=[],m=[],g=0;p[g]=void 0,m[g]=[];for(var v=0,_=a.length;v<_;v++)s=r(d=(o=a[v]).getPoints()),(s=e?!s:s)?(!c&&p[g]&&g++,p[g]={s:new So,p:d},p[g].s.curves=o.curves,c&&g++,m[g]=[]):m[g].push({h:o,p:d[0]});if(!p[0])return n(a);if(1<p.length){for(var y=!1,x=[],b=0,T=p.length;b<T;b++)f[b]=[];for(b=0,T=p.length;b<T;b++)for(var S=m[b],E=0;E<S.length;E++){for(var w=S[E],M=!0,A=0;A<p.length;A++)i(w.p,p[A].p)&&(b!==A&&x.push({froms:b,tos:A,hole:E}),M?(M=!1,f[A].push(w)):y=!0);M&&f[b].push(w)}0<x.length&&(y||(m=f))}v=0;for(var C=p.length;v<C;v++){l=p[v].s,u.push(l);for(var P=0,R=(h=m[v]).length;P<R;P++)l.holes.push(h[P].h)}return u}}),Object.assign(wo.prototype,{isFont:!0,generateShapes:function(e,c,S){function d(e,t,n,i){var r=E.glyphs[e]||E.glyphs["?"];if(r){var a,s,o,l,u,c,d,h,f,p,m,g=new Eo,v=[];if(r.o)for(var _=r._cachedOutline||(r._cachedOutline=r.o.split(" ")),y=0,x=_.length;y<x;){switch(_[y++]){case"m":a=_[y++]*t+n,s=_[y++]*t+i,g.moveTo(a,s);break;case"l":a=_[y++]*t+n,s=_[y++]*t+i,g.lineTo(a,s);break;case"q":if(o=_[y++]*t+n,l=_[y++]*t+i,d=_[y++]*t+n,h=_[y++]*t+i,g.quadraticCurveTo(d,h,o,l),m=v[v.length-1]){u=m.x,c=m.y;for(var b=1;b<=S;b++){co(T=b/S,u,d,o),co(T,c,h,l)}}break;case"b":if(o=_[y++]*t+n,l=_[y++]*t+i,d=_[y++]*t+n,h=_[y++]*t+i,f=_[y++]*t+n,p=_[y++]*t+i,g.bezierCurveTo(d,h,f,p,o,l),m=v[v.length-1]){u=m.x,c=m.y;for(b=1;b<=S;b++){var T;ho(T=b/S,u,d,f,o),ho(T,c,h,p,l)}}}}return{offsetX:r.ha*t,path:g}}}void 0===c&&(c=100),void 0===S&&(S=4);for(var E=this.data,t=function(e){for(var t=String(e).split(""),n=c/E.resolution,i=(E.boundingBox.yMax-E.boundingBox.yMin+E.underlineThickness)*n,r=0,a=0,s=[],o=0;o<t.length;o++){var l=t[o];if("\n"===l)r=0,a-=i;else{var u=d(l,n,r,a);r+=u.offsetX,s.push(u.path)}}return s}(e),n=[],i=0,r=t.length;i<r;i++)Array.prototype.push.apply(n,t[i].toShapes());return n}}),Object.assign(Mo.prototype,{load:function(e,i,t,n){var r=this;new vs(this.manager).load(e,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var e=r.parse(n);i&&i(e)},t,n)},parse:function(e){return new wo(e)}});var Ao,Co,Po,Ro,Do,ko,Io,Lo,Oo,No,Uo,Fo,Bo,$o,jo,Vo,Ho,zo,Go,qo,Wo,Yo,Xo,Ko,Qo,Zo,Jo,el,tl,nl,il,rl,al,sl,ol,ll,ul,cl,dl,hl={getContext:function(){return void 0===xo&&(xo=new(window.AudioContext||window.webkitAudioContext)),xo},setContext:function(e){xo=e}};function fl(e){this.manager=void 0!==e?e:gs}function pl(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function ml(e,t,n){Yn.call(this),this.type="CubeCamera";var r=new Qn(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Je(1,0,0)),this.add(r);var a=new Qn(90,1,e,t);a.up.set(0,-1,0),a.lookAt(new Je(-1,0,0)),this.add(a);var s=new Qn(90,1,e,t);s.up.set(0,0,1),s.lookAt(new Je(0,1,0)),this.add(s);var o=new Qn(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new Je(0,-1,0)),this.add(o);var l=new Qn(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Je(0,0,1)),this.add(l);var u=new Qn(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new Je(0,0,-1)),this.add(u);var i={format:qe,magFilter:Fe,minFilter:Fe};this.renderTarget=new Ee(n,n,i),this.renderTarget.texture.name="CubeCamera",this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,a,n),n.activeCubeFace=2,e.render(t,s,n),n.activeCubeFace=3,e.render(t,o,n),n.activeCubeFace=4,e.render(t,l,n),n.texture.generateMipmaps=i,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)}}function gl(){Yn.call(this),this.type="AudioListener",this.context=hl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function vl(e){Yn.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function _l(e){vl.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function yl(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function xl(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function bl(e,t,n){var i=n||Tl.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Tl(e,t,n){this.path=t,this.parsedPath=n||Tl.parseTrackName(t),this.node=Tl.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Sl(e){this.uuid=Qe.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function El(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,a=new Array(r),s={endingStart:2400,endingEnd:2400},o=0;o!==r;++o){var l=i[o].createInterpolant(null);(a[o]=l).settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function wl(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ml(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Al(){Zi.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Cl(e,t,n,i){this.uuid=Qe.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Pl(e,t){this.uuid=Qe.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Rl(e,t,n){Pl.call(this,e,t),this.meshPerAttribute=n||1}function Dl(e,t,n){$i.call(this,e,t),this.meshPerAttribute=n||1}function kl(e,t,n,i){this.ray=new rr(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Il(e,t){return e.distance-t.distance}function Ll(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,a=0,s=r.length;a<s;a++)Ll(r[a],t,n,!0)}function Ol(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Nl(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Ul(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Fl(e,t){or.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,i=n-1,r=n/1;this.createAnimation("__default",0,i,r),this.setAnimationWeight("__default",1)}function Bl(e){Yn.call(this),this.material=e,this.render=function(e){}}function $l(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,s=0,o=this.object.geometry;o&&o.isGeometry?s=3*o.faces.length:o&&o.isBufferGeometry&&(s=o.attributes.normal.count);var l=new Zi,u=new Yi(2*s*3,3);l.addAttribute("position",u),ua.call(this,l,new oa({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function jl(e){Yn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Zi,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,r=1;i<32;i++,r++){var a=i/32*Math.PI*2,s=r/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}t.addAttribute("position",new Yi(n,3));var o=new oa({fog:!1});this.cone=new ua(t,o),this.add(this.cone),this.update()}function Vl(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new Zi,i=[],r=[],a=new jt(0,0,1),s=new jt(0,1,0),o=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}n.addAttribute("position",new Yi(i,3)),n.addAttribute("color",new Yi(r,3));var u=new oa({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});ua.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function Hl(e,t){this.light=e,this.light.updateMatrixWorld();var n=new Ha(t,4,2),i=new ir({wireframe:!0,fog:!1});i.color.copy(this.light.color),or.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function zl(e){Yn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new oa({color:e.color}),n=new Zi;n.addAttribute("position",new $i(new Float32Array(15),3)),this.add(new la(n,t)),this.update()}function Gl(e,t){Yn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var n=new Ma(t);n.rotateY(.5*Math.PI);var i=new ir({vertexColors:2,wireframe:!0}),r=n.getAttribute("position"),a=new Float32Array(3*r.count);n.addAttribute("color",new $i(a,3)),this.add(new or(n,i)),this.update()}function ql(e,t,n,i){e=e||10,t=t||10,n=new jt(void 0!==n?n:4473924),i=new jt(void 0!==i?i:8947848);for(var r=t/2,a=e/t,s=e/2,o=[],l=[],u=0,c=0,d=-s;u<=t;u++,d+=a){o.push(-s,0,d,s,0,d),o.push(d,0,-s,d,0,s);var h=u===r?n:i;h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3}var f=new Zi;f.addAttribute("position",new Yi(o,3)),f.addAttribute("color",new Yi(l,3));var p=new oa({vertexColors:2});ua.call(this,f,p)}function Wl(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new jt(void 0!==r?r:4473924),a=new jt(void 0!==a?a:8947848);var s,o,l,u,c,d,h,f=[],p=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),s=Math.sin(l)*e,o=Math.cos(l)*e,f.push(0,0,0),f.push(s,0,o),h=1&u?r:a,p.push(h.r,h.g,h.b),p.push(h.r,h.g,h.b);for(u=0;u<=n;u++)for(h=1&u?r:a,d=e-e/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),s=Math.sin(l)*d,o=Math.cos(l)*d,f.push(s,0,o),p.push(h.r,h.g,h.b),l=(c+1)/i*(2*Math.PI),s=Math.sin(l)*d,o=Math.cos(l)*d,f.push(s,0,o),p.push(h.r,h.g,h.b);var m=new Zi;m.addAttribute("position",new Yi(f,3)),m.addAttribute("color",new Yi(p,3));var g=new oa({vertexColors:2});ua.call(this,m,g)}function Yl(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,s=0,o=this.object.geometry;o&&o.isGeometry?s=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Zi,u=new Yi(2*s*3,3);l.addAttribute("position",u),ua.call(this,l,new oa({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Xl(e,t){Yn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var n=new Zi;n.addAttribute("position",new Yi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new oa({fog:!1});this.add(new la(n,i)),(n=new Zi).addAttribute("position",new Yi([0,0,0,0,0,1],3)),this.add(new la(n,i)),this.update()}function Kl(e){var t=new Zi,n=new oa({color:16777215,vertexColors:1}),i=[],r=[],a={},s=new jt(16755200),o=new jt(16711680),l=new jt(43775),u=new jt(16777215),c=new jt(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}d("n1","n2",s),d("n2","n4",s),d("n4","n3",s),d("n3","n1",s),d("f1","f2",s),d("f2","f4",s),d("f4","f3",s),d("f3","f1",s),d("n1","f1",s),d("n2","f2",s),d("n3","f3",s),d("n4","f4",s),d("p","n1",o),d("p","n2",o),d("p","n3",o),d("p","n4",o),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",u),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c),t.addAttribute("position",new Yi(i,3)),t.addAttribute("color",new Yi(r,3)),ua.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Ql(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Zi;r.setIndex(new $i(n,1)),r.addAttribute("position",new $i(i,3)),ua.call(this,r,new oa({color:t})),this.matrixAutoUpdate=!1,this.update()}function Zl(e,t,n,i,r,a){Yn.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===ll&&((ll=new Zi).addAttribute("position",new Yi([0,0,0,0,1,0],3)),(ul=new Za(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new la(ll,new oa({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new or(ul,new ir({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}function Jl(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Zi;n.addAttribute("position",new Yi(t,3)),n.addAttribute("color",new Yi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new oa({vertexColors:2});ua.call(this,n,i)}function eu(){var r=0,a=0,s=0,o=0;function u(e,t,n,i){s=-3*(r=e)+3*t-2*(a=n)-i,o=2*e-2*t+n+i}return{initCatmullRom:function(e,t,n,i,r){u(t,n,r*(n-e),r*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,r,a,s){var o=(t-e)/r-(n-e)/(r+a)+(n-t)/a,l=(n-t)/a-(i-t)/(a+s)+(i-n)/s;u(t,n,o*=a,l*=a)},calc:function(e){var t=e*e;return r+a*e+s*t+o*(t*e)}}}Object.assign(fl.prototype,{load:function(e,t,n,i){var r=new vs(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){hl.getContext().decodeAudioData(e,function(e){t(e)})},n,i)}}),Object.assign(pl.prototype,{update:(Oo=new et,No=new et,function(e){if(Ao!==this||Co!==e.focus||Po!==e.fov||Ro!==e.aspect*this.aspect||Do!==e.near||ko!==e.far||Io!==e.zoom||Lo!==this.eyeSep){Ao=this,Co=e.focus,Po=e.fov,Ro=e.aspect*this.aspect,Do=e.near,ko=e.far,Io=e.zoom;var t,n,i=e.projectionMatrix.clone(),r=(Lo=this.eyeSep/2)*Do/Co,a=Do*Math.tan(Qe.DEG2RAD*Po*.5)/Io;No.elements[12]=-Lo,Oo.elements[12]=Lo,t=-a*Ro+r,n=a*Ro+r,i.elements[0]=2*Do/(n-t),i.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(i),t=-a*Ro-r,n=a*Ro-r,i.elements[0]=2*Do/(n-t),i.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(No),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Oo)})}),(ml.prototype=Object.create(Yn.prototype)).constructor=ml,gl.prototype=Object.assign(Object.create(Yn.prototype),{constructor:gl,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:(Uo=new Je,Fo=new we,Bo=new Je,$o=new Je,function(e){Yn.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;this.matrixWorld.decompose(Uo,Fo,Bo),$o.set(0,0,-1).applyQuaternion(Fo),t.positionX?(t.positionX.setValueAtTime(Uo.x,this.context.currentTime),t.positionY.setValueAtTime(Uo.y,this.context.currentTime),t.positionZ.setValueAtTime(Uo.z,this.context.currentTime),t.forwardX.setValueAtTime($o.x,this.context.currentTime),t.forwardY.setValueAtTime($o.y,this.context.currentTime),t.forwardZ.setValueAtTime($o.z,this.context.currentTime),t.upX.setValueAtTime(n.x,this.context.currentTime),t.upY.setValueAtTime(n.y,this.context.currentTime),t.upZ.setValueAtTime(n.z,this.context.currentTime)):(t.setPosition(Uo.x,Uo.y,Uo.z),t.setOrientation($o.x,$o.y,$o.z,n.x,n.y,n.z))})}),vl.prototype=Object.assign(Object.create(Yn.prototype),{constructor:vl,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),_l.prototype=Object.assign(Object.create(vl.prototype),{constructor:_l,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:(jo=new Je,function(e){Yn.prototype.updateMatrixWorld.call(this,e),jo.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(jo.x,jo.y,jo.z)})}),Object.assign(yl.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(xl.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var s=0;s!==i;++s)n[r+s]=n[s];a=t}else{var o=t/(a+=t);this._mixBufferRegion(n,r,0,o,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var s=3*t;this._mixBufferRegion(n,i,s,1-r,t)}for(var o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){a.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(.5<=i)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,i){we.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var a=1-i,s=0;s!==r;++s){var o=t+s;e[o]=e[o]*a+e[n+s]*i}}}),Object.assign(bl.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Tl,{Composite:bl,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Tl.Composite(e,t,n):new Tl(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:(Vo=new RegExp("^"+/((?:[\w-]+[\/:])*)/.source+/([\w-\.]+)?/.source+/(?:\.([\w-]+)(?:\[(.+)\])?)?/.source+/\.([\w-]+)(?:\[(.+)\])?/.source+"$"),Ho=["material","materials","bones"],function(e){var t=Vo.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Ho.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,r){if(!r||""===r||"root"===r||"."===r||-1===r||r===e.name||r===e.uuid)return e;if(e.skeleton){var t=function(e){for(var t=0;t<e.bones.length;t++){var n=e.bones[t];if(n.name===r)return n}return null}(e.skeleton);if(t)return t}if(e.children){var a=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.name===r||n.uuid===r)return n;var i=a(n.children);if(i)return i}return null},n=a(e.children);if(n)return n}return null}}),Object.assign(Tl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Tl.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var o=e[i];if(void 0!==o){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===r){r=s;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===r){r=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Tl.prototype,{_getValue_unbound:Tl.prototype.getValue,_setValue_unbound:Tl.prototype.setValue}),Object.assign(Sl.prototype,{isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,n=t.length,i=this.nCachedObjects_,r=this._indicesByUUID,a=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length,u=0,c=arguments.length;u!==c;++u){var d=arguments[u],h=d.uuid,f=r[h],p=void 0;if(void 0===f){f=n++,r[h]=f,t.push(d);for(var m=0,g=l;m!==g;++m)o[m].push(new Tl(d,a[m],s[m]))}else if(f<i){p=t[f];var v=--i,_=t[v];t[r[_.uuid]=f]=_,t[r[h]=v]=d;for(m=0,g=l;m!==g;++m){var y=o[m],x=y[v],b=y[f];y[f]=x,void 0===b&&(b=new Tl(d,a[m],s[m])),y[v]=b}}else t[f]!==p&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(e){for(var t=this._objects,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,s=0,o=arguments.length;s!==o;++s){var l=arguments[s],u=l.uuid,c=i[u];if(void 0!==c&&n<=c){var d=n++,h=t[d];t[i[h.uuid]=c]=h,t[i[u]=d]=l;for(var f=0,p=a;f!==p;++f){var m=r[f],g=m[d],v=m[c];m[c]=g,m[d]=v}}}this.nCachedObjects_=n},uncache:function(e){for(var t=this._objects,n=t.length,i=this.nCachedObjects_,r=this._indicesByUUID,a=this._bindings,s=a.length,o=0,l=arguments.length;o!==l;++o){var u=arguments[o].uuid,c=r[u];if(void 0!==c)if(delete r[u],c<i){var d=--i,h=t[d],f=t[_=--n];t[r[h.uuid]=c]=h,t[r[f.uuid]=d]=f,t.pop();for(var p=0,m=s;p!==m;++p){var g=(y=a[p])[d],v=y[_];y[c]=g,y[d]=v,y.pop()}}else{var _;t[r[(f=t[_=--n]).uuid]=c]=f,t.pop();for(p=0,m=s;p!==m;++p){var y;(y=a[p])[c]=y[_],y.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,a.push(e),s.push(t),r.push(c);for(var d=u,h=o.length;d!==h;++d){var f=o[d];c[d]=new Tl(f,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];a[t[e[s]]=n]=o,a.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}),Object.assign(El.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,s=i/r;e.warp(1,a,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,s=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/s,l[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var s=this._updateTime(t),o=this._updateWeight(e);if(0<o)for(var l=this._interpolants,u=this._propertyBindings,c=0,d=l.length;c!==d;++c)l[c].evaluate(s),u[c].accumulate(i,o)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n<=t)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=2202===i;if(-1===r&&(0<=e?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),n<=t||t<0){var s=Math.floor(t/n);t-=n*s,r+=Math.abs(s);var o=this.repetitions-r;if(o<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1});else{if(0===o){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(a&&1==(1&r))return n-(this.time=t)}return this.time=t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=n,this}}),Object.assign(wl.prototype,t.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName,u=l[o];void 0===u&&(u={},l[o]=u);for(var c=0;c!==r;++c){var d=i[c],h=d.name,f=u[h];if(void 0!==f)a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,o,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new xl(Tl.create(n,h,p),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(f,o,h),a[c]=f}s[c].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,s=r.length;a!==s;++a){var o=r[a];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;t[n._cacheIndex=i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;o[l._byClipCacheIndex=u]=l,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];t[e._cacheIndex=i]=e,t[r._cacheIndex=n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];t[e._cacheIndex=i]=e,t[r._cacheIndex=n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],a=this._bindings;void 0===r&&(r={},i[t]=r),(r[n]=e)._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,s=a[i],o=t[t.length-1],l=e._cacheIndex;t[o._cacheIndex=l]=o,t.pop(),delete s[r];e:{for(var u in s)break e;delete a[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];t[e._cacheIndex=i]=e,t[r._cacheIndex=n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];t[e._cacheIndex=i]=e,t[r._cacheIndex=n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(e[(n=new Us(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];t[e.__cacheIndex=i]=e,t[r.__cacheIndex=n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Ys.findByName(n,e):e,a=null!==r?r.uuid:e,s=this._actionsByClip[a],o=null;if(void 0!==s){var l=s.actionByRoot[i];if(void 0!==l)return l;o=s.knownActions[0],null===r&&(r=o._clip)}if(null===r)return null;var u=new El(this,r,t);return this._bindAction(u,o),this._addInactiveAction(u,a,i),u},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Ys.findByName(n,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0;for(var r=this._nActiveBindings=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,s=0;s!==n;++s){t[s]._update(i,e,r,a)}var o=this._bindings,l=this._nActiveBindings;for(s=0;s!==l;++s)o[s].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,s=0,o=a.length;s!==o;++s){var l=a[s];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,t[c._cacheIndex=u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var s in a){var o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Ml.prototype.clone=function(){return new Ml(void 0===this.value.clone?this.value:this.value.clone())},Al.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Al,isInstancedBufferGeometry:!0,addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var i in n){var r=n[i];this.addAttribute(i,r.clone())}for(var a=e.groups,s=0,o=a.length;s<o;s++){var l=a[s];this.addGroup(l.start,l.count,l.materialIndex)}return this}}),Object.defineProperties(Cl.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Cl.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),Object.defineProperty(Pl.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Pl.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Rl.prototype=Object.assign(Object.create(Pl.prototype),{constructor:Rl,isInstancedInterleavedBuffer:!0,copy:function(e){return Pl.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Dl.prototype=Object.assign(Object.create($i.prototype),{constructor:Dl,isInstancedBufferAttribute:!0,copy:function(e){return $i.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(kl.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return Ll(e,this,n,t),n.sort(Il),n},intersectObjects:function(e,t){var n=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=e.length;i<r;i++)Ll(e[i],this,n,t);return n.sort(Il),n}}),Object.assign(Ol.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Nl.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Qe.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Ul.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),((Fl.prototype=Object.create(or.prototype)).constructor=Fl).prototype.createAnimation=function(e,t,n,i){var r={start:t,end:n,length:n-t+1,fps:i,duration:(n-t)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=r,this.animationsList.push(r)},Fl.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/i,i={},r=this.geometry,a=0,s=r.morphTargets.length;a<s;a++){var o=r.morphTargets[a].name.match(n);if(o&&1<o.length)i[l=o[1]]||(i[l]={start:1/0,end:-1/0}),a<(u=i[l]).start&&(u.start=a),a>u.end&&(u.end=a),t||(t=l)}for(var l in i){var u=i[l];this.createAnimation(l,u.start,u.end,e)}this.firstAnimation=t},Fl.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},Fl.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},Fl.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},Fl.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},Fl.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},Fl.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},Fl.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},Fl.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},Fl.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},Fl.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},Fl.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var i=this.animationsList[t];if(i.active){var r=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),i.time<0&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var a=i.start+Qe.clamp(Math.floor(i.time/r),0,i.length-1),s=i.weight;a!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*s,this.morphTargetInfluences[a]=0,i.lastFrame=i.currentFrame,i.currentFrame=a);var o=i.time%r/r;i.directionBackwards&&(o=1-o),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=o*s,this.morphTargetInfluences[i.lastFrame]=(1-o)*s):this.morphTargetInfluences[i.currentFrame]=s}}},((Bl.prototype=Object.create(Yn.prototype)).constructor=Bl).prototype.isImmediateRenderObject=!0,(($l.prototype=Object.create(ua.prototype)).constructor=$l).prototype.update=(zo=new Je,Go=new Je,qo=new Sn,function(){var e=["a","b","c"];this.object.updateMatrixWorld(!0),qo.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,n=this.geometry.attributes.position,i=this.object.geometry;if(i&&i.isGeometry)for(var r=i.vertices,a=i.faces,s=0,o=0,l=a.length;o<l;o++)for(var u=a[o],c=0,d=u.vertexNormals.length;c<d;c++){var h=r[u[e[c]]],f=u.vertexNormals[c];zo.copy(h).applyMatrix4(t),Go.copy(f).applyMatrix3(qo).normalize().multiplyScalar(this.size).add(zo),n.setXYZ(s,zo.x,zo.y,zo.z),s+=1,n.setXYZ(s,Go.x,Go.y,Go.z),s+=1}else if(i&&i.isBufferGeometry){var p=i.attributes.position,m=i.attributes.normal;for(c=s=0,d=p.count;c<d;c++)zo.set(p.getX(c),p.getY(c),p.getZ(c)).applyMatrix4(t),Go.set(m.getX(c),m.getY(c),m.getZ(c)),Go.applyMatrix3(qo).normalize().multiplyScalar(this.size).add(zo),n.setXYZ(s,zo.x,zo.y,zo.z),s+=1,n.setXYZ(s,Go.x,Go.y,Go.z),s+=1}n.needsUpdate=!0}),((jl.prototype=Object.create(Yn.prototype)).constructor=jl).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},jl.prototype.update=(Wo=new Je,Yo=new Je,function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Wo.setFromMatrixPosition(this.light.matrixWorld),Yo.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Yo.sub(Wo)),this.cone.material.color.copy(this.light.color)}),((Vl.prototype=Object.create(ua.prototype)).constructor=Vl).prototype.onBeforeRender=(Xo=new Je,Ko=new et,Qo=new et,function(){var e=this.bones,t=this.geometry,n=t.getAttribute("position");Qo.getInverse(this.root.matrixWorld);for(var i=0,r=0;i<e.length;i++){var a=e[i];a.parent&&a.parent.isBone&&(Ko.multiplyMatrices(Qo,a.matrixWorld),Xo.setFromMatrixPosition(Ko),n.setXYZ(r,Xo.x,Xo.y,Xo.z),Ko.multiplyMatrices(Qo,a.parent.matrixWorld),Xo.setFromMatrixPosition(Ko),n.setXYZ(r+1,Xo.x,Xo.y,Xo.z),r+=2)}t.getAttribute("position").needsUpdate=!0}),((Hl.prototype=Object.create(or.prototype)).constructor=Hl).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Hl.prototype.update=function(){this.material.color.copy(this.light.color)},((zl.prototype=Object.create(Yn.prototype)).constructor=zl).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},zl.prototype.update=function(){var e=this.children[0];e.material.color.copy(this.light.color);var t=.5*this.light.width,n=.5*this.light.height,i=e.geometry.attributes.position,r=i.array;r[0]=t,r[1]=-n,r[2]=0,r[3]=t,r[4]=n,r[5]=0,r[6]=-t,r[7]=n,r[8]=0,r[9]=-t,r[10]=-n,r[11]=0,r[12]=t,r[13]=-n,r[14]=0,i.needsUpdate=!0},((Gl.prototype=Object.create(Yn.prototype)).constructor=Gl).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Gl.prototype.update=(Zo=new Je,Jo=new jt,el=new jt,function(){var e=this.children[0],t=e.geometry.getAttribute("color");Jo.copy(this.light.color),el.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?Jo:el;t.setXYZ(n,r.r,r.g,r.b)}e.lookAt(Zo.setFromMatrixPosition(this.light.matrixWorld).negate()),t.needsUpdate=!0}),(ql.prototype=Object.create(ua.prototype)).constructor=ql,(Wl.prototype=Object.create(ua.prototype)).constructor=Wl,((Yl.prototype=Object.create(ua.prototype)).constructor=Yl).prototype.update=(tl=new Je,nl=new Je,il=new Sn,function(){this.object.updateMatrixWorld(!0),il.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry,i=n.vertices,r=n.faces,a=0,s=0,o=r.length;s<o;s++){var l=r[s],u=l.normal;tl.copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(e),nl.copy(u).applyMatrix3(il).normalize().multiplyScalar(this.size).add(tl),t.setXYZ(a,tl.x,tl.y,tl.z),a+=1,t.setXYZ(a,nl.x,nl.y,nl.z),a+=1}t.needsUpdate=!0}),((Xl.prototype=Object.create(Yn.prototype)).constructor=Xl).prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},Xl.prototype.update=(rl=new Je,al=new Je,sl=new Je,function(){rl.setFromMatrixPosition(this.light.matrixWorld),al.setFromMatrixPosition(this.light.target.matrixWorld),sl.subVectors(al,rl);var e=this.children[0],t=this.children[1];e.lookAt(sl),e.material.color.copy(this.light.color),t.lookAt(sl),t.scale.z=sl.length()}),((Kl.prototype=Object.create(ua.prototype)).constructor=Kl).prototype.update=function(){var l,u,c=new Je,d=new Xn;function e(e,t,n,i){c.set(t,n,i).unproject(d);var r=u[e];if(void 0!==r)for(var a=l.getAttribute("position"),s=0,o=r.length;s<o;s++)a.setXYZ(r[s],c.x,c.y,c.z)}return function(){l=this.geometry,u=this.pointMap;d.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),l.getAttribute("position").needsUpdate=!0}}(),((Ql.prototype=Object.create(ua.prototype)).constructor=Ql).prototype.update=(ol=new bn,function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ol.setFromObject(this.object),!ol.isEmpty()){var t=ol.min,n=ol.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}),Ql.prototype.setFromObject=function(e){return this.object=e,this.update(),this},((Zl.prototype=Object.create(Yn.prototype)).constructor=Zl).prototype.setDirection=(dl=new Je,function(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(dl.set(e.z,0,-e.x).normalize(),cl=Math.acos(e.y),this.quaternion.setFromAxisAngle(dl,cl))}),Zl.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Zl.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},(Jl.prototype=Object.create(ua.prototype)).constructor=Jl;var tu=new Je,nu=new eu,iu=new eu,ru=new eu;function au(e){fo.call(this),e.length<2&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=e||[],this.closed=!1}function su(e,t,n,i){fo.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=i}function ou(e,t,n){fo.call(this),this.v0=e,this.v1=t,this.v2=n}function lu(e,t){fo.call(this),this.v1=e,this.v2=t}function uu(e,t,n,i,r,a){go.call(this,e,t,n,n,i,r,a)}((au.prototype=Object.create(fo.prototype)).constructor=au).prototype.getPoint=function(e){var t,n,i,r,a=this.points,s=a.length,o=(s-(this.closed?0:1))*e,l=Math.floor(o),u=o-l;if(this.closed?l+=0<l?0:(Math.floor(Math.abs(l)/a.length)+1)*a.length:0===u&&l===s-1&&(l=s-2,u=1),t=this.closed||0<l?a[(l-1)%s]:(tu.subVectors(a[0],a[1]).add(a[0]),tu),n=a[l%s],i=a[(l+1)%s],r=this.closed||l+2<s?a[(l+2)%s]:(tu.subVectors(a[s-1],a[s-2]).add(a[s-1]),tu),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var c="chordal"===this.type?.5:.25,d=Math.pow(t.distanceToSquared(n),c),h=Math.pow(n.distanceToSquared(i),c),f=Math.pow(i.distanceToSquared(r),c);h<1e-4&&(h=1),d<1e-4&&(d=h),f<1e-4&&(f=h),nu.initNonuniformCatmullRom(t.x,n.x,i.x,r.x,d,h,f),iu.initNonuniformCatmullRom(t.y,n.y,i.y,r.y,d,h,f),ru.initNonuniformCatmullRom(t.z,n.z,i.z,r.z,d,h,f)}else if("catmullrom"===this.type){var p=void 0!==this.tension?this.tension:.5;nu.initCatmullRom(t.x,n.x,i.x,r.x,p),iu.initCatmullRom(t.y,n.y,i.y,r.y,p),ru.initCatmullRom(t.z,n.z,i.z,r.z,p)}return new Je(nu.calc(u),iu.calc(u),ru.calc(u))},((su.prototype=Object.create(fo.prototype)).constructor=su).prototype.getPoint=function(e){var t=this.v0,n=this.v1,i=this.v2,r=this.v3;return new Je(ho(e,t.x,n.x,i.x,r.x),ho(e,t.y,n.y,i.y,r.y),ho(e,t.z,n.z,i.z,r.z))},((ou.prototype=Object.create(fo.prototype)).constructor=ou).prototype.getPoint=function(e){var t=this.v0,n=this.v1,i=this.v2;return new Je(co(e,t.x,n.x,i.x),co(e,t.y,n.y,i.y),co(e,t.z,n.z,i.z))},((lu.prototype=Object.create(fo.prototype)).constructor=lu).prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new Je;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},(uu.prototype=Object.create(go.prototype)).constructor=uu;var cu={createMultiMaterialObject:function(e,t){for(var n=new fa,i=0,r=t.length;i<r;i++)n.add(new or(e,t[i]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){e.applyMatrix((new et).getInverse(n.matrixWorld)),t.remove(e),n.add(e)}};var du;function hu(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),au.call(this,e),this.type="catmullrom",this.closed=!0}function fu(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),au.call(this,e),this.type="catmullrom"}function pu(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),au.call(this,e),this.type="catmullrom"}fo.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(fo.prototype),(e.prototype.constructor=e).prototype.getPoint=t,e},hu.prototype=Object.create(au.prototype),fu.prototype=Object.create(au.prototype),pu.prototype=Object.create(au.prototype),Object.assign(pu.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ql.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Vl.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Yt.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(bn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),ar.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Qe.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Sn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,n){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(et.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return void 0===du&&(du=new Je),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),du.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,n){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),En.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},we.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(rr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(So.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Fa(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ya(this,e)}}),Object.assign(xe.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Object.assign(Je.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Object.assign(Ze.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Bi.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(Yn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(Yn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ia.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ra.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(fo.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Qn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ss.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties($i.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Zi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Zi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ml.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(_n.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new jt}}}),Object.defineProperties(ls.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(yn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Kr.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Kr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(Mn.prototype,{cullFace:{get:function(){return this.renderReverseSided?z:H},set:function(e){var t=e!==H;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(Se.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),vl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new fl).load(e,function(e){t.setBuffer(e)}),this},yl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var mu={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},gu={crossOrigin:void 0,loadTexture:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Ts;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new bs;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};e.WebGLRenderTargetCube=Ee,e.WebGLRenderTarget=Se,e.WebGLRenderer=Kr,e.ShaderLib=Wt,e.UniformsLib=zt,e.UniformsUtils=Gt,e.ShaderChunk=qt,e.FogExp2=Qr,e.Fog=Zr,e.Scene=Jr,e.LensFlare=ea,e.Sprite=na,e.LOD=ia,e.SkinnedMesh=sa,e.Skeleton=ra,e.Bone=aa,e.Mesh=or,e.LineSegments=ua,e.LineLoop=ca,e.Line=la,e.Points=ha,e.Group=fa,e.VideoTexture=pa,e.DataTexture=tt,e.CompressedTexture=ma,e.CubeTexture=Me,e.CanvasTexture=ga,e.DepthTexture=va,e.Texture=Te,e.CompressedTextureLoader=_s,e.DataTextureLoader=ys,e.CubeTextureLoader=bs,e.TextureLoader=Ts,e.ObjectLoader=ao,e.MaterialLoader=Xs,e.BufferGeometryLoader=Ks,e.DefaultLoadingManager=gs,e.LoadingManager=ms,e.JSONLoader=ro,e.ImageLoader=xs,e.FontLoader=Mo,e.FileLoader=vs,e.Loader=io,e.Cache=ps,e.AudioLoader=fl,e.SpotLightShadow=Ms,e.SpotLight=As,e.PointLight=Cs,e.RectAreaLight=ks,e.HemisphereLight=Es,e.DirectionalLightShadow=Ps,e.DirectionalLight=Rs,e.AmbientLight=Ds,e.LightShadow=ws,e.Light=Ss,e.StereoCamera=pl,e.PerspectiveCamera=Qn,e.OrthographicCamera=Kn,e.CubeCamera=ml,e.ArrayCamera=qr,e.Camera=Xn,e.AudioListener=gl,e.PositionalAudio=_l,e.AudioContext=hl,e.AudioAnalyser=yl,e.Audio=vl,e.VectorKeyframeTrack=$s,e.StringKeyframeTrack=zs,e.QuaternionKeyframeTrack=Vs,e.NumberKeyframeTrack=Hs,e.ColorKeyframeTrack=qs,e.BooleanKeyframeTrack=Gs,e.PropertyMixer=xl,e.PropertyBinding=Tl,e.KeyframeTrack=Ws,e.AnimationUtils=Ls,e.AnimationObjectGroup=Sl,e.AnimationMixer=wl,e.AnimationClip=Ys,e.Uniform=Ml,e.InstancedBufferGeometry=Al,e.BufferGeometry=Zi,e.GeometryIdCount=Fi,e.Geometry=Bi,e.InterleavedBufferAttribute=Cl,e.InstancedInterleavedBuffer=Rl,e.InterleavedBuffer=Pl,e.InstancedBufferAttribute=Dl,e.Face3=Zn,e.Object3D=Yn,e.Raycaster=kl,e.Layers=Pn,e.EventDispatcher=t,e.Clock=Ol,e.QuaternionLinearInterpolant=js,e.LinearInterpolant=Us,e.DiscreteInterpolant=Fs,e.CubicInterpolant=Ns,e.Interpolant=Os,e.Triangle=sr,e.Math=Qe,e.Spherical=Nl,e.Cylindrical=Ul,e.Plane=En,e.Frustum=wn,e.Sphere=Tn,e.Ray=rr,e.Matrix4=et,e.Matrix3=Sn,e.Box3=bn,e.Box2=Yt,e.Line3=ar,e.Euler=Cn,e.Vector4=Ze,e.Vector3=Je,e.Vector2=xe,e.Quaternion=we,e.Color=jt,e.MorphBlendMesh=Fl,e.ImmediateRenderObject=Bl,e.VertexNormalsHelper=$l,e.SpotLightHelper=jl,e.SkeletonHelper=Vl,e.PointLightHelper=Hl,e.RectAreaLightHelper=zl,e.HemisphereLightHelper=Gl,e.GridHelper=ql,e.PolarGridHelper=Wl,e.FaceNormalsHelper=Yl,e.DirectionalLightHelper=Xl,e.CameraHelper=Kl,e.BoxHelper=Ql,e.ArrowHelper=Zl,e.AxisHelper=Jl,e.CatmullRomCurve3=au,e.CubicBezierCurve3=su,e.QuadraticBezierCurve3=ou,e.LineCurve3=lu,e.ArcCurve=uu,e.EllipseCurve=go,e.SplineCurve=vo,e.CubicBezierCurve=_o,e.QuadraticBezierCurve=yo,e.LineCurve=po,e.Shape=So,e.Path=To,e.ShapePath=Eo,e.Font=wo,e.CurvePath=mo,e.Curve=fo,e.ShapeUtils=Ua,e.SceneUtils=cu,e.WireframeGeometry=_a,e.ParametricGeometry=ya,e.ParametricBufferGeometry=xa,e.TetrahedronGeometry=Sa,e.TetrahedronBufferGeometry=Ea,e.OctahedronGeometry=wa,e.OctahedronBufferGeometry=Ma,e.IcosahedronGeometry=Aa,e.IcosahedronBufferGeometry=Ca,e.DodecahedronGeometry=Pa,e.DodecahedronBufferGeometry=Ra,e.PolyhedronGeometry=ba,e.PolyhedronBufferGeometry=Ta,e.TubeGeometry=Da,e.TubeBufferGeometry=ka,e.TorusKnotGeometry=Ia,e.TorusKnotBufferGeometry=La,e.TorusGeometry=Oa,e.TorusBufferGeometry=Na,e.TextGeometry=$a,e.TextBufferGeometry=ja,e.SphereGeometry=Va,e.SphereBufferGeometry=Ha,e.RingGeometry=za,e.RingBufferGeometry=Ga,e.PlaneGeometry=tr,e.PlaneBufferGeometry=nr,e.LatheGeometry=qa,e.LatheBufferGeometry=Wa,e.ShapeGeometry=Ya,e.ShapeBufferGeometry=Xa,e.ExtrudeGeometry=Fa,e.ExtrudeBufferGeometry=Ba,e.EdgesGeometry=Ka,e.ConeGeometry=Ja,e.ConeBufferGeometry=es,e.CylinderGeometry=Qa,e.CylinderBufferGeometry=Za,e.CircleGeometry=ts,e.CircleBufferGeometry=ns,e.BoxGeometry=Ji,e.BoxBufferGeometry=er,e.ShadowMaterial=rs,e.SpriteMaterial=ta,e.RawShaderMaterial=as,e.ShaderMaterial=yn,e.PointsMaterial=da,e.MeshPhysicalMaterial=os,e.MeshStandardMaterial=ss,e.MeshPhongMaterial=ls,e.MeshToonMaterial=us,e.MeshNormalMaterial=cs,e.MeshLambertMaterial=ds,e.MeshDepthMaterial=xn,e.MeshBasicMaterial=ir,e.LineDashedMaterial=hs,e.LineBasicMaterial=oa,e.Material=_n,e.Float64BufferAttribute=Xi,e.Float32BufferAttribute=Yi,e.Uint32BufferAttribute=Wi,e.Int32BufferAttribute=qi,e.Uint16BufferAttribute=Gi,e.Int16BufferAttribute=zi,e.Uint8ClampedBufferAttribute=Hi,e.Uint8BufferAttribute=Vi,e.Int8BufferAttribute=ji,e.BufferAttribute=$i,e.REVISION="86",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=V,e.CullFaceBack=H,e.CullFaceFront=z,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=U,e.PCFSoftShadowMap=F,e.FrontSide=B,e.BackSide=X,e.DoubleSide=K,e.FlatShading=Ce,e.SmoothShading=l,e.NoColors=Pe,e.FaceColors=1,e.VertexColors=2,e.NoBlending=G,e.NormalBlending=q,e.AdditiveBlending=W,e.SubtractiveBlending=Y,e.MultiplyBlending=Q,e.CustomBlending=Z,e.AddEquation=Re,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=De,e.OneMinusSrcAlphaFactor=ke,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=J,e.AlwaysDepth=ee,e.LessDepth=te,e.LessEqualDepth=ne,e.EqualDepth=ie,e.GreaterEqualDepth=re,e.GreaterDepth=ae,e.NotEqualDepth=se,e.MultiplyOperation=$,e.MixOperation=j,e.AddOperation=oe,e.NoToneMapping=le,e.LinearToneMapping=Ie,e.ReinhardToneMapping=ue,e.Uncharted2ToneMapping=ce,e.CineonToneMapping=de,e.UVMapping=300,e.CubeReflectionMapping=he,e.CubeRefractionMapping=fe,e.EquirectangularReflectionMapping=pe,e.EquirectangularRefractionMapping=me,e.SphericalReflectionMapping=ge,e.CubeUVReflectionMapping=ve,e.CubeUVRefractionMapping=_e,e.RepeatWrapping=1e3,e.ClampToEdgeWrapping=Le,e.MirroredRepeatWrapping=1002,e.NearestFilter=Oe,e.NearestMipMapNearestFilter=Ne,e.NearestMipMapLinearFilter=Ue,e.LinearFilter=Fe,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=Be,e.UnsignedByteType=$e,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=je,e.IntType=1013,e.UnsignedIntType=Ve,e.FloatType=He,e.HalfFloatType=ze,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=Ge,e.AlphaFormat=1021,e.RGBFormat=qe,e.RGBAFormat=We,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=u,e.DepthFormat=Ye,e.DepthStencilFormat=Xe,e.RGB_S3TC_DXT1_Format=2001,e.RGBA_S3TC_DXT1_Format=2002,e.RGBA_S3TC_DXT3_Format=2003,e.RGBA_S3TC_DXT5_Format=2004,e.RGB_PVRTC_4BPPV1_Format=2100,e.RGB_PVRTC_2BPPV1_Format=2101,e.RGBA_PVRTC_4BPPV1_Format=2102,e.RGBA_PVRTC_2BPPV1_Format=2103,e.RGB_ETC1_Format=2151,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=Ke,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=p,e.sRGBEncoding=c,e.GammaEncoding=m,e.RGBEEncoding=d,e.LogLuvEncoding=3003,e.RGBM7Encoding=h,e.RGBM16Encoding=f,e.RGBDEncoding=g,e.BasicDepthPacking=v,e.RGBADepthPacking=ye,e.CubeGeometry=Ji,e.Face4=function(e,t,n,i,r,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Zn(e,t,n,r,a,s)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,(e.materials=e).clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ha(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new na(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ha(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new da(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new da(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new da(e)},e.Vertex=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Je(e,t,n)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new $i(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ji(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Vi(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Hi(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new zi(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Gi(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new qi(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Wi(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Yi(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Xi(e,t)},e.ClosedSplineCurve3=hu,e.SplineCurve3=fu,e.Spline=pu,e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ql(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ua(new Ka(e.geometry),new oa({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ua(new _a(e.geometry),new oa({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new vs(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ys(e)},e.GeometryUtils=mu,e.ImageUtils=gu,e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(e,"__esModule",{value:!0})}),function a(s,o,l){function u(n,e){if(!o[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=o[n]={exports:{}};s[n][0].call(r.exports,function(e){var t=s[n][1][e];return u(t||e)},r,r.exports,a,s,o,l)}return o[n].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";function i(t,n,e,i){var r,a;function s(e){r=n(s,i),t(e-(a||e)),a=e}return{start:function(){r||s(0)},stop:function(){e(r),r=null,a=0}}}Object.defineProperty(n,"__esModule",{value:!0}),n.intervalometer=i,n.frameIntervalometer=function(e){return i(e,requestAnimationFrame,cancelAnimationFrame)},n.timerIntervalometer=function(e,t){return i(e,setTimeout,clearTimeout,t)}},{}],2:[function(e,t,n){"use strict";var i,r=(i=e("poor-mans-symbol"))&&"object"==typeof i&&"default"in i?i.default:i,a=e("intervalometer");function s(t,e,n,i){function r(e){Boolean(t[n])===Boolean(i)&&e.stopImmediatePropagation(),delete t[n]}return t.addEventListener(e,r,!1),r}function o(e,t,n,i){function r(e){n[t]=e}i&&r(e[t]),Object.defineProperty(e,t,{get:function(){return n[t]},set:r})}function l(e,t,n){n.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function u(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}var c="object-fit"in document.head.style&&/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,d=r(),h=r(),f=r("nativeplay"),p=r("nativepause");var m,g=[],v=0;function _(e,t,n){(m||0)+200<Date.now()&&(e[h]=!0,m=Date.now()),n||(e.currentTime=t),g[++v%3]=100*t|0}function y(e){return e.driver.currentTime>=e.video.duration}function x(){var e=this,t=e[d];e.webkitDisplayingFullscreen?e[f]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(_(e,0,!0),t.driver.src=e.src),e.paused&&(t.paused=!1,e.buffered.length||e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(u(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&u(e,"playing"))))}function b(e){var t=this[d];t.driver.pause(),t.updater.stop(),this.webkitDisplayingFullscreen&&this[p](),t.paused&&!e||(t.paused=!0,t.hasAudio||u(this,"pause"),this.ended&&(this[h]=!0,u(this,"ended")))}function T(t,e){var n,i,r=t[d]={};r.paused=!0,r.hasAudio=e,r.video=t,r.updater=a.frameIntervalometer(function(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&y(t)&&(t.driver.currentTime=0)),_(t.video,t.driver.currentTime)):t.video.networkState!==t.video.NETWORK_IDLE||t.video.buffered.length||t.video.load(),t.video.ended&&(delete t.video[h],t.video.pause(!0))}.bind(r)),e?r.driver=(n=t,i=new Audio,l(n,"play",i),l(n,"playing",i),l(n,"pause",i),i.crossOrigin=n.crossOrigin,i.src=n.src||n.currentSrc||"data:",i):(t.addEventListener("canplay",function(){t.paused||u(t,"playing")}),r.driver={src:t.src||t.currentSrc||"data:",muted:!0,paused:!0,pause:function(){r.driver.paused=!0},play:function(){r.driver.paused=!1,y(r)&&_(t,0)},get ended(){return y(r)}}),t.addEventListener("emptied",function(){var e=!r.driver.src||"data:"===r.driver.src;r.driver.src&&r.driver.src!==t.src&&(_(t,0,!0),r.driver.src=t.src,e?r.driver.play():r.updater.stop())},!1),t.addEventListener("webkitbeginfullscreen",function(){t.paused?e&&!r.driver.buffered.length&&r.driver.load():(t.pause(),t[f]())}),e&&(t.addEventListener("webkitendfullscreen",function(){r.driver.currentTime=t.currentTime}),t.addEventListener("seeking",function(){g.indexOf(100*t.currentTime|0)<0&&(r.driver.currentTime=t.currentTime)}))}function S(e,t,n){var i,r;(void 0===t&&(t=!0),void 0===n&&(n=!0),n&&!c||e[d])||(T(e,t),r=(i=e)[d],i[f]=i.play,i[p]=i.pause,i.play=x,i.pause=b,o(i,"paused",r.driver),o(i,"muted",r.driver,!0),o(i,"playbackRate",r.driver,!0),o(i,"ended",r.driver),o(i,"loop",r.driver,!0),s(i,"seeking"),s(i,"seeked"),s(i,"timeupdate",h,!1),s(i,"ended",h,!1),e.classList.add("IIV"),!t&&e.autoplay&&e.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}S.isWhitelisted=c,t.exports=S},{intervalometer:1,"poor-mans-symbol":3}],3:[function(e,t,n){"use strict";var i="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol;t.exports=i},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("../lib/Detector")),i=r(e("../lib/MobileBuffering")),l=r(e("../lib/Util"));function r(e){return e&&e.__esModule?e:{default:e}}n.default=function(r,a){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return{constructor:function(e,t){this.settings=t,this.width=e.el().offsetWidth,this.height=e.el().offsetHeight,this.lon=t.initLon,this.lat=t.initLat,this.phi=0,this.theta=0,this.videoType=t.videoType,this.clickToToggle=t.clickToToggle,this.mouseDown=!1,this.isUserInteracting=!1,this.renderer=new a.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.autoClear=!1,this.renderer.setClearColor(0,1);var n=s.getTech(e);if(this.supportVideoTexture=o.default.supportVideoTexture(),this.liveStreamOnSafari=o.default.isLiveStreamOnSafari(n),this.liveStreamOnSafari&&(this.supportVideoTexture=!1),this.supportVideoTexture)this.texture=new a.Texture(n);else{this.helperCanvas=e.addChild("HelperCanvas",{video:n,width:t.helperCanvas.width?t.helperCanvas.width:this.width,height:t.helperCanvas.height?t.helperCanvas.height:this.height});var i=this.helperCanvas.el();this.texture=new a.Texture(i)}n.style.visibility="hidden",this.texture.generateMipmaps=!1,this.texture.minFilter=a.LinearFilter,this.texture.maxFilter=a.LinearFilter,this.texture.format=a.RGBFormat,this.el_=this.renderer.domElement,this.el_.classList.add("vjs-video-canvas"),t.el=this.el_,r.call(this,e,t),this.attachControlEvents(),this.player().on("play",function(){this.time=(new Date).getTime(),this.startAnimation()}.bind(this))},attachControlEvents:function(){this.on("mousemove",this.handleMouseMove.bind(this)),this.on("touchmove",this.handleTouchMove.bind(this)),this.on("mousedown",this.handleMouseDown.bind(this)),this.on("touchstart",this.handleTouchStart.bind(this)),this.on("mouseup",this.handleMouseUp.bind(this)),this.on("touchend",this.handleTouchEnd.bind(this)),this.settings.scrollable&&(this.on("mousewheel",this.handleMouseWheel.bind(this)),this.on("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.on("mouseenter",this.handleMouseEnter.bind(this)),this.on("mouseleave",this.handleMouseLease.bind(this)),this.on("dispose",this.handleDispose.bind(this))},handleDispose:function(e){this.off("mousemove",this.handleMouseMove.bind(this)),this.off("touchmove",this.handleTouchMove.bind(this)),this.off("mousedown",this.handleMouseDown.bind(this)),this.off("touchstart",this.handleTouchStart.bind(this)),this.off("mouseup",this.handleMouseUp.bind(this)),this.off("touchend",this.handleTouchEnd.bind(this)),this.settings.scrollable&&(this.off("mousewheel",this.handleMouseWheel.bind(this)),this.off("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.off("mouseenter",this.handleMouseEnter.bind(this)),this.off("mouseleave",this.handleMouseLease.bind(this)),this.off("dispose",this.handleDispose.bind(this)),this.stopAnimation()},startAnimation:function(){this.render_animation=!0,this.animate()},stopAnimation:function(){this.render_animation=!1,this.requestAnimationId&&cancelAnimationFrame(this.requestAnimationId)},handleResize:function(){this.width=this.player().el().offsetWidth,this.height=this.player().el().offsetHeight,this.renderer.setSize(this.width,this.height)},handleMouseUp:function(e){if(this.mouseDown=!1,this.clickToToggle){var t=e.clientX||e.changedTouches&&e.changedTouches[0].clientX,n=e.clientY||e.changedTouches&&e.changedTouches[0].clientY;if(void 0===t||"undefined"===n)return;var i=Math.abs(t-this.onPointerDownPointerX),r=Math.abs(n-this.onPointerDownPointerY);i<.1&&r<.1&&(this.player().paused()?this.player().play():this.player().pause())}},handleMouseDown:function(e){e.preventDefault();var t=e.clientX||e.touches&&e.touches[0].clientX,n=e.clientY||e.touches&&e.touches[0].clientY;void 0!==t&&"undefined"!==n&&(this.mouseDown=!0,this.onPointerDownPointerX=t,this.onPointerDownPointerY=n,this.onPointerDownLon=this.lon,this.onPointerDownLat=this.lat)},handleTouchStart:function(e){1<e.touches.length&&(this.isUserPinch=!0,this.multiTouchDistance=l.default.getTouchesDistance(e.touches)),this.handleMouseDown(e)},handleTouchEnd:function(e){this.isUserPinch=!1,this.handleMouseUp(e)},handleMouseMove:function(e){var t=e.clientX||e.touches&&e.touches[0].clientX,n=e.clientY||e.touches&&e.touches[0].clientY;if(void 0!==t&&"undefined"!==n)if(this.settings.clickAndDrag)this.mouseDown&&(this.lon=.2*(this.onPointerDownPointerX-t)+this.onPointerDownLon,this.lat=.2*(n-this.onPointerDownPointerY)+this.onPointerDownLat);else{var i=t-this.el_.offsetLeft,r=n-this.el_.offsetTop;this.lon=i/this.width*430-225,this.lat=r/this.height*-180+90}},handleTouchMove:function(e){(!this.isUserPinch||e.touches.length<=1)&&this.handleMouseMove(e)},handleMobileOrientation:function(e){if(void 0!==e.rotationRate){var t=e.rotationRate.alpha,n=e.rotationRate.beta,i=void 0!==e.portrait?e.portrait:window.matchMedia("(orientation: portrait)").matches,r=void 0!==e.landscape?e.landscape:window.matchMedia("(orientation: landscape)").matches,a=e.orientation||window.orientation;if(i)this.lon=this.lon-n*this.settings.mobileVibrationValue,this.lat=this.lat+t*this.settings.mobileVibrationValue;else if(r){var s=-90;void 0!==a&&(s=a),this.lon=-90==s?this.lon+t*this.settings.mobileVibrationValue:this.lon-t*this.settings.mobileVibrationValue,this.lat=-90==s?this.lat+n*this.settings.mobileVibrationValue:this.lat-n*this.settings.mobileVibrationValue}}},handleMouseWheel:function(e){e.stopPropagation(),e.preventDefault()},handleMouseEnter:function(e){this.isUserInteracting=!0},handleMouseLease:function(e){this.isUserInteracting=!1,this.mouseDown&&(this.mouseDown=!1)},animate:function(){if(this.render_animation){if(this.requestAnimationId=requestAnimationFrame(this.animate.bind(this)),!this.player().paused()&&void 0!==this.texture&&(!this.isPlayOnMobile&&2<=this.player().readyState()||this.isPlayOnMobile&&this.player().hasClass("vjs-playing"))){var e=(new Date).getTime();if(30<=e-this.time&&(this.texture.needsUpdate=!0,this.time=e),this.isPlayOnMobile){var t=this.player().currentTime();i.default.isBuffering(t)?this.player().hasClass("vjs-panorama-mobile-inline-video-buffering")||this.player().addClass("vjs-panorama-mobile-inline-video-buffering"):this.player().hasClass("vjs-panorama-mobile-inline-video-buffering")&&this.player().removeClass("vjs-panorama-mobile-inline-video-buffering")}}this.render()}},render:function(){if(!this.isUserInteracting){var e=this.lat>this.settings.initLat?-1:1,t=this.lon>this.settings.initLon?-1:1;this.settings.backToVerticalCenter&&(this.lat=this.lat>this.settings.initLat-Math.abs(this.settings.returnStepLat)&&this.lat<this.settings.initLat+Math.abs(this.settings.returnStepLat)?this.settings.initLat:this.lat+this.settings.returnStepLat*e),this.settings.backToHorizonCenter&&(this.lon=this.lon>this.settings.initLon-Math.abs(this.settings.returnStepLon)&&this.lon<this.settings.initLon+Math.abs(this.settings.returnStepLon)?this.settings.initLon:this.lon+this.settings.returnStepLon*t)}this.lat=Math.max(this.settings.minLat,Math.min(this.settings.maxLat,this.lat)),this.lon=Math.max(this.settings.minLon,Math.min(this.settings.maxLon,this.lon)),this.phi=a.Math.degToRad(90-this.lat),this.theta=a.Math.degToRad(this.lon),this.supportVideoTexture||this.helperCanvas.update(),this.renderer.clear()},playOnMobile:function(){this.isPlayOnMobile=!0,this.settings.autoMobileOrientation&&window.addEventListener("devicemotion",this.handleMobileOrientation.bind(this))},el:function(){return this.el_}}}},{"../lib/Detector":6,"../lib/MobileBuffering":8,"../lib/Util":11}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(e("./BaseCanvas")),l=r(e("./Util"));function r(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,w){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},M=(0,i.default)(e,w,t);return l.default.extend(M,{constructor:function(e,t){M.constructor.call(this,e,t),this.VRMode=!1,this.scene=new w.Scene,this.camera=new w.PerspectiveCamera(t.initFov,this.width/this.height,1,2e3),this.camera.target=new w.Vector3(0,0,0);var n="equirectangular"===this.videoType?new w.SphereGeometry(500,60,40):new w.SphereBufferGeometry(500,60,40).toNonIndexed();if("fisheye"===this.videoType){for(var i=n.attributes.normal.array,r=n.attributes.uv.array,a=0,s=i.length/3;a<s;a++){var o=i[3*a+0],l=i[3*a+1],u=i[3*a+2],c=Math.asin(Math.sqrt(o*o+u*u)/Math.sqrt(o*o+l*l+u*u))/Math.PI;l<0&&(c=1-c);var d=0==o&&0==u?0:Math.acos(o/Math.sqrt(o*o+u*u));u<0&&(d*=-1),r[2*a+0]=-.8*c*Math.cos(d)+.5,r[2*a+1]=.8*c*Math.sin(d)+.5}n.rotateX(t.rotateX),n.rotateY(t.rotateY),n.rotateZ(t.rotateZ)}else if("dual_fisheye"===this.videoType){for(var h=n.attributes.normal.array,f=n.attributes.uv.array,p=h.length/3,m=0;m<p/2;m++){var g=h[3*m+0],v=h[3*m+1],_=h[3*m+2],y=0==g&&0==_?1:Math.acos(v)/Math.sqrt(g*g+_*_)*(2/Math.PI);f[2*m+0]=g*t.dualFish.circle1.rx*y*t.dualFish.circle1.coverX+t.dualFish.circle1.x,f[2*m+1]=_*t.dualFish.circle1.ry*y*t.dualFish.circle1.coverY+t.dualFish.circle1.y}for(var x=p/2;x<p;x++){var b=h[3*x+0],T=h[3*x+1],S=h[3*x+2],E=0==b&&0==S?1:Math.acos(-T)/Math.sqrt(b*b+S*S)*(2/Math.PI);f[2*x+0]=-b*t.dualFish.circle2.rx*E*t.dualFish.circle2.coverX+t.dualFish.circle2.x,f[2*x+1]=S*t.dualFish.circle2.ry*E*t.dualFish.circle2.coverY+t.dualFish.circle2.y}n.rotateX(t.rotateX),n.rotateY(t.rotateY),n.rotateZ(t.rotateZ)}n.scale(-1,1,1),this.mesh=new w.Mesh(n,new w.MeshBasicMaterial({map:this.texture})),this.scene.add(this.mesh)},enableVR:function(){if(this.VRMode=!0,"undefined"!=typeof vrHMD){var e=vrHMD.getEyeParameters("left"),t=vrHMD.getEyeParameters("right");this.eyeFOVL=e.recommendedFieldOfView,this.eyeFOVR=t.recommendedFieldOfView}this.cameraL=new w.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3),this.cameraR=new w.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3)},disableVR:function(){this.VRMode=!1,this.renderer.setViewport(0,0,this.width,this.height),this.renderer.setScissor(0,0,this.width,this.height)},handleResize:function(){M.handleResize.call(this),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.aspect=this.camera.aspect/2,this.cameraR.aspect=this.camera.aspect/2,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())},handleMouseWheel:function(e){M.handleMouseWheel(e),e.wheelDeltaY?this.camera.fov-=.05*e.wheelDeltaY:e.wheelDelta?this.camera.fov-=.05*e.wheelDelta:e.detail&&(this.camera.fov+=1*e.detail),this.camera.fov=Math.min(this.settings.maxFov,this.camera.fov),this.camera.fov=Math.max(this.settings.minFov,this.camera.fov),this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.fov=this.camera.fov,this.cameraR.fov=this.camera.fov,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())},handleTouchMove:function(e){if(M.handleTouchMove.call(this,e),this.isUserPinch){var t=l.default.getTouchesDistance(e.touches);e.wheelDeltaY=2*(t-this.multiTouchDistance),this.handleMouseWheel.call(this,e),this.multiTouchDistance=t}},render:function(){if(M.render.call(this),this.camera.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.camera.target.y=500*Math.cos(this.phi),this.camera.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.camera.lookAt(this.camera.target),this.VRMode){var e=this.width/2,t=this.height;if("undefined"!=typeof vrHMD)this.cameraL.projectionMatrix=l.default.fovToProjection(this.eyeFOVL,!0,this.camera.near,this.camera.far),this.cameraR.projectionMatrix=l.default.fovToProjection(this.eyeFOVR,!0,this.camera.near,this.camera.far);else{var n=this.lon+this.settings.VRGapDegree,i=this.lon-this.settings.VRGapDegree,r=w.Math.degToRad(n),a=w.Math.degToRad(i),s=l.default.deepCopy(this.camera.target);s.x=500*Math.sin(this.phi)*Math.cos(r),s.z=500*Math.sin(this.phi)*Math.sin(r),this.cameraL.lookAt(s);var o=l.default.deepCopy(this.camera.target);o.x=500*Math.sin(this.phi)*Math.cos(a),o.z=500*Math.sin(this.phi)*Math.sin(a),this.cameraR.lookAt(o)}this.renderer.setViewport(0,0,e,t),this.renderer.setScissor(0,0,e,t),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(e,0,e,t),this.renderer.setScissor(e,0,e,t),this.renderer.render(this.scene,this.cameraR)}else this.renderer.render(this.scene,this.camera)}})}},{"./BaseCanvas":4,"./Util":11}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={};"undefined"!=typeof window&&(i=window);var r={canvas:!!i.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!i.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!i.Worker,fileapi:i.File&&i.FileReader&&i.FileList&&i.Blob,Check_Version:function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName)if(-1!==navigator.appVersion.indexOf("Trident"))e=11;else{t=navigator.userAgent;null!==new RegExp("Edge/([0-9]{1,}[\\.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e},supportVideoTexture:function(){var e=this.Check_Version();return-1===e||13<=e},isLiveStreamOnSafari:function(e){var t=[].slice.call(e.querySelectorAll("source")),n=!1;e.src&&-1<e.src.indexOf(".m3u8")&&t.push({src:e.src,type:"application/x-mpegURL"});for(var i=0;i<t.length;i++){var r=t[i];if(("application/x-mpegURL"===r.type||"application/vnd.apple.mpegurl"===r.type)&&/(Safari|AppleWebKit)/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)){n=!0;break}}return n},getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",this.webgl||(e.innerHTML=i.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,n,i;t=void 0!==(e=e||{}).parent?e.parent:document.body,n=void 0!==e.id?e.id:"oldie",(i=r.getWebGLErrorMessage()).id=n,t.appendChild(i)}};n.default=r},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(n){var i=document.createElement("canvas");return i.className="vjs-video-helper-canvas",{constructor:function(e,t){this.videoElement=t.video,this.width=t.width,this.height=t.height,i.width=this.width,i.height=this.height,i.style.display="none",t.el=i,this.context=i.getContext("2d"),this.context.drawImage(this.videoElement,0,0,this.width,this.height),n.call(this,e,t)},getContext:function(){return this.context},update:function(){this.context.drawImage(this.videoElement,0,0,this.width,this.height)},el:function(){return i}}}},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={prev_currentTime:0,counter:0,isBuffering:function(e){return e==this.prev_currentTime?this.counter++:this.counter=0,this.prev_currentTime=e,10<this.counter&&(this.counter=10,!0)}}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=function(n){var i=document.createElement("div");return i.className="vjs-video-notice-label",{constructor:function(e,t){"object"==r(t.NoticeMessage)?(i=t.NoticeMessage,t.el=t.NoticeMessage):"string"==typeof t.NoticeMessage&&(i.innerHTML=t.NoticeMessage,t.el=i),n.call(this,e,t)},el:function(){return i}}}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=a(e("./BaseCanvas")),r=a(e("./Util"));function a(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,c){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=(0,i.default)(e,c,t);return r.default.extend(d,{constructor:function(e,t){d.constructor.call(this,e,t),this.VRMode=!1,this.scene=new c.Scene;var n=this.width/this.height;this.cameraL=new c.PerspectiveCamera(t.initFov,n,1,2e3),this.cameraL.target=new c.Vector3(0,0,0),this.cameraR=new c.PerspectiveCamera(t.initFov,n/2,1,2e3),this.cameraR.position.set(1e3,0,0),this.cameraR.target=new c.Vector3(1e3,0,0);for(var i=new c.SphereBufferGeometry(500,60,40).toNonIndexed(),r=new c.SphereBufferGeometry(500,60,40).toNonIndexed(),a=i.attributes.uv.array,s=i.attributes.normal.array,o=0;o<s.length/3;o++)a[2*o+1]=a[2*o+1]/2;var l=r.attributes.uv.array,u=r.attributes.normal.array;for(o=0;o<u.length/3;o++)l[2*o+1]=l[2*o+1]/2+.5;i.scale(-1,1,1),r.scale(-1,1,1),this.meshL=new c.Mesh(i,new c.MeshBasicMaterial({map:this.texture})),this.meshR=new c.Mesh(r,new c.MeshBasicMaterial({map:this.texture})),this.meshR.position.set(1e3,0,0),this.scene.add(this.meshL),t.callback&&t.callback()},handleResize:function(){d.handleResize.call(this);var e=this.width/this.height;this.VRMode?(e/=2,this.cameraL.aspect=e,this.cameraR.aspect=e,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix()):(this.cameraL.aspect=e,this.cameraL.updateProjectionMatrix())},handleMouseWheel:function(e){d.handleMouseWheel(e),e.wheelDeltaY?this.cameraL.fov-=.05*e.wheelDeltaY:e.wheelDelta?this.cameraL.fov-=.05*e.wheelDelta:e.detail&&(this.cameraL.fov+=1*e.detail),this.cameraL.fov=Math.min(this.settings.maxFov,this.cameraL.fov),this.cameraL.fov=Math.max(this.settings.minFov,this.cameraL.fov),this.cameraL.updateProjectionMatrix(),this.VRMode&&(this.cameraR.fov=this.cameraL.fov,this.cameraR.updateProjectionMatrix())},enableVR:function(){this.VRMode=!0,this.scene.add(this.meshR),this.handleResize()},disableVR:function(){this.VRMode=!1,this.scene.remove(this.meshR),this.handleResize()},render:function(){if(d.render.call(this),this.cameraL.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.cameraL.target.y=500*Math.cos(this.phi),this.cameraL.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.cameraL.lookAt(this.cameraL.target),this.VRMode){var e=this.width/2,t=this.height;this.cameraR.target.x=1e3+500*Math.sin(this.phi)*Math.cos(this.theta),this.cameraR.target.y=500*Math.cos(this.phi),this.cameraR.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.cameraR.lookAt(this.cameraR.target),this.renderer.setViewport(0,0,e,t),this.renderer.setScissor(0,0,e,t),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(e,0,e,t),this.renderer.setScissor(e,0,e,t),this.renderer.render(this.scene,this.cameraR)}else this.renderer.render(this.scene,this.cameraL)}})}},{"./BaseCanvas":4,"./Util":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={whichTransitionEvent:function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},mobileAndTabletcheck:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isIos:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},isRealIphone:function(){return/iPhone|iPod/i.test(navigator.platform)},fovToProjection:function(e,t,n,i){var r=Math.PI/180;return function(e,t,n,i){n=void 0===n?.01:n,i=void 0===i?1e4:i;var r,a,s,o,l=(t=void 0===t||t)?-1:1,u=new THREE.Matrix4,c=u.elements,d=(a=2/((r=e).leftTan+r.rightTan),s=(r.leftTan-r.rightTan)*a*.5,o=2/(r.upTan+r.downTan),{scale:[a,o],offset:[s,(r.upTan-r.downTan)*o*.5]});return c[0]=d.scale[0],c[1]=0,c[2]=d.offset[0]*l,c[3]=0,c[4]=0,c[5]=d.scale[1],c[6]=-d.offset[1]*l,c[7]=0,c[8]=0,c[9]=0,c[10]=i/(n-i)*-l,c[11]=i*n/(n-i),c[12]=0,c[13]=0,c[14]=l,c[15]=0,u.transpose(),u}({upTan:Math.tan(e.upDegrees*r),downTan:Math.tan(e.downDegrees*r),leftTan:Math.tan(e.leftDegrees*r),rightTan:Math.tan(e.rightDegrees*r)},t,n,i)},extend:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n]);return t},deepCopy:function(e){var t={};for(var n in e)t[n]=e[n];return t},getTouchesDistance:function(e){return Math.sqrt((e[0].clientX-e[1].clientX)*(e[0].clientX-e[1].clientX)+(e[0].clientY-e[1].clientY)*(e[0].clientY-e[1].clientY))}}},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(n){return{constructor:function(e,t){n.call(this,e,t)},buildCSSClass:function(){return"vjs-VR-control "+n.prototype.buildCSSClass.call(this)},handleClick:function(){var e=this.player().getChild("Canvas");e.VRMode?e.disableVR():e.enableVR(),e.VRMode?this.addClass("enable"):this.removeClass("enable"),e.VRMode?this.player().trigger("VRModeOn"):this.player().trigger("VRModeOff")},controlText_:"VR"}}},{}],13:[function(s,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(s("./lib/Util")),l=n(s("./lib/Detector"));function n(e){return e&&e.__esModule?e:{default:e}}var u="undefined"!=typeof window&&o.default.mobileAndTabletcheck(),r={clickAndDrag:u,showNotice:!0,NoticeMessage:"Please use your mouse drag and drop the video.",autoHideNotice:3e3,scrollable:!0,initFov:75,maxFov:105,minFov:51,initLat:0,initLon:-180,returnStepLat:.5,returnStepLon:2,backToVerticalCenter:!u,backToHorizonCenter:!u,clickToToggle:!1,minLat:-85,maxLat:85,minLon:-1/0,maxLon:1/0,videoType:"equirectangular",rotateX:0,rotateY:0,rotateZ:0,autoMobileOrientation:!1,mobileVibrationValue:u&&o.default.isIos()?.022:1,VREnable:!0,VRGapDegree:2.5,closePanorama:!1,helperCanvas:{},dualFish:{width:1920,height:1080,circle1:{x:.240625,y:.553704,rx:.23333,ry:.43148,coverX:.913,coverY:.9},circle2:{x:.757292,y:.553704,rx:.232292,ry:.4296296,coverX:.913,coverY:.9308}}};function c(t,e){var n,i,r=(i=(n=t).getChild("Canvas"),function(){n.el().style.width=window.innerWidth+"px",n.el().style.height=window.innerHeight+"px",i.handleResize()});t.controlBar.fullscreenToggle.off("tap",e),t.controlBar.fullscreenToggle.on("tap",function(){var e=t.getChild("Canvas");t.isFullscreen()?(t.isFullscreen(!1),t.exitFullWindow(),t.el().style.width="",t.el().style.height="",e.handleResize(),window.removeEventListener("devicemotion",r)):(t.isFullscreen(!0),t.enterFullWindow(),r(),window.addEventListener("devicemotion",r))})}var d=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{NoticeMessage:""},n=e.addChild("Notice",t);0<t.autoHideNotice&&setTimeout(function(){if(n.el_){n.addClass("vjs-video-notice-fadeOut");var t=o.default.whichTransitionEvent();n.on(t,function e(){n.hide(),n.removeClass("vjs-video-notice-fadeOut"),n.off(t,e)})}},t.autoHideNotice)};t.default=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=["equirectangular","fisheye","3dVideo","dual_fisheye"],e=function(e){var t=this;n.mergeOption&&(e=n.mergeOption(r,e)),void 0!==n._init&&"function"==typeof n._init?(-1==i.indexOf(e.videoType)&&(e.videoType=r.videoType),n._init(e),this.ready(function(){!function(e,t,n){if(e.addClass("vjs-panorama"),!l.default.webgl)return d(e,{NoticeMessage:l.default.getWebGLErrorMessage(),autoHideNotice:t.autoHideNotice}),t.callback&&t.callback();e.addChild("Canvas",o.default.deepCopy(t));var i=e.getChild("Canvas");if(u){var r=n.getTech(e);if(o.default.isRealIphone()){var a=s("iphone-inline-video");r.setAttribute("playsinline",""),a(r,!0)}o.default.isIos()&&c(e,n.getFullscreenToggleClickFn(e)),e.addClass("vjs-panorama-mobile-inline-video"),e.removeClass("vjs-using-native-controls")}t.showNotice&&e.on("playing",function(){d(e,o.default.deepCopy(t))}),t.VREnable&&e.controlBar.addChild("VRButton",{},e.controlBar.children().length-1),i.hide(),e.on("play",function(){i.show()}),e.on("fullscreenchange",function(){i.handleResize()}),t.callback&&t.callback()}(t,e,n)})):console.error("plugin must implement init function().")};return e.VERSION="0.1.7",e}},{"./lib/Detector":6,"./lib/Util":11,"iphone-inline-video":2}],14:[function(e,t,n){"use strict";var i=u(e("./lib/Canvas")),r=u(e("./lib/ThreeCanvas")),a=u(e("./lib/Notice")),s=u(e("./lib/HelperCanvas")),o=u(e("./lib/VRButton")),l=u(e("./plugin"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return e.tech({IWillNotUseThisInPlugins:!0}).el()}var d=videojs.getComponent("Component"),h=(0,a.default)(d);videojs.registerComponent("Notice",videojs.extend(d,h));var f=(0,s.default)(d);videojs.registerComponent("HelperCanvas",videojs.extend(d,f));var p=videojs.getComponent("Button"),m=(0,o.default)(p);videojs.registerComponent("VRButton",videojs.extend(p,m)),videojs.plugin("panorama",(0,l.default)({_init:function(e){var t="3dVideo"!==e.videoType?(0,i.default)(d,window.THREE,{getTech:c}):(0,r.default)(d,window.THREE,{getTech:c});videojs.registerComponent("Canvas",videojs.extend(d,t))},mergeOption:function(e,t){return videojs.mergeOptions(e,t)},getTech:c,getFullscreenToggleClickFn:function(e){return e.controlBar.fullscreenToggle.handleClick}}))},{"./lib/Canvas":5,"./lib/HelperCanvas":7,"./lib/Notice":9,"./lib/ThreeCanvas":10,"./lib/VRButton":12,"./plugin":13}]},{},[14]),function($){"use strict";var l={objectMaxDepth:5};function e(e){if(!ye(e))return l;_e(e.objectMaxDepth)&&(l.objectMaxDepth=u(e.objectMaxDepth)?e.objectMaxDepth:NaN)}function u(e){return S(e)&&0<e}function A(s,o){return o=o||Error,function(){var e,t,n=arguments[0],i=arguments[1],r="["+(s?s+":":"")+n+"] ",a=De(arguments,2).map(function(e){return Ye(e,l.objectMaxDepth)});for(r+=i.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t<a.length?a[t]:e}),r+="\nhttp://errors.angularjs.org/1.6.5/"+(s?s+"/":"")+n,t=0,e="?";t<a.length;t++,e="&")r+=e+"p"+t+"="+encodeURIComponent(a[t]);return new o(r)}}var a=/^\/(.+)\/([a-z]*)$/,d="validity",j=Object.prototype.hasOwnProperty,V=function(e){return xe(e)?e.toLowerCase():e},c=function(e){return xe(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(V=function(e){return xe(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},c=function(e){return xe(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e});var H,ce,s,g,o=[].slice,i=[].splice,t=[].push,de=Object.prototype.toString,h=Object.getPrototypeOf,f=A("ng"),y=$.angular||($.angular={}),n=0;function L(e){if(null==e||R(e))return!1;if(be(e)||xe(e)||ce&&e instanceof ce)return!0;var t="length"in Object(e)&&e.length;return S(t)&&(0<=t&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function he(e,t,n){var i,r;if(e)if(Se(e))for(i in e)"prototype"!==i&&"length"!==i&&"name"!==i&&e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else if(be(e)||L(e)){var a="object"!=typeof e;for(i=0,r=e.length;i<r;i++)(a||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==he)e.forEach(t,n,e);else if(T(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)j.call(e,i)&&t.call(n,e[i],i,e);return e}function p(e,t,n){for(var i=Object.keys(e).sort(),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function v(n){return function(e,t){n(t,e)}}function C(){return++n}function m(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function _(e,t,n){for(var i=e.$$hashKey,r=0,a=t.length;r<a;++r){var s=t[r];if(ye(s)||Se(s))for(var o=Object.keys(s),l=0,u=o.length;l<u;l++){var c=o[l],d=s[c];n&&ye(d)?E(d)?e[c]=new Date(d.valueOf()):w(d)?e[c]=new RegExp(d):d.nodeName?e[c]=d.cloneNode(!0):O(d)?e[c]=d.clone():(ye(e[c])||(e[c]=be(d)?[]:{}),_(e[c],[d],!0)):e[c]=d}}return m(e,i),e}function fe(e){return _(e,o.call(arguments,1),!1)}function r(e){return _(e,o.call(arguments,1),!0)}function x(e){return parseInt(e,10)}H=$.document.documentMode;var P=Number.isNaN||function(e){return e!=e};function pe(e,t){return fe(Object.create(e),t)}function me(){}function ge(e){return e}function M(e){return function(){return e}}function b(e){return Se(e.toString)&&e.toString!==de}function ve(e){return void 0===e}function _e(e){return void 0!==e}function ye(e){return null!==e&&"object"==typeof e}function T(e){return null!==e&&"object"==typeof e&&!h(e)}function xe(e){return"string"==typeof e}function S(e){return"number"==typeof e}function E(e){return"[object Date]"===de.call(e)}me.$inject=[],ge.$inject=[];var be=Array.isArray;function Te(e){switch(de.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function Se(e){return"function"==typeof e}function w(e){return"[object RegExp]"===de.call(e)}function R(e){return e&&e.window===e}function Ee(e){return e&&e.$evalAsync&&e.$watch}function we(e){return"boolean"==typeof e}function D(e){return e&&Se(e.then)}var k=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var Me=function(e){return xe(e)?e.trim():e},I=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function O(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function Ae(e){return V(e.nodeName||e[0]&&e[0].nodeName)}function N(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function Ce(e,t){var n=e.indexOf(t);return 0<=n&&e.splice(n,1),n}function U(e,n,t){var i,r,a=[],s=[];if(t=u(t)?t:NaN,n){if((r=n)&&S(r.length)&&k.test(de.call(r))||(i=n,"[object ArrayBuffer]"===de.call(i)))throw f("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===n)throw f("cpi","Can't copy! Source and destination are identical.");return be(n)?n.length=0:he(n,function(e,t){"$$hashKey"!==t&&delete n[t]}),a.push(e),s.push(n),o(e,n,t)}return l(e,t);function o(e,t,n){if(--n<0)return"...";var i,r=t.$$hashKey;if(be(e))for(var a=0,s=e.length;a<s;a++)t.push(l(e[a],n));else if(T(e))for(i in e)t[i]=l(e[i],n);else if(e&&"function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&(t[i]=l(e[i],n));else for(i in e)j.call(e,i)&&(t[i]=l(e[i],n));return m(t,r),t}function l(e,t){if(!ye(e))return e;var n=a.indexOf(e);if(-1!==n)return s[n];if(R(e)||Ee(e))throw f("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=function(e){switch(de.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(l(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t;case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(Se(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===r&&(r=be(e)?[]:Object.create(h(e)),i=!0),a.push(e),s.push(r),i?o(e,r,t):r}}function Pe(e,t){return e===t||e!=e&&t!=t}function Re(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,i,r,a=typeof e;if(a===typeof t&&"object"===a){if(!be(e)){if(E(e))return!!E(t)&&Pe(e.getTime(),t.getTime());if(w(e))return!!w(t)&&e.toString()===t.toString();if(Ee(e)||Ee(t)||R(e)||R(t)||be(t)||E(t)||w(t))return!1;for(i in r=$e(),e)if("$"!==i.charAt(0)&&!Se(e[i])){if(!Re(e[i],t[i]))return!1;r[i]=!0}for(i in t)if(!(i in r)&&"$"!==i.charAt(0)&&_e(t[i])&&!Se(t[i]))return!1;return!0}if(!be(t))return!1;if((n=e.length)===t.length){for(i=0;i<n;i++)if(!Re(e[i],t[i]))return!1;return!0}}return!1}var F=function(){if(!_e(F.rules)){var e=$.document.querySelector("[ng-csp]")||$.document.querySelector("[data-ng-csp]");if(e){var t=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");F.rules={noUnsafeEval:!t||-1!==t.indexOf("no-unsafe-eval"),noInlineStyle:!t||-1!==t.indexOf("no-inline-style")}}else F.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return F.rules},B=function(){if(_e(B.name_))return B.name_;var e,t,n,i,r=ne.length;for(t=0;t<r;++t)if(n=ne[t],e=$.document.querySelector("["+n.replace(":","\\:")+"jq]")){i=e.getAttribute(n+"jq");break}return B.name_=i};function z(e,t,n){return e.concat(o.call(t,n))}function De(e,t){return o.call(e,t||0)}function ke(e,t){var n=2<arguments.length?De(arguments,2):[];return!Se(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,z(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function G(e,t){var n=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=void 0:R(t)?n="$WINDOW":t&&$.document===t?n="$DOCUMENT":Ee(t)&&(n="$SCOPE"),n}function q(e,t){if(!ve(e))return S(t)||(t=t?2:null),JSON.stringify(e,G,t)}function W(e){return xe(e)?JSON.parse(e):e}var Y=/:/g;function X(e,t){e=e.replace(Y,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return P(n)?t:n}function K(e,t,n){n=n?-1:1;var i,r,a=e.getTimezoneOffset(),s=X(t,a);return i=e,r=n*(s-a),(i=new Date(i.getTime())).setMinutes(i.getMinutes()+r),i}function Ie(e){e=ce(e).clone().empty();var t=ce("<div>").append(e).html();try{return e[0].nodeType===He?V(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+V(t)})}catch(e){return V(t)}}function Q(e){try{return decodeURIComponent(e)}catch(e){}}function Z(e){var r={};return he((e||"").split("&"),function(e){var t,n,i;e&&(n=e=e.replace(/\+/g,"%20"),-1!==(t=e.indexOf("="))&&(n=e.substring(0,t),i=e.substring(t+1)),_e(n=Q(n))&&(i=!_e(i)||Q(i),j.call(r,n)?be(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i))}),r}function J(e){var n=[];return he(e,function(e,t){be(e)?he(e,function(e){n.push(te(t,!0)+(!0===e?"":"="+te(e,!0)))}):n.push(te(t,!0)+(!0===e?"":"="+te(e,!0)))}),n.length?n.join("&"):""}function ee(e){return te(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function te(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var ne=["ng-","data-ng-","ng:","x-ng-"];var ie=function(n){var e=n.currentScript;if(!e)return!0;if(!(e instanceof $.HTMLScriptElement||e instanceof $.SVGScriptElement))return!1;var t=e.attributes;return[t.getNamedItem("src"),t.getNamedItem("href"),t.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var t=n.createElement("a");if(t.href=e.value,n.location.origin===t.origin)return!0;switch(t.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}($.document);function re(i,e){var r,a,t={};if(he(ne,function(e){var t=e+"app";!r&&i.hasAttribute&&i.hasAttribute(t)&&(a=(r=i).getAttribute(t))}),he(ne,function(e){var t,n=e+"app";!r&&(t=i.querySelector("["+n.replace(":","\\:")+"]"))&&(a=(r=t).getAttribute(n))}),r){if(!ie)return void $.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");t.strictDi=null!==function(e,t){var n,i,r=ne.length;for(i=0;i<r;++i)if(n=ne[i]+t,xe(n=e.getAttribute(n)))return n;return null}(r,"strict-di"),e(r,a?[a]:[],t)}}function ae(n,i,r){ye(r)||(r={});r=fe({strictDi:!1},r);var t=function(){if((n=ce(n)).injector()){var e=n[0]===$.document?"document":Ie(n);throw f("btstrpd","App already bootstrapped with this element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}(i=i||[]).unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng");var t=Kt(i,r.strictDi);return t.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),t},e=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if($&&e.test($.name)&&(r.debugInfoEnabled=!0,$.name=$.name.replace(e,"")),$&&!a.test($.name))return t();$.name=$.name.replace(a,""),y.resumeBootstrap=function(e){return he(e,function(e){i.push(e)}),t()},Se(y.resumeDeferredBootstrap)&&y.resumeDeferredBootstrap()}function se(){$.name="NG_ENABLE_DEBUG_INFO!"+$.name,$.location.reload()}function oe(e){var t=y.element(e).injector();if(!t)throw f("test","no injector found for element argument to getTestability");return t.get("$$testability")}var le=/[A-Z]/g;function Le(e,n){return n=n||"_",e.replace(le,function(e,t){return(t?n:"")+e.toLowerCase()})}var ue=!1;function Oe(e,t,n){if(!e)throw f("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function Ne(e,t,n){return n&&be(e)&&(e=e[e.length-1]),Oe(Se(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function Ue(e,t){if("hasOwnProperty"===e)throw f("badname","hasOwnProperty is not a valid {0} name",t)}function Fe(e,t,n){if(!t)return e;for(var i,r=t.split("."),a=e,s=r.length,o=0;o<s;o++)i=r[o],e&&(e=(a=e)[i]);return!n&&Se(e)?ke(a,e):e}function Be(e){for(var t,n=e[0],i=e[e.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(t||e[r]!==n)&&(t||(t=ce(o.call(e,0,r))),t.push(n));return t||e}function $e(){return Object.create(null)}function je(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!b(e)||be(e)||E(e)?q(e):e.toString()}return e}var Ve=1,He=3,ze=8,Ge=9,qe=11;function We(e,t){if(be(e)){t=t||[];for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}else if(ye(e))for(var r in t=t||{},e)"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r]);return t||e}function Ye(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):ve(e)?"undefined":"string"!=typeof e?(n=e,r=[],u(i=t)&&(n=y.copy(n,null,i)),JSON.stringify(n,function(e,t){if(ye(t=G(e,t))){if(0<=r.indexOf(t))return"...";r.push(t)}return t})):e;var n,i,r}var Xe={full:"1.6.5",major:1,minor:6,dot:5,codeName:"toffee-salinization"};ft.expando="ng339";var Ke=ft.cache={},Qe=1;ft._data=function(e){return this.cache[e[this.expando]]||{}};var Ze=/-([a-z])/g,Je=/^-ms-/,et={mouseleave:"mouseout",mouseenter:"mouseover"},tt=A("jqLite");function nt(e,t){return t.toUpperCase()}function it(e){return e.replace(Ze,nt)}var rt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,at=/<|&#?\w+;/,st=/<([\w:-]+)/,ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,lt={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ut(e){return!at.test(e)}function ct(e){var t=e.nodeType;return t===Ve||!t||t===Ge}function dt(e,t){var n,i,r,a,s=t.createDocumentFragment(),o=[];if(ut(e))o.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),i=(st.exec(e)||["",""])[1].toLowerCase(),r=lt[i]||lt._default,n.innerHTML=r[1]+e.replace(ot,"<$1></$2>")+r[2],a=r[0];a--;)n=n.lastChild;o=z(o,n.childNodes),(n=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",he(o,function(e){s.appendChild(e)}),s}lt.optgroup=lt.option,lt.tbody=lt.tfoot=lt.colgroup=lt.caption=lt.thead,lt.th=lt.td;var ht=$.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function ft(e){if(e instanceof ft)return e;var t,n,i,r;if(xe(e)&&(e=Me(e),t=!0),!(this instanceof ft)){if(t&&"<"!==e.charAt(0))throw tt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ft(e)}t?St(this,(n=e,i=i||$.document,(r=rt.exec(n))?[i.createElement(r[1])]:(r=dt(n,i))?r.childNodes:[])):Se(e)?Ct(e):St(this,e)}function pt(e){return e.cloneNode(!0)}function mt(e,t){!t&&ct(e)&&ce.cleanData([e]),e.querySelectorAll&&ce.cleanData(e.querySelectorAll("*"))}function gt(n,e,i,t){if(_e(t))throw tt("offargs","jqLite#off() does not support the `selector` argument");var r=_t(n),a=r&&r.events,s=r&&r.handle;if(s)if(e){var o=function(e){var t=a[e];_e(i)&&Ce(t||[],i),_e(i)&&t&&0<t.length||(n.removeEventListener(e,s),delete a[e])};he(e.split(" "),function(e){o(e),et[e]&&o(et[e])})}else for(e in a)"$destroy"!==e&&n.removeEventListener(e,s),delete a[e]}function vt(e,t){var n=e.ng339,i=n&&Ke[n];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),gt(e)),delete Ke[n],e.ng339=void 0}}function _t(e,t){var n=e.ng339,i=n&&Ke[n];return t&&!i&&(e.ng339=n=++Qe,i=Ke[n]={events:{},data:{},handle:void 0}),i}function yt(e,t,n){if(ct(e)){var i,r=_e(n),a=!r&&t&&!ye(t),s=!t,o=_t(e,!a),l=o&&o.data;if(r)l[it(t)]=n;else{if(s)return l;if(a)return l&&l[it(t)];for(i in t)l[it(i)]=t[i]}}}function xt(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function bt(t,e){e&&t.setAttribute&&he(e.split(" "),function(e){t.setAttribute("class",Me((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Me(e)+" "," ")))})}function Tt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");he(t.split(" "),function(e){e=Me(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Me(n))}}function St(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;i<n;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function Et(e,t){return wt(e,"$"+(t||"ngController")+"Controller")}function wt(e,t,n){e.nodeType===Ge&&(e=e.documentElement);for(var i=be(t)?t:[t];e;){for(var r=0,a=i.length;r<a;r++)if(_e(n=ce.data(e,i[r])))return n;e=e.parentNode||e.nodeType===qe&&e.host}}function Mt(e){for(mt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function At(e,t){t||mt(e);var n=e.parentNode;n&&n.removeChild(e)}function Ct(e){function t(){$.document.removeEventListener("DOMContentLoaded",t),$.removeEventListener("load",t),e()}"complete"===$.document.readyState?$.setTimeout(e):($.document.addEventListener("DOMContentLoaded",t),$.addEventListener("load",t))}var Pt=ft.prototype={ready:Ct,toString:function(){var t=[];return he(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(e){return ce(0<=e?this[e]:this[this.length+e])},length:0,push:t,sort:[].sort,splice:[].splice},Rt={};he("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Rt[V(e)]=e});var Dt={};he("input,select,option,textarea,button,form,details".split(","),function(e){Dt[e]=!0});var kt={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function It(e,t){var n=Rt[t.toLowerCase()];return n&&Dt[Ae(e)]&&n}function Lt(e,t,n){n.call(e,t)}function Ot(e,t,n){var i=t.relatedTarget;i&&(i===e||ht.call(e,i))||n.call(e,t)}function Nt(){this.$get=function(){return fe(ft,{hasClass:function(e,t){return e.attr&&(e=e[0]),xt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Tt(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),bt(e,t)}})}}function Ut(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"===i||"object"===i&&null!==e?e.$$hashKey=i+":"+(t||C)():i+":"+e}he({data:yt,removeData:vt,hasData:function(e){for(var t in Ke[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)vt(e[t])}},function(e,t){ft[t]=e}),he({data:yt,inheritedData:wt,scope:function(e){return ce.data(e,"$scope")||wt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return ce.data(e,"$isolateScope")||ce.data(e,"$isolateScopeNoTemplate")},controller:Et,injector:function(e){return wt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:xt,css:function(e,t,n){if(t=it(t.replace(Je,"ms-")),!_e(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var i,r=e.nodeType;if(r!==He&&2!==r&&r!==ze&&e.getAttribute){var a=V(t),s=Rt[a];if(!_e(n))return i=e.getAttribute(t),s&&null!==i&&(i=a),null===i?void 0:i;null===n||!1===n&&s?e.removeAttribute(t):e.setAttribute(t,s?a:n)}},prop:function(e,t,n){if(!_e(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(ve(t)){var n=e.nodeType;return n===Ve||n===He?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(ve(t)){if(e.multiple&&"select"===Ae(e)){var n=[];return he(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(ve(t))return e.innerHTML;mt(e,!0),e.innerHTML=t},empty:Mt},function(u,e){ft.prototype[e]=function(e,t){var n,i,r=this.length;if(u!==Mt&&ve(2===u.length&&u!==xt&&u!==Et?e:t)){if(ye(e)){for(n=0;n<r;n++)if(u===yt)u(this[n],e);else for(i in e)u(this[n],i,e[i]);return this}for(var a=u.$dv,s=ve(a)?Math.min(r,1):r,o=0;o<s;o++){var l=u(this[o],e,t);a=a?a+l:l}return a}for(n=0;n<r;n++)u(this[n],e,t);return this}}),he({removeData:vt,on:function(r,e,a,t){if(_e(t))throw tt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ct(r)){var o,l,n,i=_t(r,!0),s=i.events,u=i.handle;u||(u=i.handle=(l=s,(n=function(e,t){e.isDefaultPrevented=function(){return e.defaultPrevented};var n=l[t||e.type],i=n?n.length:0;if(i){if(ve(e.immediatePropagationStopped)){var r=e.stopImmediatePropagation;e.stopImmediatePropagation=function(){e.immediatePropagationStopped=!0,e.stopPropagation&&e.stopPropagation(),r&&r.call(e)}}e.isImmediatePropagationStopped=function(){return!0===e.immediatePropagationStopped};var a=n.specialHandlerWrapper||Lt;1<i&&(n=We(n));for(var s=0;s<i;s++)e.isImmediatePropagationStopped()||a(o,e,n[s])}}).elem=o=r,n));for(var c=0<=e.indexOf(" ")?e.split(" "):[e],d=c.length,h=function(e,t,n){var i=s[e];i||((i=s[e]=[]).specialHandlerWrapper=t,"$destroy"===e||n||r.addEventListener(e,u)),i.push(a)};d--;)e=c[d],et[e]?(h(et[e],Ot),h(e,void 0,!0)):h(e)}},off:gt,one:function(t,n,i){(t=ce(t)).on(n,function e(){t.off(n,i),t.off(n,e)}),t.on(n,i)},replaceWith:function(t,e){var n,i=t.parentNode;mt(t),he(new ft(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(e){var t=[];return he(e.childNodes,function(e){e.nodeType===Ve&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Ve||n===qe)for(var i=0,r=(t=new ft(t)).length;i<r;i++){var a=t[i];e.appendChild(a)}},prepend:function(t,e){if(t.nodeType===Ve){var n=t.firstChild;he(new ft(e),function(e){t.insertBefore(e,n)})}},wrap:function(e,t){var n,i,r;n=e,i=ce(t).eq(0).clone()[0],(r=n.parentNode)&&r.replaceChild(i,n),i.appendChild(n)},remove:At,detach:function(e){At(e,!0)},after:function(e,t){var n=e,i=e.parentNode;if(i)for(var r=0,a=(t=new ft(t)).length;r<a;r++){var s=t[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:Tt,removeClass:bt,toggleClass:function(n,e,i){e&&he(e.split(" "),function(e){var t=i;ve(t)&&(t=!xt(n,e)),(t?Tt:bt)(n,e)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==qe?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:pt,triggerHandler:function(t,e,n){var i,r,a,s=e.type||e,o=_t(t),l=o&&o.events,u=l&&l[s];u&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:me,type:s,target:t},e.type&&(i=fe(i,e)),r=We(u),a=n?[i].concat(n):[i],he(r,function(e){i.isImmediatePropagationStopped()||e.apply(t,a)}))}},function(s,e){ft.prototype[e]=function(e,t,n){for(var i,r=0,a=this.length;r<a;r++)ve(i)?_e(i=s(this[r],e,t,n))&&(i=ce(i)):St(i,s(this[r],e,t,n));return _e(i)?i:this}}),ft.prototype.bind=ft.prototype.on,ft.prototype.unbind=ft.prototype.off;var Ft=Object.create(null);function Bt(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Bt.prototype={_idx:function(e){return e===this._lastKey||(this._lastKey=e,this._lastIndex=this._keys.indexOf(e)),this._lastIndex},_transformKey:function(e){return P(e)?Ft:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var $t=Bt,jt=[function(){this.$get=[function(){return $t}]}],Vt=/^([^(]+?)=>/,Ht=/^[^(]*\(\s*([^)]*)\)/m,zt=/,/,Gt=/^\s*(_?)(\S+?)\1\s*$/,qt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Wt=A("$injector");function Yt(e){return Function.prototype.toString.call(e)}function Xt(e){var t=Yt(e).replace(qt,"");return t.match(Vt)||t.match(Ht)}function Kt(e,u){u=!0===u;var r={},s="Provider",o=[],a=new $t,c={$provide:{provider:h(f),factory:h(p),service:h(function(e,t){return p(e,["$injector",function(e){return e.instantiate(t)}])}),value:h(function(e,t){return p(e,M(t),!1)}),constant:h(function(e,t){Ue(e,"constant"),c[e]=t,n[e]=t}),decorator:function(e,t){var n=l.get(e+s),i=n.$get;n.$get=function(){var e=d.invoke(i,n);return d.invoke(t,null,{$delegate:e})}}}},l=c.$injector=m(c,function(e,t){throw y.isString(t)&&o.push(t),Wt("unpr","Unknown provider: {0}",o.join(" <- "))}),n={},t=m(n,function(e,t){var n=l.get(e+s,t);return d.invoke(n.$get,n,void 0,e)}),d=t;c["$injector"+s]={$get:M(t)},d.modules=l.modules=$e();var i=function n(e){Oe(ve(e)||be(e),"modulesToLoad","not an array");var i,r=[];he(e,function(t){if(!a.get(t)){a.set(t,!0);try{xe(t)?(i=g(t),d.modules[t]=i,r=r.concat(n(i.requires)).concat(i._runBlocks),e(i._invokeQueue),e(i._configBlocks)):Se(t)?r.push(l.invoke(t)):be(t)?r.push(l.invoke(t)):Ne(t,"module")}catch(e){throw be(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Wt("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function e(e){var t,n;for(t=0,n=e.length;t<n;t++){var i=e[t],r=l.get(i[0]);r[i[1]].apply(r,i[2])}}});return r}(e);return(d=t.get("$injector")).strictDi=u,he(i,function(e){e&&d.invoke(e)}),d;function h(n){return function(e,t){if(!ye(e))return n(e,t);he(e,v(n))}}function f(e,t){if(Ue(e,"service"),(Se(t)||be(t))&&(t=l.instantiate(t)),!t.$get)throw Wt("pget","Provider '{0}' must define $get factory method.",e);return c[e+s]=t}function p(e,t,n){return f(e,{$get:!1!==n?(i=e,r=t,function(){var e=d.invoke(r,this);if(ve(e))throw Wt("undef","Provider '{0}' must return a value from $get factory method.",i);return e}):t});var i,r}function m(n,i){function l(t,e){if(n.hasOwnProperty(t)){if(n[t]===r)throw Wt("cdep","Circular dependency found: {0}",t+" <- "+o.join(" <- "));return n[t]}try{return o.unshift(t),n[t]=r,n[t]=i(t,e),n[t]}catch(e){throw n[t]===r&&delete n[t],e}finally{o.shift()}}function a(e,t,n){for(var i=[],r=Kt.$$annotate(e,u,n),a=0,s=r.length;a<s;a++){var o=r[a];if("string"!=typeof o)throw Wt("itkn","Incorrect injection token! Expected service name as string, got {0}",o);i.push(t&&t.hasOwnProperty(o)?t[o]:l(o,n))}return i}return{invoke:function(e,t,n,i){"string"==typeof n&&(i=n,n=null);var r=a(e,n,i);return be(e)&&(e=e[e.length-1]),function(e){if(H||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return we(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(Yt(e))),t}(e)?(r.unshift(null),new(Function.prototype.bind.apply(e,r))):e.apply(t,r)},instantiate:function(e,t,n){var i=be(e)?e[e.length-1]:e,r=a(e,t,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:l,annotate:Kt.$$annotate,has:function(e){return c.hasOwnProperty(e+s)||n.hasOwnProperty(e)}}}}function Qt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(i,r,a){var s=i.document;function o(e){if(e){e.scrollIntoView();var t=function(){var e=l.yOffset;if(Se(e))e=e();else if(O(e)){var t=e[0];e="fixed"!==i.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else S(e)||(e=0);return e}();if(t){var n=e.getBoundingClientRect().top;i.scrollBy(0,n-t)}}else i.scrollTo(0,0)}function l(e){var t,n,i;(e=xe(e)?e:S(e)?e.toString():r.hash())?(t=s.getElementById(e))?o(t):(n=s.getElementsByName(e),i=null,Array.prototype.some.call(n,function(e){if("a"===Ae(e))return i=e,!0}),(t=i)?o(t):"top"===e&&o(null)):o(null)}return e&&a.$watch(function(){return r.hash()},function(e,t){var n,i;e===t&&""===e||(n=function(){a.$evalAsync(l)},"complete"===(i=i||$).document.readyState?i.setTimeout(n):ce(i).on("load",n))}),l}]}Kt.$$annotate=function(e,t,n){var i,r,a;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw xe(n)&&n||(n=e.name||((a=Xt(e))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Wt("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);he(Xt(e)[1].split(zt),function(e){e.replace(Gt,function(e,t,n){i.push(n)})})}e.$inject=i}}else be(e)?(Ne(e[r=e.length-1],"fn"),i=e.slice(0,r)):Ne(e,"fn",!0);return i};var Zt=A("$animate"),Jt=1,en="ng-animate";function tn(e,t){return e||t?e?t?(be(e)&&(e=e.join(" ")),be(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function nn(e){return ye(e)?e:{}}var rn=function(){this.$get=me},an=function(){var m=new $t,g=[];this.$get=["$$AnimateRunner","$rootScope",function(d,h){return{enabled:me,on:me,off:me,pin:me,push:function(e,t,n,i){var r,a,s,o,l,u;i&&i(),(n=n||{}).from&&e.css(n.from),n.to&&e.css(n.to),(n.addClass||n.removeClass)&&(r=e,a=n.addClass,s=n.removeClass,o=m.get(r)||{},l=f(o,a,!0),u=f(o,s,!1),(l||u)&&(m.set(r,o),g.push(r),1===g.length&&h.$$postDigest(p)));var c=new d;return c.complete(),c}};function f(t,e,n){var i=!1;return e&&he(e=xe(e)?e.split(" "):be(e)?e:[],function(e){e&&(i=!0,t[e]=n)}),i}function p(){he(g,function(e){var t=m.get(e);if(t){var n=function(e){xe(e)&&(e=e.split(" "));var t=$e();return he(e,function(e){e.length&&(t[e]=!0)}),t}(e.attr("class")),i="",r="";he(t,function(e,t){e!==!!n[t]&&(e?i+=(i.length?" ":"")+t:r+=(r.length?" ":"")+t)}),he(e,function(e){i&&Tt(e,i),r&&bt(e,r)}),m.delete(e)}}),g.length=0}}]},sn=["$provide",function(i){var r=this,t=null,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(e,t){if(e&&"."!==e.charAt(0))throw Zt("notcsel","Expecting class selector starting with '.' got '{0}'.",e);var n=e+"-animation";r.$$registeredAnimations[e.substr(1)]=n,i.factory(n,t)},this.customFilter=function(e){return 1===arguments.length&&(n=Se(e)?e:null),n},this.classNameFilter=function(e){if(1===arguments.length&&((t=e instanceof RegExp?e:null)&&new RegExp("[(\\s|\\/)]"+en+"[(\\s|\\/)]").test(t.toString())))throw t=null,Zt("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',en);return t},this.$get=["$$animateQueue",function(a){function r(e,t,n){if(n){var i=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Jt)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(e){e.end&&e.end()},enter:function(e,t,n,i){return t=t&&ce(t),n=n&&ce(n),r(e,t=t||n.parent(),n),a.push(e,"enter",nn(i))},move:function(e,t,n,i){return t=t&&ce(t),n=n&&ce(n),r(e,t=t||n.parent(),n),a.push(e,"move",nn(i))},leave:function(e,t){return a.push(e,"leave",nn(t),function(){e.remove()})},addClass:function(e,t,n){return(n=nn(n)).addClass=tn(n.addclass,t),a.push(e,"addClass",n)},removeClass:function(e,t,n){return(n=nn(n)).removeClass=tn(n.removeClass,t),a.push(e,"removeClass",n)},setClass:function(e,t,n,i){return(i=nn(i)).addClass=tn(i.addClass,t),i.removeClass=tn(i.removeClass,n),a.push(e,"setClass",i)},animate:function(e,t,n,i,r){return(r=nn(r)).from=r.from?fe(r.from,t):t,r.to=r.to?fe(r.to,n):n,i=i||"ng-inline-animate",r.tempClasses=tn(r.tempClasses,i),a.push(e,"animate",r)}}}]}],on=function(){this.$get=["$$rAF",function(t){var n=[];function i(e){n.push(e),1<n.length||t(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}return function(){var t=!1;return i(function(){t=!0}),function(e){t?e():i(e)}}}]},ln=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,i,r){function a(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){i()?r(e,0,!1):t(e)},this._state=0}return a.chain=function(e,n){var i=0;!function t(){if(i===e.length)return void n(!0);e[i](function(e){!1!==e?(i++,t()):n(!1)})}()},a.all=function(t,n){var i=0,r=!0;function a(e){r=r&&e,++i===t.length&&n(r)}he(t,function(e){e.done(a)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:me,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(t){2!==this._state&&(he(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},a}]},un=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(s,e,o){return function(e,t){var n=t||{};n.$$prepared||(n=U(n)),n.cleanupStyles&&(n.from=n.to=null),n.from&&(e.css(n.from),n.from=null);var i,r=new o;return{start:a,end:a};function a(){return s(function(){!function(){n.addClass&&(e.addClass(n.addClass),n.addClass=null);n.removeClass&&(e.removeClass(n.removeClass),n.removeClass=null);n.to&&(e.css(n.to),n.to=null)}(),i||r.complete(),i=!0}),r}}}]};function cn(o,e,t,l){var u=this,c=o.location,d=o.history,i=o.setTimeout,n=o.clearTimeout,r={};u.isMock=!1;var a=0,s=[];function h(e){try{e.apply(null,De(arguments,1))}finally{if(0===--a)for(;s.length;)try{s.pop()()}catch(e){t.error(e)}}}u.$$completeOutstandingRequest=h,u.$$incOutstandingRequestCount=function(){a++},u.notifyWhenNoOutstandingRequests=function(e){0===a?e():s.push(e)};var f,p,m=c.href,g=e.find("base"),v=null,_=l.history?function(){try{return d.state}catch(e){}}:me;S(),u.url=function(e,t,n){if(ve(n)&&(n=null),c!==o.location&&(c=o.location),d!==o.history&&(d=o.history),e){var i=p===n;if(m===e&&(!l.history||i))return u;var r=m&&si(m)===si(e);return m=e,p=n,!l.history||r&&i?(r||(v=e),t?c.replace(e):r?c.hash=-1===(s=(a=e).indexOf("#"))?"":a.substr(s):c.href=e,c.href!==e&&(v=e)):(d[t?"replaceState":"pushState"](n,"",e),S()),v&&(v=e),u}return v||c.href.replace(/%27/g,"'");var a,s},u.state=function(){return f};var y=[],x=!1;function b(){v=null,E()}var T=null;function S(){Re(f=ve(f=_())?null:f,T)&&(f=T),p=T=f}function E(){var e=p;S(),m===u.url()&&e===f||(m=u.url(),p=f,he(y,function(e){e(u.url(),f)}))}u.onUrlChange=function(e){return x||(l.history&&ce(o).on("popstate",b),ce(o).on("hashchange",b),x=!0),y.push(e),e},u.$$applicationDestroyed=function(){ce(o).off("hashchange popstate",b)},u.$$checkUrlChange=E,u.baseHref=function(){var e=g.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},u.defer=function(e,t){var n;return a++,n=i(function(){delete r[n],h(e)},t||0),r[n]=!0,n},u.defer.cancel=function(e){return!!r[e]&&(delete r[e],n(e),h(me),!0)}}function dn(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new cn(e,i,t,n)}]}function hn(){this.$get=function(){var d={};function e(e,t){if(e in d)throw A("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var n=0,i=fe({},t,{id:e}),r=$e(),a=t&&t.capacity||Number.MAX_VALUE,s=$e(),o=null,l=null;return d[e]={put:function(e,t){if(!ve(t)){if(a<Number.MAX_VALUE)u(s[e]||(s[e]={key:e}));return e in r||n++,r[e]=t,a<n&&this.remove(l.key),t}},get:function(e){if(a<Number.MAX_VALUE){var t=s[e];if(!t)return;u(t)}return r[e]},remove:function(e){if(a<Number.MAX_VALUE){var t=s[e];if(!t)return;t===o&&(o=t.p),t===l&&(l=t.n),c(t.n,t.p),delete s[e]}e in r&&(delete r[e],n--)},removeAll:function(){r=$e(),n=0,s=$e(),o=l=null},destroy:function(){s=i=r=null,delete d[e]},info:function(){return fe({},i,{size:n})}};function u(e){e!==o&&(l?l===e&&(l=e.n):l=e,c(e.n,e.p),c(e,o),(o=e).n=null)}function c(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}}return e.info=function(){var n={};return he(d,function(e,t){n[t]=e.info()}),n},e.get=function(e){return d[e]},e}}function fn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var pn=A("$compile");var mn=new function(){};function gn(n,t){var p={},m="Directive",F=/^\s*directive:\s*([\w-]+)\s+(.*)$/,B=/(([\w-]+)(?::([^;]+))?;?)/,c=function(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),h=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,d=/^(on[a-z]+|formaction)$/,o=$e();function i(e,i,r){var a=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,s=$e();return he(e,function(e,t){if(e in o)s[t]=o[e];else{var n=e.match(a);if(!n)throw pn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",i,t,e,r?"controller bindings definition":"isolate scope definition");s[t]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||t},n[4]&&(o[e]=s[t])}}),s}function g(e,t){var n={isolateScope:null,bindToController:null};if(ye(e.scope)&&(!0===e.bindToController?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),ye(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw pn("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}this.directive=function e(l,t){return Oe(l,"name"),Ue(l,"directive"),xe(l)?(!function(e){var t=e.charAt(0);if(!t||t!==V(t))throw pn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw pn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(l),Oe(t,"directiveFactory"),p.hasOwnProperty(l)||(p[l]=[],n.factory(l+m,["$injector","$exceptionHandler",function(a,s){var o=[];return he(p[l],function(e,t){try{var n=a.invoke(e);Se(n)?n={compile:M(n)}:!n.compile&&n.link&&(n.compile=M(n.link)),n.priority=n.priority||0,n.index=t,n.name=n.name||l,n.require=(r=(i=n).require||i.controller&&i.name,!be(r)&&ye(r)&&he(r,function(e,t){var n=e.match(h);e.substring(n[0].length)||(r[t]=n[0]+t)}),r),n.restrict=function(e,t){if(e&&(!xe(e)||!/[EACM]/.test(e)))throw pn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}(n.restrict,l),n.$$moduleName=e.$$moduleName,o.push(n)}catch(e){s(e)}var i,r}),o}])),p[l].push(t)):he(l,v(e)),this},this.component=function e(t,r){if(!xe(t))return he(t,v(ke(this,e))),this;var a=r.controller||function(){};function n(i){function e(n){return Se(n)||be(n)?function(e,t){return i.invoke(n,this,{$element:e,$attrs:t})}:n}var t=r.template||r.templateUrl?r.template:"",n={controller:a,controllerAs:function(e,t){if(t&&xe(t))return t;if(xe(e)){var n=En.exec(e);if(n)return n[3]}}(r.controller)||r.controllerAs||"$ctrl",template:e(t),templateUrl:e(r.templateUrl),transclude:r.transclude,scope:{},bindToController:r.bindings||{},restrict:"E",require:r.require};return he(r,function(e,t){"$"===t.charAt(0)&&(n[t]=e)}),n}return he(r,function(e,t){"$"===t.charAt(0)&&(n[t]=e,Se(a)&&(a[t]=e))}),n.$inject=["$injector"],this.directive(t,n)},this.aHrefSanitizationWhitelist=function(e){return _e(e)?(t.aHrefSanitizationWhitelist(e),this):t.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return _e(e)?(t.imgSrcSanitizationWhitelist(e),this):t.imgSrcSanitizationWhitelist()};var u=!0,ue=!(this.debugInfoEnabled=function(e){return _e(e)?(u=e,this):u});this.preAssignBindingsEnabled=function(e){return _e(e)?(ue=e,this):ue};var T=10;this.onChangesTtl=function(e){return arguments.length?(T=e,this):T};var S=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(S=e,this):S};var E=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(E=e,this):E},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(f,w,z,e,y,G,a,r,s,v){var o,_=/^\w/,x=$.document.createElement("div"),M=S,A=E,t=T;function l(){try{if(!--t)throw o=void 0,pn("infchng","{0} $onChanges() iterations reached. Aborting!\n",T);a.$apply(function(){for(var t=[],e=0,n=o.length;e<n;++e)try{o[e]()}catch(e){t.push(e)}if(o=void 0,t.length)throw t})}finally{t++}}function q(e,t){if(t){var n,i,r,a=Object.keys(t);for(n=0,i=a.length;n<i;n++)this[r=a[n]]=t[r]}else this.$attr={};this.$$element=e}function C(e,t){try{e.addClass(t)}catch(e){}}q.prototype={$normalize:xn,$addClass:function(e){e&&0<e.length&&s.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&s.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=bn(e,t);n&&n.length&&s.addClass(this.$$element,n);var i=bn(t,e);i&&i.length&&s.removeClass(this.$$element,i)},$set:function(e,t,n,i){var r,a=It(this.$$element[0],e),s=kt[e],o=e;if(a?(this.$$element.prop(e,t),i=a):s&&(this[s]=t,o=s),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e])||(this.$attr[e]=i=Le(e,"-")),"a"===(r=Ae(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===r&&"src"===e)this[e]=t=v(t,"src"===e);else if("img"===r&&"srcset"===e&&_e(t)){for(var l="",u=Me(t),c=/\s/.test(u)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,d=u.split(c),h=Math.floor(d.length/2),f=0;f<h;f++){var p=2*f;l+=v(Me(d[p]),!0),l+=" "+Me(d[p+1])}var m=Me(d[2*f]).split(/\s/);l+=v(Me(m[0]),!0),2===m.length&&(l+=" "+Me(m[1])),this[e]=t=l}!1!==n&&(null===t||ve(t)?this.$$element.removeAttr(i):_.test(i)?this.$$element.attr(i,t):function(e,t,n){x.innerHTML="<span "+t+">";var i=x.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,e.attributes.setNamedItem(r)}(this.$$element[0],i,t));var g=this.$$observers;g&&he(g[o],function(e){try{e(t)}catch(e){z(e)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=$e()),r=i[e]||(i[e]=[]);return r.push(t),a.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(e)||ve(n[e])||t(n[e])}),function(){Ce(r,t)}}};var n=w.startSymbol(),i=w.endSymbol(),W="{{"===n&&"}}"===i?ge:function(e){return e.replace(/\{\{/g,n).replace(/}}/g,i)},P=/^ngAttr[A-Z]/,R=/^(.+)Start$/;return Y.$$addBindingInfo=u?function(e,t){var n=e.data("$binding")||[];be(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:me,Y.$$addBindingClass=u?function(e){C(e,"ng-binding")}:me,Y.$$addScopeInfo=u?function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)}:me,Y.$$addScopeClass=u?function(e,t){C(e,t?"ng-isolate-scope":"ng-scope")}:me,Y.$$createComment=function(e,t){var n="";return u&&(n=" "+(e||"")+": ",t&&(n+=t+" ")),$.document.createComment(n)},Y;function Y(c,e,t,n,d){c instanceof ce||(c=ce(c));var h=D(c,e,c,t,n,d);Y.$$addScopeClass(c);var f=null;return function(e,t,n){if(!c)throw pn("multilink","This element has already been linked.");Oe(e,"scope"),d&&d.needsNewScope&&(e=e.$parent.$new());var i,r,a,s=(n=n||{}).parentBoundTranscludeFn,o=n.transcludeControllers,l=n.futureParentElement;if(s&&s.$$boundTransclude&&(s=s.$$boundTransclude),f||(r=(i=l)&&i[0],f=r&&"foreignobject"!==Ae(r)&&de.call(r).match(/SVG/)?"svg":"html"),a="html"!==f?ce(re(f,ce("<div>").append(c).html())):t?Pt.clone.call(c):c,o)for(var u in o)a.data("$"+u+"Controller",o[u].instance);return Y.$$addScopeInfo(a,e),t&&t(a,e),h&&h(e,a,a,s),t||(c=h=null),a}}function D(e,p,t,n,i,r){for(var a,s,o,l,u,c,m,g=[],d=be(e)||e instanceof ce,h=0;h<e.length;h++)a=new q,11===H&&b(e,h,d),(o=(s=X(e[h],[],a,0===h?n:void 0,i)).length?I(s,e[h],a,p,t,null,[],[],r):null)&&o.scope&&Y.$$addScopeClass(a.$$element),u=o&&o.terminal||!(l=e[h].childNodes)||!l.length?null:D(l,o?(o.transcludeOnThisElement||!o.templateOnThisElement)&&o.transclude:p),(o||u)&&(g.push(h,o,u),c=!0,m=m||o),r=null;return c?function(e,t,n,i){var r,a,s,o,l,u,c,d,h;if(m){var f=t.length;for(h=new Array(f),l=0;l<g.length;l+=3)c=g[l],h[c]=t[c]}else h=t;for(l=0,u=g.length;l<u;)s=h[g[l++]],r=g[l++],a=g[l++],r?(r.scope?(o=e.$new(),Y.$$addScopeInfo(ce(s),o)):o=e,d=r.transcludeOnThisElement?k(e,r.transclude,i):!r.templateOnThisElement&&i?i:!i&&p?k(e,p):null,r(a,o,s,n,d)):a&&a(e,s.childNodes,void 0,i)}:null}function b(e,t,n){var i,r=e[t],a=r.parentNode;if(r.nodeType===He)for(;(i=a?r.nextSibling:e[t+1])&&i.nodeType===He;)r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===e[t+1]&&e.splice(t+1,1)}function k(a,s,o){function e(e,t,n,i,r){return e||((e=a.$new(!1,r)).$$transcluded=!0),s(e,t,{parentBoundTranscludeFn:o,transcludeControllers:n,futureParentElement:i})}var t=e.$$slots=$e();for(var n in s.$$slots)s.$$slots[n]?t[n]=k(a,s.$$slots[n],o):t[n]=null;return e}function X(e,t,n,i,r){var a,s,o,l,u,c,d=e.nodeType,h=n.$attr;switch(d){case Ve:L(t,xn(s=Ae(e)),"E",i,r);for(var f,p,m,g,v,_,y=e.attributes,x=0,b=y&&y.length;x<b;x++){var T=!1,S=!1;p=(f=y[x]).name,v=f.value,g=xn(p),(_=P.test(g))&&(p=p.replace(_n,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var E=g.match(R);E&&O(E[1])&&(S=(T=p).substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),h[m=xn(p.toLowerCase())]=p,!_&&n.hasOwnProperty(m)||(n[m]=v,It(e,m)&&(n[m]=!0)),U(e,t,v,m,_),L(t,m,"A",i,r,T,S)}if("input"===s&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!A)break;if(ye(o=e.className)&&(o=o.animVal),xe(o)&&""!==o)for(;a=B.exec(o);)L(t,m=xn(a[2]),"C",i,r)&&(n[m]=Me(a[3])),o=o.substr(a.index+a[0].length);break;case He:l=t,u=e.nodeValue,(c=w(u,!0))&&l.push({priority:0,compile:function(e){var t=e.parent(),i=!!t.length;return i&&Y.$$addBindingClass(t),function(e,t){var n=t.parent();i||Y.$$addBindingClass(n),Y.$$addBindingInfo(n,c.expressions),e.$watch(c,function(e){t[0].nodeValue=e})}}});break;case ze:if(!M)break;!function(e,t,n,i,r){try{var a=F.exec(e.nodeValue);if(a){var s=xn(a[1]);L(t,s,"M",i,r)&&(n[s]=Me(a[2]))}}catch(e){}}(e,t,n,i,r)}return t.sort(N),t}function K(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw pn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===Ve&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(0<r);else i.push(e);return ce(i)}function Q(a,s,o){return function(e,t,n,i,r){return t=K(t[0],s,o),a(e,t,n,i,r)}}function Z(e,t,n,i,r,a){var s;return e?Y(t,n,i,r,a):function(){return s||(s=Y(t,n,i,r,a),t=n=a=null),s.apply(this,arguments)}}function I(e,b,T,t,n,i,S,E,r){r=r||{};for(var a,s,o,l,u,c=-Number.MAX_VALUE,w=r.newScopeDirective,M=r.controllerDirectives,A=r.newIsolateScopeDirective,C=r.templateDirective,d=r.nonTlbTranscludeDirective,h=!1,f=!1,P=r.hasElementTranscludeDirective,p=T.$$element=ce(b),m=i,g=t,v=!1,_=!1,y=0,x=e.length;y<x;y++){var R=(a=e[y]).$$start,D=a.$$end;if(R&&(p=K(b,R,D)),o=void 0,c>a.priority)break;if((u=a.scope)&&(a.templateUrl||(ye(u)?(ie("new/isolated scope",A||w,a,p),A=a):ie("new/isolated scope",A,a,p)),w=w||a),s=a.name,!v&&(a.replace&&(a.templateUrl||a.template)||a.transclude&&!a.$$tlb)){for(var k,I=y+1;k=e[I++];)if(k.transclude&&!k.$$tlb||k.replace&&(k.templateUrl||k.template)){_=!0;break}v=!0}if(!a.templateUrl&&a.controller&&(M=M||$e(),ie("'"+s+"' controller",M[s],a,p),M[s]=a),u=a.transclude)if(h=!0,a.$$tlb||(ie("transclusion",d,a,p),d=a),"element"===u)P=!0,c=a.priority,o=p,p=T.$$element=ce(Y.$$createComment(s,T[s])),b=p[0],ae(n,De(o),b),o[0].$$parentNode=o[0].parentNode,g=Z(_,o,t,c,m&&m.name,{nonTlbTranscludeDirective:d});else{var L=$e();if(ye(u)){o=[];var O=$e(),N=$e();for(var U in he(u,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,O[e]=t,L[t]=null,N[t]=n}),he(p.contents(),function(e){var t=O[xn(Ae(e))];t?(N[t]=!0,L[t]=L[t]||[],L[t].push(e)):o.push(e)}),he(N,function(e,t){if(!e)throw pn("reqslot","Required transclusion slot `{0}` was not filled.",t)}),L)L[U]&&(L[U]=Z(_,L[U],t))}else o=ce(pt(b)).contents();p.empty(),(g=Z(_,o,t,void 0,void 0,{needsNewScope:a.$$isolateScope||a.$$newScope})).$$slots=L}if(a.template)if(f=!0,ie("template",C,a,p),u=Se((C=a).template)?a.template(p,T):a.template,u=W(u),a.replace){if(m=a,o=ut(u)?[]:Tn(re(a.templateNamespace,Me(u))),b=o[0],1!==o.length||b.nodeType!==Ve)throw pn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",s,"");ae(n,p,b);var F={$attr:{}},B=X(b,[],F),$=e.splice(y+1,e.length-(y+1));(A||w)&&ee(B,A,w),e=e.concat(B).concat($),te(T,F),x=e.length}else p.html(u);if(a.templateUrl)f=!0,ie("template",C,a,p),(C=a).replace&&(m=a),H=ne(e.splice(y,e.length-y),p,T,n,h&&g,S,E,{controllerDirectives:M,newScopeDirective:w!==a&&w,newIsolateScopeDirective:A,templateDirective:C,nonTlbTranscludeDirective:d}),x=e.length;else if(a.compile)try{l=a.compile(p,T,g);var j=a.$$originalDirective||a;Se(l)?V(null,ke(j,l),R,D):l&&V(ke(j,l.pre),ke(j,l.post),R,D)}catch(e){z(e,Ie(p))}a.terminal&&(H.terminal=!0,c=Math.max(c,a.priority))}return H.scope=w&&!0===w.scope,H.transcludeOnThisElement=h,H.templateOnThisElement=f,H.transclude=g,r.hasElementTranscludeDirective=P,H;function V(e,t,n,i){e&&(n&&(e=Q(e,n,i)),e.require=a.require,e.directiveName=s,(A===a||a.$$isolateScope)&&(e=se(e,{isolateScope:!0})),S.push(e)),t&&(n&&(t=Q(t,n,i)),t.require=a.require,t.directiveName=s,(A===a||a.$$isolateScope)&&(t=se(t,{isolateScope:!0})),E.push(t))}function H(e,t,n,i,s){var r,a,o,l,u,c,d,h,f,p;for(var m in b===n?h=(f=T).$$element:f=new q(h=ce(n),T),u=t,A?l=t.$new(!0):w&&(u=t.$parent),s&&((d=function(e,t,n,i){var r;Ee(e)||(i=n,n=t,t=e,e=void 0);P&&(r=c);n||(n=P?h.parent():h);{if(!i)return s(e,t,r,n,x);var a=s.$$slots[i];if(a)return a(e,t,r,n,x);if(ve(a))throw pn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,Ie(h))}}).$$boundTransclude=s,d.isSlotFilled=function(e){return!!s.$$slots[e]}),M&&(c=function(e,t,n,i,r,a,s){var o=$e();for(var l in i){var u=i[l],c={$scope:u===s||u.$$isolateScope?r:a,$element:e,$attrs:t,$transclude:n},d=u.controller;"@"===d&&(d=t[u.name]);var h=G(d,c,!0,u.controllerAs);o[u.name]=h,e.data("$"+u.name+"Controller",h.instance)}return o}(h,f,d,M,l,t,A)),A&&(Y.$$addScopeInfo(h,l,!0,!(C&&(C===A||C===A.$$originalDirective))),Y.$$addScopeClass(h,!0),l.$$isolateBindings=A.$$isolateBindings,(p=le(t,f,l,l.$$isolateBindings,A)).removeWatches&&l.$on("$destroy",p.removeWatches)),c){var g=M[m],v=c[m],_=g.$$bindings.bindToController;if(ue){v.bindingInfo=_?le(u,f,v.instance,_,g):{};var y=v();y!==v.instance&&(v.instance=y,h.data("$"+g.name+"Controller",y),v.bindingInfo.removeWatches&&v.bindingInfo.removeWatches(),v.bindingInfo=le(u,f,v.instance,_,g))}else v.instance=v(),h.data("$"+g.name+"Controller",v.instance),v.bindingInfo=le(u,f,v.instance,_,g)}for(he(M,function(e,t){var n=e.require;e.bindToController&&!be(n)&&ye(n)&&fe(c[t].instance,J(t,n,h,c))}),he(c,function(e){var t=e.instance;if(Se(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){z(e)}if(Se(t.$onInit))try{t.$onInit()}catch(e){z(e)}Se(t.$doCheck)&&(u.$watch(function(){t.$doCheck()}),t.$doCheck()),Se(t.$onDestroy)&&u.$on("$destroy",function(){t.$onDestroy()})}),r=0,a=S.length;r<a;r++)oe(o=S[r],o.isolateScope?l:t,h,f,o.require&&J(o.directiveName,o.require,h,c),d);var x=t;for(A&&(A.template||null===A.templateUrl)&&(x=l),e&&e(x,n.childNodes,void 0,s),r=E.length-1;0<=r;r--)oe(o=E[r],o.isolateScope?l:t,h,f,o.require&&J(o.directiveName,o.require,h,c),d);he(c,function(e){var t=e.instance;Se(t.$postLink)&&t.$postLink()})}}function J(n,e,i,r){var a;if(xe(e)){var t=e.match(h),s=e.substring(t[0].length),o=t[1]||t[3],l="?"===t[2];if("^^"===o?i=i.parent():a=(a=r&&r[s])&&a.instance,!a){var u="$"+s+"Controller";a=o?i.inheritedData(u):i.data(u)}if(!a&&!l)throw pn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,n)}else if(be(e)){a=[];for(var c=0,d=e.length;c<d;c++)a[c]=J(n,e[c],i,r)}else ye(e)&&(a={},he(e,function(e,t){a[t]=J(n,e,i,r)}));return a||null}function ee(e,t,n){for(var i=0,r=e.length;i<r;i++)e[i]=pe(e[i],{$$isolateScope:t,$$newScope:n})}function L(e,t,n,i,r,a,s){if(t===r)return null;var o=null;if(p.hasOwnProperty(t))for(var l,u=f.get(t+m),c=0,d=u.length;c<d;c++)if(l=u[c],(ve(i)||i>l.priority)&&-1!==l.restrict.indexOf(n)){if(a&&(l=pe(l,{$$start:a,$$end:s})),!l.$$bindings){var h=l.$$bindings=g(l,l.name);ye(h.isolateScope)&&(l.$$isolateBindings=h.isolateScope)}e.push(l),o=l}return o}function O(e){if(p.hasOwnProperty(e))for(var t=f.get(e+m),n=0,i=t.length;n<i;n++)if(t[n].multiElement)return!0;return!1}function te(n,i){var r=i.$attr,a=n.$attr;he(n,function(e,t){"$"!==t.charAt(0)&&(i[t]&&i[t]!==e&&(e.length?e+=("style"===t?";":" ")+i[t]:e=i[t]),n.$set(t,e,!0,r[t]))}),he(i,function(e,t){n.hasOwnProperty(t)||"$"===t.charAt(0)||(n[t]=e,"class"!==t&&"style"!==t&&(a[t]=r[t]))})}function ne(h,f,p,m,g,v,_,y){var x,b,T=[],S=f[0],E=h.shift(),w=pe(E,{templateUrl:null,transclude:null,replace:null,$$originalDirective:E}),M=Se(E.templateUrl)?E.templateUrl(f,p):E.templateUrl,A=E.templateNamespace;return f.empty(),e(M).then(function(e){var n,t,i,r;if(e=W(e),E.replace){if(i=ut(e)?[]:Tn(re(A,Me(e))),n=i[0],1!==i.length||n.nodeType!==Ve)throw pn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",E.name,M);t={$attr:{}},ae(m,f,n);var a=X(n,[],t);ye(E.scope)&&ee(a,!0),h=a.concat(h),te(p,t)}else n=S,f.html(e);for(h.unshift(w),x=I(h,n,p,g,f,E,v,_,y),he(m,function(e,t){e===n&&(m[t]=f[0])}),b=D(f[0].childNodes,g);T.length;){var s=T.shift(),o=T.shift(),l=T.shift(),u=T.shift(),c=f[0];if(!s.$$destroyed){if(o!==S){var d=o.className;y.hasElementTranscludeDirective&&E.replace||(c=pt(n)),ae(l,ce(o),c),C(ce(c),d)}r=x.transcludeOnThisElement?k(s,x.transclude,u):u,x(b,s,c,m,r)}}T=null}).catch(function(e){Te(e)&&z(e)}),function(e,t,n,i,r){var a=r;t.$$destroyed||(T?T.push(t,n,i,a):(x.transcludeOnThisElement&&(a=k(t,x.transclude,r)),x(b,t,n,i,a)))}}function N(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function ie(e,t,n,i){function r(e){return e?" (module: "+e+")":""}if(t)throw pn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,r(t.$$moduleName),n.name,r(n.$$moduleName),e,Ie(i))}function re(e,t){switch(e=V(e||"html")){case"svg":case"math":var n=$.document.createElement("div");return n.innerHTML="<"+e+">"+t+"</"+e+">",n.childNodes[0].childNodes;default:return t}}function U(e,t,a,s,n){var o=function(e,t){if("srcdoc"===t)return r.HTML;var n=Ae(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return r.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return r.RESOURCE_URL}(e,s),i=!n,l=c[s]||n,u=w(a,i,o,l);if(u){if("multiple"===s&&"select"===Ae(e))throw pn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Ie(e));if(d.test(s))throw pn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,n){var i=n.$$observers||(n.$$observers=$e()),r=n[s];r!==a&&(u=r&&w(r,!0,o,l),a=r),u&&(n[s]=u(e),(i[s]||(i[s]=[])).$$inter=!0,(n.$$observers&&n.$$observers[s].$$scope||e).$watch(u,function(e,t){"class"===s&&e!==t?n.$updateClass(e,t):n.$set(s,e)}))}}}})}}function ae(e,t,n){var i,r,a=t[0],s=t.length,o=a.parentNode;if(e)for(i=0,r=e.length;i<r;i++)if(e[i]===a){e[i++]=n;for(var l=i,u=l+s-1,c=e.length;l<c;l++,u++)u<c?e[l]=e[u]:delete e[l];e.length-=s-1,e.context===a&&(e.context=n);break}o&&o.replaceChild(n,a);var d=$.document.createDocumentFragment();for(i=0;i<s;i++)d.appendChild(t[i]);for(ce.hasData(a)&&(ce.data(n,ce.data(a)),ce(a).off("$destroy")),ce.cleanData(d.querySelectorAll("*")),i=1;i<s;i++)delete t[i];t[0]=n,t.length=1}function se(e,t){return fe(function(){return e.apply(null,arguments)},e,t)}function oe(e,t,n,i,r,a){try{e(t,n,i,r,a)}catch(e){z(e,Ie(n))}}function le(h,f,p,e,m){var i,g=[],v={};function _(e,t,n){Se(p.$onChanges)&&!Pe(t,n)&&(o||(h.$$postDigest(l),o=[]),i||(i={},o.push(r)),i[e]&&(n=i[e].previousValue),i[e]=new vn(n,t))}function r(){p.$onChanges(i),i=void 0}return he(e,function(e,n){var t,i,r,a,s,o=e.attrName,l=e.optional;switch(e.mode){case"@":l||j.call(f,o)||(p[n]=f[o]=void 0),s=f.$observe(o,function(e){if(xe(e)||we(e)){var t=p[n];_(n,e,t),p[n]=e}}),f.$$observers[o].$$scope=h,xe(t=f[o])?p[n]=w(t)(h):we(t)&&(p[n]=t),v[n]=new vn(mn,p[n]),g.push(s);break;case"=":if(!j.call(f,o)){if(l)break;f[o]=void 0}if(l&&!f[o])break;i=y(f[o]),a=i.literal?Re:Pe,r=i.assign||function(){throw t=p[n]=i(h),pn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",f[o],o,m.name)},t=p[n]=i(h);var u=function(e){return a(e,p[n])||(a(e,t)?r(h,e=p[n]):p[n]=e),t=e};u.$stateful=!0,s=e.collection?h.$watchCollection(f[o],u):h.$watch(y(f[o],u),null,i.literal),g.push(s);break;case"<":if(!j.call(f,o)){if(l)break;f[o]=void 0}if(l&&!f[o])break;var c=(i=y(f[o])).literal,d=p[n]=i(h);v[n]=new vn(mn,p[n]),s=h.$watch(i,function(e,t){if(t===e){if(t===d||c&&Re(t,d))return;t=d}_(n,e,t),p[n]=e},c),g.push(s);break;case"&":if((i=f.hasOwnProperty(o)?y(f[o]):me)===me&&l)break;p[n]=function(e){return i(h,e)}}}),{initialChanges:v,removeWatches:g.length&&function(){for(var e=0,t=g.length;e<t;++e)g[e]()}}}}]}function vn(e,t){this.previousValue=e,this.currentValue=t}gn.$inject=["$provide","$$sanitizeUriProvider"],vn.prototype.isFirstChange=function(){return this.previousValue===mn};var _n=/^((?:x|data)[:\-_])/i,yn=/[:\-_]+(.)/g;function xn(e){return e.replace(_n,"").replace(yn,nt)}function bn(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var a=0;a<i.length;a++){for(var s=i[a],o=0;o<r.length;o++)if(s===r[o])continue e;n+=(0<n.length?" ":"")+s}return n}function Tn(e){var t=(e=ce(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===ze||n.nodeType===He&&""===n.nodeValue.trim())&&i.call(e,t,1)}return e}var Sn=A("$controller"),En=/^(\S+)(\s+as\s+([\w$]+))?$/;function wn(){var h={},f=!1;this.has=function(e){return h.hasOwnProperty(e)},this.register=function(e,t){Ue(e,"controller"),ye(e)?fe(h,e):h[e]=t},this.allowGlobals=function(){f=!0},this.$get=["$injector","$window",function(u,c){return function(t,n,e,i){var r,a,s,o;if(e=!0===e,i&&xe(i)&&(o=i),xe(t)){if(!(a=t.match(En)))throw Sn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);if(s=a[1],o=o||a[3],!(t=h.hasOwnProperty(s)?h[s]:Fe(n.$scope,s,!0)||(f?Fe(c,s,!0):void 0)))throw Sn("ctrlreg","The controller with the name '{0}' is not registered.",s);Ne(t,s,!0)}if(e){var l=(be(t)?t[t.length-1]:t).prototype;return r=Object.create(l||null),o&&d(n,o,r,s||t.name),fe(function(){var e=u.invoke(t,r,n,s);return e!==r&&(ye(e)||Se(e))&&(r=e,o&&d(n,o,r,s||t.name)),r},{instance:r,identifier:o})}return r=u.instantiate(t,n,s),o&&d(n,o,r,s||t.name),r};function d(e,t,n,i){if(!e||!ye(e.$scope))throw A("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}}]}function Mn(){this.$get=["$window",function(e){return ce(e.document)}]}function An(){this.$get=["$document","$rootScope",function(e,t){var n=e[0],i=n&&n.hidden;function r(){i=n.hidden}return e.on("visibilitychange",r),t.$on("$destroy",function(){e.off("visibilitychange",r)}),function(){return i}}]}function Cn(){this.$get=["$log",function(n){return function(e,t){n.error.apply(n,arguments)}}]}var Pn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof ce&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Rn="application/json",Dn={"Content-Type":Rn+";charset=utf-8"},kn=/^\[|^\{(?!\{)/,In={"[":/]$/,"{":/}$/},Ln=/^\)]\}',?\n/,On=A("$http");function Nn(e){return ye(e)?E(e)?e.toISOString():q(e):e}function Un(){this.$get=function(){return function(e){if(!e)return"";var n=[];return p(e,function(e,t){null===e||ve(e)||(be(e)?he(e,function(e){n.push(te(t)+"="+te(Nn(e)))}):n.push(te(t)+"="+te(Nn(e))))}),n.join("&")}}}function Fn(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function n(e,i,r){if(null===e||ve(e))return;be(e)?he(e,function(e,t){n(e,i+"["+(ye(e)?t:"")+"]")}):ye(e)&&!E(e)?p(e,function(e,t){n(e,i+(r?"":"[")+t+(r?"":"]"))}):t.push(te(i)+"="+te(Nn(e)))}(e,"",!0),t.join("&")}}}function Bn(t,e){if(xe(t)){var n=t.replace(Ln,"").trim();if(n){var i=e("Content-Type");if(i&&0===i.indexOf(Rn)||(a=(r=n).match(kn))&&In[a[0]].test(r))try{t=W(n)}catch(e){throw On("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var r,a;return t}function $n(e){var t,n=$e();function i(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}return xe(e)?he(e.split("\n"),function(e){t=e.indexOf(":"),i(V(Me(e.substr(0,t))),Me(e.substr(t+1)))}):ye(e)&&he(e,function(e,t){i(V(t),Me(e))}),n}function jn(n){var i;return function(e){if(i||(i=$n(n)),e){var t=i[V(e)];return void 0===t&&(t=null),t}return i}}function Vn(t,n,i,e){return Se(e)?e(t,n,i):(he(e,function(e){t=e(t,n,i)}),t)}function Hn(e){return 200<=e&&e<300}function zn(){var S=this.defaults={transformResponse:[Bn],transformRequest:[function(e){return ye(e)&&(i=e,"[object File]"!==de.call(i))&&(n=e,"[object Blob]"!==de.call(n))&&(t=e,"[object FormData]"!==de.call(t))?q(e):e;var t,n,i}],headers:{common:{Accept:"application/json, text/plain, */*"},post:We(Dn),put:We(Dn),patch:We(Dn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},E=!1;this.useApplyAsync=function(e){return _e(e)?(E=!!e,this):E};var t=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,g,v,e,_,y,l,x){var b=e("$http");S.paramSerializer=xe(S.paramSerializer)?l.get(S.paramSerializer):S.paramSerializer;var u=[];function T(e){if(!ye(e))throw A("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);if(!xe(x.valueOf(e.url)))throw A("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",e.url);var n=fe({method:"get",transformRequest:S.transformRequest,transformResponse:S.transformResponse,paramSerializer:S.paramSerializer,jsonpCallbackParam:S.jsonpCallbackParam},e);n.headers=function(e){var t,n,i,r=S.headers,a=fe({},e.headers);r=fe({},r.common,r[V(e.method)]);e:for(t in r){for(i in n=V(t),a)if(V(i)===n)continue e;a[t]=r[t]}return s=a,o=We(e),u={},he(s,function(e,t){Se(e)?null!=(l=e(o))&&(u[t]=l):u[t]=e}),u;var s,o,l,u}(e),n.method=c(n.method),n.paramSerializer=xe(n.paramSerializer)?l.get(n.paramSerializer):n.paramSerializer,o.$$incOutstandingRequestCount();var t=[],i=[],r=y.resolve(n);return he(u,function(e){(e.request||e.requestError)&&t.unshift(e.request,e.requestError),(e.response||e.responseError)&&i.push(e.response,e.responseError)}),r=(r=a(r=(r=a(r,t)).then(function(e){var n=e.headers,t=Vn(e.data,jn(n),void 0,e.transformRequest);ve(t)&&he(n,function(e,t){"content-type"===V(t)&&delete n[t]});ve(e.withCredentials)&&!ve(S.withCredentials)&&(e.withCredentials=S.withCredentials);return function(r,e){var a,t,s=y.defer(),n=s.promise,i=r.headers,o="jsonp"===V(r.method),l=r.url;o?l=x.getTrustedResourceUrl(l):xe(l)||(l=x.valueOf(l));u=l,c=r.paramSerializer(r.params),0<c.length&&(u+=(-1===u.indexOf("?")?"?":"&")+c),l=u,o&&(l=function(e,t){if(/[&?][^=]+=JSON_CALLBACK/.test(e))throw On("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(new RegExp("[&?]"+t+"=").test(e))throw On("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e);return e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}(l,r.jsonpCallbackParam));var u,c;T.pendingRequests.push(r),n.then(m,m),!r.cache&&!S.cache||!1===r.cache||"GET"!==r.method&&"JSONP"!==r.method||(a=ye(r.cache)?r.cache:ye(S.cache)?S.cache:b);a&&(_e(t=a.get(l))?D(t)?t.then(p,p):be(t)?f(t[1],t[0],We(t[2]),t[3]):f(t,200,{},"OK"):a.put(l,n));if(ve(t)){var d=sr(r.url)?v()[r.xsrfCookieName||S.xsrfCookieName]:void 0;d&&(i[r.xsrfHeaderName||S.xsrfHeaderName]=d),g(r.method,l,e,function(e,t,n,i){a&&(Hn(e)?a.put(l,[e,t,$n(n),i]):a.remove(l));function r(){f(t,e,n,i)}E?_.$applyAsync(r):(r(),_.$$phase||_.$apply())},i,r.timeout,r.withCredentials,r.responseType,h(r.eventHandlers),h(r.uploadEventHandlers))}return n;function h(e){if(e){var t={};return he(e,function(n,e){t[e]=function(e){function t(){n(e)}E?_.$applyAsync(t):_.$$phase?t():_.$apply(t)}}),t}}function f(e,t,n,i){(Hn(t=-1<=t?t:0)?s.resolve:s.reject)({data:e,status:t,headers:jn(n),config:r,statusText:i})}function p(e){f(e.data,e.status,We(e.headers()),e.statusText)}function m(){var e=T.pendingRequests.indexOf(r);-1!==e&&T.pendingRequests.splice(e,1)}}(e,t).then(s,s)}),i)).finally(function(){o.$$completeOutstandingRequest(me)});function a(e,t){for(var n=0,i=t.length;n<i;){var r=t[n++],a=t[n++];e=e.then(r,a)}return t.length=0,e}function s(e){var t=fe({},e);return t.data=Vn(e.data,e.headers,e.status,n.transformResponse),Hn(e.status)?t:y.reject(t)}}return he(t,function(e){u.unshift(xe(e)?l.get(e):l.invoke(e))}),T.pendingRequests=[],function(e){he(arguments,function(n){T[n]=function(e,t){return T(fe({},t||{},{method:n,url:e}))}})}("get","delete","head","jsonp"),function(e){he(arguments,function(i){T[i]=function(e,t,n){return T(fe({},n||{},{method:i,url:e,data:t}))}})}("post","put","patch"),T.defaults=S,T}]}function Gn(){this.$get=function(){return function(){return new $.XMLHttpRequest}}}function qn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,i){return _=i,y=(v=e).defer,x=t,b=n[0],function(e,i,t,r,n,a,s,o,l,u){if(i=i||v.url(),"jsonp"===V(e))var c=x.createCallback(i),d=function(e,i,r){e=e.replace("JSON_CALLBACK",i);var a=b.createElement("script"),s=null;return a.type="text/javascript",a.src=e,a.async=!0,s=function(e){a.removeEventListener("load",s),a.removeEventListener("error",s),b.body.removeChild(a),a=null;var t=-1,n="unknown";e&&("load"!==e.type||x.wasCalled(i)||(e={type:"error"}),n=e.type,t="error"===e.type?404:200),r&&r(t,n)},a.addEventListener("load",s),a.addEventListener("error",s),b.body.appendChild(a),s}(i,c,function(e,t){var n=200===e&&x.getResponse(c);g(r,e,n,"",t),x.removeCallback(c)});else{var h=_(e,i);h.open(e,i,!0),he(n,function(e,t){_e(e)&&h.setRequestHeader(t,e)}),h.onload=function(){var e=h.statusText||"",t="response"in h?h.response:h.responseText,n=1223===h.status?204:h.status;0===n&&(n=t?200:"file"===ar(i).protocol?404:0),g(r,n,t,h.getAllResponseHeaders(),e)};var f=function(){g(r,-1,null,null,"")};if(h.onerror=f,h.onabort=f,h.ontimeout=f,he(l,function(e,t){h.addEventListener(t,e)}),he(u,function(e,t){h.upload.addEventListener(t,e)}),s&&(h.withCredentials=!0),o)try{h.responseType=o}catch(e){if("json"!==o)throw e}h.send(ve(t)?null:t)}if(0<a)var p=y(m,a);else D(a)&&a.then(m);function m(){d&&d(),h&&h.abort()}function g(e,t,n,i,r){_e(p)&&y.cancel(p),d=h=null,e(t,n,i,r)}};var v,_,y,x,b}]}var Wn=y.$interpolateMinErr=A("$interpolate");function Yn(){var E="{{",w="}}";this.startSymbol=function(e){return e?(E=e,this):E},this.endSymbol=function(e){return e?(w=e,this):w},this.$get=["$parse","$exceptionHandler","$sce",function(v,_,y){var x=E.length,b=w.length,t=new RegExp(E.replace(/./g,e),"g"),n=new RegExp(w.replace(/./g,e),"g");function e(e){return"\\\\\\"+e}function T(e){return e.replace(t,E).replace(n,w)}function S(e,t,n,i){var r=e.$watch(function(e){return r(),i(e)},t,n);return r}function i(r,e,t,i){if(!r.length||-1===r.indexOf(E)){var n;if(!e)(n=M(T(r))).exp=r,n.expressions=[],n.$$watchDelegate=S;return n}i=!!i;for(var a,s,o,l=0,u=[],c=[],d=r.length,h=[],f=[];l<d;){if(-1===(a=r.indexOf(E,l))||-1===(s=r.indexOf(w,a+x))){l!==d&&h.push(T(r.substring(l)));break}l!==a&&h.push(T(r.substring(l,a))),o=r.substring(a+x,s),u.push(o),c.push(v(o,g)),l=s+b,f.push(h.length),h.push("")}if(t&&1<h.length&&Wn.throwNoconcat(r),!e||u.length){var p=function(e){for(var t=0,n=u.length;t<n;t++){if(i&&ve(e[t]))return;h[f[t]]=e[t]}return h.join("")},m=function(e){return t?y.getTrusted(t,e):y.valueOf(e)};return fe(function(e){var t=0,n=u.length,i=new Array(n);try{for(;t<n;t++)i[t]=c[t](e);return p(i)}catch(e){_(Wn.interr(r,e))}},{exp:r,expressions:u,$$watchDelegate:function(i,r){var a;return i.$watchGroup(c,function(e,t){var n=p(e);Se(r)&&r.call(this,n,e!==t?a:n,i),a=n})}})}function g(e){try{return e=m(e),i&&!_e(e)?e:je(e)}catch(e){_(Wn.interr(r,e))}}}return i.startSymbol=function(){return E},i.endSymbol=function(){return w},i}]}function Xn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(f,p,m,g,v){var _={};function e(e,t,n,i){var r=4<arguments.length,a=r?De(arguments,4):[],s=p.setInterval,o=p.clearInterval,l=0,u=_e(i)&&!i,c=(u?g:m).defer(),d=c.promise;return n=_e(n)?n:0,d.$$intervalId=s(function(){u?v.defer(h):f.$evalAsync(h),c.notify(l++),0<n&&n<=l&&(c.resolve(l),o(d.$$intervalId),delete _[d.$$intervalId]),u||f.$apply()},t),_[d.$$intervalId]=c,d;function h(){r?e.apply(null,a):e(l)}}return e.cancel=function(e){return!!(e&&e.$$intervalId in _)&&(ji(_[e.$$intervalId].promise),_[e.$$intervalId].reject("canceled"),p.clearInterval(e.$$intervalId),delete _[e.$$intervalId],!0)},e}]}Wn.throwNoconcat=function(e){throw Wn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Wn.interr=function(e,t){return Wn("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Kn=function(){this.$get=function(){var a=y.callbacks,s={};return{createCallback:function(e){var t,n="_"+(a.$$counter++).toString(36),i="angular.callbacks."+n,r=((t=function(e){t.data=e,t.called=!0}).id=n,t);return s[i]=a[n]=r,i},wasCalled:function(e){return s[e].called},getResponse:function(e){return s[e].data},removeCallback:function(e){var t=s[e];delete a[t.id],delete s[e]}}}},Qn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Zn={http:80,https:443,ftp:21},Jn=A("$location");function ei(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ee(t[n]);return t.join("/")}function ti(e,t){var n=ar(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=x(n.port)||Zn[n.protocol]||null}var ni=/^\s*[\\/]{2,}/;function ii(e,t){if(ni.test(e))throw Jn("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var i=ar(e);t.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=Z(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function ri(e,t){return e.slice(0,t.length)===t}function ai(e,t){if(ri(t,e))return t.substr(e.length)}function si(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function oi(e){return e.replace(/(#.+)|#$/,"$1")}function li(a,s,o){this.$$html5=!0,o=o||"",ti(a,this),this.$$parse=function(e){var t=ai(s,e);if(!xe(t))throw Jn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,s);ii(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=J(this.$$search),t=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=ei(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=s+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(_e(n=ai(a,e))?(i=n,r=o&&_e(n=ai(o,n))?s+(ai("/",n)||n):a+i):_e(n=ai(s,e))?r=s+n:s===e+"/"&&(r=s),r&&this.$$parse(r),!!r);var n,i,r}}function ui(i,r,a){ti(i,this),this.$$parse=function(e){var t,n=ai(i,e)||ai(r,e);ve(n)||"#"!==n.charAt(0)?this.$$html5?t=n:(t="",ve(n)&&(i=e,this.replace())):ve(t=ai(a,n))&&(t=n),ii(t,this),this.$$path=function(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;ri(t,n)&&(t=t.replace(n,""));if(r.exec(t))return e;return(i=r.exec(e))?i[1]:e}(this.$$path,t,i),this.$$compose()},this.$$compose=function(){var e=J(this.$$search),t=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=ei(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+(this.$$url?a+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,t){return si(i)===si(e)&&(this.$$parse(e),!0)}}function ci(r,a,s){this.$$html5=!0,ui.apply(this,arguments),this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(r===si(e)?n=e:(i=ai(a,e))?n=r+s+i:a===e+"/"&&(n=a),n&&this.$$parse(n),!!n);var n,i},this.$$compose=function(){var e=J(this.$$search),t=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=ei(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+s+this.$$url,this.$$urlUpdatedByLocation=!0}}var di={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:hi("$$absUrl"),url:function(e){if(ve(e))return this.$$url;var t=Qn.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:hi("$$protocol"),host:hi("$$host"),port:hi("$$port"),path:fi("$$path",function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(n,e){switch(arguments.length){case 0:return this.$$search;case 1:if(xe(n)||S(n))n=n.toString(),this.$$search=Z(n);else{if(!ye(n))throw Jn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");he(n=U(n,{}),function(e,t){null==e&&delete n[t]}),this.$$search=n}break;default:ve(e)||null===e?delete this.$$search[n]:this.$$search[n]=e}return this.$$compose(),this},hash:fi("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};function hi(e){return function(){return this[e]}}function fi(t,n){return function(e){return ve(e)?this[t]:(this[t]=n(e),this.$$compose(),this)}}function pi(){var v="!",_={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return _e(e)?(v=e,this):v},this.html5Mode=function(e){return we(e)?(_.enabled=e,this):ye(e)?(we(e.enabled)&&(_.enabled=e.enabled),we(e.requireBase)&&(_.requireBase=e.requireBase),(we(e.rewriteLinks)||xe(e.rewriteLinks))&&(_.rewriteLinks=e.rewriteLinks),this):_},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(s,o,t,a,l){var u,e,n,i,r=o.baseHref(),c=o.url();if(_.enabled){if(!r&&_.requireBase)throw Jn("nobase","$location in HTML5 mode requires a <base> tag to be present!");n=(i=c).substring(0,i.indexOf("/",i.indexOf("//")+2))+(r||"/"),e=t.history?li:ci}else n=si(c),e=ui;var d,h=(d=n).substr(0,si(d).lastIndexOf("/")+1);(u=new e(n,h,"#"+v)).$$parseLinkUrl(c,c),u.$$state=o.state();var f=/^\s*(javascript|mailto):/i;function p(e,t,n){var i=u.url(),r=u.$$state;try{o.url(e,t,n),u.$$state=o.state()}catch(e){throw u.url(i),u.$$state=r,e}}a.on("click",function(e){var t=_.rewriteLinks;if(t&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var n=ce(e.target);"a"!==Ae(n[0]);)if(n[0]===a[0]||!(n=n.parent())[0])return;if(!xe(t)||!ve(n.attr(t))){var i=n.prop("href"),r=n.attr("href")||n.attr("xlink:href");ye(i)&&"[object SVGAnimatedString]"===i.toString()&&(i=ar(i.animVal).href),f.test(i)||!i||n.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(i,r)&&(e.preventDefault(),u.absUrl()!==o.url()&&(s.$apply(),l.angular["ff-684208-preventDefault"]=!0))}}}),oi(u.absUrl())!==oi(c)&&o.url(u.absUrl(),!0);var m=!0;return o.onUrlChange(function(i,r){ri(i,h)?(s.$evalAsync(function(){var e,t=u.absUrl(),n=u.$$state;i=oi(i),u.$$parse(i),u.$$state=r,e=s.$broadcast("$locationChangeStart",i,t,r,n).defaultPrevented,u.absUrl()===i&&(e?(u.$$parse(t),p(t,!1,u.$$state=n)):(m=!1,g(t,n)))}),s.$$phase||s.$digest()):l.location.href=i}),s.$watch(function(){if(m||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var n=oi(o.url()),e=oi(u.absUrl()),i=o.state(),r=u.$$replace,a=n!==e||u.$$html5&&t.history&&i!==u.$$state;(m||a)&&(m=!1,s.$evalAsync(function(){var e=u.absUrl(),t=s.$broadcast("$locationChangeStart",e,n,u.$$state,i).defaultPrevented;u.absUrl()===e&&(t?(u.$$parse(n),u.$$state=i):(a&&p(e,r,i===u.$$state?null:u.$$state),g(n,i)))}))}u.$$replace=!1}),u;function g(e,t){s.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}}]}function mi(){var i=!0,a=this;this.debugEnabled=function(e){return _e(e)?(i=e,this):i},this.$get=["$window",function(n){var e,r=H||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:t("log"),info:t("info"),warn:t("warn"),error:t("error"),debug:(e=t("debug"),function(){i&&e.apply(a,arguments)})};function t(e){var t=n.console||{},i=t[e]||t.log||me;return function(){var n=[];return he(arguments,function(e){var t;n.push((Te(t=e)&&(t.stack&&r?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t))}),Function.prototype.apply.call(i,t,n)}}}]}he([ci,ui,li],function(t){t.prototype=Object.create(di),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==li||!this.$$html5)throw Jn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=ve(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var gi=A("$parse"),vi={}.constructor.prototype.valueOf;function _i(e){return e+""}var yi=$e();he("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){yi[e]=!0});var xi={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},bi=function(e){this.options=e};bi.prototype={constructor:bi,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),r=yi[t],a=yi[n],s=yi[i];if(r||a||s){var o=s?i:a?n:t;this.tokens.push({index:this.index,text:o,operator:!0}),this.index+=o.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),i=t.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=i&&i<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=_e(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw gi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=V(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(i+=a,r){if("u"===a){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{n+=xi[a]||a}r=!1}else if("\\"===a)r=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var Ti=function(e,t){this.lexer=e,this.options=t};function Si(e,t){return void 0!==e?e:t}function Ei(e,t){return void 0===e?t:void 0===t?e:e+t}Ti.Program="Program",Ti.ExpressionStatement="ExpressionStatement",Ti.AssignmentExpression="AssignmentExpression",Ti.ConditionalExpression="ConditionalExpression",Ti.LogicalExpression="LogicalExpression",Ti.BinaryExpression="BinaryExpression",Ti.UnaryExpression="UnaryExpression",Ti.CallExpression="CallExpression",Ti.MemberExpression="MemberExpression",Ti.Identifier="Identifier",Ti.Literal="Literal",Ti.ArrayExpression="ArrayExpression",Ti.Property="Property",Ti.ObjectExpression="ObjectExpression",Ti.ThisExpression="ThisExpression",Ti.LocalsExpression="LocalsExpression",Ti.NGValueParameter="NGValueParameter",Ti.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Ti.Program,body:e}},expressionStatement:function(){return{type:Ti.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!Pi(e))throw gi("lval","Trying to assign a value to a non l-value");e={type:Ti.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Ti.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Ti.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Ti.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Ti.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Ti.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Ti.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Ti.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ti.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=U(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Ti.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:Ti.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Ti.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Ti.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Ti.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)for(;e.push(this.filterChain()),this.expect(","););return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ti.Identifier,name:e.text}},constant:function(){return{type:Ti.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ti.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Ti.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Ti.ObjectExpression,properties:t}},throwError:function(e,t){throw gi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw gi("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw gi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){var a=this.tokens[e],s=a.text;if(s===t||s===n||s===i||s===r||!t&&!n&&!i&&!r)return a}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:Ti.ThisExpression},$locals:{type:Ti.LocalsExpression}}};var wi=1,Mi=2;function Ai(e,t,n){var i,r,a,s,o,l=e.isPure=function(e,t){switch(e.type){case Ti.MemberExpression:if(e.computed)return!1;break;case Ti.UnaryExpression:return wi;case Ti.BinaryExpression:return"+"!==e.operator&&wi;case Ti.CallExpression:return!1}return void 0===t?Mi:t}(e,n);switch(e.type){case Ti.Program:i=!0,he(e.body,function(e){Ai(e.expression,t,l),i=i&&e.expression.constant}),e.constant=i;break;case Ti.Literal:e.constant=!0,e.toWatch=[];break;case Ti.UnaryExpression:Ai(e.argument,t,l),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ti.BinaryExpression:Ai(e.left,t,l),Ai(e.right,t,l),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ti.LogicalExpression:Ai(e.left,t,l),Ai(e.right,t,l),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ti.ConditionalExpression:Ai(e.test,t,l),Ai(e.alternate,t,l),Ai(e.consequent,t,l),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ti.Identifier:e.constant=!1,e.toWatch=[e];break;case Ti.MemberExpression:Ai(e.object,t,l),e.computed&&Ai(e.property,t,l),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Ti.CallExpression:a=!!e.filter&&(s=t,o=e.callee.name,!s(o).$stateful),i=a,r=[],he(e.arguments,function(e){Ai(e,t,l),i=i&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=i,e.toWatch=a?r:[e];break;case Ti.AssignmentExpression:Ai(e.left,t,l),Ai(e.right,t,l),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ti.ArrayExpression:i=!0,r=[],he(e.elements,function(e){Ai(e,t,l),i=i&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=i,e.toWatch=r;break;case Ti.ObjectExpression:i=!0,r=[],he(e.properties,function(e){Ai(e.value,t,l),i=i&&e.value.constant&&!e.computed,e.value.constant||r.push.apply(r,e.value.toWatch),e.computed&&(Ai(e.key,t,l),e.key.constant||r.push.apply(r,e.key.toWatch))}),e.constant=i,e.toWatch=r;break;case Ti.ThisExpression:case Ti.LocalsExpression:e.constant=!1,e.toWatch=[]}}function Ci(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function Pi(e){return e.type===Ti.Identifier||e.type===Ti.MemberExpression}function Ri(e){if(1===e.body.length&&Pi(e.body[0].expression))return{type:Ti.AssignmentExpression,left:e.body[0].expression,right:{type:Ti.NGValueParameter},operator:"="}}function Di(e){this.$filter=e}function ki(e){this.$filter=e}function Ii(e,t,n){this.ast=new Ti(e,n),this.astCompiler=n.csp?new ki(t):new Di(t)}function Li(e){return Se(e.valueOf)?e.valueOf():vi.call(e)}function Oi(){var n,i,m=$e(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){r[e]=t},this.setIdentifierFns=function(e,t){return n=e,i=t,this},this.$get=["$filter",function(o){var l={csp:F().noUnsafeEval,literals:U(r),isIdentifierStart:Se(n)&&n,isIdentifierContinue:Se(i)&&i};return function(e,t){var n,i,r;switch(typeof e){case"string":if(e=e.trim(),!(n=m[r=e])){":"===e.charAt(0)&&":"===e.charAt(1)&&(i=!0,e=e.substring(2));var a=new bi(l),s=new Ii(a,o,l);(n=s.parse(e)).constant?n.$$watchDelegate=f:i?n.$$watchDelegate=n.literal?d:c:n.inputs&&(n.$$watchDelegate=u),m[r]=n}return p(n,t);case"function":return p(e,t);default:return p(me,t)}};function h(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=Li(e))&&!n)&&(e===t||e!=e&&t!=t)}function u(e,t,n,a,i){var s,o=a.inputs;if(1===o.length){var r=h;return o=o[0],e.$watch(function(e){var t=o(e);return h(t,r,o.isPure)||(s=a(e,void 0,void 0,[t]),r=t&&Li(t)),s},t,n,i)}for(var l=[],u=[],c=0,d=o.length;c<d;c++)l[c]=h,u[c]=null;return e.$watch(function(e){for(var t=!1,n=0,i=o.length;n<i;n++){var r=o[n](e);(t||(t=!h(r,l[n],o[n].isPure)))&&(u[n]=r,l[n]=r&&Li(r))}return t&&(s=a(e,void 0,void 0,u)),s},t,n,i)}function c(e,i,t,n,r){var a,s;return a=n.inputs?u(e,o,t,n,r):e.$watch(function(e){return n(e)},o,t);function o(e,t,n){s=e,Se(i)&&i(e,t,n),_e(e)&&n.$$postDigest(function(){_e(s)&&a()})}}function d(e,i,t,n){var r,a;return r=e.$watch(function(e){return n(e)},function(e,t,n){a=e,Se(i)&&i(e,t,n),s(e)&&n.$$postDigest(function(){s(a)&&r()})},t);function s(e){var t=!0;return he(e,function(e){_e(e)||(t=!1)}),t}}function f(e,t,n,i){var r=e.$watch(function(e){return r(),i(e)},t,n);return r}function p(s,o){if(!o)return s;var e=s.$$watchDelegate,a=!1,t=e!==d&&e!==c?function(e,t,n,i){var r=a&&i?i[0]:s(e,t,n,i);return o(r,e,t)}:function(e,t,n,i){var r=s(e,t,n,i),a=o(r,e,t);return _e(r)?a:r};return a=!s.inputs,e&&e!==u?(t.$$watchDelegate=e,t.inputs=s.inputs):o.$stateful||(t.$$watchDelegate=u,t.inputs=s.inputs?s.inputs:[s]),t.inputs&&(t.inputs=t.inputs.map(function(t){return t.isPure===Mi?function(e){return t(e)}:t})),t}}]}function Ni(){var n=!0;this.$get=["$rootScope","$exceptionHandler",function(t,e){return Fi(function(e){t.$evalAsync(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return _e(e)?(n=e,this):n}}function Ui(){var n=!0;this.$get=["$browser","$exceptionHandler",function(t,e){return Fi(function(e){t.defer(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return _e(e)?(n=e,this):n}}function Fi(s,o,l){var n=A("$q",TypeError),u=0,i=[];function r(){return new e}function e(){var t=this.promise=new a;this.resolve=function(e){h(t,e)},this.reject=function(e){f(t,e)},this.notify=function(e){m(t,e)}}function a(){this.$$state={status:0}}function c(){for(;!u&&i.length;){var e=i.shift();if(!Bi(e)){$i(e);var t="Possibly unhandled rejection: "+Ye(e.value);Te(e.value)?o(e.value,t):o(t)}}}function d(e){!l||e.pending||2!==e.status||Bi(e)||(0===u&&0===i.length&&s(c),i.push(e)),!e.processScheduled&&e.pending&&(e.processScheduled=!0,++u,s(function(){!function(e){var t,n,i;i=e.pending,e.processScheduled=!1,e.pending=void 0;try{for(var r=0,a=i.length;r<a;++r){$i(e),n=i[r][0],t=i[r][e.status];try{Se(t)?h(n,t(e.value)):1===e.status?h(n,e.value):f(n,e.value)}catch(e){f(n,e)}}}finally{--u,l&&0===u&&s(c)}}(e)}))}function h(e,t){e.$$state.status||(t===e?p(e,n("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):function t(n,e){var i;var r=!1;try{(ye(e)||Se(e))&&(i=e.then),Se(i)?(n.$$state.status=-1,i.call(e,a,s,o)):(n.$$state.value=e,n.$$state.status=1,d(n.$$state))}catch(e){s(e)}function a(e){r||(r=!0,t(n,e))}function s(e){r||(r=!0,p(n,e))}function o(e){m(n,e)}}(e,t))}function f(e,t){e.$$state.status||p(e,t)}function p(e,t){e.$$state.value=t,e.$$state.status=2,d(e.$$state)}function m(e,r){var a=e.$$state.pending;e.$$state.status<=0&&a&&a.length&&s(function(){for(var e,t,n=0,i=a.length;n<i;n++){t=a[n][0],e=a[n][3];try{m(t,Se(e)?e(r):r)}catch(e){o(e)}}})}function g(e){var t=new a;return f(t,e),t}function v(e,t,n){var i=null;try{Se(n)&&(i=n())}catch(e){return g(e)}return D(i)?i.then(function(){return t(e)},g):t(e)}function _(e,t,n,i){var r=new a;return h(r,e),r.then(t,n,i)}fe(a.prototype,{then:function(e,t,n){if(ve(e)&&ve(t)&&ve(n))return this;var i=new a;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),0<this.$$state.status&&d(this.$$state),i},catch:function(e){return this.then(null,e)},finally:function(t,e){return this.then(function(e){return v(e,y,t)},function(e){return v(e,g,t)},e)}});var y=_;function t(e){if(!Se(e))throw n("norslvr","Expected resolverFn, got '{0}'",e);var t=new a;return e(function(e){h(t,e)},function(e){f(t,e)}),t}return t.prototype=a.prototype,t.defer=r,t.reject=g,t.when=_,t.resolve=y,t.all=function(e){var n=new a,i=0,r=be(e)?[]:{};return he(e,function(e,t){i++,_(e).then(function(e){r[t]=e,--i||h(n,r)},function(e){f(n,e)})}),0===i&&h(n,r),n},t.race=function(e){var t=r();return he(e,function(e){_(e).then(t.resolve,t.reject)}),t.promise},t}function Bi(e){return!!e.pur}function $i(e){e.pur=!0}function ji(e){$i(e.$$state)}function Vi(){this.$get=["$window","$timeout",function(e,n){var i=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,t=!!i,a=t?function(e){var t=i(e);return function(){r(t)}}:function(e){var t=n(e,16.66,!1);return function(){n.cancel(t)}};return a.supported=t,a}]}function Hi(){var S=10,E=A("$rootScope"),w=null,M=null;this.digestTtl=function(e){return arguments.length&&(S=e),S},this.$get=["$exceptionHandler","$parse","$browser",function(h,p,f){function i(e){e.currentScope.$$destroyed=!0}function r(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}r.prototype={constructor:r,$new:function(e,t){var n;return t=t||this,e?(n=new r).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!==this)&&n.$on("$destroy",i),n},$watch:function(e,t,n,i){var r=p(e);if(r.$$watchDelegate)return r.$$watchDelegate(this,t,n,r,e);var a=this,s=a.$$watchers,o={fn:t,last:b,get:r,exp:i||e,eq:!!n};return w=null,Se(t)||(o.fn=me),s||((s=a.$$watchers=[]).$$digestWatchIndex=-1),s.unshift(o),s.$$digestWatchIndex++,l(this,1),function(){var e=Ce(s,o);0<=e&&(l(a,-1),e<s.$$digestWatchIndex&&s.$$digestWatchIndex--),w=null}},$watchGroup:function(e,i){var r=new Array(e.length),a=new Array(e.length),s=[],o=this,l=!1,t=!0;if(!e.length){var n=!0;return o.$evalAsync(function(){n&&i(a,a,o)}),function(){n=!1}}if(1===e.length)return this.$watch(e[0],function(e,t,n){a[0]=e,r[0]=t,i(a,e===t?a:r,n)});function u(){l=!1,t?(t=!1,i(a,a,o)):i(a,r,o)}return he(e,function(e,n){var t=o.$watch(e,function(e,t){a[n]=e,r[n]=t,l||(l=!0,o.$evalAsync(u))});s.push(t)}),function(){for(;s.length;)s.shift()()}},$watchCollection:function(e,n){f.$stateful=!0;var s,o,i,r=this,a=1<n.length,l=0,t=p(e,f),u=[],c={},d=!0,h=0;function f(e){var t,n,i,r;if(!ve(s=e)){if(ye(s))if(L(s)){o!==u&&(h=(o=u).length=0,l++),t=s.length,h!==t&&(l++,o.length=h=t);for(var a=0;a<t;a++)r=o[a],i=s[a],r!=r&&i!=i||r===i||(l++,o[a]=i)}else{for(n in o!==c&&(o=c={},h=0,l++),t=0,s)j.call(s,n)&&(t++,i=s[n],r=o[n],n in o?r!=r&&i!=i||r===i||(l++,o[n]=i):(h++,o[n]=i,l++));if(t<h)for(n in l++,o)j.call(s,n)||(h--,delete o[n])}else o!==s&&(o=s,l++);return l}}return this.$watch(t,function(){if(d?(d=!1,n(s,s,r)):n(s,i,r),a)if(ye(s))if(L(s)){i=new Array(s.length);for(var e=0;e<s.length;e++)i[e]=s[e]}else for(var t in i={},s)j.call(s,t)&&(i[t]=s[t]);else i=s})},$digest:function(){var e,t,n,i,r,a,s,o,l,u=S,c=[];y("$digest"),f.$$checkUrlChange(),this===m&&null!==M&&(f.defer.cancel(M),T()),w=null;do{r=!1,s=this;for(var d=0;d<g.length;d++){try{(0,(l=g[d]).fn)(l.scope,l.locals)}catch(e){h(e)}w=null}g.length=0;e:do{if(i=s.$$watchers)for(i.$$digestWatchIndex=i.length;i.$$digestWatchIndex--;)try{if(e=i[i.$$digestWatchIndex])if((t=(0,e.get)(s))===(n=e.last)||(e.eq?Re(t,n):P(t)&&P(n))){if(e===w){r=!1;break e}}else r=!0,(w=e).last=e.eq?U(t,null):t,(0,e.fn)(t,n===b?t:n,s),u<5&&(c[o=4-u]||(c[o]=[]),c[o].push({msg:Se(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:t,oldVal:n}))}catch(e){h(e)}if(!(a=s.$$watchersCount&&s.$$childHead||s!==this&&s.$$nextSibling))for(;s!==this&&!(a=s.$$nextSibling);)s=s.$parent}while(s=a);if((r||g.length)&&!u--)throw x(),E("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",S,c)}while(r||g.length);for(x();_<v.length;)try{v[_++]()}catch(e){h(e)}v.length=_=0,f.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;for(var t in this.$broadcast("$destroy"),this.$$destroyed=!0,this===m&&f.$$applicationDestroyed(),l(this,-this.$$watchersCount),this.$$listenerCount)a(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=me,this.$on=this.$watch=this.$watchGroup=function(){return me},this.$$listeners={},this.$$nextSibling=null,function e(t){9===H&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return p(e)(this,t)},$evalAsync:function(e,t){m.$$phase||g.length||f.defer(function(){g.length&&m.$digest()}),g.push({scope:this,fn:p(e),locals:t})},$$postDigest:function(e){v.push(e)},$apply:function(e){try{y("$apply");try{return this.$eval(e)}finally{x()}}catch(e){h(e)}finally{try{m.$digest()}catch(e){throw h(e),e}}},$applyAsync:function(e){var t=this;e&&n.push(function(){t.$eval(e)}),e=p(e),null===M&&(M=f.defer(function(){m.$apply(T)}))},$on:function(t,n){var i=this.$$listeners[t];i||(this.$$listeners[t]=i=[]),i.push(n);for(var e=this;e.$$listenerCount[t]||(e.$$listenerCount[t]=0),e.$$listenerCount[t]++,e=e.$parent;);var r=this;return function(){var e=i.indexOf(n);-1!==e&&(i[e]=null,a(r,1,t))}},$emit:function(e,t){var n,i,r,a=[],s=this,o=!1,l={name:e,targetScope:s,stopPropagation:function(){o=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=z([l],arguments,1);do{for(n=s.$$listeners[e]||a,l.currentScope=s,i=0,r=n.length;i<r;i++)if(n[i])try{n[i].apply(null,u)}catch(e){h(e)}else n.splice(i,1),i--,r--;if(o)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(e,t){var n=this,i=this,r={name:e,targetScope:this,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[e])return r;for(var a,s,o,l=z([r],arguments,1);n=i;){for(s=0,o=(a=(r.currentScope=n).$$listeners[e]||[]).length;s<o;s++)if(a[s])try{a[s].apply(null,l)}catch(e){h(e)}else a.splice(s,1),s--,o--;if(!(i=n.$$listenerCount[e]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return r.currentScope=null,r}};var m=new r,g=m.$$asyncQueue=[],v=m.$$postDigestQueue=[],n=m.$$applyAsyncQueue=[],_=0;return m;function y(e){if(m.$$phase)throw E("inprog","{0} already in progress",m.$$phase);m.$$phase=e}function x(){m.$$phase=null}function l(e,t){for(;e.$$watchersCount+=t,e=e.$parent;);}function a(e,t,n){for(;e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n],e=e.$parent;);}function b(){}function T(){for(;n.length;)try{n.shift()()}catch(e){h(e)}M=null}}]}function zi(){var r=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return _e(e)?(r=e,this):r},this.imgSrcSanitizationWhitelist=function(e){return _e(e)?(a=e,this):a},this.$get=function(){return function(e,t){var n,i=t?a:r;return""===(n=ar(e).href)||n.match(i)?e:"unsafe:"+n}}}Di.prototype={compile:function(e){var r=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ai(e,r.$filter);var t,n="";if(this.stage="assign",t=Ri(e)){this.state.computing="assign";var i=this.nextId();this.recurse(t,i),this.return_(i),n="fn.assign="+this.generateFunction("assign","s,v,l")}var a=Ci(e.body);r.stage="inputs",he(a,function(e,t){var n="fn"+t;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(e,i),r.return_(i),r.state.inputs.push({name:n,isPure:e.isPure}),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(e);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",o=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,_i,Si,Ei);return this.state=this.stage=void 0,o},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return he(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(e){return e.name}).join(",")+"];"),t.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var n=[],i=this;return he(this.state.filters,function(e,t){n.push(e+"=$filter("+i.escape(t)+")")}),n.length?"var "+n.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(n,t,e,i,r,a){var s,o,l,u,c,d=this;if(i=i||me,!a&&_e(n.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",n.watchId)),this.lazyRecurse(n,t,e,i,r,!0));switch(n.type){case Ti.Program:he(n.body,function(e,t){d.recurse(e.expression,void 0,void 0,function(e){o=e}),t!==n.body.length-1?d.current().body.push(o,";"):d.return_(o)});break;case Ti.Literal:u=this.escape(n.value),this.assign(t,u),i(t||u);break;case Ti.UnaryExpression:this.recurse(n.argument,void 0,void 0,function(e){o=e}),u=n.operator+"("+this.ifDefined(o,0)+")",this.assign(t,u),i(u);break;case Ti.BinaryExpression:this.recurse(n.left,void 0,void 0,function(e){s=e}),this.recurse(n.right,void 0,void 0,function(e){o=e}),u="+"===n.operator?this.plus(s,o):"-"===n.operator?this.ifDefined(s,0)+n.operator+this.ifDefined(o,0):"("+s+")"+n.operator+"("+o+")",this.assign(t,u),i(u);break;case Ti.LogicalExpression:t=t||this.nextId(),d.recurse(n.left,t),d.if_("&&"===n.operator?t:d.not(t),d.lazyRecurse(n.right,t)),i(t);break;case Ti.ConditionalExpression:t=t||this.nextId(),d.recurse(n.test,t),d.if_(t,d.lazyRecurse(n.alternate,t),d.lazyRecurse(n.consequent,t)),i(t);break;case Ti.Identifier:t=t||this.nextId(),e&&(e.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),e.computed=!1,e.name=n.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",n.name)),function(){d.if_("inputs"===d.stage||"s",function(){r&&1!==r&&d.if_(d.isNull(d.nonComputedMember("s",n.name)),d.lazyAssign(d.nonComputedMember("s",n.name),"{}")),d.assign(t,d.nonComputedMember("s",n.name))})},t&&d.lazyAssign(t,d.nonComputedMember("l",n.name))),i(t);break;case Ti.MemberExpression:s=e&&(e.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(n.object,s,void 0,function(){d.if_(d.notNull(s),function(){n.computed?(o=d.nextId(),d.recurse(n.property,o),d.getStringValue(o),r&&1!==r&&d.if_(d.not(d.computedMember(s,o)),d.lazyAssign(d.computedMember(s,o),"{}")),u=d.computedMember(s,o),d.assign(t,u),e&&(e.computed=!0,e.name=o)):(r&&1!==r&&d.if_(d.isNull(d.nonComputedMember(s,n.property.name)),d.lazyAssign(d.nonComputedMember(s,n.property.name),"{}")),u=d.nonComputedMember(s,n.property.name),d.assign(t,u),e&&(e.computed=!1,e.name=n.property.name))},function(){d.assign(t,"undefined")}),i(t)},!!r);break;case Ti.CallExpression:t=t||this.nextId(),n.filter?(o=d.filter(n.callee.name),l=[],he(n.arguments,function(e){var t=d.nextId();d.recurse(e,t),l.push(t)}),u=o+"("+l.join(",")+")",d.assign(t,u),i(t)):(o=d.nextId(),s={},l=[],d.recurse(n.callee,o,s,function(){d.if_(d.notNull(o),function(){he(n.arguments,function(e){d.recurse(e,n.constant?void 0:d.nextId(),void 0,function(e){l.push(e)})}),u=s.name?d.member(s.context,s.name,s.computed)+"("+l.join(",")+")":o+"("+l.join(",")+")",d.assign(t,u)},function(){d.assign(t,"undefined")}),i(t)}));break;case Ti.AssignmentExpression:o=this.nextId(),s={},this.recurse(n.left,void 0,s,function(){d.if_(d.notNull(s.context),function(){d.recurse(n.right,o),u=d.member(s.context,s.name,s.computed)+n.operator+o,d.assign(t,u),i(t||u)})},1);break;case Ti.ArrayExpression:l=[],he(n.elements,function(e){d.recurse(e,n.constant?void 0:d.nextId(),void 0,function(e){l.push(e)})}),u="["+l.join(",")+"]",this.assign(t,u),i(t||u);break;case Ti.ObjectExpression:c=!(l=[]),he(n.properties,function(e){e.computed&&(c=!0)}),c?(t=t||this.nextId(),this.assign(t,"{}"),he(n.properties,function(e){e.computed?(s=d.nextId(),d.recurse(e.key,s)):s=e.key.type===Ti.Identifier?e.key.name:""+e.key.value,o=d.nextId(),d.recurse(e.value,o),d.assign(d.member(t,s,e.computed),o)})):(he(n.properties,function(t){d.recurse(t.value,n.constant?void 0:d.nextId(),void 0,function(e){l.push(d.escape(t.key.type===Ti.Identifier?t.key.name:""+t.key.value)+":"+e)})}),u="{"+l.join(",")+"}",this.assign(t,u)),i(t||u);break;case Ti.ThisExpression:this.assign(t,"s"),i(t||"s");break;case Ti.LocalsExpression:this.assign(t,"l"),i(t||"l");break;case Ti.NGValueParameter:this.assign(t,"v"),i(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),i[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var i=this.current().body;i.push("if(",e,"){"),t(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,i,r,a){var s=this;return function(){s.recurse(e,t,n,i,r,a)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(xe(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(S(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw gi("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},ki.prototype={compile:function(e){var t,i,r=this;Ai(e,r.$filter),(t=Ri(e))&&(i=this.recurse(t));var a,n=Ci(e.body);n&&(a=[],he(n,function(e,t){var n=r.recurse(e);n.isPure=e.isPure,e.input=n,a.push(n),e.watchId=t}));var s=[];he(e.body,function(e){s.push(r.recurse(e.expression))});var o=0===e.body.length?me:1===e.body.length?s[0]:function(t,n){var i;return he(s,function(e){i=e(t,n)}),i};return i&&(o.assign=function(e,t,n){return i(e,n,t)}),a&&(o.inputs=a),o},recurse:function(e,l,t){var s,u,c,n=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ti.Literal:return this.value(e.value,l);case Ti.UnaryExpression:return u=this.recurse(e.argument),this["unary"+e.operator](u,l);case Ti.BinaryExpression:case Ti.LogicalExpression:return s=this.recurse(e.left),u=this.recurse(e.right),this["binary"+e.operator](s,u,l);case Ti.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),l);case Ti.Identifier:return n.identifier(e.name,l,t);case Ti.MemberExpression:return s=this.recurse(e.object,!1,!!t),e.computed||(u=e.property.name),e.computed&&(u=this.recurse(e.property)),e.computed?this.computedMember(s,u,l,t):this.nonComputedMember(s,u,l,t);case Ti.CallExpression:return c=[],he(e.arguments,function(e){c.push(n.recurse(e))}),e.filter&&(u=this.$filter(e.callee.name)),e.filter||(u=this.recurse(e.callee,!0)),e.filter?function(e,t,n,i){for(var r=[],a=0;a<c.length;++a)r.push(c[a](e,t,n,i));var s=u.apply(void 0,r,i);return l?{context:void 0,name:void 0,value:s}:s}:function(e,t,n,i){var r,a=u(e,t,n,i);if(null!=a.value){for(var s=[],o=0;o<c.length;++o)s.push(c[o](e,t,n,i));r=a.value.apply(a.context,s)}return l?{value:r}:r};case Ti.AssignmentExpression:return s=this.recurse(e.left,!0,1),u=this.recurse(e.right),function(e,t,n,i){var r=s(e,t,n,i),a=u(e,t,n,i);return r.context[r.name]=a,l?{value:a}:a};case Ti.ArrayExpression:return c=[],he(e.elements,function(e){c.push(n.recurse(e))}),function(e,t,n,i){for(var r=[],a=0;a<c.length;++a)r.push(c[a](e,t,n,i));return l?{value:r}:r};case Ti.ObjectExpression:return c=[],he(e.properties,function(e){e.computed?c.push({key:n.recurse(e.key),computed:!0,value:n.recurse(e.value)}):c.push({key:e.key.type===Ti.Identifier?e.key.name:""+e.key.value,computed:!1,value:n.recurse(e.value)})}),function(e,t,n,i){for(var r={},a=0;a<c.length;++a)c[a].computed?r[c[a].key(e,t,n,i)]=c[a].value(e,t,n,i):r[c[a].key]=c[a].value(e,t,n,i);return l?{value:r}:r};case Ti.ThisExpression:return function(e){return l?{value:e}:e};case Ti.LocalsExpression:return function(e,t){return l?{value:t}:t};case Ti.NGValueParameter:return function(e,t,n){return l?{value:n}:n}}},"unary+":function(a,s){return function(e,t,n,i){var r=a(e,t,n,i);return r=_e(r)?+r:0,s?{value:r}:r}},"unary-":function(a,s){return function(e,t,n,i){var r=a(e,t,n,i);return r=_e(r)?-r:-0,s?{value:r}:r}},"unary!":function(a,s){return function(e,t,n,i){var r=!a(e,t,n,i);return s?{value:r}:r}},"binary+":function(a,s,o){return function(e,t,n,i){var r=Ei(a(e,t,n,i),s(e,t,n,i));return o?{value:r}:r}},"binary-":function(o,l,u){return function(e,t,n,i){var r=o(e,t,n,i),a=l(e,t,n,i),s=(_e(r)?r:0)-(_e(a)?a:0);return u?{value:s}:s}},"binary*":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)*s(e,t,n,i);return o?{value:r}:r}},"binary/":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)/s(e,t,n,i);return o?{value:r}:r}},"binary%":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)%s(e,t,n,i);return o?{value:r}:r}},"binary===":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)===s(e,t,n,i);return o?{value:r}:r}},"binary!==":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)!==s(e,t,n,i);return o?{value:r}:r}},"binary==":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)==s(e,t,n,i);return o?{value:r}:r}},"binary!=":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)!=s(e,t,n,i);return o?{value:r}:r}},"binary<":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)<s(e,t,n,i);return o?{value:r}:r}},"binary>":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)>s(e,t,n,i);return o?{value:r}:r}},"binary<=":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)<=s(e,t,n,i);return o?{value:r}:r}},"binary>=":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)>=s(e,t,n,i);return o?{value:r}:r}},"binary&&":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)&&s(e,t,n,i);return o?{value:r}:r}},"binary||":function(a,s,o){return function(e,t,n,i){var r=a(e,t,n,i)||s(e,t,n,i);return o?{value:r}:r}},"ternary?:":function(a,s,o,l){return function(e,t,n,i){var r=a(e,t,n,i)?s(e,t,n,i):o(e,t,n,i);return l?{value:r}:r}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(s,o,l){return function(e,t,n,i){var r=t&&s in t?t:e;l&&1!==l&&r&&null==r[s]&&(r[s]={});var a=r?r[s]:void 0;return o?{context:r,name:s,value:a}:a}},computedMember:function(o,l,u,c){return function(e,t,n,i){var r,a,s=o(e,t,n,i);return null!=s&&(r=_i(r=l(e,t,n,i)),c&&1!==c&&s&&!s[r]&&(s[r]={}),a=s[r]),u?{context:s,name:r,value:a}:a}},nonComputedMember:function(s,o,l,u){return function(e,t,n,i){var r=s(e,t,n,i);u&&1!==u&&r&&null==r[o]&&(r[o]={});var a=null!=r?r[o]:void 0;return l?{context:r,name:o,value:a}:a}},inputs:function(r,a){return function(e,t,n,i){return i?i[a]:r(e,t,n)}}},Ii.prototype={constructor:Ii,parse:function(e){var t,n=this.ast.ast(e),i=this.astCompiler.compile(n);return i.literal=0===(t=n).body.length||1===t.body.length&&(t.body[0].expression.type===Ti.Literal||t.body[0].expression.type===Ti.ArrayExpression||t.body[0].expression.type===Ti.ObjectExpression),i.constant=n.constant,i}};var Gi=A("$sce"),qi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Wi=/_([a-z])/g;function Yi(e){return e.replace(Wi,nt)}function Xi(e){var t=[];return _e(e)&&he(e,function(e){t.push(function(e){if("self"===e)return e;if(xe(e)){if(-1<e.indexOf("***"))throw Gi("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=I(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(w(e))return new RegExp("^"+e.source+"$");throw Gi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))}),t}function Ki(){this.SCE_CONTEXTS=qi;var s=["self"],o=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(s=Xi(e)),s},this.resourceUrlBlacklist=function(e){return arguments.length&&(o=Xi(e)),o},this.$get=["$injector",function(e){var i=function(e){throw Gi("unsafe","Attempting to use an unsafe value in a safe context.")};function a(e,t){return"self"===e?sr(t):!!e.exec(t.href)}function t(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}e.has("$sanitize")&&(i=e.get("$sanitize"));var n=t(),r={};return r[qi.HTML]=t(n),r[qi.CSS]=t(n),r[qi.URL]=t(n),r[qi.JS]=t(n),r[qi.RESOURCE_URL]=t(r[qi.URL]),{trustAs:function(e,t){var n=r.hasOwnProperty(e)?r[e]:null;if(!n)throw Gi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||ve(t)||""===t)return t;if("string"!=typeof t)throw Gi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(e,t){if(null===t||ve(t)||""===t)return t;var n=r.hasOwnProperty(e)?r[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===qi.RESOURCE_URL){if(function(e){var t,n,i=ar(e.toString()),r=!1;for(t=0,n=s.length;t<n;t++)if(a(s[t],i)){r=!0;break}if(r)for(t=0,n=o.length;t<n;t++)if(a(o[t],i)){r=!1;break}return r}(t))return t;throw Gi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===qi.HTML)return i(t);throw Gi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof n?e.$$unwrapTrustedValue():e}}}]}function Qi(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(i,e){if(t&&H<8)throw Gi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=We(qi);r.isEnabled=function(){return t},r.trustAs=e.trustAs,r.getTrusted=e.getTrusted,r.valueOf=e.valueOf,t||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=ge),r.parseAs=function(t,e){var n=i(e);return n.literal&&n.constant?n:i(e,function(e){return r.getTrusted(t,e)})};var a=r.parseAs,s=r.getTrusted,o=r.trustAs;return he(qi,function(t,e){var n=V(e);r[Yi("parse_as_"+n)]=function(e){return a(t,e)},r[Yi("get_trusted_"+n)]=function(e){return s(t,e)},r[Yi("trust_as_"+n)]=function(e){return o(t,e)}}),r}]}function Zi(){this.$get=["$window","$document",function(e,t){var n={},i=!(!(e.nw&&e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,r=x((/android (\d+)/.exec(V((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},o=s.body&&s.body.style,l=!1,u=!1;return o&&(l=!!("transition"in o||"webkitTransition"in o),u=!!("animation"in o||"webkitAnimation"in o)),{history:!(!i||r<4||a),hasEvent:function(e){if("input"===e&&H)return!1;if(ve(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:F(),transitions:l,animations:u,android:r}}]}var Ji=A("$compile");function er(){var u;this.httpOptions=function(e){return e?(u=e,this):u},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(i,r,a,s,o){function l(t,n){l.totalPendingRequests++,xe(t)&&!ve(r.get(t))||(t=o.getTrustedResourceUrl(t));var e=a.defaults&&a.defaults.transformResponse;return be(e)?e=e.filter(function(e){return e!==Bn}):e===Bn&&(e=null),a.get(t,fe({cache:r,transformResponse:e},u)).finally(function(){l.totalPendingRequests--}).then(function(e){return r.put(t,e.data),e.data},function(e){n||(e=Ji("tpload","Failed to load template: {0} (HTTP status: {1} {2})",t,e.status,e.statusText),i(e));return s.reject(e)})}return l.totalPendingRequests=0,l}]}function tr(){this.$get=["$rootScope","$browser","$location",function(t,n,i){var e={findBindings:function(e,n,i){var t=e.getElementsByClassName("ng-binding"),r=[];return he(t,function(t){var e=y.element(t).data("$binding");e&&he(e,function(e){i?new RegExp("(^|\\s)"+I(n)+"(\\s|\\||$)").test(e)&&r.push(t):-1!==e.indexOf(n)&&r.push(t)})}),r},findModels:function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var a="["+i[r]+"model"+(n?"=":"*=")+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},getLocation:function(){return i.url()},setLocation:function(e){e!==i.url()&&(i.url(e),t.$digest())},whenStable:function(e){n.notifyWhenNoOutstandingRequests(e)}};return e}]}function nr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(l,u,c,d,h){var f={};function e(e,t,n){Se(e)||(n=t,t=e,e=me);var i,r=De(arguments,3),a=_e(n)&&!n,s=(a?d:c).defer(),o=s.promise;return i=u.defer(function(){try{s.resolve(e.apply(null,r))}catch(e){s.reject(e),h(e)}finally{delete f[o.$$timeoutId]}a||l.$apply()},t),o.$$timeoutId=i,f[i]=s,o}return e.cancel=function(e){return!!(e&&e.$$timeoutId in f)&&(ji(f[e.$$timeoutId].promise),f[e.$$timeoutId].reject("canceled"),delete f[e.$$timeoutId],u.defer.cancel(e.$$timeoutId))},e}]}var ir=$.document.createElement("a"),rr=ar($.location.href);function ar(e){var t=e;return H&&(ir.setAttribute("href",t),t=ir.href),ir.setAttribute("href",t),{href:ir.href,protocol:ir.protocol?ir.protocol.replace(/:$/,""):"",host:ir.host,search:ir.search?ir.search.replace(/^\?/,""):"",hash:ir.hash?ir.hash.replace(/^#/,""):"",hostname:ir.hostname,port:ir.port,pathname:"/"===ir.pathname.charAt(0)?ir.pathname:"/"+ir.pathname}}function sr(e){var t=xe(e)?ar(e):e;return t.protocol===rr.protocol&&t.host===rr.host}function or(){this.$get=M($)}function lr(e){var s=e[0]||{},o={},l="";function u(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var e,t,n,i,r,a=function(e){try{return e.cookie||""}catch(e){return""}}(s);if(a!==l)for(e=(l=a).split("; "),o={},n=0;n<e.length;n++)0<(i=(t=e[n]).indexOf("="))&&(r=u(t.substring(0,i)),ve(o[r])&&(o[r]=u(t.substring(i+1))));return o}}function ur(){this.$get=lr}function cr(i){var r="Filter";function a(e,t){if(ye(e)){var n={};return he(e,function(e,t){n[t]=a(t,e)}),n}return i.factory(e+r,t)}this.register=a,this.$get=["$injector",function(t){return function(e){return t.get(e+r)}}],a("currency",vr),a("date",Pr),a("filter",dr),a("json",Rr),a("limitTo",Ir),a("lowercase",Dr),a("number",_r),a("orderBy",Or),a("uppercase",kr)}function dr(){return function(e,t,n,i){if(!L(e)){if(null==e)return e;throw A("filter")("notarray","Expected array but received: {0}",e)}var r,a;switch(i=i||"$",fr(t)){case"function":r=t;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":r=function(t,n,i,r){var a=ye(t)&&i in t;!0===n?n=Re:Se(n)||(n=function(e,t){return!ve(e)&&(null===e||null===t?e===t:!(ye(t)||ye(e)&&!b(e))&&(e=V(""+e),t=V(""+t),-1!==e.indexOf(t)))});return function(e){return a&&!ye(e)?hr(e,t[i],n,i,!1):hr(e,t,n,i,r)}}(t,n,i,a);break;default:return e}return Array.prototype.filter.call(e,r)}}function hr(e,t,n,i,r,a){var s=fr(e),o=fr(t);if("string"===o&&"!"===t.charAt(0))return!hr(e,t.substring(1),n,i,r);if(be(e))return e.some(function(e){return hr(e,t,n,i,r)});switch(s){case"object":var l;if(r){for(l in e)if(l.charAt&&"$"!==l.charAt(0)&&hr(e[l],t,n,i,!0))return!0;return!a&&hr(e,t,n,i,!1)}if("object"!==o)return n(e,t);for(l in t){var u=t[l];if(!Se(u)&&!ve(u)){var c=l===i;if(!hr(c?e:e[l],u,n,i,c,c))return!1}}return!0;case"function":return!1;default:return n(e,t)}}function fr(e){return null===e?"null":typeof e}lr.$inject=["$document"],cr.$inject=["$provide"];var pr=22,mr=".",gr="0";function vr(e){var i=e.NUMBER_FORMATS;return function(e,t,n){return ve(t)&&(t=i.CURRENCY_SYM),ve(n)&&(n=i.PATTERNS[1].maxFrac),null==e?e:yr(e,i.PATTERNS[1],i.GROUP_SEP,i.DECIMAL_SEP,n).replace(/\u00A4/g,t)}}function _r(e){var n=e.NUMBER_FORMATS;return function(e,t){return null==e?e:yr(e,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,t)}}function yr(e,t,n,i,r){if(!xe(e)&&!S(e)||isNaN(e))return"";var a,s=!isFinite(e),o=!1,l=Math.abs(e)+"",u="";if(s)u="∞";else{(function(e,t,n,i){var r=e.d,a=r.length-e.i,s=(t=ve(t)?Math.min(Math.max(n,a),i):+t)+e.i,o=r[s];if(0<s){r.splice(Math.max(e.i,s));for(var l=s;l<r.length;l++)r[l]=0}else{a=Math.max(0,a),e.i=1,r.length=Math.max(1,s=t+1),r[0]=0;for(var u=1;u<s;u++)r[u]=0}if(5<=o)if(s-1<0){for(var c=0;s<c;c--)r.unshift(0),e.i++;r.unshift(1),e.i++}else r[s-1]++;for(;a<Math.max(0,t);a++)r.push(0);var d=r.reduceRight(function(e,t,n,i){return t+=e,i[n]=t%10,Math.floor(t/10)},0);d&&(r.unshift(d),e.i++)})(a=function(e){var t,n,i,r,a,s=0;for(-1<(n=e.indexOf(mr))&&(e=e.replace(mr,"")),0<(i=e.search(/e/i))?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charAt(i)===gr;i++);if(i===(a=e.length))t=[0],n=1;else{for(a--;e.charAt(a)===gr;)a--;for(n-=i,t=[],r=0;i<=a;i++,r++)t[r]=+e.charAt(i)}return pr<n&&(t=t.splice(0,pr-1),s=n-1,n=1),{d:t,e:s,i:n}}(l),r,t.minFrac,t.maxFrac);var c=a.d,d=a.i,h=a.e,f=[];for(o=c.reduce(function(e,t){return e&&!t},!0);d<0;)c.unshift(0),d++;0<d?f=c.splice(d,c.length):(f=c,c=[0]);var p=[];for(c.length>=t.lgSize&&p.unshift(c.splice(-t.lgSize,c.length).join(""));c.length>t.gSize;)p.unshift(c.splice(-t.gSize,c.length).join(""));c.length&&p.unshift(c.join("")),u=p.join(n),f.length&&(u+=i+f.join("")),h&&(u+="e+"+h)}return e<0&&!o?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function xr(e,t,n,i){var r="";for((e<0||i&&e<=0)&&(i?e=1-e:(e=-e,r="-")),e=""+e;e.length<t;)e=gr+e;return n&&(e=e.substr(e.length-t)),r+e}function br(n,i,r,a,s){return r=r||0,function(e){var t=e["get"+n]();return(0<r||-r<t)&&(t+=r),0===t&&-12===r&&(t=12),xr(t,i,a,s)}}function Tr(i,r,a){return function(e,t){var n=e["get"+i]();return t[c((a?"STANDALONE":"")+(r?"SHORT":"")+i)][n]}}function Sr(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function Er(r){return function(e){var t,n=Sr(e.getFullYear()),i=+(t=e,new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay())))-+n;return xr(1+Math.round(i/6048e5),r)}}function wr(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}vr.$inject=["$locale"];var Mr={yyyy:br("FullYear",4,0,!(_r.$inject=["$locale"]),!0),yy:br("FullYear",2,0,!0,!0),y:br("FullYear",1,0,!1,!0),MMMM:Tr("Month"),MMM:Tr("Month",!0),MM:br("Month",2,1),M:br("Month",1,1),LLLL:Tr("Month",!1,!0),dd:br("Date",2),d:br("Date",1),HH:br("Hours",2),H:br("Hours",1),hh:br("Hours",2,-12),h:br("Hours",1,-12),mm:br("Minutes",2),m:br("Minutes",1),ss:br("Seconds",2),s:br("Seconds",1),sss:br("Milliseconds",3),EEEE:Tr("Day"),EEE:Tr("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){var i=-1*n,r=0<=i?"+":"";return r+=xr(Math[0<i?"floor":"ceil"](i/60),2)+xr(Math.abs(i%60),2)},ww:Er(2),w:Er(1),G:wr,GG:wr,GGG:wr,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},Ar=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Cr=/^-?\d+$/;function Pr(l){var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,e,n){var i,r,a="",s=[];if(e=e||"mediumDate",e=l.DATETIME_FORMATS[e]||e,xe(t)&&(t=Cr.test(t)?x(t):function(e){var t;if(t=e.match(d)){var n=new Date(0),i=0,r=0,a=t[8]?n.setUTCFullYear:n.setFullYear,s=t[8]?n.setUTCHours:n.setHours;t[9]&&(i=x(t[9]+t[10]),r=x(t[9]+t[11])),a.call(n,x(t[1]),x(t[2])-1,x(t[3]));var o=x(t[4]||0)-i,l=x(t[5]||0)-r,u=x(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(n,o,l,u,c),n}return e}(t)),S(t)&&(t=new Date(t)),!E(t)||!isFinite(t.getTime()))return t;for(;e;)e=(r=Ar.exec(e))?(s=z(s,r,1)).pop():(s.push(e),null);var o=t.getTimezoneOffset();return n&&(o=X(n,o),t=K(t,n,!0)),he(s,function(e){i=Mr[e],a+=i?i(t,l.DATETIME_FORMATS,o):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function Rr(){return function(e,t){return ve(t)&&(t=2),q(e,t)}}Pr.$inject=["$locale"];var Dr=M(V),kr=M(c);function Ir(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):x(t),P(t)?e:(S(e)&&(e=e.toString()),L(e)?(n=(n=!n||isNaN(n)?0:x(n))<0?Math.max(0,e.length+n):n,0<=t?Lr(e,n,n+t):0===n?Lr(e,t,e.length):Lr(e,Math.max(0,n+t),n)):e)}}function Lr(e,t,n){return xe(e)?e.slice(t,n):o.call(e,t,n)}function Or(l){return function(e,t,n,i){if(null==e)return e;if(!L(e))throw A("orderBy")("notarray","Expected array but received: {0}",e);be(t)||(t=[t]),0===t.length&&(t=["+"]);var a=t.map(function(e){var t=1,n=ge;if(Se(e))n=e;else if(xe(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(t="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(n=l(e)).constant)){var i=n();n=function(e){return e[i]}}return{get:n,descending:t}}),s=n?-1:1,o=Se(i)?i:c,r=Array.prototype.map.call(e,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:a.map(function(e){return function(e,t){var n=typeof e;null===e?(n="string",e="null"):"object"===n&&(e=function(e){if(Se(e.valueOf)&&u(e=e.valueOf()))return e;if(b(e)&&u(e=e.toString()))return e;return e}(e));return{value:e,type:n,index:t}}(e.get(t),n)})}});return r.sort(function(e,t){for(var n=0,i=a.length;n<i;n++){var r=o(e.predicateValues[n],t.predicateValues[n]);if(r)return r*a[n].descending*s}return(o(e.tieBreaker,t.tieBreaker)||c(e.tieBreaker,t.tieBreaker))*s}),e=r.map(function(e){return e.value})};function u(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function c(e,t){var n=0,i=e.type,r=t.type;if(i===r){var a=e.value,s=t.value;"string"===i?(a=a.toLowerCase(),s=s.toLowerCase()):"object"===i&&(ye(a)&&(a=e.index),ye(s)&&(s=t.index)),a!==s&&(n=a<s?-1:1)}else n=i<r?-1:1;return n}}function Nr(e){return Se(e)&&(e={link:e}),e.restrict=e.restrict||"AC",M(e)}Or.$inject=["$parse"];var Ur=M({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===de.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Fr={};he(Rt,function(e,i){if("multiple"!==e){var r=xn("ng-"+i),t=a;"checked"===e&&(t=function(e,t,n){n.ngModel!==n[r]&&a(e,0,n)}),Fr[r]=function(){return{restrict:"A",priority:100,link:t}}}function a(e,t,n){e.$watch(n[r],function(e){n.$set(i,!!e)})}}),he(kt,function(e,r){Fr[r]=function(){return{priority:100,link:function(e,t,n){if("ngPattern"===r&&"/"===n.ngPattern.charAt(0)){var i=n.ngPattern.match(a);if(i)return void n.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(n[r],function(e){n.$set(r,e)})}}}}),he(["src","srcset","href"],function(a){var s=xn("ng-"+a);Fr[s]=function(){return{priority:99,link:function(e,t,n){var i=a,r=a;"href"===a&&"[object SVGAnimatedString]"===de.call(t.prop("href"))&&(r="xlinkHref",n.$attr[r]="xlink:href",i=null),n.$observe(s,function(e){e?(n.$set(r,e),H&&i&&t.prop(i,n[r])):"href"===a&&n.$set(r,null)})}}}});var Br={$addControl:me,$$renameControl:function(e,t){e.$name=t},$removeControl:me,$setValidity:me,$setDirty:me,$setPristine:me,$setSubmitted:me},$r="ng-pending",jr="ng-submitted";function Vr(e,t,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Br,this.$$element=e,this.$$animate=i,qr(this)}Vr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Vr.prototype={$rollbackViewValue:function(){he(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){he(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){Ue(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],(this[t]=e).$name=t},$removeControl:function(n){n.$name&&this[n.$name]===n&&delete this[n.$name],he(this.$pending,function(e,t){this.$setValidity(t,null,n)},this),he(this.$error,function(e,t){this.$setValidity(t,null,n)},this),he(this.$$success,function(e,t){this.$setValidity(t,null,n)},this),Ce(this.$$controls,n),n.$$parentForm=Br},$setDirty:function(){this.$$animate.removeClass(this.$$element,$a),this.$$animate.addClass(this.$$element,ja),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,$a,ja+" "+jr),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,he(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){he(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,jr),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Wr({clazz:Vr,set:function(e,t,n){var i=e[t];i?-1===i.indexOf(n)&&i.push(n):e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(Ce(i,n),0===i.length&&delete e[t])}});var Hr=function(n){return["$timeout","$parse",function(l,t){return{name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:Vr,compile:function(e,t){e.addClass($a).addClass(Fa);var o=t.name?"name":!(!n||!t.ngForm)&&"ngForm";return{pre:function(t,e,n,i){var r=i[0];if(!("action"in n)){var a=function(e){t.$apply(function(){r.$commitViewValue(),r.$setSubmitted()}),e.preventDefault()};e[0].addEventListener("submit",a),e.on("$destroy",function(){l(function(){e[0].removeEventListener("submit",a)},0,!1)})}(i[1]||r.$$parentForm).$addControl(r);var s=o?u(r.$name):me;o&&(s(t,r),n.$observe(o,function(e){r.$name!==e&&(s(t,void 0),r.$$parentForm.$$renameControl(r,e),(s=u(r.$name))(t,r))})),e.on("$destroy",function(){r.$$parentForm.$removeControl(r),s(t,void 0),fe(r,Br)})}}}};function u(e){return""===e?t('this[""]').assign:t(e).assign||me}}]},zr=Hr(),Gr=Hr(!0);function qr(e){e.$$classCache={},e.$$classCache[Ba]=!(e.$$classCache[Fa]=e.$$element.hasClass(Fa))}function Wr(e){var t=e.clazz,r=e.set,a=e.unset;function s(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function o(e,t,n){t=t?"-"+Le(t,"-"):"",s(e,Fa+t,!0===n),s(e,Ba+t,!1===n)}t.prototype.$setValidity=function(e,t,n){var i;ve(t)?function(e,t,n,i){e[t]||(e[t]={});r(e[t],n,i)}(this,"$pending",e,n):function(e,t,n,i){e[t]&&a(e[t],n,i);Yr(e[t])&&(e[t]=void 0)}(this,"$pending",e,n),we(t)?t?(a(this.$error,e,n),r(this.$$success,e,n)):(r(this.$error,e,n),a(this.$$success,e,n)):(a(this.$error,e,n),a(this.$$success,e,n)),this.$pending?(s(this,$r,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(s(this,$r,!1),this.$valid=Yr(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,e,i=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,i,this)}}function Yr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Xr=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Kr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Qr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Zr=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Jr=/^(\d{4,})-(\d{2})-(\d{2})$/,ea=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ta=/^(\d{4,})-W(\d\d)$/,na=/^(\d{4,})-(\d\d)$/,ia=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ra="keydown wheel mousedown",aa=$e();he("date,datetime-local,month,time,week".split(","),function(e){aa[e]=!0});var sa={text:function(e,t,n,i,r,a){la(e,t,n,i,r,a),oa(i)},date:ca("date",Jr,ua(Jr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ca("datetimelocal",ea,ua(ea,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:ca("time",ia,ua(ia,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ca("week",ta,function(e,t){if(E(e))return e;if(xe(e)){ta.lastIndex=0;var n=ta.exec(e);if(n){var i=+n[1],r=+n[2],a=0,s=0,o=0,l=0,u=Sr(i),c=7*(r-1);return t&&(a=t.getHours(),s=t.getMinutes(),o=t.getSeconds(),l=t.getMilliseconds()),new Date(i,0,u.getDate()+c,a,s,o,l)}}return NaN},"yyyy-Www"),month:ca("month",na,ua(na,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,i,r,a){var s,o;da(e,t,n,i),ha(i),la(e,t,n,i,r,a),(_e(n.min)||n.ngMin)&&(i.$validators.min=function(e){return i.$isEmpty(e)||ve(s)||s<=e},n.$observe("min",function(e){s=fa(e),i.$validate()}));(_e(n.max)||n.ngMax)&&(i.$validators.max=function(e){return i.$isEmpty(e)||ve(o)||e<=o},n.$observe("max",function(e){o=fa(e),i.$validate()}));if(_e(n.step)||n.ngStep){var l;i.$validators.step=function(e,t){return i.$isEmpty(t)||ve(l)||ga(t,s||0,l)},n.$observe("step",function(e){l=fa(e),i.$validate()})}},url:function(e,t,n,i,r,a){la(e,t,n,i,r,a),oa(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||Kr.test(n)}},email:function(e,t,n,i,r,a){la(e,t,n,i,r,a),oa(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||Qr.test(n)}},radio:function(e,n,i,r){var a=!i.ngTrim||"false"!==Me(i.ngTrim);ve(i.name)&&n.attr("name",C());n.on("click",function(e){var t;n[0].checked&&(t=i.value,a&&(t=Me(t)),r.$setViewValue(t,e&&e.type))}),r.$render=function(){var e=i.value;a&&(e=Me(e)),n[0].checked=e===r.$viewValue},i.$observe("value",r.$render)},range:function(e,n,i,r,t,a){da(e,n,i,r),ha(r),la(e,n,i,r,t,a);var s=r.$$hasNativeValidators&&"range"===n[0].type,o=s?0:void 0,l=s?100:void 0,u=s?1:void 0,c=n[0].validity,d=_e(i.min),h=_e(i.max),f=_e(i.step),p=r.$render;r.$render=s&&_e(c.rangeUnderflow)&&_e(c.rangeOverflow)?function(){p(),r.$setViewValue(n.val())}:p,d&&(r.$validators.min=s?function(){return!0}:function(e,t){return r.$isEmpty(t)||ve(o)||o<=t},m("min",function(e){if(o=fa(e),P(r.$modelValue))return;if(s){var t=n.val();t<o&&(t=o,n.val(t)),r.$setViewValue(t)}else r.$validate()}));h&&(r.$validators.max=s?function(){return!0}:function(e,t){return r.$isEmpty(t)||ve(l)||t<=l},m("max",function(e){if(l=fa(e),P(r.$modelValue))return;if(s){var t=n.val();l<t&&(n.val(l),t=l<o?o:l),r.$setViewValue(t)}else r.$validate()}));f&&(r.$validators.step=s?function(){return!c.stepMismatch}:function(e,t){return r.$isEmpty(t)||ve(u)||ga(t,o||0,u)},m("step",function(e){if(u=fa(e),P(r.$modelValue))return;s&&r.$viewValue!==n.val()?r.$setViewValue(n.val()):r.$validate()}));function m(e,t){n.attr(e,i[e]),i.$observe(e,t)}},checkbox:function(e,t,n,i,r,a,s,o){var l=va(o,e,"ngTrueValue",n.ngTrueValue,!0),u=va(o,e,"ngFalseValue",n.ngFalseValue,!1);t.on("click",function(e){i.$setViewValue(t[0].checked,e&&e.type)}),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return!1===e},i.$formatters.push(function(e){return Re(e,l)}),i.$parsers.push(function(e){return e?l:u})},hidden:me,button:me,submit:me,reset:me,file:me};function oa(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function la(e,i,r,a,t,s){var o,l=V(i[0].type);if(!t.android){var u=!1;i.on("compositionstart",function(){u=!0}),i.on("compositionend",function(){u=!1,c()})}var c=function(e){if(o&&(s.defer.cancel(o),o=null),!u){var t=i.val(),n=e&&e.type;"password"===l||r.ngTrim&&"false"===r.ngTrim||(t=Me(t)),(a.$viewValue!==t||""===t&&a.$$hasNativeValidators)&&a.$setViewValue(t,n)}};if(t.hasEvent("input"))i.on("input",c);else{var n=function(e,t,n){o||(o=s.defer(function(){o=null,t&&t.value===n||c(e)}))};i.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||n(e,this,this.value)}),t.hasEvent("paste")&&i.on("paste cut",n)}i.on("change",c),aa[l]&&a.$$hasNativeValidators&&l===r.type&&i.on(ra,function(e){if(!o){var t=this[d],n=t.badInput,i=t.typeMismatch;o=s.defer(function(){o=null,t.badInput===n&&t.typeMismatch===i||c(e)})}}),a.$render=function(){var e=a.$isEmpty(a.$viewValue)?"":a.$viewValue;i.val()!==e&&i.val(e)}}function ua(r,a){return function(e,t){var n,i;if(E(e))return e;if(xe(e)){if('"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),Xr.test(e))return new Date(e);if(r.lastIndex=0,n=r.exec(e))return n.shift(),i=t?{yyyy:t.getFullYear(),MM:t.getMonth()+1,dd:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},he(n,function(e,t){t<a.length&&(i[a[t]]=+e)}),new Date(i.yyyy,i.MM-1,i.dd,i.HH,i.mm,i.ss||0,1e3*i.sss||0)}return NaN}}function ca(f,p,m,g){return function(e,t,n,i,r,a,s){da(e,t,n,i),la(0,t,n,i,r,a);var o,l,u,c=i&&i.$options.getOption("timezone");(i.$$parserName=f,i.$parsers.push(function(e){if(i.$isEmpty(e))return null;if(p.test(e)){var t=m(e,o);return c&&(t=K(t,c)),t}}),i.$formatters.push(function(e){if(e&&!E(e))throw Ga("datefmt","Expected `{0}` to be a date",e);return d(e)?((o=e)&&c&&(o=K(o,c,!0)),s("date")(e,g,c)):(o=null,"")}),_e(n.min)||n.ngMin)&&(i.$validators.min=function(e){return!d(e)||ve(l)||m(e)>=l},n.$observe("min",function(e){l=h(e),i.$validate()}));(_e(n.max)||n.ngMax)&&(i.$validators.max=function(e){return!d(e)||ve(u)||m(e)<=u},n.$observe("max",function(e){u=h(e),i.$validate()}));function d(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function h(e){return _e(e)&&!E(e)?m(e)||void 0:e}}}function da(e,n,t,i){var r=n[0];(i.$$hasNativeValidators=ye(r.validity))&&i.$parsers.push(function(e){var t=n.prop(d)||{};return t.badInput||t.typeMismatch?void 0:e})}function ha(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:Zr.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!S(e))throw Ga("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function fa(e){return _e(e)&&!S(e)&&(e=parseFloat(e)),P(e)?void 0:e}function pa(e){return(0|e)===e}function ma(e){var t=e.toString(),n=t.indexOf(".");if(-1!==n)return t.length-n-1;if(-1<e&&e<1){var i=/e-(\d+)$/.exec(t);if(i)return Number(i[1])}return 0}function ga(e,t,n){var i=Number(e),r=!pa(i),a=!pa(t),s=!pa(n);if(r||a||s){var o=r?ma(i):0,l=a?ma(t):0,u=s?ma(n):0,c=Math.max(o,l,u),d=Math.pow(10,c);i*=d,t*=d,n*=d,r&&(i=Math.round(i)),a&&(t=Math.round(t)),s&&(n=Math.round(n))}return(i-t)%n==0}function va(e,t,n,i,r){var a;if(_e(i)){if(!(a=e(i)).constant)throw Ga("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return a(t)}return r}var _a=["$browser","$sniffer","$filter","$parse",function(r,a,s,o){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,t,n,i){i[0]&&(sa[V(n.type)]||sa.text)(e,t,n,i[0],a,r,s,o)}}}}],ya=/^(true|false|\d+)$/,xa=function(){function i(e,t,n){var i=_e(n)?n:9===H?"":null;e.prop("value",i),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,t){return ya.test(t.ngValue)?function(e,t,n){i(t,n,e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){i(t,n,e)})}}}},ba=["$compile",function(i){return{restrict:"AC",compile:function(e){return i.$$addBindingClass(e),function(e,t,n){i.$$addBindingInfo(t,n.ngBind),t=t[0],e.$watch(n.ngBind,function(e){t.textContent=je(e)})}}}}],Ta=["$interpolate","$compile",function(r,a){return{compile:function(e){return a.$$addBindingClass(e),function(e,t,n){var i=r(t.attr(n.$attr.ngBindTemplate));a.$$addBindingInfo(t,i.expressions),t=t[0],n.$observe("ngBindTemplate",function(e){t.textContent=ve(e)?"":e})}}}}],Sa=["$sce","$parse","$compile",function(a,n,s){return{restrict:"A",compile:function(e,t){var i=n(t.ngBindHtml),r=n(t.ngBindHtml,function(e){return a.valueOf(e)});return s.$$addBindingClass(e),function(t,n,e){s.$$addBindingInfo(n,e.ngBindHtml),t.$watch(r,function(){var e=i(t);n.html(a.getTrustedHtml(e)||"")})}}}}],Ea=M({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}});function wa(f,p){var m;return f="ngClass"+f,["$parse",function(h){return{restrict:"AC",link:function(e,t,l){var u,n=l[f].trim(),i=":"===n.charAt(0)&&":"===n.charAt(1),r=h(n,i?y:_),a=i?function(e){var t=_(e);t!==u&&o(t)}:o,s=t.data("$classCounts"),c=!0;function d(e,t){var n=[];return he(e,function(e){(0<t||s[e])&&(s[e]=(s[e]||0)+t,s[e]===+(0<t)&&n.push(e))}),n.join(" ")}function o(e){var t,n,i,r,a,s,o;c===p&&(t=e,n=v(u),i=v(t),r=g(n,i),a=g(i,n),s=d(r,-1),o=d(a,1),l.$addClass(o),l.$removeClass(s)),u=e}s||(s=$e(),t.data("$classCounts",s)),"ngClass"!==f&&(m||(m=h("$index",function(e){return 1&e})),e.$watch(m,function(e){e===p?(n=d(v(n=u),1),l.$addClass(n)):(t=d(v(t=u),-1),l.$removeClass(t));var t;var n;c=e})),e.$watch(r,a,i)}}}];function g(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],a=0;a<t.length;a++)if(r===t[a])continue e;n.push(r)}return n}function v(e){return e&&e.split(" ")}function _(t){var e=t;return be(t)?e=t.map(_).join(" "):ye(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}function y(n){var e=n;if(be(n))e=n.map(y);else if(ye(n)){var i=!1;e=Object.keys(n).filter(function(e){var t=n[e];return!i&&ve(t)&&(i=!0),t}),i&&e.push(void 0)}return e}}var Ma=wa("",!0),Aa=wa("Odd",0),Ca=wa("Even",1),Pa=Nr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Ra=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Da={},ka={blur:!0,focus:!0};he("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var s=xn("ng-"+a);Da[s]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(e,t){var i=n(t[s]);return function(n,e){e.on(a,function(e){var t=function(){i(n,{$event:e})};ka[a]&&r.$$phase?n.$evalAsync(t):n.$apply(t)})}}}}]});var Ia=["$animate","$compile",function(l,u){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,n,i,t,r){var a,s,o;e.$watch(i.ngIf,function(e){e?s||r(function(e,t){s=t,e[e.length++]=u.$$createComment("end ngIf",i.ngIf),a={clone:e},l.enter(e,n.parent(),n)}):(o&&(o.remove(),o=null),s&&(s.$destroy(),s=null),a&&(o=Be(a.clone),l.leave(o).done(function(e){!1!==e&&(o=null)}),a=null))})}}}],La=["$templateRequest","$anchorScroll","$animate",function(g,v,_){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:y.noop,compile:function(e,t){var n=t.ngInclude||t.src,p=t.onload||"",m=t.autoscroll;return function(s,o,e,l,u){var c,t,d,h=0,f=function(){t&&(t.remove(),t=null),c&&(c.$destroy(),c=null),d&&(_.leave(d).done(function(e){!1!==e&&(t=null)}),t=d,d=null)};s.$watch(n,function(i){var r=function(e){!1===e||!_e(m)||m&&!s.$eval(m)||v()},a=++h;i?(g(i,!0).then(function(e){if(!s.$$destroyed&&a===h){var t=s.$new();l.template=e;var n=u(t,function(e){f(),_.enter(e,null,o).done(r)});d=n,(c=t).$emit("$includeContentLoaded",i),s.$eval(p)}},function(){s.$$destroyed||a===h&&(f(),s.$emit("$includeContentError",i))}),s.$emit("$includeContentRequested",i)):(f(),l.template=null)})}}}}],Oa=["$compile",function(r){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,t,n,i){if(de.call(t[0]).match(/SVG/))return t.empty(),void r(dt(i.template,$.document).childNodes)(e,function(e){t.append(e)},{futureParentElement:t});t.html(i.template),r(t.contents())(e)}}}],Na=Nr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ua=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var r=n.ngList||", ",a="false"!==n.ngTrim,s=a?Me(r):r;i.$parsers.push(function(e){if(!ve(e)){var t=[];return e&&he(e.split(s),function(e){e&&t.push(a?Me(e):e)}),t}}),i.$formatters.push(function(e){if(be(e))return e.join(r)}),i.$isEmpty=function(e){return!e||!e.length}}}},Fa="ng-valid",Ba="ng-invalid",$a="ng-pristine",ja="ng-dirty",Va="ng-untouched",Ha="ng-touched",za="ng-not-empty",Ga=A("ngModel");function qa(e,t,n,i,r,a,s,o,l){var u;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=Br,this.$options=Wa,this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:e}),this.$$attr=n,this.$$element=i,this.$$animate=a,this.$$timeout=s,this.$$parse=r,this.$$q=o,this.$$exceptionHandler=t,qr(this),(u=this).$$scope.$watch(function(e){var t=u.$$ngModelGet(e);if(t!==u.$modelValue&&(u.$modelValue==u.$modelValue||t==t)){u.$modelValue=u.$$rawModelValue=t,u.$$parserValid=void 0;for(var n=u.$formatters,i=n.length,r=t;i--;)r=n[i](r);u.$viewValue!==r&&(u.$$updateEmptyClasses(r),u.$viewValue=u.$$lastCommittedViewValue=r,u.$render(),u.$$runValidators(u.$modelValue,u.$viewValue,me))}return t})}qa.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],qa.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var n=this.$$parse(this.$$attr.ngModel+"()"),i=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var t=this.$$parsedNgModel(e);return Se(t)&&(t=n(e)),t},this.$$ngModelSet=function(e,t){Se(this.$$parsedNgModel(e))?i(e,{$$$p:t}):this.$$parsedNgModelAssign(e,t)}}else if(!this.$$parsedNgModel.assign)throw Ga("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Ie(this.$$element))},$render:me,$isEmpty:function(e){return ve(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,za),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,za))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,ja),this.$$animate.addClass(this.$$element,$a)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,$a),this.$$animate.addClass(this.$$element,ja),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Va,Ha)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Ha,Va)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!P(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),a=this;this.$$runValidators(t,e,function(e){r||n===e||(a.$modelValue=e?t:void 0,a.$modelValue!==i&&a.$$writeModelToScope())})}},$$runValidators:function(i,r,t){this.$$currentValidationRunId++;var a,s,o,n=this.$$currentValidationRunId,l=this;(function(){var e=l.$$parserName||"parse";{if(!ve(l.$$parserValid))return l.$$parserValid||(he(l.$validators,function(e,t){u(t,null)}),he(l.$asyncValidators,function(e,t){u(t,null)})),u(e,l.$$parserValid),l.$$parserValid;u(e,null)}return!0})()?(a=!0,he(l.$validators,function(e,t){var n=Boolean(e(i,r));a=a&&n,u(t,n)}),a||(he(l.$asyncValidators,function(e,t){u(t,null)}),0)?(s=[],o=!0,he(l.$asyncValidators,function(e,t){var n=e(i,r);if(!D(n))throw Ga("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",n);u(t,void 0),s.push(n.then(function(){u(t,!0)},function(){u(t,o=!1)}))}),s.length?l.$$q.all(s).then(function(){e(o)},me):e(!0)):e(!1)):e(!1);function u(e,t){n===l.$$currentValidationRunId&&l.$setValidity(e,t)}function e(e){n===l.$$currentValidationRunId&&t(e)}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,n=this;if(this.$$parserValid=!ve(t)||void 0,this.$$parserValid)for(var e=0;e<this.$parsers.length;e++)if(ve(t=this.$parsers[e](t))){this.$$parserValid=!1;break}P(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,r=this.$options.getOption("allowInvalid");function a(){n.$modelValue!==i&&n.$$writeModelToScope()}this.$$rawModelValue=t,r&&(this.$modelValue=t,a()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(e){r||(n.$modelValue=e?t:void 0,a())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),he(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");S(t[e])?t=t[e]:S(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;0<t?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e)}},Wr({clazz:qa,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Wa,Ya=["$rootScope",function(s){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:qa,priority:1,compile:function(e){return e.addClass($a).addClass(Va).addClass(Fa),{pre:function(e,t,n,i){var r=i[0],a=i[1]||r.$$parentForm,s=i[2];s&&(r.$options=s.$options),r.$$initGetterSetters(),a.$addControl(r),n.$observe("name",function(e){r.$name!==e&&r.$$parentForm.$$renameControl(r,e)}),e.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(e,t,n,i){var r=i[0];function a(){r.$setTouched()}r.$options.getOption("updateOn")&&t.on(r.$options.getOption("updateOn"),function(e){r.$$debounceViewValueCommit(e&&e.type)}),t.on("blur",function(){r.$touched||(s.$$phase?e.$evalAsync(a):e.$apply(a))})}}}}}],Xa=/(\s+|^)default(\s+|$)/;function Ka(e){this.$$options=e}Ka.prototype={getOption:function(e){return this.$$options[e]},createChild:function(n){var i=!1;return he(n=fe({},n),function(e,t){"$inherit"===e?"*"===t?i=!0:(n[t]=this.$$options[t],"updateOn"===t&&(n.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===t&&(n.updateOnDefault=!1,n[t]=Me(e.replace(Xa,function(){return n.updateOnDefault=!0," "})))},this),i&&(delete n["*"],Za(n,this.$$options)),Za(n,Wa.$$options),new Ka(n)}},Wa=new Ka({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Qa=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Wa,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}};function Za(n,e){he(e,function(e,t){_e(n[t])||(n[t]=e)})}var Ja=Nr({terminal:!0,priority:1e3}),es=A("ngOptions"),ts=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ns=["$compile","$document","$parse",function(g,v,E){var _=$.document.createElement("option"),y=$.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,i){i[0].registerOption=me},post:function(e,s,t,n){for(var o=n[0],l=n[1],u=t.multiple,i=0,r=s.children(),a=r.length;i<a;i++)if(""===r[i].value){o.hasEmptyOption=!0,o.emptyOption=r.eq(i);break}s.empty();var c,d=!!o.emptyOption;ce(_.cloneNode(!1)).val("?");var h=function(e,t,h){var d=e.match(ts);if(!d)throw es("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Ie(t));var n=d[5]||d[7],i=d[6],r=/ as /.test(d[0])&&d[1],f=d[9],a=E(d[2]?d[1]:n),p=r&&E(r)||a,s=f&&E(f),m=f?function(e,t){return s(h,t)}:function(e){return Ut(e)},g=function(e,t){return m(e,b(e,t))},v=E(d[2]||d[1]),_=E(d[3]||""),y=E(d[4]||""),x=E(d[8]),o={},b=i?function(e,t){return o[i]=t,o[n]=e,o}:function(e){return o[n]=e,o};function T(e,t,n,i,r){this.selectValue=e,this.viewValue=t,this.label=n,this.group=i,this.disabled=r}function S(e){var t;if(!i&&L(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}return{trackBy:f,getTrackByValue:g,getWatchables:E(x,function(e){for(var t=[],n=S(e=e||[]),i=n.length,r=0;r<i;r++){var a=e===n?r:n[r],s=e[a],o=b(s,a),l=m(s,o);if(t.push(l),d[2]||d[1]){var u=v(h,o);t.push(u)}if(d[4]){var c=y(h,o);t.push(c)}}return t}),getOptions:function(){for(var e=[],t={},n=x(h)||[],i=S(n),r=i.length,a=0;a<r;a++){var s=n===i?a:i[a],o=n[s],l=b(o,s),u=p(h,l),c=m(u,l),d=new T(c,u,v(h,l),_(h,l),y(h,l));e.push(d),t[c]=d}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[g(e)]},getViewValueFromOption:function(e){return f?U(e.viewValue):e.viewValue}}}}}(t.ngOptions,s,e),f=v[0].createDocumentFragment();function p(e,t){var n,i,r=_.cloneNode(!1);t.appendChild(r),i=r,((n=e).element=i).disabled=n.disabled,n.label!==i.label&&(i.label=n.label,i.textContent=n.label),i.value=n.selectValue}function m(e){var t=c.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}o.generateUnknownOptionValue=function(e){return"?"},u?(o.writeValue=function(e){if(c){var t=e&&e.map(m)||[];c.items.forEach(function(e){e.element.selected&&!N(t,e)&&(e.element.selected=!1)})}},o.readValue=function(){var e=s.val()||[],n=[];return he(e,function(e){var t=c.selectValueMap[e];t&&!t.disabled&&n.push(c.getViewValueFromOption(t))}),n},h.trackBy&&e.$watchCollection(function(){if(be(l.$viewValue))return l.$viewValue.map(function(e){return h.getTrackByValue(e)})},function(){l.$render()})):(o.writeValue=function(e){if(c){var t=s[0].options[s[0].selectedIndex],n=c.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(o.removeUnknownOption(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):o.selectUnknownOrEmptyOption(e)}},o.readValue=function(){var e=c.selectValueMap[s.val()];return e&&!e.disabled?(o.unselectEmptyOption(),o.removeUnknownOption(),c.getViewValueFromOption(e)):null},h.trackBy&&e.$watch(function(){return h.getTrackByValue(l.$viewValue)},function(){l.$render()})),d&&(g(o.emptyOption)(e),s.prepend(o.emptyOption),o.emptyOption[0].nodeType===ze?(o.hasEmptyOption=!1,o.registerOption=function(e,t){""===t.val()&&(o.hasEmptyOption=!0,o.emptyOption=t,o.emptyOption.removeClass("ng-scope"),l.$render(),t.on("$destroy",function(){var e=o.$isEmptyOptionSelected();o.hasEmptyOption=!1,o.emptyOption=void 0,e&&l.$render()}))}):o.emptyOption.removeClass("ng-scope")),e.$watchCollection(h.getWatchables,function(){var e=c&&o.readValue();if(c)for(var t=c.items.length-1;0<=t;t--){var n=c.items[t];_e(n.group)?At(n.element.parentNode):At(n.element)}c=h.getOptions();var i={};if(c.items.forEach(function(e){var t;_e(e.group)?((t=i[e.group])||(t=y.cloneNode(!1),f.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),p(e,t)):p(e,f)}),s[0].appendChild(f),l.$render(),!l.$isEmpty(e)){var r=o.readValue(),a=h.trackBy||u;(a?Re(e,r):e===r)||(l.$setViewValue(r),l.$render())}})}}}}],is=["$locale","$interpolate","$log",function(p,m,g){var v=/{}/g,_=/^when(Minus)?(.+)$/;return{link:function(r,a,s){var o,e=s.count,l=s.$attr.when&&a.attr(s.$attr.when),u=s.offset||0,c=r.$eval(l)||{},d={},t=m.startSymbol(),n=m.endSymbol(),i=t+e+"-"+u+n,h=y.noop;function f(e){a.text(e||"")}he(s,function(e,t){var n=_.exec(t);if(n){var i=(n[1]?"-":"")+V(n[2]);c[i]=a.attr(s.$attr[t])}}),he(c,function(e,t){d[t]=m(e.replace(v,i))}),r.$watch(e,function(e){var t=parseFloat(e),n=P(t);if(n||t in c||(t=p.pluralCat(t-u)),!(t===o||n&&P(o))){h();var i=d[t];ve(i)?(null!=e&&g.debug("ngPluralize: no rule defined for '"+t+"' in "+l),h=me,f()):h=r.$watch(i,f),o=t}})}}}],rs=["$parse","$animate","$compile",function(l,R,u){var D="$$NG_REMOVED",k=A("ngRepeat"),I=function(e,t,n,i,r,a,s){e[n]=i,r&&(e[r]=a),e.$index=t,e.$first=0===t,e.$last=t===s-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,t){var T=t.ngRepeat,S=u.$$createComment("end ngRepeat",T),n=T.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n)throw k("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",T);var i=n[1],r=n[2],E=n[3],a=n[4];if(!(n=i.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw k("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",i);var s,w,M,A,C=n[3]||n[1],P=n[2];if(E&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(E)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(E)))throw k("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",E);var o={$id:Ut};return a?s=l(a):(M=function(e,t){return Ut(t)},A=function(e){return e}),function(_,y,e,t,x){s&&(w=function(e,t,n){return P&&(o[P]=e),o[C]=t,o.$index=n,s(_,o)});var b=$e();_.$watchCollection(r,function(e){var i,t,n,r,a,s,o,l,u,c,d,h,f,p=y[0],m=$e();if(E&&(_[E]=e),L(e))u=e,l=w||M;else for(var g in l=w||A,u=[],e)j.call(e,g)&&"$"!==g.charAt(0)&&u.push(g);for(r=u.length,d=new Array(r),i=0;i<r;i++)if(a=e===u?i:u[i],s=e[a],o=l(a,s,i),b[o])c=b[o],delete b[o],m[o]=c,d[i]=c;else{if(m[o])throw he(d,function(e){e&&e.scope&&(b[e.id]=e)}),k("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",T,o,s);d[i]={id:o,scope:void 0,clone:void 0},m[o]=!0}for(var v in b){if(h=Be((c=b[v]).clone),R.leave(h),h[0].parentNode)for(i=0,t=h.length;i<t;i++)h[i][D]=!0;c.scope.$destroy()}for(i=0;i<r;i++)if(a=e===u?i:u[i],s=e[a],(c=d[i]).scope){for(n=p;(n=n.nextSibling)&&n[D];);c.clone[0]!==n&&R.move(Be(c.clone),null,p),p=(f=c).clone[f.clone.length-1],I(c.scope,i,C,s,P,a,r)}else x(function(e,t){c.scope=t;var n=S.cloneNode(!1);e[e.length++]=n,R.enter(e,null,p),p=n,c.clone=e,m[c.id]=c,I(c.scope,i,C,s,P,a,r)});b=m})}}}}],as="ng-hide-animate",ss=["$animate",function(i){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngShow,function(e){i[e?"removeClass":"addClass"](t,"ng-hide",{tempClasses:as})})}}}],os=["$animate",function(i){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngHide,function(e){i[e?"addClass":"removeClass"](t,"ng-hide",{tempClasses:as})})}}}],ls=Nr(function(e,n,t){e.$watch(t.ngStyle,function(e,t){t&&e!==t&&he(t,function(e,t){n.css(t,"")}),e&&n.css(e)},!0)}),us=["$animate","$compile",function(c,d){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(e,t,n,r){var i=n.ngSwitch||n.on,a=[],s=[],o=[],l=[],u=function(t,n){return function(e){!1!==e&&t.splice(n,1)}};e.$watch(i,function(e){for(var t,n;o.length;)c.cancel(o.pop());for(t=0,n=l.length;t<n;++t){var i=Be(s[t].clone);l[t].$destroy(),(o[t]=c.leave(i)).done(u(o,t))}s.length=0,l.length=0,(a=r.cases["!"+e]||r.cases["?"])&&he(a,function(r){r.transclude(function(e,t){l.push(t);var n=r.element;e[e.length++]=d.$$createComment("end ngSwitchWhen");var i={clone:e};s.push(i),c.enter(e,n.parent(),n)})})})}}}],cs=Nr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){he(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){i.cases["!"+e]=i.cases["!"+e]||[],i.cases["!"+e].push({transclude:r,element:t})})}}),ds=Nr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),hs=A("ngTransclude"),fs=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var o=t(e.contents());return e.empty(),function(e,n,t,i,r){if(!r)throw hs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Ie(n));t.ngTransclude===t.$attr.ngTransclude&&(t.ngTransclude="");var a=t.ngTransclude||t.ngTranscludeSlot;function s(){o(e,function(e){n.append(e)})}r(function(e,t){e.length&&function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i.nodeType!==He||i.nodeValue.trim())return!0}}(e)?n.append(e):(s(),t.$destroy())},null,a),a&&!r.isSlotFilled(a)&&s()}}}}],ps=["$templateCache",function(r){return{restrict:"E",terminal:!0,compile:function(e,t){if("text/ng-template"===t.type){var n=t.id,i=e[0].text;r.put(n,i)}}}}],ms={$setViewValue:me,$render:me};function gs(e,t){e.prop("selected",t),e.attr("selected",t)}var vs=["$element","$scope",function(r,t){var o=this,i=new $t;o.selectValueMap={},o.ngModelCtrl=ms,o.multiple=!1,o.unknownOption=ce($.document.createElement("option")),o.hasEmptyOption=!1,o.emptyOption=void 0,o.renderUnknownOption=function(e){var t=o.generateUnknownOptionValue(e);o.unknownOption.val(t),r.prepend(o.unknownOption),gs(o.unknownOption,!0),r.val(t)},o.updateUnknownOption=function(e){var t=o.generateUnknownOptionValue(e);o.unknownOption.val(t),gs(o.unknownOption,!0),r.val(t)},o.generateUnknownOptionValue=function(e){return"? "+Ut(e)+" ?"},o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.selectEmptyOption=function(){o.emptyOption&&(r.val(""),gs(o.emptyOption,!0))},o.unselectEmptyOption=function(){o.hasEmptyOption&&gs(o.emptyOption,!1)},t.$on("$destroy",function(){o.renderUnknownOption=me}),o.readValue=function(){var e=r.val(),t=e in o.selectValueMap?o.selectValueMap[e]:e;return o.hasOption(t)?t:null},o.writeValue=function(e){var t=r[0].options[r[0].selectedIndex];if(t&&gs(ce(t),!1),o.hasOption(e)){o.removeUnknownOption();var n=Ut(e);r.val(n in o.selectValueMap?n:e);var i=r[0].options[r[0].selectedIndex];gs(ce(i),!0)}else o.selectUnknownOrEmptyOption(e)},o.addOption=function(e,t){if(t[0].nodeType!==ze){Ue(e,'"option value"'),""===e&&(o.hasEmptyOption=!0,o.emptyOption=t);var n=i.get(e)||0;i.set(e,n+1),l()}},o.removeOption=function(e){var t=i.get(e);t&&(1===t?(i.delete(e),""===e&&(o.hasEmptyOption=!1,o.emptyOption=void 0)):i.set(e,t-1))},o.hasOption=function(e){return!!i.get(e)},o.$hasEmptyOption=function(){return o.hasEmptyOption},o.$isUnknownOptionSelected=function(){return r[0].options[0]===o.unknownOption[0]},o.$isEmptyOptionSelected=function(){return o.hasEmptyOption&&r[0].options[r[0].selectedIndex]===o.emptyOption[0]};var e=!(o.selectUnknownOrEmptyOption=function(e){null==e&&o.emptyOption?(o.removeUnknownOption(),o.selectEmptyOption()):o.unknownOption.parent().length?o.updateUnknownOption(e):o.renderUnknownOption(e)});function l(){e||(e=!0,t.$$postDigest(function(){e=!1,o.ngModelCtrl.$render()}))}var n=!1;function u(e){n||(n=!0,t.$$postDigest(function(){t.$$destroyed||(n=!1,o.ngModelCtrl.$setViewValue(o.readValue()),e&&o.ngModelCtrl.$render())}))}o.registerOption=function(e,i,r,t,n){if(r.$attr.ngValue){var a,s=NaN;r.$observe("value",function(e){var t,n=i.prop("selected");_e(s)&&(o.removeOption(a),delete o.selectValueMap[s],t=!0),s=Ut(e),a=e,o.selectValueMap[s]=e,o.addOption(e,i),i.attr("value",s),t&&n&&u()})}else t?r.$observe("value",function(e){var t;o.readValue();var n=i.prop("selected");_e(a)&&(o.removeOption(a),t=!0),a=e,o.addOption(e,i),t&&n&&u()}):n?e.$watch(n,function(e,t){r.$set("value",e);var n=i.prop("selected");t!==e&&o.removeOption(t),o.addOption(e,i),t&&n&&u()}):o.addOption(r.value,i);r.$observe("disabled",function(e){("true"===e||e&&i.prop("selected"))&&(o.multiple?u(!0):(o.ngModelCtrl.$setViewValue(null),o.ngModelCtrl.$render()))}),i.on("$destroy",function(){var e=o.readValue(),t=r.value;o.removeOption(t),l(),(o.multiple&&e&&-1!==e.indexOf(t)||e===t)&&u(!0)})}}],_s=function(){return{restrict:"E",require:["select","?ngModel"],controller:vs,priority:1,link:{pre:function(e,t,n,i){var r=i[0],a=i[1];if(!a)return void(r.registerOption=me);if(r.ngModelCtrl=a,t.on("change",function(){r.removeUnknownOption(),e.$apply(function(){a.$setViewValue(r.readValue())})}),n.multiple){r.multiple=!0,r.readValue=function(){var n=[];return he(t.find("option"),function(e){if(e.selected&&!e.disabled){var t=e.value;n.push(t in r.selectValueMap?r.selectValueMap[t]:t)}}),n},r.writeValue=function(i){he(t.find("option"),function(e){var t=!!i&&(N(i,e.value)||N(i,r.selectValueMap[e.value])),n=e.selected;t!==n&&gs(ce(e),t)})};var s,o=NaN;e.$watch(function(){o!==a.$viewValue||Re(s,a.$viewValue)||(s=We(a.$viewValue),a.$render()),o=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}}},post:function(e,t,n,i){var r=i[1];if(!r)return;var a=i[0];r.$render=function(){a.writeValue(r.$viewValue)}}}}},ys=["$interpolate",function(n){return{restrict:"E",priority:100,compile:function(e,t){var s,o;return _e(t.ngValue)||(_e(t.value)?s=n(t.value,!0):(o=n(e.text(),!0))||t.$set("value",e.text())),function(e,t,n){var i="$selectController",r=t.parent(),a=r.data(i)||r.parent().data(i);a&&a.registerOption(e,t,n,s,o)}}}}],xs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},bs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r,a=n.ngPattern||n.pattern;n.$observe("pattern",function(e){if(xe(e)&&0<e.length&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw A("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,Ie(t));r=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||ve(r)||r.test(t)}}}}},Ts=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=-1;n.$observe("maxlength",function(e){var t=x(e);r=P(t)?-1:t,i.$validate()}),i.$validators.maxlength=function(e,t){return r<0||i.$isEmpty(t)||t.length<=r}}}}},Ss=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("minlength",function(e){r=x(e)||0,i.$validate()}),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=r}}}}};$.angular.bootstrap?$.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var r;if(!ue){var e=B();(s=ve(e)?$.jQuery:e?$[e]:void 0)&&s.fn.on?(fe((ce=s).fn,{scope:Pt.scope,isolateScope:Pt.isolateScope,controller:Pt.controller,injector:Pt.injector,inheritedData:Pt.inheritedData}),r=s.cleanData,s.cleanData=function(e){for(var t,n,i=0;null!=(n=e[i]);i++)(t=s._data(n,"events"))&&t.$destroy&&s(n).triggerHandler("$destroy");r(e)}):ce=ft,y.element=ce,ue=!0}}(),fe(y,{errorHandlingConfig:e,bootstrap:ae,copy:U,extend:fe,merge:r,equals:Re,element:ce,forEach:he,injector:Kt,noop:me,bind:ke,toJson:q,fromJson:W,identity:ge,isUndefined:ve,isDefined:_e,isString:xe,isFunction:Se,isObject:ye,isNumber:S,isElement:O,isArray:be,version:Xe,isDate:E,lowercase:V,uppercase:c,callbacks:{$$counter:0},getTestability:oe,reloadWithDebugInfo:se,$$minErr:A,$$csp:F,$$encodeUriSegment:ee,$$encodeUriQuery:te,$$stringify:je}),(g=function(e){var d=A("$injector"),h=A("ng");function t(e,t,n){return e[t]||(e[t]=n())}var n=t(e,"angular",Object);return n.$$minErr=n.$$minErr||A,t(n,"module",function(){var e={};return function(o,l,u){var c={};return function(e,t){if("hasOwnProperty"===e)throw h("badname","hasOwnProperty is not a valid {0} name",t)}(o,"module"),l&&e.hasOwnProperty(o)&&(e[o]=null),t(e,o,function(){if(!l)throw d("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",o);var a=[],e=[],t=[],n=i("$injector","invoke","push",e),s={_invokeQueue:a,_configBlocks:e,_runBlocks:t,info:function(e){if(_e(e)){if(!ye(e))throw h("aobj","Argument '{0}' must be an object","value");return c=e,this}return c},requires:l,name:o,provider:r("$provide","provider"),factory:r("$provide","factory"),service:r("$provide","service"),value:i("$provide","value"),constant:i("$provide","constant","unshift"),decorator:r("$provide","decorator",e),animation:r("$animateProvider","register"),filter:r("$filterProvider","register"),controller:r("$controllerProvider","register"),directive:r("$compileProvider","directive"),component:r("$compileProvider","component"),config:n,run:function(e){return t.push(e),this}};return u&&n(u),s;function i(e,t,n,i){return i||(i=a),function(){return i[n||"push"]([e,t,arguments]),s}}function r(n,i,r){return r||(r=a),function(e,t){return t&&Se(t)&&(t.$$moduleName=o),r.push([n,i,arguments]),s}}})}})}($))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:zi}),e.provider("$compile",gn).directive({a:Ur,input:_a,textarea:_a,form:zr,script:ps,select:_s,option:ys,ngBind:ba,ngBindHtml:Sa,ngBindTemplate:Ta,ngClass:Ma,ngClassEven:Ca,ngClassOdd:Aa,ngCloak:Pa,ngController:Ra,ngForm:Gr,ngHide:os,ngIf:Ia,ngInclude:La,ngInit:Na,ngNonBindable:Ja,ngPluralize:is,ngRepeat:rs,ngShow:ss,ngStyle:ls,ngSwitch:us,ngSwitchWhen:cs,ngSwitchDefault:ds,ngOptions:ns,ngTransclude:fs,ngModel:Ya,ngList:Ua,ngChange:Ea,pattern:bs,ngPattern:bs,required:xs,ngRequired:xs,minlength:Ss,ngMinlength:Ss,maxlength:Ts,ngMaxlength:Ts,ngValue:xa,ngModelOptions:Qa}).directive({ngInclude:Oa}).directive(Fr).directive(Da),e.provider({$anchorScroll:Qt,$animate:sn,$animateCss:un,$$animateJs:rn,$$animateQueue:an,$$AnimateRunner:ln,$$animateAsyncRun:on,$browser:dn,$cacheFactory:hn,$controller:wn,$document:Mn,$$isDocumentHidden:An,$exceptionHandler:Cn,$filter:cr,$$forceReflow:Pn,$interpolate:Yn,$interval:Xn,$http:zn,$httpParamSerializer:Un,$httpParamSerializerJQLike:Fn,$httpBackend:qn,$xhrFactory:Gn,$jsonpCallbacks:Kn,$location:pi,$log:mi,$parse:Oi,$rootScope:Hi,$q:Ni,$$q:Ui,$sce:Qi,$sceDelegate:Ki,$sniffer:Zi,$templateCache:fn,$templateRequest:er,$$testability:tr,$timeout:nr,$window:or,$$rAF:Vi,$$jqLite:Nt,$$Map:jt,$$cookieReader:ur})}]).info({angularVersion:"1.6.5"}),y.module("ngLocale",[],["$provide",function(e){var r="one",a="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var n=0|e,i=function(e,t){var n,i,r=t;void 0===r&&(r=Math.min((n=e,-1==(i=(n+="").indexOf("."))?0:n.length-i-1),3));var a=Math.pow(10,r);return{v:r,f:(e*a|0)%a}}(e,t);return 1==n&&0==i.v?r:a}})}]),ce(function(){re($.document,ae)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(e,x){"use strict";var a,s,t,b,n,i=x.module("ngRoute",[]).info({angularVersion:"1.6.5"}).provider("$route",function(){function _(e,t){return x.extend(Object.create(e),t)}a=x.isArray,s=x.isObject,t=x.isDefined,b=x.noop;var y={};function r(e,t){var n=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},s=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(e,t,n,i){var r="?"===i||"*?"===i?"?":null,a="*"===i||"*?"===i?"*":null;return s.push({name:n,optional:!!r}),t=t||"",(r?"":t)+"(?:"+(r?t:"")+(a?"(.+?)":"([^/]+)")+(r||"")+")"+(r||"")}).replace(/([/$*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",n?"i":""),i}this.when=function(e,t){var n=function(e,t){if(a(e)){t=t||[];for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}else if(s(e))for(var r in t=t||{},e)"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r]);return t||e}(t);if(x.isUndefined(n.reloadOnSearch)&&(n.reloadOnSearch=!0),x.isUndefined(n.caseInsensitiveMatch)&&(n.caseInsensitiveMatch=this.caseInsensitiveMatch),y[e]=x.extend(n,e&&r(e,n)),e){var i="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/";y[i]=x.extend({redirectTo:e},r(i,n))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},n=!0,this.eagerInstantiationEnabled=function(e){return t(e)?(n=e,this):n},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(r,a,s,o,l,i,u,e){var c,d,h=!1,f={routes:y,reload:function(){var e={defaultPrevented:!(h=!0),preventDefault:function(){this.defaultPrevented=!0,h=!1}};r.$evalAsync(function(){t(e),e.defaultPrevented||n()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw T("norout","Tried updating route when with no current route");e=x.extend({},this.current.params,e),a.path(v(this.current.$$route.originalPath,e)),a.search(e)}};return r.$on("$locationChangeStart",t),r.$on("$locationChangeSuccess",n),f;function t(e){var n,i,t=f.current;x.forEach(y,function(e,t){!i&&(n=function(e,t){var n=t.keys,i={};if(!t.regexp)return null;var r=t.regexp.exec(e);if(!r)return null;for(var a=1,s=r.length;a<s;++a){var o=n[a-1],l=r[a];o&&l&&(i[o.name]=l)}return i}(a.path(),e))&&((i=_(e,{params:x.extend({},a.search(),n),pathParams:n})).$$route=e)}),c=i||y.null&&_(y.null,{params:{},pathParams:{}}),(d=c&&t&&c.$$route===t.$$route&&x.equals(c.pathParams,t.pathParams)&&!c.reloadOnSearch&&!h)||!t&&!c||r.$broadcast("$routeChangeStart",c,t).defaultPrevented&&e&&e.preventDefault()}function n(){var t=f.current,n=c;if(d)t.params=n.params,x.copy(t.params,s),r.$broadcast("$routeUpdate",t);else if(n||t){h=!1,f.current=n;var i=o.resolve(n);e.$$incOutstandingRequestCount(),i.then(p).then(m).then(function(e){return e&&i.then(g).then(function(e){n===f.current&&(n&&(n.locals=e,x.copy(n.params,s)),r.$broadcast("$routeChangeSuccess",n,t))})}).catch(function(e){n===f.current&&r.$broadcast("$routeChangeError",n,t,e)}).finally(function(){e.$$completeOutstandingRequest(b)})}}function p(e){var t={route:e,hasRedirection:!1};if(e)if(e.redirectTo)if(x.isString(e.redirectTo))t.path=v(e.redirectTo,e.params),t.search=e.params,t.hasRedirection=!0;else{var n=a.path(),i=a.search(),r=e.redirectTo(e.pathParams,n,i);x.isDefined(r)&&(t.url=r,t.hasRedirection=!0)}else if(e.resolveRedirectTo)return o.resolve(l.invoke(e.resolveRedirectTo)).then(function(e){return x.isDefined(e)&&(t.url=e,t.hasRedirection=!0),t});return t}function m(e){var t=!0;if(e.route!==f.current)t=!1;else if(e.hasRedirection){var n=a.url(),i=e.url;i?a.url(i).replace():i=a.path(e.path).search(e.search).replace().url(),i!==n&&(t=!1)}return t}function g(e){if(e){var n=x.extend({},e.resolve);x.forEach(n,function(e,t){n[t]=x.isString(e)?l.get(e):l.invoke(e,null,null,t)});var t=function(e){var t,n;x.isDefined(t=e.template)?x.isFunction(t)&&(t=t(e.params)):x.isDefined(n=e.templateUrl)&&(x.isFunction(n)&&(n=n(e.params)),x.isDefined(n)&&(e.loadedTemplateUrl=u.valueOf(n),t=i(n)));return t}(e);return x.isDefined(t)&&(n.$template=t),o.all(n)}}function v(e,r){var a=[];return x.forEach((e||"").split(":"),function(e,t){if(0===t)a.push(e);else{var n=e.match(/(\w+)(?:[?*])?(.*)/),i=n[1];a.push(r[i]),a.push(n[2]||""),delete r[i]}}),a.join("")}}]}).run(r),T=x.$$minErr("ngRoute");function r(e){n&&e.get("$route")}function o(f,p,m){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,s,e,t,o){var l,u,n,c=e.autoscroll,d=e.onload||"";function h(){n&&(m.cancel(n),n=null),l&&(l.$destroy(),l=null),u&&((n=m.leave(u)).done(function(e){!1!==e&&(n=null)}),u=null)}function i(){var e=f.current&&f.current.locals,t=e&&e.$template;if(x.isDefined(t)){var n=a.$new(),i=f.current,r=o(n,function(e){m.enter(e,null,u||s).done(function(e){!1===e||!x.isDefined(c)||c&&!a.$eval(c)||p()}),h()});u=r,(l=i.scope=n).$emit("$viewContentLoaded"),l.$eval(d)}else h()}a.$on("$routeChangeSuccess",i),i()}}}function l(s,o,l){return{restrict:"ECA",priority:-400,link:function(e,t){var n=l.current,i=n.locals;t.html(i.$template);var r=s(t.contents());if(n.controller){i.$scope=e;var a=o(n.controller,i);n.controllerAs&&(e[n.controllerAs]=a),t.data("$ngControllerController",a),t.children().data("$ngControllerController",a)}e[n.resolveAs||"$resolve"]=i,r(e)}}}r.$inject=["$injector"],i.provider("$routeParams",function(){this.$get=function(){return{}}}),i.directive("ngView",o),i.directive("ngView",l),o.$inject=["$route","$anchorScroll","$animate"],l.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,S){"use strict";var t=S.module("ngTouch",[]);function n(t,n){var i=!1,r=!1;this.ngClickOverrideEnabled=function(e){return S.isDefined(e)?(e&&!r&&(r=!0,a.$$moduleName="ngTouch",n.directive("ngClick",a),t.decorator("ngClickDirective",["$delegate",function(e){if(i)e.shift();else for(var t=e.length-1;0<=t;){if("ngTouch"===e[t].$$moduleName){e.splice(t,1);break}t--}return e}])),i=e,this):i},this.$get=function(){return{ngClickOverrideEnabled:function(){return i}}}}t.info({angularVersion:"1.6.5"}),t.provider("$touch",n),n.$inject=["$provide","$compileProvider"],t.factory("$swipe",[function(){var r={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function u(e){var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],i=t.changedTouches&&t.changedTouches[0]||n[0];return{x:i.clientX,y:i.clientY}}function c(e,n){var i=[];return S.forEach(e,function(e){var t=r[e][n];t&&i.push(t)}),i.join(" ")}return{bind:function(e,n,t){var i,r,a,s,o=!1;t=t||["mouse","touch","pointer"],e.on(c(t,"start"),function(e){a=u(e),o=!0,r=i=0,s=a,n.start&&n.start(a,e)});var l=c(t,"cancel");l&&e.on(l,function(e){o=!1,n.cancel&&n.cancel(e)}),e.on(c(t,"move"),function(e){if(o&&a){var t=u(e);if(i+=Math.abs(t.x-s.x),r+=Math.abs(t.y-s.y),s=t,!(i<10&&r<10))return i<r?(o=!1,void(n.cancel&&n.cancel(e))):(e.preventDefault(),void(n.move&&n.move(t,e)))}}),e.on(c(t,"end"),function(e){o&&(o=!1,n.end&&n.end(u(e),e))})}}}]);var a=["$parse","$timeout","$rootElement",function(e,r,v){var _,y,a,s=2500,l=25,o="ng-click-active";function x(e,t,n){for(var i=0;i<e.length;i+=2)if(r=e[i],a=e[i+1],s=t,o=n,Math.abs(r-s)<l&&Math.abs(a-o)<l)return e.splice(i,i+2),!0;var r,a,s,o;return!1}function b(e){if(!(Date.now()-_>s)){var t,n=e.touches&&e.touches.length?e.touches:[e],i=n[0].clientX,r=n[0].clientY;if(!(i<1&&r<1))if(!a||a[0]!==i||a[1]!==r)a&&(a=null),"label"===(t=e.target,S.lowercase(t.nodeName||t[0]&&t[0].nodeName))&&(a=[i,r]),x(y,i,r)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur&&e.target.blur())}}function T(e){var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].clientX,i=t[0].clientY;y.push(n,i),r(function(){for(var e=0;e<y.length;e+=2)if(y[e]===n&&y[e+1]===i)return void y.splice(e,e+2)},s,!1)}return function(n,u,c){var d,h,f,p,i=e(c.ngClick),m=!1;function g(){m=!1,u.removeClass(o)}u.on("touchstart",function(e){m=!0,3===(d=e.target?e.target:e.srcElement).nodeType&&(d=d.parentNode),u.addClass(o),h=Date.now();var t=e.originalEvent||e,n=(t.touches&&t.touches.length?t.touches:[t])[0];f=n.clientX,p=n.clientY}),u.on("touchcancel",function(e){g()}),u.on("touchend",function(e){var t,n,i=Date.now()-h,r=e.originalEvent||e,a=(r.changedTouches&&r.changedTouches.length?r.changedTouches:r.touches&&r.touches.length?r.touches:[r])[0],s=a.clientX,o=a.clientY,l=Math.sqrt(Math.pow(s-f,2)+Math.pow(o-p,2));m&&i<750&&l<12&&(t=s,n=o,y||(v[0].addEventListener("click",b,!0),v[0].addEventListener("touchstart",T,!0),y=[]),_=Date.now(),x(y,t,n),d&&d.blur(),S.isDefined(c.disabled)&&!1!==c.disabled||u.triggerHandler("click",[e])),g()}),u.onclick=function(e){},u.on("click",function(e,t){n.$apply(function(){i(n,{$event:t||e})})}),u.on("mousedown",function(e){u.addClass(o)}),u.on("mousemove mouseup",function(e){u.removeClass(o)})}}];function i(u,c,d){t.directive(u,["$parse","$swipe",function(o,l){return function(n,i,e){var r,a,s=o(e[u]);var t=["touch"];S.isDefined(e.ngSwipeDisableMouse)||t.push("mouse"),l.bind(i,{start:function(e,t){r=e,a=!0},cancel:function(e){a=!1},end:function(e,t){(function(e){if(!r)return!1;var t=Math.abs(e.y-r.y),n=(e.x-r.x)*c;return a&&t<75&&0<n&&30<n&&t/n<.3})(e)&&n.$apply(function(){i.triggerHandler(d),s(n,{$event:t})})}},t)}}])}i("ngSwipeLeft",-1,"swipeleft"),i("ngSwipeRight",1,"swiperight")}(window,window.angular),function(e,u){"use strict";function t(e,o,t){var l=t.baseHref(),i=e[0];return function(e,t,n){i.cookie=function(e,t,n){var i,r;r=(n=n||{}).expires,i=u.isDefined(n.path)?n.path:l,u.isUndefined(t)&&(r="Thu, 01 Jan 1970 00:00:00 GMT",t=""),u.isString(r)&&(r=new Date(r));var a=encodeURIComponent(e)+"="+encodeURIComponent(t);a+=i?";path="+i:"",a+=n.domain?";domain="+n.domain:"",a+=r?";expires="+r.toUTCString():"";var s=(a+=n.secure?";secure":"").length+1;return 4096<s&&o.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+s+" > 4096 bytes)!"),a}(e,t,n)}}u.module("ngCookies",["ng"]).info({angularVersion:"1.6.5"}).provider("$cookies",[function(){var t=this.defaults={};function r(e){return e?u.extend({},t,e):t}this.$get=["$$cookieReader","$$cookieWriter",function(t,i){return{get:function(e){return t()[e]},getObject:function(e){var t=this.get(e);return t?u.fromJson(t):t},getAll:function(){return t()},put:function(e,t,n){i(e,t,r(n))},putObject:function(e,t,n){this.put(e,u.toJson(t),n)},remove:function(e,t){i(e,void 0,r(t))}}}]}]),u.module("ngCookies").factory("$cookieStore",["$cookies",function(n){return{get:function(e){return n.getObject(e)},put:function(e,t){n.putObject(e,t)},remove:function(e){n.remove(e)}}}]),t.$inject=["$document","$log","$browser"],u.module("ngCookies").provider("$$cookieWriter",function(){this.$get=t})}(window,window.angular),function(e,t){var A=t.isDefined,C=t.isUndefined,P=t.isNumber,R=t.isObject,D=t.isArray,k=t.isString,I=t.extend,L=t.toJson;t.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/",secure:!1},this.defaultToCookie=!0,this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setDefaultToCookie=function(e){return this.defaultToCookie=!!e,this},this.setStorageCookie=function(e,t,n){return this.cookie.expiry=e,this.cookie.path=t,this.cookie.secure=n,this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse","$timeout",function(l,a,u,s,n){var o,c=this,d=c.prefix,h=c.cookie,r=c.notify,f=c.storageType;u?u[0]&&(u=u[0]):u=document,"."!==d.substr(-1)&&(d=d?d+".":"");var p=function(e){return d+e},i=function(e){return e.replace(new RegExp("^"+d,"g"),"")},m=function(e){return 0===e.indexOf(d)},t=function(){try{var e=f in a&&null!==a[f],t=p("__"+Math.round(1e7*Math.random()));return e&&((o=a[f]).setItem(t,""),o.removeItem(t)),e}catch(e){return c.defaultToCookie&&(f="cookie"),l.$broadcast("LocalStorageModule.notification.error",e.message),!1}},g=t(),v=function(t,n,e){var i=w();try{if(M(e),n=C(n)?null:L(n),!g&&c.defaultToCookie||"cookie"===c.storageType)return g||l.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),r.setItem&&l.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:"cookie"}),b(t,n);try{o&&o.setItem(p(t),n),r.setItem&&l.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:c.storageType})}catch(e){return l.$broadcast("LocalStorageModule.notification.error",e.message),b(t,n)}return!0}finally{M(i)}},_=function(e,t){var n=w();try{if(M(t),!g&&c.defaultToCookie||"cookie"===c.storageType)return g||l.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),T(e);var i=o?o.getItem(p(e)):null;if(!i||"null"===i)return null;try{return JSON.parse(i)}catch(e){return i}}finally{M(n)}},y=function(){var e=w();try{var t,n,i=0;for(1<=arguments.length&&("localStorage"===arguments[arguments.length-1]||"sessionStorage"===arguments[arguments.length-1])&&(i=1,M(arguments[arguments.length-1])),t=0;t<arguments.length-i;t++)if(n=arguments[t],!g&&c.defaultToCookie||"cookie"===c.storageType)g||l.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),r.removeItem&&l.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:"cookie"}),S(n);else try{o.removeItem(p(n)),r.removeItem&&l.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:c.storageType})}catch(e){l.$broadcast("LocalStorageModule.notification.error",e.message),S(n)}}finally{M(e)}},x=function(){try{return a.navigator.cookieEnabled||"cookie"in u&&(0<u.cookie.length||-1<(u.cookie="test").indexOf.call(u.cookie,"test"))}catch(e){return l.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),b=function(e,t,n,i){if(C(t))return!1;if((D(t)||R(t))&&(t=L(t)),!x)return l.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var r="",a=new Date,s="";if(null===t?(a.setTime(a.getTime()+-864e5),r="; expires="+a.toGMTString(),t=""):P(n)&&0!==n?(a.setTime(a.getTime()+24*n*60*60*1e3),r="; expires="+a.toGMTString()):0!==h.expiry&&(a.setTime(a.getTime()+24*h.expiry*60*60*1e3),r="; expires="+a.toGMTString()),e){var o="; path="+h.path;h.domain&&(s="; domain="+h.domain),"boolean"==typeof i?!0===i&&(s+="; secure"):!0===h.secure&&(s+="; secure"),u.cookie=p(e)+"="+encodeURIComponent(t)+r+o+s}}catch(e){return l.$broadcast("LocalStorageModule.notification.error",e.message),!1}return!0},T=function(e){if(!x)return l.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var t=u.cookie&&u.cookie.split(";")||[],n=0;n<t.length;n++){for(var i=t[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(p(e)+"=")){var r=decodeURIComponent(i.substring(d.length+e.length+1,i.length));try{var a=JSON.parse(r);return"number"==typeof a?r:a}catch(e){return r}}}return null},S=function(e){b(e,null)},E=function(){for(var e=null,t=d.length,n=u.cookie.split(";"),i=0;i<n.length;i++){for(e=n[i];" "===e.charAt(0);)e=e.substring(1,e.length);var r=e.substring(t,e.indexOf("="));S(r)}},w=function(){return f},M=function(e){return e&&f!==e&&(f=e,g=t()),g};function e(e){if(e||(e=a.event),r.setItem&&k(e.key)&&m(e.key)){var t=i(e.key);n(function(){l.$broadcast("LocalStorageModule.notification.changed",{key:t,newvalue:e.newValue,storageType:c.storageType})})}}g&&(a.addEventListener?(a.addEventListener("storage",e,!1),l.$on("$destroy",function(){a.removeEventListener("storage",e)})):a.attachEvent&&(a.attachEvent("onstorage",e),l.$on("$destroy",function(){a.detachEvent("onstorage",e)})));return{isSupported:g,getStorageType:w,setStorageType:M,set:v,add:v,get:_,keys:function(e){var t=w();try{if(M(e),!g)return l.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var n=d.length,i=[];for(var r in o)if(r.substr(0,n)===d)try{i.push(r.substr(n))}catch(e){return l.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return i}finally{M(t)}},remove:y,clearAll:function(e,t){var n=w();try{M(t);var i=d?new RegExp("^"+d):new RegExp,r=e?new RegExp(e):new RegExp;if(!g&&c.defaultToCookie||"cookie"===c.storageType)return g||l.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),E();if(!g&&!c.defaultToCookie)return!1;var a=d.length;for(var s in o)if(i.test(s)&&r.test(s.substr(a)))try{y(s.substr(a))}catch(e){return l.$broadcast("LocalStorageModule.notification.error",e.message),E()}return!0}finally{M(n)}},bind:function(e,t,n,i,r){var a=_(i=i||t,r);return null===a&&A(n)?a=n:R(a)&&R(n)&&(a=I(a,n)),s(t).assign(e,a),e.$watch(t,function(e){v(i,e,r)},R(e[t]))},deriveKey:p,underiveKey:i,length:function(e){var t=w();try{M(e);for(var n=0,i=a[f],r=0;r<i.length;r++)0===i.key(r).indexOf(d)&&n++;return n}finally{M(t)}},defaultToCookie:this.defaultToCookie,cookie:{isSupported:x,set:b,add:b,get:T,remove:S,clearAll:E}}}]})}(window,window.angular),function(b,T){"use strict";var S,E,w,M,A,C,P,R,D,k=T.$$minErr("$sanitize");T.module("ngSanitize",[]).provider("$sanitize",function(){var t=!1;this.$get=["$$sanitizeUri",function(n){return t&&E(d,u),function(e){var t=[];return R(e,D(t,function(e,t){return!/^unsafe:/.test(n(e,t))})),t.join("")}}],this.enableSvg=function(e){return M(e)?(t=e,this):t},S=T.bind,E=T.extend,w=T.forEach,M=T.isDefined,A=T.lowercase,C=T.noop,R=function(e,t){null==e?e="":"string"!=typeof e&&(e=""+e);var n=v(e);if(!n)return"";var i=5;do{if(0===i)throw k("uinput","Failed to sanitize html because the input is unstable");i--,e=n.innerHTML,n=v(e)}while(e!==n.innerHTML);for(var r=n.firstChild;r;){switch(r.nodeType){case 1:t.start(r.nodeName.toLowerCase(),_(r.attributes));break;case 3:t.chars(r.textContent)}var a;if(!((a=r.firstChild)||(1===r.nodeType&&t.end(r.nodeName.toLowerCase()),a=x("nextSibling",r))))for(;null==a&&(r=x("parentNode",r))!==n;)a=x("nextSibling",r),1===r.nodeType&&t.end(r.nodeName.toLowerCase());r=a}for(;r=n.firstChild;)n.removeChild(r)},D=function(e,a){var t=!1,s=S(e,e.push);return{start:function(r,e){r=A(r),!t&&c[r]&&(t=r),t||!0!==d[r]||(s("<"),s(r),w(e,function(e,t){var n=A(t),i="img"===r&&"src"===n||"background"===n;!0!==m[n]||!0===h[n]&&!a(e,i)||(s(" "),s(t),s('="'),s(y(e)),s('"'))}),s(">"))},end:function(e){e=A(e),t||!0!==d[e]||!0===r[e]||(s("</"),s(e),s(">")),e==t&&(t=!1)},chars:function(e){t||s(y(e))}}},P=b.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/([^#-~ |!])/g,r=g("area,br,col,hr,img,wbr"),e=g("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a=g("rp,rt"),s=E({},a,e),o=E({},e,g("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),l=E({},a,g("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),u=g("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),c=g("script,style"),d=E({},r,o,l,s),h=g("background,cite,href,longdesc,src,xlink:href"),f=g("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),p=g("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),m=E({},h,p,f);function g(e,t){var n,i={},r=e.split(",");for(n=0;n<r.length;n++)i[t?A(r[n]):r[n]]=!0;return i}var v=function(i,t){var e;if(!t||!t.implementation)throw k("noinert","Can't create an inert html document");var n=((e=t.implementation.createHTMLDocument("inert")).documentElement||e.getDocumentElement()).querySelector("body");return n.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',n.querySelector("svg")?(n.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',n.querySelector("svg img")?function(e){e="<remove></remove>"+e;try{var t=(new i.DOMParser).parseFromString(e,"text/html").body;return t.firstChild.remove(),t}catch(e){return}}:function(e){return n.innerHTML=e,t.documentMode&&function e(t){for(;t;){if(t.nodeType===b.Node.ELEMENT_NODE)for(var n=t.attributes,i=0,r=n.length;i<r;i++){var a=n[i],s=a.name.toLowerCase();"xmlns:ns1"!==s&&0!==s.lastIndexOf("ns1:",0)||(t.removeAttributeNode(a),i--,r--)}var o=t.firstChild;o&&e(o),t=x("nextSibling",t)}}(n),n}):function(e){e="<remove></remove>"+e;try{e=encodeURI(e)}catch(e){return}var t=new i.XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);var n=t.response.body;return n.firstChild.remove(),n}}(b,b.document);function _(e){for(var t={},n=0,i=e.length;n<i;n++){var r=e[n];t[r.name]=r.value}return t}function y(e){return e.replace(/&/g,"&amp;").replace(n,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(i,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function x(e,t){var n=t[e];if(n&&P.call(t,n))throw k("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}}).info({angularVersion:"1.6.5"}),T.module("ngSanitize").filter("linky",["$sanitize",function(d){var h=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,f=/^mailto:/i,p=T.$$minErr("linky"),m=T.isDefined,g=T.isFunction,v=T.isObject,_=T.isString;return function(e,r,t){if(null==e||""===e)return e;if(!_(e))throw p("notstring","Expected string but received: {0}",e);for(var n,i,a,s=g(t)?t:v(t)?function(){return t}:function(){return{}},o=e,l=[];n=o.match(h);)i=n[0],n[2]||n[4]||(i=(n[3]?"http://":"mailto:")+i),a=n.index,u(o.substr(0,a)),c(i,n[0].replace(f,"")),o=o.substring(a+n[0].length);return u(o),d(l.join(""));function u(e){var t,n;e&&l.push((t=e,D(n=[],C).chars(t),n.join("")))}function c(e,t){var n,i=s(e);for(n in l.push("<a "),i)l.push(n+'="'+i[n]+'" ');!m(r)||"target"in i||l.push('target="',r,'" '),l.push('href="',e.replace(/"/g,"&quot;"),'">'),u(t),l.push("</a>")}}}])}(window,window.angular),angular.module("offClick",[]),angular.module("offClick").directive("offClick",["$rootScope","$parse","OffClickFilterCache",function(l,u,a){var c=0,d={},e=!1,t=function(i){if("touchmove"===i.type)return!(e=!0);if(e)return e=!1;var r=i.target||i.srcElement;angular.forEach(d,function(e,t){var n=a["*"]||[];e.elm.id&&""!==e.elm.id&&a["#"+e.elm.id]&&(n=n.concat(a["#"+e.elm.id])),angular.forEach(e.elm.classList,function(e){a["."+e]&&(n=n.concat(a["."+e]))}),e.elm.contains(r)||function(t,e){if(!t||!e)return!1;for(var n=e.length,i=0;i<n;++i){var r=e[i],a=!1;try{a=r.contains(t)}catch(e){void 0!==r.compareDocumentPosition&&(a=r===t||Boolean(16&r.compareDocumentPosition(t)))}if(a)return!0}return!1}(r,n)||l.$evalAsync(function(){e.cb(e.scope,{$event:i})})})};return document.addEventListener("touchmove",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),{restrict:"A",compile:function(e,s){var o=u(s.offClick);return function(e,t){var n=c++,i=void 0,r=function(){d[n]={elm:t[0],cb:o,scope:e}},a=function(){d[n]=null,delete d[n]};s.offClickIf?i=l.$watch(function(){return u(s.offClickIf)(e)},function(e){e&&r()||!e&&a()}):r(),e.$on("$destroy",function(){a(),i&&i(),t=null})}}}}]),angular.module("offClick").directive("offClickFilter",["OffClickFilterCache","$parse",function(i,r){var a=void 0;return{restrict:"A",compile:function(e,n){return function(e,t){(a=r(n.offClickFilter)(e).split(",").map(function(e){return e.trim()})).forEach(function(e){i[e]?i[e].push(t[0]):i[e]=[t[0]]}),e.$on("$destroy",function(){a.forEach(function(e){angular.isArray(i[e])&&1<i[e].length?i[e].splice(i[e].indexOf(t[0]),1):(i[e]=null,delete i[e])}),t=null})}}}}]),angular.module("offClick").factory("OffClickFilterCache",function(){return{}});var _0x926a=["name","callee"," start","debug","XML_PARSER","M3U8_PARSER","Not supported : ","log","  exception occurred ","error"," end","~","*@*","=","","deleteExpiredDataFromLocalStorage","print","print start","getDictionary","getValueForKey"," : ","print  exception occurred ","print end","onError","logDictionary","beaconDictionary","securityInfoDictionary","mediaAnalyticsDictionary","matchDictionary","amaXmlParser startParsing start","isValid","documentElement","Found document element","NO document element found","configDebug","getAttribute","printException","exception","childNodes","current list of child nodes = ","and first child node = ","firstChild"," child element name = ","nodeName","length","Child nodes at 0 = ","tagName","item","beaconId","beaconVersion","isActive","current element tag name = "," and content = ","textContent","addUpdate","logTo","security","bucketInfo","statistics","dataMetrics","getElementsByTagName","uniqueDimensions","amaXmlParser startParsing exception occurred ","amaXmlParser startParsing end","amaXmlParser parseLogInfoData start","amaXmlParser parseLogInfoData start, element name = ","logInterval","isString","trim","isInteger","300","secondaryLogTime","5","isSessionWithRebufferLimit","startupTimeOutlierLimit","rebufferDurationOutlier","Log to parsing = "," node type = ","nodeType","amaXmlParser parseLogInfoData exception occurred ","amaXmlParser parseLogInfoData end","amaXmlParser validateHost start","host","http://","indexOf","https://","amaXmlParser validateHost exception occurred ","amaXmlParser validateHost end","amaXmlParser parseSecurityInfoData start","SecurityEl child name = ","ViewerDiagnostics","viewerDiagnosticEl child name = ","salt","bytes","hashfunction","iterations","value","version","amaXmlParser parseSecurityInfoData exception occurred ","amaXmlParser parseSecurityInfoData end","amaXmlParser parseBucketInfoData start","amaXmlParser parseBucketInfoData exception occurred ","amaXmlParser parseBucketInfoData end","amaXmlParser parseStatisticData start","useKey","amaXmlParser use key is = ","amaXmlParser parseStatisticData exception occurred ","amaXmlParser parseStatisticData end","amaXmlParser parseDataMetricsData start","parentNode","data","key","sendOnce","fallback","size","regExpATV","_cd_","regExp","push","amaXmlParser parseDataMetricsData exception occurred ","amaXmlParser parseDataMetricsData end","amaXmlParser parseMatchMetricsData start","match","type","amaXmlParser parseMatchMetricsData exception occurred ","amaXmlParser parseMatchMetricsData end","prefix","dimension","expiry","parse","amaXmlParser parse start","GET","open","onreadystatechange","readyState","status","responseXML","Invalid XML","Received response beacon xml = ","statusText","amaXmlParser parse error occurred : ","function","send","amaXmlParser parse exception occurred ","amaXmlParser parse end","isCustomDataMetrics","getbeaconStringFromMetrics","isInstanceOf","urlParamSeparator","paramSepartor","encodedParamSeparator","encodedParamSepartor","path","?","One of the value not set host = "," path = ","warn","common",";","split","va","1","setIsVisitStartSent","amaXmlParser getbeaconStringFromMetrics exception occurred ","printConfig",":","concat","keyValuePairSeparator","getTime","isNumber","toFixed","exec","substring","amaXmlParser applyFieldConstraints exception occurred ","amaXmlParser setInfoInLocalStorage ","getDate","setDate","expiryDate","toDateString","stringify","setItem","amaXmlParser setInfoInLocalStorage exception occurred ","amaXmlParser getInfoFromLocalStorage ","getItem","amaXmlParser getInfoFromLocalStorage exception occurred ","clearSendOnceInfo","getOperatingSystemName","toLowerCase","Xbox","compatible","windows","mobile","Windows","x11","Linux","macintosh","mac os","macos","Mac OS","ipad","iPad","iphone","iPhone","ipod","iOS","Android","PlayStation 4","PLAYSTATION 3","PlayStation 3","Others","Exception,  finding Osname","getOperatingSystemVersion","getWindowsVersion","Exception,  OSVersion","6.3","6.2","8","6.1","7","6.0","Vista","5.2","5.1","XP",".","Other","getBrowserName","Version","Exception,  browserName","Edge","substr","/","7.0","MSIE","11.0"," ","Exception,  browserVersion","getDeviceName","iPod","android","Android Device","xbox","Desktop","playstation 4","playstation 3","Exception,  getting device name : ","Debug","reportLogs","processLogs","-","getMonth","getFullYear",",","getHours","getMinutes","getSeconds","getMilliseconds","ERROR","dir","enableDebugLogging","timeInMillisecond","resetTimeSpan","timeInSecond","timeInMicrosecond","userAgent","navigator","build","getOperatingSystemName(): start","isObject","getOperatingSystemName():  _userAgentParser is not defined ","getOperatingSystemName(): end","getOperatingSystemVersion(): start","getOperatingSystemVersion():  _userAgentParser is not defined ","getOperatingSystemVersion(): end","getBrowserInformation(): start","getBrowserInformation():  _userAgentParser is not defined ","getBrowserInformation(): end","getDeviceName(): start","getDeviceName():  _userAgentParser is not defined ","getDeviceName(): end","accept","visit","iterator","browserInfo","getViewerId","getViewerId(): start","akamai_clientId","Exception,  getting viewerId","getViewerId(): end","setViewerId","window.localStorage Exception :","generatePageInformation","generatePageInformation() called","pageUrl","pageReferrer","getHostNameFromUrl","referrer","top","URL","hostname","location","NA","Exception,  generatePageInformation() :","Exception,  getHostNameFromUrl :","parseStreamURL"," components = ","80","stream name is = "," path length= ",".m3u","manifest",".f4m",".mpd","protocol","hostName","port","streamName","hash","hostAndPort","Exception,  parseStreamUrl :","playing","getState","beginState","amaPlayingState beginState start","streamHeadPosition","amaPlayingState beginState end","updateState","amaPlayingState updateState start","bitrate","updateCurrentBitrate","state updated - updating bitrate ","update state current stream head position = "," passed stream head position = ","state updated ","amaPlayingState updateState exception occurred ","amaPlayingState updateState end","updateIteratorData","amaPlayingState getStateData start","GetStateData - bitrateplaytime before update = ","GetStateData - bitrateplaytime after update = ","amaPlayingState getStateData and playclocktime = ","amaPlayingState getStateData - stateData is a valid object  ","streamHeadPos","playTimeSpent","GTST: playtime is not valid","GTST: playtime is valid","U:",",S:",",Q:",",D:","GTST: totalPlayTimeSpent is not valid","GTST: totalPlayTimeSpent is valid","isExist","GTST: bitratePlayTime is not valid","GTST: bitratePlayTime is valid","GTST: bitrateSwitchHeadPosition is not valid","GTST: bitrateSwitchHeadPosition is valid","GTST: averagedBitrateNumerator is not valid","GTST: averagedBitrateNumerator is valid","GTST: averagedBitrateDenominator is not valid","GTST: averagedBitrateDenominator is valid","0","removeAll","amaPlayingState getStateData exception occurred ","amaPlayingState getStateData end","amaPlayingState getTransitionSession start","averagedBitRate","transitionStreamTimeSession","transitionStreamTimes","amaPlayingState getTransitionSession exception occurred ","amaPlayingState getTransitionSession end","amaPlayingState updateCurrentBitrate start","updateCurrentBitrate - bitrateplaytime before update = ","updateCurrentBitrate - bitrateplaytime after update = ","bitrate already exist in the dictionary, bitrate = ","Creating new entry as bitrate is not exist, bitrate = ","Printing bitrate information while updating current bitrate","key : ","and value = ","streamHead = "," playTimeSpent = ","amaPlayingState updateCurrentPlayingBitrate exception occurred ","amaPlayingState updateCurrentPlayingBitrate end","resetState","amaPlayingState resetState start","amaPlayingState resetState end","endState","amaPlayingState endState start","endState - bitrateplaytime before update = ","endState - bitrateplaytime after update = ","previous totalplaystream time while ending playing state = ","totalplaystream time while ending playing state = ","amaPlayingState endState end","initialize","executing reset on init state","rebuffer","executing amaRebufferState begin state","Rebuffer begin state, rebuffer start time= ","rebufferStart","currentLogTime","Calculating rebuffer difference. rebufferStart "," - endOfLastRebuffer ","rebuffer difference is ","Rebuffer start time  = ","amaRebufferState begin exception occurred ","executed amaRebufferState begin state","executing amaRebufferState getStateData","getStateData : state is not valid","currentState","1:","Previous rebuffer was continuous rebuffer","0:","-1","rebuffer diff string = ","Intermediate rebuffer session string = ","getStateData: rebuffer state and rebuffer duration = ","Rebuffer sessions  = ","amaRebufferState getStateData exception occurred ","executed amaRebufferState getStateData","executing rebuffer end state","rebufferEnd","endState: rebuffer state ended and rebuffer duration = ","executed rebuffer end state. rebuffer session = ","executing amaRebufferState reset state","setting isStateValid to false as it is not continuous rebuffer","removing rebufferSession, rebufferCount and rebufferTime ","rebufferSession","removeIfExist","rebufferCount","rebufferTime","executed amaRebufferState reset state","end","amaEndState beginState start","errorCode","amaEndState - setting error code = ","endReasonCode","amaEndState - setting end reason code = ","amaEndState getStateData exception occurred ","amaEndState beginState end","amaEndState udpateIteratorData start","amaEndState getStateData end","amaEndState resetState start","amaEndState resetState end","pause","amaPauseState beginState start","amaPauseState beginState end","amaPauseState endState start","amaPauseState endState end","amaPauseState getStateData start","amaPauseState getStateData exception occurred ","amaPauseState getStateData end","amaPauseState resetState start","amaPauseState resetState end","seek","amaSeekState beginState start","amaSeekState beginState end","amaSeekState endState start","amaSeekState endState end","amaSeekState updateIteratorData start","amaSeekState updateIteratorData exception occurred ","amaSeekState updateIteratorData end","amaSeekState resetState start","amaSeekState resetState end","ad","amaAdState beginState start","adPlayBucket","adStartupTime","adStartup","adFirstQuartile","adMidPoint","adThirdQuartile","adEndStatus","adPlayedCompletely","adCompleted","adStoppedClosed","adStopped","adError","adAppClosed","event","updateParams","adPlayTime","id","adType","startPos","adDuration","isNan","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent","amaEndState updateIteratorData exception occurred ","amaEndState updateIteratorData end","unknown","init","playStart","initState","playStartState","playingState","rebufferState","pauseState","seekState","adState","getCurrentState","getCurrentStateEnum","Receive enum for state is = ","getCurrentMediaState","moveToState","Moving to state ","current state is ","constructor","endStateParam is not amaDictionary. converting it to amaDictionary","endStateParam is amaDictionary","beginStateParam is not amaDictionary. converting it to amaDictionary","Received begin state param = "," for state ","state is invalid","Media states are = ","updateIteratorDataForAllState","I","PL","B","PS","SK","E","updateStateData","updating state with state = ","unknownState","getCurrentStateData","getStateData","endAllStates","end all the states called...","endCurrentState","end current state called...","end state called...","resetAllState","current state while resetting = ","resetting all the states except current state. State = ","resetCurrentState","uninitialize","executing playstart begin state","isFirstTitle","streamURL","blob:","shouldMakeManifestRequest","Received blob as streamURL, rejecting it.","received streamURL = ","getStreamFormat","getDeliveryType","getStreamLength","getStreamName","https","443","parsed stream url and components - stream name = "," host name "," protocol "," duration = ","executed playstart begin state","Setting key values in stateData, Format = "," stream URL = "," Stream Length = "," Stream Name = ","executing playstart end state","executing playstart reset state","executed playstart reset state","getDataStore","foreachKey","getIsVisitStartSent","isVisitStart","addCustomMetric","dataStore","prototype","Play.End.Detected","endOfStream","isSessionWithRebuffer","totalPlayClockTime","eventCode","sequenceId","visitStartupErrors","visitPlayClockTime","playClockTime","visitPlayStreamTime","playStreamTime","visitRebufferCount","visitRebufferTime","visitAttempts","S","visitPlays","visitErrors","V","isVisitEnd","visitInterval","visitDuration","floor","visitMaxPersistentBitRateBucket","visitAdStartCount","adCount","visitAdAbandonCount","adAbandonCount","visitAdPlayClockTime","adPlayClockTime","visitViews","isView","getVisitId","setVisitId","beaconDataStore","customDataStore","networkDataStore","stateMachineDataStore","viewerDataStore","visitDataStore","create","Exception thrown from InheritObject","defineProperty","addUpdateFromDictionary","Content(s) of current dictionary ============"," value : ","============ End of contents","getIndexOf","dictionaryLength","getData","abortRequest","abort","encodeMetricString","%23","replace","amaNetworkUtilities encodeMetricString exception occurred ","setCustomErrorType","customType","Invalid input ","errorDescription","submitAdditionalMessage","additionalMessage","logError","Error name : ",", message : ","message",", custom error type : ","additional message : ","UUID","amaUtility UUID start","random","x","xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx","amaUtility UUID exception occurred ","amaUtility UUID end ","foreachKeyInSet","isArray","isFunction","value for key "," is undefined","isURL","((http|https)(://))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?","i","test","isURL : exception occurred ","parseURLComponents","isvaid","search","isLocalStorageEnabled","isStorageAvailable","AkamaiTest","removeItem","amaStorageManager getItem start","amaStorageManager getItem, Local Storage is not available","LOCAL_STORAGE","SESSION_STORAGE","amaStorageManager getItem exception occurred ","amaStorageManager getItem end : ","undefined","amaStorageManager setItem start","amaStorageManager setItem, Local Storage is not available","amaStorageManager setItem exception occurred ","amaStorageManager setItem end","amaStorageManager removeItem started","amaStorageManager removeItem, Local Storage is not available","amaStorageManager removeItem exception occurred ","amaStorageManager removeItem end","clear","amaStorageManager clear started","amaStorageManager clear, Local Storage is not available","amaStorageManager clear exception occurred ","amaStorageManager clear end","amaStorageManager deleteExpiredDataFromLocalStorage, Local Storage is not available","4.16.25","CoreLibrary","getKey","Local Storage is not available, viewerID will change.","getFactory","startVisitSession","Generated visit id  = ","handleSessionInit","isInitialized","reportSetupParams","setCurrentVersion","getCustomMetricsData","enableLocation","getMetricsData","Generated session id/attempt id ","printDataStore","setCustomDimension","safari","registerForEvent","Sleep tracking disabled","handleSessionInit : exception occurred ","setLoaderInformation","setLoaderInformation : exception occurred ","getEventName","commonEventListener ","handlePlayStart","Sleep","Error.Continous.Rebuffer","handleError","Rebuffer","Unsupported Event","commonEventListener : exception occurred ","accept : exception occurred ","acceptBeaconManager","acceptBeaconManager : exception occurred ","softwareVersion","tvOS-","systemVersion","os","updateMetricData","device","AppleTV","fullOs","playerType","Failed to get software version","received softwareVersion = ","Config parse callback received","Config parse is a valid object","beacon id for the session = ","generateLineData","SMetric","updateViewMetrics","sendBeacon","pop","getViewerDiagnosticsId","this may be an error or some inconsistent state as isConfigReceived can't be true when we receive a callback","configReceived : exception occurred ","P","complete","C","heartBeat","H","feedback","F","beacon to be sent = ","VMetric","Adding beacon to array as config is not yet received","sendBeacon : exception occurred ","getStreamHeadPosition : exception occurred ","bytesLoaded","getBytesLoaded : exception occurred ","droppedFrames","getDroppedFrames : exception occurred ","isLiveStream","getIsLiveStream : exception occurred ","getVisitDuration : exception occurred ","beaconManager","setData","reportAPI","setData : exception occurred ","setViewerId : exception occurred ","setViewerDiagnosticsId","viewerDiagnosticsId","setViewerDiagnosticsId : exception occurred ","setURLManifestContent","setStreamURL","blob url passed, rejecting the url ","cdn","akamai","setStreamDuration","Duration is not valid integer : ","setStreamUrl","handlePlaying","handlePlayStart : exception occurred ","clear secondary log interval after sending first p-beacon","current state enum = ","performServerIPCheck","handleTimerEvent : exception occurred ","handlePlaying inside","config is not yet recieved","handlePlaying outside","handlePlaying : exception occurred ","secondary log interval = "," logInterval = ","secondary log interval in ms = "," logInterval in ms = ","startSessionTimers exception occurred ","startSessionTimers end","handlePause","handlePause : exception occurred ","handleSeekStart","handleSeekStart : exception occurred ","handleBufferStart","rebufferingStarted","handleBufferStart : exception occurred ","handleBufferEnd","rebufferingEnded","handleBufferEnd : exception occurred ","handleBitrateChange","handleBitrateChange : exception occurred ","handlePlayEnd","Title.Switched","handlePlayEnd : exception occurred ","handleError : exception occurred ","disableServerIP","enableServerIPRequest","disableServerIP : exception occurred ","enableServerIP","enableServerIP : exception occurred ","handleStreamSwitch","Stream.Switched","Callback Methods were not provided.","handleTitleSwitch","handleAdLoaded","handleAdStarted","Rejecting handleAdStarted event not in Ad state now","handleAdFirstQuartile","Rejecting handleAdFirstQuartile event not in Ad state now","handleAdMidPoint","Rejecting handleAdMidPoint event not in Ad state now","handleAdThirdQuartile","Rejecting handleAdThirdQuartile event not in Ad state now","handleAdComplete","Rejecting handleAdComplete event not in Ad state now","handleAdSkipped","Rejecting handleAdSkipped event not in Ad state now","handleAdError","Rejecting handleAdError event not in Ad state now","unregisterFromEvent","cleanupSession : exception occurred ","handleVisit","handleVisit : exception occurred ","stopVisitSession","handleVisitCompletion : exception occurred ","handlePlayCompletion : exception occurred ","sdkVersion","handleApplicationExit","Application.Close","handleApplicationExit : exception occurred ","setDebugLogging","bind","locationStatsChanged","enableLocation : exception occurred ","disableLocation","disableLocation : exception occurred ","logMessage","vist","getILineData","Beacon String (Before encoding) : ","Beacon String (After encoding) : ","getSLineData","UDMetric","getPLineData","getCLineData","CMetric","PMetric","getELineData","getVLineData","Data store key values while generating line data for ","EMetric","eventName","title","resetCustomMetricsData","resetAllData","IMetric","HMetric","FMetric","Unsupported beaconType : ","Current values in data stores are ... ","Current values in custom data metrics are ... ","isInfinite","number","object","isFloat","string","variableType","lib","Base","mixIn","$super","extend","apply","hasOwnProperty","toString","WordArray","words","sigBytes","clamp","ceil","call","clone","slice","enc","Hex","join","Latin1","fromCharCode","charCodeAt","Utf8","Malformed UTF-8 data","BufferedBlockAlgorithm","_data","_nDataBytes","blockSize","_minBufferSize","max","min","splice","Hasher","reset","_hash","finalize","HMAC","algo","SHA1","HmacSHA1","_hasher","_oKey","_iKey","update","PBKDF2","cfg","hasher","keySize","compute","Exception from crypto.js. Exception = ","setEventInformation","getObject","/serverip","Stream URL passed in not correct : ","isEnabled","Server IP check is disabled. Not making the query!","getServerIPAddress","Visitor Object is not valied.","//","Stream url is not set!","responseText","Disabling server IP Address look up, response wasn't good! Status = ","asString","pendingBeaconCount","reportBeaconData","Beacon","sendMessageAndLog","Beacon dispatched response ","PageEvents","LocationEvents","Page","Location","addEventListener","pagehide","pageshow","beforeunload","attachEvent","onpagehide","onpageshow","onbeforeunload","Unsupported Browser","removeEventListener","detachEvent","geolocation","getCurrentPosition","watchPosition","connection","mozConnection","webkitConnection","typechange","connectionUpdate","clearWatch","coords","latitude","longitude","locationUpdate","code","User denied the request for Geolocation.","PERMISSION_DENIED","Location information is unavailable.","POSITION_UNAVAILABLE","The request to get user location timed out.","TIMEOUT","An unknown error occurred.","UNKNOWN_ERROR","Location Error : ","pageEvent","http://media-analytics.akamaized.net/library/tools/integrationdiagnoser/index.html","http://media-analytics.akamaized.net","csma.js","akamaihtml5-min.js","html5_malibrary.js","javascript_malibrary.js","\\]","\\[","[\\?&]","=([^&#]*)","Exception,  getValueFromQueryString :","parent","Exception thrown from checkIFrameAccess. Exception = ","AkamaiAnalytics_debug","status=0,toolbar=0,location=0,menubar=0,directories=0,height=680,width=1200","onmessage","setConfigXML","diagnoserHandshake","originUrl","postMessage","sendSyncMessage","getShouldAnalyze","currentScript","src","script","setShouldAnalyze","syn-ack","Received sync + ack","connectionType","visitBeacon :","eventCode : I ","eventCode : S ","eventCode : E ","eventCode : default case ","totalPlayClockTime : ","totalPlayStreamTime : ","totalRebufferCount : ","totalRebufferTime : ","isParsed","InvalidURL","parseURL","format","Dash","streamType","dash","text/xml","parseFromString","ParsingFailed","MPD","dynamic","deliveryType","L","static","O","mediaPresentationDuration","startsWith","T","Current stream length = ","getCallback","NoError","Exception thrown from dashStreamInfo ","Y","M","D","recursiveDownload","#EXTM3U","hls","\n","getStreamURL","Checking","Checking done ",".m3u8","://","Requesting URL = ","current content type from stream url is = ","content-type","getResponseHeader","overrideMimeType","text/plain","parse, Exception,  parsing play list, ","Exception,  parse : ","nonAdaptiveStream","Exception thrown from nonAdaptiveStream","FactoryWithURL","Exception thrown from streamFactory.FactoryWithURL","FactoryWithContent","Exception thrown from streamFactory.FactoryWithContent ","url","callback","getStreamType","URL is not valid","Failed to parse stream URL","Invalid manifest received","Stream is not valid","success","Mime type method didn't work. Lets apply parsers one after another - Brute force","not a HLS stream","not Dash either... Assuming Progressive download","nonAdaptive","Invalid_Stream","Found m3u8 as an extension","Found mpd as an extension","Couldn't find either m3u8 or Dash will try mime type","To get mime type trying HEAD request","HEAD","DONE","application/x-mpegURL","vnd.apple.mpegURL","Rceived mime type is m3u8","application/dash+xml","Rceived mime type is dash","Exception thrown from StreamTypeDetector ","instanceDict","keyCount","registerInstance","loaderInstance_","addPageEventListener","destroy","onDestroy","keys","1.3.6","JSLoader","setPlayerLoaderVersion","handleSessionInit(",")","API","PlayEnded","handlePlaying()","Init","Playing","handlePause()","Pause","handlePlayEnd(","handleBitRateSwitch","handleBitRateSwitch(","akamaiHandleTitleSwitch(","Seeking","handleBufferStart()","handleBufferEnd()","handleError(","handleSeekStart()","handleSeekEnd","handleSeekEnd()","handleApplicationExit()","Error creating Akamai Analytics: Akamai Analytics Config Path not set.","getStreamHeadPosition","Callback methods not provided.","DEBUG","setData(","setViewerDiagnosticsId(","setViewerId(","handleStreamSwitch()","handleAdLoaded(","2","handleAdStarted(","handleAdFirstQuartile()","handleAdMidPoint()","handleAdComplete()","handleAdSkipped()","handleAdError()","setStreamURL(","setStreamDuration(","setURLManifestContent()","enableLocation()","disableLocation()","enableServerIPLookUp","enableServerIPLookUp()","disableServerIPLookUp","disableServerIPLookUp()","handleVisit()","handleAdThirdQuartile()","Browser.Close","setBridgeInformation"],_0xa6d8=[_0x926a[0],_0x926a[1],_0x926a[2],_0x926a[3],_0x926a[4],_0x926a[5],_0x926a[6],_0x926a[7],_0x926a[8],_0x926a[9],_0x926a[10],_0x926a[11],_0x926a[12],_0x926a[13],_0x926a[14],_0x926a[15],_0x926a[16],_0x926a[17],_0x926a[18],_0x926a[19],_0x926a[20],_0x926a[21],_0x926a[22],_0x926a[23],_0x926a[24],_0x926a[25],_0x926a[26],_0x926a[27],_0x926a[28],_0x926a[29],_0x926a[30],_0x926a[31],_0x926a[32],_0x926a[33],_0x926a[34],_0x926a[35],_0x926a[36],_0x926a[37],_0x926a[38],_0x926a[39],_0x926a[40],_0x926a[41],_0x926a[42],_0x926a[43],_0x926a[44],_0x926a[45],_0x926a[46],_0x926a[47],_0x926a[48],_0x926a[49],_0x926a[50],_0x926a[51],_0x926a[52],_0x926a[53],_0x926a[54],_0x926a[55],_0x926a[56],_0x926a[57],_0x926a[58],_0x926a[59],_0x926a[60],_0x926a[61],_0x926a[62],_0x926a[63],_0x926a[64],_0x926a[65],_0x926a[66],_0x926a[67],_0x926a[68],_0x926a[69],_0x926a[70],_0x926a[71],_0x926a[72],_0x926a[73],_0x926a[74],_0x926a[75],_0x926a[76],_0x926a[77],_0x926a[78],_0x926a[79],_0x926a[80],_0x926a[81],_0x926a[82],_0x926a[83],_0x926a[84],_0x926a[85],_0x926a[86],_0x926a[87],_0x926a[88],_0x926a[89],_0x926a[90],_0x926a[91],_0x926a[92],_0x926a[93],_0x926a[94],_0x926a[95],_0x926a[96],_0x926a[97],_0x926a[98],_0x926a[99],_0x926a[100],_0x926a[101],_0x926a[102],_0x926a[103],_0x926a[104],_0x926a[105],_0x926a[106],_0x926a[107],_0x926a[108],_0x926a[109],_0x926a[110],_0x926a[111],_0x926a[112],_0x926a[113],_0x926a[114],_0x926a[115],_0x926a[116],_0x926a[117],_0x926a[118],_0x926a[119],_0x926a[120],_0x926a[121],_0x926a[122],_0x926a[123],_0x926a[124],_0x926a[125],_0x926a[126],_0x926a[127],_0x926a[128],_0x926a[129],_0x926a[130],_0x926a[131],_0x926a[132],_0x926a[133],_0x926a[134],_0x926a[135],_0x926a[136],_0x926a[137],_0x926a[138],_0x926a[139],_0x926a[140],_0x926a[141],_0x926a[142],_0x926a[143],_0x926a[144],_0x926a[145],_0x926a[146],_0x926a[147],_0x926a[148],_0x926a[149],_0x926a[150],_0x926a[151],_0x926a[152],_0x926a[153],_0x926a[154],_0x926a[155],_0x926a[156],_0x926a[157],_0x926a[158],_0x926a[159],_0x926a[160],_0x926a[161],_0x926a[162],_0x926a[163],_0x926a[164],_0x926a[165],_0x926a[166],_0x926a[167],_0x926a[168],_0x926a[169],_0x926a[170],_0x926a[171],_0x926a[172],_0x926a[173],_0x926a[174],_0x926a[175],_0x926a[176],_0x926a[177],_0x926a[178],_0x926a[179],_0x926a[180],_0x926a[181],_0x926a[182],_0x926a[183],_0x926a[184],_0x926a[185],_0x926a[186],_0x926a[187],_0x926a[188],_0x926a[189],_0x926a[190],_0x926a[191],_0x926a[192],_0x926a[193],_0x926a[194],_0x926a[195],_0x926a[196],_0x926a[197],_0x926a[198],_0x926a[199],_0x926a[200],_0x926a[201],_0x926a[202],_0x926a[203],_0x926a[204],_0x926a[205],_0x926a[206],_0x926a[207],_0x926a[208],_0x926a[209],_0x926a[210],_0x926a[211],_0x926a[212],_0x926a[213],_0x926a[214],_0x926a[215],_0x926a[216],_0x926a[217],_0x926a[218],_0x926a[219],_0x926a[220],_0x926a[221],_0x926a[222],_0x926a[223],_0x926a[224],_0x926a[225],_0x926a[226],_0x926a[227],_0x926a[228],_0x926a[229],_0x926a[230],_0x926a[231],_0x926a[232],_0x926a[233],_0x926a[234],_0x926a[235],_0x926a[236],_0x926a[237],_0x926a[238],_0x926a[239],_0x926a[240],_0x926a[241],_0x926a[242],_0x926a[243],_0x926a[244],_0x926a[245],_0x926a[246],_0x926a[247],_0x926a[248],_0x926a[249],_0x926a[250],_0x926a[251],_0x926a[252],_0x926a[253],_0x926a[254],_0x926a[255],_0x926a[256],_0x926a[257],_0x926a[258],_0x926a[259],_0x926a[260],_0x926a[261],_0x926a[262],_0x926a[263],_0x926a[264],_0x926a[265],_0x926a[266],_0x926a[267],_0x926a[268],_0x926a[269],_0x926a[270],_0x926a[271],_0x926a[272],_0x926a[273],_0x926a[274],_0x926a[275],_0x926a[276],_0x926a[277],_0x926a[278],_0x926a[279],_0x926a[280],_0x926a[281],_0x926a[282],_0x926a[283],_0x926a[284],_0x926a[285],_0x926a[286],_0x926a[287],_0x926a[288],_0x926a[289],_0x926a[290],_0x926a[291],_0x926a[292],_0x926a[293],_0x926a[294],_0x926a[295],_0x926a[296],_0x926a[297],_0x926a[298],_0x926a[299],_0x926a[300],_0x926a[301],_0x926a[302],_0x926a[303],_0x926a[304],_0x926a[305],_0x926a[306],_0x926a[307],_0x926a[308],_0x926a[309],_0x926a[310],_0x926a[311],_0x926a[312],_0x926a[313],_0x926a[314],_0x926a[315],_0x926a[316],_0x926a[317],_0x926a[318],_0x926a[319],_0x926a[320],_0x926a[321],_0x926a[322],_0x926a[323],_0x926a[324],_0x926a[325],_0x926a[326],_0x926a[327],_0x926a[328],_0x926a[329],_0x926a[330],_0x926a[331],_0x926a[332],_0x926a[333],_0x926a[334],_0x926a[335],_0x926a[336],_0x926a[337],_0x926a[338],_0x926a[339],_0x926a[340],_0x926a[341],_0x926a[342],_0x926a[343],_0x926a[344],_0x926a[345],_0x926a[346],_0x926a[347],_0x926a[348],_0x926a[349],_0x926a[350],_0x926a[351],_0x926a[352],_0x926a[353],_0x926a[354],_0x926a[355],_0x926a[356],_0x926a[357],_0x926a[358],_0x926a[359],_0x926a[360],_0x926a[361],_0x926a[362],_0x926a[363],_0x926a[364],_0x926a[365],_0x926a[366],_0x926a[367],_0x926a[368],_0x926a[369],_0x926a[370],_0x926a[371],_0x926a[372],_0x926a[373],_0x926a[374],_0x926a[375],_0x926a[376],_0x926a[377],_0x926a[378],_0x926a[379],_0x926a[380],_0x926a[381],_0x926a[382],_0x926a[383],_0x926a[384],_0x926a[385],_0x926a[386],_0x926a[387],_0x926a[388],_0x926a[389],_0x926a[390],_0x926a[391],_0x926a[392],_0x926a[393],_0x926a[394],_0x926a[395],_0x926a[396],_0x926a[397],_0x926a[398],_0x926a[399],_0x926a[400],_0x926a[401],_0x926a[402],_0x926a[403],_0x926a[404],_0x926a[405],_0x926a[406],_0x926a[407],_0x926a[408],_0x926a[409],_0x926a[410],_0x926a[411],_0x926a[412],_0x926a[413],_0x926a[414],_0x926a[415],_0x926a[416],_0x926a[417],_0x926a[418],_0x926a[419],_0x926a[420],_0x926a[421],_0x926a[422],_0x926a[423],_0x926a[424],_0x926a[425],_0x926a[426],_0x926a[427],_0x926a[428],_0x926a[429],_0x926a[430],_0x926a[431],_0x926a[432],_0x926a[433],_0x926a[434],_0x926a[435],_0x926a[436],_0x926a[437],_0x926a[438],_0x926a[439],_0x926a[440],_0x926a[441],_0x926a[442],_0x926a[443],_0x926a[444],_0x926a[445],_0x926a[446],_0x926a[447],_0x926a[448],_0x926a[449],_0x926a[450],_0x926a[451],_0x926a[452],_0x926a[453],_0x926a[454],_0x926a[455],_0x926a[456],_0x926a[457],_0x926a[458],_0x926a[459],_0x926a[460],_0x926a[461],_0x926a[462],_0x926a[463],_0x926a[464],_0x926a[465],_0x926a[466],_0x926a[467],_0x926a[468],_0x926a[469],_0x926a[470],_0x926a[471],_0x926a[472],_0x926a[473],_0x926a[474],_0x926a[475],_0x926a[476],_0x926a[477],_0x926a[478],_0x926a[479],_0x926a[480],_0x926a[481],_0x926a[482],_0x926a[483],_0x926a[484],_0x926a[485],_0x926a[486],_0x926a[487],_0x926a[488],_0x926a[489],_0x926a[490],_0x926a[491],_0x926a[492],_0x926a[493],_0x926a[494],_0x926a[495],_0x926a[496],_0x926a[497],_0x926a[498],_0x926a[499],_0x926a[500],_0x926a[501],_0x926a[502],_0x926a[503],_0x926a[504],_0x926a[505],_0x926a[506],_0x926a[507],_0x926a[508],_0x926a[509],_0x926a[510],_0x926a[511],_0x926a[512],_0x926a[513],_0x926a[514],_0x926a[515],_0x926a[516],_0x926a[517],_0x926a[518],_0x926a[519],_0x926a[520],_0x926a[521],_0x926a[522],_0x926a[523],_0x926a[524],_0x926a[525],_0x926a[526],_0x926a[527],_0x926a[528],_0x926a[529],_0x926a[530],_0x926a[531],_0x926a[532],_0x926a[533],_0x926a[534],_0x926a[535],_0x926a[536],_0x926a[537],_0x926a[538],_0x926a[539],_0x926a[540],_0x926a[541],_0x926a[542],_0x926a[543],_0x926a[544],_0x926a[545],_0x926a[546],_0x926a[547],_0x926a[548],_0x926a[549],_0x926a[550],_0x926a[551],_0x926a[552],_0x926a[553],_0x926a[554],_0x926a[555],_0x926a[556],_0x926a[557],_0x926a[558],_0x926a[559],_0x926a[560],_0x926a[561],_0x926a[562],_0x926a[563],_0x926a[564],_0x926a[565],_0x926a[566],_0x926a[567],_0x926a[568],_0x926a[569],_0x926a[570],_0x926a[571],_0x926a[572],_0x926a[573],_0x926a[574],_0x926a[575],_0x926a[576],_0x926a[577],_0x926a[578],_0x926a[579],_0x926a[580],_0x926a[581],_0x926a[582],_0x926a[583],_0x926a[584],_0x926a[585],_0x926a[586],_0x926a[587],_0x926a[588],_0x926a[589],_0x926a[590],_0x926a[591],_0x926a[592],_0x926a[593],_0x926a[594],_0x926a[595],_0x926a[596],_0x926a[597],_0x926a[598],_0x926a[599],_0x926a[600],_0x926a[601],_0x926a[602],_0x926a[603],_0x926a[604],_0x926a[605],_0x926a[606],_0x926a[607],_0x926a[608],_0x926a[609],_0x926a[610],_0x926a[611],_0x926a[612],_0x926a[613],_0x926a[614],_0x926a[615],_0x926a[616],_0x926a[617],_0x926a[618],_0x926a[619],_0x926a[620],_0x926a[621],_0x926a[622],_0x926a[623],_0x926a[624],_0x926a[625],_0x926a[626],_0x926a[627],_0x926a[628],_0x926a[629],_0x926a[630],_0x926a[631],_0x926a[632],_0x926a[633],_0x926a[634],_0x926a[635],_0x926a[636],_0x926a[637],_0x926a[638],_0x926a[639],_0x926a[640],_0x926a[641],_0x926a[642],_0x926a[643],_0x926a[644],_0x926a[645],_0x926a[646],_0x926a[647],_0x926a[648],_0x926a[649],_0x926a[650],_0x926a[651],_0x926a[652],_0x926a[653],_0x926a[654],_0x926a[655],_0x926a[656],_0x926a[657],_0x926a[658],_0x926a[659],_0x926a[660],_0x926a[661],_0x926a[662],_0x926a[663],_0x926a[664],_0x926a[665],_0x926a[666],_0x926a[667],_0x926a[668],_0x926a[669],_0x926a[670],_0x926a[671],_0x926a[672],_0x926a[673],_0x926a[674],_0x926a[675],_0x926a[676],_0x926a[677],_0x926a[678],_0x926a[679],_0x926a[680],_0x926a[681],_0x926a[682],_0x926a[683],_0x926a[684],_0x926a[685],_0x926a[686],_0x926a[687],_0x926a[688],_0x926a[689],_0x926a[690],_0x926a[691],_0x926a[692],_0x926a[693],_0x926a[694],_0x926a[695],_0x926a[696],_0x926a[697],_0x926a[698],_0x926a[699],_0x926a[700],_0x926a[701],_0x926a[702],_0x926a[703],_0x926a[704],_0x926a[705],_0x926a[706],_0x926a[707],_0x926a[708],_0x926a[709],_0x926a[710],_0x926a[711],_0x926a[712],_0x926a[713],_0x926a[714],_0x926a[715],_0x926a[716],_0x926a[717],_0x926a[718],_0x926a[719],_0x926a[720],_0x926a[721],_0x926a[722],_0x926a[723],_0x926a[724],_0x926a[725],_0x926a[726],_0x926a[727],_0x926a[728],_0x926a[729],_0x926a[730],_0x926a[731],_0x926a[732],_0x926a[733],_0x926a[734],_0x926a[735],_0x926a[736],_0x926a[737],_0x926a[738],_0x926a[739],_0x926a[740],_0x926a[741],_0x926a[742],_0x926a[743],_0x926a[744],_0x926a[745],_0x926a[746],_0x926a[747],_0x926a[748],_0x926a[749],_0x926a[750],_0x926a[751],_0x926a[752],_0x926a[753],_0x926a[754],_0x926a[755],_0x926a[756],_0x926a[757],_0x926a[758],_0x926a[759],_0x926a[760],_0x926a[761],_0x926a[762],_0x926a[763],_0x926a[764],_0x926a[765],_0x926a[766],_0x926a[767],_0x926a[768],_0x926a[769],_0x926a[770],_0x926a[771],_0x926a[772],_0x926a[773],_0x926a[774],_0x926a[775],_0x926a[776],_0x926a[777],_0x926a[778],_0x926a[779],_0x926a[780],_0x926a[781],_0x926a[782],_0x926a[783],_0x926a[784],_0x926a[785],_0x926a[786],_0x926a[787],_0x926a[788],_0x926a[789],_0x926a[790],_0x926a[791],_0x926a[792],_0x926a[793],_0x926a[794],_0x926a[795],_0x926a[796],_0x926a[797],_0x926a[798],_0x926a[799],_0x926a[800],_0x926a[801],_0x926a[802],_0x926a[803],_0x926a[804],_0x926a[805],_0x926a[806],_0x926a[807],_0x926a[808],_0x926a[809],_0x926a[810],_0x926a[811],_0x926a[812],_0x926a[813],_0x926a[814],_0x926a[815],_0x926a[816],_0x926a[817],_0x926a[818],_0x926a[819],_0x926a[820],_0x926a[821],_0x926a[822],_0x926a[823],_0x926a[824],_0x926a[825],_0x926a[826],_0x926a[827],_0x926a[828],_0x926a[829],_0x926a[830],_0x926a[831],_0x926a[832],_0x926a[833],_0x926a[834],_0x926a[835],_0x926a[836],_0x926a[837],_0x926a[838],_0x926a[839],_0x926a[840],_0x926a[841],_0x926a[842],_0x926a[843],_0x926a[844],_0x926a[845],_0x926a[846],_0x926a[847],_0x926a[848],_0x926a[849],_0x926a[850],_0x926a[851],_0x926a[852],_0x926a[853],_0x926a[854],_0x926a[855],_0x926a[856],_0x926a[857],_0x926a[858],_0x926a[859],_0x926a[860],_0x926a[861],_0x926a[862],_0x926a[863],_0x926a[864],_0x926a[865],_0x926a[866],_0x926a[867],_0x926a[868],_0x926a[869],_0x926a[870],_0x926a[871],_0x926a[872],_0x926a[873],_0x926a[874],_0x926a[875],_0x926a[876],_0x926a[877],_0x926a[878],_0x926a[879],_0x926a[880],_0x926a[881],_0x926a[882],_0x926a[883],_0x926a[884],_0x926a[885],_0x926a[886],_0x926a[887],_0x926a[888],_0x926a[889],_0x926a[890],_0x926a[891],_0x926a[892],_0x926a[893],_0x926a[894],_0x926a[895],_0x926a[896],_0x926a[897],_0x926a[898],_0x926a[899],_0x926a[900],_0x926a[901],_0x926a[902],_0x926a[903],_0x926a[904],_0x926a[905],_0x926a[906],_0x926a[907],_0x926a[908],_0x926a[909],_0x926a[910],_0x926a[911],_0x926a[912],_0x926a[913],_0x926a[914],_0x926a[915],_0x926a[916],_0x926a[917],_0x926a[918],_0x926a[919],_0x926a[920],_0x926a[921],_0x926a[922],_0x926a[923],_0x926a[924],_0x926a[925],_0x926a[926],_0x926a[927],_0x926a[928],_0x926a[929],_0x926a[930],_0x926a[931],_0x926a[932],_0x926a[933],_0x926a[934],_0x926a[935],_0x926a[936],_0x926a[937],_0x926a[938],_0x926a[939],_0x926a[940],_0x926a[941],_0x926a[942],_0x926a[943],_0x926a[944],_0x926a[945],_0x926a[946],_0x926a[947],_0x926a[948],_0x926a[949],_0x926a[950],_0x926a[951],_0x926a[952],_0x926a[953],_0x926a[954],_0x926a[955],_0x926a[956],_0x926a[957],_0x926a[958],_0x926a[959],_0x926a[960],_0x926a[961],_0x926a[962],_0x926a[963],_0x926a[964],_0x926a[965],_0x926a[966],_0x926a[967],_0x926a[968],_0x926a[969],_0x926a[970],_0x926a[971],_0x926a[972],_0x926a[973],_0x926a[974],_0x926a[975],_0x926a[976],_0x926a[977],_0x926a[978],_0x926a[979],_0x926a[980],_0x926a[981],_0x926a[982],_0x926a[983],_0x926a[984],_0x926a[985],_0x926a[986],_0x926a[987],_0x926a[988],_0x926a[989],_0x926a[990],_0x926a[991],_0x926a[992],_0x926a[993],_0x926a[994],_0x926a[995],_0x926a[996],_0x926a[997],_0x926a[998],_0x926a[999],_0x926a[1e3],_0x926a[1001],_0x926a[1002],_0x926a[1003],_0x926a[1004],_0x926a[1005],_0x926a[1006],_0x926a[1007],_0x926a[1008],_0x926a[1009],_0x926a[1010],_0x926a[1011],_0x926a[1012],_0x926a[1013],_0x926a[1014],_0x926a[1015],_0x926a[1016],_0x926a[1017],_0x926a[1018],_0x926a[1019],_0x926a[1020],_0x926a[1021],_0x926a[1022],_0x926a[1023],_0x926a[1024],_0x926a[1025],_0x926a[1026],_0x926a[1027],_0x926a[1028],_0x926a[1029],_0x926a[1030],_0x926a[1031],_0x926a[1032],_0x926a[1033],_0x926a[1034],_0x926a[1035],_0x926a[1036],_0x926a[1037],_0x926a[1038],_0x926a[1039],_0x926a[1040],_0x926a[1041],_0x926a[1042],_0x926a[1043],_0x926a[1044],_0x926a[1045],_0x926a[1046],_0x926a[1047],_0x926a[1048],_0x926a[1049],_0x926a[1050],_0x926a[1051],_0x926a[1052],_0x926a[1053],_0x926a[1054],_0x926a[1055],_0x926a[1056],_0x926a[1057],_0x926a[1058],_0x926a[1059],_0x926a[1060],_0x926a[1061],_0x926a[1062],_0x926a[1063],_0x926a[1064],_0x926a[1065],_0x926a[1066],_0x926a[1067],_0x926a[1068],_0x926a[1069],_0x926a[1070],_0x926a[1071],_0x926a[1072],_0x926a[1073],_0x926a[1074],_0x926a[1075],_0x926a[1076],_0x926a[1077],_0x926a[1078],_0x926a[1079],_0x926a[1080],_0x926a[1081],_0x926a[1082],_0x926a[1083],_0x926a[1084],_0x926a[1085],_0x926a[1086],_0x926a[1087],_0x926a[1088],_0x926a[1089],_0x926a[1090],_0x926a[1091],_0x926a[1092],_0x926a[1093],_0x926a[1094],_0x926a[1095],_0x926a[1096],_0x926a[1097],_0x926a[1098],_0x926a[1099],_0x926a[1100],_0x926a[1101],_0x926a[1102],_0x926a[1103],_0x926a[1104],_0x926a[1105],_0x926a[1106],_0x926a[1107],_0x926a[1108]];function AMAInstanceManager(){}function handlePageHide(){for(var e in AMAInstanceManager[_0xa6d8[1101]])AMAInstanceManager[_0xa6d8[1101]][e][_0xa6d8[1106]]()}akamaiMediaAnalytics=function(e){var C={paramSepartor:_0xa6d8[11],encodedParamSepartor:_0xa6d8[12],keyValuePairSeparator:_0xa6d8[13]};function t(e){var g={title:!1,category:!1,subCategory:!1,show:!1,contentLength:!1,contentType:!1,device:!1,deliveryType:!1,playerId:!1,eventName:!1},n=e,r=new amaDictionary,p=new amaDictionary,i=new amaDictionary,l=new amaDictionary,v=new amaDictionary,h=_0xa6d8[14],a={},s=!1,o={configDebug:!1,printException:!1},u=_0xa6d8[14],c=(_0xa6d8[14],_0xa6d8[14],[]);function d(e){try{if(B[_0xa6d8[3]](_0xa6d8[64]),ve[_0xa6d8[30]](e)){B[_0xa6d8[3]](_0xa6d8[65]+e[_0xa6d8[43]]);var t=e[_0xa6d8[35]](_0xa6d8[66]);(!ve[_0xa6d8[67]](t)||t[_0xa6d8[68]]()[_0xa6d8[44]]<=0||!ve[_0xa6d8[69]](parseInt(t)))&&(t=_0xa6d8[70]),p[_0xa6d8[54]](_0xa6d8[66],t);var n=e[_0xa6d8[35]](_0xa6d8[71]);(!ve[_0xa6d8[67]](n)||n[_0xa6d8[68]]()[_0xa6d8[44]]<=0||!ve[_0xa6d8[69]](parseInt(n)))&&(n=_0xa6d8[72]),p[_0xa6d8[54]](_0xa6d8[71],n),p[_0xa6d8[54]](_0xa6d8[73],e[_0xa6d8[35]](_0xa6d8[73])),p[_0xa6d8[54]](_0xa6d8[74],e[_0xa6d8[35]](_0xa6d8[74]));var i=1e3*e[_0xa6d8[35]](_0xa6d8[75]);ve[_0xa6d8[69]](i)&&0<i||(i=6e5),p[_0xa6d8[54]](_0xa6d8[75],i.toString());var r=e[_0xa6d8[38]];for(iterator=0;iterator<r[_0xa6d8[44]];iterator++)B[_0xa6d8[3]](_0xa6d8[76]+r[_0xa6d8[47]](iterator)[_0xa6d8[43]]+_0xa6d8[52]+r[_0xa6d8[47]](iterator)[_0xa6d8[53]]+_0xa6d8[77]+r[_0xa6d8[47]](iterator)[_0xa6d8[78]]),1===r[_0xa6d8[47]](iterator)[_0xa6d8[78]]&&p[_0xa6d8[54]](r[_0xa6d8[47]](iterator)[_0xa6d8[43]],r[_0xa6d8[47]](iterator)[_0xa6d8[53]]);!function(){try{B[_0xa6d8[3]](_0xa6d8[81]);var e=p[_0xa6d8[18]]();e[_0xa6d8[82]];-1===e[_0xa6d8[82]][_0xa6d8[84]](_0xa6d8[83])&&-1===e[_0xa6d8[82]][_0xa6d8[84]](_0xa6d8[85])&&(e[_0xa6d8[82]]=_0xa6d8[83]+e[_0xa6d8[82]])}catch(e){B[_0xa6d8[9]](_0xa6d8[86]+e)}finally{B[_0xa6d8[3]](_0xa6d8[87])}}()}}catch(e){B[_0xa6d8[9]](_0xa6d8[79]+e)}finally{B[_0xa6d8[3]](_0xa6d8[80])}}function f(e){try{if(B[_0xa6d8[3]](_0xa6d8[88]),ve[_0xa6d8[30]](e)){var t=e[_0xa6d8[38]],n=t[_0xa6d8[44]];if(ve[_0xa6d8[30]](t)){for(var i=0;i<n;i++)if(B[_0xa6d8[3]](_0xa6d8[89]+t[_0xa6d8[47]](i)[_0xa6d8[43]]),t[_0xa6d8[47]](i)[_0xa6d8[43]]===_0xa6d8[90]){t=t[_0xa6d8[47]](i);break}if(ve[_0xa6d8[30]](t)){var r=t[_0xa6d8[38]];if(ve[_0xa6d8[30]](r)){for(var a=r[_0xa6d8[44]],s=null,o=0;o<a;o++)if(B[_0xa6d8[3]](_0xa6d8[91]+r[_0xa6d8[47]](o)[_0xa6d8[43]]),r[_0xa6d8[47]](o)[_0xa6d8[43]]===_0xa6d8[92]){s=r[_0xa6d8[47]](o);break}ve[_0xa6d8[30]](s)&&(l[_0xa6d8[54]](_0xa6d8[93],s[_0xa6d8[35]](_0xa6d8[93])),l[_0xa6d8[54]](_0xa6d8[94],s[_0xa6d8[35]](_0xa6d8[94])),l[_0xa6d8[54]](_0xa6d8[95],s[_0xa6d8[35]](_0xa6d8[95])),l[_0xa6d8[54]](_0xa6d8[96],s[_0xa6d8[35]](_0xa6d8[96])),l[_0xa6d8[54]](_0xa6d8[97],s[_0xa6d8[35]](_0xa6d8[97])))}}}}}catch(e){B[_0xa6d8[9]](_0xa6d8[98]+e)}finally{B[_0xa6d8[3]](_0xa6d8[99])}}function m(e){try{if(B[_0xa6d8[3]](_0xa6d8[100]),ve[_0xa6d8[30]](e)){var t=e[_0xa6d8[38]];if(null!==t&&t!==_0xa6d8[14])for(var n=0;n<t[_0xa6d8[44]];n++)1===t[_0xa6d8[47]](n)[_0xa6d8[78]]&&i[_0xa6d8[54]](t[_0xa6d8[47]](n)[_0xa6d8[43]],t[_0xa6d8[47]](n)[_0xa6d8[53]])}}catch(e){B[_0xa6d8[9]](_0xa6d8[101]+e)}finally{B[_0xa6d8[3]](_0xa6d8[102])}}function _(e){try{B[_0xa6d8[3]](_0xa6d8[103]),ve[_0xa6d8[30]](e)&&e[_0xa6d8[38]][_0xa6d8[47]](0)[_0xa6d8[43]]===_0xa6d8[104]&&(B[_0xa6d8[3]](_0xa6d8[105]+e[_0xa6d8[38]][_0xa6d8[47]](0)[_0xa6d8[53]]),s=Boolean(e[_0xa6d8[38]][_0xa6d8[47]](0)[_0xa6d8[53]]))}catch(e){B[_0xa6d8[9]](_0xa6d8[106]+e)}finally{B[_0xa6d8[3]](_0xa6d8[107])}}function y(e){try{if(B[_0xa6d8[3]](_0xa6d8[108]),ve[_0xa6d8[30]](e))for(var t=e[_0xa6d8[31]][_0xa6d8[60]](_0xa6d8[59]),n=0;n<t[_0xa6d8[44]];n++){for(var i=t[_0xa6d8[47]](n),r=i[_0xa6d8[109]],a=r[_0xa6d8[43]],s=[],o=i[_0xa6d8[60]](_0xa6d8[110]),l=0;l<o[_0xa6d8[44]];l++){var u=o[_0xa6d8[47]](l);a=u[_0xa6d8[35]](_0xa6d8[0]);var c=u[_0xa6d8[35]](_0xa6d8[111]);nodeValue=u[_0xa6d8[35]](_0xa6d8[96]);var d=u[_0xa6d8[35]](_0xa6d8[112]),h=u[_0xa6d8[35]](_0xa6d8[113]),f=u[_0xa6d8[35]](_0xa6d8[114]),p=u[_0xa6d8[35]](_0xa6d8[115]),m={};m[_0xa6d8[0]]=a,m[_0xa6d8[111]]=c,a in g?g[a]=!0:-1!=c[_0xa6d8[84]](_0xa6d8[116])&&(g[a]=!0),nodeValue&&(m[_0xa6d8[96]]=nodeValue),d&&(m[_0xa6d8[112]]=d),h&&(m[_0xa6d8[113]]=h),f&&(m[_0xa6d8[114]]=f),p&&(m[_0xa6d8[117]]=p),s[_0xa6d8[118]](m)}v[_0xa6d8[54]](r[_0xa6d8[43]],s)}}catch(e){B[_0xa6d8[9]](_0xa6d8[119]+e)}finally{B[_0xa6d8[3]](_0xa6d8[120])}}function x(e){try{if(B[_0xa6d8[3]](_0xa6d8[121]),ve[_0xa6d8[30]](e))for(var t=e[_0xa6d8[31]][_0xa6d8[60]](_0xa6d8[122]),n=0;n<t[_0xa6d8[44]];n++)match=t[_0xa6d8[47]](n),parentKey=match[_0xa6d8[109]][_0xa6d8[109]][_0xa6d8[35]](_0xa6d8[0]),a[parentKey]||(a[parentKey]={}),a[parentKey][match[_0xa6d8[35]](_0xa6d8[111])]={type:match[_0xa6d8[35]](_0xa6d8[123]),name:match[_0xa6d8[35]](_0xa6d8[0]),value:match[_0xa6d8[35]](_0xa6d8[96])}}catch(e){B[_0xa6d8[9]](_0xa6d8[124]+e)}finally{B[_0xa6d8[3]](_0xa6d8[125])}}function b(e){if(ve[_0xa6d8[30]](e)){h=e[_0xa6d8[35]](_0xa6d8[126]);for(var t=e[_0xa6d8[60]](_0xa6d8[127]),n=t[_0xa6d8[44]],i=[],r=0;r<n;r++){var a={},s=t[r][_0xa6d8[35]](_0xa6d8[111]),o=t[r][_0xa6d8[35]](_0xa6d8[0]),l=t[r][_0xa6d8[35]](_0xa6d8[128]);ve[_0xa6d8[67]](s)&&(a[_0xa6d8[111]]=s),ve[_0xa6d8[67]](o)&&(a[_0xa6d8[0]]=o),ve[_0xa6d8[67]](l)&&(a[_0xa6d8[128]]=parseInt(parseInt(l)/1440)),i[_0xa6d8[118]](a)}v[_0xa6d8[54]](e[_0xa6d8[46]],i)}}function T(e,t,n,i){var r=_0xa6d8[14];if(ve[_0xa6d8[67]](i)&&ve[_0xa6d8[147]](t,amaDictionary)&&ve[_0xa6d8[147]](n,amaDictionary)&&ve[_0xa6d8[30]](e))for(var a=e[_0xa6d8[44]],s=0;s<a;s++){var o=e[s][_0xa6d8[0]];if(ve[_0xa6d8[67]](o)){var l=n[_0xa6d8[19]](o);if(ve[_0xa6d8[67]](l)||(l=t[_0xa6d8[19]](o)),!ve[_0xa6d8[67]](l)&&ve[_0xa6d8[30]](e[s][_0xa6d8[113]])&&(l=E(e[s][_0xa6d8[113]],t,n)),ve[_0xa6d8[67]](l)){if(ve[_0xa6d8[67]](e[s][_0xa6d8[112]])&&_0xa6d8[161]===e[s][_0xa6d8[112]]){if(-1!==c[_0xa6d8[84]](o))continue;c[_0xa6d8[118]](o)}0!==r[_0xa6d8[44]]&&(r=r[_0xa6d8[166]](i)),l=w(e[s],l),r=(r=(r=r[_0xa6d8[166]](e[s][_0xa6d8[111]]))[_0xa6d8[166]](C[_0xa6d8[167]]))[_0xa6d8[166]](l)}}}return r}function S(e,t,n,i){var r=_0xa6d8[14];if(ve[_0xa6d8[67]](i)&&ve[_0xa6d8[147]](t,amaDictionary)&&ve[_0xa6d8[147]](n,amaDictionary)&&ve[_0xa6d8[30]](e))for(var a=e[_0xa6d8[44]],s=_0xa6d8[14],o=_0xa6d8[14],l=0;l<a;l++)if(s=e[l][_0xa6d8[0]],o=t[_0xa6d8[19]](s),ve[_0xa6d8[67]](o)||(o=n[_0xa6d8[19]](s)),ve[_0xa6d8[67]](o)){var u=A(o),c=0,d=(new Date)[_0xa6d8[168]]();ve[_0xa6d8[169]](u)&&(c=0<(c=(c=d-parseFloat(u))/1e3/60)?c[_0xa6d8[170]](2):0),M(o,d,e[l][_0xa6d8[128]]),0!==r[_0xa6d8[44]]&&(r=r[_0xa6d8[166]](i)),r=(r=(r=r[_0xa6d8[166]](h+e[l][_0xa6d8[111]]))[_0xa6d8[166]](C[_0xa6d8[167]]))[_0xa6d8[166]](c.toString())}return r}function E(e,t,n){var i;return ve[_0xa6d8[147]](n,amaDictionary)&&ve[_0xa6d8[147]](t,amaDictionary)&&ve[_0xa6d8[67]](e)&&(i=t[_0xa6d8[19]](e),ve[_0xa6d8[67]](i)||(i=n[_0xa6d8[19]](e))),i}function w(e,t){try{if(ve[_0xa6d8[30]](e)&&ve[_0xa6d8[67]](t)){if(ve[_0xa6d8[30]](e[_0xa6d8[117]])){var n=new RegExp(e[_0xa6d8[117]])[_0xa6d8[171]](t);ve[_0xa6d8[30]](n)&&(t=n[n[_0xa6d8[44]]-1])}ve[_0xa6d8[30]](e[_0xa6d8[114]])&&(t=t[_0xa6d8[172]](0,e[_0xa6d8[114]]))}}catch(e){B[_0xa6d8[9]](_0xa6d8[173]+e)}finally{return t}}function M(e,t,n){try{if(B[_0xa6d8[3]](_0xa6d8[174]),ve[_0xa6d8[69]](n)&&ve[_0xa6d8[67]](e)&&ve[_0xa6d8[30]](t)){var i={value:t},r=new Date;0<parseInt(n)?r[_0xa6d8[176]](r[_0xa6d8[175]]()+parseInt(n)):r[_0xa6d8[176]](r[_0xa6d8[175]]()+parseInt(90)),i[_0xa6d8[177]]=r[_0xa6d8[178]](),R[_0xa6d8[180]](P.LOCAL_STORAGE,e,JSON[_0xa6d8[179]](i))}}catch(e){B[_0xa6d8[9]](_0xa6d8[181]+e)}}function A(e){try{if(B[_0xa6d8[3]](_0xa6d8[182]),ve[_0xa6d8[67]](e)){var t=R[_0xa6d8[183]](P.LOCAL_STORAGE,e);if(ve[_0xa6d8[67]](t))return JSON[_0xa6d8[129]](t)[_0xa6d8[96]]}}catch(e){B[_0xa6d8[9]](_0xa6d8[184]+e)}}R[_0xa6d8[15]](P.LOCAL_STORAGE),this[_0xa6d8[16]]=function(){try{B[_0xa6d8[3]](_0xa6d8[17]),B[_0xa6d8[7]](n);var e=_0xa6d8[14],t=_0xa6d8[14];for(e in r[_0xa6d8[18]]())t=r[_0xa6d8[19]](e),B[_0xa6d8[7]](e+_0xa6d8[20]+t);for(e in p[_0xa6d8[18]]())t=p[_0xa6d8[19]](e),B[_0xa6d8[7]](e+_0xa6d8[20]+t);for(e in i[_0xa6d8[18]]())t=i[_0xa6d8[19]](e),B[_0xa6d8[7]](e+_0xa6d8[20]+t);for(e in l[_0xa6d8[18]]())t=l[_0xa6d8[19]](e),B[_0xa6d8[7]](e+_0xa6d8[20]+t);for(e in v[_0xa6d8[18]]())t=v[_0xa6d8[19]](e),B[_0xa6d8[7]](e+_0xa6d8[20]+t);for(e in a)B[_0xa6d8[7]](e+_0xa6d8[20]+a[e]);for(e in B[_0xa6d8[7]](s.toString()),o)B[_0xa6d8[7]](e+_0xa6d8[20]+o[e]);B[_0xa6d8[7]](o.toString())}catch(e){B[_0xa6d8[9]](_0xa6d8[21]+e)}finally{B[_0xa6d8[3]](_0xa6d8[22])}},this[_0xa6d8[23]]=function(){return u},this[_0xa6d8[24]]=function(){return p[_0xa6d8[18]]()},this[_0xa6d8[25]]=function(){return r[_0xa6d8[18]]()},this[_0xa6d8[26]]=function(){return l[_0xa6d8[18]]()},this[_0xa6d8[27]]=function(){return v[_0xa6d8[18]]()},this[_0xa6d8[28]]=function(){return a},this[_0xa6d8[129]]=function(e){try{B[_0xa6d8[3]](arguments[_0xa6d8[1]][_0xa6d8[0]]+_0xa6d8[130]);var t=new XMLHttpRequest;ve[_0xa6d8[30]](t)&&ve[_0xa6d8[30]](n)&&ve[_0xa6d8[67]](n)&&(t[_0xa6d8[132]](_0xa6d8[131],n,!0),t[_0xa6d8[133]]=function(){4===t[_0xa6d8[134]]&&(200===t[_0xa6d8[135]]||0===t[_0xa6d8[135]]?ve[_0xa6d8[30]](t[_0xa6d8[136]])?(B[_0xa6d8[7]](_0xa6d8[138]+t[_0xa6d8[136]]),function(e){try{if(B[_0xa6d8[3]](_0xa6d8[29]),ve[_0xa6d8[30]](e)){var t;t=e[_0xa6d8[31]]?(B[_0xa6d8[3]](_0xa6d8[32]+e[_0xa6d8[31]]),e[_0xa6d8[31]]):(B[_0xa6d8[3]](_0xa6d8[33]),e),o[_0xa6d8[34]]=Boolean(parseInt(t[_0xa6d8[35]](_0xa6d8[3]))),o[_0xa6d8[36]]=Boolean(parseInt(t[_0xa6d8[35]](_0xa6d8[37])));var n=t[_0xa6d8[38]];B[_0xa6d8[3]](_0xa6d8[39]+e[_0xa6d8[31]]),B[_0xa6d8[3]](_0xa6d8[40]+n[_0xa6d8[41]]+_0xa6d8[42]+n[_0xa6d8[43]]);for(var i=0;i<n[_0xa6d8[44]];i++)B[_0xa6d8[3]](_0xa6d8[45]+n[i]),n[_0xa6d8[47]](i)[_0xa6d8[46]]===_0xa6d8[48]||n[_0xa6d8[47]](i)[_0xa6d8[46]]===_0xa6d8[49]||n[_0xa6d8[47]](i)[_0xa6d8[46]]===_0xa6d8[50]?(B[_0xa6d8[3]](_0xa6d8[51]+n[_0xa6d8[47]](i)[_0xa6d8[46]]+_0xa6d8[52]+n[_0xa6d8[47]](i)[_0xa6d8[53]]),r[_0xa6d8[54]](n[_0xa6d8[47]](i)[_0xa6d8[46]],n[_0xa6d8[47]](i)[_0xa6d8[53]])):n[_0xa6d8[47]](i)[_0xa6d8[46]]===_0xa6d8[55]?(B[_0xa6d8[3]](_0xa6d8[51]+n[_0xa6d8[47]](i)[_0xa6d8[46]]+_0xa6d8[52]+n[_0xa6d8[47]](i)),d(n[_0xa6d8[47]](i))):n[_0xa6d8[47]](i)[_0xa6d8[46]]===_0xa6d8[56]?(B[_0xa6d8[3]](_0xa6d8[51]+n[_0xa6d8[47]](i)[_0xa6d8[46]]+_0xa6d8[52]+n[_0xa6d8[47]](i)),f(n[_0xa6d8[47]](i))):n[_0xa6d8[47]](i)[_0xa6d8[46]]===_0xa6d8[57]?(B[_0xa6d8[3]](_0xa6d8[51]+n[_0xa6d8[47]](i)[_0xa6d8[46]]+_0xa6d8[52]+n[_0xa6d8[47]](i)),m(n[_0xa6d8[47]](i))):n[_0xa6d8[47]](i)[_0xa6d8[46]]===_0xa6d8[58]?(B[_0xa6d8[3]](_0xa6d8[51]+n[_0xa6d8[47]](i)[_0xa6d8[46]]+_0xa6d8[52]+n[_0xa6d8[47]](i)),_(n[_0xa6d8[47]](i)),t[_0xa6d8[60]](_0xa6d8[59]),y(e),x(e)):n[_0xa6d8[47]](i)[_0xa6d8[46]]===_0xa6d8[61]&&b(n[_0xa6d8[47]](i))}}catch(e){B[_0xa6d8[9]](_0xa6d8[62]+e)}finally{B[_0xa6d8[3]](_0xa6d8[63])}}(t[_0xa6d8[136]])):u=_0xa6d8[137]:(u=t[_0xa6d8[139]],B[_0xa6d8[7]](_0xa6d8[140]+u)),typeof e===_0xa6d8[141]&&(e(),t=null))},t[_0xa6d8[142]]())}catch(e){B[_0xa6d8[9]](arguments[_0xa6d8[1]][_0xa6d8[0]]+_0xa6d8[143]+e)}finally{B[_0xa6d8[3]](arguments[_0xa6d8[1]][_0xa6d8[0]]+_0xa6d8[144])}},this[_0xa6d8[145]]=function(e){return!0},this[_0xa6d8[146]]=function(e,t,n){var i=_0xa6d8[14];try{if(ve[_0xa6d8[67]](e)&&ve[_0xa6d8[147]](t,amaDictionary)&&ve[_0xa6d8[147]](n,amaDictionary)){var r=p[_0xa6d8[19]](_0xa6d8[148]);ve[_0xa6d8[67]](r)||(r=C[_0xa6d8[149]]);var a=p[_0xa6d8[19]](_0xa6d8[150]);ve[_0xa6d8[67]](a)||(a=C[_0xa6d8[151]]);var s=p[_0xa6d8[19]](_0xa6d8[82]),o=p[_0xa6d8[19]](_0xa6d8[152]);ve[_0xa6d8[67]](s)&&ve[_0xa6d8[67]](o)?i=s+o+_0xa6d8[153]:B[_0xa6d8[156]](_0xa6d8[154]+s+_0xa6d8[155]+o),i+=T(v[_0xa6d8[18]]()[_0xa6d8[157]],t,n,r);for(var l=e[_0xa6d8[159]](_0xa6d8[158]),u=l[_0xa6d8[44]],c=null,d=_0xa6d8[14],h=0;h<u;h++){c=v[_0xa6d8[18]]()[l[h]];for(var f=0;f<c[_0xa6d8[44]];f++)if(c[f][_0xa6d8[111]]===_0xa6d8[160]&&c[f][_0xa6d8[112]]===_0xa6d8[161]){H[_0xa6d8[162]](!0);break}d=l[h]===_0xa6d8[61]?S(c,t,n,r):T(c,t,n,r),ve[_0xa6d8[67]](d)&&0<d[_0xa6d8[44]]&&(i+=r+d)}}}catch(e){B[_0xa6d8[9]](_0xa6d8[163]+e)}finally{return i}},this[_0xa6d8[164]]=function(){var e=this[_0xa6d8[24]]();for(var t in e)B[_0xa6d8[3]](t+_0xa6d8[165]+e[t]);var n=this[_0xa6d8[25]]();for(var t in n)B[_0xa6d8[3]](t+_0xa6d8[165]+n[t]);var i=this[_0xa6d8[27]]();for(var t in i)B[_0xa6d8[3]](t+_0xa6d8[165]+i[t]);var r=this[_0xa6d8[28]]();for(var t in r)B[_0xa6d8[3]](t+_0xa6d8[165]+r[t])},this[_0xa6d8[185]]=function(){c[_0xa6d8[44]]=0}}function o(){var o=_0xa6d8[14],n=_0xa6d8[14],l=_0xa6d8[14],i=_0xa6d8[14],r=_0xa6d8[14];this[_0xa6d8[186]]=function(e){if(e)try{var t=/\((\w+)/[_0xa6d8[171]](e);ve[_0xa6d8[30]](t)&&1<t[_0xa6d8[44]]&&(n=t[1][_0xa6d8[187]](),n=-1!==e[_0xa6d8[84]](_0xa6d8[188])?_0xa6d8[188]:-1!==n[_0xa6d8[84]](_0xa6d8[189])||-1!==n[_0xa6d8[84]](_0xa6d8[190])||-1!==n[_0xa6d8[84]](_0xa6d8[191])?_0xa6d8[192]:-1!==n[_0xa6d8[84]](_0xa6d8[193])?_0xa6d8[194]:-1!==n[_0xa6d8[84]](_0xa6d8[195])||-1!==n[_0xa6d8[84]](_0xa6d8[196])||-1!==n[_0xa6d8[84]](_0xa6d8[197])?_0xa6d8[198]:-1!==n[_0xa6d8[84]](_0xa6d8[199])?_0xa6d8[200]:-1!==n[_0xa6d8[84]](_0xa6d8[201])?_0xa6d8[202]:-1!==n[_0xa6d8[84]](_0xa6d8[203])?_0xa6d8[204]:-1!==e[_0xa6d8[84]](_0xa6d8[205])?_0xa6d8[205]:-1!==e[_0xa6d8[84]](_0xa6d8[206])?_0xa6d8[206]:-1!==e[_0xa6d8[84]](_0xa6d8[207])?_0xa6d8[208]:_0xa6d8[209])}catch(e){B[_0xa6d8[9]](_0xa6d8[210]),n=_0xa6d8[209]}return n},this[_0xa6d8[211]]=function(e){if(e)try{if(regex=/(NT|Phone|OS X|Android|Linux|CPU.*?OS) ([0-9\._]+)/,match=regex[_0xa6d8[171]](e),ve[_0xa6d8[30]](match)&&2<match[_0xa6d8[44]]){i=match[2]?match[2]:_0xa6d8[14];var t=_0xa6d8[14];n!==_0xa6d8[192]&&this[_0xa6d8[186]](e)!==_0xa6d8[192]||(t=this[_0xa6d8[212]](i))!==_0xa6d8[14]&&(i=t)}}catch(e){B[_0xa6d8[9]](_0xa6d8[213]+e)}return i},this[_0xa6d8[212]]=function(e){var t=_0xa6d8[14];if(ve[_0xa6d8[67]](e))if(e===_0xa6d8[214]||e===_0xa6d8[215])t=_0xa6d8[216];else if(e===_0xa6d8[217])t=_0xa6d8[218];else if(e===_0xa6d8[219])t=_0xa6d8[220];else if(e===_0xa6d8[221]||e===_0xa6d8[222])t=_0xa6d8[223];else{var n=e[_0xa6d8[159]](_0xa6d8[224]);t=8<=parseInt(n[0])?n[0]:_0xa6d8[225]}return t},this[_0xa6d8[226]]=function(e){if(e){var t=/(MSIE|Chrome|Version|Firefox)[ \/]([0-9]+)/;try{var n=t[_0xa6d8[171]](e);if(ve[_0xa6d8[30]](n)&&1<n[_0xa6d8[44]]&&(o=n[1],n[1]===_0xa6d8[227])){var i=(t=/(Opera|Safari)/)[_0xa6d8[171]](e);ve[_0xa6d8[30]](i)&&1<i[_0xa6d8[44]]&&(o=i[1])}}catch(e){B[_0xa6d8[9]](_0xa6d8[228]+e)}try{var r=e[_0xa6d8[84]](_0xa6d8[229]);if(-1!==r){userAgentLength=e[_0xa6d8[44]];var a=e[_0xa6d8[230]](r,userAgentLength-r)[_0xa6d8[159]](_0xa6d8[231]);o=a[0],l=a[1]}else ve[_0xa6d8[30]](n)&&2<n[_0xa6d8[44]]&&(l=n[2]);if(o===_0xa6d8[14]){var s=(t=/Trident\/7.0/)[_0xa6d8[171]](e);if(ve[_0xa6d8[30]](s)&&0<s[_0xa6d8[44]])s[0][_0xa6d8[159]](_0xa6d8[231])[1]===_0xa6d8[232]&&(o=_0xa6d8[233],l=_0xa6d8[234])}o&&l&&(o=o+_0xa6d8[235]+l)}catch(e){B[_0xa6d8[9]](_0xa6d8[236]+e)}}return o},this[_0xa6d8[237]]=function(e){if(e)try{var t=e;t=t[_0xa6d8[187]](),r=-1!==t[_0xa6d8[84]](_0xa6d8[199])?_0xa6d8[200]:-1!==t[_0xa6d8[84]](_0xa6d8[203])?_0xa6d8[238]:-1!==t[_0xa6d8[84]](_0xa6d8[201])?_0xa6d8[202]:-1!==t[_0xa6d8[84]](_0xa6d8[239])?_0xa6d8[240]:-1!==t[_0xa6d8[84]](_0xa6d8[241])?_0xa6d8[188]:-1!==t[_0xa6d8[84]](_0xa6d8[195])||-1!==t[_0xa6d8[84]](_0xa6d8[190])||-1!==t[_0xa6d8[84]](_0xa6d8[189])?_0xa6d8[242]:-1!==t[_0xa6d8[84]](_0xa6d8[243])?_0xa6d8[206]:-1!==t[_0xa6d8[84]](_0xa6d8[244])?_0xa6d8[208]:_0xa6d8[209]}catch(e){B[_0xa6d8[9]](_0xa6d8[245]+e),r=_0xa6d8[209]}return r}}function n(){var o=!1;function l(){var e=new Date;return e[_0xa6d8[175]]()+_0xa6d8[249]+(e[_0xa6d8[250]]()+1)+_0xa6d8[249]+e[_0xa6d8[251]]()+_0xa6d8[252]+e[_0xa6d8[253]]()+_0xa6d8[165]+e[_0xa6d8[254]]()+_0xa6d8[165]+e[_0xa6d8[255]]()+_0xa6d8[165]+e[_0xa6d8[256]]()+_0xa6d8[235]}this[_0xa6d8[7]]=function(e,t){if(!0===o&&ve[_0xa6d8[30]](e)&&e!==_0xa6d8[14]){var n=[],i=ve[_0xa6d8[67]](t)?t:_0xa6d8[246];n[0]={message:e,type:i,time:l()};var r={logMessage:n,type:_0xa6d8[7]};_[_0xa6d8[248]]({api:_0xa6d8[247],value:r}),console[_0xa6d8[7]](e)}},this[_0xa6d8[3]]=function(e,t){if(!0===o&&ve[_0xa6d8[30]](e)&&e!==_0xa6d8[14]){var n=new Date,i=n[_0xa6d8[175]]()+_0xa6d8[249]+(n[_0xa6d8[250]]()+1)+_0xa6d8[249]+n[_0xa6d8[251]]()+_0xa6d8[252]+n[_0xa6d8[253]]()+_0xa6d8[165]+n[_0xa6d8[254]]()+_0xa6d8[165]+n[_0xa6d8[255]]()+_0xa6d8[165]+n[_0xa6d8[256]]()+_0xa6d8[235],r=ve[_0xa6d8[67]](t)?t:_0xa6d8[246],a=[];a[0]={message:e,type:r,time:l()};var s={logMessage:a,type:_0xa6d8[7]};_[_0xa6d8[248]]({api:_0xa6d8[247],value:s}),console[_0xa6d8[3]](i+e)}},this[_0xa6d8[156]]=function(e){if(!0===o&&ve[_0xa6d8[30]](e)&&e!==_0xa6d8[14]){var t=[];t[0]={message:e,type:_0xa6d8[257],time:l()};var n={logMessage:t,type:_0xa6d8[7]};_[_0xa6d8[248]]({api:_0xa6d8[247],value:n}),console[_0xa6d8[156]](e)}},this[_0xa6d8[9]]=function(e){if(!0===o&&ve[_0xa6d8[30]](e)&&e!==_0xa6d8[14]){var t=[];t[0]={message:e,type:_0xa6d8[257],time:l()};var n={logMessage:t,type:_0xa6d8[7]};_[_0xa6d8[248]]({api:_0xa6d8[247],value:n}),console[_0xa6d8[9]](e)}},this[_0xa6d8[258]]=function(e){if(!0===o&&ve[_0xa6d8[30]](e)&&e!==_0xa6d8[14]){var t=[];t[0]={message:e,type:_0xa6d8[7],time:l()};var n={logMessage:t,type:_0xa6d8[7]};_[_0xa6d8[248]]({api:_0xa6d8[247],value:n}),console[_0xa6d8[258]](e)}},this[_0xa6d8[259]]=function(e){o=e}}function r(e){var t,n,i,r,a=_0xa6d8[14];a=ve[_0xa6d8[67]](e)&&0<e[_0xa6d8[44]]?e:window[_0xa6d8[265]][_0xa6d8[264]];var s=new o;this[_0xa6d8[266]]=function(){!function(){B[_0xa6d8[3]](_0xa6d8[267]),ve[_0xa6d8[268]](s)?t=s[_0xa6d8[186]](a):B[_0xa6d8[9]](_0xa6d8[269]);B[_0xa6d8[3]](_0xa6d8[270])}(),function(){B[_0xa6d8[3]](_0xa6d8[271]),ve[_0xa6d8[268]](s)?n=s[_0xa6d8[211]](a):B[_0xa6d8[9]](_0xa6d8[272]);B[_0xa6d8[3]](_0xa6d8[273])}(),function(){B[_0xa6d8[3]](_0xa6d8[274]),ve[_0xa6d8[268]](s)?i=s[_0xa6d8[226]](a):B[_0xa6d8[9]](_0xa6d8[275]);B[_0xa6d8[3]](_0xa6d8[276])}(),function(){B[_0xa6d8[3]](_0xa6d8[277]),ve[_0xa6d8[268]](s)?r=s[_0xa6d8[237]](a):B[_0xa6d8[9]](_0xa6d8[278]);B[_0xa6d8[3]](_0xa6d8[279])}()},this[_0xa6d8[280]]=function(e){e[_0xa6d8[281]](this)},this[_0xa6d8[282]]=function(){return{os:t,fullOs:t+_0xa6d8[249]+n,browser:i,device:r,userAgent:a}},this[_0xa6d8[283]]=function(){return i}}function a(){var t=_0xa6d8[14];this[_0xa6d8[284]]=function(){if(B[_0xa6d8[3]](_0xa6d8[285]),ve[_0xa6d8[67]](t)&&0<t[_0xa6d8[44]]);else try{if(t=R[_0xa6d8[183]](P.LOCAL_STORAGE,_0xa6d8[286]),!ve[_0xa6d8[30]](t)||t===_0xa6d8[14]){var e=new c;t=e.UUID(),R[_0xa6d8[180]](P.LOCAL_STORAGE,_0xa6d8[286],t)}}catch(e){B[_0xa6d8[3]](_0xa6d8[287]+e)}return B[_0xa6d8[3]](_0xa6d8[288]),t},this[_0xa6d8[289]]=function(e){try{R[_0xa6d8[180]](P.LOCAL_STORAGE,_0xa6d8[286],e),t=e}catch(e){B[_0xa6d8[3]](_0xa6d8[290]+e)}},this[_0xa6d8[280]]=function(e){e[_0xa6d8[281]](this)},this[_0xa6d8[282]]=function(){return{viewerId:this[_0xa6d8[284]](),clientId:t}}}function s(){var s,o,l,u=_0xa6d8[249];this[_0xa6d8[291]]=function(e){B[_0xa6d8[3]](_0xa6d8[292]);try{var t,n,i,r;if(ve[_0xa6d8[30]](e)&&(t=e[_0xa6d8[19]](_0xa6d8[293]),n=e[_0xa6d8[19]](_0xa6d8[294])),ve[_0xa6d8[67]](t)&&0<t[_0xa6d8[44]]&&(i=this[_0xa6d8[295]](t)),ve[_0xa6d8[67]](n)&&0<n[_0xa6d8[44]]&&(r=this[_0xa6d8[295]](n)),document&&document[_0xa6d8[296]]){var a=document[_0xa6d8[296]];(a=a[_0xa6d8[159]](_0xa6d8[231],3))&&a[2]&&(u=a[2])}u=window===window[_0xa6d8[297]]?(s=t||document[_0xa6d8[298]],o=t&&i?i:document[_0xa6d8[300]][_0xa6d8[299]],l=n||(document[_0xa6d8[296]]?document[_0xa6d8[296]]:_0xa6d8[249]),n&&r?r:document[_0xa6d8[296]]?u:_0xa6d8[249]):(s=t||(document[_0xa6d8[296]]?document[_0xa6d8[296]]:_0xa6d8[249]),o=t&&i?i:document[_0xa6d8[296]]?u:_0xa6d8[249],l=n||_0xa6d8[301],n&&r?r:_0xa6d8[301])}catch(e){B[_0xa6d8[3]](_0xa6d8[302]+e)}},this[_0xa6d8[295]]=function(e){try{return/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/[_0xa6d8[171]](e)[2]}catch(e){B[_0xa6d8[3]](_0xa6d8[303]+e)}},this[_0xa6d8[280]]=function(e){e[_0xa6d8[281]](this)},this[_0xa6d8[282]]=function(){return{pageUrl:s,pageHost:o,pageReferrer:l,pageReferrerHost:u}}}amaTimeSpan=function(){var n=(new Date)[_0xa6d8[168]]();return this[_0xa6d8[260]]=function(e){var t=(new Date)[_0xa6d8[168]]()-n;return e&&this[_0xa6d8[261]](),t},this[_0xa6d8[262]]=function(e){var t=(new Date)[_0xa6d8[168]]()-n;return e&&this[_0xa6d8[261]](),t/1e3},this[_0xa6d8[263]]=function(e){var t=(new Date)[_0xa6d8[168]]()-n;return e&&this[_0xa6d8[261]](),1e3*t},this[_0xa6d8[261]]=function(){n=(new Date)[_0xa6d8[168]]()},this},amaParseStreamURL=function(){var s=null,o=null,l=0,u=null,c=null,d=null,h=null;this[_0xa6d8[304]]=function(e,t){if(ve[_0xa6d8[67]](e)&&e!==_0xa6d8[14]){try{var n=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/[_0xa6d8[171]](e);B[_0xa6d8[3]](_0xa6d8[305]+n[1]+n[2]+n[3]+n[4]+n[5]+n[6]),s=n[1],o=n[2],l=n[3]?n[3]:_0xa6d8[306];var i=(u=n[4])[_0xa6d8[159]](_0xa6d8[231]),r=i[_0xa6d8[44]];c=i[r-1],B[_0xa6d8[3]](_0xa6d8[307]+c+_0xa6d8[308]+r);var a=c[_0xa6d8[187]]();-1==a[_0xa6d8[84]](_0xa6d8[309])&&-1==a[_0xa6d8[84]](_0xa6d8[310])&&-1==a[_0xa6d8[84]](_0xa6d8[311])&&-1==a[_0xa6d8[84]](_0xa6d8[312])||3<=r&&(c=i[r-2]+_0xa6d8[231]+i[r-1],B[_0xa6d8[3]](_0xa6d8[307]+c)),d=n[5]?n[5]:_0xa6d8[14],n[6]?n[6]:_0xa6d8[14],h=o+_0xa6d8[165]+l,t&&(t[_0xa6d8[313]]=s,t[_0xa6d8[314]]=o,t[_0xa6d8[315]]=l,t[_0xa6d8[152]]=u,t[_0xa6d8[316]]=c,t[_0xa6d8[317]]=d,t[_0xa6d8[318]]=h)}catch(e){B[_0xa6d8[3]](_0xa6d8[319]+e)}}},this[_0xa6d8[313]]=function(){return s},this[_0xa6d8[314]]=function(){return o},this[_0xa6d8[315]]=function(){return l},this[_0xa6d8[152]]=function(){return u},this[_0xa6d8[316]]=function(){return c},this[_0xa6d8[317]]=function(){return d},this[_0xa6d8[318]]=function(){return h}},amaPlayingState=function(){var g,v,_,y,e=_0xa6d8[320],x=!1,b=0,T=0,S=!1,E=0,w=0,M=new amaDictionary,i=0,A=0,r=0,C=0,P=0,R=0,D=_0xa6d8[14],k=_0xa6d8[14],I=0,L=0,O=0,N=0,U=_0xa6d8[14];return this[_0xa6d8[321]]=function(){return e},this[_0xa6d8[322]]=function(e){B[_0xa6d8[3]](_0xa6d8[323]),v=new amaTimeSpan,_=new amaTimeSpan,ve[_0xa6d8[268]](e)&&(r=1e3*e[_0xa6d8[324]]),x=!0,B[_0xa6d8[3]](_0xa6d8[325])},this[_0xa6d8[326]]=function(e){B[_0xa6d8[3]](_0xa6d8[327]);try{if(!1===x)return;if(ve[_0xa6d8[268]](e))if(ve[_0xa6d8[30]](e[_0xa6d8[328]]))ve[_0xa6d8[30]](e[_0xa6d8[324]])&&(0===E?(g=1e3*e[_0xa6d8[324]],E=e[_0xa6d8[328]]):this[_0xa6d8[329]](1e3*e[_0xa6d8[324]],e[_0xa6d8[328]]),B[_0xa6d8[3]](_0xa6d8[330]+1e3*e[_0xa6d8[324]],e[_0xa6d8[328]]));else{B[_0xa6d8[3]](_0xa6d8[331]+r+_0xa6d8[332]+1e3*e[_0xa6d8[324]]);var t=1e3*e[_0xa6d8[324]];r<t&&(i+=T=t-r,r=t,B[_0xa6d8[3]](_0xa6d8[333]+T+_0xa6d8[235]+i+_0xa6d8[235]+r))}}catch(e){B[_0xa6d8[9]](_0xa6d8[334]+e)}finally{B[_0xa6d8[3]](_0xa6d8[335])}},this[_0xa6d8[336]]=function(e){B[_0xa6d8[3]](_0xa6d8[337]);try{if(D=_0xa6d8[14],k=_0xa6d8[14],!1===x)return;if(ve[_0xa6d8[30]](_)&&(B[_0xa6d8[3]](_0xa6d8[338]+w),w+=_[_0xa6d8[260]](),B[_0xa6d8[3]](_0xa6d8[339]+w)),ve[_0xa6d8[30]](v)){var t=v[_0xa6d8[260]]();b+=t,A+=t}B[_0xa6d8[3]](_0xa6d8[340]+b),B[_0xa6d8[3]](_0xa6d8[341]);var n,i,r=0,a=0,s=0,o=0,l=0,u=0;for(i in M[_0xa6d8[18]]()){var c=M[_0xa6d8[19]](i),d=0;if(0!==c){var h,f;for(f in c){var p=(h=c[f])[_0xa6d8[342]];D+=i[_0xa6d8[166]](_0xa6d8[165],p.toString(),_0xa6d8[165]);var m=h[_0xa6d8[343]];ve[_0xa6d8[30]](m)?B[_0xa6d8[3]](_0xa6d8[345]+m):B[_0xa6d8[3]](_0xa6d8[344]),D+=m.toString(),D+=_0xa6d8[165][_0xa6d8[166]](_0xa6d8[165],_0xa6d8[252]),i===E.toString()?d+=w+h[_0xa6d8[343]]:d+=h[_0xa6d8[343]],0<(n=parseInt(i))&&n<15e5?o+=h[_0xa6d8[343]]:15e5<=n&&n<25e5?l+=h[_0xa6d8[343]]:25e5<=n?u+=h[_0xa6d8[343]]:s+=h[_0xa6d8[343]]}r+=parseInt(i)*d,a+=d,U=_0xa6d8[346]+s.toString()+_0xa6d8[347]+o.toString()+_0xa6d8[348]+l.toString()+_0xa6d8[349]+u.toString(),ve[_0xa6d8[30]](d)?B[_0xa6d8[3]](_0xa6d8[351]+d):B[_0xa6d8[3]](_0xa6d8[350]),k+=i[_0xa6d8[166]](_0xa6d8[165],d.toString(),_0xa6d8[252])}}M[_0xa6d8[352]](E)||(r+=parseInt(E)*w,a+=w,ve[_0xa6d8[30]](w)?B[_0xa6d8[3]](_0xa6d8[354]+w):B[_0xa6d8[3]](_0xa6d8[353]),k+=E.toString()+_0xa6d8[165]+w.toString()+_0xa6d8[252]),ve[_0xa6d8[30]](g)?B[_0xa6d8[3]](_0xa6d8[356]+g):B[_0xa6d8[3]](_0xa6d8[355]),ve[_0xa6d8[30]](E)&&0!==E&&(D+=E.toString()+_0xa6d8[165]+g.toString()+_0xa6d8[165]+w.toString()+_0xa6d8[165]+_0xa6d8[165]+_0xa6d8[252]),0!==a&&(ve[_0xa6d8[30]](r)?B[_0xa6d8[3]](_0xa6d8[358]+r):B[_0xa6d8[3]](_0xa6d8[357]),ve[_0xa6d8[30]](a)?B[_0xa6d8[3]](_0xa6d8[360]+a):B[_0xa6d8[3]](_0xa6d8[359]),R=r.toString()[_0xa6d8[166]](_0xa6d8[165],a.toString())),ve[_0xa6d8[30]](v)&&v[_0xa6d8[261]](),ve[_0xa6d8[30]](_)&&_[_0xa6d8[261]](),!S&&5e3<=A?(S=!0,y=_0xa6d8[161]):_0xa6d8[161]===y&&(y=_0xa6d8[361]),I=T,L=b,N=C,O=P,w=T=b=C=P=0,M[_0xa6d8[362]]()}catch(e){B[_0xa6d8[9]](_0xa6d8[363]+e)}finally{B[_0xa6d8[3]](_0xa6d8[364])}},this[_0xa6d8[282]]=function(){return{playStreamTime:I.toString(),totalPlayStreamTime:i.toString(),playClockTime:L.toString(),totalPlayClockTime:A.toString(),transitionCount:(N+O).toString(),transitionUpSwitchCount:N.toString(),transitionDownSwitchCount:O.toString(),currentStreamTime:r.toString(),averagedBitRate:R,transitionStreamTimeSession:D[_0xa6d8[230]](0,D[_0xa6d8[44]]-1),transitionStreamTimes:k[_0xa6d8[230]](0,k[_0xa6d8[44]]-1),bitRateBucketTimes:U,isView:y}},this[_0xa6d8[329]]=function(e,t){B[_0xa6d8[3]](_0xa6d8[371]);try{if(!1===x)return;if(null!==_&&E!==t&&0<t){B[_0xa6d8[3]](_0xa6d8[372]+w),w+=_[_0xa6d8[260]](),B[_0xa6d8[3]](_0xa6d8[373]+w);var n={};if(n[_0xa6d8[342]]=g,n[_0xa6d8[343]]=w,M[_0xa6d8[352]](E.toString())){B[_0xa6d8[3]](_0xa6d8[374]+E);var i=M[_0xa6d8[19]](E);i[_0xa6d8[118]](n),M[_0xa6d8[54]](E.toString(),i)}else{B[_0xa6d8[3]](_0xa6d8[375]+E);var r=[];r[_0xa6d8[118]](n),M[_0xa6d8[54]](E.toString(),r)}for(var a in B[_0xa6d8[3]](_0xa6d8[376]),M[_0xa6d8[18]]()){B[_0xa6d8[3]](_0xa6d8[377]+a),B[_0xa6d8[3]](_0xa6d8[378]);var s=M[_0xa6d8[19]](a);for(var o in s)bti=s[o],B[_0xa6d8[3]](_0xa6d8[379]+bti[_0xa6d8[342]]+_0xa6d8[380]+bti[_0xa6d8[343]])}E<t?C++:t<E&&P++,E=t,g=e,w=0,_[_0xa6d8[261]]()}}catch(e){B[_0xa6d8[9]](_0xa6d8[381]+e)}finally{B[_0xa6d8[3]](_0xa6d8[382])}},this[_0xa6d8[383]]=function(e){B[_0xa6d8[3]](_0xa6d8[384]),T=b=0,bitRatePlayTime=0,_=v=null,x=!1,M[_0xa6d8[362]](),B[_0xa6d8[3]](_0xa6d8[385])},this[_0xa6d8[386]]=function(e){if(B[_0xa6d8[3]](_0xa6d8[387]),!1!==x){B[_0xa6d8[3]](_0xa6d8[388]+w),w+=_[_0xa6d8[260]](),B[_0xa6d8[3]](_0xa6d8[389]+w);var t=v[_0xa6d8[260]]();b+=t,A+=t,v=_=null;var n=1e3*e[_0xa6d8[324]];T+=n-r,B[_0xa6d8[3]](_0xa6d8[390]+i),i+=n-r,B[_0xa6d8[3]](_0xa6d8[391]+i),B[_0xa6d8[3]](_0xa6d8[392])}},this},amaInitState=function(){var e=_0xa6d8[393],t=0,n=null;return this[_0xa6d8[321]]=function(){return e},this[_0xa6d8[322]]=function(e){n=new amaTimeSpan,!0},this[_0xa6d8[326]]=function(e){},this[_0xa6d8[386]]=function(e){ve[_0xa6d8[30]](n)&&(t=n[_0xa6d8[260]](),n=null)},this[_0xa6d8[336]]=function(){},this[_0xa6d8[282]]=function(){return{endOfStream:_0xa6d8[361],startupTime:t.toString()}},this[_0xa6d8[383]]=function(e){B[_0xa6d8[3]](_0xa6d8[394])},this},amaRebufferState=function(){var e=_0xa6d8[395],i=!1,n=0,r=0,a=null,s=0,o=-1,l=0,u=-1,c=-1,d=0,h=_0xa6d8[14],f=!1,p=!0,m=0,g=_0xa6d8[14];return this[_0xa6d8[321]]=function(){return e},this[_0xa6d8[322]]=function(e){B[_0xa6d8[3]](_0xa6d8[396]);try{if(!ve[_0xa6d8[30]](e))return;a=new amaTimeSpan;var t=new Date;B[_0xa6d8[3]](_0xa6d8[397]+t[_0xa6d8[168]]()),ve[_0xa6d8[268]](e)&&ve[_0xa6d8[30]](e[_0xa6d8[398]])&&(s=e[_0xa6d8[398]]),ve[_0xa6d8[30]](e[_0xa6d8[399]])&&(u=e[_0xa6d8[399]]),n+=1,r+=1,-1<o&&o<s&&1==n&&(B[_0xa6d8[3]](_0xa6d8[400]+s+_0xa6d8[401]+o),l=s-o,B[_0xa6d8[3]](_0xa6d8[402]+l)),B[_0xa6d8[3]](_0xa6d8[403]+s),i=!0}catch(e){B[_0xa6d8[9]](_0xa6d8[404]+e)}finally{B[_0xa6d8[3]](_0xa6d8[405])}},this[_0xa6d8[326]]=function(e){},this[_0xa6d8[336]]=function(e){B[_0xa6d8[3]](_0xa6d8[406]);try{if(g=_0xa6d8[14],!1===i)return void B[_0xa6d8[3]](_0xa6d8[407]);var t=e[_0xa6d8[408]];if(f?(g+=_0xa6d8[409],B[_0xa6d8[3]](_0xa6d8[410])):g+=_0xa6d8[411],p?(g+=_0xa6d8[412],p=!1):f?g+=_0xa6d8[361]:(g+=l.toString(),B[_0xa6d8[3]](_0xa6d8[413]+l)),g+=_0xa6d8[158],B[_0xa6d8[3]](_0xa6d8[414]+g),t===_0xa6d8[395]){c=a[_0xa6d8[260]](),m+=c,B[_0xa6d8[3]](_0xa6d8[415]+c),d+=c,h&&(g+=h,B[_0xa6d8[3]](_0xa6d8[414]+g));var n=s-u;f?g+=_0xa6d8[411]:(g+=n.toString()+_0xa6d8[165],B[_0xa6d8[3]](_0xa6d8[414]+g)),g+=c.toString()+_0xa6d8[158],B[_0xa6d8[3]](_0xa6d8[414]+g),f=!0,a[_0xa6d8[261]]()}else B[_0xa6d8[3]](_0xa6d8[416]+h),g+=h,f=!1}catch(e){B[_0xa6d8[9]](_0xa6d8[417]+e)}finally{B[_0xa6d8[3]](_0xa6d8[418])}},this[_0xa6d8[282]]=function(){return{isFirstRebuffer:p,rebufferSession:g,rebufferCount:n.toString(),rebufferTime:m.toString(),totalRebufferTime:d.toString(),totalRebufferCount:r.toString()}},this[_0xa6d8[386]]=function(e){B[_0xa6d8[3]](_0xa6d8[419]),ve[_0xa6d8[30]](e[_0xa6d8[420]])&&(o=e[_0xa6d8[420]]),c=a[_0xa6d8[260]](),m+=c,B[_0xa6d8[3]](_0xa6d8[421]+c),d+=c;var t=s-u;h+=f&&0===n?_0xa6d8[411]+c.toString()+_0xa6d8[158]:t.toString()+_0xa6d8[165]+c.toString()+_0xa6d8[158],a=null,B[_0xa6d8[3]](_0xa6d8[422]+h)},this[_0xa6d8[383]]=function(e){B[_0xa6d8[3]](_0xa6d8[423]),c=-1,m=n=0,h=_0xa6d8[14],l=0,!1===f&&(B[_0xa6d8[3]](_0xa6d8[424]),i=!1,u=s=0),ve[_0xa6d8[30]](e)&&(B[_0xa6d8[3]](_0xa6d8[425]),e[_0xa6d8[427]](_0xa6d8[426]),e[_0xa6d8[427]](_0xa6d8[428]),e[_0xa6d8[427]](_0xa6d8[429])),B[_0xa6d8[3]](_0xa6d8[430])},this},amaPlaybackEndState=function(){var e=_0xa6d8[431],t=null,n=_0xa6d8[14];return this[_0xa6d8[321]]=function(){return e},this[_0xa6d8[322]]=function(e){try{B[_0xa6d8[3]](_0xa6d8[432]),ve[_0xa6d8[268]](e)&&(ve[_0xa6d8[30]](e[_0xa6d8[433]])&&(B[_0xa6d8[3]](_0xa6d8[434]+e[_0xa6d8[433]]),t=e[_0xa6d8[433]]),ve[_0xa6d8[30]](e[_0xa6d8[435]])&&(B[_0xa6d8[3]](_0xa6d8[436]+e[_0xa6d8[435]]),n=e[_0xa6d8[435]]))}catch(e){B[_0xa6d8[9]](_0xa6d8[437]+e)}finally{B[_0xa6d8[3]](_0xa6d8[438])}},this[_0xa6d8[326]]=function(e){ve[_0xa6d8[268]](e)&&(t=e[_0xa6d8[433]])},this[_0xa6d8[386]]=function(e){ve[_0xa6d8[268]](e)},this[_0xa6d8[336]]=function(){B[_0xa6d8[3]](_0xa6d8[439]),B[_0xa6d8[3]](_0xa6d8[440])},this[_0xa6d8[282]]=function(){return{errorCode:t,endReasonCode:n}},this[_0xa6d8[383]]=function(e){B[_0xa6d8[3]](_0xa6d8[441]),n=t=null,B[_0xa6d8[3]](_0xa6d8[442])},this},amaPauseState=function(){var e=_0xa6d8[443],t=0,n=!1,i=0,r=null;return this[_0xa6d8[321]]=function(){return e},this[_0xa6d8[322]]=function(e){B[_0xa6d8[3]](_0xa6d8[444]),ve[_0xa6d8[268]](e)&&(r=new amaTimeSpan,i+=1,1,n=!0),B[_0xa6d8[3]](_0xa6d8[445])},this[_0xa6d8[326]]=function(e){ve[_0xa6d8[268]](e)},this[_0xa6d8[386]]=function(e){B[_0xa6d8[3]](_0xa6d8[446]),t+=r[_0xa6d8[260]](),r[_0xa6d8[260]](),r=null,B[_0xa6d8[3]](_0xa6d8[447])},this[_0xa6d8[336]]=function(){B[_0xa6d8[3]](_0xa6d8[448]);try{!1!==n&&ve[_0xa6d8[30]](r)&&(t+=r[_0xa6d8[260]](),r[_0xa6d8[260]](),r[_0xa6d8[261]]())}catch(e){B[_0xa6d8[9]](_0xa6d8[449]+e)}finally{B[_0xa6d8[3]](_0xa6d8[450])}},this[_0xa6d8[282]]=function(){return{pauseDuration:t.toString(),pauseCount:i.toString()}},this[_0xa6d8[383]]=function(e){B[_0xa6d8[3]](_0xa6d8[451]),t=i=0,n=!1,r=null,B[_0xa6d8[3]](_0xa6d8[452])},this},amaSeekState=function(){var e=_0xa6d8[453],t=0,n=0,i=null,r=!1;return this[_0xa6d8[321]]=function(){return e},this[_0xa6d8[322]]=function(e){B[_0xa6d8[3]](_0xa6d8[454]),ve[_0xa6d8[268]](e)&&(i=new amaTimeSpan,n+=1,1,r=!0),B[_0xa6d8[3]](_0xa6d8[455])},this[_0xa6d8[326]]=function(e){ve[_0xa6d8[268]](e)},this[_0xa6d8[386]]=function(e){B[_0xa6d8[3]](_0xa6d8[456]),t+=i[_0xa6d8[260]](),i[_0xa6d8[260]](),i=null,B[_0xa6d8[3]](_0xa6d8[457])},this[_0xa6d8[336]]=function(e){B[_0xa6d8[3]](_0xa6d8[458]);try{!1!==r&&null!==i&&(t+=i[_0xa6d8[260]](),i[_0xa6d8[260]](),i[_0xa6d8[261]]())}catch(e){B[_0xa6d8[9]](_0xa6d8[459]+exception)}finally{B[_0xa6d8[3]](_0xa6d8[460])}},this[_0xa6d8[282]]=function(){return{seekDuration:t.toString(),seekCount:n.toString()}},this[_0xa6d8[383]]=function(e){B[_0xa6d8[3]](_0xa6d8[461]),t=n=0,r=!1,i=null,B[_0xa6d8[3]](_0xa6d8[462])},this},adEndStatusEnum={adPlayedCompletely:0,adStoppedClosed:1,adAppClosed:2,adError:3},amaAdState=function(){var e=_0xa6d8[463],i=[],t=0,n=null;adStartupTime=0,adPlayTime=0,adPlayBucket=-1,adEndStatus=-1;var r=adSession=null;function a(){var e=_0xa6d8[14];for(var t in i){var n=i[t];n[_0xa6d8[480]]=r[_0xa6d8[260]](),ve[_0xa6d8[30]](n[_0xa6d8[481]])&&(e+=n[_0xa6d8[481]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[482]])&&(e+=n[_0xa6d8[482]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[483]])&&(e+=n[_0xa6d8[483]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[466]])&&(e+=n[_0xa6d8[466]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[480]])&&(e+=n[_0xa6d8[480]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[465]])&&(e+=n[_0xa6d8[465]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[471]])&&(e+=n[_0xa6d8[471]]),e+=_0xa6d8[165],ve[_0xa6d8[485]](n[_0xa6d8[484]])||(e+=n[_0xa6d8[484]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[486]])&&(e+=n[_0xa6d8[486]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[487]])&&(e+=n[_0xa6d8[487]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[488]])&&(e+=n[_0xa6d8[488]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[489]])&&(e+=n[_0xa6d8[489]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[490]])&&(e+=n[_0xa6d8[490]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[491]])&&(e+=n[_0xa6d8[491]]),e+=_0xa6d8[165],ve[_0xa6d8[30]](n[_0xa6d8[492]])&&(e+=n[_0xa6d8[492]]),e+=_0xa6d8[252]}return i=[],e[_0xa6d8[172]](0,e[_0xa6d8[44]]-1)}return this[_0xa6d8[321]]=function(){return e},this[_0xa6d8[322]]=function(e){try{if(B[_0xa6d8[3]](_0xa6d8[464]),r=new amaTimeSpan,ve[_0xa6d8[268]](e))for(var t in n={},e)n[t]=e[t]}catch(e){B[_0xa6d8[9]](_0xa6d8[437]+e)}finally{B[_0xa6d8[3]](_0xa6d8[438])}},this[_0xa6d8[326]]=function(e){switch(e[_0xa6d8[478]]){case _0xa6d8[467]:n[_0xa6d8[465]]=0,n[_0xa6d8[466]]=r[_0xa6d8[260]]();break;case _0xa6d8[468]:n[_0xa6d8[465]]=1;break;case _0xa6d8[469]:n[_0xa6d8[465]]=2;break;case _0xa6d8[470]:n[_0xa6d8[465]]=3;break;case _0xa6d8[473]:n[_0xa6d8[465]]=4,n[_0xa6d8[471]]=adEndStatusEnum[_0xa6d8[472]];break;case _0xa6d8[475]:n[_0xa6d8[471]]=adEndStatusEnum[_0xa6d8[474]];break;case _0xa6d8[476]:n[_0xa6d8[471]]=adEndStatusEnum[_0xa6d8[476]];break;case _0xa6d8[477]:n[_0xa6d8[471]]=adEndStatusEnum[_0xa6d8[477]]}if(ve[_0xa6d8[268]](e))for(var t in e[_0xa6d8[479]])n[t]=e[_0xa6d8[479]][t]},this[_0xa6d8[386]]=function(e){t++,i[_0xa6d8[118]](n)},this[_0xa6d8[336]]=function(e){B[_0xa6d8[3]](_0xa6d8[439]);try{if(adSession=_0xa6d8[14],ve[_0xa6d8[268]](e)&&ve[_0xa6d8[30]](n))for(var t in e)n[t]=e[t]}catch(e){B[_0xa6d8[9]](_0xa6d8[493]+e)}finally{B[_0xa6d8[3]](_0xa6d8[494])}},this[_0xa6d8[282]]=function(){return{adCount:t.toString(),adStartupTime:adStartupTime.toString(),adPlayTime:adPlayTime.toString(),adPlayBucket:adPlayBucket.toString(),adSession:a,endStatus:adEndStatus}},this[_0xa6d8[383]]=function(e){B[_0xa6d8[3]](_0xa6d8[441]),adSession=null,t=0,B[_0xa6d8[3]](_0xa6d8[442])},this},stateEnum={unknownState:_0xa6d8[495],initState:_0xa6d8[496],playStartState:_0xa6d8[497],playingState:_0xa6d8[320],rebufferState:_0xa6d8[395],pauseState:_0xa6d8[443],seekState:_0xa6d8[453],endState:_0xa6d8[431],adState:_0xa6d8[463]},amaStateMachine=function(){var i=null,r=null;function e(){var e,t=i[_0xa6d8[321]]();return t===_0xa6d8[393]?e=_0xa6d8[521]:t===_0xa6d8[320]?e=_0xa6d8[522]:t===_0xa6d8[395]?e=_0xa6d8[523]:t===_0xa6d8[443]?e=_0xa6d8[524]:t===_0xa6d8[453]?e=_0xa6d8[525]:t===_0xa6d8[431]&&(e=_0xa6d8[526]),e}return this[_0xa6d8[393]]=function(){(r=new amaDictionary)[_0xa6d8[54]](stateEnum[_0xa6d8[498]],new amaInitState),r[_0xa6d8[54]](stateEnum[_0xa6d8[499]],new amaPlaystartState),r[_0xa6d8[54]](stateEnum[_0xa6d8[500]],new amaPlayingState),r[_0xa6d8[54]](stateEnum[_0xa6d8[501]],new amaRebufferState),r[_0xa6d8[54]](stateEnum[_0xa6d8[502]],new amaPauseState),r[_0xa6d8[54]](stateEnum[_0xa6d8[503]],new amaSeekState),r[_0xa6d8[54]](stateEnum[_0xa6d8[386]],new amaPlaybackEndState),r[_0xa6d8[54]](stateEnum[_0xa6d8[504]],new amaAdState)},this[_0xa6d8[505]]=function(){return i[_0xa6d8[321]]()},this[_0xa6d8[506]]=function(){var e=function(e){{if(e===_0xa6d8[496])return stateEnum[_0xa6d8[498]];if(e===_0xa6d8[497])return stateEnum[_0xa6d8[499]];if(e===_0xa6d8[320])return stateEnum[_0xa6d8[500]];if(e===_0xa6d8[395])return stateEnum[_0xa6d8[501]];if(e===_0xa6d8[443])return stateEnum[_0xa6d8[502]];if(e===_0xa6d8[453])return stateEnum[_0xa6d8[503]];if(e===_0xa6d8[431])return stateEnum[_0xa6d8[386]]}return stateEnum[_0xa6d8[529]]}(this[_0xa6d8[505]]());return B[_0xa6d8[3]](_0xa6d8[507]+e),e},this[_0xa6d8[508]]=function(){return i},this[_0xa6d8[509]]=function(e,t,n){if(B[_0xa6d8[3]](_0xa6d8[510]+e),!r[_0xa6d8[352]](e))return B[_0xa6d8[3]](_0xa6d8[518]),!1;if(ve[_0xa6d8[30]](i)){if(e===i[_0xa6d8[321]]())return!1;B[_0xa6d8[3]](_0xa6d8[511]+i[_0xa6d8[321]]()),t[_0xa6d8[512]]!==amaDictionary?B[_0xa6d8[3]](_0xa6d8[513]):B[_0xa6d8[3]](_0xa6d8[514]),i[_0xa6d8[386]](t)}return i=r[_0xa6d8[19]](e),n[_0xa6d8[512]]!==amaDictionary?(B[_0xa6d8[3]](_0xa6d8[515]),B[_0xa6d8[3]](_0xa6d8[516]+n+_0xa6d8[517]+e)):B[_0xa6d8[3]](_0xa6d8[514]),i[_0xa6d8[322]](n),!0},this[_0xa6d8[520]]=function(){var e,t={};for(e in t[_0xa6d8[408]]=this[_0xa6d8[505]](),r[_0xa6d8[18]]())r[_0xa6d8[19]](e)[_0xa6d8[336]](t)},this[_0xa6d8[280]]=function(e){var t,n=null;for(t in e[_0xa6d8[281]](this),r[_0xa6d8[18]]())n=r[_0xa6d8[19]](t),e[_0xa6d8[281]](n)},this[_0xa6d8[282]]=function(){return{playerState:e}},this[_0xa6d8[527]]=function(e,t){(B[_0xa6d8[3]](_0xa6d8[528]+e),e===this[_0xa6d8[505]]())?i[_0xa6d8[326]](t):r[_0xa6d8[352]](e)&&mediaState[_0xa6d8[19]](e)[_0xa6d8[326]](t)},this[_0xa6d8[530]]=function(e){},this[_0xa6d8[531]]=function(e,t){if(r[_0xa6d8[352]](e))r[e]},this[_0xa6d8[532]]=function(e){B[_0xa6d8[3]](_0xa6d8[533]);var t=null;for(t in r[_0xa6d8[18]]())r[_0xa6d8[19]](t)[_0xa6d8[386]](e)},this[_0xa6d8[534]]=function(e){B[_0xa6d8[3]](_0xa6d8[535]),i[_0xa6d8[386]](e)},this[_0xa6d8[386]]=function(e,t){(B[_0xa6d8[3]](_0xa6d8[536]),r[_0xa6d8[352]](e))&&r[e][_0xa6d8[386]]()},this[_0xa6d8[537]]=function(e){var t=null;for(t in B[_0xa6d8[3]](_0xa6d8[538]+this[_0xa6d8[505]]()),r[_0xa6d8[18]]())B[_0xa6d8[3]](_0xa6d8[539]+t),t===_0xa6d8[395]?r[_0xa6d8[19]](t)[_0xa6d8[383]](e):t!==this[_0xa6d8[505]]()&&r[_0xa6d8[19]](t)[_0xa6d8[383]](e)},this[_0xa6d8[540]]=function(){i[_0xa6d8[383]]()},this[_0xa6d8[383]]=function(e){r[_0xa6d8[352]](e)&&r[e][_0xa6d8[383]]()},this[_0xa6d8[541]]=function(){r[_0xa6d8[362]]()},this},amaPlaystartState=function(){var i=_0xa6d8[14],e=_0xa6d8[497],r=_0xa6d8[14],a=!1,s=0,o=null,l=null,u=null,c=0,d=null,h=_0xa6d8[249];return this[_0xa6d8[321]]=function(){return e},this[_0xa6d8[322]]=function(e){if(ve[_0xa6d8[30]](e)){B[_0xa6d8[3]](_0xa6d8[542]),r=e[_0xa6d8[543]];var t=!1;ve[_0xa6d8[67]](e[_0xa6d8[544]])&&-1===e[_0xa6d8[544]][_0xa6d8[84]](_0xa6d8[545])?(o=e[_0xa6d8[544]],t=e[_0xa6d8[546]]):(o=_0xa6d8[14],B[_0xa6d8[3]](_0xa6d8[547]));var n=e[_0xa6d8[310]];B[_0xa6d8[3]](_0xa6d8[548]+o),StreamTypeDetector(o,n,t,function(e){d=e[_0xa6d8[549]](),h=e[_0xa6d8[550]](),c=e[_0xa6d8[551]](),s=e[_0xa6d8[552]](),l=e[_0xa6d8[314]],u=e[_0xa6d8[313]],i=u!==_0xa6d8[553]?_0xa6d8[306]:_0xa6d8[554],B[_0xa6d8[3]](_0xa6d8[555]+s+ +_0xa6d8[556]+l+_0xa6d8[557]+u+_0xa6d8[558]+c)}),a=!0,B[_0xa6d8[3]](_0xa6d8[559])}},this[_0xa6d8[326]]=function(e){},this[_0xa6d8[336]]=function(e){!1!==a&&B[_0xa6d8[3]](_0xa6d8[560]+d+_0xa6d8[561]+o+_0xa6d8[562]+c+_0xa6d8[563]+s)},this[_0xa6d8[282]]=function(){return{streamUrl:o,endOfStream:_0xa6d8[361],streamLength:ve[_0xa6d8[169]](c)?c.toString():c,streamName:s,format:d,deliveryType:h,title:s,eventName:s,hostName:l,port:i,isFirstTitle:r}},this[_0xa6d8[386]]=function(e){B[_0xa6d8[3]](_0xa6d8[564])},this[_0xa6d8[383]]=function(e){B[_0xa6d8[3]](_0xa6d8[565]),c=0,d=s=o=null,B[_0xa6d8[3]](_0xa6d8[566])},this},amaBeaconDataStore=function(){function i(e,t,n){switch(e){default:n[_0xa6d8[54]](e,t);break;case _0xa6d8[570]:H[_0xa6d8[569]]()?n[_0xa6d8[427]](_0xa6d8[570]):n[_0xa6d8[54]](_0xa6d8[570],t)}}this[_0xa6d8[281]]=function(e){var t=e[_0xa6d8[282]](),n=this[_0xa6d8[567]]();O[_0xa6d8[568]](t,i,n)}},amaCustomDataStore=function(){function i(e,t,n){n[_0xa6d8[54]](e,t)}this[_0xa6d8[571]]=function(e,t){ve[_0xa6d8[268]](customMetrics)&&ve[_0xa6d8[67]](e)&&ve[_0xa6d8[67]](t)&&customMetrics[_0xa6d8[54]](e,t)},this[_0xa6d8[281]]=function(e){var t=e[_0xa6d8[282]](),n=this[_0xa6d8[567]]();O[_0xa6d8[568]](t,i,n)}},amaDataStoreBase=function(){function i(e,t,n){n[_0xa6d8[54]](e,t)}this[_0xa6d8[572]]=new amaDictionary,this[_0xa6d8[568]]=function(e,t,n){},this[_0xa6d8[281]]=function(e){var t=e[_0xa6d8[282]](),n=this[_0xa6d8[567]]();O[_0xa6d8[568]](t,i,n)}},amaDataStoreBase[_0xa6d8[573]][_0xa6d8[567]]=function(){return this[_0xa6d8[572]]},amaNetworkDataStore=function(){function i(e,t,n){n[_0xa6d8[54]](e,t)}this[_0xa6d8[281]]=function(e){var t=e[_0xa6d8[282]](),n=this[_0xa6d8[567]]();O[_0xa6d8[568]](t,i,n)}},amaStateMachineDataStore=function(){var i=!1;function r(e,t,n){switch(e){default:n[_0xa6d8[54]](e,t);break;case _0xa6d8[435]:_0xa6d8[574]===t&&n[_0xa6d8[54]](_0xa6d8[575],_0xa6d8[161]),n[_0xa6d8[54]](e,t);break;case _0xa6d8[429]:n[_0xa6d8[54]](e,t),500<parseInt(t)&&!i?(n[_0xa6d8[54]](_0xa6d8[576],_0xa6d8[161]),i=!0):i&&n[_0xa6d8[427]](_0xa6d8[576]);break;case _0xa6d8[577]:}}this[_0xa6d8[281]]=function(e){var t=e[_0xa6d8[282]](),n=this[_0xa6d8[567]]();O[_0xa6d8[568]](t,r,n)}},amaViewerDataStore=function(){function i(e,t,n){n[_0xa6d8[54]](e,t)}this[_0xa6d8[281]]=function(e){var t=e[_0xa6d8[282]](),n=this[_0xa6d8[567]]();O[_0xa6d8[568]](t,i,n)}},amaVisitDataStore=function(){var g=!1,v=0,_=0,y=0,x=0,b=0,T=0,S=0,E=0,w={},t=_0xa6d8[14],n=0,i={},M=0,A=0,C=0;function r(e,t,n){switch(e){default:n[e]=t;break;case _0xa6d8[435]:_0xa6d8[574]===t&&(n[_0xa6d8[575]]=_0xa6d8[161]),n[e]=t;break;case _0xa6d8[582]:v+=parseInt(t),n[e]=t,n[_0xa6d8[581]]=v.toString();break;case _0xa6d8[584]:_+=parseInt(t),n[_0xa6d8[583]]=_.toString();break;case _0xa6d8[428]:y+=parseInt(t),n[_0xa6d8[585]]=y.toString();break;case _0xa6d8[429]:x+=parseInt(t),n[_0xa6d8[586]]=x.toString();break;case _0xa6d8[578]:t===_0xa6d8[521]?(!1,b++,n[_0xa6d8[587]]=b.toString()):t===_0xa6d8[588]?(T++,n[_0xa6d8[589]]=T.toString()):t===_0xa6d8[526]?(E++,n[_0xa6d8[590]]=E.toString()):t===_0xa6d8[591]&&(n[_0xa6d8[592]]=_0xa6d8[161]);break;case _0xa6d8[594]:n[_0xa6d8[593]]=t;break;case _0xa6d8[570]:g?delete n[e]:n[_0xa6d8[570]]=t;break;case _0xa6d8[368]:if(ve[_0xa6d8[67]](t)){for(var i,r,a=t[_0xa6d8[159]](_0xa6d8[252]),s=a[_0xa6d8[44]],o=_0xa6d8[361],l=0;l<s;l++){i=a[l][_0xa6d8[159]](_0xa6d8[165]);var u=parseInt(i[0]),c=parseInt(i[1]),d=Math[_0xa6d8[595]](u/5e5),h=d<8?d:7;ve[_0xa6d8[69]](w[h])?w[d]+=c:w[d]=c}for(e in r=h,w)w[e]>w[r]&&(r=e);o+=r,n[_0xa6d8[596]]=o}break;case _0xa6d8[598]:var f=parseInt(t);ve[_0xa6d8[69]](f)||(M+=f,n[_0xa6d8[597]]=M.toString());break;case _0xa6d8[600]:var p=parseInt(t);ve[_0xa6d8[69]](p)||(A+=p,n[_0xa6d8[599]]=A.toString());break;case _0xa6d8[602]:var m=parseInt(t);ve[_0xa6d8[169]](m)||(C+=m,n[_0xa6d8[601]]=C.toString());break;case _0xa6d8[604]:1===parseInt(t)&&(S++,n[_0xa6d8[603]]=S.toString())}}this[_0xa6d8[162]]=function(e){g=e},this[_0xa6d8[569]]=function(){return g},this[_0xa6d8[281]]=function(e){var t=e[_0xa6d8[282]]();t[_0xa6d8[578]]===_0xa6d8[526]&&t[_0xa6d8[579]]===_0xa6d8[161]&&(n++,i[_0xa6d8[580]]=n.toString()),O[_0xa6d8[568]](t,r,i)},this[_0xa6d8[282]]=function(){return i},this[_0xa6d8[605]]=function(){return t},this[_0xa6d8[606]]=function(e){t=e}},DataStoreFactoryEnum={beaconDataStore:_0xa6d8[607],customDataStore:_0xa6d8[608],networkDataStore:_0xa6d8[609],stateMachineDataStore:_0xa6d8[610],viewerDataStore:_0xa6d8[611],visitDataStore:_0xa6d8[612]};var l,u={getFactory:function(){return l||(l=function(){var e=new amaDataStoreBase,t={};function n(e,t){try{e[_0xa6d8[573]]=Object[_0xa6d8[613]](t)}catch(e){B[_0xa6d8[9]](_0xa6d8[614]+e)}}return t[DataStoreFactoryEnum[_0xa6d8[607]]]=(n(amaBeaconDataStore,e),new amaBeaconDataStore),t[DataStoreFactoryEnum[_0xa6d8[608]]]=(n(amaCustomDataStore,e),new amaCustomDataStore),t[DataStoreFactoryEnum[_0xa6d8[609]]]=(n(amaNetworkDataStore,e),new amaNetworkDataStore),t[DataStoreFactoryEnum[_0xa6d8[610]]]=(n(amaStateMachineDataStore,e),new amaStateMachineDataStore),t[DataStoreFactoryEnum[_0xa6d8[611]]]=(n(amaViewerDataStore,e),new amaViewerDataStore),t[DataStoreFactoryEnum[_0xa6d8[612]]]=(n(amaVisitDataStore,e),new amaVisitDataStore),{getDataStore:function(e){return t[e]}}}()),l}};function y(){var n=null;this[_0xa6d8[622]]=function(e,t){ve[_0xa6d8[67]](e)&e!==_0xa6d8[14]&&(n=new XMLHttpRequest,B[_0xa6d8[3]](e),n[_0xa6d8[132]](_0xa6d8[131],e,!0),n[_0xa6d8[133]]=function(){4===n[_0xa6d8[134]]&&typeof t===_0xa6d8[141]&&(t(n),n=null)},n[_0xa6d8[142]]())},this[_0xa6d8[623]]=function(){ve[_0xa6d8[30]](n)&&n[_0xa6d8[624]]()}}function c(){this[_0xa6d8[641]]=function(){var e=_0xa6d8[14];try{B[_0xa6d8[3]](_0xa6d8[642]);var n=(new Date)[_0xa6d8[168]]();e=_0xa6d8[645][_0xa6d8[627]](/[xy]/g,function(e){var t=(n+16*Math[_0xa6d8[643]]())%16|0;return n=Math[_0xa6d8[595]](n/16),(e==_0xa6d8[644]?t:3&t|8).toString(16)})}catch(e){B[_0xa6d8[9]](_0xa6d8[646]+e)}finally{return B[_0xa6d8[3]](_0xa6d8[647]+e),e}},this[_0xa6d8[648]]=function(e,t,n){var i;if(ve[_0xa6d8[649]](e)&&ve[_0xa6d8[268]](t)&&ve[_0xa6d8[650]](n))for(var r in e)ve[_0xa6d8[30]](t[re])&&(i=ve[_0xa6d8[650]](t[re])?t[re]():t[re],ve[_0xa6d8[30]](i)?n(re,i):B[_0xa6d8[3]](_0xa6d8[651]+re+_0xa6d8[652]))},this[_0xa6d8[568]]=function(e,t,n){var i;if(ve[_0xa6d8[268]](e)&&ve[_0xa6d8[650]](t))for(var r in e)i=ve[_0xa6d8[650]](e[r])?e[r]():e[r],ve[_0xa6d8[30]](i)?t(r,i,n):B[_0xa6d8[3]](_0xa6d8[651]+r+_0xa6d8[652])}}amaDictionary=function(){var i={};return this[_0xa6d8[54]]=function(e,t){i[e]=t},this[_0xa6d8[616]]=function(e){var t;for(t in e)i[t]=e[t]},this[_0xa6d8[16]]=function(){for(re in B[_0xa6d8[3]](_0xa6d8[617]),i)B[_0xa6d8[3]](_0xa6d8[377]+re+_0xa6d8[618]+i[re]);B[_0xa6d8[3]](_0xa6d8[619])},this[_0xa6d8[19]]=function(e){return i[e]},this[_0xa6d8[352]]=function(e){var t;for(t in i)if(t===e)return!0;return!1},this[_0xa6d8[620]]=function(e){var t,n=0;for(t in i)if(t===e)return++n;return-1},this[_0xa6d8[427]]=function(e){return!!this[_0xa6d8[352]](e)&&(delete i[e],!0)},this[_0xa6d8[362]]=function(){var e;for(e in i)delete i[e]},this[_0xa6d8[621]]=function(){var e,t=0;for(e in i)t++;return t},this[_0xa6d8[18]]=function(){return i},this},y[_0xa6d8[622]]=function(e,t){if(ve[_0xa6d8[67]](e)&&e!==_0xa6d8[14]){B[_0xa6d8[3]](e);var n=new XMLHttpRequest;n[_0xa6d8[132]](_0xa6d8[131],e,!0),n[_0xa6d8[133]]=function(){4===n[_0xa6d8[134]]&&typeof t===_0xa6d8[141]&&(t(n),n=null)},n[_0xa6d8[142]]()}},y[_0xa6d8[625]]=function(e){try{ve[_0xa6d8[67]](e)&&(e=(e=encodeURI(e))[_0xa6d8[627]](/#/g,_0xa6d8[626]))}catch(e){B[_0xa6d8[9]](_0xa6d8[628]+e)}finally{return e}},amaURLUtility=function(){},amaURLUtility[_0xa6d8[653]]=function(e){var t=!1;try{new RegExp(_0xa6d8[654],_0xa6d8[655])[_0xa6d8[656]](e)&&(t=!0)}catch(e){B[_0xa6d8[9]](_0xa6d8[657]+e)}return t},amaURLUtility[_0xa6d8[658]]=function(e){var t={};try{var n=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/[_0xa6d8[171]](e);ve[_0xa6d8[659]](n[1])?t[_0xa6d8[313]]=n[1]:t[_0xa6d8[313]]=location[_0xa6d8[313]],t[_0xa6d8[314]]=n[2],t[_0xa6d8[315]]=n[3]?n[3]:_0xa6d8[306],t[_0xa6d8[152]]=n[4];var i=this[_0xa6d8[152]][_0xa6d8[159]](_0xa6d8[231]),r=i[_0xa6d8[44]];t[_0xa6d8[0]]=i[r-1];var a=t[_0xa6d8[0]][_0xa6d8[187]]();-1==a[_0xa6d8[84]](_0xa6d8[309])&&-1==a[_0xa6d8[84]](_0xa6d8[310])&&-1==a[_0xa6d8[84]](_0xa6d8[311])&&-1==a[_0xa6d8[84]](_0xa6d8[312])||3<=r&&(t[_0xa6d8[0]]=i[r-2]+_0xa6d8[231]+i[r-1]),t[_0xa6d8[317]]=n[5]?n[5]:_0xa6d8[14],t[_0xa6d8[660]]=n[6]?n[6]:_0xa6d8[14],t[_0xa6d8[82]]=t[_0xa6d8[314]]+_0xa6d8[165]+t[_0xa6d8[315]]}catch(e){B[_0xa6d8[3]](_0xa6d8[319]+e)}return t};var P={LOCAL_STORAGE:0,SESSION_STORAGE:1};function R(){R[_0xa6d8[661]]=!1}R[_0xa6d8[662]]=function(){var e=_0xa6d8[663];try{localStorage[_0xa6d8[180]](e,e),localStorage[_0xa6d8[664]](e),R[_0xa6d8[661]]=!0}catch(e){R[_0xa6d8[661]]=!1}return R[_0xa6d8[661]]},R[_0xa6d8[183]]=function(e,t){B[_0xa6d8[3]](_0xa6d8[665]);var n=null;if(!R[_0xa6d8[661]])return B[_0xa6d8[3]](_0xa6d8[666]),n;try{if(ve[_0xa6d8[67]](t))switch(e){case P[_0xa6d8[667]]:n=localStorage[_0xa6d8[183]](t);break;case P[_0xa6d8[668]]:n=sessionStorage[_0xa6d8[183]](t)}}catch(e){B[_0xa6d8[9]](_0xa6d8[669]+e)}finally{return B[_0xa6d8[3]](_0xa6d8[670]+n),n=n===_0xa6d8[671]?null:n}},R[_0xa6d8[180]]=function(e,t,n){try{if(B[_0xa6d8[3]](_0xa6d8[672]),!R[_0xa6d8[661]])return void B[_0xa6d8[3]](_0xa6d8[673]);if(ve[_0xa6d8[67]](t)&&ve[_0xa6d8[67]](n))switch(e){case P[_0xa6d8[667]]:localStorage[_0xa6d8[180]](t,n);break;case P[_0xa6d8[668]]:sessionStorage[_0xa6d8[180]](t,n)}}catch(e){B[_0xa6d8[9]](_0xa6d8[674]+e)}finally{B[_0xa6d8[3]](_0xa6d8[675])}},R[_0xa6d8[664]]=function(e,t){try{if(B[_0xa6d8[3]](_0xa6d8[676]),!R[_0xa6d8[661]])return void B[_0xa6d8[3]](_0xa6d8[677]);if(ve[_0xa6d8[67]](t))switch(e){case P[_0xa6d8[667]]:localStorage[_0xa6d8[664]](t);break;case P[_0xa6d8[668]]:sessionStorage[_0xa6d8[664]](t)}}catch(e){B[_0xa6d8[9]](_0xa6d8[678]+e)}finally{B[_0xa6d8[3]](_0xa6d8[679])}},R[_0xa6d8[680]]=function(e){try{if(B[_0xa6d8[3]](_0xa6d8[681]),!R[_0xa6d8[661]])return void B[_0xa6d8[3]](_0xa6d8[682]);switch(e){case P[_0xa6d8[667]]:localStorage[_0xa6d8[680]]();break;case P[_0xa6d8[668]]:sessionStorage[_0xa6d8[680]]()}}catch(e){B[_0xa6d8[9]](_0xa6d8[683]+e)}finally{B[_0xa6d8[3]](_0xa6d8[684])}},R[_0xa6d8[15]]=function(e){if(R[_0xa6d8[661]]){if(e===P[_0xa6d8[667]])for(var t=localStorage[_0xa6d8[44]],n=(new Date)[_0xa6d8[168]](),i=t-1;0<=i;i--){var r=localStorage[_0xa6d8[183]](localStorage[_0xa6d8[111]](i));if(ve[_0xa6d8[67]](r)&&-1!==r[_0xa6d8[84]](_0xa6d8[177])){var a=JSON[_0xa6d8[129]](r);ve[_0xa6d8[30]](a)&&ve[_0xa6d8[30]](a[_0xa6d8[177]])&&(dataExpiryDate=Date[_0xa6d8[129]](a[_0xa6d8[177]]),dataExpiryDate<=n&&localStorage[_0xa6d8[664]](localStorage[_0xa6d8[111]](i)))}}else if(e===P[_0xa6d8[668]])for(i=(t=sessionStorage[_0xa6d8[44]])-1;0<=i;i--){r=sessionStorage[_0xa6d8[183]](sessionStorage[_0xa6d8[111]](i));if(ve[_0xa6d8[67]](r)&&-1!==r[_0xa6d8[84]](_0xa6d8[177])){a=JSON[_0xa6d8[129]](r);ve[_0xa6d8[30]](a)&&ve[_0xa6d8[30]](a[_0xa6d8[177]])&&(dataExpiryDate=Date[_0xa6d8[129]](a[_0xa6d8[177]]),dataExpiryDate<=n&&sessionStorage[_0xa6d8[664]](sessionStorage[_0xa6d8[111]](i)))}}}else B[_0xa6d8[3]](_0xa6d8[685])};var d,h,f,p=_0xa6d8[686],m=_0xa6d8[687]+_0xa6d8[249]+p,g=null,v=null,_=null,x=null,b=null,T=null,S=null,E=null,w=!0,M=null,A=null,D=!1,k=null,I=null,L=null,O=null,N=null,U=null,F=null,B=null,$=null,j=null,V=null,H=null,z=null,G=0,q=null,W=this,Y=null,X=null,K=null,Q=6e5,Z=!1,J=_0xa6d8[14],ee=_0xa6d8[14],te=!0,ne=_0xa6d8[161],ie=_0xa6d8[14],re=e;function ae(e){try{var t=e[_0xa6d8[709]]();switch(B[_0xa6d8[3]](_0xa6d8[710]+t),t){case xe[_0xa6d8[712]]:var n=S[_0xa6d8[18]]();fe(),W[_0xa6d8[693]](n),W[_0xa6d8[711]]();break;case xe[_0xa6d8[715]]:W[_0xa6d8[714]](_0xa6d8[713]);break;default:B[_0xa6d8[3]](_0xa6d8[716])}}catch(e){B[_0xa6d8[9]](_0xa6d8[717]+e)}}function se(){try{if(B[_0xa6d8[3]](_0xa6d8[732]),!1===D){D=!0,ve[_0xa6d8[30]](E)&&B[_0xa6d8[3]](_0xa6d8[733]);var e=E[_0xa6d8[25]]();B[_0xa6d8[3]](_0xa6d8[734]+e[_0xa6d8[48]]),v[_0xa6d8[725]](_0xa6d8[48],e[_0xa6d8[48]]);var t,n=E[_0xa6d8[24]]();for(ve[_0xa6d8[30]](n)&&_[_0xa6d8[248]]({api:_0xa6d8[695],value:n[_0xa6d8[82]]+n[_0xa6d8[152]]}),t=0;t<k[_0xa6d8[44]];t++){d=oe(k[t]),W[_0xa6d8[719]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[607]]));var i=v[_0xa6d8[735]](k[t],E);k[t]===ge[_0xa6d8[736]]&&he(),x[_0xa6d8[737]](v,E);var r=new amaBeacon(i);j[_0xa6d8[738]](r),G++}for(;0<k[_0xa6d8[44]];)k[_0xa6d8[739]]();var a=new _e;ve[_0xa6d8[30]](a)&&(L=a[_0xa6d8[740]](E,I,T[_0xa6d8[284]](),L)),ve[_0xa6d8[30]](h)||ce()}else B[_0xa6d8[3]](_0xa6d8[741])}catch(e){B[_0xa6d8[9]](_0xa6d8[742]+e)}}function oe(e){var t;return _0xa6d8[496]===e?t=_0xa6d8[521]:_0xa6d8[497]===e?t=_0xa6d8[588]:_0xa6d8[320]===e?t=_0xa6d8[743]:_0xa6d8[744]===e?t=_0xa6d8[745]:_0xa6d8[9]===e?t=_0xa6d8[526]:_0xa6d8[281]===e?t=_0xa6d8[591]:_0xa6d8[746]===e?t=_0xa6d8[747]:_0xa6d8[748]===e&&(t=_0xa6d8[749]),t}function le(e){try{if(D)if(W[_0xa6d8[719]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[607]])),0===k[_0xa6d8[44]]){var t=_0xa6d8[14];v[_0xa6d8[701]](),t=v[_0xa6d8[735]](e,E),x[_0xa6d8[737]](v,E),B[_0xa6d8[3]](_0xa6d8[750]+t);var n=new amaBeacon(t);j[_0xa6d8[738]](n),G++}else{var i;for(k[_0xa6d8[118]](e),i=0;i<k[_0xa6d8[44]];i++){var r=_0xa6d8[14];e===ge[_0xa6d8[751]]?r=x[_0xa6d8[735]](E):(r=v[_0xa6d8[735]](e,E),x[_0xa6d8[737]](v,E));n=new amaBeacon(r);j[_0xa6d8[738]](n),G++}for(;0<k[_0xa6d8[44]];)k[_0xa6d8[739]]()}else B[_0xa6d8[3]](_0xa6d8[752]),k[_0xa6d8[118]](e);F=U[_0xa6d8[262]]();var a=v[_0xa6d8[699]]();g&&g[_0xa6d8[537]](a)}catch(e){B[_0xa6d8[9]](_0xa6d8[753]+e)}}function ue(){var e=0;try{ve[_0xa6d8[30]](S)&&ve[_0xa6d8[650]](S[_0xa6d8[19]](_0xa6d8[324]))&&(e=S[_0xa6d8[19]](_0xa6d8[324])())}catch(e){B[_0xa6d8[9]](_0xa6d8[754]+e)}return e}function ce(){if(ve[_0xa6d8[67]](ee)&&0<ee[_0xa6d8[44]]){var e=v[_0xa6d8[697]]()[_0xa6d8[19]](_0xa6d8[773]);if(ve[_0xa6d8[67]](e)){if(0<e[_0xa6d8[44]]&&_0xa6d8[774]===e[_0xa6d8[187]]())return void(h=!0)}else{var t=E[_0xa6d8[28]]();if(ve[_0xa6d8[30]](t)){var n=t[_0xa6d8[773]];if(ve[_0xa6d8[30]](n))for(var i in n){var r=n[i];if(ve[_0xa6d8[30]](r))for(var a=r[_0xa6d8[96]][_0xa6d8[159]](_0xa6d8[252]),s=0;s<a[_0xa6d8[44]];s++)if(-1!==ee[_0xa6d8[84]](a[s]))return _0xa6d8[774]===i[_0xa6d8[187]]()&&(h=!0),void W[_0xa6d8[763]](_0xa6d8[773],i)}}}}h=!1}function de(){try{if(!1===w)return;ve[_0xa6d8[30]](A)&&(B[_0xa6d8[3]](_0xa6d8[780]),clearTimeout(A));var e=g[_0xa6d8[505]]();B[_0xa6d8[3]](_0xa6d8[781]+e);var t={streamHeadPosition:ue()};g[_0xa6d8[527]](e,t);v[_0xa6d8[699]]();g[_0xa6d8[520]](),g[_0xa6d8[280]](V),g[_0xa6d8[280]](H),ve[_0xa6d8[30]](K)&&K[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[609]])),v[_0xa6d8[701]](),d=_0xa6d8[743],$[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[609]])),le(ge.PMetric),h&&$[_0xa6d8[782]]()}catch(e){B[_0xa6d8[9]](_0xa6d8[783]+e)}}function he(){try{var e=E[_0xa6d8[24]]();ve[_0xa6d8[30]](e)&&(B[_0xa6d8[3]](_0xa6d8[788]+e[_0xa6d8[71]]+_0xa6d8[789]+e[_0xa6d8[66]]),B[_0xa6d8[3]](_0xa6d8[790]+1e3*e[_0xa6d8[71]]+_0xa6d8[791]+1e3*e[_0xa6d8[66]])),A=setTimeout(de,1e3*e[_0xa6d8[71]]),M=setInterval(de,1e3*e[_0xa6d8[66]]),Q=e[_0xa6d8[75]]}catch(e){B[_0xa6d8[9]](_0xa6d8[792]+e)}finally{B[_0xa6d8[3]](_0xa6d8[793])}}function fe(){try{if(ve[_0xa6d8[30]](g)&&(g=null),ve[_0xa6d8[30]](S)&&(S=null),ve[_0xa6d8[30]](M)&&clearInterval(M),ve[_0xa6d8[30]](A)&&clearInterval(A),Y[_0xa6d8[834]](xe.Sleep),Y[_0xa6d8[834]](xe.Rebuffer),Y=null,ve[_0xa6d8[30]](v))v[_0xa6d8[697]]()[_0xa6d8[362]]();w=!1,G=0,F=L=I=A=M=A=null,E[_0xa6d8[185]]()}catch(e){B[_0xa6d8[9]](_0xa6d8[835]+e)}}function pe(){try{x[_0xa6d8[838]](),d=_0xa6d8[591],W[_0xa6d8[280]](H),u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[607]])[_0xa6d8[281]](H),le(ge.VMetric),x=N=null}catch(e){B[_0xa6d8[9]](_0xa6d8[839]+e)}}function me(e){try{var t={streamHeadPosition:ue()},n={endReasonCode:e};g[_0xa6d8[509]](stateEnum[_0xa6d8[386]],t,n);v[_0xa6d8[699]]();g[_0xa6d8[520]](),g[_0xa6d8[280]](V),g[_0xa6d8[280]](H),ve[_0xa6d8[30]](K)&&K[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[609]])),v[_0xa6d8[701]](),d=_0xa6d8[745],W[_0xa6d8[280]](H),le(ge.CMetric)}catch(e){B[_0xa6d8[9]](_0xa6d8[840]+e)}}this[_0xa6d8[688]]=function(){return re},this[_0xa6d8[393]]=function(e){try{if(_=new amaDiagnoser(this[_0xa6d8[688]]()),k=new Array,(B=new n)[_0xa6d8[259]](!1),ie=e,R[_0xa6d8[662]]()||B[_0xa6d8[3]](_0xa6d8[689]),ve[_0xa6d8[30]](ie)&&(E=null,(E=new t(ie))[_0xa6d8[129]](se),error=E[_0xa6d8[23]](),error!==_0xa6d8[14]))return w=!1,error;(b=new r)[_0xa6d8[266]](),T=new a,O=new c,ve[_0xa6d8[268]](AMAInstanceManager[_0xa6d8[612]])?H=AMAInstanceManager[_0xa6d8[612]]:(H=u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[612]]),AMAInstanceManager[_0xa6d8[612]]=H),N=H[_0xa6d8[605]](),ve[_0xa6d8[30]](N)&&N!==_0xa6d8[14]||(N=O.UUID(),H[_0xa6d8[606]](N)),x=new amaViewMetrics,$=new amaServerIPManager,j=new amaBeaconManager,x[_0xa6d8[691]](),q=new amaTimeSpan,v=new amaDataStore,B[_0xa6d8[3]](_0xa6d8[692]+N)}catch(e){}},this[_0xa6d8[693]]=function(e){try{_[_0xa6d8[694]]()||(_[_0xa6d8[393]](ie,m),_[_0xa6d8[248]]({api:_0xa6d8[695],value:ie}),_[_0xa6d8[248]]({api:_0xa6d8[696],value:m})),g=new amaStateMachine,S=new amaDictionary,V=u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[610]]),U=new amaTimeSpan,Y=new amaCommonEventDispatcher,pageInfo=new s,pageInfo[_0xa6d8[291]](v[_0xa6d8[697]]());w=!0,te&&this[_0xa6d8[698]](),ve[_0xa6d8[30]](e)&&S[_0xa6d8[616]](e),g[_0xa6d8[393]]();g[_0xa6d8[509]](stateEnum[_0xa6d8[498]],{},{});v[_0xa6d8[699]]();if(z=O.UUID(),B[_0xa6d8[3]](_0xa6d8[700]+z),v[_0xa6d8[701]](),g[_0xa6d8[520]](),ve[_0xa6d8[30]](v)){var t=v[_0xa6d8[697]]();_[_0xa6d8[248]]({api:_0xa6d8[702],value:t[_0xa6d8[18]]()})}if(g[_0xa6d8[280]](V),g[_0xa6d8[280]](H),b[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[607]])),pageInfo[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[607]])),T[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[611]])),ve[_0xa6d8[30]](K)&&K[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[609]])),d=_0xa6d8[521],this[_0xa6d8[280]](H),v[_0xa6d8[701]](),b){var n=b[_0xa6d8[283]]();ve[_0xa6d8[67]](n)&&(-1===(n=n[_0xa6d8[187]]())[_0xa6d8[84]](_0xa6d8[703])?Y[_0xa6d8[704]](xe.Sleep,ae):B[_0xa6d8[3]](_0xa6d8[705]))}return Y[_0xa6d8[704]](xe.Rebuffer,ae),le(ge.IMetric),null}catch(e){B[_0xa6d8[9]](_0xa6d8[706]+e)}},this[_0xa6d8[707]]=function(e){try{ve[_0xa6d8[67]](e)&&0<e[_0xa6d8[44]]&&(m=m+_0xa6d8[165]+e)}catch(e){B[_0xa6d8[9]](_0xa6d8[708]+e)}},this[_0xa6d8[280]]=function(e){try{e[_0xa6d8[281]](this)}catch(e){B[_0xa6d8[9]](_0xa6d8[718]+e)}},this[_0xa6d8[719]]=function(e){try{e[_0xa6d8[281]](W)}catch(e){B[_0xa6d8[9]](_0xa6d8[720]+e)}},this[_0xa6d8[282]]=function(){return{beaconId:E[_0xa6d8[25]]()[_0xa6d8[48]],beaconVersion:E[_0xa6d8[25]]()[_0xa6d8[49]],visitId:N,sessionId:z,attemptId:z,xViewerId:L,sequenceId:G.toString(),eventCode:d,pluginVersion:m,isVisitStart:_0xa6d8[161],logInterval:function(){var e;ve[_0xa6d8[30]](U)&&(e=(U[_0xa6d8[262]]()-F).toString());return e}(),currentClockTime:function(){var e;ve[_0xa6d8[30]](U)&&(e=U[_0xa6d8[260]]().toString());return e}(),currentStreamTime:(1e3*ue()).toString(),streamLength:function(){var e;ve[_0xa6d8[30]](f)&&(e=(1e3*f).toString());return e}(),bytesLoaded:function(){var e=_0xa6d8[14];try{ve[_0xa6d8[30]](S)&&ve[_0xa6d8[650]](S[_0xa6d8[19]](_0xa6d8[755]))&&(e=S[_0xa6d8[19]](_0xa6d8[755])().toString())}catch(e){B[_0xa6d8[9]](_0xa6d8[756]+e)}return e}(),droppedFrames:function(){var e=_0xa6d8[14];try{ve[_0xa6d8[30]](S)&&ve[_0xa6d8[650]](S[_0xa6d8[19]](_0xa6d8[757]))&&(e=S[_0xa6d8[19]](_0xa6d8[757])().toString())}catch(e){B[_0xa6d8[9]](_0xa6d8[758]+e)}return e}(),isLiveStream:function(){var e=_0xa6d8[14];try{ve[_0xa6d8[30]](S)&&ve[_0xa6d8[30]](S[_0xa6d8[19]](_0xa6d8[759]))&&(e=S[_0xa6d8[19]](_0xa6d8[759])().toString())}catch(e){B[_0xa6d8[9]](_0xa6d8[760]+e)}return e}(),visitDuration:function(){var e=_0xa6d8[14];try{ve[_0xa6d8[30]](q)&&(e=q[_0xa6d8[260]]().toString())}catch(e){B[_0xa6d8[9]](_0xa6d8[761]+e)}return e}()}},this[_0xa6d8[762]]=function(){this[_0xa6d8[282]]=function(){return{os:os,device:AppleTV,fullOs:_0xa6d8[722]+b[_0xa6d8[723]](),playerType:AppleTV,loginterval:U[_0xa6d8[262]]()-F,currentClockTime:U[_0xa6d8[260]]().toString(),currentStreamTime:(1e3*streamHead).toString(),streamLength:(1e3*streamLen).toString(),bytesLoaded:S[_0xa6d8[19]](_0xa6d8[755])(),droppedFrames:S[_0xa6d8[19]](_0xa6d8[757])(),isLiveStream:S[_0xa6d8[19]](_0xa6d8[759])()}}},this[_0xa6d8[763]]=function(e,t){try{var n={methodName:_0xa6d8[763]};n[name]=t,_[_0xa6d8[248]]({api:_0xa6d8[764],value:n}),ve[_0xa6d8[30]](e)&&ve[_0xa6d8[30]](t)&&v[_0xa6d8[571]](e,t)}catch(e){B[_0xa6d8[9]](_0xa6d8[765]+e)}},this[_0xa6d8[289]]=function(e){try{ve[_0xa6d8[67]](e)&&e!==_0xa6d8[14]&&T[_0xa6d8[289]](e)}catch(e){B[_0xa6d8[9]](_0xa6d8[766]+e)}},this[_0xa6d8[767]]=function(e){try{ve[_0xa6d8[67]](e)&&(I=e,v&&v[_0xa6d8[725]](_0xa6d8[768],I))}catch(e){B[_0xa6d8[9]](_0xa6d8[769]+e)}},this[_0xa6d8[770]]=function(e){J=e,B[_0xa6d8[3]](e)},this[_0xa6d8[771]]=function(e,t){ve[_0xa6d8[67]](e)&&-1===e[_0xa6d8[84]](_0xa6d8[545])&&0<e[_0xa6d8[44]]?(ee=e,Z=t,D&&ce()):B[_0xa6d8[3]](_0xa6d8[772]+e)},this[_0xa6d8[775]]=function(e){ve[_0xa6d8[169]](e)?f=e:B[_0xa6d8[3]](_0xa6d8[776]+e)},this[_0xa6d8[711]]=function(){try{if(!1===w)return;var e={};ve[_0xa6d8[67]](ee)&&_0xa6d8[14]!==ee&&($[_0xa6d8[777]](ee),e[_0xa6d8[544]]=ee),e[_0xa6d8[310]]=J,e[_0xa6d8[546]]=Z,e[_0xa6d8[543]]=ne;g[_0xa6d8[509]](stateEnum[_0xa6d8[499]],{},e),this[_0xa6d8[778]]()}catch(e){B[_0xa6d8[9]](_0xa6d8[779]+e)}},this[_0xa6d8[778]]=function(){try{if(!1===w)return;if(stateEnum[_0xa6d8[499]]===g[_0xa6d8[505]]()){B[_0xa6d8[3]](_0xa6d8[784]);v[_0xa6d8[699]]();g[_0xa6d8[520]](),g[_0xa6d8[280]](V),g[_0xa6d8[280]](H),ve[_0xa6d8[30]](K)&&K[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[609]])),v[_0xa6d8[701]](),d=_0xa6d8[588],this[_0xa6d8[280]](H),le(ge.SMetric),D?he():B[_0xa6d8[3]](_0xa6d8[785])}B[_0xa6d8[3]](_0xa6d8[786]);var e={streamHeadPosition:ue()};g[_0xa6d8[509]](stateEnum[_0xa6d8[500]],{},e)}catch(e){B[_0xa6d8[9]](_0xa6d8[787]+e)}},this[_0xa6d8[794]]=function(){try{if(!1===w)return;var e=ue(),t={streamHeadPosition:e},n={streamHeadPosition:e};g[_0xa6d8[509]](stateEnum[_0xa6d8[502]],t,n)}catch(e){B[_0xa6d8[9]](_0xa6d8[795]+e)}},this[_0xa6d8[796]]=function(){try{if(!1===w)return;var e=ue(),t={streamHeadPosition:e},n={streamHeadPosition:e};g[_0xa6d8[509]](stateEnum[_0xa6d8[503]],t,n)}catch(e){B[_0xa6d8[9]](_0xa6d8[797]+e)}},this[_0xa6d8[798]]=function(){try{if(!1===w)return;var e={streamHeadPosition:ue()},t={rebufferStart:U[_0xa6d8[260]](),currentLogTime:1e3*F};g[_0xa6d8[509]](stateEnum[_0xa6d8[501]],e,t),Y[_0xa6d8[799]](Q)}catch(e){B[_0xa6d8[9]](_0xa6d8[800]+e)}},this[_0xa6d8[801]]=function(){try{if(!1===w)return;var e={rebufferEnd:U[_0xa6d8[260]]()},t={streamHeadPosition:ue()};g[_0xa6d8[509]](stateEnum[_0xa6d8[500]],e,t),Y[_0xa6d8[802]]()}catch(e){B[_0xa6d8[9]](_0xa6d8[803]+e)}},this[_0xa6d8[804]]=function(e){try{if(!1===w)return;if(g[_0xa6d8[505]]()===stateEnum[_0xa6d8[500]]){var t={bitrate:e,streamHeadPosition:ue()};g[_0xa6d8[527]](stateEnum[_0xa6d8[500]],t)}}catch(e){B[_0xa6d8[9]](_0xa6d8[805]+e)}},this[_0xa6d8[806]]=function(e){try{if(!1===w)return;e!==_0xa6d8[807]&&(ne=_0xa6d8[161]),me(e),fe()}catch(e){B[_0xa6d8[9]](_0xa6d8[808]+e)}},this[_0xa6d8[714]]=function(e){try{if(!1===w)return;var t={streamHeadPosition:ue()},n={errorCode:e};g[_0xa6d8[509]](stateEnum[_0xa6d8[386]],t,n);v[_0xa6d8[699]]();g[_0xa6d8[520]](),g[_0xa6d8[280]](V),g[_0xa6d8[280]](H),ve[_0xa6d8[30]](K)&&K[_0xa6d8[280]](u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[609]])),v[_0xa6d8[701]](),d=_0xa6d8[526],this[_0xa6d8[280]](H),le(ge.EMetric),fe()}catch(e){B[_0xa6d8[9]](_0xa6d8[809]+e)}},this[_0xa6d8[810]]=function(){try{$[_0xa6d8[811]](!1)}catch(e){B[_0xa6d8[9]](_0xa6d8[812]+e)}},this[_0xa6d8[813]]=function(){try{$[_0xa6d8[811]](!0)}catch(e){B[_0xa6d8[9]](_0xa6d8[814]+e)}},this[_0xa6d8[815]]=function(){if(ve[_0xa6d8[30]](S)){var e=S[_0xa6d8[18]]();this[_0xa6d8[806]](_0xa6d8[816]),this[_0xa6d8[693]](e),this[_0xa6d8[711]]()}else B[_0xa6d8[9]](_0xa6d8[817])},this[_0xa6d8[818]]=function(e){if(ve[_0xa6d8[30]](S)){ne=_0xa6d8[361];var t=S[_0xa6d8[18]]();for(var n in this[_0xa6d8[806]](_0xa6d8[807]),e)this[_0xa6d8[763]](n,e[n]);this[_0xa6d8[693]](t),this[_0xa6d8[711]]()}else B[_0xa6d8[9]](_0xa6d8[817])},this[_0xa6d8[819]]=function(e){U[_0xa6d8[260]]();var t={currentLogTime:1e3*F};e[_0xa6d8[483]]=ue(),g[_0xa6d8[509]](stateEnum[_0xa6d8[504]],t,e)},this[_0xa6d8[820]]=function(e){var t=g[_0xa6d8[508]]();if(_0xa6d8[463]===t[_0xa6d8[321]]()){var n={event:_0xa6d8[467],updateParams:e};t[_0xa6d8[326]](n)}else B[_0xa6d8[3]](_0xa6d8[821])},this[_0xa6d8[822]]=function(){var e=g[_0xa6d8[508]]();if(_0xa6d8[463]===e[_0xa6d8[321]]()){var t={event:_0xa6d8[468]};e[_0xa6d8[326]](t)}else B[_0xa6d8[3]](_0xa6d8[823])},this[_0xa6d8[824]]=function(){var e=g[_0xa6d8[508]]();if(_0xa6d8[463]===e[_0xa6d8[321]]()){var t={event:_0xa6d8[469]};e[_0xa6d8[326]](t)}else B[_0xa6d8[3]](_0xa6d8[825])},this[_0xa6d8[826]]=function(){var e=g[_0xa6d8[508]]();if(_0xa6d8[463]===e[_0xa6d8[321]]()){var t={event:_0xa6d8[470]};e[_0xa6d8[326]](t)}else B[_0xa6d8[3]](_0xa6d8[827])},this[_0xa6d8[828]]=function(){var e=g[_0xa6d8[508]]();if(_0xa6d8[463]===e[_0xa6d8[321]]()){var t={event:_0xa6d8[473]};e[_0xa6d8[326]](t)}else B[_0xa6d8[3]](_0xa6d8[829])},this[_0xa6d8[830]]=function(){var e=g[_0xa6d8[508]]();if(_0xa6d8[463]===e[_0xa6d8[321]]()){var t={event:_0xa6d8[475]};e[_0xa6d8[326]](t)}else B[_0xa6d8[3]](_0xa6d8[831])},this[_0xa6d8[832]]=function(){var e=g[_0xa6d8[508]]();if(_0xa6d8[463]===e[_0xa6d8[321]]()){var t={event:_0xa6d8[476]};e[_0xa6d8[326]](t)}else B[_0xa6d8[3]](_0xa6d8[833])},this[_0xa6d8[836]]=function(){try{pe()}catch(e){B[_0xa6d8[9]](_0xa6d8[837]+e)}},this[_0xa6d8[841]]=function(){return p},this[_0xa6d8[842]]=function(){try{if(!1===w)return;me(_0xa6d8[843]),pe();var e={methodName:_0xa6d8[842]};_[_0xa6d8[248]]({api:_0xa6d8[764],value:e}),fe(),ve[_0xa6d8[30]](v)&&(v=null),ve[_0xa6d8[30]](b)&&(b=null),ve[_0xa6d8[30]](T)&&(T=null),ve[_0xa6d8[30]](E)&&(E=null),D=!1,ve[_0xa6d8[30]](B)&&(B=null)}catch(e){B[_0xa6d8[9]](_0xa6d8[844]+e)}},this[_0xa6d8[845]]=function(e){ve[_0xa6d8[30]](B)&&B[_0xa6d8[259]](e)},this[_0xa6d8[698]]=function(){try{te||(te=!0),ve[_0xa6d8[30]](X)||(X=new amaEventDispatcher,K=new amaEventHandler,X[_0xa6d8[704]](ye.Location,K[_0xa6d8[847]][_0xa6d8[846]](K)))}catch(e){B[_0xa6d8[9]](_0xa6d8[848]+e)}},this[_0xa6d8[849]]=function(){try{te=!1,X&&(X[_0xa6d8[834]](ye.Location),K=X=null)}catch(e){B[_0xa6d8[9]](_0xa6d8[850]+e)}},this[_0xa6d8[851]]=function(e,t){B[_0xa6d8[7]](e,t)};var ge={IMetric:_0xa6d8[496],SMetric:_0xa6d8[497],PMetric:_0xa6d8[320],CMetric:_0xa6d8[744],EMetric:_0xa6d8[9],VMetric:_0xa6d8[281],HMetric:_0xa6d8[746],FMetric:_0xa6d8[748],UDMetric:_0xa6d8[61]};function ve(){}function _e(){var e,t,n,c,i,r,u,a,s,o,g,v,l,d=d||function(o,e){var t={},n=t[_0xa6d8[882]]={},i=n[_0xa6d8[883]]=function(){function n(){}return{extend:function(e){n[_0xa6d8[573]]=this;var t=new n;return e&&t[_0xa6d8[884]](e),t[_0xa6d8[885]]=this,t},create:function(){var e=this[_0xa6d8[886]]();return e[_0xa6d8[496]][_0xa6d8[887]](e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e[_0xa6d8[888]](t)&&(this[t]=e[t]);e[_0xa6d8[888]](_0xa6d8[889])&&(this[_0xa6d8[889]]=e[_0xa6d8[889]])},clone:function(){return this[_0xa6d8[885]][_0xa6d8[886]](this)}}}(),l=n[_0xa6d8[890]]=i[_0xa6d8[886]]({init:function(e,t){e=this[_0xa6d8[891]]=e||[],this[_0xa6d8[892]]=null!=t?t:4*e[_0xa6d8[44]]},toString:function(e){return(e||a)[_0xa6d8[179]](this)},concat:function(e){var t=this[_0xa6d8[891]],n=e[_0xa6d8[891]],i=this[_0xa6d8[892]];e=e[_0xa6d8[892]];if(this[_0xa6d8[893]](),i%4)for(var r=0;r<e;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n[_0xa6d8[44]])for(r=0;r<e;r+=4)t[i+r>>>2]=n[r>>>2];else t[_0xa6d8[118]][_0xa6d8[887]](t,n);return this[_0xa6d8[892]]+=e,this},clamp:function(){var e=this[_0xa6d8[891]],t=this[_0xa6d8[892]];e[t>>>2]&=4294967295<<32-t%4*8,e[_0xa6d8[44]]=o[_0xa6d8[894]](t/4)},clone:function(){var e=i[_0xa6d8[896]][_0xa6d8[895]](this);return e[_0xa6d8[891]]=this[_0xa6d8[891]][_0xa6d8[897]](0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t[_0xa6d8[118]](4294967296*o[_0xa6d8[643]]()|0);return l[_0xa6d8[613]](t,e)}}),r=t[_0xa6d8[898]]={},a=r[_0xa6d8[899]]={stringify:function(e){for(var t=e[_0xa6d8[891]],n=(e=e[_0xa6d8[892]],[]),i=0;i<e;i++){var r=t[i>>>2]>>>24-i%4*8&255;n[_0xa6d8[118]]((r>>>4).toString(16)),n[_0xa6d8[118]]((15&r).toString(16))}return n[_0xa6d8[900]](_0xa6d8[14])},parse:function(e){for(var t=e[_0xa6d8[44]],n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e[_0xa6d8[230]](i,2),16)<<24-i%8*4;return l[_0xa6d8[613]](n,t/2)}},s=r[_0xa6d8[901]]={stringify:function(e){for(var t=e[_0xa6d8[891]],n=(e=e[_0xa6d8[892]],[]),i=0;i<e;i++)n[_0xa6d8[118]](String[_0xa6d8[902]](t[i>>>2]>>>24-i%4*8&255));return n[_0xa6d8[900]](_0xa6d8[14])},parse:function(e){for(var t=e[_0xa6d8[44]],n=[],i=0;i<t;i++)n[i>>>2]|=(255&e[_0xa6d8[903]](i))<<24-i%4*8;return l[_0xa6d8[613]](n,t)}},u=r[_0xa6d8[904]]={stringify:function(e){try{return decodeURIComponent(escape(s[_0xa6d8[179]](e)))}catch(e){throw Error(_0xa6d8[905])}},parse:function(e){return s[_0xa6d8[129]](unescape(encodeURIComponent(e)))}},c=n[_0xa6d8[906]]=i[_0xa6d8[886]]({reset:function(){this[_0xa6d8[907]]=l[_0xa6d8[613]](),this[_0xa6d8[908]]=0},_append:function(e){_0xa6d8[880]==typeof e&&(e=u[_0xa6d8[129]](e)),this[_0xa6d8[907]][_0xa6d8[166]](e),this[_0xa6d8[908]]+=e[_0xa6d8[892]]},_process:function(e){var t=this[_0xa6d8[907]],n=t[_0xa6d8[891]],i=t[_0xa6d8[892]],r=this[_0xa6d8[909]],a=i/(4*r);e=(a=e?o[_0xa6d8[894]](a):o[_0xa6d8[911]]((0|a)-this[_0xa6d8[910]],0))*r,i=o[_0xa6d8[912]](4*e,i);if(e){for(var s=0;s<e;s+=r)this._doProcessBlock(n,s);s=n[_0xa6d8[913]](0,e),t[_0xa6d8[892]]-=i}return l[_0xa6d8[613]](s,i)},clone:function(){var e=i[_0xa6d8[896]][_0xa6d8[895]](this);return e[_0xa6d8[907]]=this[_0xa6d8[907]][_0xa6d8[896]](),e},_minBufferSize:0});n[_0xa6d8[914]]=c[_0xa6d8[886]]({init:function(){this[_0xa6d8[915]]()},reset:function(){c[_0xa6d8[915]][_0xa6d8[895]](this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this[_0xa6d8[916]]},clone:function(){var e=c[_0xa6d8[896]][_0xa6d8[895]](this);return e[_0xa6d8[916]]=this[_0xa6d8[916]][_0xa6d8[896]](),e},blockSize:16,_createHelper:function(n){return function(e,t){return n[_0xa6d8[613]](t)[_0xa6d8[917]](e)}},_createHmacHelper:function(n){return function(e,t){return d[_0xa6d8[918]][_0xa6d8[613]](n,t)[_0xa6d8[917]](e)}}});var d=t[_0xa6d8[919]]={};return t}(Math);t=(n=(e=d)[_0xa6d8[882]])[_0xa6d8[890]],n=n[_0xa6d8[914]],c=[],i=e[_0xa6d8[919]][_0xa6d8[920]]=n[_0xa6d8[886]]({_doReset:function(){this[_0xa6d8[916]]=t[_0xa6d8[613]]([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this[_0xa6d8[916]][_0xa6d8[891]],i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}u=(i<<5|i>>>27)+o+c[l],u=l<20?u+(1518500249+(r&a|~r&s)):l<40?u+(1859775393+(r^a^s)):l<60?u+((r&a|r&s|a&s)-1894007588):u+((r^a^s)-899497514),o=s,s=a,a=r<<30|r>>>2,r=i,i=u}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+o|0},_doFinalize:function(){var e=this[_0xa6d8[907]],t=e[_0xa6d8[891]],n=8*this[_0xa6d8[908]],i=8*e[_0xa6d8[892]];t[i>>>5]|=128<<24-i%32,t[15+(i+64>>>9<<4)]=n,e[_0xa6d8[892]]=4*t[_0xa6d8[44]],this._process()}}),e[_0xa6d8[920]]=n._createHelper(i),e[_0xa6d8[921]]=n._createHmacHelper(i),u=(r=d)[_0xa6d8[898]][_0xa6d8[904]],r[_0xa6d8[919]][_0xa6d8[918]]=r[_0xa6d8[882]][_0xa6d8[883]][_0xa6d8[886]]({init:function(e,t){e=this[_0xa6d8[922]]=e[_0xa6d8[613]](),_0xa6d8[880]==typeof t&&(t=u[_0xa6d8[129]](t));var n=e[_0xa6d8[909]],i=4*n;t[_0xa6d8[892]]>i&&(t=e[_0xa6d8[917]](t));for(var r=this[_0xa6d8[923]]=t[_0xa6d8[896]](),a=this[_0xa6d8[924]]=t[_0xa6d8[896]](),s=r[_0xa6d8[891]],o=a[_0xa6d8[891]],l=0;l<n;l++)s[l]^=1549556828,o[l]^=909522486;r[_0xa6d8[892]]=a[_0xa6d8[892]]=i,this[_0xa6d8[915]]()},reset:function(){var e=this[_0xa6d8[922]];e[_0xa6d8[915]](),e[_0xa6d8[925]](this._iKey)},update:function(e){return this[_0xa6d8[922]][_0xa6d8[925]](e),this},finalize:function(e){var t=this[_0xa6d8[922]];return e=t[_0xa6d8[917]](e),t[_0xa6d8[915]](),t[_0xa6d8[917]](this[_0xa6d8[923]][_0xa6d8[896]]()[_0xa6d8[166]](e))}}),o=(a=(s=d)[_0xa6d8[882]])[_0xa6d8[883]],g=a[_0xa6d8[890]],v=(a=s[_0xa6d8[919]])[_0xa6d8[918]],l=a[_0xa6d8[926]]=o[_0xa6d8[886]]({cfg:o[_0xa6d8[886]]({keySize:4,hasher:a[_0xa6d8[920]],iterations:1}),init:function(e){this[_0xa6d8[927]]=this[_0xa6d8[927]][_0xa6d8[886]](e)},compute:function(e,t){var n=this[_0xa6d8[927]],i=v[_0xa6d8[613]](n[_0xa6d8[928]],e),r=g[_0xa6d8[613]](),a=g[_0xa6d8[613]]([1]),s=r[_0xa6d8[891]],o=a[_0xa6d8[891]],l=n[_0xa6d8[929]];for(n=n[_0xa6d8[95]];s[_0xa6d8[44]]<l;){var u=i[_0xa6d8[925]](t)[_0xa6d8[917]](a);i[_0xa6d8[915]]();for(var c=u[_0xa6d8[891]],d=c[_0xa6d8[44]],h=u,f=1;f<n;f++){h=i[_0xa6d8[917]](h),i[_0xa6d8[915]]();for(var p=h[_0xa6d8[891]],m=0;m<d;m++)c[m]^=p[m]}r[_0xa6d8[166]](u),o[0]++}return r[_0xa6d8[892]]=4*l,r}}),s[_0xa6d8[926]]=function(e,t,n){return l[_0xa6d8[613]](n)[_0xa6d8[930]](e,t)},this[_0xa6d8[740]]=function(e,t,n,i){var r=null;if(ve[_0xa6d8[67]](t)?r=t:ve[_0xa6d8[67]](n)&&(r=n),ve[_0xa6d8[30]](i))return i;if(ve[_0xa6d8[67]](r)&&r!==_0xa6d8[249]){var a=_0xa6d8[14],s=50,o=32;if(r=encodeURIComponent(r),ve[_0xa6d8[30]](e)){var l=e[_0xa6d8[26]]();ve[_0xa6d8[30]](l)&&(ve[_0xa6d8[67]](l[_0xa6d8[96]])&&(a=l[_0xa6d8[96]]),ve[_0xa6d8[67]](l[_0xa6d8[95]])&&(s=l[_0xa6d8[95]]),ve[_0xa6d8[67]](l[_0xa6d8[93]])&&(o=l[_0xa6d8[93]]))}try{re=d.PBKDF2(r,a,{keySize:o/8,iterations:s})}catch(e){B[_0xa6d8[9]](_0xa6d8[931]+e)}return i=re.toString()}}}amaDataStore=function(){var r=0,a=new amaDictionary,s=new amaDictionary;function o(e,t){var n=_0xa6d8[14];if(ve[_0xa6d8[67]](e)&&ve[_0xa6d8[268]](t)){a[_0xa6d8[54]](_0xa6d8[579],r.toString());var i=u[_0xa6d8[690]]()[_0xa6d8[567]](DataStoreFactoryEnum[_0xa6d8[607]]);n=t[_0xa6d8[146]](e,i[_0xa6d8[567]](),s),r++}return n}this[_0xa6d8[852]]=function(e){ve[_0xa6d8[30]](e)&&ve[_0xa6d8[147]](e,Object)},this[_0xa6d8[853]]=function(e){var t=_0xa6d8[14];return ve[_0xa6d8[268]](e)&&(a[_0xa6d8[54]](_0xa6d8[578],_0xa6d8[521]),t=o(ge.IMetric,e),B[_0xa6d8[3]](_0xa6d8[854]+t),t=y[_0xa6d8[625]](t),B[_0xa6d8[3]](_0xa6d8[855]+t)),t},this[_0xa6d8[856]]=function(e){var t=_0xa6d8[14];return ve[_0xa6d8[268]](e)&&(a[_0xa6d8[54]](_0xa6d8[578],_0xa6d8[588]),t=o(ge[_0xa6d8[736]]+_0xa6d8[158]+ge[_0xa6d8[857]],e),B[_0xa6d8[3]](_0xa6d8[854]+t),t=y[_0xa6d8[625]](t),B[_0xa6d8[3]](_0xa6d8[855]+t)),t},this[_0xa6d8[858]]=function(e){var t=_0xa6d8[14];return ve[_0xa6d8[268]](e)&&(a[_0xa6d8[54]](_0xa6d8[578],_0xa6d8[743]),t=o(ge.PMetric,e),B[_0xa6d8[3]](_0xa6d8[854]+t),t=y[_0xa6d8[625]](t),B[_0xa6d8[3]](_0xa6d8[855]+t)),t},this[_0xa6d8[859]]=function(e){var t=_0xa6d8[14];return ve[_0xa6d8[268]](e)&&(a[_0xa6d8[54]](_0xa6d8[578],_0xa6d8[745]),t+=o(ge[_0xa6d8[860]]+_0xa6d8[158]+ge[_0xa6d8[861]],e),B[_0xa6d8[3]](_0xa6d8[854]+t),t=y[_0xa6d8[625]](t),B[_0xa6d8[3]](_0xa6d8[855]+t)),t},this[_0xa6d8[862]]=function(e){var t=_0xa6d8[14];return ve[_0xa6d8[268]](e)&&(a[_0xa6d8[54]](_0xa6d8[578],_0xa6d8[526]),t=o(ge.EMetric,e),B[_0xa6d8[3]](_0xa6d8[854]+t),t=y[_0xa6d8[625]](t),B[_0xa6d8[3]](_0xa6d8[855]+t)),t},this[_0xa6d8[863]]=function(e){var t=_0xa6d8[14];return ve[_0xa6d8[268]](e)&&(a[_0xa6d8[54]](_0xa6d8[578],_0xa6d8[591]),t=o(ge.VMetric,e),B[_0xa6d8[3]](_0xa6d8[854]+t),t=y[_0xa6d8[625]](t),B[_0xa6d8[3]](_0xa6d8[855]+t)),t},this[_0xa6d8[735]]=function(e,t){B[_0xa6d8[3]](_0xa6d8[864]+e),this[_0xa6d8[701]]();var n=_0xa6d8[14];if(ve[_0xa6d8[268]](t)){var i=function(e){var t=_0xa6d8[14];e===ge[_0xa6d8[870]]?t=_0xa6d8[521]:e===ge[_0xa6d8[736]]?t=_0xa6d8[588]:e===ge[_0xa6d8[861]]?t=_0xa6d8[743]:e===ge[_0xa6d8[860]]?t=_0xa6d8[745]:e===ge[_0xa6d8[865]]?t=_0xa6d8[526]:e===ge[_0xa6d8[751]]?t=_0xa6d8[591]:e===ge[_0xa6d8[871]]?t=_0xa6d8[747]:e===ge[_0xa6d8[872]]?t=_0xa6d8[749]:B[_0xa6d8[9]](_0xa6d8[873]+e);return t}(e);0!==i[_0xa6d8[44]]&&(a[_0xa6d8[54]](_0xa6d8[578],i),ge[_0xa6d8[865]]!==e&&ge[_0xa6d8[860]]!==e||(e=e+_0xa6d8[158]+ge[_0xa6d8[861]]),n=o(e,t),B[_0xa6d8[3]](_0xa6d8[854]+n),n=y[_0xa6d8[625]](n),B[_0xa6d8[3]](_0xa6d8[855]+n))}return n},this[_0xa6d8[699]]=function(){return a},this[_0xa6d8[697]]=function(){return s},this[_0xa6d8[571]]=function(e,t){ve[_0xa6d8[268]](s)&&ve[_0xa6d8[67]](e)&&ve[_0xa6d8[67]](t)&&(s[_0xa6d8[54]](e,t),_0xa6d8[866]!==e||s[_0xa6d8[352]](_0xa6d8[867])?_0xa6d8[867]!==e||s[_0xa6d8[352]](_0xa6d8[866])||s[_0xa6d8[54]](_0xa6d8[866],t):s[_0xa6d8[54]](_0xa6d8[867],t))},this[_0xa6d8[725]]=function(e,t){ve[_0xa6d8[268]](a)&&ve[_0xa6d8[67]](e)&&ve[_0xa6d8[67]](t)&&a[_0xa6d8[54]](e,t)},this[_0xa6d8[868]]=function(){s[_0xa6d8[362]]()},this[_0xa6d8[869]]=function(){a[_0xa6d8[362]](),s[_0xa6d8[362]](),r=0},this[_0xa6d8[701]]=function(){B[_0xa6d8[3]](_0xa6d8[874]);var e=a[_0xa6d8[18]]();for(var t in e)B[_0xa6d8[3]](t+_0xa6d8[165]+e[t]);B[_0xa6d8[3]](_0xa6d8[875]);var n=s[_0xa6d8[18]]();for(var t in n)B[_0xa6d8[3]](t+_0xa6d8[165]+n[t])}},ve[_0xa6d8[485]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&ve[_0xa6d8[169]](e)&&e!=e&&(t=!0),t},ve[_0xa6d8[876]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&ve[_0xa6d8[169]](e)&&e===e/0&&(t=!0),t},ve[_0xa6d8[169]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&(typeof e==_0xa6d8[877]||typeof e==_0xa6d8[878]&&e[_0xa6d8[512]]===Number)&&(t=!0),t},ve[_0xa6d8[69]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&(!ve[_0xa6d8[169]](e)||ve[_0xa6d8[876]](e)||ve[_0xa6d8[485]](e)||e%1==0&&(t=!0)),t},ve[_0xa6d8[879]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&(!ve[_0xa6d8[169]](e)||ve[_0xa6d8[876]](e)||ve[_0xa6d8[485]](e)||e%1!=0&&(t=!0)),t},ve[_0xa6d8[67]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&(typeof e==_0xa6d8[880]||typeof e==_0xa6d8[878]&&e[_0xa6d8[512]]===String)&&(t=!0),t},ve[_0xa6d8[649]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&e[_0xa6d8[512]]===Array&&(t=!0),t},ve[_0xa6d8[268]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&typeof e===_0xa6d8[878]&&(t=!0),t},ve[_0xa6d8[147]]=function(e,t){var n=!1;return typeof e!==_0xa6d8[671]&&null!==e&&typeof t!==_0xa6d8[671]&&null!==t&&(e instanceof t||e[_0xa6d8[512]][_0xa6d8[0]]===t[_0xa6d8[0]])&&(n=!0),n},ve[_0xa6d8[881]]=function(e){var t=_0xa6d8[14];return typeof e!==_0xa6d8[671]&&null!==e&&(t=e[_0xa6d8[512]][_0xa6d8[0]]),t},ve[_0xa6d8[30]]=function(e){var t=!1;return typeof e!==_0xa6d8[671]&&null!==e&&(t=!0),t},ve[_0xa6d8[650]]=function(e){return!!ve[_0xa6d8[30]](e)&&typeof e===_0xa6d8[141]},amaEvent=function(e,t){var n=_0xa6d8[14],i=null;function r(e,t){ve[_0xa6d8[67]](e)&&(n=e),ve[_0xa6d8[268]](t)&&(i=t)}r(e,t),this[_0xa6d8[932]]=function(e,t){r(e,t)},this[_0xa6d8[709]]=function(){return n},this[_0xa6d8[933]]=function(){return i}},amaServerIPManager=function(){var t=_0xa6d8[14],n=_0xa6d8[14],i=_0xa6d8[14],r=!0,a=_0xa6d8[934];function e(e){if(ve[_0xa6d8[30]](e))if(200===e[_0xa6d8[135]]||0===e[_0xa6d8[135]]){var t=e[_0xa6d8[942]];if(ve[_0xa6d8[67]](t)&&t[_0xa6d8[68]]()){var n=t[_0xa6d8[122]](/<serverip>(.*?)<\/serverip>/);ve[_0xa6d8[30]](n)&&ve[_0xa6d8[67]](n[1])&&(i=n[1])}}else 400<=e[_0xa6d8[135]]&&(r=!1,B[_0xa6d8[3]](_0xa6d8[943]+e[_0xa6d8[135]]))}this[_0xa6d8[777]]=function(e){ve[_0xa6d8[67]](e)&&0<e[_0xa6d8[44]]&&-1===e[_0xa6d8[84]](_0xa6d8[545])?(t=e,function(){if(ve[_0xa6d8[67]](t)&&0<t[_0xa6d8[44]]){var e=t[_0xa6d8[122]](/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/);ve[_0xa6d8[30]](e[1])||(e[1]=location[_0xa6d8[313]]),n=e[1]+_0xa6d8[940]+e[2]+a}else B[_0xa6d8[3]](_0xa6d8[941])}()):B[_0xa6d8[3]](_0xa6d8[935]+e)},this[_0xa6d8[811]]=function(e){!1===(r=e)&&(i=_0xa6d8[14])},this[_0xa6d8[936]]=function(){return r},this[_0xa6d8[782]]=function(){!0===r&&0<n[_0xa6d8[44]]?y[_0xa6d8[622]](n,e):B[_0xa6d8[3]](_0xa6d8[937])},this[_0xa6d8[938]]=function(){return i},this[_0xa6d8[280]]=function(e){ve[_0xa6d8[30]](e)?e[_0xa6d8[281]](this):B[_0xa6d8[3]](_0xa6d8[939])},this[_0xa6d8[280]]=function(e){e[_0xa6d8[281]](this)},this[_0xa6d8[282]]=function(){return{serverIp:i}}},amaBeacon=function(e){var t=e;this[_0xa6d8[944]]=function(){return t}},amaBeaconManager=function(){var t=[];function n(){_[_0xa6d8[948]]({api:_0xa6d8[946],value:t[0][_0xa6d8[944]]()},t[0][_0xa6d8[944]](),_0xa6d8[947]),y[_0xa6d8[622]](t[0][_0xa6d8[944]](),e),t[_0xa6d8[913]](0,1)}function e(e){ve[_0xa6d8[30]](e)&&4===e[_0xa6d8[134]]&&(B[_0xa6d8[3]](_0xa6d8[949]+e[_0xa6d8[135]]),0<t[_0xa6d8[44]]&&n())}this[_0xa6d8[738]]=function(e){t[_0xa6d8[118]](e),1===t[_0xa6d8[44]]&&n()},this[_0xa6d8[945]]=function(e){return t[_0xa6d8[44]]}};var ye={Page:_0xa6d8[950],Location:_0xa6d8[951]};amaEventDispatcher=function(){var n={},r=null;function a(e){if(ve[_0xa6d8[268]](e)&&ve[_0xa6d8[268]](e[_0xa6d8[974]])){var t={latitude:e[_0xa6d8[974]][_0xa6d8[975]],longitude:e[_0xa6d8[974]][_0xa6d8[976]]};u(new amaEvent(_0xa6d8[977],t))}}function s(e){if(ve[_0xa6d8[268]](e)&&!ve[_0xa6d8[268]](e[_0xa6d8[978]])){var t=_0xa6d8[14];switch(e[_0xa6d8[978]]){case e[_0xa6d8[980]]:t=_0xa6d8[979];break;case e[_0xa6d8[982]]:t=_0xa6d8[981];break;case e[_0xa6d8[984]]:t=_0xa6d8[983];break;case e[_0xa6d8[986]]:t=_0xa6d8[985]}B[_0xa6d8[3]](_0xa6d8[987],t)}}function o(){var e=navigator[_0xa6d8[968]]||navigator[_0xa6d8[969]]||navigator[_0xa6d8[970]];if(ve[_0xa6d8[30]](e)&&ve[_0xa6d8[30]](e[_0xa6d8[123]])){var t={connectionType:e[_0xa6d8[123]]};u(new amaEvent(_0xa6d8[972],t))}}function i(){u(new amaEvent(_0xa6d8[988],{pageHide:!0}))}function l(){u(new amaEvent(_0xa6d8[988],{pageShow:!1}))}function u(e){for(var t in n)ve[_0xa6d8[650]](n[t])&&n[t](e)}this[_0xa6d8[704]]=function(e,t){switch(n[e]=t,e){case ye[_0xa6d8[952]]:window[_0xa6d8[954]]?(window[_0xa6d8[954]](_0xa6d8[955],i,!1),window[_0xa6d8[954]](_0xa6d8[956],l,!1),window[_0xa6d8[954]](_0xa6d8[957],i,!1)):window[_0xa6d8[958]]?(window[_0xa6d8[958]](_0xa6d8[959],i),window[_0xa6d8[958]](_0xa6d8[960],l),window[_0xa6d8[958]](_0xa6d8[961],i)):B[_0xa6d8[3]](_0xa6d8[962]);break;case ye[_0xa6d8[953]]:!function(){if(ve[_0xa6d8[30]](navigator[_0xa6d8[965]])&&null==r){var e={enableHighAccuracy:!1,timeout:6e4,maximumAge:0};navigator[_0xa6d8[965]][_0xa6d8[966]](a,s,e),r=navigator[_0xa6d8[965]][_0xa6d8[967]](a,s,e);var t=navigator[_0xa6d8[968]]||navigator[_0xa6d8[969]]||navigator[_0xa6d8[970]];if(ve[_0xa6d8[30]](t)&&ve[_0xa6d8[30]](t[_0xa6d8[123]])){t[_0xa6d8[954]](_0xa6d8[971],o);var n={connectionType:t[_0xa6d8[123]]},i=new amaEvent(_0xa6d8[972],n);u(i)}}}()}},this[_0xa6d8[834]]=function(e){switch(delete n[e],e){case ye[_0xa6d8[952]]:window[_0xa6d8[963]]?(window[_0xa6d8[963]](_0xa6d8[955],i),window[_0xa6d8[963]](_0xa6d8[956],l),window[_0xa6d8[963]](_0xa6d8[957],i)):window[_0xa6d8[964]]?(window[_0xa6d8[964]](_0xa6d8[959],i),window[_0xa6d8[964]](_0xa6d8[960],l),window[_0xa6d8[964]](_0xa6d8[961],i)):B[_0xa6d8[3]](_0xa6d8[962]);break;case ye[_0xa6d8[953]]:!function(){if(ve[_0xa6d8[30]](navigator[_0xa6d8[965]])&&null!=r){navigator[_0xa6d8[965]][_0xa6d8[973]](r),r=null;var e=navigator[_0xa6d8[968]]||navigator[_0xa6d8[969]]||navigator[_0xa6d8[970]];ve[_0xa6d8[30]](e)&&ve[_0xa6d8[30]](e[_0xa6d8[123]])&&e[_0xa6d8[963]](_0xa6d8[971],o)}}()}}},amaDiagnoser=function(a){var s=_0xa6d8[989],o=[],n=!1,l=null,u=null,c=_0xa6d8[990],d=null,h=this,r=[_0xa6d8[991],_0xa6d8[992],_0xa6d8[993],_0xa6d8[994]],f=_0xa6d8[14];function p(e,t,n){null===n&&(n=_0xa6d8[14]);try{if(_0xa6d8[14]===t||null===t)return;e=e[_0xa6d8[627]](/[\[]/,_0xa6d8[996])[_0xa6d8[627]](/[\]]/,_0xa6d8[995]);var i=new RegExp(_0xa6d8[997]+e+_0xa6d8[998])[_0xa6d8[171]](t);return null===i?n:i[1]}catch(e){return consoleLog(_0xa6d8[999]+e),n}}function m(e){for(var t=!1,n=r[_0xa6d8[44]],i=0;i<n;i++)if(-1!=e[_0xa6d8[84]](r[i])){t=!0;break}return t}this[_0xa6d8[694]]=function(){return null!==l},this[_0xa6d8[393]]=function(e,t){f=t,function(e){var t=0;window&&(u=function(){if(window===window[_0xa6d8[1e3]])return!0;if(!document||!document[_0xa6d8[298]]||!document[_0xa6d8[296]])return!1;var e=!1;try{var t=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/[_0xa6d8[171]](document.URL),n=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/[_0xa6d8[171]](document[_0xa6d8[296]]);(ve[_0xa6d8[30]](n[1])?n[1]:location[_0xa6d8[313]])===(ve[_0xa6d8[30]](t[3])?t[3]:location[_0xa6d8[313]])&&t[2]===n[2]&&(ve[_0xa6d8[30]](n[3])?n[3]:_0xa6d8[306])===(ve[_0xa6d8[30]](t[3])?t[3]:_0xa6d8[306])&&(e=!0)}catch(e){B[_0xa6d8[9]](_0xa6d8[1001]+e)}return e}()?(t=parseInt(p(_0xa6d8[1002],window[_0xa6d8[1e3]][_0xa6d8[300]])),window[_0xa6d8[1e3]][_0xa6d8[300]][_0xa6d8[313]]+_0xa6d8[940]+window[_0xa6d8[1e3]][_0xa6d8[300]][_0xa6d8[82]]):(t=parseInt(p(_0xa6d8[1002],window[_0xa6d8[300]])),window[_0xa6d8[300]][_0xa6d8[313]]+_0xa6d8[940]+window[_0xa6d8[300]][_0xa6d8[82]]));if(1===t&&(B[_0xa6d8[259]](!0),l=window[_0xa6d8[132]](s,_0xa6d8[14],_0xa6d8[1003]))){var n=window[_0xa6d8[954]]?_0xa6d8[954]:_0xa6d8[958],i=window[n],r=n==_0xa6d8[958]?_0xa6d8[1004]:_0xa6d8[638];_0xa6d8[14];o[_0xa6d8[118]]({api:_0xa6d8[1005],value:e}),i(r,h[_0xa6d8[1006]],!1),l[_0xa6d8[1008]]({api:_0xa6d8[1007],value:u,key:a,libVersion:f},c),d=setInterval(h[_0xa6d8[1009]],1e3)}}(e);var n=function(){var e;ve[_0xa6d8[30]](document[_0xa6d8[1011]])&&(e=document[_0xa6d8[1011]][_0xa6d8[1012]]);if(!ve[_0xa6d8[67]](e)){var t=document[_0xa6d8[60]](_0xa6d8[1013]),n=t[_0xa6d8[44]];for(i=0;i<n;i++){var r=t[i][_0xa6d8[1012]];if(ve[_0xa6d8[67]](r)&&m(r)){e=r;break}}}return e}();ve[_0xa6d8[67]](n)&&this[_0xa6d8[248]]({api:_0xa6d8[695],value:n})},this[_0xa6d8[1009]]=function(){h[_0xa6d8[1010]]()||l&&l[_0xa6d8[1008]]({api:_0xa6d8[1007],value:u,key:a,libVersion:f},c)},this[_0xa6d8[948]]=function(e,t,n){this[_0xa6d8[248]](e),B[_0xa6d8[3]](t,n)},this[_0xa6d8[248]]=function(e){if(n&&l){d&&(clearInterval(d),d=null);var t=o[_0xa6d8[44]];if(0<t){for(i=0;i<t;i++)l[_0xa6d8[1008]](o[i],c);o=[]}l[_0xa6d8[1008]](e,c)}else o[_0xa6d8[118]](e)},this[_0xa6d8[1014]]=function(e){n=e},this[_0xa6d8[1010]]=function(){return n},this[_0xa6d8[1006]]=function(e){_0xa6d8[1015]===e[_0xa6d8[110]][_0xa6d8[638]]&&e[_0xa6d8[110]][_0xa6d8[111]]===a&&(h[_0xa6d8[1014]](!0),B[_0xa6d8[3]](_0xa6d8[1016]))}},amaEventHandler=function(){var n,i,r;this[_0xa6d8[847]]=function(e){if(_0xa6d8[972]===e[_0xa6d8[709]]()){var t=e[_0xa6d8[933]]();n=t[_0xa6d8[1017]]}else if(_0xa6d8[977]===e[_0xa6d8[709]]()){t=e[_0xa6d8[933]]();i=t[_0xa6d8[975]].toString(),r=t[_0xa6d8[976]].toString()}},this[_0xa6d8[280]]=function(e){e[_0xa6d8[281]](this)},this[_0xa6d8[282]]=function(){return{connectionType:n,latitude:i,longitude:r}}};var xe={Sleep:_0xa6d8[712],Rebuffer:_0xa6d8[715]};amaCommonEventDispatcher=function(){var n={},i=0,t=null,r=null,a=null,s=0;function o(){ve[_0xa6d8[30]](a)&&clearTimeout(a)}function l(){var e=(new Date)[_0xa6d8[168]]();if(0<i&&i+25e3<e){o();var t={sleepDuration:e-i};c(new amaEvent(_0xa6d8[712],t))}else i=e}function u(){if(t[_0xa6d8[260]]()>s){var e={rebufferDuration:t[_0xa6d8[260]]()};d(),c(new amaEvent(xe.Rebuffer,e))}}function c(e){for(var t in n)e[_0xa6d8[709]]()===t&&ve[_0xa6d8[650]](n[t])&&n[t](e)}function d(){ve[_0xa6d8[30]](r)&&(t=null,clearTimeout(r))}this[_0xa6d8[704]]=function(e,t){switch(n[e]=t,e){case xe[_0xa6d8[712]]:ve[_0xa6d8[30]](a)||(a=setInterval(l,100))}},this[_0xa6d8[834]]=function(e){switch(delete n[e],e){case xe[_0xa6d8[712]]:o();break;case xe[_0xa6d8[715]]:d()}},this[_0xa6d8[799]]=function(e){ve[_0xa6d8[30]](r)||(s=e,t=new amaTimeSpan,r=setInterval(u,1e3))},this[_0xa6d8[802]]=function(){d()}},amaViewMetrics=function(){var e=null,i=0,r=0,a=0,s=0,o=0,l=0,u=0,c=0,d=0,h=0,f=0,p={},m=8,g=!1,v=!1,_=new amaDictionary;this[_0xa6d8[735]]=function(e){B[_0xa6d8[3]](_0xa6d8[864]);var t=_0xa6d8[14];return ve[_0xa6d8[268]](e)&&(_[_0xa6d8[54]](_0xa6d8[578],_0xa6d8[591]),t=function(e){var t=_0xa6d8[14];if(ve[_0xa6d8[268]](e)){r++,_[_0xa6d8[54]](_0xa6d8[579],r.toString()),_[_0xa6d8[54]](_0xa6d8[592],_0xa6d8[161]),_[_0xa6d8[54]](_0xa6d8[587],a.toString()),_[_0xa6d8[54]](_0xa6d8[589],s.toString()),_[_0xa6d8[54]](_0xa6d8[603],o.toString()),_[_0xa6d8[54]](_0xa6d8[590],l.toString()),_[_0xa6d8[54]](_0xa6d8[593],i.toString()),_[_0xa6d8[54]](_0xa6d8[581],u.toString()),_[_0xa6d8[54]](_0xa6d8[583],c.toString()),_[_0xa6d8[54]](_0xa6d8[585],d.toString()),_[_0xa6d8[54]](_0xa6d8[586],h.toString()),_[_0xa6d8[54]](_0xa6d8[596],function(){for(var e=0,t=_0xa6d8[361],n=1;n<m;n++)p[n]>p[e]&&(e=n);return t+=e}()),_[_0xa6d8[54]](_0xa6d8[580],f.toString());var n=new amaDictionary;t=e[_0xa6d8[146]](_0xa6d8[281],_,n),printVisitStore(),B[_0xa6d8[3]](_0xa6d8[1018]+t)}return t}(e),B[_0xa6d8[3]](_0xa6d8[854]+t),t=y[_0xa6d8[625]](t),B[_0xa6d8[3]](_0xa6d8[855]+t)),t},this[_0xa6d8[691]]=function(){e=new amaTimeSpan},this[_0xa6d8[838]]=function(){i=e[_0xa6d8[260]]()},printVisitStore=function(){B[_0xa6d8[3]](_0xa6d8[874]);var e=_[_0xa6d8[18]]();for(var t in e)B[_0xa6d8[3]](t+_0xa6d8[165]+e[t])},this[_0xa6d8[737]]=function(e,t){if(ve[_0xa6d8[268]](t)&&ve[_0xa6d8[268]](e)){var n=e[_0xa6d8[699]]()[_0xa6d8[18]]();!1===v&&(!function(e,t){if(ve[_0xa6d8[268]](t)&&ve[_0xa6d8[268]](e)){var n=t[_0xa6d8[27]]();if(ve[_0xa6d8[268]](n)&&ve[_0xa6d8[268]](n[_0xa6d8[157]]))for(var i,r,a=n[_0xa6d8[157]][_0xa6d8[44]],s=0;s<a;s++)i=n[_0xa6d8[157]][s][_0xa6d8[0]],r=e[i],ve[_0xa6d8[67]](r)&&r!==_0xa6d8[14]&&_[_0xa6d8[54]](i,r)}}(n,t),v=!0);var i=n[_0xa6d8[604]];ve[_0xa6d8[67]](i)&&i===_0xa6d8[161]&&o++,i=n[_0xa6d8[578]],ve[_0xa6d8[67]](i)&&i===_0xa6d8[521]?(B[_0xa6d8[3]](_0xa6d8[1019]+i),a++,g=!0):ve[_0xa6d8[67]](i)&&i===_0xa6d8[588]?(B[_0xa6d8[3]](_0xa6d8[1020]+i),s++):ve[_0xa6d8[67]](i)&&i===_0xa6d8[526]?(B[_0xa6d8[3]](_0xa6d8[1021]+i),l++,g&&(f++,g=!1)):(B[_0xa6d8[3]](_0xa6d8[1022]+i),g=!1),i=n[_0xa6d8[582]],ve[_0xa6d8[67]](i)&&(B[_0xa6d8[3]](_0xa6d8[1023]+i),u+=parseInt(i)),i=n[_0xa6d8[584]],ve[_0xa6d8[67]](i)&&(B[_0xa6d8[3]](_0xa6d8[1024]+i),c+=parseInt(i)),i=n[_0xa6d8[428]],ve[_0xa6d8[67]](i)&&(B[_0xa6d8[3]](_0xa6d8[1025]+i),d+=parseInt(i)),i=n[_0xa6d8[429]],ve[_0xa6d8[67]](i)&&(B[_0xa6d8[3]](_0xa6d8[1026]+i),h+=parseInt(i)),i=n[_0xa6d8[579]],ve[_0xa6d8[67]](i)&&(r=parseInt(i)),i=n[_0xa6d8[368]],ve[_0xa6d8[67]](i)&&function(e){if(ve[_0xa6d8[67]](e))for(var t,n=e[_0xa6d8[159]](_0xa6d8[252]),i=n[_0xa6d8[44]],r=0;r<i;r++){t=n[r][_0xa6d8[159]](_0xa6d8[165]);var a=parseInt(t[0]),s=parseInt(t[1]),o=Math[_0xa6d8[595]](a/5e5),l=o<m?o:m-1;ve[_0xa6d8[69]](p[l])?p[o]+=s:p[o]=s}}(i)}}},dashStreamInfo=function(e,t){this[_0xa6d8[1027]]=!1;try{this[_0xa6d8[129]]=function(e){if(!e)return streamError[_0xa6d8[1028]];this[_0xa6d8[1029]](),this[_0xa6d8[1030]]=_0xa6d8[1031],this[_0xa6d8[1032]]=_0xa6d8[1033];var t=(new DOMParser)[_0xa6d8[1035]](e,_0xa6d8[1034]);if(!t)return streamError[_0xa6d8[1036]];var n=t[_0xa6d8[60]](_0xa6d8[1037]);if(!n||!n[0])return streamError[_0xa6d8[1036]];var i=n[0][_0xa6d8[35]](_0xa6d8[123]);if(i===_0xa6d8[1038])this[_0xa6d8[1039]]=_0xa6d8[1040],this[_0xa6d8[44]]=-1;else if(i===_0xa6d8[1041]){this[_0xa6d8[1039]]=_0xa6d8[1042];var r=n[this[_0xa6d8[44]]=0][_0xa6d8[35]](_0xa6d8[1043]);if(r[_0xa6d8[1044]](_0xa6d8[743]))if(-1!==(r=r[_0xa6d8[172]](1))[_0xa6d8[84]](_0xa6d8[1045])){var a=r[_0xa6d8[159]](_0xa6d8[1045]);this[_0xa6d8[44]]+=function(e){var t=0,n=e[_0xa6d8[84]](_0xa6d8[1050]);if(-1!==n){var i=Number(e[_0xa6d8[172]](0,n));t+=8760*i*60*60*1e3,e=e[_0xa6d8[172]](n+1)}var r=e[_0xa6d8[84]](_0xa6d8[1051]);if(-1!==r){var a=Number(e[_0xa6d8[172]](0,r));t+=730*a*60*60*1e3,e=e[_0xa6d8[172]](r+1)}var s=e[_0xa6d8[84]](_0xa6d8[1052]);if(-1!==s){var o=Number(e[_0xa6d8[172]](0,s));t+=24*o*60*60*1e3}return t}(a[0]),this[_0xa6d8[44]]+=s(a[1])}else this[_0xa6d8[44]]+=s(r);B[_0xa6d8[3]](_0xa6d8[1046]+this[_0xa6d8[44]])}return this[_0xa6d8[1047]]()(this),this[_0xa6d8[1027]]=!0,streamError[_0xa6d8[1048]]}}catch(e){B[_0xa6d8[3]](_0xa6d8[1049]+e)}if(this[_0xa6d8[129]](e)===streamError[_0xa6d8[1048]])return this;if(t)return this[_0xa6d8[1030]]=_0xa6d8[1031],this[_0xa6d8[1032]]=_0xa6d8[1033],this[_0xa6d8[1039]]=_0xa6d8[249],this[_0xa6d8[44]]=0,this[_0xa6d8[1029]](),this[_0xa6d8[1047]]()(this),this;function s(e){var t=0,n=e[_0xa6d8[84]](_0xa6d8[747]);-1!==n&&(t+=60*Number(e[_0xa6d8[172]](0,n))*60*1e3,e=e[_0xa6d8[172]](n+1));var i=e[_0xa6d8[84]](_0xa6d8[1051]);-1!==i&&(t+=60*Number(e[_0xa6d8[172]](0,i))*1e3,e=e[_0xa6d8[172]](i+1));var r=e[_0xa6d8[84]](_0xa6d8[588]);-1!==r&&(t+=1e3*Number(e[_0xa6d8[172]](0,r)));return t}},hlsStreamInfo=function(e,t){return this[_0xa6d8[1053]]=!1,this[_0xa6d8[1027]]=!1,this[_0xa6d8[129]]=function(e){try{if(!e)return streamError[_0xa6d8[1028]];if(-1===e[_0xa6d8[660]](_0xa6d8[1054]))return streamError[_0xa6d8[1036]];this[_0xa6d8[1032]]=_0xa6d8[1055],this[_0xa6d8[1030]]=_0xa6d8[1055],this[_0xa6d8[1029]]();var t,n,i=e[_0xa6d8[159]](_0xa6d8[1056]),r=_0xa6d8[14],a=/PROGRAM-ID=(\d+)/;if(i){for(n=0;n<i[_0xa6d8[44]];n++)if(t=a[_0xa6d8[171]](i[n])){if(t[1]==r)break;r=t[1]}n!=i[_0xa6d8[44]]&&(this[_0xa6d8[1030]]=_0xa6d8[1040])}var s,o,l=this[_0xa6d8[1057]]();if(l){var u=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/[_0xa6d8[171]](l);s=ve[_0xa6d8[30]](u[1])?u[1]:location[_0xa6d8[313]],o=u[2],u[3]?u[3]:_0xa6d8[306],u[4]}if(a=/^#EXT((INF)|(-X-STREAM-INF))[^\n]*\n([^\n]*)\n/m,B[_0xa6d8[3]](_0xa6d8[1058]),t=a[_0xa6d8[171]](e))if(B[_0xa6d8[3]](_0xa6d8[1059]+t[4]),new RegExp(_0xa6d8[1060])[_0xa6d8[171]](t[4])&&s&&o)try{if(this[_0xa6d8[1053]]){var c,d=new XMLHttpRequest;c=amaURLUtility[_0xa6d8[653]](t[4])?t[4]:s+_0xa6d8[1061]+o+t[4],B[_0xa6d8[3]](_0xa6d8[1062]+c),d[_0xa6d8[132]](_0xa6d8[131],c,!0),d[_0xa6d8[133]]=(h=this,function(){B[_0xa6d8[3]](_0xa6d8[1063]+this[_0xa6d8[1065]](_0xa6d8[1064])),4===this[_0xa6d8[134]]&&(200===this[_0xa6d8[135]]&&this[_0xa6d8[942]]&&(/^#EXT-X-ENDLIST/m[_0xa6d8[171]](this[_0xa6d8[942]])?h[_0xa6d8[1039]]=_0xa6d8[1042]:(h[_0xa6d8[1039]]=_0xa6d8[1040],h[_0xa6d8[44]]=_0xa6d8[412])),ve[_0xa6d8[650]](h[_0xa6d8[1047]]())&&h[_0xa6d8[1047]]()(h))}),d[_0xa6d8[1066]]&&d[_0xa6d8[1066]](_0xa6d8[1067]),d[_0xa6d8[142]](null)}}catch(e){B[_0xa6d8[3]](_0xa6d8[1068]+e)}else/^#EXT-X-ENDLIST/m[_0xa6d8[171]](e)&&(this[_0xa6d8[1039]]=_0xa6d8[1042])}catch(e){B[_0xa6d8[3]](_0xa6d8[1069]+e)}var h;return this[_0xa6d8[1027]]=!0,streamError[_0xa6d8[1048]]},this[_0xa6d8[129]](e)===streamError[_0xa6d8[1048]]?(!1===this[_0xa6d8[1053]]&&this[_0xa6d8[1047]]()(this),this[_0xa6d8[1032]]=_0xa6d8[1055],this[_0xa6d8[1039]]=_0xa6d8[249],this):t?(this[_0xa6d8[1032]]=_0xa6d8[1055],this[_0xa6d8[1030]]=_0xa6d8[1040],this[_0xa6d8[1039]]=_0xa6d8[249],this[_0xa6d8[44]]=0,this[_0xa6d8[1029]](),this[_0xa6d8[1047]]()(this),this):void 0},nonAdaptiveStream=function(e,t){try{return this[_0xa6d8[1030]]=_0xa6d8[743],this[_0xa6d8[1039]]=_0xa6d8[1042],this[_0xa6d8[1032]]=_0xa6d8[1070],this[_0xa6d8[44]]=0,this[_0xa6d8[1029]](),this[_0xa6d8[1047]]()(this),this}catch(e){B[_0xa6d8[3]](_0xa6d8[1071]+e)}};var be={};be[_0xa6d8[1072]]=function(e,t,n){try{var i=new XMLHttpRequest;i[_0xa6d8[132]](_0xa6d8[131],t,!0),i[_0xa6d8[133]]=function(){4===this[_0xa6d8[134]]&&200===this[_0xa6d8[135]]&&this[_0xa6d8[942]]&&be.FactoryWithContent(e,t,this[_0xa6d8[942]],n,!1)},i[_0xa6d8[142]](null)}catch(e){B[_0xa6d8[3]](_0xa6d8[1073]+e)}},be[_0xa6d8[1074]]=function(e,t,n,i,r){var a;try{a=_0xa6d8[1055]===e?(Te(hlsStreamInfo,streamInfoBase,t,i),new hlsStreamInfo(n,r)):_0xa6d8[1033]===e?(Te(dashStreamInfo,streamInfoBase,t,i),new dashStreamInfo(n,r)):(Te(nonAdaptiveStream,streamInfoBase,t,i),new nonAdaptiveStream(n,r))}catch(e){B[_0xa6d8[3]](_0xa6d8[1075]+e)}return a},streamInfoBase=function(e,t){this[_0xa6d8[1076]]=e,this[_0xa6d8[0]]=null,this[_0xa6d8[44]]=0,this[_0xa6d8[1030]]=null,this[_0xa6d8[1039]]=_0xa6d8[249],this[_0xa6d8[30]]=!1,this[_0xa6d8[1032]]=null,this[_0xa6d8[1077]]=t},streamInfoBase[_0xa6d8[573]][_0xa6d8[1057]]=function(){return this[_0xa6d8[1076]]},streamInfoBase[_0xa6d8[573]][_0xa6d8[552]]=function(){return this[_0xa6d8[0]]},streamInfoBase[_0xa6d8[573]][_0xa6d8[551]]=function(){return this[_0xa6d8[44]]},streamInfoBase[_0xa6d8[573]][_0xa6d8[549]]=function(){return this[_0xa6d8[1030]]},streamInfoBase[_0xa6d8[573]][_0xa6d8[550]]=function(){return this[_0xa6d8[1039]]},streamInfoBase[_0xa6d8[573]][_0xa6d8[1078]]=function(){return this[_0xa6d8[1032]]},streamInfoBase[_0xa6d8[573]][_0xa6d8[1047]]=function(){return this[_0xa6d8[1077]]},streamInfoBase[_0xa6d8[573]][_0xa6d8[1029]]=function(){try{var e=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/[_0xa6d8[171]](this[_0xa6d8[1076]]);typeof e[1]===_0xa6d8[671]?this[_0xa6d8[313]]=location[_0xa6d8[313]]:this[_0xa6d8[313]]=e[1],this[_0xa6d8[314]]=e[2],this[_0xa6d8[315]]=e[3]?e[3]:_0xa6d8[306],this[_0xa6d8[152]]=e[4];var t=this[_0xa6d8[152]][_0xa6d8[159]](_0xa6d8[231]),n=t[_0xa6d8[44]];this[_0xa6d8[0]]=t[n-1];var i=this[_0xa6d8[0]][_0xa6d8[187]]();-1==i[_0xa6d8[84]](_0xa6d8[309])&&-1==i[_0xa6d8[84]](_0xa6d8[310])&&-1==i[_0xa6d8[84]](_0xa6d8[311])&&-1==i[_0xa6d8[84]](_0xa6d8[312])||3<=n&&(this[_0xa6d8[0]]=t[n-2]+_0xa6d8[231]+t[n-1]),this[_0xa6d8[317]]=e[5]?e[5]:_0xa6d8[14],this[_0xa6d8[660]]=e[6]?e[6]:_0xa6d8[14],this[_0xa6d8[82]]=this[_0xa6d8[314]]+_0xa6d8[165]+this[_0xa6d8[315]]}catch(e){B[_0xa6d8[3]](_0xa6d8[319]+e)}},streamError={InvalidURL:_0xa6d8[1079],ParsingFailed:_0xa6d8[1080],Invalid_Manifest:_0xa6d8[1081],Invalid_Stream:_0xa6d8[1082],NoError:_0xa6d8[1083]};var Te=function(e,t,n,i){try{e[_0xa6d8[573]]=Object[_0xa6d8[613]](t[_0xa6d8[573]],{url:{value:n,enumerable:!1},callback:{value:i,enumerable:!1}})}catch(e){B[_0xa6d8[3]](_0xa6d8[614]+e)}};StreamTypeDetector=function(t,e,n,i){function r(e,t,n){B[_0xa6d8[3]](_0xa6d8[1084]);var i=be.FactoryWithContent(_0xa6d8[1055],e,t,n,!1);i[_0xa6d8[1027]]||(B[_0xa6d8[3]](_0xa6d8[1085]),(i=be.FactoryWithContent(_0xa6d8[1033],e,t,n,!1))[_0xa6d8[1027]]||(B[_0xa6d8[3]](_0xa6d8[1086]),i=be.FactoryWithContent(_0xa6d8[1087],e,t,n,!1)))}try{if(!t||t===_0xa6d8[14])return streamError[_0xa6d8[1088]];var a=RegExp(_0xa6d8[1060]),s=RegExp(_0xa6d8[312]);if(n){if(a[_0xa6d8[171]](t))return B[_0xa6d8[3]](_0xa6d8[1089]),void be.FactoryWithURL(_0xa6d8[1055],t,i);if(s[_0xa6d8[171]](t))return B[_0xa6d8[3]](_0xa6d8[1090]),void be.FactoryWithURL(_0xa6d8[1033],t,i);B[_0xa6d8[3]](_0xa6d8[1091]);var o=new XMLHttpRequest;B[_0xa6d8[3]](_0xa6d8[1092]),o[_0xa6d8[132]](_0xa6d8[1093],t,!0),o[_0xa6d8[1066]]&&o[_0xa6d8[1066]](_0xa6d8[1034]),o[_0xa6d8[133]]=function(){if(this[_0xa6d8[134]]===this[_0xa6d8[1094]]){var e=this[_0xa6d8[1065]](_0xa6d8[1064]);_0xa6d8[1095]===e||_0xa6d8[1096]===e?(B[_0xa6d8[3]](_0xa6d8[1097]),be.FactoryWithContent(_0xa6d8[1055],t,this[_0xa6d8[942]],i)):_0xa6d8[1098]===e?(B[_0xa6d8[3]](_0xa6d8[1099]),be.FactoryWithContent(_0xa6d8[1033],t,this[_0xa6d8[942]],i)):r(t,this[_0xa6d8[942]],i)}},o[_0xa6d8[142]](null)}else a[_0xa6d8[171]](t)?(B[_0xa6d8[3]](_0xa6d8[1089]),streamObj=be.FactoryWithContent(_0xa6d8[1055],t,e,i,!0)):s[_0xa6d8[171]](t)?(B[_0xa6d8[3]](_0xa6d8[1090]),streamObj=be.FactoryWithContent(_0xa6d8[1033],t,e,i,!0)):r(t,e,i);return streamError[_0xa6d8[1048]]}catch(e){B[_0xa6d8[3]](_0xa6d8[1100]+e)}}},AMAInstanceManager[_0xa6d8[1101]]={},AMAInstanceManager[_0xa6d8[1102]]=0,AMAInstanceManager[_0xa6d8[612]]=null,AMAInstanceManager[_0xa6d8[1103]]=function(e){var t=_0xa6d8[1104]+AMAInstanceManager[_0xa6d8[1102]]++;return AMAInstanceManager[_0xa6d8[1101]][t]=e,t},AMAInstanceManager[_0xa6d8[1105]]=function(){window[_0xa6d8[954]]?(window[_0xa6d8[954]](_0xa6d8[955],handlePageHide,!1),window[_0xa6d8[954]](_0xa6d8[957],handlePageHide,!1)):window[_0xa6d8[958]]?(window[_0xa6d8[958]](_0xa6d8[959],handlePageHide),window[_0xa6d8[958]](_0xa6d8[961],handlePageHide)):akamaiLogger[_0xa6d8[3]](_0xa6d8[962])},AMAInstanceManager[_0xa6d8[1105]](),AMAInstanceManager[_0xa6d8[1107]]=function(e){null!==e&&typeof e===_0xa6d8[878]&&(1===Object[_0xa6d8[1108]](AMAInstanceManager[_0xa6d8[1101]])[_0xa6d8[44]]&&e[_0xa6d8[836]](),delete AMAInstanceManager[_0xa6d8[1101]][e[_0xa6d8[688]]()])};var JS_AkamaiMediaAnalytics=function(e){var t=_0x926a[1109],n=_0x926a[1110],i=!0,r=n+_0x926a[249]+t,a=_0x926a[14],s=null,o=null,l=e,u={Init:0,Playing:1,Pause:2,Rebuffer:4,Seeking:8,PlayEnded:16},c=!1,d=-1;this[_0x926a[688]]=function(){return a},a=AMAInstanceManager[_0x926a[1103]](this),this[_0x926a[1111]]=function(e){f(e)&&(r=r+_0x926a[165]+e)},this[_0x926a[693]]=function(e){s&&e&&(i&&this[_0x926a[851]](_0x926a[1112]+e+_0x926a[1113],_0x926a[1114]),o=e,-1!==d&&u[_0x926a[1115]]!==d&&s[_0x926a[806]](_0x926a[574]),h())},this[_0x926a[778]]=function(){c||s&&(i&&this[_0x926a[851]](_0x926a[1116],_0x926a[1114]),-1!==d&&u[_0x926a[1115]]!==d||h(),u[_0x926a[715]]===d?s[_0x926a[801]]():u[_0x926a[1117]]===d?s[_0x926a[711]]():s[_0x926a[778]](),d=u[_0x926a[1118]])},this[_0x926a[794]]=function(){c||s&&(i&&this[_0x926a[851]](_0x926a[1119],_0x926a[1114]),s[_0x926a[794]](),d=u[_0x926a[1120]])},this[_0x926a[806]]=function(e){c||s&&(i&&this[_0x926a[851]](_0x926a[1121]+e+_0x926a[1113],_0x926a[1114]),u[_0x926a[1115]]!==d&&(f(e)||(e=_0x926a[574]),s[_0x926a[806]](e),d=u[_0x926a[1115]]))},this[_0x926a[1122]]=function(e){c||s&&(i&&this[_0x926a[851]](_0x926a[1123]+e+_0x926a[1113],_0x926a[1114]),s[_0x926a[804]](e))},this[_0x926a[818]]=function(e){s&&(i&&this[_0x926a[851]](_0x926a[1124]+e+_0x926a[1113],_0x926a[1114]),s[_0x926a[818]](e),d=u[_0x926a[1118]])},this[_0x926a[798]]=function(){c||u[_0x926a[1125]]===d||s&&(i&&this[_0x926a[851]](_0x926a[1126],_0x926a[1114]),d===u[_0x926a[1118]]&&(s[_0x926a[798]](),d=u[_0x926a[715]]))},this[_0x926a[801]]=function(){c||u[_0x926a[1125]]===d||s&&(i&&this[_0x926a[851]](_0x926a[1127],_0x926a[1114]),s[_0x926a[801]](),d=u[_0x926a[1118]])},this[_0x926a[714]]=function(e){c||s&&(i&&this[_0x926a[851]](_0x926a[1128]+e+_0x926a[1113],_0x926a[1114]),u[_0x926a[1115]]!==d&&(s[_0x926a[714]](e),d=u[_0x926a[1115]]))},this[_0x926a[796]]=function(){c||s&&(i&&this[_0x926a[851]](_0x926a[1129],_0x926a[1114]),d>=u[_0x926a[1118]]&&(s[_0x926a[796]](),d=u[_0x926a[1125]]))},this[_0x926a[1130]]=function(){c||s&&i&&this[_0x926a[851]](_0x926a[1131],_0x926a[1114])},this[_0x926a[842]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1132],_0x926a[1114]),this[_0x926a[1106]](),s=null)};function h(){if(s){s[_0x926a[707]](r);var e={};o&&o[_0x926a[1134]]?e[_0x926a[324]]=o[_0x926a[1134]]:s[_0x926a[851]](_0x926a[1135],_0x926a[1136]),s[_0x926a[693]](e),d=u[_0x926a[1117]]}}function f(e){var t=!1;return typeof e!==_0x926a[671]&&null!==e&&(typeof e==_0x926a[880]||typeof e==_0x926a[878]&&e[_0x926a[512]]===String)&&(t=0<e[_0x926a[44]]),t}this[_0x926a[763]]=function(e,t){s&&(i&&this[_0x926a[851]](_0x926a[1137]+e+_0x926a[252]+t+_0x926a[1113],_0x926a[1114]),s[_0x926a[763]](e,t))},this[_0x926a[767]]=function(e){s&&(i&&s[_0x926a[851]](_0x926a[1138]+e+_0x926a[1113]),s[_0x926a[767]](e))},this[_0x926a[289]]=function(e){s&&(i&&this[_0x926a[851]](_0x926a[1139]+e+_0x926a[1113],_0x926a[1114]),s[_0x926a[289]](e))},this[_0x926a[815]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1140],_0x926a[1114]),s[_0x926a[815]](),d=u[_0x926a[1118]])},this[_0x926a[819]]=function(e){if(s)if(i&&this[_0x926a[851]](_0x926a[1141]+e+_0x926a[1113],_0x926a[1114]),c=!0,typeof e!==_0x926a[671]&&null!==e)d===u[_0x926a[1117]]?e[_0x926a[482]]=_0x926a[361]:d===u[_0x926a[1118]]?e[_0x926a[482]]=_0x926a[161]:d===u[_0x926a[1115]]&&(e[_0x926a[482]]=_0x926a[1142]),s[_0x926a[819]](e);else{s[_0x926a[819]]({})}},this[_0x926a[820]]=function(e){if(s)if(i&&this[_0x926a[851]](_0x926a[1143]+e+_0x926a[1113],_0x926a[1114]),typeof e!==_0x926a[671]&&null!==e)s[_0x926a[820]](e);else{s[_0x926a[820]]({})}},this[_0x926a[822]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1144],_0x926a[1114]),s[_0x926a[822]]())},this[_0x926a[824]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1145],_0x926a[1114]),s[_0x926a[824]]())},this[_0x926a[828]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1146],_0x926a[1114]),c=!1,s[_0x926a[828]]())},this[_0x926a[830]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1147],_0x926a[1114]),c=!1,s[_0x926a[830]]())},this[_0x926a[832]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1148],_0x926a[1114]),c=!1,s[_0x926a[832]]())},this[_0x926a[771]]=function(e,t){s&&(i&&this[_0x926a[851]](_0x926a[1149]+e+_0x926a[252]+t+_0x926a[1113],_0x926a[1114]),s[_0x926a[771]](e,t))},this[_0x926a[775]]=function(e){s&&(i&&this[_0x926a[851]](_0x926a[1150]+e+_0x926a[1113],_0x926a[1114]),s[_0x926a[775]](e))},this[_0x926a[770]]=function(e){s&&(i&&this[_0x926a[851]](_0x926a[1151],_0x926a[1114]),s[_0x926a[770]](e))},this[_0x926a[698]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1152],_0x926a[1114]),s[_0x926a[698]]())},this[_0x926a[849]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1153],_0x926a[1114]),s[_0x926a[849]]())},this[_0x926a[1154]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1155],_0x926a[1114]),s[_0x926a[813]]())},this[_0x926a[1156]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1157],_0x926a[1114]),s[_0x926a[810]]())},this[_0x926a[836]]=function(){s&&(i&&s[_0x926a[851]](_0x926a[1158],_0x926a[1114]),s[_0x926a[836]]())},this[_0x926a[826]]=function(){s&&(i&&this[_0x926a[851]](_0x926a[1159],_0x926a[1114]),s[_0x926a[826]]())},this[_0x926a[1106]]=function(){s&&(u[_0x926a[1115]]!==d&&(s[_0x926a[806]](_0x926a[1160]),d=u[_0x926a[1115]]),AMAInstanceManager[_0x926a[1107]](this))},this[_0x926a[851]]=function(e,t){s&&s[_0x926a[851]](e,t)},this[_0x926a[1161]]=function(e,t){try{f(e)&&f(t)&&(i=!1,r=r+_0x926a[165]+e+_0x926a[249]+t)}catch(e){}},l?(s=new akamaiMediaAnalytics(a))[_0x926a[393]](l):console[_0x926a[9]](_0x926a[1133])};!function(){(window.EBUPipeQName="_pipe")in window||(window._pipe=function(){window._pipe.q.push(arguments)},window._pipe.q=[]),window._pipe.startTime=(new Date).getTime();var e=document.createElement("script");e.src="//peach-static.ebu.io/pipe-5.x.min.js",e.async=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["../bower_components/moment/moment"],t):t(e.moment)}(this,function(e){"use strict";return e.defineLocale("rm-ch",{months:"Schaner_Favrer_Mars_Avrigl_Matg_Zercladur_Fanadur_Avust_Settember_October_November_December".split("_"),monthsShort:"Schan_Fav_Mars_Avr_Matg_Zer_Fan_Avu_Set_Oct_Nov_Dec".split("_"),weekdays:"Dumengia_Glindesdi_Mardi_Mesemna_Gievgia_Venderdi_Sonda".split("_"),weekdaysShort:"Dum_Gli_Mar_Mes_Gie_Ven_Son".split("_"),weekdaysMin:"Du_Gl_Ma_Me_Gi_Ve_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oz a las] LT",nextDay:"[Damaun a las] LT",nextWeek:"dddd LT",lastDay:"[Ier a las] LT",lastWeek:"dddd LT",sameElse:"L"},relativeTime:{future:"en %s",past:"%s passà",s:"intginas secundas",m:"ina minuta",mm:"%d minutas",h:"ina ura",hh:"%d uras",d:"in di",dd:"%d dis",M:"in mais",MM:"%d mais",y:"in onn",yy:"%d onns"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})});var ns_=ns_||{};ns_.StreamSense=ns_.StreamSense||function(){function Q(e){J=e}function Z(e){e}var J=function(e,t){};Q(function(e,t){(new Image).src=e,t&&setTimeout(t,0)}),Z(function(e,t,n){n&&setTimeout(n,0)});var ee,te,e="undefined"!=typeof window&&"undefined"!=typeof document;te=e?(ee=window,document):(ee={},{location:{href:""},title:"",URL:"",referrer:"",cookie:""});var t,n,i,r,a,ne=((a={uid:(r=1,function(){return+new Date+"_"+r++}),filter:function(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&e(t[i])&&(n[i]=t[i]);return n},extend:function(e){var t,n=arguments.length;e=e||{};for(var i=1;i<n;i++)if(t=arguments[i])for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},isNotEmpty:function(e){return null!=e&&0<e.length},indexOf:function(n,e){var i=-1;return a.forEach(e,function(e,t){e==n&&(i=t)}),i},forEach:function(e,t,n){try{if("function"==typeof t)if(n=void 0!==n?n:null,"number"!=typeof e.length||void 0===e[0]){var i=void 0!==e.__proto__;for(var r in e)(!i||i&&void 0===e.__proto__[r])&&"function"!=typeof e[r]&&t.call(n,e[r],r)}else{r=0;for(var a=e.length;r<a;r++)t.call(n,e[r],r)}}catch(e){}},regionMatches:function(e,t,n,i,r){if(t<0||i<0||t+r>e.length||i+r>n.length)return!1;for(;0<=--r;){if(e.charAt(t++)!=n.charAt(i++))return!1}return!0},size:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},log:function(e,t){if(void 0!==t&&t){var n=new Date,i=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(i,e)}},isTrue:function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},toString:function(e){if(void 0===e)return"undefined";if("string"==typeof e)return e;if("[object Array]"===Object.prototype.toString.call(e))return e.join(",");if(0<a.size(e)){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}return e.toString()},exists:function(e){return void 0!==e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];if(0<n)return n}return 0}}).filterMap=function(e,t){for(var n in e)-1==a.indexOf(n,t)&&delete e[n]},a.getKeys=function(e,t){var n,i=[];for(n in e)(!t||t.test(n))&&e.hasOwnProperty(n)&&(i[i.length]=n);return i},a.getBrowserName=function(){var e,t,n=navigator.userAgent,i=navigator.appName;return-1!=(t=n.indexOf("Opera"))?i="Opera":-1!=(t=n.indexOf("MSIE"))?i="Microsoft Internet Explorer":-1!=(t=n.indexOf("Chrome"))?i="Chrome":-1!=(t=n.indexOf("Safari"))?i="Safari":-1!=(t=n.indexOf("Firefox"))?i="Firefox":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(i=n.substring(e,t)).toLowerCase()==i.toUpperCase()&&(i=navigator.appName),i},a.getBrowserFullVersion=function(){var e,t,n=navigator.userAgent,i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return-1!=(e=n.indexOf("Opera"))?(i=n.substring(e+6),-1!=(e=n.indexOf("Version"))&&(i=n.substring(e+8))):-1!=(e=n.indexOf("MSIE"))?i=n.substring(e+5):-1!=(e=n.indexOf("Chrome"))?i=n.substring(e+7):-1!=(e=n.indexOf("Safari"))?(i=n.substring(e+7),-1!=(e=n.indexOf("Version"))&&(i=n.substring(e+8))):-1!=(e=n.indexOf("Firefox"))?i=n.substring(e+8):n.lastIndexOf(" ")+1<(e=n.lastIndexOf("/"))&&(i=n.substring(e+1)),-1!=(t=i.indexOf(";"))&&(i=i.substring(0,t)),-1!=(t=i.indexOf(" "))&&(i=i.substring(0,t)),r=parseInt(""+i,10),isNaN(r)&&(i=""+parseFloat(navigator.appVersion)),i},a),ie=(i=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"],{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(e){return i[e]}}),re=(n=[ie.END,ie.PLAY,ie.PAUSE,ie.BUFFER],{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(e){return n[e]}}),s={ADPLAY:ie.AD_PLAY,ADPAUSE:ie.AD_PAUSE,ADEND:ie.AD_END,ADCLICK:ie.AD_CLICK},ae={STREAMSENSE_VERSION:"4.1403.25",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",LABELS_ORDER:["c1","c2","ns_site","ns_vsite","ns_ap_an","ns_ap_pn","ns_ap_pv","c12","name","ns_ak","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ns_ap_sv","ns_type","ns_radio","ns_nc","ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ns_st_pe","ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_ct","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","c7","c8","c9"]},h=function(){function i(e,t){var n=t[e];null!=n&&(r[e]=n)}var t,r,a=this,s=0,o=0,l=0,n=0,u=0,c=0;ne.extend(this,{reset:function(e){null!=e&&0<e.length?ne.filterMap(r,e):r={},r.hasOwnProperty("ns_st_cl")||(r.ns_st_cl="0"),r.hasOwnProperty("ns_st_pn")||(r.ns_st_pn="1"),r.hasOwnProperty("ns_st_tp")||(r.ns_st_tp="1"),a.setPauses(0),a.setStarts(0),a.setBufferingTime(0),a.setBufferingTimestamp(-1),a.setPlaybackTime(0),a.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&ne.extend(r,e),a.setRegisters(r,t)},getLabels:function(){return r},setLabel:function(e,t){var n={};n[e]=t,a.setLabels(n,null)},getLabel:function(e){return r[e]},getClipId:function(){return(void 0===t||null==t)&&a.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(e,t){var n=e.ns_st_cn;null!=n&&(a.setClipId(n),delete e.ns_st_cn),null!=(n=e.ns_st_bt)&&(l=Number(n),delete e.ns_st_bt),i("ns_st_cl",e),i("ns_st_pn",e),i("ns_st_tp",e),i("ns_st_ub",e),i("ns_st_br",e),t!=re.PLAYING&&null!=t||null!=(n=e.ns_st_sq)&&(o=Number(n),delete e.ns_st_sq),t!=re.BUFFERING&&null!=(n=e.ns_st_pt)&&(u=Number(n),delete e.ns_st_pt),t!=re.PAUSED&&t!=re.IDLE&&null!=t||null!=(n=e.ns_st_pc)&&(s=Number(n),delete e.ns_st_pc)},createLabels:function(e,t){var n=t||{};return n.ns_st_cn=a.getClipId(),n.ns_st_bt=String(a.getBufferingTime()),e!=ie.PLAY&&null!=e||(n.ns_st_sq=String(o)),e!=ie.PAUSE&&e!=ie.END&&e!=ie.KEEP_ALIVE&&e!=ie.HEART_BEAT&&null!=e||(n.ns_st_pt=String(a.getPlaybackTime()),n.ns_st_pc=String(s)),ne.extend(n,a.getLabels()),n},incrementPauses:function(){s++},incrementStarts:function(){o++},getBufferingTime:function(){var e=l;return 0<=n&&(e+=+new Date-n),e},setBufferingTime:function(e){l=e},getPlaybackTime:function(){var e=u;return 0<=c&&(e+=+new Date-c),e},setPlaybackTime:function(e){u=e},getPlaybackTimestamp:function(){return c},setPlaybackTimestamp:function(e){c=e},getBufferingTimestamp:function(){return n},setBufferingTimestamp:function(e){n=e},getPauses:function(){return s},setPauses:function(e){s=e},getStarts:function(){return o},setStarts:function(e){o=e}}),r={},a.reset()},se=function(){var i,n,r=this,a=null,s=0,o=0,l=0,u=0,c=0,t=0,d=!1;ne.extend(this,{reset:function(e){null!=e&&0<e.length?ne.filterMap(n,e):n={},r.setPlaylistId(+new Date+"_"+t),r.setBufferingTime(0),r.setPlaybackTime(0),r.setPauses(0),r.setStarts(0),r.setRebufferCount(0),d=!1},setLabels:function(e,t){null!=e&&ne.extend(n,e),r.setRegisters(n,t)},getLabels:function(){return n},setLabel:function(e,t){var n={};n[e]=t,r.setLabels(n,null)},getLabel:function(e){return n[e]},getClip:function(){return a},getPlaylistId:function(){return i},setPlaylistId:function(e){i=e},setRegisters:function(e,t){var n=e.ns_st_sp;null!=n&&(s=Number(n),delete e.ns_st_sp),null!=(n=e.ns_st_bc)&&(l=Number(n),delete e.ns_st_bc),null!=(n=e.ns_st_bp)&&(u=Number(n),delete e.ns_st_bp),null!=(n=e.ns_st_id)&&(i=n,delete e.ns_st_id),t!=re.BUFFERING&&null!=(n=e.ns_st_pa)&&(c=Number(n),delete e.ns_st_pa),t!=re.PAUSED&&t!=re.IDLE&&null!=t||null!=(n=e.ns_st_pp)&&(o=Number(n),delete e.ns_st_pp)},createLabels:function(e,t){var n=t||{};return n.ns_st_bp=String(r.getBufferingTime()),n.ns_st_sp=String(s),n.ns_st_id=String(i),0<l&&(n.ns_st_bc=String(l)),e!=ie.PAUSE&&e!=ie.END&&e!=ie.KEEP_ALIVE&&e!=ie.HEART_BEAT&&null!=e||(n.ns_st_pa=String(r.getPlaybackTime()),n.ns_st_pp=String(o)),e!=ie.PLAY&&null!=e||r.didFirstPlayOccurred()||(n.ns_st_pb="1",r.setFirstPlayOccurred(!0)),ne.extend(n,r.getLabels()),n},incrementStarts:function(){s++},incrementPauses:function(){o++,a.incrementPauses()},setPlaylistCounter:function(e){t=e},incrementPlaylistCounter:function(){t++},addPlaybackTime:function(e){if(0<=a.getPlaybackTimestamp()){var t=e-a.getPlaybackTimestamp();a.setPlaybackTimestamp(-1),a.setPlaybackTime(a.getPlaybackTime()+t),r.setPlaybackTime(r.getPlaybackTime()+t)}},addBufferingTime:function(e){if(0<=a.getBufferingTimestamp()){var t=e-a.getBufferingTimestamp();a.setBufferingTimestamp(-1),a.setBufferingTime(a.getBufferingTime()+t),r.setBufferingTime(r.getBufferingTime()+t)}},getBufferingTime:function(){var e=u;return 0<=a.getBufferingTimestamp()&&(e+=+new Date-a.getBufferingTimestamp()),e},setBufferingTime:function(e){u=e},getPlaybackTime:function(){var e=c;return 0<=a.getPlaybackTimestamp()&&(e+=+new Date-a.getPlaybackTimestamp()),e},setPlaybackTime:function(e){c=e},getStarts:function(){return s},setStarts:function(e){s=e},getPauses:function(){return o},setPauses:function(e){o=e},getRebufferCount:function(){return l},incrementRebufferCount:function(){l++},setRebufferCount:function(e){l=e},didFirstPlayOccurred:function(){return d},setFirstPlayOccurred:function(e){d=e}}),a=new h,n={},r.reset()},o=(function(e){function i(e,t){return a[o]||n(e,t)}function r(){o=-1;for(var e=0;e<=s;e++)if(a.hasOwnProperty(e)){o=e;break}return ns_.StreamSense.activeIndex=o}function n(e,t){return t=t||null,(e=e||null)&&"object"==typeof e&&(t=e,e=null),a[++s]=new ns_.StreamSense(t,e),r(),a[s]}function t(){var e=!1,t=o;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof ns_.StreamSense)for(var n in a)if(a[n]===arguments[0]){t=n;break}return a.hasOwnProperty(t)&&(e=a[t],delete a[t],e.reset(),r()),e}var a={},s=-1,o=-1;ne.extend(e,{activeIndex:o,newInstance:n,new:n,destroyInstance:t,destroy:t,newPlaylist:function(e){return e=e||{},i().setPlaylist(e),i().getPlaylist()},newClip:function(e,t,n){return e=e||{},"number"==typeof t&&(e.ns_st_cn=t),i().setClip(e,n),i().getClip()},notify:function(e,t,n){return void 0!==e&&(n=n||null,t=t||{},i().notify(e,t,n))},setLabels:function(e){void 0!==e&&i().setLabels(e)},getLabels:function(){return i().getLabels()},setPlaylistLabels:function(e){void 0!==e&&i().getPlaylist().setLabels(e)},getPlaylistLabels:function(){return i().getPlaylist().getLabels()},setClipLabels:function(e){void 0!==e&&i().getClip().setLabels(e)},getClipLabels:function(){return i().getClip().getLabels()},resetInstance:function(e){return i().reset(e||{})},resetPlaylist:function(e){return i().getPlaylist().reset(e||{})},resetClip:function(e){return i().getClip().reset(e||{})},viewEvent:function(e){return e=e||{},i().viewNotify(null,e)},customEvent:function(e,t){return 2<arguments.length&&(e=t,t=arguments[2]),e=e||{},"number"==typeof t&&(e.ns_st_po=t),i().customNotify(e,t)},exportState:function(){return i().exportState()},importState:function(e){i().importState(e)}})}(t=function(e,t){function n(e){var t=0;if(null!=z)for(var n=0;n<z.length;n++){var i=z[n],r=i.playingtime;if(!r||e<r){t=i.interval;break}}return t}function g(){r();var e=n(j.getClip().getPlaybackTime());0<e&&(l=setTimeout(i,0<W?W:e));W=0}function v(){r();var e=n(j.getClip().getPlaybackTime());W=e-j.getClip().getPlaybackTime()%e,null!=l&&r()}function _(){Y=W=0}function i(){Y++,M(D(ie.HEART_BEAT,null)),W=0,g()}function r(){null!=l&&(clearTimeout(l),l=null)}function y(){x(),o=setTimeout(a,G)}function a(){M(D(ie.KEEP_ALIVE,null)),$++,y()}function x(){null!=o&&(clearTimeout(o),o=null)}function b(){O==re.PLAYING&&(j.incrementRebufferCount(),j.incrementPauses(),M(D(ie.PAUSE,null)),$++,O=re.PAUSED)}function T(){null!=L&&(clearTimeout(L),L=null)}function u(e){return e==re.PLAYING||e==re.PAUSED}function S(){k&&(clearInterval(k),k=null)}function E(e,t,n){if(S(),P(e))if(n)k=setInterval(function(){E(e,t)},n);else{var i=R(),r=F,a=C(t),s=0<=r?a-r:0;(function(e,t){var n=C(t);if(e==re.PLAYING)j.addPlaybackTime(n),v(),x();else if(e==re.BUFFERING)j.addBufferingTime(n),T();else if(e==re.IDLE){var i=ne.getKeys(j.getClip().getLabels());j.getClip().reset(i)}})(R(),t),d=e,f=C(h=t),m=-1,(p=h).hasOwnProperty("ns_st_po")&&(m=ne.getInteger(p.ns_st_po)),B=m,d==re.PLAYING?(g(),y(),j.getClip().setPlaybackTimestamp(f),A(d)&&(j.getClip().incrementStarts(),j.getStarts()<1&&j.setStarts(1))):d==re.PAUSED?A(d)&&j.incrementPauses():d==re.BUFFERING?(j.getClip().setBufferingTimestamp(f),H&&(T(),U.isPauseOnBufferingEnabled()&&A(re.PAUSED)&&(L=setTimeout(b,q)))):d==re.IDLE&&_(),c=R(),c,I=e,F=+new Date;for(var o=0,l=N.length;o<l;o++)N[o](i,e,t,s);w(t),j.setRegisters(t,e),j.getClip().setRegisters(t,e);var u=D(re.toEventType(e),t);ne.extend(u,t),A(I)&&(M(u),O=I,$++)}var c,d,h,f,p,m}function w(e){var t=e.ns_st_mp;null!=t&&(d=t,delete e.ns_st_mp),null!=(t=e.ns_st_mv)&&(h=t,delete e.ns_st_mv),null!=(t=e.ns_st_ec)&&($=Number(t),delete e.ns_st_ec)}function M(e,t){var n;void 0===t&&(t=!0),t&&(n=e,f=D(null),ne.extend(f,n));var i,r,a,s=U.getPixelURL();if(c){if(i=c.getAppContext(),r=c.getSalt(),a=c.getPixelURL(),null!=i&&null!=r&&0!=r.length&&null!=a&&0!=a.length){var o=K.am,l=K.et,u=o.newApplicationMeasurement(c,l.HIDDEN,e,s);c.getQueue().offer(u)}}else s&&J(function(e,t){for(var n,i=ee.encodeURIComponent||escape,r=[],a=ae.LABELS_ORDER,s=e.split("?"),o=s[0],l=s[1].split("&"),u=0,c=l.length;u<c;u++){var d=l[u].split("="),h=unescape(d[0]),f=unescape(d[1]);h&&(t[h]=f)}var p={};for(u=0,c=a.length;u<c;u++){var m=a[u];t.hasOwnProperty(m)&&(p[m]=!0,r.push(i(m)+"="+i(t[m])))}for(var m in t)p[m]||t.hasOwnProperty(m)&&r.push(i(m)+"="+i(t[m]));return 2048<(n=(n=o+"?"+r.join("&"))+(n.indexOf("&c8=")<0?"&c8="+i(te.title):"")+(n.indexOf("&c7=")<0?"&c7="+i(te.URL):"")+(n.indexOf("&c9=")<0?"&c9="+i(te.referrer):"")).length&&0<n.indexOf("&")&&(last=n.substr(0,2040).lastIndexOf("&"),n=(n.substring(0,last)+"&ns_cut="+i(n.substring(last+1))).substr(0,2048)),n}(s,e))}function A(e){return(e!=re.PAUSED||O!=re.IDLE&&null!=O)&&(e!=re.BUFFERING&&O!=e)}function C(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function P(e){return null!=e&&R()!=e}function R(){return I}function D(){var e,t;t=1==arguments.length?(e=re.toEventType(I),arguments[0]):(e=arguments[0],arguments[1]);var n={};if("undefined"!=typeof document){var i=document;n.c7=i.URL,n.c8=i.title,n.c9=i.referrer}return null!=t&&ne.extend(n,t),n.hasOwnProperty("ns_ts")||(n.ns_ts=String(+new Date)),null!=e&&!n.hasOwnProperty("ns_st_ev")&&(n.ns_st_ev=ie.toString(e)),U.isPersistentLabelsShared()&&c&&ne.extend(n,c.getLabels()),ne.extend(n,U.getLabels()),function(e,t){var n=t||{};if(n.ns_st_ec=String($),!n.hasOwnProperty("ns_st_po")){var i=B,r=C(n);(e==ie.PLAY||e==ie.KEEP_ALIVE||e==ie.HEART_BEAT||null==e&&I==re.PLAYING)&&(i+=r-j.getClip().getPlaybackTimestamp()),n.ns_st_po=ne.getInteger(i)}e==ie.HEART_BEAT&&(n.ns_st_hc=String(Y))}(e,n),j.createLabels(e,n),j.getClip().createLabels(e,n),n.hasOwnProperty("ns_st_mp")||(n.ns_st_mp=d),n.hasOwnProperty("ns_st_mv")||(n.ns_st_mv=h),n.hasOwnProperty("ns_st_ub")||(n.ns_st_ub="0"),n.hasOwnProperty("ns_st_br")||(n.ns_st_br="0"),n.hasOwnProperty("ns_st_pn")||(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),n.hasOwnProperty("ns_st_it")||(n.ns_st_it="c"),n.ns_st_sv=ae.STREAMSENSE_VERSION,n.ns_type="hidden",n}var s,k,I,c,L,o,l,O,d,h,f,N,U=this,p=500,m=null,F=0,B=0,$=0,j=null,V=!0,H=!0,z=ae.DEFAULT_HEARTBEAT_INTERVAL,G=ae.DEFAULT_KEEP_ALIVE_INTERVAL,q=ae.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,W=0,Y=0,X=!1,K={};ne.extend(this,{reset:function(e){j.reset(e),j.setPlaylistCounter(0),j.setPlaylistId(+new Date+"_1"),j.getClip().reset(e),null==e||e.isEmpty()?s={}:ne.filterMap(s,e),$=1,Y=0,v(),_(),x(),T(),S(),I=re.IDLE,F=-1,O=null,d=ae.DEFAULT_PLAYERNAME,h=ae.STREAMSENSE_VERSION,f=null},setPauseOnBufferingInterval:function(e){q=e},getPauseOnBufferingInterval:function(){return q},setKeepAliveInterval:function(e){G=e},getKeepAliveInterval:function(){return G},setHeartbeatIntervals:function(e){z=e},notify:function(){var e,t,n,i,r;t=arguments[0],i=3==arguments.length?(n=arguments[1],arguments[2]):(n={},arguments[1]),e=(r=t)==ie.PLAY?re.PLAYING:r==ie.PAUSE?re.PAUSED:r==ie.BUFFER?re.BUFFERING:r==ie.END?re.IDLE:null;var a,s=ne.extend({},n);if(C(a=s)<0&&(a.ns_ts=String(+new Date)),s.hasOwnProperty("ns_st_po")||(s.ns_st_po=ne.getInteger(i)),t==ie.PLAY||t==ie.PAUSE||t==ie.BUFFER||t==ie.END){var o=+new Date-F;U.isPausePlaySwitchDelayEnabled()&&P(e)&&u(I)&&u(e)&&o<=p?E(e,s,p):E(e,s)}else{var l=D(t,s);ne.extend(l,s),M(l,!1),$++}},getLabels:function(){return s},getState:function(){return I},setLabels:function(e){null!=e&&(null==s?s=e:ne.extend(s,e))},getLabel:function(e){return s[e]},setLabel:function(e,t){null==t?delete s[e]:s[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=ee.decodeURIComponent||unescape,n=e.indexOf("?");if(0<=n){if(n<e.length-1){for(var i=e.substring(n+1).split("&"),r=0,a=i.length;r<a;r++){var s=i[r].split("=");2==s.length?U.setLabel(s[0],t(s[1])):1==s.length&&U.setLabel(ae.PAGE_NAME_LABEL,t(s[0]))}e=e.substring(0,n+1)}}else e+="?";return m=e},getPixelURL:function(){return m||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?m=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?m.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},isPersistentLabelsShared:function(){return V},setPersistentLabelsShared:function(e){V=e},isPauseOnBufferingEnabled:function(){return H},setPauseOnBufferingEnabled:function(e){H=e},isPausePlaySwitchDelayEnabled:function(){return X},setPausePlaySwitchDelayEnabled:function(e){X=e},setPausePlaySwitchDelay:function(e){e&&0<e&&(p=e)},getPausePlaySwitchDelay:function(){return p},setClip:function(e,t){var n=!1;return I==re.IDLE&&(j.getClip().reset(),j.getClip().setLabels(e,null),t&&j.incrementStarts(),n=!0),n},setPlaylist:function(e){var t=!1;return I==re.IDLE&&(j.incrementPlaylistCounter(),j.reset(),j.getClip().reset(),j.setLabels(e,null),t=!0),t},importState:function(e){reset();var t=ne.extend({},e);j.setRegisters(t,null),j.getClip().setRegisters(t,null),w(t),$++},exportState:function(){return f},getVersion:function(){return ae.STREAMSENSE_VERSION},addListener:function(e){N.push(e)},removeListener:function(e){N.splice(ne.indexOf(e,N),1)},getClip:function(){return j.getClip()},getPlaylist:function(){return j},setHttpGet:Q,setHttpPost:Z}),ne.extend(this,{adNotify:function(e,t,n){(t=t||{}).ns_st_ad=1,e>=ie.AD_PLAY&&e<=ie.AD_CLICK&&U.notify(e,t,n)},customNotify:function(e,t){U.notify(ie.CUSTOM,e,t)},viewNotify:function(e,t){(e=e||U.getPixelURL())&&function(e,t){var n=e||"",i=ee.comScore||ee.sitestat||function(e){var t,n,i,r,a,s="comScore=",o=te.cookie,l="",u="indexOf",c="substring",d="length",h=ee.encodeURIComponent||escape;if(o[u](s)+1)for(r=0,a=(i=o.split(";"))[d];r<a;r++)(n=i[r][u](s))+1&&(l="&"+unescape(i[r][c](n+s[d])));2048<(e+="&ns__t="+ +new Date+"&ns_c="+(te.characterSet||te.defaultCharset||"")+l)[d]&&0<e[u]("&")&&(t=e[c](0,2040).lastIndexOf("&"),e=(e[c](0,t)+"&ns_cut="+h(e[c](t+1)))[c](0,2048)),J(e),"undefined"==typeof ns_p&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(void 0!==t){var r=[],a=ee.encodeURIComponent||escape;for(var s in t)t.hasOwnProperty(s)&&r.push(a(s)+"="+a(t[s]));/[\?\&]$/.test(n)||(n+="&"),n+=r.join("&")}i(n)}(e,t)}}),ns_.comScore&&(K=ns_.comScore.exports,c=K.c()),s={},$=1,I=re.IDLE,j=new se,H=!(L=null),l=null,Y=0,_(),X=!1,O=k=o=null,B=0,N=[],U.reset(),e&&U.setLabels(e),t&&U.setPixelURL(t)}),t);return o.AdEvents=s,o.PlayerEvents=ie,o}(),angular.module("PostMessage",["ng"]).run(["$window","$timeout","$rootScope",function(i,e,r){r.$on("$messageOutgoing",function(e,t,n){return null==n&&(n="*"),(r.sender||i.parent).postMessage(t,n)}),angular.element(i).bind("message",function(t){e(function(){var e;(t=t.originalEvent||t)&&t.data&&t.source!==window&&(e=t.data,r.sender=t.source,r.referrer=t.origin,r.$root.$broadcast("$messageIncoming",e))})})}]),angular.module("SRGPlayerCommons",["ng","ngTouch","ngRoute"]).constant("URI",window.URI).constant("S",window.S).constant("moment",window.moment).constant("bowser",window.bowser).constant("Hls",window.Hls).constant("Mousetrap",window.Mousetrap).constant("UserSettingsEvent",{CHANGESWITCHERVALUE:"changeswitchervalue",LEVELVALUE:"levelvalue",SWITCHADVANCEDMENU:"switchadvancedmenu"}).run([function(){}]),angular.module("SRGPlayerCommons").directive("dragging",["$parse","$document","$swipe","$rootScope","device","coordsUtils",function(n,u,c,d,h,f){return{restrict:"A",compile:function(e,t){var l=n(t.dragging,null,!0);return function(t,n){var i=function(e,t,n,i){e.$apply(function(){l(e,{$ratio:t,$ended:n,$canceled:i})})},r=function(){angular.element(u).unbind("mousedown pointerdown mousemove pointermove mouseup pointerup touchstart touchmove touchend touchcancel pointercancel"),d._draggingBinded=!1,d._isDragging=!1},a=function(e){e.preventDefault(),d._draggingBinded||(c.bind(u,{start:function(e){d._isDragging=!0,i(t,f.calculateRatio(e,n),!1,!1)},move:function(e){d._isDragging&&i(t,f.calculateRatio(e,n),!1,!1)},end:function(e){d._isDragging&&(i(t,f.calculateRatio(e,n),!0,!1),r())},cancel:function(e){d._isDragging&&(i(t,void 0,!1,!0),r())}}),d._draggingBinded=!0,d._isDragging=!1)},e=h.isTouchDevice,s=e?["touchmove","touchstart"]:["mousemove","click"],o=e?[]:["mouseleave"];angular.forEach(s,function(e){n.on(e,a)}),angular.forEach(o,function(e){n.on(e,function(e){e.preventDefault(),d._isDragging||r()})})}}}}]),angular.module("SRGPlayerCommons").directive("ellipsis",["$window","$timeout",function(i,r){return{restrict:"A",link:function(e,t){var n=function(){r(function(){for(var e=t.text().trim().split(/\s+/);t[0].scrollHeight>t[0].clientHeight&&0<e.length;)e.pop(),t.html(e.join(" ").replace(/[':,.!]+$/,"")+"&hellip;")})};angular.element(i).bind("resize",n),n()}}}]),angular.module("SRGPlayerCommons").directive("fullscreenRegister",["fullscreenService",function(n){return{restrict:"A",link:function(e,t){n.register(t[0])}}}]),angular.module("SRGPlayerCommons").directive("notification",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{type:"@",onDismiss:"&"},templateUrl:"src/module/srg-player-commons/directive/notification/notification.html",link:function(e){e.dismiss=function(){e.onDismiss({})}}}}),angular.module("SRGPlayerCommons").directive("onAnimationend",["$parse",function(i){return{restrict:"A",compile:function(e,t){var n=i(t.onAnimationend,null,!1);return function(t,e){e.on("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",function(e){t.$apply(function(){n(t,{$event:e})})})}}}}]),angular.module("SRGPlayerCommons").directive("onTransitionend",["$parse",function(i){return{restrict:"A",compile:function(e,t){var n=i(t.onTransitionend,null,!1);return function(t,e){e.on("transitionend webkitTransitionEnd MSTransitionEnd oTransitionEnd",function(e){t.$apply(function(){n(t,{$event:e})})})}}}}]),angular.module("SRGPlayerCommons").directive("removeClickFocus",function(){return{restrict:"A",link:function(e,t,n){t.bind("mousedown",function(e){document.activeElement.blur(),e.preventDefault()})}}}),angular.module("SRGPlayerCommons").directive("scrolling",["$parse",function(i){return{restrict:"A",compile:function(e,t){var n=i(t.scrolling,null,!1);return function(t,e){e.on("scroll",function(e){t.$apply(function(){n(t,{$event:e})})})}}}}]),angular.module("SRGPlayerCommons").directive("stopBtnPropagation",["Mousetrap",function(n){return{restrict:"A",link:function(e,t){new n(t[0]).bind(["enter","space"],function(e){e.stopPropagation()})}}}]),angular.module("SRGPlayerCommons").directive("svgBg",function(){return{restrict:"E",replace:!0,scope:{icon:"@"},templateUrl:"src/module/srg-player-commons/directive/svg-bg/svg-bg.html"}}),angular.module("SRGPlayerCommons").directive("svgIcon",function(){return{restrict:"E",replace:!0,scope:{icon:"@"},templateUrl:"src/module/srg-player-commons/directive/svg-icon/svg-icon.html"}}),angular.module("SRGPlayerCommons").directive("tap",["$log","$parse",function(e,o){return{restrict:"A",link:function(t,e,n){var i,r,a,s=o(n.tap);e.on("touchstart",function(e){i=Date.now(),a=setInterval(function(){130<(r=Date.now()-i)&&clearInterval(a)},10)}),e.on("touchend",function(e){if(a&&clearInterval(a),r<120){t.$apply(function(){s(t)})}i=r=0})}}}]),angular.module("SRGPlayerCommons").directive("toggleSwitch",["$rootScope","$timeout","UserSettingsEvent",function(e,t,n){return{restrict:"E",replace:!0,scope:{value:"="},templateUrl:"src/module/srg-player-commons/directive/toggle-switch/toggle-switch.html",link:function(e,t){}}}]),angular.module("SRGPlayerCommons").directive("tooltipAction",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{title:"@",icon:"@"},templateUrl:"src/module/srg-player-commons/directive/tooltip-action/tooltip-action.html"}}),angular.module("SRGPlayerCommons").directive("tooltipLabel",function(){return{restrict:"E",replace:!0,scope:{label:"@",iconClass:"@",iconResource:"@"},templateUrl:"src/module/srg-player-commons/directive/tooltip-label/tooltip-label.html",link:function(e){}}}),angular.module("SRGPlayerCommons").directive("tooltipMenu",["$filter",function(i){return{restrict:"E",replace:!0,scope:{items:"=",onItemSelected:"&"},templateUrl:"src/module/srg-player-commons/directive/tooltip-menu/tooltip-menu.html",link:function(n,e){n.select=function(e,t){t.selected||(n.onItemSelected({item:t}),angular.forEach(i("filter")(n.items,{selected:!0},!0),function(e){e.selected=!1}),t.selected=!0)}}}}]),angular.module("SRGPlayerCommons").directive("tooltip",["$window","$timeout","device","$rootScope","tooltipService","srgMediaService",function(l,r,a,u,c,e){return{restrict:"E",replace:!0,transclude:!0,scope:{pgTooltip:"@",followMouse:"@",stopAnimation:"@",alwaysOn:"@",hide:"="},templateUrl:"src/module/srg-player-commons/directive/tooltip/tooltip.html",link:function(s,o,e,t,n){s.isVisible="true"===s.alwaysOn,s.controlBarHide=!1,s.isRightOverflow=!1,s.isLeftOverflow=!1,s.isSubMenuOpen=!1,s.isTooltipAnimated=!1,"true"===s.followMouse?o.parent().on("mousemove",function(e){var t=o.find(".tooltip")[0].getBoundingClientRect(),n=o[0].getBoundingClientRect(),i=o.offset().left,r=l.innerWidth-(i+o.outerWidth());if(0<t.width){var a=n.width-e.pageX+i;a<=0&&(a=0),s.xPosition=a,s.isLeftOverflow=e.pageX-i-t.width/2<=0,s.isRightOverflow=0<=e.pageX+r+t.width/2-l.innerWidth,s.isVisible=!0}}):s.$watch(function(){return s.isVisible&&!s.hide},function(){r(function(){if(s.isVisible&&!s.hide){var e=o.find(".tooltip")[0].getBoundingClientRect();s.isRightOverflow||(s.isRightOverflow=e.left+e.width>=l.innerWidth,s.isLeftOverflow=!s.isRightOverflow&&s.isLeftOverflow),s.isLeftOverflow||(s.isLeftOverflow=e.left<=0,s.isRightOverflow=!s.isLeftOverflow&&s.isRightOverflow)}})});var i=u.$on("USERSETTINGS_TOGGLED",function(e,t){(s.isSubMenuOpen=t)?(s.isVisible="true"===s.alwaysOn,c.setToolTipState(!0)):s.isSubMenuOpen||(s.isVisible="true"===s.alwaysOn,c.setToolTipState(!1))});a.isTouchDevice||"true"===s.followMouse||(o.parent().on("mouseenter",function(){s.isSubMenuOpen||(s.isVisible="true",c.setToolTipState(!0))}),o.parent().on("mouseleave",function(){s.isSubMenuOpen||s.followScrubber||(s.isVisible="false"===s.alwaysOn,c.setToolTipState(!1))})),s.getToolTipState=function(){return c.getToolTipState()},angular.element(l).bind("resize",function(){s.isRightOverflow=!1,s.isLeftOverflow=!1,s.isVisible="true"===s.alwaysOn}),s.stopPropagation=function(e){e.stopPropagation()},s.$on("$destroy",function(){i&&i()})}}}]),angular.module("SRGPlayerCommons").directive("touching",["$parse",function(n){return{restrict:"A",compile:function(e,t){var i=n(t.touching,null,!0);return function(t,n){angular.forEach(["touchmove","touchend","touchcancel","touchstart"],function(e){n.on(e,function(e){t.$apply(function(){i(t,{$event:e})})})})}}}}]),angular.module("SRGPlayerCommons").filter("calendar",["moment",function(t){return function(e){return e?t.unix(e).format("HH:mm:ss"):"00:00:00"}}]),angular.module("SRGPlayerCommons").filter("playerTime",["moment",function(s){var o=function(e){return("00"+Math.floor(e)).slice(-2)};return function(e){if(e){var t=Number(e);if(t===-1/0||t===1/0||isNaN(t))return"--:--:--";var n=s.duration(t||0,"seconds"),i=n.seconds(),r=n.minutes(),a=Math.floor(n.asHours());return(0<a?a+":":"")+o(r)+":"+o(i)}return"00:00"}}]),angular.module("SRGPlayerCommons").filter("range",function(){return function(e){var t,n=[];for(t=0;t<e;t++)n.push(t);return n}}),angular.module("SRGPlayerCommons").filter("split",function(){return function(e,t){return e&&"string"==typeof e?e.split(t):[]}}),angular.module("SRGPlayerCommons").filter("thumbnail",function(){return function(e,t,n){return void 0!==n&&(e=e.replace("/16x9","/"+n)),e+"/scale/width/"+t}}),angular.module("SRGPlayerCommons").filter("trim",function(){return function(e){return e&&"string"==typeof e?e.trim():e}}),angular.module("SRGPlayerCommons").factory("AssetParser",["$log","moment","URI","URN",function(e,t,s,n){function i(){}return i.prototype={_qMapping:{HD:"HD",MD:"MD",SD:"SD",HQ:"HD",MQ:"MD",LQ:"SD"},_parseDate:function(e){return e?t(e).toDate():void 0},_parseURN:function(e){return e?new n(e):void 0},_uriToRelativeReference:function(e){return e?new s(e).protocol(null).toString():void 0},_addMarkInMarkOutToSource:function(e,t,n,i){var r={},a=new s(e);return i&&a.removeSearch("dw"),void 0!==t&&(r.start=t),void 0!==n&&(r.end=n),r!=={}?a.addSearch(r).toString():a.toString()},_hlsQualitySorting:function(e){var t=e.match(/((q\d{2}|[lmh]q1|hd1),)/g);if(t){var n=t.join(""),i=t.indexOf("q40,");-1===i&&(i=Math.ceil(t.length/2)),t.unshift(t.splice(i,1)[0]),e=e.replace(n,t.join(""))}return e},_resolveQuality:function(e){return this._qMapping[e]},parse:function(e){return{}}},Object.defineProperties(i.prototype,{}),i}]),angular.module("SRGPlayerCommons").factory("AssetProducer",function(){function e(){}return e.prototype={produce:function(){return{}}},Object.defineProperties(e.prototype,{}),e}),angular.module("SRGPlayerCommons").factory("AssetProvider",["$http","$log","$q","moment",function(e,o,t,l){function n(e,t){this._parser=e,this._urlBuilder=t}return n.prototype={requestAsset:function(){var r=t.defer(),a=l(),s=this._urlBuilder.build.apply(this._urlBuilder,arguments);return e.get(s).then(function(t){t.data;var n=t.config;try{var e=this._parser.parse(t.data);r.resolve({data:e,nbrRetries:n.nbrRetries,elapsed:l()-a,url:s,httpStatusCode:t.status})}catch(e){o.error(e),r.reject({errorCode:e.errorCode,nbrRetries:n.nbrRetries,elapsed:l()-a,url:s,httpStatusCode:t.status})}}.bind(this),function(e){var t=e.status,n=e.config,i=-1===t?"UNKNOWN":t;o.error("An error occurred while retrieving asset."),o.error(n.method+": "+n.url+" "+t),r.reject({errorCode:i,nbrRetries:n.nbrRetries,elapsed:l()-a,url:s,httpStatusCode:e.status})}.bind(this)),r.promise}},Object.defineProperties(n.prototype,{}),n}]),angular.module("SRGPlayerCommons").factory("AssetSender",["$http",function(e){function t(e,t){this._urlBuilder=t,this._producer=e}return t.prototype={send:function(){return e({method:"POST",headers:{"Content-Type":"application/json"},data:this._producer.produce.apply(this._producer,arguments),url:this._urlBuilder.build.apply(this._urlBuilder,arguments)})}},Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerCommons").factory("browserLocale",function(){return{locale:navigator.languages?navigator.languages[0]:navigator.userLanguage?navigator.userLanguage:navigator.language}}),angular.module("SRGPlayerCommons").factory("coordsUtils",["fullscreenService","device","$window",function(a,s,e){return{calculateRatio:function(e,t){return{x:this.calculateXRatio(e.x,t),y:this.calculateYRatio(e.y,t)}},calculateYRatio:function(e,t){var n=t.offset().top,i=s.useClientWidthAndHeight&&a.isFullscreen()?t[0].clientHeight:t.innerHeight(),r=e-n;return(r=i<(r=r<0?0:r)?i:r)/i},calculateXRatio:function(e,t){var n=t.offset().left,i=s.useClientWidthAndHeight&&a.isFullscreen()?t[0].clientWidth:t.innerWidth(),r=e-n;return(r=i<(r=r<0?0:r)?i:r)/i}}}]),angular.module("SRGPlayerCommons").factory("device",["$window","bowser","S",function(e,t,n){function i(){}return Object.defineProperties(i.prototype,{isNotSupported:{configurable:!0,get:function(){return t.msie&&t.version<=10}},isOutdated:{configurable:!0,get:function(){return t.safari&&t.version<7&&!t.ios||this.isDesktop&&t.firefox&&t.version<42||this.isDesktop&&t.chrome&&t.version<50}},supportsPlaysInline:{configurable:!0,get:function(){return!((t.iphone||t.ipod)&&t.version<10)}},isDesktop:{configurable:!0,get:function(){return!this.isTouchDevice}},isTouchDevice:{configurable:!0,get:function(){return t.android||t.ios||t.mobile||t.tablet||t.windowsphone||t.webos||t.firefoxos||t.safari&&13<=t.version&&window.videojs.browser.TOUCH_ENABLED}},isTablet:{configurable:!0,get:function(){return t.tablet&&this.isTouchDevice}},hasVolumeControls:{configurable:!0,get:function(){return!this.isTouchDevice&&280<e.innerWidth}},hasAutoplay:{configurable:!0,get:function(){return!this.isTouchDevice&&!t.safari}},hasAirplay:{configurable:!0,get:function(){return!!e.WebKitPlaybackTargetAvailabilityEvent}},useNativeFullscreen:{configurable:!0,get:function(){return t.ios}},supportsBufferingProgress:{configurable:!0,get:function(){return!t.android}},supportsDVR:{configurable:!0,get:function(){return this.supportsNativeHLSDVR||this.supportsMSEHLS}},supportsNativeHLS:{configurable:!0,get:function(){return t.ios||t.safari&&6<=t.version||t.samsungBrowser||t.android&&!(t.chrome||t.firefox)}},supportsMSEHLS:{configurable:!0,get:function(){return!(this.supportsNativeHLS||this.isDesktop&&t.chrome&&t.version<34||this.isDesktop&&t.firefox&&t.version<42||this.isDesktop&&t.msie&&11<=t.version&&this.isWindowsSeven)}},supportsNativeHLSDVR:{configurable:!0,get:function(){return this.supportsNativeHLS&&!t.samsungBrowser&&!t.android}},supportsFlash:{configurable:!0,get:function(){return!(this.isTouchDevice||t.safari&&6<=t.version)}},supportsVR:{configurable:!0,get:function(){return t.android||t.ios&&11<=t.version}},supports360:{configurable:!0,get:function(){return!(t.safari&&t.version<12||t.msie&&!n(e.navigator.userAgent).contains("Windows NT 10"))}},hasLimitiedMSESupport:{configurable:!0,get:function(){return t.firefox&&t.version<50||t.opera}},hasPoorAnimationPerformance:{configurable:!0,get:function(){return!t.ipad&&this.isTouchDevice}},useClientWidthAndHeight:{configurable:!0,get:function(){return t.msie}},hasPipMode:{configurable:!0,get:function(){return t.safari&&10<=t.version&&!t.mobile}},supportsAudioTracks:{configurable:!0,get:function(){return!t.msie}},supportsDRM:{configurable:!0,get:function(){return Boolean(t.msedge||!this.isTouchDevice&&t.firefox&&47<t.version||!t.ios&&t.chrome&&34<t.version&&!this.isChromium||!this.isTouchDevice&&t.safari&&8<t.version||!this.isTouchDevice&&t.opera&&55<t.version&&!t.linux||t.ios&&t.safari&&(11<t.version||11===parseFloat(t.version)&&11.2<=parseFloat(t.osversion.substr(0,4)))||t.safari&&13<=t.version&&window.videojs.browser.TOUCH_ENABLED)}},isWindowsSeven:{configurable:!0,get:function(){return n(e.navigator.userAgent).contains("Windows NT 6.1")}},isChromium:{configurable:!0,get:function(){for(var e=0,t="Chromium".length;e<navigator.plugins.length;e++)if(null!=navigator.plugins[e].name&&"Chromium"===navigator.plugins[e].name.substr(0,t))return!0;return!1}},isWindowsSevenIE11:{configurable:!0,get:function(){return t.msie&&"11.0"===t.version&&"7"===t.osversion}},isIpad:{configurable:!0,get:function(){return window.videojs.browser.IS_IPAD}},isIpadOS:{configurable:!0,get:function(){return t.safari&&13<=t.version&&window.videojs.browser.TOUCH_ENABLED}}}),new i}]),angular.module("SRGPlayerCommons").service("displayTimerUtils",function(){var t;this.getDisplayTimer=function(){return t},this.setDisplayTimer=function(e){t=e}}),angular.module("SRGPlayerCommons").factory("fullscreenService",["$rootScope","device",function(e,t){var n=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,r=n.length,a={};i<r;i++)if((e=n[i])&&e[1]in document){for(i=0,t=e.length;i<t;i++)a[n[0][i]]=e[i];return a}return!1}();if(t.useNativeFullscreen)return{register:function(e){},toggleFullscreen:function(){angular.element(document).find("video")[0].webkitEnterFullscreen()},isFullscreen:function(){return!1},isFullscreenEnabled:function(){return!0}};var i={ENTER_FULLSCREEN:"srg-enter-fullscreen",EXIT_FULLSCREEN:"srg-exit-fullscreen",_elmt:void 0,register:function(e){this._elmt=e},toggleFullscreen:function(){this.isFullscreen()?document[n.exitFullscreen]():this._elmt[n.requestFullscreen]()},isFullscreen:function(){return this.isFullscreenEnabled()&&Boolean(document[n.fullscreenElement])},isFullscreenEnabled:function(){return Boolean(document[n.fullscreenEnabled])}};return angular.element(document).on(n.fullscreenchange,function(){e.$apply(function(){e.$broadcast(i.isFullscreen()?i.ENTER_FULLSCREEN:i.EXIT_FULLSCREEN)})}),i}]),angular.module("SRGPlayerCommons").factory("platformResolver",["$filter","bowser",function(e,t){var n=[{key:"android mobile",value:t.android&&t.mobile},{key:"android tablet",value:t.android&&t.tablet},{key:"android",value:t.android&&!t.mobile&&!t.tablet},{key:"ios iphone",value:t.ios&&t.iphone},{key:"ios ipad",value:t.ios&&t.ipad},{key:"ios ipod",value:t.ios&&t.ipod},{key:"windows mobile",value:t.windowsphone&&t.mobile},{key:"windows tablet",value:t.windowsphone&&t.tablet},{key:"ios",value:t.ios&&!t.iphone&&!t.ipad&&!t.ipod},{key:"mac",value:t.mac&&!t.mobile&&!t.tablet},{key:"windows",value:t.windows&&!t.mobile&&!t.tablet},{key:"linux",value:t.linux&&!t.mobile&&!t.tablet}],i=e("filter")(n,{value:!0},!0),r=i&&0<i.length?i[0].key:"other",a={name:t.name&&0<t.name.length?t.name:"unknown",version:t.version&&0<t.version.length?t.version:"unknown"};return{platform:function(){return r},browser:function(){return a}}}]),angular.module("SRGPlayerCommons").factory("playerParams",["$routeParams","URN",function(e,t){function n(){}return n.prototype={toBoolean_:function(e){return!0===e||"true"===e||"1"===e},toNumber_:function(e){var t=Number(e);return t&&!isNaN(t)&&isFinite(t)?t:0}},Object.defineProperties(n.prototype,{autoplay:{configurable:!0,get:function(){return this.toBoolean_(e.autoplay)}},start:{configurable:!0,get:function(){return this.toNumber_(e.start||"0")}},preload:{configurable:!0,get:function(){return e.preload||"auto"}},hideEndscreen:{configurable:!0,get:function(){return this.toBoolean_(e.hideendscreen)}},hideSegments:{configurable:!0,get:function(){return this.toBoolean_(e.hidesegments)}},outsideSegments:{configurable:!0,get:function(){return this.toBoolean_(e.outsidesegments)}},debug:{configurable:!0,get:function(){return this.toBoolean_(e.debug)}},locale:{configurable:!0,get:function(){return e.locale}},switchToFull:{configurable:!0,get:function(){return this.toBoolean_(e.stf)}},urn:{configurable:!0,get:function(){return this.urn_&&this.urn_.str===e.urn||(this.urn_=new t(e.urn)),this.urn_}},rawurn:{configurable:!0,get:function(){return e.urn}},bu:{configurable:!0,get:function(){return e.bu||this.urn.bu}},mode:{configurable:!0,get:function(){return e.mode||"default"}},retryCount:{configurable:!0,get:function(){return this.toNumber_(e.r||"0")}},recommendation_id:{configurable:!0,get:function(){return e.recommendation_id}},stats:{configurable:!0,get:function(){return!(void 0!==e.stats&&!this.toBoolean_(e.stats))}}}),new n}]),angular.module("SRGPlayerCommons").factory("ratioUtils",function(){return{getRatio:function(e,t){var n=e/t,i=1-n/(16/9),r=1-n/(4/3);return Math.abs(i)<=Math.abs(r)?"16x9":"4x3"}}}),angular.module("SRGPlayerCommons").factory("SourceAsset",["URI",function(r){function a(e,t,n,i){n.enforceSSL?this._src=new r(e).protocol("https").toString():this._src=e,i&&(this._keySystems={},angular.forEach(i,function(e){var t=a.DRM_VENDORS[e.type];t===a.DRM_VENDORS.FAIRPLAY?this._keySystems[t]={certificateUri:e.certificateUrl,licenseUri:e.licenseUrl}:this._keySystems[t]=e.licenseUrl}.bind(this))),this._mimeType=t,this._options=n}return a.prototype={},Object.defineProperties(a.prototype,{src:{get:function(){return this._src}},mimeType:{get:function(){return this._mimeType}},options:{get:function(){return this._options}}}),a.MIME_TYPES={HDS:"application/adobe-f4m",HLS:"application/x-mpegURL",DASH:"application/dash+xml",MP3:"audio/mpeg",MP4:"video/mp4",AAC:'audio/mp4; codecs="mp4a.40.2"',OGG:'audio/ogg; codecs="vorbis"'},a.DRM_VENDORS={WIDEVINE:"com.widevine.alpha",FAIRPLAY:"com.apple.fps.1_0",PLAYREADY:"com.microsoft.playready"},a}]),angular.module("SRGPlayerCommons").service("tooltipService",["$timeout",function(t){var n,i=!1;this.setToolTipState=function(e){n&&t.cancel(n),e||(n=t(function(){i=!1,n=void 0},500)),i=e},this.getToolTipState=function(){return i}}]),angular.module("SRGPlayerCommons").factory("UrlBuilder",["URI",function(n){function e(e){this._base=e}return e.prototype={_buildPath:function(){return"/"},_enforceSSL:function(){return!1},build:function(){var e=this._buildPath.apply(this,arguments),t=this._enforceSSL.apply(this,arguments);return new n(this._base+e).protocol(t?"https":null).toString()}},Object.defineProperties(e.prototype,{}),e}]),angular.module("SRGPlayerCommons").factory("URN",["S",function(n){var i={srf:"de-CH",swi:"en",rts:"fr-CH",rsi:"it-CH",rtr:"rm-CH"};function e(e){var t;if(n(e).contains("swisstxt")&&n(e).contains("clip")?(t=e.split(":"))&&(this._str=e,this._assetType=t[2],this._bu=t[4],this._id=t[5],this._language=i[this._bu]||"en",this._livecenter=!1):n(e).contains("swisstxt")?(t=/^urn:swisstxt:(?:[^:]+:)?(video|audio):(srf|rts|rsi|rtr|swi):([^:]+)$/.exec(e))&&(this._str=e,this._assetType=t[1],this._bu=t[2],this._id=t[3],this._language=i[this._bu]||"en",this._livecenter=!0):(t=/^urn:(srf|rts|rsi|rtr|swi):(?:[^:]+:)?(video|audio):([^:]+)$/.exec(e))&&(this._str=e,this._bu=t[1],this._assetType=t[2],this._id=t[3],this._language=i[this._bu]||"en",this._livecenter=!1),null==t)throw new Error("String: "+e+" does not match URN format.")}return e.prototype={},Object.defineProperties(e.prototype,{str:{get:function(){return this._str}},bu:{get:function(){return this._bu}},assetType:{get:function(){return this._assetType}},id:{get:function(){return this._id}},language:{get:function(){return this._language}},livecenter:{get:function(){return this._livecenter}}}),e}]),angular.module("SRGPlayerCommons").factory("UUID",function(){function e(){this._uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}return e.prototype={toString:function(){return this._uuid}},e}),angular.module("SRGPlayerDatasource",["ng","SRGPlayerCommons"]).constant("S",window.S).constant("moment",window.moment).constant("bowser",window.bowser).run([function(){}]),angular.module("SRGPlayerDatasource").factory("AssetV1Parser",["$filter","$location","S","moment","AssetParser","SourceAsset",function(l,h,f,u,e,p){var c={srf:"vom",swi:"on",rts:"du",rsi:"di",rtr:"da"};function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{_parseShowOrRubric:function(e,t){var n={},i=e[t];return i&&(n.id=i.id,n.title=i.title,n.description=i.description),n},_parseSegments:function(e,t){var n,i={segments:[]},r=e.Assets,a=r?r.Video||r.Audio:[];return i.hasDisplayableSegments=!1,a&&(angular.forEach(a,function(e){var t={};t=angular.extend(t,this._parseAssetsMetadata(e)),t=angular.extend(t,this._parseRoot(e)),t=angular.extend(t,this._parseImage(e)),t=angular.extend(t,this._parseRelatedContents(e)),!n&&t.isFull&&(n=t.urn),i.hasDisplayableSegments=i.hasDisplayableSegments||t.displayable&&!t.isFull,i.segments.push(t)}.bind(this)),angular.forEach(i.segments,function(e){e.fullLengthUrn=n}),i.fullLengthUrn=n&&n.id!==t.urn.id?n:void 0),i},_parseTopics:function(e){var n={topics:[]},t=e.Topics;return t&&angular.forEach(t,function(e){var t=e[0].Topic;n.topics.push(t)}.bind(this)),n},_parseChannels:function(e){var n={channels:[]},t=e.Channels;if(t){var i=t.Channel;angular.forEach(i,function(e){var t=e.id;n.channels.push(t)}.bind(this))}return n},_parseAssetSetMetadatas:function(e){var t={};return t.id=e.id,t.title=e.title,t.assetGroupId=e.assetGroupId,t},_parseAssetSet:function(e,t){var n={},i=e.AssetSet;return i&&(n.assetSet=this._parseAssetSetMetadatas(i),n.show=this._parseShowOrRubric(i,"Show"),n.rubric=this._parseShowOrRubric(i,"Rubric"),n=angular.extend(n,this._parseSegments(i,t)),(n=angular.extend(n,this._parseChannels(i))).publishedDate=this._parseDate(i.publishedDate)),n},_parseMetadataAnalytics:function(e){var t={},n=l("filter")(e.segments,{isFull:!0},!0),i=l("filter")(e.segments,{displayable:!0,isFull:!1},!0),r=0<n.length?n[0].duration:e.duration,a=e.publishedDate||e.creationDate,s=e.urn.assetType,o=(!e.isFull&&e.isLive,(e.show.title||e.rubric.title)+" "+(c[e.urn.bu]||"on")+" "+u(a).format("DD.MM.YYYY"));return t.ns_st_tp=!e.isLive&&i.length?i.length+1:1,t.ns_st_el=e.isLive?0:Math.floor(u.duration(r,"seconds").asMilliseconds()),t.ns_st_pr=e.isLive?e.assetSet.title:o,t.ns_st_ty=s.charAt(0).toUpperCase()+s.slice(1),t.ns_st_dt=u(a).format("YYYY-MM-DD"),t.ns_st_li=e.isLive?1:0,t.srg_mgeobl=e.isGeoblocked,t.srg_unit_c=e.urn.bu.toUpperCase(),t},_parseAssetSetAnalyticsData:function(e){var t={};return e.assetSet&&(t.srg_pr_id=e.assetSet.id,t.srg_plid=e.assetSet.assetGroupId),t},_parseAnalyticData:function(e){var i={},t=e.AnalyticsData,n=t?t.Entry:void 0;return n&&angular.forEach(n,function(e){var t=e["@key"],n=e["@value"];i[t]=n}),i},_parseStats:function(e,t){var n={},i={};return i=angular.extend(i,this._parseMetadataAnalytics(t)),i=angular.extend(i,this._parseAssetSetAnalyticsData(t)),i=angular.extend(i,this._parseAnalyticData(e)),n.analytics=i,n},_parseImage:function(e){var t={},n=e.Image,i=n?n.ImageRepresentations:void 0,r=i?i.ImageRepresentation:void 0;return r&&0<r.length&&(t.imageSrc=this._uriToRelativeReference(r[0].url)),t},_parseAssetsMetadata:function(e){var t={},n=e.AssetMetadatas,i=n?n.AssetMetadata:void 0;if(i&&0<i.length){var r=i[0];t.id=r.id,t.modificationDate=this._parseDate(r.modifiedDate),t.creationDate=this._parseDate(r.createdDate),t.title=r.title,t.description=r.description}return t},_parseEpisode:function(e){var t={};return e&&((t=e.id).title=e.AssetSet?e.AssetSet.title:void 0),t},_parseEpisodes:function(e){var t={},n=function(e){var t;return e&&(t={},(t=e.id).title=e.AssetSet?e.AssetSet.title:void 0),t};return t.previous=n(e.Previous),t.next=n(e.Next),t},_parseSubtitles:function(e,t){var n={},i=e.Subtitles;if(i&&i.TTMLUrl){var r=this._uriToRelativeReference(i.TTMLUrl);n.subtitles=[{src:r,mimeType:f(r).endsWith(".webvtt")?"text/vtt":"application/ttml+xml",lang:t.urn.language.slice(0,2)}]}return n},_parsePlaylists:function(e,u){var c={sources:[]},t=e.Playlists;if(t){var n=t.Playlist;if(c.isLive="live"===t["@availability"].toLowerCase(),n){var d=0<l("filter")(n,{"@protocol":"HTTPS"},!0).length;angular.forEach(n,function(s){var o=s["@protocol"],l=(s["@segmentation"],"HTTP-HLS-DVR"===o||"HTTP-HDS-DVR"===o);angular.forEach(s.url,function(e){var t,n=e.text,i={quality:this._resolveQuality(e["@quality"]),isDVR:l,isLive:c.isLive,duration:u.duration,tokenAuthentication:!1,playerVerification:!1};switch(s["@protocol"]){case"HTTP-HLS-DVR":case"HTTP-HLS":n=this._hlsQualitySorting(n),t=p.MIME_TYPES.HLS,i.tokenAuthentication=!0,i.enforceSSL=!i.isLive;break;case"HTTP-HDS":t=p.MIME_TYPES.HDS,i.tokenAuthentication=!0,i.playerVerififcation=!0;break;case"RTMP":var r;n=n.replace(/\.flv$/,""),t=(r=/\/([a-z0-9]+):/.exec(n))?(n=n.replace(r[0],"/&"+r[1]+":"),"rtmp/"+r[1]):"rtmp/flv",i.isRTMP=!0,i.enforceSSL=!1;break;case"HTTPS":"https"===h.protocol()&&(i.enforceSSL=!0);case"HTTP":case"M3U":if("HTTP"!==o||!d){var a=e["@encoding"];if(!f(n).endsWith(".m3u")&&a)switch(a.toUpperCase()){case"MP3":t=p.MIME_TYPES.MP3;break;case"AAC":case"AAC_HE_V1":t=p.MIME_TYPES.AAC;break;case"OGG":t=p.MIME_TYPES.OGG;break;case"MP4":t=p.MIME_TYPES.MP4}}}u&&!c.isLive&&"LOGICAL"===s["@segmentation"]&&(n=this._addMarkInMarkOutToSource(n,u.markIn,u.markOut)),t&&c.sources.push(new p(n,t,i))}.bind(this))}.bind(this))}}return c},_parseBlocked:function(e){var t={},n=e.block?e.block.toUpperCase():void 0;return t.isGeoblocked=!!e.staticGeoBlock,t.block={isBlocked:!!e.block,reason:n},t},_parseRelatedContents:function(e){var n={related:[]},t=e.RelatedContents,i=t?t.RelatedContent:void 0;return i&&0<i.length&&angular.forEach(i,function(e){var t={};t.id=e.id,t.url=e.url,t.title=e.title,t.description=e.description,n.related.push(t)}.bind(this)),n},_parseRoot:function(e){var t={};return t.id=e.id,t.modificationDate=this._parseDate(e.modifiedDate),t.creationDate=this._parseDate(e.createdDate),t.expireDate=this._parseDate(e.validTo),t.urn=this._parseURN(e.urn),t.duration=u.duration(e.duration).asSeconds(),t.markIn=u.duration(e.markIn).asSeconds(),t.markOut=u.duration(e.markOut).asSeconds(),t.displayable=!!e.displayable,t.isFull=!!e.fullLength,t.assetSubSetId=e.assetSubSetId,t.position=e.position,t=angular.extend(t,this._parseBlocked(e))}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("AssetV2Parser",["AssetParser",function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{_parseShow:function(e){var t={},n=e.show;return n&&(t.show={},t.show.id=n.id,t.show.title=n.title,t.show.imageSrc=this._uriToRelativeReference(n.imageUrl)),t}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("AudioVideoV1Parser",["$filter","AssetV1Parser",function(r,e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{parse:function(e){var t,n=e.Video||e.Audio,i={};return i=angular.extend(i,this._parseAssetsMetadata(n)),t=(i=angular.extend(i,this._parseRoot(n))).urn,i=angular.extend(i,this._parsePlaylists(n,i)),i=angular.extend(i,this._parseSubtitles(n,i)),i=angular.extend(i,this._parseEpisodes(n)),i=angular.extend(i,this._parseImage(n)),i=angular.extend(i,this._parseAssetSet(n,i)),i=angular.extend(i,this._parseTopics(n)),i=angular.extend(i,this._parseRelatedContents(n)),(i=angular.extend(i,this._parseStats(n,i))).isLive?(i.segments=[],i.hasDisplayableSegments=!1):i.segments&&(i.segments=r("filter")(i.segments,{urn:{assetType:t.assetType}},!0)),i}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("AudioVideoV1UrlBuilder",["UrlBuilder","bowser",function(e,t){function n(){e.apply(this,arguments)}return n.prototype=Object.create(e.prototype),angular.extend(n.prototype,{_enforceSSL:function(e){return t.chrome&&"video"===e.assetType},_buildPath:function(e){return"/integrationlayer/1.0/ue/"+[e.bu,e.assetType,"play",e.id].join("/")+".json"}}),Object.defineProperties(n.prototype,{}),n}]),angular.module("SRGPlayerDatasource").factory("AudioVideoV2Parser",["$filter","$location","moment","S","AssetV2Parser","SourceAsset","device",function(h,e,a,s,t,f,p){function n(){t.apply(this,arguments)}return n.prototype=Object.create(t.prototype),angular.extend(n.prototype,{parse:function(e){var t={},n=this._parseURN(e.chapterUrn),i=this._parseURN(e.segmentUrn);if(t.urn=i||n,t.urn){var r=e.chapterList,a=h("filter")(r,{id:n.id})[0],s=h("filter")(r,{id:t.urn.id})[0],o=(a.segmentList||[]).concat(h("filter")(r,{urn:"!"+a.urn},!0)),l=s||(o?h("filter")(o,{id:t.urn.id})[0]:void 0),u=l||a;l&&!l.validFrom&&(l.validFrom=a.validFrom),t.id=t.urn.id,t=angular.extend(t,this._parseRoot(u)),t=angular.extend(t,this._parseResourceList(a,t)),t=angular.extend(t,this._parseShow(e)),t=angular.extend(t,this._parsePublishDate(e)),t=angular.extend(t,this._parseChannels(e)),t=angular.extend(t,this._parseSegments(a,o)),t=angular.extend(t,this._parseRelatedContents(u)),t=angular.extend(t,this._parseAnalyticsData(e,a||{},l||{})),t=angular.extend(t,this._parseAnalyticsMetadata(e,a||{},l||{}))}return t},_parseRoot:function(e){var t={},n=void 0!==e.fullLengthMarkIn?e.fullLengthMarkIn:e.markIn,i=void 0!==e.fullLengthMarkOut?e.fullLengthMarkOut:e.markOut,r=e.fullLengthUrn?this._parseURN(e.fullLengthUrn):void 0;return t.id=e.id,t.type=e.type,t.urn=this._parseURN(e.urn),t.title=e.title,t.description=e.description,t.audioDescription=e.mediaDescription,t.duration=a.duration(e.duration).asSeconds(),t.validFrom=a.duration(a.utc(e.validFrom).valueOf()).asSeconds(),t.validTo=void 0!==e.validTo&&""!==e.validTo?a.duration(a.utc(e.validTo).valueOf()).asSeconds():void 0,t.markIn=a.duration(n).asSeconds(),t.markOut=a.duration(i).asSeconds(),t.position=e.position,t.playableAbroad=void 0===e.playableAbroad?null:e.playableAbroad,t.imageSrc=this._uriToRelativeReference(e.imageUrl),t.imageCopyright=void 0!==e.imageCopyright?e.imageCopyright:void 0,t.subtitles=this._parseSubtitles(e,t.urn),t.isLive="LIVESTREAM"===e.type||"SCHEDULED_LIVESTREAM"===e.type,t.isSecondHand="EXTRACT"===e.type,r&&r.assetType===t.urn.assetType?(t.fullLengthUrn=r,t.isFull=!1):t.isFull="CLIP"!==e.type,t.block={isBlocked:!!e.blockReason,reason:e.blockReason},t.displayable=e.displayable&&"audio"!==t.urn.assetType,t.eventData=e.eventData,t},_parseSubtitles:function(e,n){var i=[],t=e.subtitleList||[],r=0<h("filter")(t,{format:"TTML"}).length;return angular.forEach(t,function(e){var t={};t.src=this._uriToRelativeReference(e.url),t.language=(e.locale?e.locale:n.language).slice(0,2),t.label=e.language?e.language:void 0,"TTML"!==e.format||s(t.src).endsWith("vtt")?r||"VTT"!==e.format&&!s(t.src).endsWith("vtt")||(t.mimeType="text/vtt",i.push(t)):(t.mimeType="application/ttml+xml",i.push(t))}.bind(this)),0<i.length?i:void 0},_parsePublishDate:function(e){var t={},n=e.episode;return n&&(t.publishedDate=this._parseDate(n.publishedDate)),t},_parseSegments:function(e,t){var n={segments:[],hasDisplayableSegments:!1};return n.segments.push(this._parseRoot(e)),angular.forEach(t,function(e){var t=this._parseRoot(e);n.hasDisplayableSegments=n.hasDisplayableSegments||t.displayable&&!t.isFull,n.segments.push(t)}.bind(this)),n.segments=h("orderBy")(n.segments,"+position"),n},_parseChannels:function(e){var t={channels:[]},n=e.channel;return n&&t.channels.push(n.id),t},_parseRelatedContents:function(e){var n={related:[]},t=e.relatedContentList;return t&&0<t.length&&angular.forEach(t,function(e){var t={};t.id=e.id,t.title=e.title,t.url=e.url,n.related.push(t)}.bind(this)),n},_parseResourceList:function(e,u){var c={sources:[]},t=e.resourceList||[],d=0<h("filter")(t,{protocol:"HTTPS"},!0).length;return angular.forEach(t,function(e){if(!("HTTP-M3U"===e.protocol||"HTTP"===e.protocol&&d||"RTMP"===e.protocol&&"audio"===u.urn.assetType)){var t,n=e.mimeType,i="RTMP"===e.protocol,r=n===f.MIME_TYPES.HLS,a=n===f.MIME_TYPES.HDS,s=r?this._hlsQualitySorting(e.url):e.url,o={quality:this._resolveQuality(e.quality),analytics:e.analyticsData,analyticsMetadata:e.analyticsMetadata,isDVR:e.dvr,is360:"VIDEO_360"===e.presentation,isLive:e.live,duration:u.duration,enforceSSL:r&&!e.live&&!i,isRTMP:i,tokenAuthentication:a||r,tokenType:e.tokenType,playerVerification:a,subtitleInformationlist:e.subtitleInformationList?h("filter")(e.subtitleInformationList,function(e){return"HLS"===e.source||"DASH"===e.source||"HDS"===e.source}):null},l=e.drmList?e.drmList:void 0;if(i)s=(s=s.replace(/\.flv$/,"")).replace(/\.flv(?=\?start)/,""),t=/\/([a-z0-9]+):/.exec(s),n=t?(s=s.replace(t[0],"/&"+t[1]+":"),"rtmp/"+t[1]):"rtmp/flv";"HTTPS"===e.protocol&&(o.enforceSSL=!0),u.urn.livecenter&&(u.isLive?s=this._addMarkInMarkOutToSource(s,e.live&&!e.dvr?void 0:u.validFrom+u.markIn,void 0):(s=this._addMarkInMarkOutToSource(s,u.validFrom+u.markIn,u.validFrom+u.markOut,!0),o.isLive=!1,o.isDVR=!1)),a&&o.isDVR||(p.supportsNativeHLS?l?angular.forEach(l,function(e){"FAIRPLAY"===e.type&&c.sources.push(new f(s,n,o,l))}):c.sources.push(new f(s,n,o)):c.sources.push(new f(s,n,o,l)))}}.bind(this)),c},_parseAnalyticsData:function(e,t,n){var i={analytics:{}};return i.analytics=angular.extend(i.analytics,e.analyticsData),i.analytics=angular.extend(i.analytics,t.analyticsData||{}),i.analytics=angular.extend(i.analytics,n.analyticsData||{}),i},_parseAnalyticsMetadata:function(e,t,n){var i={analyticsMetadata:{}};return i.analyticsMetadata=angular.extend(i.analyticsMetadata,e.analyticsMetadata),i.analyticsMetadata=angular.extend(i.analyticsMetadata,t.analyticsMetadata||{}),i.analyticsMetadata=angular.extend(i.analyticsMetadata,n.analyticsMetadata||{}),i}}),Object.defineProperties(n.prototype,{}),n}]),angular.module("SRGPlayerDatasource").factory("AudioVideoV2UrlBuilder",["UrlBuilder","bowser",function(e,t){function n(){e.apply(this,arguments)}return n.prototype=Object.create(e.prototype),angular.extend(n.prototype,{_enforceSSL:function(e){return t.chrome&&"video"===e.assetType},_buildPath:function(e){return"/integrationlayer/2.0/mediaComposition/byUrn/"+e.str+".json"+("video"===e.assetType?"?onlyChapters=true&vector=portalplay":"")}}),Object.defineProperties(n.prototype,{}),n}]),angular.module("SRGPlayerDatasource").factory("DatasourceServiceProvider",["AssetProvider","AssetSender","AudioVideoV1UrlBuilder","AudioVideoV1Parser","EndscreenV1UrlBuilder","EndscreenV1Parser","AudioVideoV2UrlBuilder","AudioVideoV2Parser","EndscreenV2UrlBuilder","EndscreenV2Parser","SocialPayloadV1UrlBuilder","SocialPayloadV1Producer","SocialPayloadV2UrlBuilder","SocialPayloadV2Producer",function(n,i,e,t,r,a,s,o,l,u,c,d,h,f){function p(e,t){this._apiVersion=t,this._domain=e}return p.prototype={_buildProvider:function(e,t){return new n(e,t)},_buildSender:function(e,t){return new i(e,t)},_buildAudioVideoProvider:function(){return this._audioVideoProvider||("V2"===this._apiVersion?this._audioVideoProvider=this._buildProvider(new o,new s(this._domain)):this._audioVideoProvider=this._buildProvider(new t,new e(this._domain))),this._audioVideoProvider},_buildEndScreenProvider:function(){return this._endscreenProvider||("V2"===this._apiVersion?this._endscreenProvider=this._buildProvider(new u,new l(this._domain)):this._endscreenProvider=this._buildProvider(new a,new r(this._domain))),this._endscreenProvider},_buildSocialPayloadSender:function(){return this._socialPayloadSender||("V2"===this._apiVersion?this._socialPayloadSender=this._buildSender(new f,new h(this._domain)):this._socialPayloadSender=this._buildSender(new d,new c(this._domain))),this._socialPayloadSender}},Object.defineProperties(p.prototype,{apiVersion:{get:function(){return this._apiVersion}},audioVideoProvider:{get:function(){return this._buildAudioVideoProvider()}},endscreenProvider:{get:function(){return this._buildEndScreenProvider()}},socialPayloadSender:{get:function(){return this._buildSocialPayloadSender()}}}),p}]),angular.module("SRGPlayerDatasource").factory("EndscreenV1Parser",["AssetV1Parser",function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{parse:function(e){var t=e.Videos||e.Audios,n=t?t.Video||t.Audio:[],i=[];return angular.forEach(n,function(e){var t={};t=angular.extend(t,this._parseAssetsMetadata(e)),t=angular.extend(t,this._parseRoot(e)),t=angular.extend(t,this._parseImage(e)),t=angular.extend(t,this._parseAssetSet(e)),i.push(t)}.bind(this)),i}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("EndscreenV1UrlBuilder",["UrlBuilder","URI",function(e,n){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{_enforceSSL:function(e){return!1},_buildPath:function(e,t){return new n("/integrationlayer/1.0/ue/"+e.bu+"/video/editorialPlayerLatest.json").addSearch(t).toString()}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("EndscreenV2Parser",["AssetV2Parser","moment",function(e,n){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{parse:function(e){var n=[],t=e.mediaList;angular.forEach(t,function(e){var t={};t=angular.extend(t,this._parseMedia(e)),t=angular.extend(t,this._parseShow(e)),n.push(t)}.bind(this));var i={medias:n};return e.recommendationId&&(i.recommendationId=e.recommendationId),i},_parseMedia:function(e){var t={};return t.id=e.id,t.urn=this._parseURN(e.urn),t.title=e.title,t.description=e.description,t.duration=n.duration(e.duration).asSeconds(),t.imageSrc=this._uriToRelativeReference(e.imageUrl),t}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("EndscreenV2UrlBuilder",["UrlBuilder","URI",function(e,i){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{_enforceSSL:function(e){return!1},_buildPath:function(e,t,n){return"rts"===e.bu||"srf"===e.bu?new i("/integrationlayer/2.0/"+e.bu+"/mediaList/video/recommended/"+t+".json").addSearch(n).toString():new i("/integrationlayer/2.0/"+e.bu+"/mediaList/video/trending.json").addSearch(n).toString()}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("SocialPayloadProducer",["AssetProducer",function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{produce:function(e,t){return angular.extend(this._parseMetadata(e),t||{})}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("SocialPayloadV1Producer",["SocialPayloadProducer",function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{_parseMetadata:function(e){var t={};return e.show.id&&(t.assetGroupId=e.show.id),e.assetSubSetId&&(t.assetSubSetId=e.assetSubSetId),e.topics&&0<e.topics.length&&(t.topics=e.topics),e.channels&&0<e.channels.length&&(t.channelIds=e.channels),t}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("SocialPayloadV1UrlBuilder",["UrlBuilder",function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{_enforceSSL:function(){return!1},_buildPath:function(e,t,n){var i=e.urn;return"/integrationlayer/1.0/ue/"+[i.bu,i.assetType,i.id].join("/")+"/"+n+".json"}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("SocialPayloadV2Producer",["SocialPayloadProducer",function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{_parseMetadata:function(e){return{eventData:e.eventData}}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGPlayerDatasource").factory("SocialPayloadV2UrlBuilder",["UrlBuilder",function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),angular.extend(t.prototype,{_enforceSSL:function(){return!1},_buildPath:function(e,t,n){var i=e.urn;return"/integrationlayer/2.0/"+i.bu+"/mediaStatistic/"+[i.assetType,i.id].join("/")+"/"+n+".json"}}),Object.defineProperties(t.prototype,{}),t}]),angular.module("SRGTranslate",["ng","ngSanitize"]).run(),angular.module("SRGTranslate").filter("translate",["$parse","$translate",function(n,i){return function(e,t){return angular.isObject(t)||(t=n(t)(this)),i.instant(e,t)}}]),angular.module("SRGTranslate").factory("$translate",["$log","$http","$interpolate",function(n,e,i){return{_locale:void 0,_map:{},instant:function(e,t){var n;return void 0===e?"":null==(n=this._map[e.toUpperCase()])?e:(t&&(n=i(n)(t)),n)},use:function(t){return t?e({url:t,method:"GET",cache:!0}).then(this._onSuccess.bind(this,t),function(e){n.error("Translate error: cannot load "+t+" with url: "+e.config.url)}.bind(this)):this._locale},_onSuccess:function(e,t){this._locale=e,this._map=t.data}}}]),angular.module("srgPlayer",["ngRoute","ngTouch","SRGTranslate","PostMessage","SRGPlayerCommons","SRGPlayerDatasource","LocalStorageModule","offClick","ngCookies"]).constant("TweenMax",window.TweenMax).constant("bowser",window.bowser).constant("S",window.S).constant("URI",window.URI).constant("Hls",window.Hls).constant("moment",window.moment).constant("Mousetrap",window.Mousetrap).constant("FastClick",window.FastClick).constant("videojs",window.videojs).constant("StreamSense",window.ns_.StreamSense).constant("JS_AkamaiMediaAnalytics",window.JS_AkamaiMediaAnalytics).constant("playerjs",window.playerjs).constant("FlashDetect",window.FlashDetect).run(["FastClick",function(e){e.attach(document.body)}]),angular.module("srgPlayer").config(["$provide","$routeProvider","$httpProvider","$compileProvider","$locationProvider","localStorageServiceProvider",function(e,t,n,i,r,a){i.debugInfoEnabled(!1),n.interceptors.push(["$q","$timeout","$injector",function(n,i,r){return{responseError:function(e){var t=e.config;return t.nbrRetries||(t.nbrRetries=0),(!e.status||e.status<0)&&(t.nbrRetries+=1,t.nbrRetries<=2)?i(function(){return r.get("$http")(t)},1e3):n.reject(e)}}}]),t.when("/p/:mode",{templateUrl:"src/partial/srg-player/srg-player.html",reloadOnSearch:!1}).when("/p/:bu/:mode",{templateUrl:"src/partial/srg-player/srg-player.html",reloadOnSearch:!1}).otherwise({redirectTo:function(){return"/p/default"+location.search}}),r.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!"),a.setPrefix("srgPlayer"),e.decorator("$log",["$delegate",function(n){return n.history=[],n.clearHistory=function(){n.history=[]},angular.forEach(["log","warn","error","info"],function(e){var t=n[e];n[e]=function(){n.history.push(e.toUpperCase()+": "+arguments[0]),t.apply(null,arguments)}}),n}])}]),angular.module("srgPlayer").run(["$log","$window","videojs",function(t,n,i){i.log=t.log,angular.forEach(["error","warn"],function(e){i.log[e]=t[e]}),i.options.flash.swf="node_modules/videojs-osmf/dist/videojs-osmf.883718a0.swf",n.onpageshow=function(e){e.persisted&&n.location.reload()}}]),angular.module("srgPlayer").directive("airplayBtn",["$translate","srgAirplayService",function(e,t){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/airplay-btn/airplay-btn.html",link:function(e){e.openTargetPicker=function(){t.openTargetPicker()}}}}]),angular.module("srgPlayer").directive("cardboardButton",["$translate","srgMediaService",function(e,n){return{restrict:"E",replace:!0,scope:{assetType:"@"},templateUrl:"src/directive/cardboard-button/cardboard-button.html",link:function(e){var t=function(){e.isVRActive=n.isVRActive()};e.toggleVR=function(){n.toggleVR()},e.$on(n.VR_MODE_ON,t),e.$on(n.VR_MODE_OFF,t),t()}}}]),angular.module("srgPlayer").directive("chromecastButton",["srgMediaService",function(n){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/chromecast-button/chromecast-button.html",link:function(e){var t=function(){e.isConnected=n.isCastReady(),e.isCasting=n.isCasting()};e.toggleCasting=function(){(n.isCasting()?n.stopCasting:n.launchCasting).bind(n)()},e.$on(n.CHROMECAST_MEDIA_LOADED,t),e.$on(n.CHROMECAST_STOPPED,t),e.$on(n.CHROMECAST_ERROR,t),e.$on(n.CHROMECAST_CONNECTED,t),t()}}}]),angular.module("srgPlayer").directive("chromecastOverlay",["srgMediaService",function(n){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/chromecast-overlay/chromecast-overlay.html",link:function(e){var t=function(){e.name=n.getCastDeviceName()};e.$on(n.CHROMECAST_MEDIA_LOADED,t),e.$on(n.CHROMECAST_STOPPED,t),e.$on(n.CHROMECAST_ERROR,t),t()}}}]),angular.module("srgPlayer").directive("infoPanorama",["$window","device","srgMediaService",function(e,t,n){return{restrict:"E",replace:!0,templateUrl:"src/directive/info-panorama/info-panorama.html",link:function(e){e.dismissed=!n.is360()||t.supports360&&n.isSource360Compatible(),e.dismiss=function(){e.dismissed=!0}}}}]),angular.module("srgPlayer").directive("srgBackwardButton",["srgMediaService",function(t){return{restrict:"E",replace:!0,scope:{seconds:"@"},templateUrl:"src/directive/srg-backward-button/srg-backward-button.html",link:function(e){e.backward=function(){t.rewind(Number(e.seconds))}}}}]),angular.module("srgPlayer").directive("srgBlockedSegmentOverlay",["$interval","$timeout","$rootScope","$translate",function(n,e,t,i){return{restrict:"E",replace:!0,scope:{onCountdownFinished:"&",reason:"@",assetType:"@"},templateUrl:"src/directive/srg-blocked-segment-overlay/srg-blocked-segment-overlay.html",link:function(e,t){e.translationParams={type:i.instant(e.assetType.toUpperCase()+"_SECTION")},e.errorCode=e.reason?e.reason:"LEGAL",e.remaining=5,e.countdownInterval=n(function(){e.remaining-=1,e.remaining<=0&&(n.cancel(e.countdownInterval),e.onCountdownFinished({}))},1e3)}}}]),angular.module("srgPlayer").directive("srgCaptions",["srgMediaService","srgCaptionsSizeService","bowser","device",function(s,o,t,n){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-captions/srg-captions.html",link:function(a){if(a.isDesktopNotSafariOrAndroid=function(){return n.isDesktop&&!t.safari||t.android},n.isIpadOS||a.isDesktopNotSafariOrAndroid()||n.isIpad&&!s.hasEmbededSubtitles||n.isDesktop&&t.safari&&!s.hasEmbededSubtitles||t.android){var e=function(){var e=s.currentTextTrack(),t=e&&e.activeCues&&0<e.activeCues.length?e.activeCues:void 0;if(a.cues=[],a.hasEmbededSubtitles=s.hasEmbededSubtitles,a.captionsSizeClass="srg-captions-size-"+o.getSubTitleSize().replace(".",""),t)for(var n=0;n<t.length;n++)for(var i=t[n].text.split("\n"),r=0;r<i.length;r++)a.cues.push({backgroundColor:t[n].backgroundColor,color:t[n].color,text:i[r]})};a.$on(s.TEXT_TRACK_CHANGE,e),a.$on(o.CAPTIONS_SIZE_CHANGE,function(e,t){a.captionsSizeClass="srg-captions-size-"+t.replace(".","")}),e()}}}}]),angular.module("srgPlayer").directive("srgContinuousPlayback",["$timeout","srgMediaService","URN","$rootScope","TweenMax","srgLoaderService","srgAutoplayService","bowser","srgEndScreenContainerService","device",function(r,a,s,l,e,u,c,d,h,f){return{restrict:"E",scope:!0,templateUrl:"src/directive/srg-continuous-playback/srg-continuous-playback.html",link:function(t,n){var o=".circle-red",e=function(e,t){var n,i,r,a,s;(e=e||o,t=t||"5",d.msie&&d.version<=11)?(n=e,r=144/(i=1e3*t),a=0,s=setInterval(function(){a++,document.querySelector(n).style.strokeDashoffset=a*r*50,i/50<=a&&clearInterval(s)},50)):document.querySelector(e).style.animation="countdown "+t+"s linear forwards"};t.cancel=function(){var e;r.cancel(t.timeout),e=e||o,document.querySelector(e).style.animationPlayState="paused",n.removeClass("fade-in"),angular.element(".srg-title-bar").show(),r(function(){l.$broadcast(h.CANCEL_CONTINUOUS_PLAYBACK)},100)};var i;t.loadMedia=function(e){u.loadURN(e.urn._str,!0)},t.toggleAutoplay=function(){t.isAutoplay=!t.isAutoplay,c.toggleAutoplay()},t.$on(a.PLAY,function(){r.cancel(t.timeout)}),t.isDesktop=f.isDesktop,t.isAutoplay=c.isAutoplay(),angular.element(".srg-title-bar").hide(),void 0!==(i=h.getEndScreenMedias(!0))?(t.nextMedia=i,l.$broadcast(h.UPDATE_CONTINUOUS_PLAYBACK,{image:t.nextMedia.imageSrc}),e(o,h.getContinuousPlaybackTimer()),t.timeout=r(function(){u.loadURN(new s(t.nextMedia.urn._str),!0)},h.getContinuousPlaybackTimerInMilliSeconds())):(l.continuousPlayback=!1,t.cancel())}}}]),angular.module("srgPlayer").directive("srgControlBar",["device","bowser","$log","$rootScope","fullscreenService","srgMetadataService","srgAirplayService","srgPipService","srgMediaService","srgConfigService",function(a,s,e,t,o,l,u,c,d,h){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-control-bar/srg-control-bar.html",compile:function(e,t){return{post:function(e){var t=l.getMetadata(),n=function(){e.isDVR=d.isDVR(),e.isDVRActive=e.isDVR&&!(a.supportsNativeHLSDVR&&!d.hasPlayed)},i=function(){e.isCasting=d.isCasting()},r=function(){e.airplay=h.getVisibility("airplay",!1)&&u.isEnabled()&&!d.is360()};n(),i(),r(),e.duration=t.duration,e.isLive=t.isLive,e.isSecondHand=t.isSecondHand,e.vr=d.is360()&&a.supportsVR,e.isSafari360=d.is360()&&s.safari,e.playLogo=!e.isLive&&!e.isSecondHand&&h.getVisibility("playLogo",!0),e.fullscreen=o.isFullscreenEnabled()&&h.getVisibility("fullscreen",!0)&&!(s.ios&&d.is360()),e.isPictureInPicture=h.getVisibility("pip",!1)&&c.isEnabled()&&!(d.is360()&&s.safari),e.forward=h.getVisibility("forward",!1),e.backward=h.getVisibility("backward",!1),e.chromecast=h.getVisibility("chromecast",!1)&&!e.isDVR&&!d.is360(),e.volume=!a.isTouchDevice&&h.getVisibility("volumeButton",!0),e.popout=h.getVisibility("popout",!0)&&!a.isTouchDevice&&!d.is360(),e.urn=t.urn,e.$on(o.ENTER_FULLSCREEN,function(){e.isFullscreen=!0}),e.$on(o.EXIT_FULLSCREEN,function(){e.isFullscreen=!1}),e.$on(d.PLAY,n),e.$on(d.CHROMECAST_MEDIA_LOADED,i),e.$on(d.CHROMECAST_STOPPED,i),e.$on(d.CHROMECAST_ERROR,i),e.$on(u.ENABLED,r),e.$on(u.DISABLED,r)}}}}}]),angular.module("srgPlayer").directive("srgControlbarSettingsBtn",["$window","$rootScope","$timeout","Mousetrap","device","fullscreenService","srgAutoplayService","srgMediaService","srgConfigService","srgMetadataService",function(o,l,u,c,d,h,f,p,m,g){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-controlbar-settings-btn/srg-controlbar-settings-btn.html",link:function(t,e){var n=function(){return 200<(d.useClientWidthAndHeight&&h.isFullscreen()?o.clientHeight:o.innerHeight)},i=function(){t.hasTexttracks=0<p.textTracks().length&&n()},r=function(){t.hasAudioTracks=d.supportsAudioTracks&&1<p.audioTracks().length&&m.getVisibility("audioTracks",!1)&&n()},a=function(){var e=g.getUrn();t.hasAutoplay=f.isAutoplayEnabled()&&"audio"!==e.assetType,t.hasHDToggle=!d.isTouchDevice&&!d.isWindowsSevenIE11&&1<g.getQualities().length&&m.getVisibility("quality",!1),t.hasControlbarSettings=m.getVisibility("controlbarSettings",!0)},s=function(){u(function(){t.focusOnOpen&&e.find(".tooltip-sub-menu").find("button")[0].focus(),t.focusOnOpen=!1})};new c(e[0]).bind(["enter","space"],function(e){u(function(){t.focusOnOpen=!0})}),t.$on(p.TEXT_TRACK_CHANGE,i),t.$on(p.AUDIO_TRACK_CHANGE,r),t.texttrackMenu=!1,t.texttrackMenuOpened=function(){t.texttrackMenu=!0},t.texttrackMenuClosed=function(){t.texttrackMenu=!1,s()},t.audiotrackMenu=!1,t.audiotrackMenuOpened=function(){t.audiotrackMenu=!0},t.audiotrackMenuClosed=function(){t.audiotrackMenu=!1,s()},t.menu=!1,t.toggleMenu=function(e){i(),r(),a(),t.menu=void 0===e?!t.menu:e,t.menu&&s(),l.$broadcast("USERSETTINGS_TOGGLED",t.menu)},i(),r(),a(),angular.element(o).bind("resize",function(){u(function(){i(),r(),a()})})}}}]),angular.module("srgPlayer").directive("srgCountdownTimer",["$filter","$translate","moment","srgConfigService","srgBugreportService",function(e,t,y,a,s){return{restrict:"E",replace:!0,scope:{imgSrc:"@",isBlocked:"@",reason:"@",validFrom:"@"},templateUrl:"src/directive/srg-countdown-timer/srg-countdown-timer.html",link:function(o,e){var t=o.reason&&0<o.reason.length?o.reason:"DEFAULT";a.get("debugreport.enabled",!1)&&o.report&&("true"!==o.isBlocked||a.get("debugreport.debugBlockContent",!1))&&s.report(t),e.css({"background-image":"url("+o.imgSrc+")"});var n=angular.element(".timer"),l=angular.element(".days"),u=angular.element(".hours"),c=angular.element(".minutes"),d=angular.element(".seconds"),h=o.validFrom,i=y.duration(y.utc().valueOf()).asSeconds(),r=h-i,f=y.duration(1e3*r,"milliseconds");function p(e,t){var n,i=((n=t)<10?"0"+n:n).toString().split(""),r=e.children();r[0].textContent=i[0],r[1].textContent=i[1]}function m(e,t){return y.unix(t).diff(e,"days")}function g(e){n.addClass("timer--hide"),e<100&&n.removeClass("timer--hide")}function v(e){100<=e?angular.element(".message-comming-soon").removeClass("message-comming-soon--hide"):angular.element(".message-comming-soon").addClass("message-comming-soon--hide")}o.numberOfDaysLeftParams={numberOfDaysLeft:m(y(),h)};var _=setInterval(function(){var e,t,n,i,r,a=y(),s=m(a,h);e=a,t=h,y.unix(t).diff(e,"hours");if(f=y.duration(f-1e3,"milliseconds"),100<=s)return g(o.numberOfDaysLeftParams.numberOfDaysLeft=s),void v(s);g(s),n=s,l.addClass("days--hide"),0<n&&n<100&&(p(l,n),l.removeClass("days--hide")),i=f.hours(),r=s,u.addClass("hours--hide"),(0<i||0<r)&&u.removeClass("hours--hide"),v(s),p(u,f.hours()),p(c,f.minutes()),p(d,f.seconds()),0===parseInt(f.asSeconds())&&(angular.element(".message-start").removeClass("message-start--invisible"),clearInterval(_))},1e3)}}}]),angular.module("srgPlayer").directive("srgCurrentTimeBadge",["$filter","srgMediaService","srgDvrTime","srgQualityService","$timeout",function(e,r,a,s,o){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-current-time-badge/srg-current-time-badge.html",link:function(n){var t,i=function(e){n.seconds=e&&0<e?e:r.currentTime(),n.seconds=n.isDVR?a.toDVRTime(n.seconds):n.seconds,n.seconds=t(n.seconds)};n.dragging=!1,n.isDVR=r.isDVR(),n.qualitySwitch=!1,t=e(n.isDVR?"calendar":"playerTime"),n.$on(r.SEEKING,function(){n.dragging||i()}),n.$on(s.QUALITY_SWITCHING,function(){n.qualitySwitch=!0}),n.$on(s.QUALITY_SWITCHED,function(){n.qualitySwitch&&o(function(){n.qualitySwitch=!1},100)}),n.$on(r.TIME_UPDATE,function(){r.seeking||n.dragging||n.qualitySwitch||i()}),n.$on("srg-progress-drag",function(e,t){n.dragging=!t.end,i(t.time)}),i()}}}]),angular.module("srgPlayer").directive("srgDurationBadge",["srgMediaService",function(n){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-duration-badge/srg-duration-badge.html",link:function(e){var t=function(){e.duration=n.duration()};e.$on(n.DURATION_CHANGE,t),t()}}}]),angular.module("srgPlayer").directive("srgDvrLiveButton",["srgMediaService",function(n){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-dvr-live-button/srg-dvr-live-button.html",link:function(t){var e=function(e){t.isCurrentlyLive=(!e||"pause"!==e)&&n.isCurrentlyLive()};t.$on(n.PAUSE,function(){e("pause")}),t.$on(n.SEEKED,e),t.$on(n.SEEKING,e),t.$on(n.TIME_UPDATE,e),t.$on(n.LOADING_READY,e),t.goBackToLive=function(){n.seekToLive(),n.paused()&&n.play()},e()}}}]),angular.module("srgPlayer").directive("srgEndScreenContainer",["srgConfigService","$rootScope","srgAutoplayService","srgEndScreenContainerService",function(i,r,a,s){return{restrict:"E",scope:!0,controller:["$scope",function(){angular.element(".srg-title-bar").show()}],templateUrl:"src/directive/srg-endscreen-container/srg-endscreen-container.html",link:function(e,t){e.continuousPlayback=i.get("mode.endScreenParams.continuousPlayback",!1)&&a.isAutoplay();var n=r.$on(s.CANCEL_CONTINUOUS_PLAYBACK,function(){e.continuousPlayback=!1}.bind(this));e.$on("$destroy",function(){n&&n()})}}}]),angular.module("srgPlayer").directive("srgEndScreenThumb",["srgConfigService","ratioUtils","$timeout","$log","srgMediaService","fullscreenService","device","displayTimerUtils",function(n,e,t,i,r,a,s,o){return{restrict:"E",replace:!0,scope:{imgSrc:"@",duration:"@",blur:"@",isLive:"@",assetType:"@?",imageCrd:"@?"},templateUrl:"src/directive/srg-endscreen-thumb/srg-endscreen-thumb.html",link:function(e,t){e.getThumbnailWidth=function(){return 100*Math.ceil(t[0].offsetWidth/100)},e.getRatio=function(){return"16x9"},e.hasThumbnailFilter=n.get("mode.useImgResizeService",!0)}}}]),angular.module("srgPlayer").directive("srgEndScreen",["$timeout","$rootScope","playerParams","srgMetadataService","srgEndScreenContainerService","TweenMax","srgLoaderService","srgPipeService","device",function(o,l,u,e,c,t,d,h,f){return{restrict:"E",scope:{},templateUrl:"src/directive/srg-endscreen/srg-endscreen.html",link:function(t,e){t.mobile=f.isTouchDevice,t.playerModePortalDetail=u.mode&&"portal-detail"===u.mode;var n,i=c.getEndScreenMediasAndRecId(!1),r=0,a=function(e){12<(n=e.medias).length&&(n=n.slice(0,12)),n.length%2==1&&(n=n.slice(0,n.length-1)),t.medias=n};if(void 0===i)var s=l.$on(c.MEDIA_PLAYLIST_READY,function(){i=c.getEndScreenMediasAndRecId(!1),a(i),s()});else i&&void 0===i.medias&&"function"==typeof i.then?i.then(function(e){a(e)}):i.medias&&0<i.medias.length?a(i):t.medias=void 0;o(function(){angular.element(e[0].querySelector(".srg-flexbox")).addClass("srg-flexbox-animation")},1e3);angular.element(function(){for(var e=angular.element(".flexbox-child"),t=0;t<e.length;t++)"none"!==window.getComputedStyle(e[t]).display&&r++;h.onRecommendationDisplayed(n,r,i.recommendationId)}),t.loadMedia=function(e){h.onRecommendationHit(e,n,r,i.recommendationId),d.loadURN(e.urn,!1,void 0,i.recommendationId)}}}}]),angular.module("srgPlayer").directive("srgForwardButton",["srgMediaService",function(t){return{restrict:"E",replace:!0,scope:{seconds:"@"},templateUrl:"src/directive/srg-forward-button/srg-forward-button.html",link:function(e){e.forward=function(){t.forward(Number(e.seconds))}}}}]),angular.module("srgPlayer").directive("srgFullscreenButton",["device","fullscreenService",function(n,i){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-fullscreen-button/srg-fullscreen-button.html",link:function(e){var t=function(){e.isFullscreen=!!i.isFullscreen()};e.isFullscreen=!!i.isFullscreen(),e.mobile=n.isTouchDevice,e.$on(i.ENTER_FULLSCREEN,t),e.$on(i.EXIT_FULLSCREEN,t),e.toggleFullscreen=function(){i.toggleFullscreen()},t()}}}]),angular.module("srgPlayer").directive("srgLiveTitle",["srgMetadataService","srgConfigService",function(n,i){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-live-title/srg-live-title.html",link:function(e){var t=n.getMetadata();e.title=t.title,e.titleVisibility=i.getVisibility("controlBarTitle",!0)}}}]),angular.module("srgPlayer").directive("srgMediaElement",["device","srgMediaService","srgMetadataService","playerParams",function(a,s,o,e){return{restrict:"E",replace:!0,scope:{ismetadataloaded:"=",sources:"=",tracks:"=",type:"=",autoplay:"=",start:"=",preload:"=",mutedPlayback:"="},template:'<div class="srg-media"></div>',link:function(n,i){var r;n.$watch("ismetadataloaded",function(){var e,t;n.ismetadataloaded&&(s.elmt&&s.canReload(n.sources)&&(e=n.sources,t=!1,angular.forEach(e,function(e){t=t||e.options.playerVerification}),!t)?s.reload(n.sources,n.start,n.autoplay,n.tracks,o.getMetadata()):(r=document.createElement(n.type),s.destroy(),r.controls=!1,"video"===n.type&&r.setAttribute("crossorigin","anonymous"),n.autoplay&&(n.mutedPlayback||a.hasAutoplay)&&r.setAttribute("autoplay",""),a.supportsPlaysInline&&r.setAttribute("playsinline",""),n.mutedPlayback&&r.setAttribute("muted",""),n.preload&&r.setAttribute("preload",n.preload),i.html(r),document.title=o.getMetadata().urn.bu.toUpperCase()+": "+o.getMetadata().title,s.bindElement(r,n.sources,n.start,o.getMetadata())))})}}}]),angular.module("srgPlayer").directive("srgMediaThumb",["srgConfigService","ratioUtils","$timeout","srgMediaService","fullscreenService","device","displayTimerUtils",function(e,t,s,o,n,i,l){return{restrict:"E",replace:!0,scope:{imgSrc:"@",duration:"@",blur:"@",isLive:"@",assetType:"@?",imageCrd:"@?"},templateUrl:"src/directive/srg-media-thumb/srg-media-thumb.html",link:function(i,r){var a=s(function(){var e="audio"!==i.assetType?l.getDisplayTimer():5e3;if(i.isPoster=r.hasClass("srg-poster"),i.isPoster&&i.imageCrd){i.imageCredit=i.imageCrd;var t=s(function(){angular.element(r[0].querySelector(".credit")).addClass("animation"),angular.element(r[0].querySelector(".credit_bg")).addClass("animation")},e);if("audio"!==i.assetType||void 0===i.assetType)var n=i.$on(o.PLAY,function(){t&&s.cancel(t),angular.element(r[0].querySelector(".credit")).addClass("animation"),angular.element(r[0].querySelector(".credit_bg")).addClass("animation"),s(function(){n()},250)})}a&&s.cancel(a)});i.getThumbnailWidth=function(){return 100*Math.ceil(r[0].offsetWidth/100)},i.getRatio=function(){return t.getRatio(r[0].offsetWidth,r[0].offsetHeight)},i.hasThumbnailFilter=e.get("mode.useImgResizeService",!0)}}}]),angular.module("srgPlayer").directive("pictureInPictureButton",["videojs","srgPipService","srgMediaService","$rootScope","$log",function(e,n,i,t,r){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-pip-button/srg-pip-button.html",link:function(e){e.isPip=!1;var t=i.elmt.find("video")[0];e.goPictureInPicture=function(){n.goPictureInPicture()},e.$watch(function(){return t.webkitPresentationMode},function(){n.updatePipState(),e.isPip=n.isPip()})}}}]),angular.module("srgPlayer").directive("srgPlayButton",["srgMediaService","srgSegmentsService",function(e,t){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-play-button/srg-play-button.html",link:function(n){var i=function(){n.paused=e.paused(),n.forceEnd=n.forceEnd&&!n.paused,n.end=n.forceEnd||e.ended()&&!e.isCasting()};n.$on(e.LOADING_READY,i),n.$on(e.LOADING,i),n.$on(e.PAUSE,i),n.$on(e.PLAY,i),n.$on(e.PLAYING,i),n.$on(e.ENDED,i),n.$on(e.CHROMECAST_MEDIA_LOADED,i),n.$on(e.CHROMECAST_STOPPED,i),n.$on(e.CHROMECAST_ERROR,i),n.$on(t.SEGMENT_BLOCKED,function(e,t){n.forceEnd=t.skiptToEnd,i()}),n.togglePlay=function(){e.togglePlay()},i(),n.isLive=e.isLive()&&!e.isDVR()}}}]),angular.module("srgPlayer").directive("srgPlayLogo",["$window","$translate","srgMediaService","srgMetadataService","srgUtils",function(t,n,i,r,a){return{restrict:"E",replace:!0,scope:{assetType:"@",bu:"@"},templateUrl:"src/directive/srg-play-logo/srg-play-logo.html",link:function(e){e.translationParams={type:n.instant(e.assetType),bu:e.bu.toUpperCase()},e.open=function(){i.pause(),t.open(a.generatePlayUrl(r.getUrn(),i.currentTime()),"_blank")}}}}]),angular.module("srgPlayer").directive("srgPlayerError",["$window","$timeout","$translate","device","S","srgConfigService","srgBugreportService",function(r,e,a,s,o,l,u){return{restrict:"E",replace:!0,scope:{reason:"@",isBlocked:"@",assetType:"@"},templateUrl:"src/directive/srg-player-error/srg-player-error.html",link:function(e,t){var n=e.reason&&0<e.reason.length?e.reason:"DEFAULT";s.supportsFlash||"INSTALL_FLASH"!==n||(n=s.isTouchDevice?"INCOMPATIBLE_DEVICE":"INCOMPATIBLE_BROWSER");var i=n+("true"===e.isBlocked?" - BLOCKED":"");"DRM_NOT_SUPPORTED"===n&&(e.DRMUnsupported=!0),e.errorCode=o(n).startsWith("IL_ERROR_")?"PLAYBACK":n,e.errorCode="IL_ERROR_404"===n?"NOT_AVAILABLE":e.errorCode,e.flashRequired="INSTALL_FLASH"===n,e.report="INSTALL_FLASH"!==e.errorCode&&"UPDATE_BROWSER"!==e.errorCode,e.translationParams={type:a.instant(e.assetType.toUpperCase())},l.get("debugreport.enabled",!1)&&e.report&&("true"!==e.isBlocked||l.get("debugreport.debugBlockContent",!1))&&u.report(i),e.downloadFlash=function(){r.open("https://get.adobe.com/flashplayer")},e.onClickOnDrmMessage=function(){var e=l.getConfiguration().drm.messageURL;e&&r.open(e)}}}}]),angular.module("srgPlayer").directive("srgPlayerOverlay",["$timeout","srgMediaService","srgLoaderService","device",function(r,n,a,s){return{restrict:"E",replace:!0,scope:{inError:"=",onPlayWhenError:"&",preload:"="},templateUrl:"src/directive/srg-player-overlay/srg-player-overlay.html",link:function(i,e){var t=function(){i.isReady=n.isReady(),i.isLive=n.isLive()&&!n.isDVR(),i.paused=n.paused()||i.inError,i.is360=s.supports360&&n.is360()&&n.isSource360Compatible(),i.hasPlayed=n.hasPlayed,i.loading=(!i.hasPlayed&&!i.isReady||n.isLoading())&&s.supportsPlaysInline&&!i.inError&&!(!i.hasPlayed&&"none"===i.preload),i.loading&&(i.hidePlay=!0,i.hidePause=!0)};i.$on(n.LOADING_READY,t),i.$on(n.LOADING,t),i.$on(a.ERROR,t),i.$on(n.ERROR,t),i.$on(a.RELOAD,t),i.$on(n.PLAY,function(){i.paused&&!i.loading&&(i.hidePlay=!1,i.hidePause=!0),t(),i.loading=!1}),i.$on(n.PAUSE,function(){i.paused||i.loading||(i.hidePause=!1,i.hidePlay=!0),t(),i.loading=!1}),i.$on("$locationChangeSuccess",t),i.$on(n.MEDIA_READY,t),i.$watch("inError",t),i.mobile=s.isTouchDevice,i.tutorial={display:!1,frame:"center"},i.$watch(function(){return i.hasPlayed},function(e){if(e){var t=function(){var e=function(e,t,n){r(function(){i.tutorial.frame=e,n()},t)};e("right",300,e.bind(null,"left",350,e.bind(null,"center",350,e.bind(null,"right",350,e.bind(null,"left",350,e.bind(null,"center",350,function(){r(function(){i.tutorial.display=!1},350)}))))))};r(function(){if(n.isLoading())var e=i.$on(n.LOADING_READY,function(){i.tutorial.display=!0,t(),e()});else i.tutorial.display=!0,t()},1e3)}else i.tutorial.display=!1}),i.togglePlay=function(){i.inError?i.onPlayWhenError({}):n.togglePlay()},i.hidePause=!0,i.hidePlay=!0,i.pauseAnimationFinished=function(){i.hidePause=!0},i.playAnimationFinished=function(){i.hidePlay=!0},t()}}}]),angular.module("srgPlayer").directive("srgPopoutButton",["$translate","srgPopoutService",function(t,n){return{restrict:"E",replace:!0,scope:{assetType:"@"},templateUrl:"src/directive/srg-popout-button/srg-popout-button.html",link:function(e){e.translationParams={type:t.instant(e.assetType)},e.popout=function(){n.popout()}}}}]),angular.module("srgPlayer").directive("srgProgressBar",["$rootScope","$filter","$window","$timeout","$translate","Mousetrap","device","coordsUtils","srgMediaService","srgMetadataService","srgDvrTime","srgQualityService",function(h,f,p,m,e,g,v,_,y,x,b,T){return{restrict:"E",replace:!0,scope:{timeTextContainerProgressBar:"@"},templateUrl:"src/directive/srg-progress-bar/srg-progress-bar.html",link:function(r,e){var a,t=y.isDVR()?"calendar":"playerTime",n=x.getMetadata(),s=function(e){var t=y.duration()*e;if(y.isDVR()){var n=y.seekable();if(0<n.length)return t+n.start(0)}return t},i=function(){r.tooltip={disabled:v.isTouchDevice}},o=function(e,t){return t?e/t*100:0},l=function(e,t){if(y.isDVR()){r.isCurrentlyLive=y.isCurrentlyLive();var n=y.seekable();if(0<n.length){if(t=n.end(0)-n.start(0),r.timeTranslateParams={currentTime:f("playerTime")(e),duration:f("playerTime")(t)},y.isCurrentlyLive(e))r.completed=100;else{var i=o(e-n.start(0),t);r.completed=0<=i?i:0}r.onmousover||(a=b.toDVRTime(e))}}else r.timeTranslateParams={currentTime:f("playerTime")(e),duration:f("playerTime")(t)},r.onmousover||(a=e),r.completed=o(e,t)},u=function(){if(v.supportsBufferingProgress){var e=y.currentBufferRange();e&&!y.isDVR()&&(r.bufferEnd=o(e.end-e.start,y.duration()),r.bufferStart=o(e.start,y.duration()))}},c=function(){r.bufferEnd=0,r.bufferStart=0,r.isCasting=y.isCasting()};r.qualitySwitch=!1,r.dragging=!1,r.isScrubberLeft=!1,r.bufferStart=0,r.bufferEnd=0,r.isLive=n.isLive,r.isDVR=y.isDVR(),r.isAudio="audio"===x.getUrn().assetType,r.isDVRActive=r.isDVR&&!(v.supportsNativeHLSDVR&&!y.hasPlayed);var d=angular.element(".srg-progress-bar");r.timeTextContainerProgressBar||(d.on("mouseenter",function(e){r.onmousover=!0}),d.on("mouseleave",function(e){r.onmousover=!1})),r.onDragging=function(e,t,n){if(n)h.$broadcast("srg-progress-drag",{time:y.currentTime(),cancel:!0,end:!1});else{var i=s(e.x);t&&y.seek(i),h.$broadcast("srg-progress-drag",{time:i,cancel:!1,end:t})}},r.timePosition=function(n){r.tooltip.disabled||(r.onmousover||(a=y.currentTime()),d.on("mousemove",function(e){var t=s(_.calculateXRatio(n.pageX,d));a=r.isDVR?b.toDVRTime(t):t}),d.on("mouseleave",function(e){a=r.isDVR?b.toDVRTime(y.currentTime()):y.currentTime()}))},new g(e[0]).bind(["right","up"],function(e){e.preventDefault(),e.stopPropagation(),m(function(){y.forward()})}),new g(e[0]).bind(["left","down"],function(e){e.preventDefault(),e.stopPropagation(),m(function(){y.rewind()})}),r.$on(y.SEEKING,function(){r.dragging||u()}),r.$on(T.QUALITY_SWITCHING,function(){r.qualitySwitch=!0}),r.$on(T.QUALITY_SWITCHED,function(){r.qualitySwitch&&m(function(){r.qualitySwitch=!1},100)}),r.$on(y.TIME_UPDATE,function(){y.seeking||r.dragging||r.qualitySwitch||l(y.currentTime(),y.duration())}),r.$on(y.DURATION_CHANGE,function(){r.qualitySwitch||l(y.currentTime(),y.duration())}),r.$on("srg-progress-drag",function(e,t){r.dragging=!t.end&&!t.cancel,l(t.time,y.duration())}),r.$on(y.PROGRESS,function(){y.seeking||r.dragging||u()}),r.$on(y.CHROMECAST_MEDIA_LOADED,c),r.$on(y.CHROMECAST_STOPPED,c),r.$on(y.CHROMECAST_ERROR,c),r.tooltipTime=function(){return f(t)(a)},l(y.currentTime(),y.duration()),i(),p.addEventListener("resize",i),c()}}}]),angular.module("srgPlayer").directive("srgSegmentsBrowser",["$window","$rootScope","device","$timeout","$filter","TweenMax","srgKeyboardService","srgMediaService","srgSegmentsService","srgMetadataService","srgLoaderService","srgQualityService",function(l,u,c,d,h,f,p,m,g,v,_,y){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-segments-browser/srg-segments-browser.html",link:function(i,e){var r=e.find(".srg-segment-list"),t=function(e){if(!i.qualitySwitch){var t=c.hasPoorAnimationPerformance?0:.3,n=r.scrollLeft()+e.offset().left-30;f.fromTo(r,t,{scrollLeft:r.scrollLeft()},{scrollLeft:n})}},n=function(){if(i.selected){var e=angular.element(r.find("#"+i.selected.urn.id));0<e.length&&t(e)}},a=function(e){i.qualitySwitch||(e&&e.displayable?(!i.selected||e.urn!==i.selected.urn&&e.displayable)&&(i.selected=e,n()):i.selected=void 0)},s=function(){i.disabledNavigation=!r||0<r.length&&r[0].scrollWidth<=r.width()},o=function(){var n=v.getMetadata(),e=n?n.segments:[];i.segments=h("filter")(e,{displayable:!0},!0),i.qualitySwitch=!1,null===document.querySelector(".srg-outside-segments-browser")&&(i.beginSegment=!0,i.endSegment=!1),d(function(){if(n&&void 0!==n){var e=g.currentSegment();if(!e){var t=m.currentTime();e=g.displayableSegmentByTime(t||0)}a(e),s()}},500)};i.loadSegment=function(e){e.block&&e.block.isBlocked||_.loadURN(e.urn),l.scroll(10,0)},i.$on(g.DISPLAYABLE_SEGMENT_CHANGED,function(e,t){i.dragging||a(t)}),i.$on(_.LOAD_SEGMENT,function(e,t){a(t)}),i.$on("srg-progress-drag",function(e,t){i.dragging=!t.end,a(g.displayableSegmentByTime(t.time))}),i.$on(y.QUALITY_SWITCHING,function(){i.qualitySwitch=!0}),i.$on(y.QUALITY_SWITCHED,function(){i.qualitySwitch&&d(function(){i.qualitySwitch=!1},100)}),i.scrollLeft=function(){i.beginSegment||f.to(r,.2,{scrollLeft:"-=260"})},i.scrollRight=function(){i.endSegment||f.to(r,.2,{scrollLeft:"+=260"})},i.onScrolling=function(e){var t,n;i.qualitySwitch||(t=e.currentTarget,n=t,i.beginSegment=n.scrollLeft<=0,i.endSegment=n.scrollLeft>=n.scrollWidth-n.clientWidth)},i.onFocus=function(e){i.hideSegmentsTimeout&&(d.cancel(i.hideSegmentsTimeout),i.hideSegmentsTimeout=void 0),t(angular.element(e.currentTarget)),u.$broadcast(p.DISPLAY_SEGMENT_BROWSER)},i.onBlur=function(e){i.hideSegmentsTimeout=d(function(){u.$broadcast(p.HIDE_SEGMENT_BROWSER)},1e3)},angular.element(l).bind("resize",function(){d(function(){s(),n()},250)}),i.navigation=!c.isTouchDevice,o(),i.$on(v.METADATA_READY,o),i.$on(v.METADATA_UPDATED,o)}}}]),angular.module("srgPlayer").directive("srgSettingsAudiotracksBtn",["$timeout","Mousetrap","srgMediaService","$log",function(a,e,s,t){return{restrict:"E",replace:!0,scope:{onOpenSubmenu:"&",onCloseSubmenu:"&"},templateUrl:"src/directive/srg-settings-audiotracks-btn/srg-settings-audiotracks-btn.html",link:function(t,n){var i=function(){t.currentItem=s.currentAudioTrack(),t.active=void 0!==t.currentItem},r=function(){var n=[],e=s.audioTracks();i(),0<e.length&&angular.forEach(e,function(e){var t;n.push({id:(t=e).language,selected:t.enabled,label:t.label,obj:t})}),t.items=n};new e(n[0]).bind(["enter","space"],function(e){a(function(){t.focusOnOpen=!0})}),t.submenu=!1,t.$on(s.AUDIO_TRACK_CHANGE,r),t.toggleSubMenu=function(e){t.submenu=void 0===e?!t.submenu:e,t.submenu?(a(function(){t.focusOnOpen&&n.find(".selected")[0].focus(),t.focusOnOpen=!1}),t.onOpenSubmenu({})):(a(function(){r(),t.focusOnOpen=!1}),t.onCloseSubmenu({}))},t.onItemSelected=function(e){s.enableAudioTrack(e.obj),i()},r()}}}]),angular.module("srgPlayer").directive("srgSettingsAutoplayBtn",["srgAutoplayService",function(n){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-settings-autoplay-btn/srg-settings-autoplay-btn.html",link:function(e){var t=function(){e.isAutoplay=n.isAutoplay()};e.toggleAutoplay=function(){n.toggleAutoplay(),t()},t()}}}]),angular.module("srgPlayer").directive("srgSettingsGobackBtn",function(){return{restrict:"E",replace:!0,scope:{onClicked:"&"},templateUrl:"src/directive/srg-settings-goback-btn/srg-settings-goback-btn.html",link:function(e){e.clicked=function(){e.onClicked({})}}}}),angular.module("srgPlayer").directive("srgSettingsHdBtn",["$translate","srgQualityService",function(n,i){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-settings-hd-btn/srg-settings-hd-btn.html",link:function(e){var t=function(){e.isHD=i.isHD()};e.translationParams={quality:n.instant("HD")},e.toggleQuality=function(){e.isHD=!e.isHD,i.switchQuality()},e.$on(i.QUALITY_SWITCHED,t),t()}}}]),angular.module("srgPlayer").directive("srgSettingsTexttracksBtn",["$timeout","Mousetrap","srgMediaService","srgMetadataService","srgConfigService","bowser",function(s,e,o,l,u,c){return{restrict:"E",replace:!0,scope:{onOpenSubmenu:"&",onCloseSubmenu:"&"},templateUrl:"src/directive/srg-settings-texttracks-btn/srg-settings-texttracks-btn.html",link:function(i,t){i.isSafari=c.safari;var r=function(e){if(e)return{id:e.language,selected:"showing"===e.mode,label:e.label,obj:e}},a=function(e){i.currentItem=void 0!==e?e:r(o.currentTextTrack()),i.active=i.currentItem&&void 0!==i.currentItem.id},n=function(){var t=[],n=!1,e=o.textTracks();0<e.length&&(angular.forEach(e,function(e){t.push(r(e)),n=n||"showing"===e.mode}),t.push({id:void 0,selected:!n,label:"TURN_OFF"})),i.active=n,i.items=t,a()};new e(t[0]).bind(["enter","space"],function(e){s(function(){i.focusOnOpen=!0})}),i.hasSubtitleSize=u.getVisibility("subtitleSize",!1),i.locale=l.getUrn().language.slice(0,2),i.submenu=!1,i.sizeMenu=!1,i.toggleSubMenu=function(e){i.submenu=void 0===e?!i.submenu:e,i.submenu?(s(function(){i.focusOnOpen&&t.find(".selected")[0].focus(),i.focusOnOpen=!1}),i.onOpenSubmenu({})):(s(function(){n(),i.focusOnOpen=!1}),i.onCloseSubmenu({}))},i.onOpenSizeMenu=function(){i.sizeMenu=!0,i.onOpenSubmenu({})},i.onCloseSizeMenu=function(){i.sizeMenu=!1,i.onCloseSubmenu({})},i.onItemSelected=function(e){o.enableTextTrack(e.obj,!0),2===i.items.length&&n(),a(e)},n(),i.$on(o.TEXT_TRACK_CHANGE,n)}}}]),angular.module("srgPlayer").directive("srgSettingsTexttracksSizeBtn",["$timeout","Mousetrap","srgCaptionsSizeService",function(a,e,s){return{restrict:"E",replace:!0,scope:{onOpenSubmenu:"&",onCloseSubmenu:"&"},templateUrl:"src/directive/srg-settings-texttracks-size-btn/srg-settings-texttracks-size-btn.html",link:function(i,t){var r=function(){i.currentSize=s.getSubTitleSize()},n=function(){var n=[],e=s.availableSizes();r(),angular.forEach(e,function(e){var t;n.push({id:t=e,selected:t===i.currentSize,label:t})}),i.items=n.slice()};new e(t[0]).bind(["enter","space"],function(e){a(function(){i.focusOnOpen=!0})}),i.toggleSubMenu=function(e){i.submenu=void 0===e?!i.submenu:e,i.submenu?(a(function(){i.focusOnOpen&&t.find(".selected")[0].focus(),i.focusOnOpen=!1}),i.onOpenSubmenu({})):(a(function(){n(),i.focusOnOpen=!1}),i.onCloseSubmenu({}))},i.onItemSelected=function(e){s.setSubTitleSize(e.label),r()},n(),i.$on(s.CAPTIONS_SIZE_CHANGE,r)}}}]),angular.module("srgPlayer").directive("srgTitleBar",["$translate","$window","fullscreenService","srgMetadataService","device","$log","$timeout","Mousetrap","srgMediaService","srgPipeService","srgSocialPayloadService","srgSegmentsService","srgConfigService","srgUtils","bowser",function(o,l,u,c,d,e,h,f,p,m,g,v,_,y,t){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-title-bar/srg-title-bar.html",link:function(t,n){var e=c.getMetadata(),r=function(){var e=v.currentSegment(),t=e?e.urn:c.getUrn();return y.generatePlayUrl(t)},a=function(e,t,n){l.open(e,t,n),p.pause()},i=function(){t.enableTitle=u.isFullscreen()||_.getVisibility("title",!1),t.enableSocial=u.isFullscreen()||_.getVisibility("social",!1)};if(new f(n[0]).bind(["enter","space"],function(e){h(function(){n.find(".srg-share-icon-container").find("button")[0].focus()})}),t.translationParams={type:o.instant(e.urn.assetType),bu:e.urn.bu.toUpperCase()},t.title=e.title,t.show=e.show?e.show.title:void 0,t.show=!t.show&&e.rubric?e.rubric.title:t.show,t.isLive=e.isLive,t.wasSrgLiked=!1,t.playLink=_.getVisibility("playLogo",!0),i(),t.facebook=_.getVisibility("facebook",!0),t.twitter=_.getVisibility("twitter",!0),t.srglike=_.getVisibility("srglike",!0),t.whatsapp=_.getVisibility("whatsapp",!0)&&!d.isTablet,t.shareOnFacebook=function(){a("https://www.facebook.com/sharer/sharer.php?u=https:"+l.encodeURIComponent(r()),"fb_dialog_feed","width=700, height=400"),g.sendShared("facebook"),m.onShared("facebook")},t.shareOnTwitter=function(){var e=v.currentSegment(),t=c.getMetadata(),n=e?e.title:t.title,i=(c.getUrn(),_.get("social.twitterAccount"));a("https://twitter.com/share?url=https:"+l.encodeURIComponent(r())+"&via="+i+(n&&0<n.length?"&text="+l.encodeURIComponent('"'+n+'"'):""),"twitter_share","width=630,height=400"),g.sendShared("twitter"),m.onShared("twitter")},t.shareOnWhatsapp=function(){var e="https:"+l.encodeURIComponent(r()),t=(d.isDesktop?"https://web.whatsapp.com/send?text=":"whatsapp://send?text=")+e.toString();a(t,"",""),g.sendShared("whatsapp"),m.onShared("whatsapp")},t.like=function(){if(!t.wasSrgLiked){var e=g.sendLike();m.onLiked(),e&&e.then(function(){t.wasSrgLiked=!0})}},t.openSharedMenu=!1,t.toggleSharedIconsMenu=function(e){t.openSharedMenu=void 0===e?!t.openSharedMenu:e},t.togglePlay=function(){p.togglePlay()},t.$on(u.ENTER_FULLSCREEN,i),t.$on(u.EXIT_FULLSCREEN,i),t.playLink){c.getUrn();var s=function(){t.playLink=!1,t.disablePlayCallback&&(t.disablePlayCallback(),t.disablePlayCallback=void 0),t.disablePlayingCallback&&(t.disablePlayingCallback(),t.disablePlayingCallback=void 0)};t.playUrl=y.generatePlayUrl(c.getUrn()),t.disablePlayCallback=t.$on(p.PLAY,s),t.disablePlayingCallback=t.$on(p.PLAYING,s),t.openInPlay=function(){l.open(t.playUrl,"_blank")}}}}}]),angular.module("srgPlayer").directive("srgVolumeButton",["$timeout","Mousetrap","srgMediaService",function(n,i,a){return{restrict:"E",replace:!0,scope:{},templateUrl:"src/directive/srg-volume-button/srg-volume-button.html",link:function(r,e){var t=function(){r.volume.current=Math.round(a.isMuted()?0:100*a.volume()),r.isCasting=a.isCasting()};new i(e[0]).bind(["right","up"],function(e){e.stopPropagation(),n(function(){a.volumeUp()})}),new i(e[0]).bind(["left","down"],function(e){e.stopPropagation(),n(function(){a.volumeDown()})}),r.$on(a.VOLUME_CHANGE,t),r.$on(a.CHROMECAST_MEDIA_LOADED,t),r.$on(a.CHROMECAST_STOPPED,t),r.$on(a.CHROMECAST_ERROR,t),r.swipping=!1,r.toggleMute=function(){r.swipping||r.isCasting||a.toggleMute()},r.onDragging=function(e,t,n){if(!t&&void 0!==e){var i=e.x;0<i?(a.isMuted()&&a.mute(!1),a.setVolume(i)):(i=0,a.mute())}r.swipping=!t&&!n},r.volume={},r.volume.max=100,t()}}}]),angular.module("srgPlayer").directive("warningMessage",["$window","URI","srgConfigService","srgMetadataService","srgMediaService",function(t,n,i,r,a){return{restrict:"E",replace:!0,scope:{onClose:"&"},templateUrl:"src/directive/warning-message/warning-message.html",link:function(e){e.open=function(){r.getUrn();a.pause(),t.open(new n(i.get("outdatedBrowserLink","//outdatedbrowser.com")).protocol(null).toString()),e.onClose({})},e.dismiss=function(){e.onClose({})}}}}]),angular.module("srgPlayer").factory("srgAirplayService",["$rootScope","$timeout","device","srgMediaService",function(t,n,e,i){return{ENABLED:"srg-ariplay-enabled",DISABLED:"srg-airplay-disabled",enabled_:!1,videoElmt_:void 0,init:function(){e.hasAirplay&&(this.videoElmt_=i.elmt.find("video")[0],this.videoElmt_&&this.videoElmt_.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){n(function(){this.enabled_="available"===e.availability,t.$broadcast(this.enabled_?this.ENABLED:this.DISABLED)}.bind(this))}.bind(this)))},destroy:function(){this._clear()},_clear:function(){this.enabled_=!1,this.videoElmt_=void 0},isEnabled:function(){return this.enabled_},openTargetPicker:function(){this.enabled_&&this.videoElmt_.webkitShowPlaybackTargetPicker()}}}]),angular.module("srgPlayer").factory("srgAkamaiQosService",["$rootScope","bowser","UUID","JS_AkamaiMediaAnalytics","srgConfigService","srgMediaService","srgMetadataService","$log","$window",function(n,e,t,i,r,a,s,o,l){return{init:function(){if(this._clear(),this._isLiveToBeTracked=!1,this._debugService=r.get("akamaiqos.debug",!1),this._debugAkaNotify("init"),""!==r.get("akamaiqos.beaconConfigPath","")){var e=new t;this._akamaiAnalytics=new i(r.get("akamaiqos.beaconConfigPath","")),this._akamaiAnalytics.setViewerId(e),this._akamaiAnalytics.setViewerDiagnosticsId(e)}this._on(a.LOADED_METADATA,this._onMetadataReady.bind(this)),this._on(a.PLAY,this._onPlay.bind(this)),this._on(a.PAUSE,this._onPause.bind(this)),this._on(a.ENDED,this._onEnd.bind(this)),this._on(a.SEEKING_CHANGED,this._onSeekingChanged.bind(this)),this._on(a.ERROR,this._onError.bind(this)),this._on(a.CHROMECAST_STOPPED,this._setInitialize.bind(this)),this._on(a.CHROMECAST_MEDIA_LOADED,this._setInitialize.bind(this)),angular.element(l).bind("beforeunload",this._onUnLoad.bind(this))},_on:function(e,t){this._listeners.push(n.$on(e,t))},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clear:function(){this._clearListeners(),this._initialized=!1,this._akamaiAnalytics=void 0,this._deferredEvents=[],this._isLiveToBeTracked=!1,this._debugService=!1},destroy:function(){this._clear()},_debugAkaNotify:function(e,t){this._debugService&&o.info("AkaQOS notify - Action="+e+(t?" args="+t:""))},_onMetadataReady:function(){var e=s.getMetadata(),t=(a.duration()?a.duration():0).toFixed(0),n=e.urn;if(this._isLiveToBeTracked=a.isLive()&&"audio"!==n.assetType,this._akamaiAnalytics&&this._isLiveToBeTracked){this._akamaiAnalytics.setStreamURL(a.getCurrentSource().src,!1),this._akamaiAnalytics.setStreamDuration(t),this._akamaiAnalytics.setData("title",e.title),this._akamaiAnalytics.setData("eventName",e.title),this._akamaiAnalytics.setData("device",navigator.userAgent||"unknown"),this._akamaiAnalytics.setData("deliveryType","L"),this._akamaiAnalytics.setData("cdn","Akamai"),this._akamaiAnalytics.setData("show",e.showTitle?e.showTitle:e.rubricTitle),this._akamaiAnalytics.setData("contentLength",t),this._akamaiAnalytics.setData("playerId","SRG Player"),this._akamaiAnalytics.disableServerIPLookUp(),this._akamaiAnalytics.disableLocation();var i={};i.streamHeadPosition=this._getStreamHeadPosition,this._akamaiAnalytics.handleSessionInit(i),this._debugAkaNotify("handleSessionInit for stream = "+a.getCurrentSource().src+"of duration="+t),this._setInitialize(),0<this._deferredEvents.length&&this._isLiveToBeTracked&&(angular.forEach(this._deferredEvents,function(e){this._debugAkaNotify("popping deferred play"),e()}.bind(this)),this._deferredEvents=[])}},_setInitialize:function(){this._initialized=!a.isCasting()},_getStreamHeadPosition:function(){return a.currentTime()},_onPlay:function(){this._initialized&&this._isLiveToBeTracked?(this._akamaiAnalytics.handlePlaying(),this._debugAkaNotify("play")):(this._debugAkaNotify("pushing deferred play"),this._deferredEvents.push(this._akamaiAnalytics.handlePlaying.bind(this._akamaiAnalytics)))},_onPause:function(){this._initialized&&this._isLiveToBeTracked&&(this._akamaiAnalytics.handlePause(),this._debugAkaNotify("pause"))},_onEnd:function(){this._initialized&&this._isLiveToBeTracked&&(this._akamaiAnalytics.handlePlayEnd("Play.End.Detected"),this._debugAkaNotify("end","Play.End.Detected"))},_onUnLoad:function(){this._initialized&&this._isLiveToBeTracked&&(this._akamaiAnalytics.handleApplicationExit(),this._debugAkaNotify("app exit"))},_onError:function(e,t){this._initialized&&this._isLiveToBeTracked&&(this._akamaiAnalytics.handleError(t.errorCode),this._debugAkaNotify("error",t.errorCode))},_onSeekingChanged:function(e,t){this._initialized&&this._isLiveToBeTracked&&(t.seeking&&!a.ended()?(this._akamaiAnalytics.handleSeekStart(),this._debugAkaNotify("seekStart")):a.hasPlayed&&(this._akamaiAnalytics.handlePlaying(),this._debugAkaNotify("play")))}}}]),angular.module("srgPlayer").factory("srgAutoplayService",["localStorageService","playerParams","device","srgConfigService",function(t,e,n,i){var r=e.autoplay;return{isAutoplayEnabled:function(){return r&&n.hasAutoplay&&i.getVisibility("autoplay",!0)},toggleAutoplay:function(){n.hasAutoplay&&t.set("autoplay",!this.isAutoplay())},isAutoplay:function(){if(n.hasAutoplay){var e=t.get("autoplay");return null==e?this.isAutoplayEnabled():e}return!1}}}]),angular.module("srgPlayer").factory("srgBugreportService",["$log","$http","FlashDetect","platformResolver","URI","srgConfigService","srgMetadataService",function(a,i,s,o,r,l,u){return{report:function(e){var t=u.getUrn(),n=l.get("local")+"/debug-report/"+t.bu+"/process";i({method:"POST",url:n,data:r.buildQuery(this._createData(t,e)),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},_createData:function(e,t){var n=l.PLAYER_VERSION,i=s.installed?s.raw:"HTML5",r=a.history.join("\n");return{player_version:n,flash_version:i,browser:o.browser().name,browser_version:o.browser().version,platform:o.platform(),log:r&&0<r.length?r:"Log not available",urn:e.str,error_code:t}}}}]),angular.module("srgPlayer").factory("srgCaptionsSizeService",["$rootScope","localStorageService",function(t,n){return{CAPTIONS_SIZE_CHANGE:"captions-size-change",size_:void 0,setSubTitleSize:function(e){this.size_=e,n.set("captionsize",this.size_),t.$broadcast(this.CAPTIONS_SIZE_CHANGE,this.size_)},getSubTitleSize:function(){var e=n.get("captionsize");return e||"1x"},availableSizes:function(){return["4x","2x","1.5x","1x","0.75x"]}}}]),angular.module("srgPlayer").factory("srgConfigService",["$rootScope","$document","$q","$http","S","moment","playerParams",function(s,e,t,n,i,o,r){var l="//"+location.host,a=e.find("#dev-host");return a&&0<a.length&&(l=a.text().trim()),{PLAYER_VERSION:"1.13.158",CONFIG_LOADED:"srg-config-loaded",CONFIG_CHANGED:"srg-config-changed",init:function(e){var t;return angular.equals(this._urn,e)||(this._urn=e,this._configuration=void 0,t=this._initConfiguration()),t},updateConfiguration:function(){return this._initConfiguration()},_initConfiguration:function(){var a=o();return t.all([n.get("conf/player.875d7fbf.json",{cache:!0}),n.get(l+"/player/configuration",{cache:!1})]).then(function(e){var t=this._parseResponse(e[0]),n=this._parseResponse(e[1]),i=this._mergeDynamicConfigurations(t.data,n.data),r=!angular.equals(this._configuration,i);this._configuration&&r&&s.$broadcast(this.CONFIG_CHANGED,i),r&&s.$broadcast(this.CONFIG_LOADED,{elapsed:o()-a,nbrRetries:t.nbrRetries+n.nbrRetries}),this._configuration=i}.bind(this))},_parseResponse:function(e){if(e){var t=e.data;return{nbrRetries:(e.config||{nbrRetries:0}).nbrRetries,data:t||{}}}},_mergeDynamicConfigurations:function(e,t){var n={};return n=angular.merge({},e,t),(n=angular.merge({},n,n.bu[this._urn.bu])).mode=angular.merge({},n.mode.default,n.mode[r.mode]),n.local=l,n.env=i(l).contains("test")?" test":i(l).contains("stage")?"stage":"prod",delete n.bu,this._visibility=angular.extend({},n.mode.visibility.common,n.mode.visibility[this._urn.assetType]),n},getConfiguration:function(){return this._configuration},getVisibility:function(e,t){return this._visibility&&this._visibility.hasOwnProperty(e)?!!this._visibility[e]:void 0===t||!!t},get:function(e,t){for(var n=e.split("."),i=this._configuration,r=0;r<n.length;r++)if(void 0===(i=i[n[r]]))return void 0!==t?t:null;return i}}}]),angular.module("srgPlayer").factory("srgCookieService",["$http","$window","$rootScope",function(e,t,n){return{GET_COOKIE:"get-cookie",init:function(){this._clear()},_on:function(e,t){this._listeners.push(n.$on(e,t))},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clear:function(){this._clearListeners()},destroy:function(){this._clear()},setCookie:function(e){},_triggerCookieSearch:function(e){n.$broadcast(this.GET_COOKIE,e)}}}]),angular.module("srgPlayer").factory("srgDatasourceService",["DatasourceServiceProvider","srgConfigService",function(t,n){return{_serviceProvider:void 0,init:function(){this._clear();var e=n.get("mode.ilEnabled",n.get("ilEnabled",!0));this._serviceProvider=new t(e?n.get("il"):n.get("mmf"),n.get("mode.apiVersion"))},destroy:function(){this._clear()},_clear:function(){this._serviceProvider=void 0},getServiceProvider:function(){return this._serviceProvider}}}]),angular.module("srgPlayer").factory("srgDvrSwitchService",["$log","$filter","$rootScope","$interval","srgDatasourceService","srgConfigService","srgLoaderService",function(i,t,n,r,e,a,s){return{init:function(e){this._clear(),this._urn=e,this._checkInterval=this._checkSwitchDvr()},_clear:function(){r.cancel(this._checkInterval),this._checkInterval=void 0,this._urn=void 0},destroy:function(){this._clear()},_checkSwitchDvr:function(){var e=a.get("mode.dvr.checkIntervalSwitch");return r(this._callMetadata.bind(this),e)},_onSuccess:function(e){0<t("filter")(e.data.sources,{options:{isDVR:!0}},!0).length||n.$broadcast(s.RELOAD)},_onError:function(e){var t=e.config,n=e.status;i.error("An error occurred while retrieving dvr switch data."),i.error(t.method+": "+t.url+" "+n)},_callMetadata:function(){e.getServiceProvider().audioVideoProvider.requestAsset(this._urn).then(this._onSuccess.bind(this),this._onError.bind(this))}}}]),angular.module("srgPlayer").factory("srgDvrTime",["srgMediaService",function(n){return{toDVRTime:function(e){var t=n.startTime();return t?t+e:void 0},toPopoutDvrTime:function(e){var t=n.seekable();return 0<t.length?e-t.start(0):void 0}}}]),angular.module("srgPlayer").factory("srgEndScreenContainerService",["$q","$log","$rootScope","localStorageService","srgConfigService","srgMetadataService","srgMediaService",function(e,t,n,i,r,a,s){return{CANCEL_CONTINUOUS_PLAYBACK:"cancelContinuousPlayback",UPDATE_CONTINUOUS_PLAYBACK:"updateContinuousPlayback",MEDIA_PLAYLIST_READY:"mediaPlaylistReady",_CONTINUOUS_PLAYBACK_FROM_PLAYLIST:"continuousPlaybackFromPlaylist",_MEDIA_PLAYLIST:"mediaPlaylist",_INDEX_OF_MEDIA_PLAYLIST:"indexOfMediaPlaylist",_mediasAndRecId:void 0,_endScreenMedias:void 0,_mediaPlaylist:void 0,_indexOfMediaPlaylist:0,_continuousPlaybackMode:!1,_contentPreloaded:!1,init:function(){this._clear(),this._initListeners(),r.get("mode.endScreenParams.continuousPlayback",!1)&&(this._continuousPlaybackMode=!0,this._continuousPlaybackTimer=r.get("mode.endScreenParams.continuousPlaybackTimer",10))},destroy:function(){this._clear()},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clear:function(){this._clearListeners(),this._continuousPlaybackMode=!1,this._continuousPlaybackTimer=void 0,this._indexOfMediaPlaylist=0,this._endScreenMedias=void 0,this._mediasAndRecId=void 0,this._mediaPlaylist=void 0,this._contentPreloaded=void 0,this._clearLS()},_on:function(e,t){this._listeners.push(n.$on(e,t))},_initListeners:function(){this._on(s.MEDIA_READY,function(){s.isLive()||s.isDVR()||this._on(s.TIME_UPDATE,this._canPreloadEndScreenContent.bind(this))}.bind(this))},_canPreloadEndScreenContent:function(e,t){var n=s.duration();this._contentPreloaded||(3<=n?(t?t.currentTime:s.currentTime())>=n-3&&this._preloadContent():this._preloadContent())},_preloadContent:function(){var t=e.defer();a.requestEndScreenMedia(a.getUrn().id).then(function(e){this._mediasAndRecId=e,this._removeRepeatedURN(),this._setMediaPlaylistInLS(),n.$broadcast(this.MEDIA_PLAYLIST_READY),t.resolve(this._mediasAndRecId)}.bind(this)),this._contentPreloaded=!0,this._mediasAndRecId=t.promise},_removeRepeatedURN:function(){var e=a.getMetadata();if(this._mediasAndRecId.medias&&0<this._mediasAndRecId.medias.length)for(var t=0;t<this._mediasAndRecId.medias.length;t++)if(e.urn._str===this._mediasAndRecId.medias[t].urn._str){this._mediasAndRecId.medias.splice(t,1);break}},_moveIndexOfMediaPlaylist:function(e){this._indexOfMediaPlaylist+=e},_setMediaPlaylistInLS:function(){i.set(this._MEDIA_PLAYLIST,this._mediasAndRecId.medias),i.set(this._CONTINUOUS_PLAYBACK_FROM_PLAYLIST,!0)},_setMediaPlaylistIndexInLS:function(){i.set(this._INDEX_OF_MEDIA_PLAYLIST,this._indexOfMediaPlaylist)},_clearLS:function(){i.remove(this._CONTINUOUS_PLAYBACK_FROM_PLAYLIST),i.remove(this._MEDIA_PLAYLIST),i.remove(this._INDEX_OF_MEDIA_PLAYLIST)},getEndScreenMediasAndRecId:function(e){if(!e)return this._mediasAndRecId;if(this._mediaPlaylist=i.get(this._MEDIA_PLAYLIST),void 0!==this._mediaPlaylist&&null!==this._mediaPlaylist&&0<this._mediaPlaylist.length){void(this._indexOfMediaPlaylist=0)!==i.get(this._INDEX_OF_MEDIA_PLAYLIST)&&null!==i.get(this._INDEX_OF_MEDIA_PLAYLIST)&&(this._indexOfMediaPlaylist=i.get(this._INDEX_OF_MEDIA_PLAYLIST));var t=this._mediaPlaylist[this._indexOfMediaPlaylist];return this._moveIndexOfMediaPlaylist(1),this._setMediaPlaylistIndexInLS(),t}},getContinuousPlaybackTimer:function(){return this._continuousPlaybackTimer},getContinuousPlaybackTimerInMilliSeconds:function(){return 1e3*this._continuousPlaybackTimer},shouldInitEndscreenContainerService:function(){return!this._continuousPlaybackMode||!this._contentPreloaded}}}]),angular.module("srgPlayer").factory("srgKeyboardService",["$rootScope","$timeout","Mousetrap","fullscreenService","srgConfigService","srgMediaService","srgMetadataService","srgQualityService","srgPopoutService",function(n,i,e,t,r,a,s,o,l){return{TOGGLE_DISPLAY:"srg-toggle-display",DISPLAY_SEGMENT_BROWSER:"srg-display-segment-browser",HIDE_SEGMENT_BROWSER:"srg-hide-segment-browser",DISPLAY:"srg-display",unbindControls:function(){e.reset()},bindControls:function(){e.reset(),e.bind(["space","p"],function(){i(function(){a.togglePlay(),n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this)),e.bind("-",function(){i(function(){a.volumeDown(),n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this)),e.bind(["plus","+"],function(){i(function(){a.volumeUp(),n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this)),e.bind(["j","left"],function(){s.getMetadata().isLive&&!a.isDVR()||i(function(){a.rewind(),n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this)),e.bind(["l","right"],function(){s.getMetadata().isLive&&!a.isDVR()||i(function(){a.forward(),n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this)),e.bind("o",function(){r.getVisibility("popout",!0)&&!t.isFullscreen()&&i(function(){l.popout(),n.$broadcast(this.TOGGLE_DISPLAY)}.bind(this))}.bind(this)),e.bind("q",function(){1<s.getQualities().length&&r.getVisibility("quality",!1)&&i(function(){o.switchQuality(),n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this)),e.bind("shift+c",function(){i(function(){n.$broadcast(this.TOGGLE_DISPLAY)}.bind(this))}.bind(this)),e.bind("m",function(){i(function(){a.toggleMute(),n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this)),e.bind(["tab","shift+tab"],function(){i(function(){n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this)),e.bind("f",function(){r.getVisibility("fullscreen",!1)&&t.isFullscreenEnabled()&&i(function(){t.toggleFullscreen()}.bind(this))}.bind(this)),e.bind(["0","1","2","3","4","5","6","7","8","9"],function(e,t){s.getMetadata().isLive&&!a.isDVR()||i(function(){var e=Number(t);a.seek(0<e?a.duration()*(e/10):0),n.$broadcast(this.DISPLAY)}.bind(this))}.bind(this))}}}]),angular.module("srgPlayer").factory("srgLoaderService",["$filter","$location","$window","$rootScope","URN","playerParams","srgUtils","srgConfigService","srgMediaService","srgMetadataService",function(u,s,c,a,d,o,h,f,p,m){return{RELOAD:"srg-loader-reload",LOAD_SEGMENT:"srg-load-segment",init:function(){this._clear(),this._initListeners()},destroy:function(){this._clear()},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clear:function(){this._clearListeners(),this._error=!1},_on:function(e,t){this._listeners.push(a.$on(e,t))},_inError:function(){this._error=!0},_initListeners:function(){this._on("$locationChangeSuccess",function(){a.$broadcast(this.RELOAD)}.bind(this)),this._on(m.METADATA_ERROR,this._inError.bind(this)),this._on(m.METADATA_BLOCKED,this._inError.bind(this)),this._on(p.ERROR,this._inError.bind(this))},loadURN:function(e,t,n,i){var r="string"==typeof e?new d(e):e,a=r&&"audio"===r.assetType,s=m.getMetadata();if(n=void 0===n||n,!s||this._error||a||p.isLive()&&!f.get("mode.liveWithSegments",!1))this._load(r,0,!1,n,i);else{var o=m.getUrn();if(r.str!==o.str){var l=s?u("filter")(s.segments,{urn:r},!0):[];void 0!==l&&0<l.length?this.loadSegment(l[0]):t&&f.get("mode.videoLinkReloadPage")?c.open(h.generatePlayUrl(r),"_top"):this._load(r,0,!1,n,i)}else this.loadSegment(s)}},load:function(e,t){var n="string"==typeof e?new d(e):e;this._load(n,t)},loadSegment:function(e){var t=m.getMetadata();if(t&&e&&(!e.block||!e.block.isBlocked))if(t.isLive)p.isDVR()&&t.urn.str===e.urn.str?(p.seekToLive(),p.paused()&&p.play()):p.isDVR()&&t.urn.str===e.fullLengthUrn.str?(p.seek(e.markIn),p.paused()&&p.play()):this._load(e.urn,0,!0);else if(e.isLive)this._load(e.urn,void 0,!0);else if(void 0===e.fullLengthUrn||t.urn.str!==e.fullLengthUrn.str||t.block&&t.block.isBlocked)if(t.urn.str===e.urn.str)p.seek(0),p.paused()&&p.play();else if(void 0===t.fullLengthUrn)this._load(e.urn,0,!0);else if(t.fullLengthUrn.str===e.urn.str||t.fullLengthUrn.str===e.fullLengthUrn.str){var n=u("filter")(t.segments,{id:t.fullLengthUrn.id})[0],i=0,r=e.urn;!n||n.block.isBlocked||n.isLive||(r=n.urn,i=e.markIn),this._load(r,i,!0)}else this._load(e.urn,0,!0);else p.seek(e.markIn),p.paused()&&p.play();a.$broadcast(this.LOAD_SEGMENT,e)},_currentParams:function(){var e={start:0};return e.urn=o.rawurn,e.bu=o.bu,e.mode=o.mode,e.autoplay=o.autoplay,e.hideendscreen=o.hideEndscreen,e.hidesegments=o.hideSegments,e.outsidesegments=o.outsideSegments,e.locale=o.locale,e.stf=o.switchToFull,e.debug=o.debug,e},_load:function(e,t,n,i,r){var a={};a.urn=e.str,a.bu=e.bu,a.start=t||0,a.autoplay=void 0===i||i,r&&(a.recommendation_id=r),a.preload="auto",a.stf=n,a.r=o.retryCount+1,s.search(angular.extend(this._currentParams(),a))}}}]),angular.module("srgPlayer").factory("srgMediaService",["$log","$rootScope","$timeout","$window","$filter","localStorageService","videojs","bowser","SourceAsset","device","browserLocale","playerjs","moment","playerParams","srgConfigService","fullscreenService",function(o,l,a,u,r,c,d,s,t,h,f,p,n,m,g,v){var e={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",STOP:"stop",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",FULL_SCREEN_CHANGE:"fullscreenchange",TIME_UPDATE:"timeupdate",HEIGHTY_PERCENT_PLAYED:"heightypercentplayed",VOLUME_CHANGE:"volumechange",WAITING:"waiting",TEXT_TRACK_CHANGE:"texttrackchange",AUDIO_TRACK_CHANGE:"audiotrackchange",CHROMECAST_CONNECTED:"chromecast-connected",CHROMECAST_MEDIA_LOADED:"chromecast-media-loaded",CHROMECAST_STOPPED:"chromecast-stopped",CHROMECAST_INITIALIZED:"chromecast-initialized",CHROMECAST_ERROR:"chromecast-error",CHROMECAST_FORCE_TO_LIVE:"chromecast-force-to-live",VR_MODE_ON:"vrmodeon",VR_MODE_OFF:"vrmodeoff"},i={THROTTLE:"throttle",RESUME:"resume",ENCRYPTED:"encrypted",WEBKIT_NEED_KEY:"webkitneedkey",MS_NEED_KEY:"msneedkey",LICENSE_REQUEST_ATTEMPTED:"licenserequestattempted"};function _(){this._clear(),angular.forEach(e,function(e,t){this[t]="srg-"+e}.bind(this)),angular.forEach(i,function(e,t){this[t]="srg-"+e}.bind(this)),angular.element(window).on("beforeunload",function(){this.destroy()}.bind(this))}return _.prototype={LOADING:"srg-media-loading",LOADING_READY:"srg-media-loading-ready",MEDIA_READY:"srg-media-ready",SEEKING_CHANGED:"srg-seeking-changed",LOAD_SOURCE:"srg-load-src",FORCE_TO_LIVE:"srg-force-to-live",DEFAULT_VOLUME_INCREMENT:.1,DVR_CONFIDENCE_INTERVAL:10,audioTracks:function(){return this.media?this.media.audioTracks():[]},autoplay:function(){return this.media.autoplay()},bindElement:function(e,t,n,i){var r=this;this.metadata=i,this._ready=!1,this.destroy(),this._initListeners(),this._triggerLoading(),this._sources=t,this._startsMuted=e.hasAttribute("muted");var a=this._setupPlugins(t,n);d.Html5DashJS.hook("beforeinitialize",function(e,t){t.getDebug().setLogToBrowserConsole(!1)}),this.media=this._bind(d(e,{techOrder:["html5","flash"],sourceOrder:!0,resizeManager:!1,html5:{nativeTextTracks:d.browser.IS_IOS&&!d.browser.IS_IPAD&&g.get("nativeTextTracks",!0),hls:{overrideNative:!d.browser.IS_SAFARI}},plugins:a,children:["MediaLoader","TextTrackDisplay"]},function(){try{r._bindTechEvents(this)}catch(e){o.error(e)}r.hasPlayed=!1,p.VideoJSAdapter(this).ready(),r.is360()&&h.supports360&&(angular.element(u).bind("resize",function(){var e=this.getChild("Canvas");e&&e.handleResize()}.bind(this)),this.on("vrmodeon",function(){v.isFullscreen()||v.toggleFullscreen()}))}));var s=this._setupKeySystem(this._sources);this.media.muted(this._startsMuted),this.media.src(s),l.$broadcast(this.LOAD_SOURCE),this._checkLoadedMetadataEventTriggered(),this._once(this.LOADED_METADATA,function(){this._setStartToLive(),this._startMedia()}.bind(this)),this.firstPlayForIos=!1,this.elmt=angular.element(this.media.el())},canReload:function(e){return e[0].mimeType===this.getCurrentSource().mimeType&&!this.isLive()&&!this.is360()&&d.Hls.supportsNativeHls===this._favoriteNativeHls(e)},currentAudioTrack:function(){var e=this.audioTracks(),t=e&&0<e.length?r("filter")(e,{enabled:!0},!0):[];return t&&0<t.length?t[0]:void 0},currentBufferRange:function(){var e=this.media?this.media.buffered():void 0;if(e){for(var t=this.currentTime(),n=0;n<e.length&&!(e.start(n)<=t&&t<e.end(n));)n+=1;if(n<e.length)return{start:e.start(n),end:e.end(n)}}},currentTextTrack:function(){var e=this.textTracks(),t=e&&0<e.length?r("filter")(e,{mode:"showing"},!0):[];return t&&0<t.length?t[0]:void 0},currentTime:function(){try{return this.media&&this._isDash()&&this.isLive()?this.media.dash.mediaPlayer.timeAsUTC()-this.startTime():this.media?this.media.currentTime():0}catch(e){return 0}},destroy:function(){this._ready=!1,this._clear()},duration:function(){var e;if(this.isDVR())if(this._isDash())e=this.media.dash.mediaPlayer.duration();else{var t=this.media.seekable();t&&0<t.length&&(e=t.end(0)-t.start(0))}else if(this.isLive())this.isLive()&&(e=0);else if(void 0===(e=this.media?this.media.duration():void 0)||e===1/0||e===-1/0||e<0){var n=this.getCurrentSource();e=n?n.options.duration:void 0}return e},dvrWindowOffset:function(){if(!this.isLive())return NaN;if(this._isDash()){var e=this.media.dash.mediaPlayer.timeAsUTC(),t=this.media.dash.mediaPlayer.getDVRWindowSize();this.dashSeekable||Number.isNaN(e)||(this.dashSeekable={dashTime:e,timeDiff:Date.now()/1e3-e|0,timeNow:function(){return Date.now()/1e3},start:function(){return this.timeNow()-this.dashTime-this.timeDiff|0}});var n=this.dashSeekable?this.dashSeekable.timeDiff:0,i=this.dashSeekable?this.dashSeekable.start():0;return this.dvrWindowPosition(this.currentTime(),t-n,i)}return this.dvrWindowPosition(this.currentTime(),0|this.duration(),this.seekable().start(0))},dvrWindowPosition:function(e,t,n){var i=t-(e-n|0);return i<0?0:i},enableTextTrack:function(e,t){var n,i=this.textTracks();for(n=0;n<i.length;n++)i[n].mode="hidden";e?(e.mode="showing",t&&(c.set("texttracklang",e.language),c.set("texttrack",!0))):t&&c.set("texttrack",!1)},enableAudioTrack:function(e){e.enabled=!0},ended:function(){return this.media?this.media.ended():void 0},forward:function(e){var t=this.currentTime()+(e||30);if(this.isDVR()){var n=this.seekable();if(n&&0<n.length){var i=n.end(0);this.seek(i<=t?i:t)}}else{var r=this.duration();this.seek(r<t?r:t)}},getCastDeviceName:function(){return this.media?this.media.getCastDeviceName():void 0},getCurrentQuality:function(){return this._currentQuality},getCurrentSource:function(){if(!this._currentSrc&&this.media){var e=this.media.currentSrc();if(e){var t=r("filter")(this._sources,{src:e},!0);this._currentSrc=t&&0<t.length?t[0]:void 0}}return this._currentSrc||(this._sources&&0<this._sources.length?this._sources[0]:void 0)},getCurrentTokenizedSources:function(){return this.media.getCurrentTokenizedSources()},hasTextTracks:function(){return!this.isAudio()&&void 0!==this.currentTextTrack()},initUserSettings:function(){if(!this._startsMuted&&h.hasVolumeControls){var e=c.get("volume"),t=c.get("mute");this.setVolume(e),null!=t?this.mute(t):g.get("mode.mutedPlayback",!1)&&this.mute()}var n=this.textTracks();void 0!==n&&0<n.length?this._setTextTrack():this._textTrackListener=this._once(this.TEXT_TRACK_CHANGE,this._setTextTrack.bind(this))},is360:function(){if(void 0===this._is360){var e=this.getCurrentSource();this._is360=e?e.options.is360:void 0}return this._is360},isAudio:function(){return this.media?this.media.isAudio():void 0},isCasting:function(){return!!this.media&&this.media.isCasting()},isCastReady:function(){return!!this.media&&this.media.isCastReady()},isCurrentlyLive:function(e){if(this.isDVR()){var t=this.seekable();return 0<t.length&&t.end(0)-2*this.DVR_CONFIDENCE_INTERVAL<(e||this.currentTime())}return this.isLive()},isDVR:function(){if(void 0===this._isDVR){var e=this.getCurrentSource();this._isDVR=e?e.options.isDVR:void 0}return this._isDVR},isFlash:function(){return this.elmt&&0<this.elmt.find("object").length},isLive:function(){if(void 0===this._isLive){var e=this.getCurrentSource();this._isLive=e?e.options.isLive:void 0}return this._isLive},isLoading:function(){return this._loading},isMuted:function(){return this.media&&this.media.muted()},isNativeHLS:function(){return d.options.hlsjs.favorNativeHLS},isReady:function(){return this._ready},isSource360Compatible:function(){var e=this.getCurrentSource();return e.mimeType===t.MIME_TYPES.HLS||e.mimeType===t.MIME_TYPES.MP4},isVRActive:function(){if(this.media){var e=this.media.getChild("Canvas");return!!e&&e.VRMode}return!1},launchCasting:function(){},loadAfterQualitySwitch:function(e,t,n){var i=this.media.currentTime();this._sources=e;var r=this._setupKeySystem(e);this.media.autoplay(!0),this.media.src(r),this.media.offset(e[0].options.start,e[0].options.end,!t||this.isLive()&&!this.isDVR()?void 0:t),this._once(this.CAN_PLAY,function(){this.media.isAudio()||this._initTextTrack(),this.media.currentTime()<i&&this.media.offset(e[0].options.start,e[0].options.end,!t||this.isLive()&&!this.isDVR()?void 0:t),l.$broadcast(this.PLAY)}.bind(this))},mute:function(e){this.media&&(h.isTouchDevice||c.set("mute",e),this.media.muted(void 0===e||!!e))},onSeekWhenCasting:function(e){this.seeking=e.seeking,l.$broadcast(this.SEEKING_CHANGED,{duration:this.duration(),currentTime:e.currentTime,seeking:this.seeking}),this.seeking?this._triggerLoading():this._triggerLoadingReady()},onMobileOrientationChanged:function(e){var t=JSON.parse(e);if(!h.isDesktop)try{if(this.media){var n=this.media.getChild("Canvas");n&&(s.chrome&&66<=s.version&&(t[0].rotationRate.alpha=t[0].rotationRate.alpha*Math.PI/180,t[0].rotationRate.beta=t[0].rotationRate.beta*Math.PI/180,t[0].rotationRate.gamma=t[0].rotationRate.gamma*Math.PI/180),n.handleMobileOrientation(t[0]))}}catch(e){o.log("error onMobileOrientationChanged",e)}},pause:function(){this.media&&(void 0!==this._playPromise?this._playPromise.then(function(){this.media.pause()}.bind(this)).catch(function(e){this.media.pause()}.bind(this)):this.media.autoplay&&this.media.pause())},paused:function(){return!this.hasPlayed||this.media&&this.media.paused()},play:function(){if(this.media)if(this.isCasting())this.media.tech_.play();else{if(!this._isDash()&&this.isLive()&&this.isDVR()&&!this.hasPlayed){var e=this.media.currentTime();return this._playPromise=this.media.play(),void a(function(){this.media.currentTime(e)}.bind(this),10)}this._playPromise=this.media.play(),this._isDash()&&this.isLive()&&!this.isDVR()&&a(function(){this.media.dash.mediaPlayer.seek(20)}.bind(this),750)}},playOrReplay:function(){this.media&&(!this.isLive()&&this.media.ended()?this.replay():this.isLive()&&!this.isDVR()&&this.hasPlayed?this._setPlayerAfterForceToLive():this.play())},reload:function(e,t,n,i,r){this._ready=!1,this.hasPlayed=!1,this.metadata=r,this._load(e,t,n,function(){}.bind(this))},replay:function(){this.seek(0),this.play()},rewind:function(e){var t=this.currentTime()-(e||10);if(this.isDVR()){var n=this.seekable();if(n&&0<n.length){var i=n.start(0);this.seek(t<=i?i:t)}}else this.seek(t<0?0:t)},seek:function(e){if(this.media&&(!this.isLive()||this.isDVR()))if(!this.isDVR()&&e>=this.duration()&&(e=this.duration()-1),this._lastTime=this.currentTime(),this.isCasting())this.media.tech_.remotePlayer_.currentTime=e,this.media.tech_.remotePlayerController_.seek(),this.media.currentTime(e);else{if(this._isDash()&&this.media)return this.media.dash.mediaPlayer.seek(e);this.media.currentTime(e)}},seekable:function(){return this._isDash()&&this.media?d.createTimeRanges([[0,this.media.dash.mediaPlayer.getDVRWindowSize()]]):this.media&&!this.isCasting()?this.media.seekable():void 0},seekToAbsoluteTime:function(e,t){var n=g.get("seekOffset",0);this.seekToLive();var i=this._getPassedSecondsToday(),r=i+(i<e?86400:0)-e-t-n;this.rewind(r)},seekToLive:function(){if(this.isDVR()&&!this.isCurrentlyLive()){var e=this.seekable();e&&0<e.length&&this.seek(e.end(0)-this.DVR_CONFIDENCE_INTERVAL/2)}},setVolume:function(e){this.media&&null!=e&&e!==1/0&&e!==-1/0&&!isNaN(e)&&(h.isTouchDevice||c.set("volume",Number(e)),this.media.volume(Number(e)))},startTime:function(){if(!this._startTime&&this.isDVR()){var e=this.duration();this._startTime=e?n().unix()-e:void 0}return this._startTime},stopCasting:function(){this.media&&(this.isCasting()?this.media.tech_.stopCasting():this.media.stopCasting())},textTracks:function(){var e=(document.querySelector("video")||{}).textTracks||[],t=this.media?this.media.textTracks():[],n=[];if((t=0===t.length?e:t)&&0<t.length)for(var i=0;i<t.length;i++)"captions"!==t[i].kind&&"subtitles"!==t[i].kind||!(t[i].cues_&&0<t[i].cues_.length||t[i].language||s.safari&&this._hasEmbededSubtitles(this.media.currentSources())||e)||n.push(t[i]);return n},toggleMute:function(){this.media&&this.mute(!this.media.muted())},togglePlay:function(){this.paused()?this.playOrReplay():this.isCasting()&&this.isLive()?this.stopCasting():this.pause()},toggleVR:function(){if(this.media){var e=this.media.getChild("Canvas");e&&!e.VRMode?(e.enableVR(),this.media.trigger("vrmodeon")):e&&(e.disableVR(),this.media.trigger("vrmodeoff"))}},volume:function(){return this.media?this.media.volume():1},volumeDown:function(e){var t=this.volume()-(e||this.DEFAULT_VOLUME_INCREMENT);this.setVolume(t<=0?0:t),this.mute(t<=0)},volumeMax:function(){return this.setVolume(1)},volumeUp:function(e){var t=this.volume()+(e||this.DEFAULT_VOLUME_INCREMENT);this.setVolume(1<=t?1:t),this.mute(t<=0)},_bind:function(n){return angular.forEach(e,function(e,t){n.on(e,function(){a(function(){l.$broadcast(this[t])}.bind(this))}.bind(this))}.bind(this)),n.isAudio()||(n.audioTracks().addEventListener("change",function(){a(function(){l.$broadcast(this.AUDIO_TRACK_CHANGE)}.bind(this))}.bind(this)),n.audioTracks().addEventListener("addtrack",function(){a(function(){l.$broadcast(this.AUDIO_TRACK_CHANGE)}.bind(this))}.bind(this))),n.eme(),n},_bindTechEvents:function(n){angular.forEach(i,function(e,t){n.on(n.tech_,e,function(){a(function(){this.media&&l.$broadcast(this[t])}.bind(this),0)}.bind(this))}.bind(this))},_checkLoadedMetadataEventTriggered:function(){this.media&&!this._isDash()&&(this._watchMediaDuration=l.$watch(function(){return this.media.duration()}.bind(this),function(e){e===1/0&&this.media.handleTechLoadedmetadata_()}.bind(this)))},_clear:function(){this._clearListeners(),this.media&&"function"==typeof this.media.dispose&&(angular.forEach(e,function(e,t){this.media.off(e)}.bind(this)),this.media.dispose(),angular.element(this.elmt).remove()),this.elmt=void 0,this.media=void 0,this._clearState()},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clearState:function(){this.seeking=!1,this.hasPlayed=!1,this._sources=void 0,this._isDVR=void 0,this._is360=void 0,this._isLive=void 0,this._currentSrc=void 0,this._initialSeek=void 0,this._startTime=void 0,this._lastTime=0,this._startsMuted=!1,this._loading=!0,this._textTrackListener=void 0},_delayeLoadingEvent:function(e,t){var n=["_loadingTimeout","_readyTimeout"],i=n[e?1:0],r=n[e?0:1];this[i]&&(a.cancel(this[i]),this[i]=void 0),this[r]||(this[r]=a(function(){l.$broadcast(this._loading?this.LOADING:this.LOADING_READY)}.bind(this),t))},_checkVideoElTextTracks:function(){var e=document.querySelector("video").textTracks;return void 0!==e&&0<e.length},_setVideoELTextTracksVisibility:function(t){var e=document.querySelector("video").textTracks;void 0!==e&&0<e.length&&angular.forEach(e,function(e){e.mode=t?"showing":"hidden"})},_favoriteNativeHls:function(e){var t=0<r("filter")(e,{options:{isDVR:!0}},!0).length;return!t&&h.supportsNativeHLS||t&&h.supportsNativeHLSDVR},_getPassedSecondsToday:function(){return 60*(60*n().hours()+n().minutes())+n().seconds()},_getTextTrackFromLanguage:function(e,t){if(e&&0<e.length){var n=r("filter")(e,{language:t.substr(0,2)},!0);if((n=0===n.length?r("filter")(e,{language:t},!0):n)&&1===n.length)return n[0]}},_hasEmbededSubtitles:function(e){return 0<r("filter")(e,function(e){return!!(e._options&&e._options.subtitleInformationlist||e.subtitleInformationlist)}).length},_initListeners:function(){this._on(this.SEEKING,function(){this.seeking||(this.seeking=!0,l.$broadcast(this.SEEKING_CHANGED,{duration:this.duration(),currentTime:this._lastTime,seeking:this.seeking}),this._triggerLoading())}.bind(this)),this._on(this.SEEKED,function(){this.seeking&&(this.seeking=!1,l.$broadcast(this.SEEKING_CHANGED,{duration:this.duration(),currentTime:this.currentTime(),seeking:this.seeking}),this._triggerLoadingReady())}.bind(this)),this._on(this.WAITING,function(){this.hasPlayed&&(this._triggerLoading(),this._once(this.PLAYING,this._triggerLoadingReady.bind(this)))}.bind(this)),this._on(this.LOADING_READY,function(){void 0===this._wasMuted||this._wasMuted||(this.mute(!1),this._wasMuted=void 0)}.bind(this)),this._on(this.PLAY,function(){this.hasPlayed=!0}.bind(this)),this._on(this.LOADED_METADATA,function(){void 0!==this._watchMediaDuration&&this._watchMediaDuration()}.bind(this)),this._on(this.DURATION_CHANGE,function(){this._startTime=void 0}),this._on(this.CHROMECAST_FORCE_TO_LIVE,function(){this._setPlayerAfterForceToLive()}.bind(this)),this._on(this.MEDIA_READY,function(){this._initQualityListeners(),s.safari&&d.browser.IS_IOS&&this.togglePlay()}.bind(this)),this._on(this.FULL_SCREEN_CHANGE,function(){s.safari&&d.browser.IS_IOS&&l.$broadcast(this.TEXT_TRACK_CHANGE)}.bind(this)),this._once(this.CAN_PLAY,function(){this.media.isAudio()||a(function(){this._initTextTrack()}.bind(this),500)}.bind(this)),this._on(this.PLAYING,function(){this.firstPlayForIos=!1}.bind(this)),this._on(this.AUDIO_TRACK_CHANGE,function(){this._loading&&(this._loading=!1,l.$broadcast(this.LOADING_READY)),this.media.isAudio()||h.isIpad||d.browser.IS_IOS||this._setVideoELTextTracksVisibility(!1)}.bind(this))},_addExternalSubtitles:function(e){var t=r("filter")(this.media.textTracks().tracks_,function(e){return"subtitles"===e.kind||"captions"===e.kind});if(void 0!==t&&0<t.length&&angular.forEach(t,function(e){this.media.removeRemoteTextTrack(e)}.bind(this)),this._setVideoELTextTracksVisibility(!1),e){angular.forEach(e,function(e){this.media.addRemoteTextTrack(e)}.bind(this));var n=0,i=setInterval(function(){(0<this.textTracks().length||1500<n)&&(l.$broadcast(this.TEXT_TRACK_CHANGE),clearInterval(i)),n++}.bind(this),10)}},_initTextTrack:function(e){if(this.hasEmbededSubtitles=!1,this._hasEmbededSubtitles(this.media.currentSources())||this._checkVideoElTextTracks()&&!this._isDash()){this.hasEmbededSubtitles=!0;var t=0,n=setInterval(function(){(0<this.textTracks().length||1500<t)&&(this._setVideoELTextTracksVisibility(!1),l.$broadcast(this.TEXT_TRACK_CHANGE),clearInterval(n)),t++}.bind(this),10)}else{var i=e||void 0!==this.metadata.subtitles&&0<this.metadata.subtitles.length?this.metadata.subtitles:void 0;void 0===i||this._addExternalSubtitles(i)}},_initQualityListeners:function(){var t;"application/dash+xml"===this.getCurrentSource().mimeType?t=l.$watch(function(){return this.media.dash.mediaPlayer}.bind(this),function(e){e&&(this.media.dash.mediaPlayer.on(window.dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(e){this._currentQuality=e.newQuality}.bind(this)),t())}.bind(this)):"application/x-mpegURL"===this.getCurrentSource().mimeType&&(t=l.$watch(function(){return this.media.qualityLevels()}.bind(this),function(e){e&&(this._currentQuality=e.selectedIndex,e.addEventListener("change",function(e){this._currentQuality=e.selectedIndex}.bind(this)),t())}.bind(this)))},_isDash:function(){return"application/dash+xml"===this.getCurrentSource().mimeType},_isShortClip:function(e){var t;return angular.forEach(e,function(e){t=void 0===t||e.options.duration>t?e.options.duration:t}),t<g.get("mode.shortClipThreshold",40)},_load:function(e,t,n,i){this._wasMuted=this.isMuted(),this._clearState(),this._clearListeners(),this._triggerLoading(),this._sources=e;var r=this._setupKeySystem(e);this.media.src(r),l.$broadcast(this.LOAD_SOURCE),this._initListeners(),this.media.offset(e[0].options.start,e[0].options.end,!t||this.isLive()&&!this.isDVR()?void 0:t),this._checkLoadedMetadataEventTriggered(),this._once(this.LOADED_METADATA,function(){this._triggerLoadingReady(),i(),0===t&&this._setStartToLive(),this._startMedia();try{h.hasAutoplay?this.media.autoplay(n):n&&this.hasPlayed&&this.media.autoplay(!0)}catch(e){l.$broadcast(this.PAUSE,{ignoreStats:!0})}}.bind(this))},_on:function(e,n){var t=function(e,t){this.elmt&&n(e,t)}.bind(this),i=l.$on(e,t);return this._listeners.push(i),i},_once:function(e,n){var i=l.$on(e,function(e,t){this.elmt&&n(e,t),i()}.bind(this))},_removeListener:function(e){var t=this._listeners.indexOf(e);void 0!==t&&(e(),this._listeners.splice(t,1),this._textTrackListener=void 0)},_setStartToLive:function(){a(function(){if(this.isLive()&&this.isDVR()&&!this.hasPlayed){var e=this.seekable();if(e&&0<e.length){var t=e.end(0)-this.DVR_CONFIDENCE_INTERVAL/2;this._isDash()?this.media.dash.mediaPlayer.seek(t):this.media.currentTime(t)}}}.bind(this),100)},_setPlayerAfterForceToLive:function(){l.$broadcast(this.FORCE_TO_LIVE),this._load(this._sources,void 0,!0,function(){});a(function(){this.play()}.bind(this),100)},_setTextTrack:function(){var e=this.textTracks(),t=c.get("texttracklang"),n=g.get("mode.activateTextTrack"),i=[t,m.locale],r=c.get("texttrack");if(n&&!t&&(i.push(f.locale),i.push("en")),null==r||!0===r){var a,s;for(a=0;a<i.length&&!s;a++){var o=i[a];null!=o&&(s=this._getTextTrackFromLanguage(e,o))}s&&this.enableTextTrack(s,!1)}void 0!==this._textTrackListener&&this._removeListener(this._textTrackListener)},_setup360:function(e){this.is360()&&h.supports360&&this.isSource360Compatible()&&(e.panorama={clickToToggle:h.isDesktop,backToVerticalCenter:!1,backToHorizonCenter:!1,showNotice:!1,clickAndDrag:!0,autoMobileOrientation:h.supportsVR,initFov:100})},_setupKeySystem:function(e){var t=[];return angular.forEach(e,function(e){var i={};i.src=e.src,i.type=e.mimeType,i.tokenType=e.options.tokenType,i.subtitleInformationlist=e.options.subtitleInformationlist,e._keySystems&&(-1===i.type.indexOf("dash")&&(i.keySystems=e._keySystems),i.keySystemOptions=[],angular.forEach(e._keySystems,function(e,t){var n={};n.name=t,n.options={serverURL:e},i.keySystemOptions.push(n)})),t.push(i)}),t},_setupPlugins:function(e,t){var n={offset:{start:e[0].options.start,end:e[0].options.end,starttime:!this.isLive()||this.isDVR()?t:void 0},tokenize:{host:g.get("local")},ttml:{},chromecast:{appID:g.get("chromecastReceiverAppId"),urn:this.metadata.urn._str,server:g.get("ilEnabled")?g.get("il"):g.get("mmf"),title:this.metadata.title,subtitle:"",metadata:this.metadata}};return this._setup360(n),n},_startMedia:function(){this.hasPlayed&&!this.media.autoplay()||this._triggerLoadingReady(),this._ready=!0,l.$broadcast(this.MEDIA_READY)},_triggerLoading:function(){this._loading||(this._loading=!0,l.$broadcast(this.LOADING))},_triggerLoadingReady:function(){!this.seeking&&this._loading&&(this._loading=!1,l.$broadcast(this.LOADING_READY))}},Object.defineProperties(_.prototype,{}),new _}]),angular.module("srgPlayer").factory("srgMessageApi",["$rootScope","$window","$log","fullscreenService","UUID","srgCookieService","srgMediaService","srgSegmentsService","srgSegmentsEventService","srgMetadataService","srgLoaderService","srgSocialPayloadService","srgVideo360Service","bowser","$timeout",function(u,e,a,c,t,d,h,f,p,m,n,i,g,v,_){return{NAME_SPACE:"srg.player",_id:new t,_methods:void 0,_status:{src:e.location.toString(),loaded:!1,seekable:!1,isCurrentlyLive:!1},connect:function(){this._initialized||(this._invokeRemoteMethod("bridge.ready",this._status),this._invokeRemoteMethod("ready"),this._initAPIMethods(),this._initListeners(),this._initInvokers(),this._initialized=!0)},_initAPIMethods:function(){this._methods={"bridge.init":function(){this._invokeRemoteMethod("bridge.ready",this._status),this._invokeRemoteMethod("ready")}.bind(this),"player.play":h.play.bind(h),"player.load":n.loadURN.bind(n),"player.stop":h.pause.bind(h),"player.pause":h.pause.bind(h),"player.mute":h.mute.bind(h),"player.seek":h.seek.bind(h),"player.seekToAbsoluteTime":h.seekToAbsoluteTime.bind(h),"player.volume":h.setVolume.bind(h),"player.getVolume":h.volume.bind(h),"player.volumeUp":h.volumeUp.bind(h),"player.volumeDown":h.volumeDown.bind(h),"player.isCurrentlyLive":h.isCurrentlyLive.bind(h),"player.isLoaded":function(){return this._status.loaded}.bind(this),"player.isSeekable":function(){return this._status.seekable}.bind(this),"player.hasSegments":function(){return m.hasDisplayableSegments()},"player.getUrn":function(){var e=m.getUrn();return e?e.str:void 0},"player.getCurrentTime":function(){return Math.round(1e3*h.currentTime())/1e3},"player.getMetadata":m.getPublicMetadata.bind(m),"player.setSocialDataPayload":i.setSocialDataPayload.bind(i),"player.focus":e.focus.bind(e)}},_invokeRemoteMethod:function(e,t){"function"==typeof t&&(t=t()),u.$emit("$messageOutgoing",this.NAME_SPACE+"."+e+":"+this._id.toString()+(void 0!==t||null!==t?":"+angular.toJson(t):""));var n={loaded:"loaded",playing:"play",paused:"pause",stopped:"stop",ended:"ended"},i=m.getUrn();e in n?(u.$emit("$messageOutgoing",n[e]),u.$emit("$messageOutgoing",angular.toJson({event:n[e],id:i?i.id:void 0}))):"api.result"===e?u.$emit("$messageOutgoing",angular.toJson({event:t.result,id:i?i.id:void 0})):"cookie"===e&&u.$emit("$messageOutgoing",angular.toJson({event:e,data:t}))},_handleRemoteInvocation:function(e,t){var n,i=this._methods[e];void 0!==i&&void 0!==(n=i.apply(void 0,t instanceof Array?t:[t]))&&this._invokeRemoteMethod("api.result",function(){return{method:e,result:n}})},_initListeners:function(){u.$on("$messageIncoming",function(e,t){var n,i=/^srg\.player\.([^:]+):?(.*)$/.exec(t),r=null;if(i)return r=i[1],n=i[2],void("devicemotionIframe"===r?h.onMobileOrientationChanged(n):"setCookie"===r?d.setCookie(JSON.parse(n)[0]):this._handleRemoteInvocation(r,n?angular.fromJson(n):void 0));if(i=/^srf\.player\.([^:]+):?(.*)/.exec(t)){r=i[1],n=i[2]||null;switch(r){case"mute":this._handleRemoteInvocation("player.mute",[!0]);break;case"unmute":this._handleRemoteInvocation("player.mute",[!1]);break;case"playAudioId":this._handleRemoteInvocation("player.load",["urn:srf:audio:"+n]);break;case"getMetaData":a.warn("getMetaData is not supported anymore. Please migrate to new API.");break;default:this._handleRemoteInvocation("player."+({volumeup:"volumeUp",volumedown:"volumeDown",currenttime:"getCurrentTime"}[r]||r),n?[n]:void 0)}}}.bind(this))},_initInvokers:function(){var e=function(e,t){return this._invokeRemoteMethod.bind(this,e,t)}.bind(this),t=function(){var e=m.getUrn();return{urn:e?e.str:void 0}},n=function(){this._status.loaded||(this._status.loaded=!0,this._invokeRemoteMethod("loaded",m.getPublicMetadata()))}.bind(this),i=function(){this._status.loaded||(this._status.loaded=!0)}.bind(this),r=function(){n(),this._invokeRemoteMethod("error")}.bind(this),a=function(){i()}.bind(this),s=function(){if(h.isDVR()){var e=h.isCurrentlyLive();this._status.isCurrentlyLive!==e&&(this._status.isCurrentlyLive=e,this._invokeRemoteMethod("timeshift_changed",e))}}.bind(this),o=function(){this._invokeRemoteMethod("360.status",function(){return{method:"360.status",result:g.isPlayerAPISendEnabled()}})}.bind(this),l=function(){this._invokeRemoteMethod("media_seekable"),this._status.seekable=!0}.bind(this);u.$on(m.METADATA_LOADING,function(e,t){this._status.seekable=!1,this._status.loaded=!1,this._invokeRemoteMethod("loading",t.urn.str)}.bind(this)),u.$on(m.METADATA_RELOADING,function(){this._status.seekable=!1,this._status.loaded=!1}.bind(this)),u.$on(h.MEDIA_READY,n),u.$on(g.ENABLED,o),u.$on(g.DISABLED,o),u.$on(d.GET_COOKIE,function(e,t){this._invokeRemoteMethod("cookie",t)}.bind(this)),u.$on(p.HAS_SEGMENTS,function(e,t){this._invokeRemoteMethod("has_segments",t)}.bind(this)),u.$on(f.DISPLAYABLE_SEGMENT_CHANGED,function(e,t){this._invokeRemoteMethod("segment_change",t.isFull?"-1":t.urn.str)}.bind(this)),u.$on(h.TIME_UPDATE,function(){h.hasPlayed&&this._invokeRemoteMethod("time_update",function(){return{seconds:Math.round(1e3*h.currentTime())/1e3,duration:h.duration()}})}.bind(this)),u.$on(m.METADATA_ERROR,r),u.$on(m.METADATA_ERROR_RELOAD,a),u.$on(m.METADATA_BLOCKED,r),u.$on(h.LOADING_READY,function(){this._status.seekable||(v.safari?_(function(){l()}.bind(this),2e3):l())}.bind(this)),u.$on(h.PLAY,e("playing",t)),u.$on(h.PAUSE,e("paused",t)),u.$on(h.PAUSE,e("stopped",t)),u.$on(h.ENDED,e("ended",t)),u.$on(h.ERROR,r),u.$on(c.EXIT_FULLSCREEN,e("exit_fullscreen",t)),u.$on(h.SEEKING_CHANGED,function(e,t){this._invokeRemoteMethod("seeking_change",{seeking:t.seeking,time:t.currentTime})}.bind(this)),u.$on(h.SEEKED,s),u.$on(h.SEEKING,s),u.$on(h.TIME_UPDATE,s),u.$on(h.LOADING_READY,s)}}}]),angular.module("srgPlayer").factory("srgMetadataService",["$rootScope","$log","$filter","bowser","FlashDetect","device","srgConfigService","srgDatasourceService","srgUtils","SourceAsset",function(n,i,a,e,t,r,s,o,l,u){return{METADATA_ERROR:"srg-metadata-error",METADATA_ERROR_RELOAD:"srg-metadata-error-reload",METADATA_BLOCKED:"srg-metadata-blocked",METADATA_LOADING:"srg-metadata-loading",METADATA_RELOADING:"srg-metadata-reloading",METADATA_READY:"srg-metadata-ready",METADATA_UPDATED:"srg-metadata-updated",_metadata:void 0,_urn:void 0,_publicMetadata:void 0,_qualities:void 0,_sources:void 0,_hasDVR:void 0,_hasDisplayableSegments:void 0,_clear:function(){this._urn=void 0,this._qualities=void 0,this._sources=void 0,this._hasDVR=void 0,this._metadata=void 0,this._publicMetadata=void 0,this._hasDisplayableSegments=void 0},_clearBeforeReload:function(){this._metadata=void 0,this._hasDisplayableSegments=void 0,this._publicMetadata=void 0},destroy:function(){this._clear()},init:function(e){var t=o.getServiceProvider().audioVideoProvider;this._clear(),this._urn=e,n.$broadcast(this.METADATA_LOADING,{urn:e}),t.requestAsset(e).then(this._handleSuccess.bind(this),this._handleError.bind(this))},reload:function(){var e=o.getServiceProvider().audioVideoProvider;n.$broadcast(this.METADATA_RELOADING,{urn:this._urn}),e.requestAsset(this._urn).then(this._handleReloadSuccess.bind(this),this._handleReloadError.bind(this))},broadcastEndDate:function(){n.$broadcast(this.METADATA_BLOCKED,{errorCode:"ENDDATE",blocked:!0})},isDRM:function(){var n=!1;return angular.forEach(this._metadata.sources,function(e,t){e.hasOwnProperty("_keySystems")&&(n=!0)}),n},_handleSuccess:function(e){this._metadata=e.data,this._publicMetadata=this._parsePublicMetadata(this._metadata),this._metadata.block.isBlocked?(i.error("Playback is blocked, reason is: "+this._metadata.block.reason),n.$broadcast(this.METADATA_BLOCKED,{errorCode:this._metadata.block.reason,blocked:!0})):0===this.getAllSources().length&&(this.hasFlashSources()?(i.error("Flash is required, aborting playback."),n.$broadcast(this.METADATA_ERROR,{errorCode:"INSTALL_FLASH"})):(i.error("Cannot find a source compatible for this browser, aborting playback."),n.$broadcast(this.METADATA_ERROR,{errorCode:"MISSING_STREAM"}))),this.isDRM()&&!r.supportsDRM&&n.$broadcast(this.METADATA_ERROR,{errorCode:"DRM_NOT_SUPPORTED",mediaType:this._metadata.isLive}),n.$broadcast(this.METADATA_READY,{httpStatusCode:e.httpStatusCode,nbrRetries:e.nbrRetries,url:e.url})},_handleReloadSuccess:function(e){this._clearBeforeReload(),this._metadata=e.data,this._publicMetadata=this._parsePublicMetadata(this._metadata),n.$broadcast(this.METADATA_UPDATED,{nbrRetries:e.nbrRetries})},hasFlashSources:function(){if(void 0===this._hasFlashSources){var e=this._getSourcesByType([u.MIME_TYPES.HDS]);e=e.concat(this._getRTMPSources()),this._hasFlashSources=0<e.length}return this._hasFlashSources},_handleError:function(e){n.$broadcast(this.METADATA_ERROR,{errorCode:"IL_ERROR_"+e.errorCode,nbrRetries:e.nbrRetries})},_handleReloadError:function(e){n.$broadcast(this.METADATA_ERROR_RELOAD,{errorCode:"IL_ERROR_"+e.errorCode,nbrRetries:e.nbrRetries})},requestEndScreenMedia:function(e){var t=o.getServiceProvider().endscreenProvider,n=s.get("mode.endScreenParams.endScreenPageSize");return t.requestAsset(this._metadata.urn,e,{pageSize:n}).then(function(e){return e.data},function(){return i.error("Cannot retrieve end screen data"),[]})},getMetadata:function(){return this._metadata},getUrn:function(){return this._urn},getPublicMetadata:function(){return this._publicMetadata},isSegment:function(){return this._metadata&&!this._metadata.isFull&&!this._metadata.isLive},hasSegments:function(){return this._metadata&&0<this._metadata.segments.length},hasDisplayableSegments:function(){return this._metadata&&void 0===this._hasDisplayableSegments&&(this._hasDisplayableSegments=this._metadata.hasDisplayableSegments&&(!this._metadata.isLive||s.get("mode.liveWithSegments",!1))),this._hasDisplayableSegments},getAllSources:function(){if(!this._sources){var e=this._getProgressiveSources(),t=this._getAdaptativeSources(),n=this._getStreamingSources(),i=s.get("mode.preferProgressive",!1)||"audio"===this._urn.assetType&&!this._metadata.isLive,r=s.get("preferDRM",!1);i&&0<e.length&&0===a("filter")(e,{options:{is360:!0}},!0).length?this._sources=e:0<t.length?this._sources=t:0<e.length?this._sources=e:this._sources=n,this._sources=a("orderBy")(this._sources,(r?"+":"-")+"_keySystems")}return this._sources},getSources:function(e){e=e||this.getQualities()[0];var t=a("filter")(this.getAllSources(),{options:{quality:e}},!0);return t.quality=e,t},getQualities:function(){if(!this._qualities){var n=["HD","MD","SD"];this._qualities=[],angular.forEach(this.getAllSources(),function(e){-1===this._qualities.indexOf(e.options.quality)&&this._qualities.push(e.options.quality)}.bind(this)),this._qualities=a("orderBy")(this._qualities,function(e){var t=n.indexOf(e);return-1!==t?t:1/0})}return this._qualities},hasDVR:function(){if(void 0===this._hasDVR){var e=this.getAllSources();this._hasDVR=0<a("filter")(e,{options:{isDVR:!0}},!0).length}return this._hasDVR},_getSourcesByType:function(n){var e=a("filter")(this._metadata.sources,function(e){return-1!==n.indexOf(e.mimeType)});return e=r.supportsDVR&&s.get("mode.dvr."+this._urn.assetType,!1)?a("orderBy")(e,"-options.isDVR"):a("filter")(e,function(e){return!e.options.isDVR}),r.supportsNativeHLS||(e=a("orderBy")(e,[function(e){var t=n.indexOf(e.mimeType);return-1!==t?t:1/0},"-options.isDVR"])),e},_getRTMPSources:function(){return a("filter")(this._metadata.sources,{options:{isRTMP:!0}})},_avoidHLS:function(e){var t=s.get("mode.avoidFlash",!1);return!(r.supportsNativeHLS||e&&r.supportsMSEHLS||r.supportsMSEHLS&&t)},_ignoreFlashSources:function(){return!t.installed||e.safari&&6<=e.version},_getAdaptativeSources:function(){var e,t,n=[u.MIME_TYPES.DASH,u.MIME_TYPES.HLS];return this._ignoreFlashSources()||n.push(u.MIME_TYPES.HDS),e=this._getSourcesByType(n),t=0<a("filter")(e,{options:{isDVR:!0}},!0).length,this._avoidHLS(t)&&(e=a("filter")(e,{mimeType:"!"+u.MIME_TYPES.HLS})),e},_getStreamingSources:function(){return this._ignoreFlashSources()?[]:this._getRTMPSources()},_getProgressiveSources:function(){return this._getSourcesByType([u.MIME_TYPES.MP3,u.MIME_TYPES.AAC,u.MIME_TYPES.OGG,u.MIME_TYPES.MP4])},_parsePublicMetadata:function(e){var t,n={},i=a("filter")(e.segments,{displayable:!0,isFull:!1},!0);return n.urn=e.urn.str,n.type=e.type,n.id=e.id,n.title=e.title,n.description=e.description,n.related=e.related,n.assetSetTitle=e.assetSet?e.assetSet.title:void 0,n.rubricTitle=e.rubric?e.rubric.title:void 0,n.showTitle=e.show?e.show.title:void 0,n.publishedDate=e.publishedDate,n.image=e.imageSrc,n.imageCopyright=e.imageCopyright,n.url=l.generatePlayUrl(e.urn),n.qualities=this.getQualities(),n.duration=e.duration,n.hasHD=-1!==n.qualities.indexOf("HD"),n.isBlocked=e.block.isBlocked,n.isFull=e.isFull,n.isLive=e.isLive,n.eventData=e.eventData,n.segments=[],angular.forEach(i,function(e){var t={};t.id=e.urn.id,t.urn=e.urn.str,t.duration=e.duration,t.isBlocked=e.block.isBlocked,t.title=e.title,t.description=e.description,t.image=e.imageSrc,t.imageCopyright=e.imageCopyright,t.related=e.related,t.eventData=e.eventData,n.segments.push(t)}),void 0!==(t=e.isFull||e.isLive?e:(t=a("filter")(e.segments,{isFull:!0},!0))&&0<t.length?t[0]:void 0)&&(n.fullSegment={},n.fullSegment.id=t.urn.id,n.fullSegment.urn=t.urn.str,n.fullSegment.duration=t.duration,n.fullSegment.isBlocked=t.block.isBlocked,n.fullSegment.title=t.title,n.fullSegment.description=t.description,n.fullSegment.image=t.imageSrc,n.fullSegment.imageCopyright=t.imageCopyright,n.fullSegment.related=t.related,n.fullSegment.eventData=t.eventData),n}}}]),angular.module("srgPlayer").factory("srgPerformanceReportService",["$document","$http","$rootScope","$window","$timeout","moment","device","bowser","S","$q","URI","platformResolver","srgConfigService","srgMetadataService","srgMediaService","SourceAsset",function(e,t,n,i,r,a,s,o,l,u,c,d,h,f,p,m){return{init:function(e){this._clear(),this._performanceReportInit(),this._performanceReport.urn=f.getUrn()?f.getUrn()._str:e,this._initListeners()},_clear:function(){this._clearListeners(),this._sent=!1,this._startOverall=void 0,this._startMetadataLoad=void 0,this._startMediaLoad=void 0,this._startMediaEncrypted=void 0,this._endMediaEncrypted=void 0},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_duration:function(e){return a()-e},_getKeySystem:function(){var e;return s.isChromium||o.chrome||o.firefox||o.opera?e=p.getCurrentSource()._keySystems[m.DRM_VENDORS.WIDEVINE]:o.windows&&o.msedge?e=p.getCurrentSource()._keySystems[m.DRM_VENDORS.PLAYREADY]:o.safari&&(e=p.getCurrentSource()._keySystems[m.DRM_VENDORS.FAIRPLAY].licenseUri),e},_initListeners:function(){this._startOverall||(this._startOverall=a()),this._on(f.METADATA_LOADING,function(){this._startMetadataLoad=a()}.bind(this)),this._on(f.METADATA_READY,function(e,t){var n={duration:this._duration(this._startMetadataLoad),url:t.url,playableAbroad:f.getMetadata().playableAbroad,httpStatusCode:t.httpStatusCode};this._performanceReport.ilResult=n}.bind(this)),this._on(f.METADATA_BLOCKED,function(e,t){var n={blockReason:t.errorCode?t.errorCode:"UNKNOW",duration:this._duration(this._startMetadataLoad),url:t.url,playableAbroad:f.playableAbroad,httpStatusCode:t.httpStatusCode};this._performanceReport.ilResult=n,this._sendPerformanceReport()}.bind(this)),this._on(p.LOAD_SOURCE,function(){this._startMediaLoad=a()}.bind(this)),this._on(p.MEDIA_READY,function(){var e=p.getCurrentSource().src;this._tokenizedSource(p.getCurrentTokenizedSources(),e),this._performanceReport.playerResult={duration:this._duration(this._startMediaLoad),url:e},f.isDRM()&&!o.msie?(this._monitoring=i.getMonitoring(),this._monitoring&&!this._monitoring.isSended()?this._monitoring.addEventListener(this._monitoring.LICENCE_SERVER_MONITORING_RESULT.type,function(e){this._performanceReport.drmResult={url:this._getKeySystem(),duration:e.result.duration,httpStatusCode:e.result.response.status},this._sendPerformanceReport()}.bind(this)):(this._performanceReport.drmResult={url:this._getKeySystem()},this._sendPerformanceReport())):this._sendPerformanceReport()}.bind(this)),this._on(p.ERROR,function(){this._performanceReport.playerResult={duration:this._duration(this._startMediaLoad),errorMessage:"failure_media_error"},this._sendPerformanceReport()}.bind(this)),angular.forEach([f.METADATA_ERROR,f.METADATA_ERROR_RELOAD],function(e){this._on(e,function(e,t){var n={duration:this._duration(this._startMetadataLoad),errorMessage:t.errorCode?t.errorCode.toLowerCase():"unknown",httpStatusCode:t.httpStatusCode,url:t.url};this._performanceReport.ilResult=n,this._sendPerformanceReport()}.bind(this))}.bind(this))},_performanceReportInit:function(){this._performanceReport={},this._performanceReport={browser:d.browser().name+"/"+d.browser().version,clientTime:a().format(),device:i.navigator.userAgent,platform:d.platform(),referer:e.referrer||"",screenType:"local",version:1}},_on:function(e,t){this._listeners.push(n.$on(e,t))},_sendPerformanceReport:function(){if(h.get("performancereport.enabled",!1)&&!this._sent){var e=h.get("performancereport.host");this._performanceReport.browser=d.browser().name+"/"+d.browser().version,this._performanceReport.player="TP/web/"+h.PLAYER_VERSION,this._performanceReport.environment=h.get("env"),this._performanceReport.duration=this._duration(this._startOverall),this._sent=!0,this._clearListeners(),t({method:"POST",url:e,headers:{"Content-Type":"application/json"},data:this._performanceReport||{}})}},_tokenizedSource:function(e,t){for(var n,i=0;i<e.length;i++)e[i].rawSrc===t&&(n=e[i]);if(n._response){var r={duration:0<n._timeResult?n._timeResult.toFixed(0):void 0,httpStatusCode:n._response.statusCode,url:n._response.url};400<n._response.statusCode&&(r.errorMessage="VJS-SRG-TOKEN: An error occurred while retrieving the token"),this._performanceReport.tokenResult=r}else delete this._performanceReport.tokenResult}}}]),angular.module("srgPlayer").factory("srgPerformanceService",["$rootScope","$http","moment","bowser","S","URI","platformResolver","playerParams","srgConfigService","srgMediaService","srgMetadataService",function(n,l,a,u,s,c,d,e,h,f,p){return{_BLOCKED_PREFIX:"blocked_",_SUCCESS:"success",_DELAYED_SUCCESS:"delayed_success_",_RETRY_SUCCESS:"retry_success_",_IL_ERROR:"failure_il",_IL_NOT_FOUND:"failure_il_not_found",_IL_TIMEOUT:"failure_il_timeout",_IL_INCOMPLETE_DATA:"failure_il_incomplete_datas",_MEDIA_NOT_FOUND:"failure_media_not_found",_MEDIA_FORBIDDEN:"failure_media_forbidden",_MEDIA_ERROR:"failure_media_error",_DRM_NOT_SUPPORTED:"failure_drm_not_supported",_CONFIG_LOADED:"config_load",_TRANSLATION_LOADED:"translation_load",_IL_LOADED:"il_load",_MEDIA_LOADED:"media_load",init:function(e){this._clear(),this._urn=e,this._initSenders()},destroy:function(){this._clear()},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clear:function(){this._clearListeners(),this._urn=void 0,this._sent=!1,this._start=void 0},_on:function(e,t){this._listeners.push(n.$on(e,t))},_sendStats:function(e,t){if(h.get("mediaplaystat.enabled",!1)){var n=h.get("local"),i=p.getUrn()?p.getUrn():this._urn,r=t&&!0===t?"live":f.isLive()?"live":"ondemand",a=u.name||navigator.userAgent||"unknown",s=u.version||"unknown",o=d.platform()||"unknown";this._sent=!0,this._clearListeners(),l({method:"POST",url:n+"/media-play-stat/"+[i.bu,e,i.assetType,"tech-player",r,a,s,o].join("/"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.buildQuery(t||{})})}},_initSenders:function(){this._on(f.PLAY,function(){this._start||(this._start=a())}.bind(this)),this._on(p.METADATA_READY,function(e,t){this._nbrRetries=t.nbrRetries||0}.bind(this)),this._on(f.LOADING_READY,function(){var e,t=a()-this._start,n=Math.floor(t/5e3);!this._sent&&this._start&&(e=0<this._nbrRetries?this._RETRY_SUCCESS+this._nbrRetries:0<n?this._DELAYED_SUCCESS+n:this._SUCCESS,h.get("mediaplaystat.success.enabled",!1)&&this._sendStats(e,void 0))}.bind(this));var i=e.autoplay,r=function(e,t,n){this._sent||(f.hasPlayed||i||!0===t?this._sendStats(e,n):this._on(f.PLAY,function(){this._sent||this._sendStats(e,n)}.bind(this)))}.bind(this);this._on(f.ERROR,function(){r(this._MEDIA_ERROR)}.bind(this)),angular.forEach([p.METADATA_ERROR,p.METADATA_ERROR_RELOAD],function(e){this._on(e,function(e,t){var n={MISSING_STREAM:this._IL_INCOMPLETE_DATA,IL_ERROR_404:this._IL_NOT_FOUND,INSTALL_FLASH:this._INSTALL_FLASH,DRM_NOT_SUPPORTED:this._DRM_NOT_SUPPORTED},i=s(t.errorCode).startsWith("IL_ERROR_");r(n[t.errorCode]||this._IL_ERROR,i,t.mediaType)}.bind(this))}.bind(this)),this._on(p.METADATA_BLOCKED,function(e,t){var n=t.errorCode?t.errorCode.toLowerCase():"unknown";r(this._BLOCKED_PREFIX+n)}.bind(this))}}}]),angular.module("srgPlayer").factory("srgPipService",["$rootScope","$timeout","device","srgMediaService","srgMetadataService","$log",function(e,t,n,i,r,a){return{ENABLED:"srg-pip-enabled",DISABLED:"srg-pip-disabled",PIP_MODE_ON:"pip-mode-on",PIP_MODE_OFF:"pip-mode-off",enabled_:!1,videoElmt_:void 0,metadata:void 0,init:function(){n.hasPipMode&&(this.metadata=r.getMetadata(),"video"===this.metadata.urn.assetType&&(this.videoElmt_=this._getVideoPlayer(),this.enabled_=!(!this.videoElmt_.webkitSupportsPresentationMode||"function"!=typeof this.videoElmt_.webkitSetPresentationMode),e.$broadcast(this.enabled_?this.ENABLED:this.DISABLED)))},_getVideoPlayer:function(){return i.elmt.find("video")[0]},destroy:function(){this._clear()},_clear:function(){this.enabled_=!1,this.videoElmt_=void 0},isEnabled:function(){return this.enabled_},isPip:function(){return!!this.enabled_&&"picture-in-picture"===this.videoElmt_.webkitPresentationMode},goPictureInPicture:function(){this.videoElmt_.webkitSupportsPresentationMode&&"function"==typeof this.videoElmt_.webkitSetPresentationMode&&this.videoElmt_.webkitSetPresentationMode("picture-in-picture"===this.videoElmt_.webkitPresentationMode?"inline":"picture-in-picture")},updatePipState:function(){e.$broadcast("picture-in-picture"===this.videoElmt_.webkitPresentationMode?this.PIP_MODE_ON:this.PIP_MODE_OFF)}}}]),angular.module("srgPlayer").factory("srgPipeService",["$cookies","$window","$document","$location","$rootScope","moment","fullscreenService","localStorageService","playerParams","srgConfigService","srgMediaService","srgMetadataService","srgPipService",function(e,a,s,l,n,u,t,i,o,c,d,h,r){return{_MEDIA_PLAY:"media_play",_MEDIA_PAUSE:"media_pause",_MEDIA_STOP:"media_stop",_MEDIA_SEEK:"media_seek",_MEDIA_HEARTBEAT:"media_heartbeat",_RECOMMENDATION_DISPLAYED:"recommendation_displayed",_RECOMMENDATION_HIT:"recommendation_hit",_MEDIA_SHARE:"media_share",_MEDIA_LIKE:"media_like",GET_PIPE_ST_COOKIE:"_pipe_st",GET_PIPE_C_COOKIE:"_pipe_c",PEACH_INFOS_COOKIE:"peach_infos",_domain:"",_peachImplementationVersion:"1.0.5",_startCurrentTime:0,init:function(){this._clear(),this._initPipe()},_on:function(e,t){this._listeners.push(n.$on(e,t))},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clear:function(){this._clearListeners(),this._startedSeekingAt=void 0,this._finishedSeekingAt=void 0,this._lsUserId=void 0,this._cookiesLoaded=!1,this._deferredEvents=[],this._domain=void 0},destroy:function(){this._clear()},_getDomain:function(){var e=l.host().split("."),t=e.length;this._domain=e[t-2]+"."+e[t-1]},_gatherAllLabelsAndSend:function(e,t){a._pipe&&(a._pipe("collect",e,this._getEventLabels(e,t)),e===this._MEDIA_SEEK&&this._clearSeekTime())},_notify:function(e,t){this._startCurrentTime||d.isReady()&&(this._startCurrentTime=1e3*d.startTime()),d.isCasting()||(this._cookiesLoaded?this._gatherAllLabelsAndSend(e,t):this._deferredEvents.push({action:e,socialNetwork:t}))},_notifyRecommendation:function(e,t,n,i,r){!d.isCasting()&&this._cookiesLoaded&&a._pipe&&a._pipe("collect",e,this._getRecommendationLabels(e,t,n,i,r))},_setValueFromCurrentPage:function(){void 0!==e.getObject(this.PEACH_INFOS_COOKIE)&&(this._lsUserId=e.getObject(this.PEACH_INFOS_COOKIE).userId),this._registerPipe(),this._cookiesLoaded=void 0!==e.get(this.GET_PIPE_C_COOKIE),0<this._deferredEvents.length&&(angular.forEach(this._deferredEvents,function(e){"function"==typeof this._gatherAllLabelsAndSend&&this._gatherAllLabelsAndSend(e.action).bind(this)}),this._deferredEvents=[])},_registerPipe:function(){a._pipe("setPeachImplVersion",this._peachImplementationVersion),void 0!==this._lsUserId&&a._pipe("setUserId",this._lsUserId),a._pipe("register",c.get("pipe.sitekey",""))},_getEventLabels:function(e,t){var n=h.getUrn(),i=h.getMetadata(),r=o.recommendation_id,a={id:n.str,event_timestamp:u().valueOf(),props:{},context:{referrer:s[0].referrer,page_uri:l.absUrl(),component:{type:"player",name:"SRG Technical Player",version:c.PLAYER_VERSION}},metadata:{type:n.assetType,format:this._getMediaFormat(),duration:d.isLive()?0:i.duration}};if(r&&""!==r&&(a.context.id="io.ebu.peach:"+r),d.isLive())try{d&&d.seekable()&&"function"==typeof d.seekable().end&&(a.props.playback_position_s=Number((d.seekable().end(0)-d.currentTime()).toFixed(0)))}catch(e){a.props.playback_position_s=Number(0)}else a.props.playback_position_s=d.currentTime()?Number(d.currentTime().toFixed(0)):0;return e===this._MEDIA_SEEK?(this._startedSeekingAt&&(a.props.playback_position_s=Number(this._startedSeekingAt.toFixed(0))),this._finishedSeekingAt&&(a.props.seek_to_position_s=Number(this._finishedSeekingAt.toFixed(0)))):e===this._MEDIA_SHARE&&(a.context.social_network=t),a},_getRecommendationLabels:function(e,t,n,i,r){var a=[];if(t)for(var s=0;s<t.length;s++)a[s]=t[s].urn.str;var o={type:e,event_timestamp:u().valueOf(),context:{items:a,items_displayed:n,page_uri:l.absUrl(),component:{type:"player",name:"SRG Technical Player",version:c.PLAYER_VERSION,feature:"end_screen"}}};return i&&(o.id="io.ebu.peach:"+i),r&&(o.context.hit_index=t.map(function(e){return e.urn.str}).indexOf(r.urn.str)),o},_clearSeekTime:function(){this._startedSeekingAt=void 0,this._finishedSeekingAt=void 0},onPlay:function(){this._notify(this._MEDIA_PLAY)},onPause:function(){this._notify(this._MEDIA_PAUSE)},onEnd:function(){this._notify(this._MEDIA_STOP)},onHeartbeat:function(){this._notify(this._MEDIA_HEARTBEAT)},onShared:function(e){var t=h.getMetadata();t&&!t.isSecondHand&&this._notify(this._MEDIA_SHARE,e)},onLiked:function(){var e=h.getMetadata();e&&!e.isSecondHand&&this._notify(this._MEDIA_LIKE)},onSeekingChanged:function(e,t){t.seeking?d.isDVR()?this._startedSeekingAt=d.seekable().end(0)-t.currentTime:this._startedSeekingAt=t.currentTime:d.hasPlayed&&(d.isDVR()?this._finishedSeekingAt=d.seekable().end(0)-d.currentTime():this._finishedSeekingAt=t.currentTime,this._notify(this._MEDIA_SEEK))},onRecommendationDisplayed:function(e,t,n){this._notifyRecommendation(this._RECOMMENDATION_DISPLAYED,e,t,n,void 0)},onRecommendationHit:function(e,t,n,i){this._notifyRecommendation(this._RECOMMENDATION_HIT,t,n,i,e)},_initPipe:function(){a._pipe&&(this._getDomain(),this._setValueFromCurrentPage())},_getPlayerMode:function(){var e="normal";return d.isCasting()?e="cast":t.isFullscreen()?e="fullscreen":r.isPip()&&(e="pip"),e},_getMediaFormat:function(){var e="ondemand";return d.isDVR()?e="dvr":d.isLive()&&(e="live"),e}}}]),angular.module("srgPlayer").factory("srgPopoutService",["$window","bowser","srgMetadataService","srgMediaService","srgUtils",function(i,r,a,s,o){return{popout:function(){var e=a.getUrn(),t=350+(r.safari?45:0),n=s.isLive()&&!s.isDVR()?void 0:Math.round(1e3*s.currentTime())/1e3;s.pause(),i.open(o.generatePopoutUrl(e,n),"player_popup","width=624,height="+t+",status=yes,scrollbars=no,resizable=no").focus()}}}]),angular.module("srgPlayer").factory("srgQualityService",["$rootScope","srgMediaService","srgMetadataService","localStorageService",function(i,r,a,s){return{QUALITY_SWITCHING:"srg-quality-switching",QUALITY_SWITCHED:"srg-quality-switched",init:function(){this._qualityMap=this._initReverseQualityMap()},checkUserQualityStored:function(){var t=s.get("quality");return this._quality=a.getQualities()[0],t&&0<t.length&&"auto"!==t&&angular.forEach(a.getQualities(),function(e){t===e&&(this._quality=e)}.bind(this)),this._updateState(),this._quality},_initReverseQualityMap:function(){var e={HD:"SD",SD:"HD"};if(r.getCurrentSource()){var t=a.getQualities();-1!==t.indexOf("MD")&&(-1!==t.indexOf("HD")?e={HD:"MD",MD:"HD"}:-1!==t.indexOf("SD")&&(e={MD:"SD",SD:"MD"}))}return e},destroy:function(){this._clear()},_clear:function(){this._quality=void 0,this._active=!1,this._qualityMap={}},_updateState:function(){this._active="HD"===this._quality,i.$broadcast(this.QUALITY_SWITCHED,{quality:this._quality,isHD:this._active})},switchQuality:function(){i.$broadcast(this.QUALITY_SWITCHING),this._nextQuality=this._qualityMap[this._quality];var e=a.getSources(this._nextQuality);if(e&&0<e.length){var t=r.textTracks();r.loadAfterQualitySwitch(e,r.currentTime(),t)}var n=i.$on(r.CAN_PLAY_THROUGH,function(){this._quality=this._nextQuality,this._active="HD"===this._quality,s.set("quality",this._quality),i.$broadcast(this.QUALITY_SWITCHED),n()}.bind(this))},isHD:function(){return this._active},getCurrentQuality:function(){return this._quality}}}]),angular.module("srgPlayer").factory("srgSegmentsEventService",["$rootScope","$filter","$log","srgMetadataService",function(i,e,t,r){return{HAS_SEGMENTS:"srg-has-segments",init:function(){this._clear(),this.triggerHasSegmentsEvent()},destroy:function(){this._clear()},_clear:function(){this._hadDisplayableSegment=void 0},triggerHasSegmentsEvent:function(){var e,t,n=r.hasDisplayableSegments();e=this._hadDisplayableSegment,t=n,(void 0===e||e&&!t||!e&&t)&&(i.$broadcast(this.HAS_SEGMENTS,n),this._hadDisplayableSegment=n)}}}]),angular.module("srgPlayer").factory("srgSegmentsService",["$rootScope","$filter","srgLoaderService","srgMediaService","srgMetadataService",function(d,e,t,h,f){var p=e("filter"),o=e("orderBy");return{SEGMENT_BLOCKED:"srg-segment-blocked",DISPLAYABLE_SEGMENT_CHANGED:"srg-displayable-segment-changed",CONFIDENCE_INTERVAL:1,init:function(){this._clear(),this._initListeners()},destroy:function(){this._clear()},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clear:function(){this._clearListeners(),this._currentSegments=[],this._currentDisplayableSegment=void 0},_on:function(e,t){this._listeners.push(d.$on(e,t))},_initListeners:function(){this._on(h.MEDIA_READY,function(){this._updateCurrentSegment(),this._on(h.TIME_UPDATE,this._updateCurrentSegment.bind(this))}.bind(this)),this._on(t.LOAD_SEGMENT,this._updateCurrentSegment.bind(this)),this._on(h.SEEKING_CHANGED,this._updateCurrentSegment.bind(this))},currentSegment:function(){return this._filterDisplayableSegment(this._currentSegments)},_filterDisplayableSegment:function(e){var t=p(e,{displayable:!0},!0);return 0<t.length?t[t.length-1]:void 0},nextPlayableTime:function(){for(var e,t=function(e){var t,n=o(e,"markOut",!0);return angular.forEach(n,function(e){t=t||(e.block.isBlocked?e:void 0)}),t},n=h.currentTime()+this.CONFIDENCE_INTERVAL;!e;){var i=t(this._segmentsByTime(n)),r=f.getMetadata();i?n=i.markOut-r.markIn:e=n+this.CONFIDENCE_INTERVAL}return e},_getSegmentList:function(){var e=f.getMetadata(),t=[];if(e){var n=e.fullLengthUrn||e.urn;t=(t=p(e.segments,{fullLengthUrn:{str:n.str}})).concat(p(e.segments,{urn:{str:n.str}}))}return t&&0<t.length?t:[]},getFullSegment:function(e){var t=f.getMetadata(),n=e&&0<e.length?e:this._getSegmentList(),i={isFull:!0};t.urn.livecenter||(i.isLive=!1);var r=p(n,i,!0);return r&&0<r.length?r[0]:void 0},_normalizeTime:function(e){return f.getMetadata().markIn+(void 0!==e?e:h.currentTime())},displayableSegmentByTime:function(e){return this._filterDisplayableSegment(this._segmentsByTime(e))},_segmentsByTime:function(e){var n=[],t=f.getMetadata();if(t){var i=o(this._getSegmentList(),"markIn"),r=p(i,{id:t.id},!0),a=this._normalizeTime(e),s=function(e,t){return e.markIn<=t+this.CONFIDENCE_INTERVAL&&e.markOut>t?e:void 0}.bind(this);return angular.forEach(i,function(e){var t=s(e,a);t&&n.push(t)}.bind(this)),0===n.length&&r&&0<r.length&&n.push(r[0]),n}},_updateCurrentSegment:function(e,t){if(!(h.ended()||void 0!==t&&t.seeking)){var n,i,r,a=f.getMetadata();if(this.getFullSegment())for(this._currentSegments=this._segmentsByTime(t?t.currentTime:h.currentTime()),i=0;i<this._currentSegments.length&&!r;i++){var s=this._currentSegments[i];if(s.block.isBlocked&&!s.isFull&&!h.isCasting()){var o=this.nextPlayableTime()+this.CONFIDENCE_INTERVAL,l=o>h.duration();d.$broadcast(this.SEGMENT_BLOCKED,{segment:s,skipTo:o,skipToEnd:l}),r=!0}}else a&&(this._currentSegments=p(this._getSegmentList(),{id:a.id},!0));n=this._filterDisplayableSegment(this._currentSegments||[]),u=this._currentDisplayableSegment,(!(c=n)&&u||!u&&c||(c||{}).id!==(u||{}).id)&&(this._currentDisplayableSegment=n,d.$broadcast(this.DISPLAYABLE_SEGMENT_CHANGED,this._currentDisplayableSegment?this._currentDisplayableSegment:f.getMetadata()))}var u,c}}}]),angular.module("srgPlayer").factory("srgSocialPayloadService",["$rootScope","$timeout","$log","srgConfigService","srgDatasourceService","srgMetadataService","srgMediaService",function(n,t,e,i,r,a,s){return{duration:void 0,init:function(){this._clear(),this._setSenderSocialPayLoad()},_setSenderSocialPayLoad:function(){i.get("mode.payload",!0)&&this._on(s.TIME_UPDATE,function(){s.paused()||(s.isLive()||10<80*s.duration()/100?(this._sendClickEvent(1e4),this._clearListeners()):s.duration()&&(this._sendClickEvent(80*s.duration()/100*1e3),this._clearListeners()))}.bind(this))},destroy:function(){this._clear()},setSocialDataPayload:function(e){this._socialDatapayload=e},sendShared:function(e){return this._sendSocialPayload("shared/"+e)},sendLike:function(){return this._sendSocialPayload("liked")},_clear:function(){this._clearListeners(),this._socialDatapayload=void 0,this._deferred=void 0},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_on:function(e,t){this._listeners.push(n.$on(e,t))},_stopService:function(){this._clearListeners(),t.cancel(this._deferred)},_sendSocialPayload:function(e){var t=a.getMetadata();if(t&&!t.isSecondHand&&t.eventData)return r.getServiceProvider().socialPayloadSender.send(t,this._socialDatapayload,e)},_clicked:function(){var e=this._sendSocialPayload("clicked");e?e.then(this._stopService.bind(this),this._stopService.bind(this)):this._stopService()},_sendClickEvent:function(e){this._deferred||(this._deferred=t(this._clicked.bind(this),e))}}}]),angular.module("srgPlayer").factory("srgStreamsenseService",["$rootScope","bowser","StreamSense","moment","URI","playerParams","srgConfigService","srgDvrTime","srgMediaService","srgMetadataService","srgLoaderService",function(n,e,i,f,t,r,a,s,p,m,o){var l=function(){return new t(a.get("comscore.host")).addSearch({c1:19,c2:a.get("comscore.customer")}).toString()};return{init:function(){this._streamSense||(this._streamSense=new i({},l())),this._clear(),this._on(m.METADATA_READY,this._onMetadataReady.bind(this)),this._on(p.LOAD_SOURCE,this._onLoadSource.bind(this)),this._on(p.DURATION_CHANGE,this._onLoadSource.bind(this)),this._on(o.LOAD_SEGMENT,this._switchSegment.bind(this)),this._on(p.SEEKING_CHANGED,this._onSeekingChanged.bind(this)),this._on(p.TEXT_TRACK_CHANGE,this._onTextTrackChanged.bind(this)),this._on(p.PLAY,this._onPlay.bind(this)),this._on(p.PAUSE,this._onPause.bind(this)),this._on(p.ENDED,this._onEnd.bind(this))},_on:function(e,t){this._listeners.push(n.$on(e,t))},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clear:function(){this._clearListeners(),this._currentSegment=void 0,this._nextSegment=void 0,this._hasClipLabels=!1,this._dvrReady=!1,this._deferredEvents=[],this._streamSense&&(this._streamSense.reset(),this._streamSense.setPixelURL(l()))},destroy:function(){this._clear()},_globalLabels:function(){var e=m.getUrn();return{ns_st_mp:r.mode||"default",ns_st_mv:a.PLAYER_VERSION,ns_site:"mainsite",ns_vsite:e.bu+"-v",srg_ptype:"videojs",srg_unit:e.bu.toUpperCase()}},_playlist:function(){var e=m.getMetadata(),t=e.show||{},n=e.rubric||{},i=angular.equals(t,{})?angular.equals(n,{})?void 0:n.title:t.title;return i||e.isLive?{ns_st_pl:e.isLive?"Livestream":i}:{}},_setClipLabels:function(){var e=this._currentSegment,t=m.getMetadata(),n=(m.getUrn(),Math.max(e&&e.position?e.position:0,1)),i=Math.max(t.position||0,1),r=e?e.duration:t.duration,a=t.isLive?0:Math.floor(f.duration(r,"seconds").asMilliseconds()),s=p.getCurrentSource(),o={ns_st_cn:1,ns_st_pn:m.isSegment()?i:n,ns_st_ci:e?e.id:t.id,ns_st_cl:a,ns_st_sl:a,ns_st_ep:t.isLive?"Livestream":(e||t).title||""};if(s){o.srg_mqual=(s.options.quality||"").toLowerCase();var l=/enc(\d+)uni/.exec(s.src);l&&(o.srg_enc=/\d+/.exec(l[0])),angular.extend(o,s.options.analytics)}if(p.isDVR()){var u=p.seekable(),c=1e3*p.currentTime(),d=1e3*(0<u.length?u.end(0):p.duration()),h=d&&c?d-c:0;o.srg_timeshift=h<35e3?0:h}this._streamSense.setClip(angular.extend(o,t.analytics)),this._hasClipLabels||(this._hasClipLabels=!0,angular.forEach(this._deferredEvents,function(e){e()}),this._deferredEvents=[])},_isReady:function(){return e.safari||e.ios||!p.isDVR()||this._dvrReady},_notify:function(e,t,n){if(this._isReady()&&!p.isCasting()){var i=(m.getMetadata()||{}).isLive?0:Math.floor(f.duration(n||p.currentTime(),"seconds").asMilliseconds());this._hasClipLabels?this._streamSense.notify(e,t||{},i):this._deferredEvents.push(this._streamSense.notify.bind(this._streamSense,e,t||{},i))}},_onTextTrackChanged:function(){var e=p.currentTextTrack();this._notify(i.PlayerEvents.CUSTOM,{ns_st_ev:e?"subtitle_on":"subtitle_off"})},_onPlay:function(){this._notify(i.PlayerEvents.PLAY)},_onPause:function(e,t){t&&t.ignoreStats||this._notify(i.PlayerEvents.PAUSE)},_onEnd:function(){this._notify(i.PlayerEvents.END)},_onEndLivestream:function(){this._notify(i.PlayerEvents.END)},_onLoadSource:function(){this._isReady()&&this._setClipLabels()},_onMetadataReady:function(){m.getMetadata().isLive&&this._on(o.RELOAD,this._onEndLivestream.bind(this)),this._streamSense.setLabels(this._globalLabels()),this._streamSense.setPlaylist(this._playlist())},_onSeekingChanged:function(e,t){var n=t.seeking?i.PlayerEvents.PAUSE:i.PlayerEvents.PLAY;t.seeking&&(this._nextSegment||p.isDVR()&&this._dvrReady)&&p.hasPlayed?this._notify(i.PlayerEvents.END,{},t.currentTime):t.seeking||!this._nextSegment&&!p.isDVR()?p.hasPlayed&&this._notify(n,{ns_st_ui:"seeking"},t.currentTime):(this._currentSegment=this._nextSegment,this._nextSegment=void 0,this._dvrReady=this._dvrReady||p.isDVR(),this._streamSense.setPlaylist(this._playlist()),this._setClipLabels(),p.hasPlayed&&this._notify(i.PlayerEvents.PLAY,{},t.currentTime))},_switchSegment:function(e,t){this._nextSegment=t}}}]),angular.module("srgPlayer").factory("srgTagCommanderService",["$rootScope","$interval","$timeout","$window","$document","$filter","$log","srgConfigService","srgMediaService","srgMetadataService","srgLoaderService","srgPipeService","playerParams","moment",function(a,t,e,i,n,s,r,o,l,u,c,d,h,f){return{listeners_:[],hasScript_:!1,currentSegment_:void 0,currentUrn:void 0,cachedCurrentUrn:void 0,nextSegment_:void 0,pendingQueue_:[],elapsedPlayTime_:0,lastPlayTime_:void 0,lastCurrentTime_:void 0,init:function(){this.destroy(),this.notify_("buffer_start"),this.on_(l.MEDIA_READY,this.initTagCommander_.bind(this))},destroy:function(){this.clearDataLayer_(),this.clearListeners_(),this.clearIntervals_(),this.currentSegment_=void 0,this.nextSegment_=void 0,this.elapsedPlayTime_=0,this.lastPlayTime_=void 0,this.lastCurrentTime_=void 0},clearIntervals_:function(){angular.forEach([this.currentTimeInterval_,this.upTimeInterval_,this.flushInterval_],function(e){e&&t.cancel(e)}),this.flushInterval_=void 0,this.upTimeInterval_=void 0,this.currentTimeInterval_=void 0},clearListeners_:function(){this.listeners_&&angular.forEach(this.listeners_,function(e){e()}),this.listeners_=[]},clearDataLayer_:function(){i.tc_vars={}},initScript_:function(){if(!this.hasScript_){var e=n[0].createElement("script"),t=o.get("local")+o.get("tagcommander.url");e.type="text/javascript",e.id="tc_script__1",e.async=!0,e.defer="defer",e.setAttribute("src",t),n[0].body.appendChild(e),this.hasScript_=!0}},initTagCommander_:function(){this.currentUrn=u.getUrn().str,this.destroy(),i.tc_vars=this.getDataLayer_(),this.updateComScoreSession_(),this.initScript_(),this.on_(c.RELOAD,this.onReload_.bind(this)),this.on_(c.LOAD_SEGMENT,this.onLoadSegment_.bind(this)),this.on_(l.SEEKING_CHANGED,this.onSeekingChanged_.bind(this)),this.on_(l.PLAY,this.onPlay_.bind(this)),this.on_(l.PAUSE,this.onPause_.bind(this)),this.on_(l.ENDED,this.onEnd_.bind(this)),this.on_(l.TIME_UPDATE,this.timeUpdate_.bind(this)),this.on_(l.LOADING,this.loading_.bind(this)),this.on_(l.LOADING_READY,this.loading_.bind(this)),angular.element(i).bind("beforeunload",this.onUnLoad_.bind(this)),this.currentTimeInterval_=t(function(){l.paused()||(d.onHeartbeat(),this.notify_("pos"))}.bind(this),3e4),l.isLive()&&(this.upTimeInterval_=t(function(){l.paused()||this.notify_("uptime")}.bind(this),6e4)),this.notify_("init"),this.notify_("buffer_stop"),!l.paused()&&l.autoplay()&&this.onPlay_()},on_:function(e,t){this.listeners_.push(a.$on(e,t))},flush_:function(){var e=function(){if(i.tc_events_11&&0<this.pendingQueue_.length){angular.forEach(this.pendingQueue_,function(e){i.tc_events_11(l.elmt,e.action,e.labels),0}),this.pendingQueue_=[],this.flushInterval_&&(t.cancel(this.flushInterval_),this.flushInterval_=void 0)}return i.tc_events_11&&0===this.pendingQueue_.length}.bind(this);e()||this.flushInterval_||(this.flushInterval_=t(e,1e3))},sendTCEvent_:function(e,t){if(!l.isCasting()&&(l.hasPlayed||"init"===e||l.isLive()&&!l.isDVR()))if(this.flush_(),i.tc_events_11){var n=this.getTcLabels_(e,t);i.tc_events_11(l.elmt,e,n)}else this.pendingQueue_.push({action:e,labels:this.getTcLabels_(e,t)}),this.flush_()},notify_:function(e,t){this.sendTCEvent_(e,t)},onPlay_:function(){d.onPlay(),this.notify_("play"),this.lastPlayTime_=this.lastPlayTime_?this.lastPlayTime_:f().valueOf()},onPause_:function(e,t){t&&t.ignoreStats||l.duration().toFixed()!==l.currentTime().toFixed()&&(this.elapsedPlayTime_+=this.lastPlayTime_?f().valueOf()-this.lastPlayTime_:0,this.lastPlayTime_=void 0,d.onPause(),this.notify_("pause"))},onEnd_:function(){d.onEnd(),this.notify_("eof")},timeUpdate_:function(){this.lastCurrentTime_=l.currentTime()},onReload_:function(){l.ended()||(d.onEnd(),this.notify_("stop"))},onUnLoad_:function(){this.onUnLoad_.done||(l.ended()||(d.onEnd(),this.notify_("stop",this.lastCurrentTime_)),this.onUnLoad_.done=!0)},onSeekingChanged_:function(e,t){this.nextSegment_?t.seeking?l.ended()||(d.onSeekingChanged(e,t),this.notify_("seek",t.currentTime)):(this.currentSegment_=this.nextSegment_,this.nextSegment_=void 0,i.tc_vars=this.getDataLayer_(),l.hasPlayed&&(d.onPlay(),this.notify_("play",t.currentTime),l.isLive()&&this.notify_("segment",t.currentTime))):l.isLive()&&!l.isDVR()||(t.seeking?(d.onSeekingChanged(e,t),this.notify_("seek",t.currentTime)):(d.onSeekingChanged(e,t),l.paused()?d.onPause():d.onPlay(),this.notify_(l.paused()?"pause":"play",t.currentTime)))},onLoadSegment_:function(e,t){this.nextSegment_=t},loading_:function(e){var t="srg-media-loading-ready"===e.name?"buffer_stop":"buffer_start";this.notify_(t)},getDataLayer_:function(){var e={media_player_name:"videojs",media_player_version:o.PLAYER_VERSION,media_player_display:h.mode||"default",media_chromecast_selected:l.isCasting()},t=u.getMetadata(),n=l.getCurrentSource(),i=t.analyticsMetadata||{};if(e.media_bu_distributer=s("uppercase")(t.urn.bu),e.media_embedding_url=a.referrer?a.referrer:"",o.get("mode.useImgResizeService",!0)&&t.imageSrc?e.media_thumbnail=s("thumbnail")(t.imageSrc,460,"16x9"):e.media_thumbnail=t.imageSrc,n){var r=/enc(\d+)uni/.exec(n.src);r&&(e.media_encoder_name=/\d+/.exec(r[0])),e.media_url=n.src,e=angular.extend(e,n.options.analyticsMetadata)}return e=angular.extend(e,i),this.currentSegment_&&(e=angular.extend(e,this.currentSegment_.analyticsMetadata)),e},getElapsedTime_:function(){var e=this.lastPlayTime_?f().valueOf()-this.lastPlayTime_:0;return this.elapsedPlayTime_+e},getTcLabels_:function(e,t){var n={event_id:e,event_timestamp:f().unix(),media_position:(void 0!==t?t:l.currentTime()).toFixed(0),media_volume:l.volume().toString(),media_mute:l.isMuted()?"1":"0",media_subtitles_on:l.hasTextTracks(),media_dvr_window_length:0,media_dvr_window_offset:0,media_is_dvr:!1,media_is_live:!1};if(l.isLive()){var i=this.getElapsedTime_();if(n.media_position=(i/1e3).toFixed(0),"init"!==e){var r=l.seekable(),a=1e3*t,s=1e3*(r&&0<r.length?r.end(0):l.duration()),o=s&&a?s-a:0;n.media_timeshift=(o<35e3?0:o/1e3).toFixed(0)}else n.media_timeshift_milliseconds="0";n.media_is_live=!0,l.isDVR()&&(n.media_dvr_window_length=1e3*l.duration()|0,n.media_dvr_window_offset=1e3*l.dvrWindowOffset(),n.media_is_dvr=!0)}return n},updateComScoreSession_:function(){this.hasScript_&&this.cachedCurrentUrn!==this.currentUrn&&i.streamingAnalytics&&i.tc_vars&&(i.tC.container.reload(),this.notify_("init"),this.cachedCurrentUrn=this.currentUrn)}}}]),angular.module("srgPlayer").factory("srgUserHistoryService",["$cookies","$interval","$http","$window","$rootScope","playerParams","srgConfigService","srgMediaService",function(e,t,n,i,r,a,s,o){return{GET_USER_HISTORY_PEACHINFOS_COOKIE:"peach_infos",init:function(e){this._clear(),this._urn=e,this._getCookie(),this._on(o.PLAY,this._onPlay.bind(this)),this._on(o.PAUSE,this._onPause.bind(this)),this._on(o.SEEKED,this._onSeeking.bind(this)),this._on(o.ENDED,this._onEnd.bind(this)),this._heartBeatTimeInterval=t(function(){o.paused()||this._sendUserHistory()}.bind(this),1e4)},_on:function(e,t){this._listeners.push(r.$on(e,t))},_clearListeners:function(){this._listeners&&angular.forEach(this._listeners,function(e){e()}),this._listeners=[]},_clearTimeIntervals:function(){this._heartBeatTimeInterval&&t.cancel(this._heartBeatTimeInterval),this._heartBeatTimeInterval=void 0},_clear:function(){this._clearListeners(),this._clearTimeIntervals(),this._postVars=void 0,this._hasCookie=void 0},destroy:function(){this._clear()},_sendUserHistory:function(){if(this._hasCookie&&!o.isCasting()){var e=o.currentTime();return this._postVars={item_id:this._urn._str,device_id:"srg-player",last_playback_position:e},n({method:"POST",withCredentials:!0,headers:{"Content-Type":"application/json"},data:this._postVars,url:s.get("userhistory.url")})}},_onPlay:function(){this._sendUserHistory()},_onPause:function(){this._sendUserHistory()},_onSeeking:function(){this._sendUserHistory()},_onEnd:function(){this._sendUserHistory()},_getCookie:function(){this._hasCookie||(this._hasCookie=void 0!==e.get(this.GET_USER_HISTORY_PEACHINFOS_COOKIE)&&""!==e.get(this.GET_USER_HISTORY_PEACHINFOS_COOKIE))}}}]),angular.module("srgPlayer").factory("srgUtils",["srgConfigService","srgMediaService","srgDvrTime",function(r,a,s){return{_createParametrs:function(e,t){var n=a.isDVR()?s.toPopoutDvrTime(t):t,i=n&&0<n?encodeURIComponent(n):void 0;return{typeStr:"video"===e.assetType?"tv":"radio",host:r.get("host"),id:encodeURIComponent(e.id),time:i}},generatePlayUrl:function(e,t){var n=this._createParametrs(e,t);return n.host+"/play/"+n.typeStr+"/redirect/detail/"+n.id+(n.time?"?startTime="+n.time:"")},generatePopoutUrl:function(e,t){var n=this._createParametrs(e,t);return n.host+"/play/"+n.typeStr+"/popup"+e.assetType+"player?id="+n.id+(n.time?"&startTime="+n.time:"")}}}]),angular.module("srgPlayer").factory("srgVideo360Service",["$rootScope","device","srgMediaService",function(e,t,n){return{ENABLED:"srg-mobil-360-enabled",DISABLED:"srg-mobil-360-disabled",enabled_:!1,init:function(){n.is360()&&!t.isDesktop&&t.supports360?this.startPlayerAPISendEvent():this.stopPlayerAPISendEvent()},destroy:function(){this.enabled_=!1},startPlayerAPISendEvent:function(){this.enabled_=!0,e.$broadcast(this.ENABLED)},stopPlayerAPISendEvent:function(){this.enabled_=!1,e.$broadcast(this.DISABLED)},isPlayerAPISendEnabled:function(){return this.enabled_}}}]),angular.module("srgPlayer").controller("SrgPlayerCtrl",["$scope","$rootScope","$window","$document","$translate","$timeout","$interval","$log","bowser","device","moment","S","playerParams","fullscreenService","localStorageService","displayTimerUtils","srgAirplayService","srgAkamaiQosService","srgAutoplayService","srgConfigService","srgCookieService","srgDatasourceService","srgDvrSwitchService","srgEndScreenContainerService","srgKeyboardService","srgLoaderService","srgMediaService","srgMessageApi","srgMetadataService","srgPerformanceService","srgPerformanceReportService","srgPipService","srgPipeService","srgSegmentsEventService","srgQualityService","srgSegmentsService","srgSocialPayloadService","srgStreamsenseService","srgVideo360Service","srgTagCommanderService","srgUserHistoryService",function(o,l,n,e,u,t,c,d,i,r,a,s,h,f,p,m,g,v,_,y,x,b,T,S,E,w,M,A,C,P,R,D,k,I,L,O,N,U,F,B,$){var j=function(e,t){d.error("URN is: "+h.rawurn),o.error={errorCode:t&&t.errorCode?t.errorCode:"PLAYBACK",blocked:t&&t.blocked,display:o.autoplay||n.innerHeight<=120||o.hasPlayed||t&&(s(t.errorCode).startsWith("IL_ERROR_")||s(t.errorCode).startsWith("DRM_"))},o.ready=!0,f.isFullscreenEnabled()&&f.isFullscreen()&&f.toggleFullscreen()},V=function(){o.displayTimeout&&(t.cancel(o.displayTimeout),o.displayTimeout=void 0)},H=function(){return y.getVisibility("titleBar",!0)&&(y.getVisibility("title",!1)||y.getVisibility("social",!1))},z=function(e){o.displayTimeout=t(function(){o.displayTimeout&&(o.display=h.debug||M.paused()&&!r.isTouchDevice,o.hiddenSegments=!o.alwaysShowSegments,o.displayTimeout=void 0)},e)},G=function(e){var t=!!M.paused()||e;"audio"!==o.assetType&&o.supportsPlaysInline&&o.ready&&((void 0===t?!o.display:t)?(m.setDisplayTimer(o.isFullscreen&&!r.isTouchDevice?1800:3500),V(),o.display=!0,o.hiddenSegments=!1):(m.setDisplayTimer(r.isTouchDevice?0:700),V()),z(m.getDisplayTimer()))},q=function(){o.isCasting=M.isCasting()},W=function(){l.locale=u.use(),o.error=void 0,o.blockCode=void 0,o.poster=void 0,o.ready=!1,o.end=!1,o.hasPlayed=!1,o.isCasting=!1,o.blockedSegment=!1,o.live=!1,o.is360=!1,o.isFlash=!1,o.hasSegments=!1,o.isMetadataLoaded=!1,o.throttle=!1,o.isFullscreen=f.isFullscreen(),o.controlbarDisplayed=!1,o.display=h.debug,o.alwaysShowSegments=r.isTouchDevice||h.debug,r.isNotSupported?(o.assetType="video",o.error={errorCode:"UPDATE_BROWSER",blocked:!1,display:!0},d.error("Unsupported browser version. Please update your browser.")):(o.assetType=o.urn.assetType,"audio"===o.assetType?o.autoplay=h.autoplay:o.autoplay=(!_.isAutoplayEnabled()||_.isAutoplay())&&h.autoplay,o.titleBar=H(),o.mutedPlayback=void 0!==o.mutedPlayback?o.mutedPlayback:y.get("mode.mutedPlayback",!1)&&"video"===o.assetType,h.stats&&(x.init(),y.get("tagcommander.enabled",!1)&&B.init(),y.get("comscore.enabled",!1)&&U.init(),y.get("akamaiqos.enabled",!1)&&v.init(),N.init()),window!==parent&&A.connect(),y.get("userhistory.enabled",!1)&&$.init(o.urn),b.init(),w.init(),y.init(o.urn),C.init(o.urn),o.liveWithSegments=y.get("mode.liveWithSegments",!1),o.showOutsideSegments=h.outsideSegments||y.getVisibility("outsideSegments",!1),o.segmentsBrowser=!o.showOutsideSegments&&!h.hideSegments&&y.getVisibility("segments",!1),o.endScreen=!h.hideEndscreen&&y.getVisibility("endScreen",!0),o.endScreen&&S.shouldInitEndscreenContainerService()&&S.init())},Y=function(e,t){var n,i,r,a=function(){return u.use(y.get("locale","en")).then(W)};try{var s=function(){o.autoplay=!!e||o.autoplay,o.start=t||o.start};i=h.urn,r=o.error||i.assetType!==o.assetType,o.unbindTimeUpdate&&(o.unbindTimeUpdate(),o.unbindTimeUpdate=void 0),o.unbindScheduleLiveStream&&(o.unbindScheduleLiveStream(),o.unbindScheduleLiveStream=void 0),o.configRefreshInterval&&(c.cancel(o.configRefreshInterval),o.configRefreshInterval=void 0),o.metadataRefreshInterval&&(c.cancel(o.metadataRefreshInterval),o.metadataRefreshInterval=void 0),o.listeners&&angular.forEach(o.listeners,function(e){e()}),o.listeners=[],v.destroy(),g.destroy(),x.destroy(),b.destroy(),T.destroy(),w.destroy(),C.destroy(),D.destroy(),k.destroy(),L.destroy(),I.destroy(),O.destroy(),N.destroy(),U.destroy(),$.destroy(),F.destroy(),void 0!==p.get(S._CONTINUOUS_PLAYBACK_FROM_PLAYLIST)&&p.get(S._CONTINUOUS_PLAYBACK_FROM_PLAYLIST)||S.destroy(),r&&(o.sources=void 0,M.destroy()),d.clearHistory(),o.urn=i,o.start=h.start,o.preload=h.preload,o.switchToFull=h.switchToFull,l.bu=h.bu,z(),P.destroy(),R.init(o.urn._str),P.init(o.urn),(n=y.init(o.urn))?n.then(a).then(s):a().then(s),l.$on(M.MEDIA_READY,function(){o.controlbarDisplayed=!0,o.hideMenuOn360=!1,o.ready=!0,o.display=!0})}catch(e){u.use("lang/en.c0dd7e3f.json").then(function(){o.assetType="video",o.error={errorCode:"UNKNOWN",blocked:!1,display:!0}}),d.error("A problem occurred while initializing the player",e)}};o.toggleMouseDisplay=r.isTouchDevice?function(){}:function(e){D.isPip()||G(e)},o.refreshTouchDisplay=function(){o.display&&r.isTouchDevice&&!o.is360&&G(!0)},o.toggleTouchDisplay=function(e){o.mutedPlayback?(o.mutedPlayback=!1,M.isMuted()&&M.toggleMute()):r.isTouchDevice&&(o.is360?G(!0):G(e)),o.error?o.error.display=!0:M.togglePlay()},o.isSafariIOS=function(){return i.safari&&window.videojs.browser.IS_IOS&&!r.isIpad},o.toggleTapDisplay=function(e){o.mutedPlayback?(o.mutedPlayback=!1,M.isMuted()&&M.toggleMute()):r.isTouchDevice?G(!0):o.error&&(o.error.display=!0)},o.displayError=function(){o.error.display=!0},o.dismissWarning=function(){o.isBrowserOutdated=!1,p.set("nextOutdatedCheck",a().add(1,"week").valueOf())},o.$on(E.TOGGLE_DISPLAY,function(){G()}),o.$on(E.DISPLAY,function(){G(!0)}),o.$on(D.PIP_MODE_OFF,function(){G(!1)}),o.$on(D.PIP_MODE_ON,function(){V()}),o.$on(E.DISPLAY_SEGMENT_BROWSER,function(){o.alwaysShowSegments=!0}),o.$on(E.HIDE_SEGMENT_BROWSER,function(){o.alwaysShowSegments=r.isTouchDevice||h.debug}),angular.forEach([C.METADATA_READY,M.FORCE_TO_LIVE],function(e){o.$on(e,function(e){"srg-force-to-live"===e.name&&(o.autoplay=!0);var t=C.getMetadata(),i=C.getMetadata(),n=C.getSources(L.checkUserQualityStored());o.isMetadataLoaded=!0,o.sources=n,o.tracks=t.subtitles,o.poster=t.imageSrc,o.posterCredits=t.imageCopyright,o.live=t.isLive,o.blocked=!!t.block&&t.block.isBlocked,o.validFrom=t.validFrom,o.hasSegments=C.hasDisplayableSegments(),o.audioDescription=t.audioDescription?t.audioDescription:t.title,y.get("pipe.enabled",!1)&&k.init(),1<(t.segments||[]).length&&O.init(),I.init(),C.hasDVR()&&"video"===o.assetType&&(o.configRefreshInterval=c(function(){y.updateConfiguration()},y.get("mode.dvr.checkIntervalSwitch")),T.init(o.urn)),y.get("mode.syncMetadata.enabled")&&o.live&&"SCHEDULED_LIVESTREAM"===C.getMetadata().type&&(o.metadataRefreshInterval=c(function(){C.reload()},y.get("mode.syncMetadata.interval")),o.unbindTimeUpdate=o.$on(M.TIME_UPDATE,function(){var e=C.getMetadata();if(o.live&&e&&(!e.isLive||"SCHEDULED_LIVESTREAM"===e.type&&i.validFrom!==e.validFrom)){var t=M.currentTime(),n=e.markOut;i=e,w.load(o.urn,n<t?n:t)}}),o.unbindScheduleLiveStream=o.$on(M.TIME_UPDATE,function(){var e=C.getMetadata();!(!e||!e.validTo)&&a(a.duration(a.utc().valueOf()).asSeconds()).isAfter(e.validTo)&&C.broadcastEndDate()}))})}),o.$on(S.UPDATE_CONTINUOUS_PLAYBACK,function(e,t){void 0!==t&&(o.poster=t.image)}),o.$on(C.METADATA_UPDATED,function(){var e=C.getMetadata();if(!o.blocked&&e.block.isBlocked||o.blocked&&!e.block.isBlocked){var t=M.currentTime(),n=e.markOut;w.load(o.urn,n<t?n:t)}o.blocked=e.block.isBlocked,o.hasSegments=C.hasDisplayableSegments(),O.destroy(),1<(e.segments||[]).length&&O.init(),I.triggerHasSegmentsEvent()}),o.$on(M.LOADED_METADATA,function(){M.initUserSettings(),o.ready=!0,o.isDVR=M.isDVR(),o.is360=M.is360(),o.isFlash=M.isFlash(),L.init(),g.init(),D.init(),E.bindControls(),F.init(),G(!0)}),o.$on(C.METADATA_ERROR,j),o.$on(C.METADATA_ERROR_RELOAD,function(){d.error("Error reloading URN: "+h.rawurn),o.ready=!0}),o.$on(C.METADATA_BLOCKED,j),o.$on(M.ENDED,function(){o.end=!0,o.endScreen&&(o.titleBar=!1)}),o.$on(M.PLAY,function(){o.end=!1,o.hasPlayed=!0,o.titleBar=H()}),o.$on("srg-progress-drag",function(e,t){G(!0)}),o.$on(O.SEGMENT_BLOCKED,function(e,t){var n=t.segment;o.blockedSegment=!0,o.end=t.skipToEnd,o.blockCode=n.block.reason,E.unbindControls(),M.seek(t.skipTo)}),o.onCountdownFinished=function(){o.blockedSegment=!1,o.blockCode=void 0,G(!0),E.bindControls(),o.end||M.play()},o.$on(M.ERROR,j),o.$on(M.THROTTLE,function(){G(!1),o.throttle=!0}),o.$on(M.RESUME,function(){o.throttle=!1,G(!0)}),o.$on(y.CONFIG_CHANGED,function(){o.configRefreshInterval&&(c.cancel(o.configRefreshInterval),o.configRefreshInterval=void 0,Y(!M.paused(),M.currentTime()))}),o.$on(f.ENTER_FULLSCREEN,function(){o.isFullscreen=!0,G(!0)}),o.$on(f.EXIT_FULLSCREEN,function(){o.isFullscreen=!1,G(!0)}),o.$on(M.CHROMECAST_MEDIA_LOADED,q),o.$on(M.CHROMECAST_STOPPED,function(){o.hasPlayed=r.hasAutoplay,q()}),o.$on(M.CHROMECAST_ERROR,q),angular.element(n).bind("orientationchange",function(){G(!0)}),o.$on(w.RELOAD,function(){Y(!0)}),o.supports360=r.supports360,o.isBrowserOutdated=function(){var e=r.isOutdated;if(e){var t=Number(p.get("nextOutdatedCheck"));e=t&&!isNaN(t)?a().valueOf()>=a(t).valueOf():e}return e}(),o.desktop=r.isDesktop,o.supportsPlaysInline=r.supportsPlaysInline,o.timeoutControlBar=!1,Y()}]),angular.module("srgPlayer").run(["$templateCache",function(e){e.put("src/directive/airplay-btn/airplay-btn.html",'<div class="srg-airplay-btn clickable" ng-click=openTargetPicker()><button class=clickable aria-label="{{::\'AIRPLAY\' | translate}}"><svg-icon icon=airplay></svg-icon></button><tooltip><tooltip-label label="{{::\'AIRPLAY\' | translate}}"></tooltip-label></tooltip></div>'),e.put("src/directive/cardboard-button/cardboard-button.html","<div class=\"srg-cardboard-button clickable\" ng-click=toggleVR()><button class=clickable ng-class=\"{'vr-active': isVRActive}\" aria-label=\"{{::'TOGGLE_VR' | translate:translationParams}}\"><svg-icon icon=\"{{ isVRActive ? 'cardboard-active' : 'cardboard'}}\"></svg-icon></button><tooltip label=\"{{::'TOGGLE_VR' | translate:translationParams}}\"></tooltip></div>"),e.put("src/directive/chromecast-button/chromecast-button.html","<div class=\"srg-chromecast-button clickable\" ng-show=isConnected><google-cast-launcher></google-cast-launcher><tooltip ng-if=isConnected><tooltip-label label=\"{{ !isCasting ? 'CHROMECAST_START_CASTING' : 'CHROMECAST_STOP_CASTING' | translate }}\"></tooltip-label></tooltip></div>"),e.put("src/directive/chromecast-overlay/chromecast-overlay.html","<div class=chromecast-overlay><div class=chromecast-info-container><svg-icon ng-class=\"'chromecast-overlay-icon'\" icon=chromecast-active></svg-icon><div class=chromecast-overlay-text><div class=chromecast-overlay-title>{{ 'CHROMECAST_CASTING_TO' | translate }}</div><div class=chromecast-overlay-name>{{ name }}</div></div></div></div>"),e.put("src/directive/info-panorama/info-panorama.html","<div class=panorama-message ng-show=!dismissed><notification type=info on-dismiss=dismiss()>{{::'360_UNSUPPORTED' | translate}}</notification></div>"),e.put("src/directive/srg-backward-button/srg-backward-button.html","<div class=\"srg-backward-button clickable\" ng-click=backward()><button class=clickable aria-label=\"{{::'BACKWARD' | translate:'{seconds: 10}'}}\"><svg-icon icon=backward></svg-icon></button><tooltip><tooltip-label label=\"{{::'BACKWARD' | translate:'{seconds: 10}'}}\"></tooltip-label></tooltip></div>"),e.put("src/directive/srg-blocked-segment-overlay/srg-blocked-segment-overlay.html","<div class=srg-blocked-overlay><div class=srg-blocked-overlay-bkg><div class=srg-blocked-info-overlay><div class=srg-countdown-container><div class=srg-spinner-icon></div><div class=srg-countdown-text>{{ remaining }}</div></div><div class=srg-blocked-message role=alert aria-label=\"{{::'SEGMENT_SKIPPING_MESSAGE' | translate}} {{::'ERROR_' + errorCode + '_MESSAGE' | translate:translationParams}}\" tabindex=0>{{::'SEGMENT_SKIPPING_MESSAGE' | translate}} {{::'ERROR_' + errorCode + '_MESSAGE' | translate:translationParams}}</div></div></div></div>"),e.put("src/directive/srg-captions/srg-captions.html",'<div class=srg-captions-container ng-show="cues &amp;&amp; isDesktopNotSafariOrAndroid() || !hasEmbededSubtitles"><div class=srg-caption-label ng-class=captionsSizeClass ng-if="cues &amp;&amp; cues.length > 0" ng-repeat="cue in cues"><div ng-style="{\'color\' : cue.color,\n                            \'background-color\' : cue.backgroundColor || \'black\'}" ng-bind-html="cue.text | trim"></div></div></div>'),e.put("src/directive/srg-continuous-playback/srg-continuous-playback.html","<div class=srg-continuous-playback-layer ng-class=\"{'fade-in': nextMedia }\"><div class=srg-close-next-media-close ng-show=!isDesktop><a class=srg-close-next-media-close-link ng-click=cancel()>&times;</a></div><div class=srg-next-media><p class=next-media-message>{{'NEXT_VIDEO' | translate}}</p><h1 class=next-media-title ng-bind=nextMedia.show.title></h1><p class=next-media-description ng-bind=nextMedia.title></p><p class=next-media-duration>{{'CURRENT_DURATION' | translate}}: {{nextMedia.duration | playerTime}}</p><p class=next-media-countdown><a class=srg-play-button ng-click=loadMedia(nextMedia) aria-label=\"{{ 'PLAY' | translate }}\"><svg class=circle-countdown width=50 height=50><circle class=circle-white cy=25 cx=25 r=23 /><circle class=circle-red cx=25 cy=25 r=23 /><polyline fill=white points=\"14 10, 14 28, 29 19\" transform=\"rotate(270, 25, 19)\"></polyline></svg></a></p><p class=next-media-cancel ng-show=isDesktop><a class=next-media-cancel-link ng-click=cancel()>{{'CANCEL' | translate}}</a></p></div><div class=srg-next-media-autoplay ng-show=!isDesktop><span>Autoplay</span><toggle-switch value=isAutoplay ng-click=toggleAutoplay()></toggle-switch></div></div>"),e.put("src/directive/srg-control-bar/srg-control-bar.html",'<div class=srg-control-bar stop-btn-propagation remove-click-focus><srg-progress-bar ng-if="(!isLive || isDVRActive)"></srg-progress-bar><div class=srg-control-bar-controls><srg-play-button></srg-play-button><srg-backward-button ng-if="::(backward &amp;&amp; !isLive)" seconds=10></srg-backward-button><srg-forward-button ng-if="::(forward &amp;&amp; !isLive)" seconds=30></srg-forward-button><srg-volume-button ng-if=::(volume)></srg-volume-button><div class=grow-block ng-if="isLive &amp;&amp; !isDVR"></div><srg-live-title ng-if="((isLive &amp;&amp; !isDVR) || (isDVR &amp;&amp; !isDVRActive))"></srg-live-title><div class=srg-time-text-container ng-class="::{\'dvr\': isDVR}" ng-if="(!isLive || isDVRActive)"><div class=current-time-container ng-class="::{\'dvr\': isDVR}"><srg-current-time-badge ng-if="(!isDVR || isDVRActive)"></srg-current-time-badge></div><div class=progress-container ng-if="(isDVRActive || !isDVR)"><span class="srg-time-badge time-separator" ng-if=::(!isDVR)></span><srg-progress-bar></srg-progress-bar></div><div class=dvr-current-time-container ng-if=(isDVRActive)><srg-current-time-badge ng-if=(isDVRActive)></srg-current-time-badge></div><div class=duration-container ng-if=::(!isDVR)><srg-duration-badge></srg-duration-badge></div></div><srg-controlbar-settings-btn ng-if="urn.assetType !== \'audio\'"></srg-controlbar-settings-btn><cardboard-button ng-if=vr></cardboard-button><srg-popout-button ng-if="popout &amp;&amp; !isFullscreen &amp;&amp; !isCasting &amp;&amp; !isPictureInPicture" asset-type="{{ ::urn.assetType }}"></srg-popout-button><picture-in-picture-button ng-if="!isCasting &amp;&amp; isPictureInPicture"></picture-in-picture-button><chromecast-button ng-if=chromecast></chromecast-button><airplay-btn ng-if=airplay></airplay-btn><srg-fullscreen-button ng-if=::(fullscreen)></srg-fullscreen-button><srg-play-logo ng-if=playLogo asset-type="{{ ::urn.assetType }}" bu="{{ ::urn.bu }}"></srg-play-logo></div></div>'),e.put("src/directive/srg-controlbar-settings-btn/srg-controlbar-settings-btn.html",'<div class="srg-user-settings clickable" ng-show="(hasHDToggle || hasAutoplay || hasTexttracks || hasAudioTracks) &amp;&amp; hasControlbarSettings" ng-click=toggleMenu() off-click=toggleMenu(false) off-click-if=menu><button class="srg-user-settings-button clickable" aria-label="{{::(\'USER_SETTINGS\' | translate)}}" aria-haspopup=true aria-expanded="{{ menu }}"><svg-icon icon=settings></svg-icon></button><tooltip hide=!menu always-on=true class=tooltip-sub-menu><div class=tooltip-tools ng-class="{\'submenu\': texttrackMenu || audiotrackMenu}"><srg-settings-autoplay-btn ng-if=hasAutoplay ng-hide="texttrackMenu || audiotrackMenu"></srg-settings-autoplay-btn><srg-settings-hd-btn ng-if=hasHDToggle ng-hide="texttrackMenu || audiotrackMenu"></srg-settings-hd-btn><srg-settings-texttracks-btn ng-if=hasTexttracks ng-hide=audiotrackMenu on-open-submenu=texttrackMenuOpened() on-close-submenu=texttrackMenuClosed()></srg-settings-texttracks-btn><srg-settings-audiotracks-btn ng-if=hasAudioTracks ng-hide=texttrackMenu on-open-submenu=audiotrackMenuOpened() on-close-submenu=audiotrackMenuClosed()></srg-settings-audiotracks-btn></div></tooltip><tooltip hide=menu><tooltip-label label="{{::(\'USER_SETTINGS\' | translate)}}"></tooltip-label></tooltip></div>'),e.put("src/directive/srg-countdown-timer/srg-countdown-timer.html","<div class=countdown-time-container><div class=countdown-time-container__layer><div class=\"timer timer--hide\"><div class=days><div class=digit>0</div><div class=digit>0</div><div class=separator>:</div><div class=text aria-valuetext=\"{{'DAYS' | translate}}\">{{'DAYS' | translate}}</div></div><div class=hours><div class=digit>0</div><div class=digit>0</div><div class=separator>:</div><div class=text aria-valuetext=\"{{'HOURS' | translate}}\">{{'HOURS' | translate}}</div></div><div class=minutes><div class=digit>0</div><div class=digit>0</div><div class=separator>:</div><div class=text aria-valuetext=\"{{'MINUTES' | translate}}\">{{'MINUTES' | translate}}</div></div><div class=seconds><div class=digit>0</div><div class=digit>0</div><div class=\"text text--no-padding\" aria-valuetext=\"{{'SECONDS' | translate}}\">{{'SECONDS' | translate}}</div></div></div><div class=\"message-start message-start--invisible\" aria-valuetext=\"{{'PLAYBACK_BEGIN_SOON' | translate}}\">{{'PLAYBACK_BEGIN_SOON' | translate}}</div><div class=\"message-comming-soon message-comming-soon--hide\" aria-valuetext=\"{{'CONTENT_AVAIABLE_IN_SOME_DAYS' | translate:numberOfDaysLeftParams}}\">{{'CONTENT_AVAIABLE_IN_SOME_DAYS' | translate:numberOfDaysLeftParams}}</div></div></div>"),e.put("src/directive/srg-current-time-badge/srg-current-time-badge.html",'<span class="srg-time-badge currentTime" ng-class="::{\'dvr\': isDVR}"><svg-icon ng-if=::isDVR icon=clock ng-class="::\'clock\'"></svg-icon><span class=time-badge-text aria-label="{{\'CURRENT_TIME\' | translate}} {{ seconds }}" tabindex=0>{{ seconds }}</span></span>'),e.put("src/directive/srg-duration-badge/srg-duration-badge.html",'<span class="srg-time-badge duration"><span class=time-badge-text aria-label="{{\'CURRENT_DURATION\' | translate}} {{ duration | playerTime }}" tabindex=0>{{ duration | playerTime }}</span></span>'),e.put("src/directive/srg-dvr-live-button/srg-dvr-live-button.html","<div class=\"srg-dvr-button clickable srg-small-dvr-button\" ng-class=\"{'on': isCurrentlyLive, 'off': !isCurrentlyLive}\" ng-click=goBackToLive()><button class=\"clickable small-dvr-button\" aria-label=\"{{ isCurrentlyLive ? 'IS_LIVE' : 'GO_TO_LIVE' | translate }}\"><svg-icon icon=\"{{ isCurrentlyLive ? 'live-on' : 'live-off' }}\"></svg-icon></button><tooltip><tooltip-label label=\"{{ isCurrentlyLive ? 'IS_LIVE' : 'GO_TO_LIVE' | translate }}\"></tooltip-label></tooltip></div>"),e.put("src/directive/srg-endscreen-container/srg-endscreen-container.html","<div class=srg-endscreen-container><srg-end-screen ng-if=!continuousPlayback></srg-end-screen><srg-continuous-playback ng-if=continuousPlayback></srg-continuous-playback></div>"),e.put("src/directive/srg-endscreen-thumb/srg-endscreen-thumb.html","<div class=srg-endscreen-thumb ng-class=\"::{'blur': blur === 'true'}\"><img ng-src=\"{{(hasThumbnailFilter ? (imgSrc|thumbnail:getThumbnailWidth():getRatio()) : imgSrc)}}\"></div>"),e.put("src/directive/srg-endscreen/srg-endscreen.html","<div class=srg-end-screen-layer ng-class=\"{'fade-in': (medias &amp;&amp; medias.length > 0), 'mode-portal-detail': playerModePortalDetail}\"><div class=srg-flexbox ng-if=\"medias &amp;&amp; medias.length > 0\"><button class=flexbox-child ng-repeat=\"media in medias | limitTo:12\" ng-click=loadMedia(media) role=button ng-class=\"{'flexbox-child-removable': $index > 8, 'flexbox-child-removable-small': $index > 3}\" aria-label=\"{{::'PLAY_MEDIA' | translate}} '{{ ::media.show.title }}' - '{{ ::media.title }}'\"><div class=flexbox-text-container><div class=flexbox-item-title ng-class=\"{'forceOpacity': mobile}\">{{ ::media.title }}</div><div class=flexbox-item-show ng-class=\"{'forceOpacity': mobile}\">{{ ::media.show.title }}</div></div><div class=flexbox-item-duration ng-class=\"{'forceOpacity': mobile}\">{{::media.duration | playerTime}}</div><div class=overlay ng-class=\"{'overlayforceOpacity': mobile}\"></div><srg-end-screen-thumb class=flexbox-item img-src={{::media.imageSrc}}></srg-end-screen-thumb></button></div></div>"),e.put("src/directive/srg-forward-button/srg-forward-button.html","<div class=\"srg-forward-button clickable\" ng-click=forward()><button class=clickable aria-label=\"{{::'FORWARD' | translate:'{seconds: 30}'}}\"><svg-icon icon=forward></svg-icon></button><tooltip><tooltip-label label=\"{{::'FORWARD' | translate:'{seconds: 30}'}}\"></tooltip-label></tooltip></div>"),e.put("src/directive/srg-fullscreen-button/srg-fullscreen-button.html","<div class=\"srg-fullscreen-button clickable\" ng-class=\"{'active': isFullscreen &amp;&amp; !mobile}\" ng-click=toggleFullscreen()><button class=clickable aria-label=\"{{ isFullscreen ? 'EXIT_FULLSCREEN' : 'ENTER_FULLSCREEN' | translate }}\"><svg-icon ng-show=!isFullscreen icon=fullscreen></svg-icon><div class=text ng-show=isFullscreen><svg-icon icon=fullscreen-active></svg-icon><span class=label ng-if=::!mobile>{{::'EXIT_FULLSCREEN' | translate}}</span></div></button><tooltip hide=isFullscreen><tooltip-label label=\"{{::'ENTER_FULLSCREEN' | translate}}\"></tooltip-label></tooltip></div>"),e.put("src/directive/srg-live-title/srg-live-title.html","<div class=srg-live-text-container><div class=text><svg-icon icon=live></svg-icon><span class=label ng-show=::titleVisibility>{{::title}}</span></div></div>"),e.put("src/directive/srg-media-thumb/srg-media-thumb.html","<div class=\"srg-media-thumb srg-media-thumb-gradient\" ng-class=\"::{'blur': blur === 'true', 'backGroundThumb': getThumbnailWidth() > 200}\" ng-style=\"((imgSrc &amp;&amp; getThumbnailWidth() > 0) ? { 'background-image': 'url(' +\n                                                                (hasThumbnailFilter ? (imgSrc|thumbnail:getThumbnailWidth():getRatio()) : imgSrc) +\n                                                                ')'} : {})\"><div class=logo ng-if=::(!imgSrc)></div><div class=credit ng-if=::isPoster>{{imageCredit}}</div><div class=credit_bg ng-if=::isPoster></div><div class=duration ng-if=\"::(duration &amp;&amp; isLive !== 'true')\">{{::duration | playerTime}}</div><div class=\"duration live\" ng-if=\"::(isLive === 'true')\"><svg-icon icon=live></svg-icon></div></div>"),e.put("src/directive/srg-pip-button/srg-pip-button.html","<div class=\"srg-pip-button clickable\" ng-click=goPictureInPicture()><button class=clickable aria-label=\"{{ isPip ? 'PIP_ACTIVE' : 'PIP_INACTIVE' | translate }}\"><svg-icon icon=\"{{ isPip? 'pip-active' : 'pip' }}\"></svg-icon></button><tooltip><tooltip-label label=\"{{ !isPip ? 'PIP_ACTIVE' : 'PIP_INACTIVE' | translate }}\"></tooltip-label></tooltip></div>"),e.put("src/directive/srg-play-button/srg-play-button.html","<div class=\"clickable srg-play-button\" ng-class=\"{'play': paused &amp;&amp; !end,\n                'pause': !paused  &amp;&amp; !end,\n                'replay': end}\" ng-click=togglePlay()><button class=clickable aria-label=\"{{ paused ? 'PLAY' : 'PAUSE' | translate }}\"><svg-icon icon=\"{{ end ? 'replay' : (paused ? 'play' : (isLive ? 'stop' : 'pause')) }}\"></svg-icon></button></div>"),e.put("src/directive/srg-play-logo/srg-play-logo.html",'<div class="srg-logo-container clickable" ng-click=open()><button class=clickable aria-label="{{::\'OPEN_IN_PLAY\' | translate:translationParams}}"><svg-icon icon="{{ \'play-\' + bu }}"></svg-icon></button></div>'),e.put("src/directive/srg-player-error/srg-player-error.html","<div class=srg-error-overlay><div class=srg-error-info-overlay><svg-icon class=srg-error-icon icon=\"{{ DRMUnsupported ? 'drm-error-access' : 'error' }}\"></svg-icon><div class=\"srg-text-container description\" ng-if=!DRMUnsupported role=alert tabindex=0 aria-label=\"{{::'ERROR_' + errorCode + '_MESSAGE' | translate:translationParams}}\">{{::'ERROR_' + errorCode + '_MESSAGE' | translate:translationParams}}</div><div class=\"srg-text-container description clickable\" ng-if=DRMUnsupported ng-click=onClickOnDrmMessage() role=alert tabindex=0 aria-label=\"{{::'ERROR_' + errorCode + '_MESSAGE' | translate:translationParams}}\">{{::'ERROR_' + errorCode + '_MESSAGE' | translate:translationParams}}</div><div class=srg-action-overlay ng-if=flashRequired><button class=\"srg-download-flash-icon clickable\" ng-click=downloadFlash() aria-label=\"{{::'INSTALL_FLASH' | translate:translationParams}}\"></button></div></div></div>"),e.put("src/directive/srg-player-overlay/srg-player-overlay.html","<div ng-click=togglePlay() ng-class=\"{'srg-player-container-overlay': paused}\"><div class=srg-overlay ng-if=\"loading &amp;&amp; !inError\"><svg-icon icon=spinner ng-class=\"'srg-overlay-spinner'\"></svg-icon></div><div class=\"srg-overlay animated\" ng-if=!hidePlay on-animationend=playAnimationFinished()><svg-icon icon=\"{{ is360 ? 'play-360-button' : 'play' }}\" ng-class=\"[{'srg-overlay-360': is360}, 'srg-overlay-default']\"></svg-icon></div><div class=\"srg-overlay animated\" ng-if=!hidePause on-animationend=pauseAnimationFinished()><svg-icon icon=\"{{ isLive ? 'stop' : 'pause'}}\" class=srg-overlay-default></svg-icon></div><div class=\"srg-overlay srg-play-overlay clickable\" ng-show=\"paused &amp;&amp; hidePause &amp;&amp; !loading\"><svg-icon icon=\"{{ is360 ? 'play-360-button' : 'play-big'}}\" class=srg-overlay-default></svg-icon></div><div ng-if=is360 ng-show=tutorial.display class=\"srg-overlay tutorial\"><svg-icon icon=\"{{'tutorial-' + ((mobile) ? 'phone' : 'mouse') + '-' + tutorial.frame }}\"></svg-icon></div></div>"),e.put("src/directive/srg-popout-button/srg-popout-button.html",'<div class="srg-popout-btn clickable" ng-click=popout()><button class=clickable aria-label="{{::\'POPOUT\' | translate:translationParams}}"><svg-icon icon=popout></svg-icon></button><tooltip><tooltip-label label="{{::\'POPOUT\' | translate:translationParams}}"></tooltip-label></tooltip></div>'),e.put("src/directive/srg-progress-bar/srg-progress-bar.html","<div class=srg-progress-bar-container ng-class=\"::{'srg-progress-bar-container-dvr' : isDVR, 'srg-progress-bar-container-dvr-video': isDVR && !isAudio }\"><div class=srg-progress-bar dragging=\"onDragging($ratio, $ended, $canceled)\" ng-mousemove=timePosition($event) ng-mouseleave=leave() role=slider aria-valuemin=0 aria-valuemax=100 aria-valuenow=\"{{ completed }}\" aria-valuetext=\"{{ 'PROGRESS_SLIDER' | translate:timeTranslateParams }}\" tabindex=0><div class=\"srg-progress-bar-completed seek-animation\" ng-style=\"{'width': completed + '%'}\" ng-class=\" {'seek-no-animation':dragging}\"></div><div class=\"srg-progress-bar-buffer seek-animation\" ng-style=\"{'width': bufferEnd + '%', 'margin-left': bufferStart + '%'}\" ng-class=\" {'seek-no-animation':dragging}\"></div><div class=\"srg-progress-bar-scrubber seek-animation\" ng-style=\"{'margin-left': completed + '%'}\" ng-class=\" {'seek-no-animation':dragging}\"></div><tooltip pg-tooltip=true always-on=false follow-mouse=true stop-animation=true ng-if=onmousover><tooltip-label label=\"{{ tooltipTime() }}\" icon-class=\"{{::((isDVR) ? 'clock-icon' : undefined)}}\" icon-resource=clock-black></tooltip-label></tooltip></div><srg-dvr-live-button ng-if=(isDVRActive)></srg-dvr-live-button></div>"),e.put("src/directive/srg-segments-browser/srg-segments-browser.html",'<div class=srg-segment-container remove-click-focus stop-btn-propagation><div class=srg-segment-list scrolling=onScrolling($event) ng-class="{\'navigation\': navigation}"><button class="segment-node-container clickable" ng-class="{\'clickable\': !segment.block.isBlocked,\n                        \'selected-segment\': selected ? selected.urn.str === segment.urn.str : false}" aria-label="{{::\'GO_TO_TOPIC\' | translate}} \'{{::segment.title}}\'" id="{{ segment.urn.id }}" ng-click=loadSegment(segment) ng-repeat="segment in segments" ng-focus=onFocus($event) ng-blur=onBlur()><srg-media-thumb class=img-container img-src={{::segment.imageSrc}} duration={{::segment.duration}} is-live={{::segment.isLive}}></srg-media-thumb><div class=segment-text ellipsis>{{::segment.title}}</div><div class=disabled ng-if=::(segment.block.isBlocked)></div></button></div><div class="srg-arrow srg-arrow-prev left" ng-class="{\'active\': (!beginSegment &amp;&amp; !disabledNavigation), \'clickable\': (!beginSegment &amp;&amp; !disabledNavigation)}" ng-click=scrollLeft() ng-show=navigation><svg-icon icon=arrow-left></svg-icon></div><div class="srg-arrow srg-arrow-next right" ng-class="{\'active\': (!endSegment &amp;&amp; !disabledNavigation), \'clickable\': (!endSegment &amp;&amp; !disabledNavigation)}" ng-click=scrollRight() ng-show=navigation><svg-icon icon=arrow-right></svg-icon></div></div>'),e.put("src/directive/srg-settings-audiotracks-btn/srg-settings-audiotracks-btn.html",'<div class=srg-settings-audiotrack-btn ng-show="items.length > 0" off-click=toggleSubMenu(false) off-click-if=submenu><button ng-hide=submenu class="settings-audiotrack clickable" ng-click=toggleSubMenu() aria-label="{{::(\'SELECT_AUDIOTRACK\' | translate)}}" aria-haspopup=true><tooltip-action title="{{::(\'AUDIOTRACK\' | translate)}}"><div class="tooltip-options active"><span class=options-label ng-if=active>{{ currentItem.label | translate }}</span><svg-icon icon=arrow-right ng-class="\'arrow\'"></svg-icon></div></tooltip-action></button><div class=submenu ng-show=submenu><srg-settings-goback-btn on-clicked=toggleSubMenu(false)></srg-settings-goback-btn><tooltip-menu items=items on-item-selected=onItemSelected(item)></tooltip-menu></div></div>'),e.put("src/directive/srg-settings-autoplay-btn/srg-settings-autoplay-btn.html","<div class=\"settings-autoplay clickable\" ng-click=toggleAutoplay()><button aria-label=\"{{ (!isAutoplay ? 'AUTOPLAY_ON' : 'AUTOPLAY_OFF') | translate }}\"><tooltip-action title=\"{{::('AUTOPLAY' | translate)}}\"><toggle-switch value=isAutoplay></toggle-switch></tooltip-action></button></div>"),e.put("src/directive/srg-settings-goback-btn/srg-settings-goback-btn.html","<div class=srg-settings-goback><button class=\"srg-settings-goback-btn clickable\" ng-click=clicked() aria-label=\"{{::('GO_BACK_MENU' | translate)}}\" aria-haspopup=true><div class=label><svg-icon icon=arrow-left ng-class=\"'icon-prefix'\"></svg-icon><span class=text>{{ 'GO_BACK' | translate }}</span></div></button><hr class=separator></div>"),e.put("src/directive/srg-settings-hd-btn/srg-settings-hd-btn.html","<div class=\"settings-hd clickable\" ng-click=toggleQuality()><button aria-label=\"{{ !isHD ? 'HD_ON' : 'HD_OFF' | translate:translationParams }}\"><tooltip-action icon=hd-white><toggle-switch value=isHD></toggle-switch></tooltip-action></button></div>"),e.put("src/directive/srg-settings-texttracks-btn/srg-settings-texttracks-btn.html",'<div class=srg-settings-texttrack-btn ng-show="items.length > 0" off-click=toggleSubMenu(false) off-click-if=submenu><button ng-if="items.length === 2" class="settings-caption-toggle clickable" ng-hide=sizeMenu ng-click="onItemSelected((active) ? items[1] : items[0])" aria-label="{{ (active ? \'CAPTIONS_OFF\' : \'CAPTIONS_ON\') | translate }}"><tooltip-action title="{{::\'CAPTIONS\' | translate }}"><toggle-switch value=active></toggle-switch></tooltip-action></button> <button ng-if="items.length > 2" ng-hide="submenu || sizeMenu" class="settings-caption clickable" ng-click=toggleSubMenu() aria-label="{{::(\'SELECT_CAPTIONS\' | translate)}}" aria-haspopup=true><tooltip-action title="{{::(\'CAPTIONS\' | translate)}}"><div class="tooltip-options active"><span class=options-label ng-if=active>{{ currentItem.label | translate }}</span><svg-icon icon=arrow-right ng-class="\'arrow\'"></svg-icon></div></tooltip-action></button><div class=submenu ng-show=submenu><srg-settings-goback-btn on-clicked=toggleSubMenu(false)></srg-settings-goback-btn><tooltip-menu items=items on-item-selected=onItemSelected(item)></tooltip-menu></div><srg-settings-texttracks-size-btn ng-if="active &amp;&amp; hasSubtitleSize  &amp;&amp; !isSafari" ng-hide=submenu on-open-submenu=onOpenSizeMenu() on-close-submenu=onCloseSizeMenu()></srg-settings-texttracks-size-btn></div>'),e.put("src/directive/srg-settings-texttracks-size-btn/srg-settings-texttracks-size-btn.html",'<div class=srg-settings-texttrack-size-btn off-click=toggleSubMenu(false) off-click-if=submenu><button class="settings-caption-size clickable" ng-click=toggleSubMenu() ng-hide=submenu aria-label="{{::(\'SELECT_CAPTIONS_SIZE\' | translate)}}" aria-haspopup=true><tooltip-action title="{{::(\'CAPTIONS_SIZE\' | translate)}}"><div class="tooltip-options active"><span class=options-label>{{ currentSize }}</span><svg-icon icon=arrow-right ng-class="\'arrow\'"></svg-icon></div></tooltip-action></button><div class=submenu ng-show=submenu><srg-settings-goback-btn on-clicked=toggleSubMenu(false)></srg-settings-goback-btn><tooltip-menu items=items on-item-selected=onItemSelected(item)></tooltip-menu></div></div>'),e.put("src/directive/srg-title-bar/srg-title-bar.html",'<div class=srg-title-bar stop-btn-propagation remove-click-focus off-click=toggleSharedIconsMenu(false)><div class=srg-title-clickable ng-click=togglePlay() aria-hidden=true></div><div class=srg-title-container ng-if="!isLive &amp;&amp; enableTitle" aria-label="{{::title}} - {{::show}}"><div class=srg-emission-title ng-if=!playLink>{{::title}}</div><button class="srg-emission-title clickable" ng-if=playLink ng-click=openInPlay() aria-label="{{::\'OPEN_IN_PLAY\' | translate:translationParams}}">{{::title}}</button><div class=srg-show-title ng-if=::show>{{::show}}</div></div><div class=srg-share-icon ng-show=enableSocial><button class="srg-share-menu-open-icon clickable" aria-label="{{::\'SHARE\' | translate}}" tabindex=0 aria-haspopup=true aria-expanded="{{ openSharedMenu }}" role=menu ng-click=toggleSharedIconsMenu()><svg-icon icon=share></svg-icon></button><div class=srg-share-icon-container><button ng-if=::(whatsapp) ng-click=shareOnWhatsapp() class="srg-share-whatsapp-icon clickable sharing-item" ng-class="{\'sharing-item-open\':openSharedMenu, \'animated3\':openSharedMenu}" aria-label="{{::\'SHARE_ON_WHATSAPP\' | translate}}" data-action=share/whatsapp/share><svg-icon icon=share-whatsapp class=hover></svg-icon></button> <button ng-if=::(srglike) ng-click=like() class="srg-share-srglike-icon sharing-item" ng-class="{\'liked\': wasSrgLiked, \'clickable\': !wasSrgLiked, \'sharing-item-open\':openSharedMenu, \'animated2\':openSharedMenu}" aria-label="{{::\'LIKE\' | translate}}" role=menuitem><svg-icon icon=share-srglike class=hover></svg-icon></button> <button ng-if=::(facebook) ng-click=shareOnFacebook() class="srg-share-facebook-icon clickable sharing-item" ng-class="{\'sharing-item-open\':openSharedMenu, \'animated1\':openSharedMenu}" aria-label="{{::\'SHARE_ON_FACEBOOK\' | translate}}"><svg-icon icon=share-facebook class=hover></svg-icon></button> <button ng-if=::(twitter) ng-click=shareOnTwitter() class="srg-share-twitter-icon clickable sharing-item" ng-class="{\'sharing-item-open\':openSharedMenu, \'animated0\':openSharedMenu}" aria-label="{{::\'SHARE_ON_TWITTER\' | translate}}"><svg-icon icon=share-twitter class=hover></svg-icon></button></div></div></div>'),e.put("src/directive/srg-volume-button/srg-volume-button.html",'<div class="srg-volume clickable" ng-class="{\'swipping\': swipping,\n                \'button-focused\': buttonFocused}"><button class="srg-volume-button clickable" ng-click=toggleMute() ng-class="{\'muted\': volume.current <= 0}" ng-focus="buttonFocused = true" ng-blur="buttonFocused = false" aria-label="{{ (volume.current > 0 ? \'MUTE\' : \'UNMUTE\') | translate }}"><svg-icon icon="{{ volume.current > 0 ? \'volume\' : \'volume-muted\' }}"></svg-icon></button><div class="srg-volume-slider clickable" role=slider aria-valuemax=0 aria-valuemax={{::volume.max}} aria-valuenow="{{ volume.current }}" aria-valuetext="{{ \'VOLUME_SLIDER\' | translate:volume }}" ng-focus="swipping = true" ng-blur="swipping = false" tabindex=0 dragging="onDragging($ratio, $ended, $canceled)"><div ng-class="\'volume-slider-bg-scrubber\'"></div><div ng-class="\'volume-slider-bg-icon\'" ng-style="{\'width\': volume.current + \'%\'}"></div><div class=volume-container-scrubber><svg-icon icon=volume-scrubber ng-class="\'volume-slider-complete-icon\'" ng-style="{\'margin-left\': volume.current + \'%\'}"></svg-icon></div></div></div>'),e.put("src/directive/warning-message/warning-message.html","<div class=warning-message><notification type=warn on-dismiss=dismiss()><div class=warning-box><svg-icon ng-class=\"'update-browser-icon'\" icon=update-browser></svg-icon><div>{{::'OUTDATED_BROWSER_BEFORE' | translate}} <button class=\"message-link clickable\" ng-click=open() aria-label=\"{::('OUTDATED_BROWSER_BEFORE' | translate) + ('OUTDATED_BROWSER_LINK_TEXT' | translate) }} \">{{::'OUTDATED_BROWSER_LINK_TEXT' | translate}}</button></div></div></notification></div>"),e.put("src/module/srg-player-commons/directive/notification/notification.html",'<div class=notification ng-class=type touching=dismiss()><div class=message><ng-transclude></ng-transclude></div><button class="clickable dismiss" ng-click=dismiss() aria-label="{{::\'DISMISS\' | translate}}"><button></button></button></div>'),e.put("src/module/srg-player-commons/directive/svg-bg/svg-bg.html","<div class=svg-bg><div ng-if=icon ng-include=\"'src/resources/svg/' + icon + '.svg'\"></div></div>"),e.put("src/module/srg-player-commons/directive/svg-icon/svg-icon.html","<div class=svg-icon><div ng-if=icon ng-include=\"'src/resources/svg/' + icon + '.svg'\"></div></div>"),e.put("src/module/srg-player-commons/directive/toggle-switch/toggle-switch.html","<div class=toggle-switch ng-class=\"{'off': !value, 'on': value}\"><div class=toggle></div><span class=on ng-style=\"{'opacity': value ? 1 : 0}\">ON</span> <span class=off ng-style=\"{'opacity': value ? 0 : 1}\">OFF</span></div>"),e.put("src/module/srg-player-commons/directive/tooltip-action/tooltip-action.html",'<div class=tooltip-action><div class="cell push-left"><svg-icon icon="{{ icon }}"></svg-icon><span ng-if=title>{{ title }}</span></div><div class="cell push-right"><ng-transclude></ng-transclude></div></div>'),e.put("src/module/srg-player-commons/directive/tooltip-label/tooltip-label.html","<span class=tooltip-label><svg-icon icon={{::iconResource}} ng-class=::iconClass ng-if=::iconClass></svg-icon><span class=tooltip-text>{{ label }}</span></span>"),e.put("src/module/srg-player-commons/directive/tooltip-menu/tooltip-menu.html",'<div class=tooltip-menu><button class=tooltip-menu-item ng-repeat="item in items" ng-click="select($event, item)" ng-class="{\'selected\': item.selected}" aria-label="{{ item.label | translate }}" aria-checked="{{ item.selected }}"><span class=tooltip-label><svg-icon icon="{{ item.selected ? item.icon.selected : item.icon.unselected }}"></svg-icon><span class=tooltip-text>{{ item.label | translate }}</span></span></button></div>'),e.put("src/module/srg-player-commons/directive/tooltip/tooltip.html","<div class=tooltip-wrapper ng-class=\"{'displaying': isVisible &amp;&amp; !hide,\n                 'tooltip-animated': !stopAnimation &amp;&amp; stopAnimation === undefined,\n                 'tooltip-animated-fade-in': getToolTipState()}\" ng-click=stopPropagation($event)><span class=tooltip ng-click=stopPropagation($event) ng-class=\"{'fit-left': isLeftOverflow,\n                   'fit-right': isRightOverflow,\n                   'progress-bar-tooltip': pgTooltip}\" ng-style=\"{\n          'right': (xPosition &amp;&amp; !isLeftOverflow &amp;&amp; !isRightOverflow) ? xPosition : undefined,\n          'left': auto\n        }\"><ng-transclude></ng-transclude></span><span class=tooltip-arrow ng-if=!followMouse></span></div>"),e.put("src/partial/srg-player/srg-player.html",'<div class=srg-player-container ng-class="{\'srg-player-container-overlay\': display}" ng-controller=SrgPlayerCtrl aria-label="{{ urn.bu.toUpperCase() }} {{ urn.assetType }} Player" aria-describedby=audio-description tabindex=0><p id=audio-description ng-if=isMetadataLoaded ng-show=false>{{ audioDescription }}</p><div class="srg-player-layer {{ bu }}" ng-class="{\'hidden-controls\' : !display &amp;&amp;\n                                        !error &amp;&amp;\n                                        assetType !== \'audio\' &amp;&amp;\n                                        (!end || !supportsPlaysInline) }" ng-mousemove=toggleMouseDisplay(true) ng-mouseleave=toggleMouseDisplay(false) tap=toggleTapDisplay() fullscreen-register><srg-media-element ng-if="sources &amp;&amp; !error" autoplay=autoplay preload=preload ismetadataloaded=isMetadataLoaded sources=sources tracks=tracks start=start type=assetType muted-playback=mutedPlayback></srg-media-element><div ng-show=!throttle><srg-media-thumb class=srg-poster img-src={{poster}} blur={{end}} asset-type={{assetType}} image-crd={{posterCredits}} ng-click="(isSafariIOS()) || toggleTouchDisplay()" ng-if="isMetadataLoaded &amp;&amp;\n                       !error.display &amp;&amp;\n                       (assetType === \'audio\' || end || !hasPlayed || !supportsPlaysInline || isCasting)"></srg-media-thumb><chromecast-overlay ng-if=isCasting></chromecast-overlay><div class=srg-touch-layer ng-click=toggleTouchDisplay() ng-if="!isSafariIOS()&amp;&amp;\n                        desktop &amp;&amp;\n                        !is360 &amp;&amp;\n                        ready &amp;&amp;\n                        display &amp;&amp;\n                        assetType === \'video\' &amp;&amp;\n                        !end"></div><srg-blocked-segment-overlay ng-if=blockedSegment reason="{{ blockCode }}" asset-type="{{ assetType }}" on-countdown-finished=onCountdownFinished()></srg-blocked-segment-overlay><srg-player-error ng-if="error.display &amp;&amp; !end &amp;&amp; error.errorCode != \'STARTDATE\'" reason="{{ error.errorCode }}" is-blocked="{{ error.blocked }}" asset-type="{{ assetType }}"></srg-player-error><srg-countdown-timer class=srg-poster img-src={{poster}} blur={{end}} ng-if="error.errorCode == \'STARTDATE\'" reason="{{ error.errorCode }}" is-blocked="{{ error.blocked }}" valid-from="{{ validFrom }}"></srg-countdown-timer><info-panorama ng-if="is360 &amp;&amp; ready &amp;&amp; !error"></info-panorama><warning-message ng-if="!error &amp;&amp; isBrowserOutdated &amp;&amp; isMetadataLoaded &amp;&amp;!mutedPlayback" on-close=dismissWarning()></warning-message><srg-title-bar ng-if="!error.display &amp;&amp; ready &amp;&amp; !live &amp;&amp; !mutedPlayback" ng-show="(titleBar || isFullscreen) &amp;&amp; !isBrowserOutdated &amp;&amp; !blockedSegment" ng-class="{\'fade-in\' : end || (display &amp;&amp; !hiddenSegments)}"></srg-title-bar><srg-end-screen-container ng-if="endScreen &amp;&amp;\n                       end &amp;&amp;\n                       supportsPlaysInline &amp;&amp;\n                       assetType === \'video\' &amp;&amp;\n                       !mutedPlayback"></srg-end-screen-container><div class=bottom-container ng-class="{\'hidden\': !display &amp;&amp;\n                        assetType !== \'audio\' &amp;&amp;\n                        !isCasting &amp;&amp;\n                        (!end || !supportsPlaysInline)}" ng-if="!error &amp;&amp; ready &amp;&amp;\n'+"                        !(preload === 'none' &amp;&amp; !hasPlayed &amp;&amp; assetType !== 'audio') &amp;&amp;\n                        !(isFlash &amp;&amp; !hasPlayed) &amp;&amp;\n                        !mutedPlayback\"><srg-segments-browser ng-show=\"assetType !== 'audio' &amp;&amp;\n                           (!end  || !endScreen) &amp;&amp;\n                           !blockedSegment &amp;&amp;\n                           hasSegments &amp;&amp;\n                           (segmentsBrowser || isFullscreen) &amp;&amp;\n                           supportsPlaysInline\" ng-class=\"{'always-show-segments': alwaysShowSegments || (end &amp;&amp; !endScreen),\n                           'hidden-segments': hiddenSegments,\n                           'is-live': live,\n                           'srg-segment-container-padding':desktop}\"></srg-segments-browser><srg-control-bar ng-if=controlbarDisplayed ng-class=\"{'fade-out' : !display &amp;&amp;\n                        assetType !== 'audio' &amp;&amp;\n                        !isCasting &amp;&amp;\n                        (!end || !supportsPlaysInline)}\"></srg-control-bar><srg-captions ng-if=\"!end &amp;&amp; !isCasting &amp;&amp; !isSafariIOS()\"></srg-captions></div><srg-captions ng-if=\"ready &amp;&amp; !end &amp;&amp; mutedPlayback &amp;&amp; !isSafariIOS()\"></srg-captions></div><srg-player-overlay ng-show=\"!error.display &amp;&amp;\n                     error.errorCode != 'STARTDATE' &amp;&amp;\n                     (!end || !supportsPlaysInline) &amp;&amp;\n                     !blockedSegment &amp;&amp;\n                     !mutedPlayback &amp;&amp;\n                     !isSafariIOS()\" in-error=!!error on-play-when-error=displayError() preload=preload></srg-player-overlay></div><div class=srg-outside-segments-browser ng-if=\"showOutsideSegments &amp;&amp; !isFullscreen &amp;&amp;\n                (switchToFull || (isMetadataLoaded &amp;&amp;\n                    assetType !== 'audio' &amp;&amp; hasSegments))\"><srg-segments-browser ng-class=\"{ 'srg-segment-container-padding':desktop}\"></srg-segments-browser></div></div>"),e.put("src/resources/svg/airplay.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stAirplay0{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;}\n\t.stAirplay1{fill:#FFFFFF;}</style><g id=Guideline><g id=Technical-player-design transform="translate(-829.000000, -664.000000)"><g id=Group-6 transform="translate(39.000000, 229.000000)"><g id=fullscreen-TECH-PLAYER transform="translate(791.000000, 436.000000)"><path id=fullscreen_1_ class=stAirplay0 d="M10.125,40H3.45c-1.4,0-2.5-1.1-2.5-2.5v-25c0-1.4,1.1-2.5,2.5-2.5h39.1\n\t\t\t\t\tc1.4,0,2.5,1.1,2.5,2.5v25c0,1.4-1.1,2.5-2.5,2.5h-6.3"/></g></g></g></g><path id=SVGID_1_ class=stAirplay1 d="M22.735,32.301c0.702-0.982,1.822-1.004,2.541,0l8.92,12.485\n\tc0.702,0.982,0.285,1.777-0.885,1.777H14.702c-1.191,0-1.604-0.774-0.885-1.777L22.735,32.301z"/></svg>'),e.put("src/resources/svg/arrow-down.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 26 16"><path fill-rule=evenodd clip-rule=evenodd fill=#FFF d="M3 0l10 10L23 0l3 3-13 13L0 3l3-3z"/></svg>'),e.put("src/resources/svg/arrow-left-black.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 26"><path fill-rule=evenodd clip-rule=evenodd fill=#000 d="M16 3L6 13l10 10-3 3L0 13 13 0l3 3z"/></svg>'),e.put("src/resources/svg/arrow-left.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 26"><style>.st-arrow-left{fill:#fff;}</style><path class=st-arrow-left fill-rule=evenodd clip-rule=evenodd d="M16 3L6 13l10 10-3 3L0 13 13 0l3 3z"/></svg>'),e.put("src/resources/svg/arrow-right-black.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 26"><path fill-rule=evenodd clip-rule=evenodd fill=#000 d="M0 23l10-10L0 3l3-3 13 13L3 26l-3-3z"/></svg>'),e.put("src/resources/svg/arrow-right.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 26"><style>.st-arrow-right{fill:#fff;}</style><path class=st-arrow-right fill-rule=evenodd clip-rule=evenodd d="M0 23l10-10L0 3l3-3 13 13L3 26l-3-3z"/></svg>'),e.put("src/resources/svg/arrow-up.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 26 16"><path fill-rule=evenodd clip-rule=evenodd fill=#FFF d="M23 16L13 6 3 16l-3-3L13 0l13 13-3 3z"/></svg>'),e.put("src/resources/svg/backward.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 108 48" style="enable-background:new 0 0 108 48" xml:space=preserve><style>.stBackward{fill:#FFFFFF;}</style><g><g><path class=stBackward d="M17.53,42.1L0.03,25l17.5-17.1c1.2-1.2,3.2-1.2,4.3,0.1c1.2,1.2,1.2,3.2-0.1,4.3L8.83,25l13,12.7\n\t\t\tc1.2,1.2,1.2,3.1,0.1,4.3c-0.6,0.6-1.4,0.9-2.2,0.9C18.93,43,18.13,42.7,17.53,42.1z"/></g><g><path class=stBackward d="M36.23,42.1L18.73,25l17.5-17.1c1.2-1.2,3.2-1.2,4.3,0.1c1.2,1.2,1.2,3.2-0.1,4.3L27.53,25l13,12.7\n\t\t\tc1.2,1.2,1.2,3.1,0.1,4.3c-0.6,0.6-1.4,0.9-2.2,0.9C37.63,43,36.83,42.7,36.23,42.1z"/></g></g><g><g><path class=stBackward d="M63.511,41.828V15.69l-8.381,2.841l-1.705-5.824l11.79-4.404h5.824v33.525L63.511,41.828L63.511,41.828\n\t\t\tL63.511,41.828z"/><path class=stBackward d="M94.195,42.396c-2.131,0-3.978-0.284-5.54-0.852c-1.563-0.568-2.983-1.563-3.978-2.841\n\t\t\tc-1.136-1.421-1.847-3.125-2.415-5.398s-0.852-4.972-0.852-8.381s0.284-6.108,0.852-8.381s1.421-3.977,2.557-5.398\n\t\t\tc1.136-1.278,2.415-2.273,4.12-2.841c1.563-0.568,3.409-0.852,5.54-0.852c3.267,0,5.966,0.71,7.813,2.131s3.267,3.409,3.978,6.25\n\t\t\tc0.71,2.699,1.136,5.824,1.136,9.233s-0.284,6.108-0.852,8.381s-1.421,3.977-2.415,5.398c-1.136,1.421-2.415,2.273-3.978,2.841\n\t\t\tC98.172,42.112,96.326,42.396,94.195,42.396z M94.195,36.288c1.421,0,2.415-0.426,3.125-1.136c0.71-0.852,1.136-2.131,1.421-3.977\n\t\t\tc0.284-1.847,0.426-3.977,0.426-6.25c0-3.551-0.284-6.108-0.71-7.671s-0.994-2.557-1.847-2.983\n\t\t\tc-0.852-0.426-1.563-0.568-2.557-0.568c-1.563,0-2.557,0.426-3.267,1.278s-1.136,2.131-1.421,3.835\n\t\t\tc-0.142,1.705-0.284,3.835-0.284,6.108s0.142,4.262,0.284,5.682s0.426,2.557,0.852,3.409c0.426,0.852,0.852,1.421,1.563,1.705\n\t\t\tC92.49,36.146,93.342,36.288,94.195,36.288z"/></g></g></svg>'),e.put("src/resources/svg/captions.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 34 34"><path fill=#fff d="M17.1 30.9c-.6 0-1.1-.2-1.5-.6L11 25.7H2.1C1 25.7 0 24.8 0 23.6V5.1c0-1.1.9-2 2.1-2H32c1.1 0 1.9.8 1.9 2v18.5c0 1.2-.8 2.1-1.9 2.1h-8.9l-4.6 4.6c-.3.4-.8.6-1.4.6zM2.2 23.5h9.7l5.2 5.2 5.2-5.2h9.5V5.3H2.2v18.2zM32.1 5.3z"/><path fill=#fff d="M8.3 15.8H6.9c-.3 0-.6.2-.6.6V18c0 .3.2.6.6.6h1.4c.3 0 .6-.2.6-.6v-1.7c-.1-.3-.3-.5-.6-.5zm4.7 0h-1.4c-.3 0-.6.2-.6.6V18c0 .3.2.6.6.6H13c.3 0 .6-.2.6-.6v-1.7c-.1-.3-.3-.5-.6-.5zm4.7 0H16c-.3 0-.6.2-.6.6V18c0 .3.2.6.6.6h1.7c.3 0 .6-.2.6-.6v-1.7c-.1-.3-.3-.5-.6-.5zm4.4 0h-1.4c-.3 0-.6.2-.6.6V18c0 .3.2.6.6.6h1.4c.3 0 .6-.2.6-.6v-1.7c0-.3-.3-.5-.6-.5zm4.7 0h-1.4c-.3 0-.6.2-.6.6V18c0 .3.2.6.6.6h1.4c.3 0 .6-.2.6-.6v-1.7c0-.3-.3-.5-.6-.5z"/></svg>'),e.put("src/resources/svg/cardboard-active.svg",'<svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20.636 6H3.2C2.549 6 2 6.568 2 7.27v10.44c0 .701.548 1.27 1.225 1.27h4.763c.51 0 .948-.325 1.132-.785l1.386-3.467a1.556 1.556 0 0 1 1.438-.996c.648 0 1.204.411 1.437.996l1.386 3.467c.184.46.621.784 1.106.784h4.763c.703 0 1.251-.568 1.251-1.269V7.27c0-.7-.548-1.269-1.25-1.269zM7.433 14.774c-1.218 0-2.205-1.022-2.205-2.284 0-1.262.987-2.284 2.205-2.284s2.203 1.022 2.203 2.284c0 1.262-.987 2.284-2.203 2.284zm9.022 0c-1.218 0-2.204-1.022-2.204-2.284 0-1.261.986-2.283 2.204-2.283 1.218 0 2.204 1.022 2.204 2.283 0 1.262-.986 2.283-2.204 2.283z" fill=#fff fill-rule=evenodd /></svg>'),e.put("src/resources/svg/cardboard.svg",'<svg viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20.636 6H3.2C2.549 6 2 6.568 2 7.27v10.44c0 .701.548 1.27 1.225 1.27h4.763c.51 0 .948-.325 1.132-.785l1.386-3.467a1.556 1.556 0 0 1 1.438-.996c.648 0 1.204.411 1.437.996l1.386 3.467c.184.46.621.784 1.106.784h4.763c.703 0 1.251-.568 1.251-1.269V7.27c0-.7-.548-1.269-1.25-1.269zM7.433 14.774c-1.218 0-2.205-1.022-2.205-2.284 0-1.262.987-2.284 2.205-2.284s2.203 1.022 2.203 2.284c0 1.262-.987 2.284-2.203 2.284zm9.022 0c-1.218 0-2.204-1.022-2.204-2.284 0-1.261.986-2.283 2.204-2.283 1.218 0 2.204 1.022 2.204 2.283 0 1.262-.986 2.283-2.204 2.283z" fill=#545454 fill-rule=evenodd /></svg>'),e.put("src/resources/svg/chromecast-active.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.st0-chromecast{fill:none;stroke:#fff;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;}\n\t.st1-chromecast{fill:none;stroke:#fff;stroke-width:2.982;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g><path fill=#fff d="M39.97,36.96H26.802c-0.226,0-0.421-0.158-0.467-0.38c-1.875-9.027-9.303-16.132-18.482-17.679\n\t\tc-0.229-0.039-0.397-0.237-0.397-0.47v-2.472c0-0.486,0.396-0.882,0.882-0.882H39.97c0.486,0,0.882,0.396,0.882,0.882v20.119\n\t\tC40.852,36.564,40.456,36.96,39.97,36.96z"/></g><g id=Guideline_7_><g id=Technical-player-design_7_ transform="translate(-829.000000, -664.000000)"><g id=Group-6_7_ transform="translate(39.000000, 229.000000)"><g id=fullscreen-TECH-PLAYER_7_ transform="translate(791.000000, 436.000000)"><path id=fullscreen_8_ class=st0-chromecast d="M2,15.768v-3.25c0-1.4,1.1-2.5,2.5-2.5h37.1c1.4,0,2.5,1.1,2.5,2.5v25\n\t\t\t\t\tc0,1.4-1.1,2.5-2.5,2.5H27"/></g></g></g></g><g><g><path fill=#fff d="M5.316,42.56c-0.761,0-1.499-0.306-2.04-0.834c-0.536-0.528-0.841-1.26-0.841-2.004c0-0.749,0.305-1.481,0.841-2.009\n\t\t\tc0.542-0.527,1.279-0.834,2.04-0.834c0.755,0,1.499,0.306,2.035,0.834s0.847,1.26,0.847,2.009c0,0.744-0.311,1.476-0.847,2.004\n\t\t\tS6.071,42.56,5.316,42.56z"/></g><path class=st1-chromecast d=M3.757,23.248c9.844,0.427,17.732,8.27,18.04,17.993 /><path class=st1-chromecast d=M3.982,31.124c5.702,0,10.331,4.521,10.39,10.121 /></g></svg>'),e.put("src/resources/svg/chromecast.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.ststChromecast0{fill:none;stroke:#fff;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;}\n\t.ststChromecast1{fill:#fff;}\n\t.ststChromecast2{fill:none;stroke:#fff;stroke-width:2.982;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g id=Guideline><g id=Technical-player-design transform="translate(-829.000000, -664.000000)"><g id=Group-6 transform="translate(39.000000, 229.000000)"><g id=fullscreen-TECH-PLAYER transform="translate(791.000000, 436.000000)"><path id=fullscreen_2_ class=ststChromecast0 d="M2,15.75V12.5C2,11.1,3.1,10,4.5,10h37.1c1.4,0,2.5,1.1,2.5,2.5v25\n\t\t\t\t\tc0,1.4-1.1,2.5-2.5,2.5H27"/></g></g></g></g><g><g><path class=ststChromecast1 d="M5.316,42.56c-0.761,0-1.499-0.306-2.04-0.834c-0.536-0.528-0.841-1.26-0.841-2.004\n\t\t\tc0-0.749,0.305-1.481,0.841-2.009c0.542-0.527,1.279-0.834,2.04-0.834c0.755,0,1.499,0.306,2.035,0.834s0.847,1.26,0.847,2.009\n\t\t\tc0,0.744-0.311,1.476-0.847,2.004S6.071,42.56,5.316,42.56z"/></g><path class=ststChromecast2 d=M3.757,23.248c9.844,0.427,17.732,8.27,18.04,17.993 /><path class=ststChromecast2 d=M3.982,31.124c5.702,0,10.331,4.521,10.39,10.121 /></g></svg>'),e.put("src/resources/svg/clock-black.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 14 14" style="enable-background:new 0 0 14 14" xml:space=preserve><style>.stClockBlack{fill:#000;}</style><g><path class=stClockBlack d="M7.039,0C7.026,0,7.013,0,7,0C3.158,0,0.022,3.114,0,6.962c-0.022,3.86,3.101,7.017,6.961,7.038\n\t\tc0.013,0,0.027,0,0.04,0c1.855,0,3.601-0.717,4.921-2.023c1.329-1.314,2.068-3.069,2.078-4.938C14.021,3.179,10.899,0.022,7.039,0z\n\t\t M10.862,10.905c-1.036,1.024-2.406,1.587-3.861,1.587c-0.01,0-0.021,0-0.031,0c-3.028-0.017-5.478-2.495-5.462-5.523\n\t\tC1.524,3.952,3.985,1.508,7,1.508c0.01,0,0.021,0,0.031,0c3.028,0.017,5.478,2.495,5.462,5.523\n\t\tC12.484,8.498,11.905,9.873,10.862,10.905z"/><path class=stClockBlack d="M7.008,2.436c-0.416,0-0.754,0.338-0.754,0.754v2.92H4.651c-0.416,0-0.754,0.338-0.754,0.754\n\t\ts0.338,0.754,0.754,0.754h2.357c0.416,0,0.754-0.338,0.754-0.754V3.189C7.761,2.773,7.423,2.436,7.008,2.436z"/></g></svg>'),e.put("src/resources/svg/clock.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 12 12" style="enable-background:new 0 0 12 12" xml:space=preserve><style>.stClock{fill:#fff;}</style><g><path class=stClock d="M6.033,0C6.022,0,6.011,0,6,0C2.707,0,0.019,2.669,0,5.967C-0.019,9.276,2.658,11.982,5.967,12\n\t\tc0.011,0,0.023,0,0.034,0c1.59,0,3.087-0.615,4.218-1.734C11.358,9.14,11.991,7.635,12,6.033C12.018,2.725,9.342,0.019,6.033,0z\n\t\t M9.31,9.347c-0.888,0.878-2.062,1.36-3.309,1.36c-0.009,0-0.018,0-0.027,0c-2.595-0.015-4.695-2.139-4.682-4.734\n\t\tC1.306,3.387,3.416,1.293,6,1.293c0.009,0,0.018,0,0.027,0c2.595,0.015,4.695,2.139,4.682,4.734\n\t\tC10.7,7.284,10.204,8.463,9.31,9.347z"/><path class=stClock d="M6.007,2.088c-0.357,0-0.646,0.29-0.646,0.646v2.503H3.987c-0.357,0-0.646,0.29-0.646,0.646\n\t\tc0,0.357,0.29,0.646,0.646,0.646h2.02c0.357,0,0.646-0.29,0.646-0.646v-3.15C6.652,2.377,6.363,2.088,6.007,2.088z"/></g></svg>'),e.put("src/resources/svg/drm-error-access.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 22 22" style="enable-background:new 0 0 22 22" xml:space=preserve><style>.st0{fill:none;stroke:#FFFFFF;stroke-width:2;stroke-miterlimit:10;}\n\t.st1{fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n\t.st2{fill:#FFFFFF;}</style><g><circle class=st0 cx=11 cy=11 r=8.219 /><g><line class=st1 x1=11 y1=5.848 x2=11 y2=12.009 /><circle class=st2 cx=11 cy=15.624 r=1.337 /></g></g></svg>'),e.put("src/resources/svg/error.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 110 98"><path fill=#424242 d="M55 0L.556 98h108.888z"/><path fill=#FFF d="M49.556 32.667h10.889v32.667H49.556zm0 39.926h10.889v10.889H49.556z"/></svg>'),e.put("src/resources/svg/forward.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 108 48" style="enable-background:new 0 0 108 48" xml:space=preserve><style>.stForward{fill:#FFFFFF;}</style><g><g><g><path class=stForward d="M89.479,42.934c-0.8,0-1.6-0.3-2.2-0.9c-1.1-1.2-1.1-3.1,0.1-4.3l13-12.7l-12.9-12.7\n\t\t\t\tc-1.3-1.1-1.3-3.1-0.1-4.3c1.1-1.3,3.1-1.3,4.3-0.1l17.5,17.1l-17.5,17.1C91.079,42.734,90.279,43.034,89.479,42.934z"/></g><g><path class=stForward d="M70.779,42.934c-0.8,0-1.6-0.3-2.2-0.9c-1.1-1.2-1.1-3.1,0.1-4.3l13-12.7l-12.9-12.7\n\t\t\t\tc-1.3-1.1-1.3-3.1-0.1-4.3c1.1-1.3,3.1-1.3,4.3-0.1l17.5,17.1l-17.5,17.1C72.379,42.734,71.579,43.034,70.779,42.934z"/></g></g><g><path class=stForward d="M11.302,42.433c-2.373,0-4.548-0.198-6.526-0.395c-1.977-0.198-3.164-0.593-3.955-0.791l0.989-6.13\n\t\t\tc2.768,0.593,5.735,0.989,8.899,0.989c1.78,0,3.362-0.395,4.548-0.989c1.186-0.593,1.78-1.78,1.78-3.362\n\t\t\tc0-1.384-0.395-2.373-0.989-2.966c-0.791-0.791-2.175-1.186-4.153-1.186H5.963v-6.13h5.932c1.977,0,3.362-0.395,3.955-1.186\n\t\t\ts0.989-1.78,0.989-2.966c0-1.384-0.593-2.175-1.582-2.768s-2.373-0.791-3.955-0.791s-3.559,0.198-5.537,0.593\n\t\t\tC3.59,14.75,2.206,14.948,1.81,15.146l0.395-6.13c0.198,0,0.593-0.198,1.186-0.395c0.595-0.2,1.386-0.398,2.177-0.596\n\t\t\tc0.791-0.198,1.78-0.395,2.966-0.593s2.373-0.198,3.559-0.198c4.153,0,7.119,0.791,9.096,2.571s2.966,4.153,2.966,7.119\n\t\t\tc0,1.78-0.395,3.164-0.989,4.35c-0.593,1.186-1.582,2.175-2.966,2.966c1.582,0.791,2.571,1.78,3.362,3.164\n\t\t\tc0.593,1.384,0.989,2.768,0.989,4.548c0,2.373-0.593,4.548-1.977,6.13c-1.186,1.78-2.966,2.768-4.746,3.362\n\t\t\tC15.653,42.038,13.477,42.433,11.302,42.433z"/><path class=stForward d="M43.139,42.433c-2.175,0-3.955-0.198-5.537-0.791c-1.582-0.593-2.966-1.582-3.955-2.966\n\t\t\tc-0.989-1.384-1.977-3.164-2.373-5.339c-0.593-2.175-0.791-4.944-0.791-8.305s0.198-6.13,0.791-8.305s1.384-3.955,2.571-5.339\n\t\t\tc1.186-1.384,2.373-2.373,3.955-2.768c1.582-0.593,3.362-0.791,5.537-0.791c3.362,0,5.932,0.593,7.91,1.977\n\t\t\tc1.977,1.384,3.164,3.362,3.955,6.13s1.186,5.735,1.186,9.096s-0.198,6.13-0.791,8.305s-1.384,3.955-2.373,5.339\n\t\t\tc-0.989,1.384-2.373,2.373-3.955,2.966C47.094,42.038,45.315,42.433,43.139,42.433z M43.139,36.105\n\t\t\tc1.384,0,2.373-0.395,3.164-1.186s1.186-2.175,1.384-3.955s0.395-3.955,0.395-6.13c0-3.559-0.198-6.13-0.593-7.712\n\t\t\tc-0.395-1.582-0.989-2.571-1.78-2.966c-0.791-0.395-1.582-0.593-2.571-0.593c-1.582,0-2.571,0.395-3.362,1.186\n\t\t\tc-0.791,0.791-1.186,2.175-1.384,3.955s-0.395,3.757-0.395,6.13s0,4.153,0.198,5.735c0.198,1.384,0.395,2.571,0.791,3.362\n\t\t\tc0.395,0.791,0.989,1.384,1.582,1.78C41.557,36.105,42.151,36.105,43.139,36.105z"/></g></g></svg>'),e.put("src/resources/svg/fullscreen-active.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stFullscreenActive{fill:#FFFFFF;}</style><path class=stFullscreenActive d="M1.626,42.917c-0.468,0-0.93-0.219-1.223-0.629c-0.48-0.675-0.324-1.611,0.351-2.093l44.75-31.917\n            c0.672-0.481,1.611-0.325,2.093,0.35c0.48,0.674,0.324,1.611-0.351,2.092L2.496,42.639C2.232,42.826,1.928,42.917,1.626,42.917z"/><path class=stFullscreenActive d="M43.626,14.591v22.762c0,0.536-0.436,0.972-0.971,0.972H10.351l-4.206,3h36.51\n            c2.189,0,3.971-1.781,3.971-3.972V12.647c0-0.063-0.016-0.121-0.018-0.183L43.626,14.591z"/><path class=stFullscreenActive d="M4.625,36.265V12.647c0-0.536,0.436-0.971,0.971-0.971h33.506l4.125-2.942\n            c-0.188-0.028-0.376-0.058-0.572-0.058H5.596c-2.189,0-3.971,1.781-3.971,3.971v24.706c0,0.332,0.053,0.65,0.13,0.959\n            L4.625,36.265z"/></svg>'),e.put("src/resources/svg/fullscreen.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stFullscreen{fill:none;stroke:#fff;stroke-width:3.0178;}</style><g id=Guideline><g id=Technical-player-design transform="translate(-829.000000, -664.000000)"><g id=Group-6 transform="translate(39.000000, 229.000000)"><g id=fullscreen-TECH-PLAYER transform="translate(791.000000, 436.000000)"><path id=fullscreen class=stFullscreen d="M4.5,10h37.1c1.4,0,2.5,1.1,2.5,2.5v25c0,1.4-1.1,2.5-2.5,2.5H4.5C3.1,40,2,38.9,2,37.5\n\t\t\t\t\tv-25C2,11.1,3.1,10,4.5,10z"/></g></g></g></g></svg>'),e.put("src/resources/svg/hd-black.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 20 14"><path d="M13.3 10c-.2 0-.3.1-.3.3v2.9c0 .2.1.3.3.3h.4c1 0 1.6-.1 2.4-.3.8-.2 1.5-.6 2.1-1.1.6-.5 1-1.2 1.3-2 .3-.8.5-1.9.5-3.1 0-1.3-.2-2.3-.5-3.2-.3-.8-.8-1.5-1.3-2-.6-.5-1.3-.8-2.1-1-.8-.2-1.7-.3-2.8-.3H7.9c-.2 0-.3.1-.3.3v4.3c0 .2-.1.3-.3.3H4.1c-.2 0-.3-.1-.3-.3V.8c0-.2-.1-.3-.3-.3H.3C.1.5 0 .6 0 .8v12.4c0 .2.1.3.3.3h3.2c.2 0 .3-.1.3-.3V8.9c0-.2.1-.3.3-.3h3.2c.2 0 .3.1.3.3v4.3c0 .2.1.3.3.3h3.2c.2 0 .3-.1.3-.3V3.9h2c.4 0 .9 0 1.3.1.3.1.5.1.7.3.2.2.4.4.5.6.2.4.3.9.3 1.3.1.7 0 1.5-.1 2.2-.1.6-.4 1.3-1.1 1.4-.4.2-.8.2-1.2.2h-.5z"/></svg>'),e.put("src/resources/svg/hd-grey.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 20 14"><path fill=#848484 d="M13.3 10c-.2 0-.3.1-.3.3v2.9c0 .2.1.3.3.3h.4c1 0 1.6-.1 2.4-.3.8-.2 1.5-.6 2.1-1.1.6-.5 1-1.2 1.3-2 .3-.8.5-1.9.5-3.1 0-1.3-.2-2.3-.5-3.2-.3-.8-.8-1.5-1.3-2-.6-.5-1.3-.8-2.1-1-.8-.2-1.7-.3-2.8-.3H7.9c-.2 0-.3.1-.3.3v4.3c0 .2-.1.3-.3.3H4.1c-.2 0-.3-.1-.3-.3V.8c0-.2-.1-.3-.3-.3H.3C.1.5 0 .6 0 .8v12.4c0 .2.1.3.3.3h3.2c.2 0 .3-.1.3-.3V8.9c0-.2.1-.3.3-.3h3.2c.2 0 .3.1.3.3v4.3c0 .2.1.3.3.3h3.2c.2 0 .3-.1.3-.3V3.9h2c.4 0 .9 0 1.3.1.3.1.5.1.7.3.2.2.4.4.5.6.2.4.3.9.3 1.3.1.7 0 1.5-.1 2.2-.1.6-.4 1.3-1.1 1.4-.4.2-.8.2-1.2.2h-.5z"/></svg>'),e.put("src/resources/svg/hd-white.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 20 14"><path fill=#fff d="M13.3 10c-.2 0-.3.1-.3.3v2.9c0 .2.1.3.3.3h.4c1 0 1.6-.1 2.4-.3.8-.2 1.5-.6 2.1-1.1.6-.5 1-1.2 1.3-2 .3-.8.5-1.9.5-3.1 0-1.3-.2-2.3-.5-3.2-.3-.8-.8-1.5-1.3-2-.6-.5-1.3-.8-2.1-1-.8-.2-1.7-.3-2.8-.3H7.9c-.2 0-.3.1-.3.3v4.3c0 .2-.1.3-.3.3H4.1c-.2 0-.3-.1-.3-.3V.8c0-.2-.1-.3-.3-.3H.3C.1.5 0 .6 0 .8v12.4c0 .2.1.3.3.3h3.2c.2 0 .3-.1.3-.3V8.9c0-.2.1-.3.3-.3h3.2c.2 0 .3.1.3.3v4.3c0 .2.1.3.3.3h3.2c.2 0 .3-.1.3-.3V3.9h2c.4 0 .9 0 1.3.1.3.1.5.1.7.3.2.2.4.4.5.6.2.4.3.9.3 1.3.1.7 0 1.5-.1 2.2-.1.6-.4 1.3-1.1 1.4-.4.2-.8.2-1.2.2h-.5z"/></svg>'),e.put("src/resources/svg/live-off.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 92.7 48" style="enable-background:new 0 0 92.7 48" xml:space=preserve><style>.stLiveoff{fill:#FFFFFF;}</style><path class=stLiveoff d=M88.3,41.5h-84c-2.2,0-4-1.8-4-4v-27c0-2.2,1.8-4,4-4h84c2.2,0,4,1.8,4,4v27C92.3,39.7,90.5,41.5,88.3,41.5z /><g><path d=M36,31.5v-15h3.4v12.1h6.2l-0.4,2.9L36,31.5L36,31.5z /><path d=M47.8,31.5v-15h3.4v15L47.8,31.5L47.8,31.5z /><path d=M58.3,31.5l-5.1-15H57l3.2,10.8l3.2-10.8h3.6l-5.1,15L58.3,31.5L58.3,31.5z /><path d=M69.1,31.5v-15h9.7v2.9h-6.3v3h5.6v2.9h-5.6v3.3h6.6l-0.4,2.9H69.1L69.1,31.5z /></g><g><g><g><path id=SVGID_2_ d="M27.2,23.5c0.5,0.3,0.5,0.8,0,1l-13.6,8.4c-0.5,0.3-0.8,0.1-0.8-0.5V15.6c0-0.6,0.4-0.8,0.8-0.5L27.2,23.5\n\t\t\t\tz"/></g></g></g></svg>'),e.put("src/resources/svg/live-on.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 92.7 48" style="enable-background:new 0 0 92.7 48" xml:space=preserve><style>.stLiveonRed{fill:#BE111A;}\n\t.stLiveonWhite{fill:#FFFFFF;}</style><path class=stLiveonRed d=M88.3,41.5h-84c-2.2,0-4-1.8-4-4v-27c0-2.2,1.8-4,4-4h84c2.2,0,4,1.8,4,4v27C92.3,39.7,90.5,41.5,88.3,41.5z /><g><path class=stLiveonWhite d=M36,31.5v-15h3.4v12.1h6.2l-0.4,2.9L36,31.5L36,31.5z /><path class=stLiveonWhite d=M47.8,31.5v-15h3.4v15L47.8,31.5L47.8,31.5z /><path class=stLiveonWhite d=M58.3,31.5l-5.1-15H57l3.2,10.8l3.2-10.8h3.6l-5.1,15L58.3,31.5L58.3,31.5z /><path class=stLiveonWhite d=M69.1,31.5v-15h9.7v2.9h-6.3v3h5.6v2.9h-5.6v3.3h6.6l-0.4,2.9H69.1L69.1,31.5z /></g><circle class=stLiveonWhite cx=18 cy=24 r=7.4 /></svg>'),e.put("src/resources/svg/live.svg",'<svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 68 48" style="enable-background:new 0 0 68 48" xml:space=preserve><style>.stLiveOnRect{fill:#BE111A;}\n\t.stLiveOnText{fill:#FFFFFF;}</style><path class=stLiveOnRect d=M64,43.5H4c-2.2,0-4-1.8-4-4v-27c0-2.2,1.8-4,4-4h60c2.2,0,4,1.8,4,4v27C68,41.7,66.2,43.5,64,43.5z /><g><path class=stLiveOnText d=M13.45,33.5v-15h3.4v12.1h6.2l-0.4,2.9H13.45L13.45,33.5z /><path class=stLiveOnText d=M25.25,33.5v-15h3.4v15H25.25L25.25,33.5z /><path class=stLiveOnText d=M35.75,33.5l-5.1-15h3.8l3.2,10.8l3.2-10.8h3.6l-5.1,15H35.75L35.75,33.5z /><path class=stLiveOnText d=M46.55,33.5v-15h9.7v2.9h-6.3v3h5.6v2.9h-5.6v3.3h6.6l-0.4,2.9H46.55L46.55,33.5z /></g></svg>'),e.put("src/resources/svg/pause.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stPause{fill:#fff;}</style><g><g><path id=SVGID_1_ class=stPause d="M9,8.3C9,7,10,6,11.2,6h6.6C19,6,20,7,20,8.3v31.4c0,1.2-1,2.3-2.2,2.3h-6.6C10,42,9,41,9,39.7\n\t\t\tV8.3z"/></g><g><path id=SVGID_2_ class=stPause d="M28,8.3c0-1.2,1-2.3,2.2-2.3h6.5C38,6,39,7,39,8.3v31.4c0,1.2-1,2.3-2.2,2.3h-6.5\n\t\t\tc-1.2,0-2.2-1-2.2-2.3C28,39.7,28,8.3,28,8.3z"/></g></g></svg>'),e.put("src/resources/svg/pip-active.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stPipActive0{fill:#FFFFFF;}\n\t.stPipActive1{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;}\n\t.stPipActive2{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g><path class=stPipActive0 d="M46.024,46.047H26.976c-0.55,0-1-0.45-1-1V34.125c0-0.55,0.45-1,1-1h19.049c0.55,0,1,0.45,1,1v10.922\n\t\tC47.024,45.597,46.575,46.047,46.024,46.047z"/><g id=Guideline_1_><g id=Technical-player-design_1_ transform="translate(-829.000000, -664.000000)"><g id=Group-6_1_ transform="translate(39.000000, 229.000000)"><g id=fullscreen-TECH-PLAYER_1_ transform="translate(791.000000, 436.000000)"><path id=fullscreen_2_ class=stPipActive1 d="M19.309,40H4.396c-1.355,0-2.42-1.1-2.42-2.5v-25c0-1.4,1.065-2.5,2.42-2.5h35.91\n\t\t\t\t\t\tc1.355,0,2.42,1.1,2.42,2.5v14.125"/></g></g></g></g><g><line class=stPipActive2 x1=10.624 y1=18.437 x2=19.781 y2=28.223 /><path class=stPipActive2 d=M9.677,27.145v-8c0-0.838,0.686-1.524,1.524-1.524h8 /></g></g></svg>'),e.put("src/resources/svg/pip.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stPip0{fill:#FFFFFF;}\n\t.stPip1{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;}\n\t.stPip2{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g><path class=stPip0 d="M46.024,46.047H26.976c-0.55,0-1-0.45-1-1V34.125c0-0.55,0.45-1,1-1h19.049c0.55,0,1,0.45,1,1v10.922\n\t\tC47.024,45.597,46.575,46.047,46.024,46.047z"/><g id=Guideline_1_><g id=Technical-player-design_1_ transform="translate(-829.000000, -664.000000)"><g id=Group-6_1_ transform="translate(39.000000, 229.000000)"><g id=fullscreen-TECH-PLAYER_1_ transform="translate(791.000000, 436.000000)"><path id=fullscreen_2_ class=stPip1 d="M19.309,40H4.396c-1.355,0-2.42-1.1-2.42-2.5v-25c0-1.4,1.065-2.5,2.42-2.5h35.91\n\t\t\t\t\t\tc1.355,0,2.42,1.1,2.42,2.5v14.125"/></g></g></g></g><g><line class=stPip2 x1=18.834 y1=27.407 x2=9.677 y2=17.621 /><path class=stPip2 d=M19.781,18.699v8c0,0.838-0.686,1.524-1.524,1.524h-8 /></g></g></svg>'),e.put("src/resources/svg/play-360-button.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 64 64" style="enable-background:new 0 0 64 64" xml:space=preserve><style>.svg-360-0{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n\t.svg-360-1{fill:#FFFFFF;}</style><g><path class=svg-360-0 d="M58.9,32c0,15.4-12.5,27.9-27.9,27.9S3.2,47.4,3.2,32S15.7,4.1,31.1,4.1c7.7,0,14.7,3.1,19.7,8.2\n\t\tc0.6,0.6,1.2,1.2,1.7,1.9c0.3,0.4,0.6,0.8,0.9,1.2"/><g><path class=svg-360-1 d="M18.4,39c-1,0-1.9-0.1-2.6-0.2c-0.8-0.1-1.3-0.2-1.6-0.3l0.4-2.4c1.1,0.2,2.3,0.4,3.6,0.4\n\t\t\tc0.7,0,1.3-0.1,1.8-0.4c0.5-0.3,0.7-0.7,0.7-1.3c0-0.5-0.1-0.9-0.4-1.2s-0.8-0.4-1.7-0.4h-2.4v-2.4h2.4c0.8,0,1.3-0.2,1.6-0.5\n\t\t\ts0.4-0.7,0.4-1.2S20.4,28.2,20,28s-0.9-0.3-1.6-0.3c-0.6,0-1.4,0.1-2.2,0.2c-0.9,0.2-1.4,0.3-1.6,0.3l0.2-2.5\n\t\t\tc0.1,0,0.2-0.1,0.4-0.1c0.2-0.1,0.5-0.2,0.9-0.2c0.3-0.1,0.7-0.1,1.2-0.2c0.4-0.1,0.9-0.1,1.4-0.1c1.6,0,2.9,0.3,3.6,1\n\t\t\tc0.8,0.7,1.2,1.6,1.2,2.8c0,0.7-0.1,1.3-0.4,1.7c-0.2,0.5-0.6,0.8-1.2,1.2c0.6,0.3,1,0.7,1.3,1.3c0.3,0.5,0.4,1.1,0.4,1.8\n\t\t\tc0,1-0.3,1.8-0.8,2.5s-1.2,1.1-1.9,1.3C20.1,38.9,19.3,39,18.4,39z"/><path class=svg-360-1 d="M31.3,39c-0.8,0-1.6-0.1-2.2-0.4c-0.6-0.2-1.1-0.6-1.6-1.1c-0.4-0.5-0.7-1.2-1-2c-0.2-0.8-0.3-1.9-0.3-3.1\n\t\t\tc0-1.8,0.3-3.3,0.9-4.5s1.4-1.9,2.3-2.3s1.9-0.6,2.8-0.6c0.8,0,1.5,0.1,2,0.2c0.6,0.1,1,0.2,1.3,0.3l-0.4,2.3\n\t\t\tc-1.1-0.2-2-0.3-2.6-0.3c-0.8,0-1.4,0.1-1.9,0.4s-0.8,0.6-1,1.1s-0.4,1-0.4,1.6c0.3-0.1,0.7-0.3,1.2-0.4s0.9-0.2,1.4-0.2\n\t\t\tc1.2,0,2.1,0.2,2.8,0.7s1.1,1.1,1.3,1.7c0.2,0.7,0.3,1.3,0.3,1.9c0,1.6-0.4,2.7-1.2,3.5C34.1,38.6,32.9,39,31.3,39z M31.4,36.6\n\t\t\tc0.7,0,1.1-0.2,1.5-0.5c0.3-0.4,0.5-1,0.5-1.8c0-0.7-0.1-1.2-0.4-1.5s-0.8-0.5-1.6-0.5c-0.4,0-0.8,0.1-1.2,0.2\n\t\t\tc-0.4,0.1-0.7,0.2-0.9,0.3c0,0.8,0.1,1.4,0.2,1.9s0.3,0.9,0.4,1.2c0.2,0.3,0.4,0.5,0.7,0.6C30.7,36.6,31,36.6,31.4,36.6z"/><path class=svg-360-1 d="M42.8,39c-0.8,0-1.6-0.1-2.2-0.3C40,38.4,39.4,38,39,37.5s-0.8-1.3-1-2.1c-0.2-0.9-0.3-2-0.3-3.3\n\t\t\ts0.1-2.5,0.3-3.4s0.6-1.6,1-2.1s1-0.9,1.6-1.1S42,25,42.8,25c1.3,0,2.4,0.3,3.1,0.8s1.3,1.4,1.6,2.5s0.4,2.3,0.4,3.7\n\t\t\tc0,1.3-0.1,2.5-0.3,3.3c-0.2,0.9-0.6,1.6-1,2.1s-1,0.9-1.6,1.2C44.4,38.9,43.7,39,42.8,39z M42.8,36.5c0.6,0,1-0.2,1.3-0.5\n\t\t\ts0.5-0.8,0.6-1.6c0.1-0.7,0.2-1.6,0.2-2.5c0-1.4-0.1-2.4-0.3-3s-0.4-1-0.7-1.2s-0.6-0.2-1-0.2c-0.6,0-1,0.2-1.3,0.5\n\t\t\ts-0.5,0.8-0.5,1.5S41,31,41,31.9s0,1.7,0.1,2.3c0.1,0.6,0.2,1,0.3,1.4c0.2,0.3,0.4,0.6,0.6,0.7C42.2,36.4,42.5,36.5,42.8,36.5z"/></g><g><path class=svg-360-1 d="M56.9,27.1c-0.6,0-1.1-0.1-1.6-0.3c-0.5-0.2-0.9-0.5-1.2-0.8s-0.6-0.7-0.8-1.2s-0.3-1-0.3-1.5\n\t\t\tc0-0.8,0.2-1.5,0.6-2.2c0.4-0.6,0.9-1,1.5-1.3c0.6-0.2,1.2-0.4,1.8-0.4c0.9,0,1.6,0.2,2.2,0.6c0.6,0.4,1,0.9,1.3,1.5\n\t\t\ts0.4,1.2,0.4,1.7c0,0.8-0.2,1.5-0.6,2.1c-0.4,0.6-0.9,1.1-1.5,1.3C58.1,27,57.5,27.1,56.9,27.1z M56.9,25c0.6,0,1-0.2,1.2-0.5\n\t\t\tc0.3-0.3,0.4-0.7,0.4-1.2s-0.1-0.9-0.4-1.2c-0.3-0.3-0.7-0.5-1.2-0.5c-0.6,0-1,0.2-1.2,0.5c-0.3,0.3-0.4,0.7-0.4,1.2\n\t\t\ts0.1,0.9,0.4,1.2C55.9,24.9,56.3,25,56.9,25z"/></g></g></svg>'),e.put("src/resources/svg/play-big.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=svg-play-big xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.svg-play-big-over{\n        transition: all 0.3s ease-out;\n        fill:rgba(255,255,255, 0.9);\n      }\n      #svg-play-big:hover .svg-play-big-under{\n          fill:rgba(0,0,0, 0.4);\n      }</style><path id=SVGID_1_ class=svg-play-big-over d="M38.18,22.959c0.938,0.575,0.937,1.507,0,2.082L10.814,41.817\n        c-0.938,0.575-1.698,0.146-1.698-0.961V7.143c0-1.105,0.76-1.535,1.698-0.96L38.18,22.959z"/></svg>'),e.put("src/resources/svg/play-rsi-big.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 57 20" style="enable-background:new 0 0 57 20" xml:space=preserve><style>.st0{fill:#FFFFFF;}\n\t.st1{fill:#AF001E;}</style><g id=Calque_2><g><path class=st0 d=M7.53,14.77V5.23h2.18v7.69h3.93l-0.23,1.86H7.53V14.77z /><path class=st0 d="M15.3,5.23l-3.42,9.54h2.11l0.79-2.31h3l0.79,2.31h2.2l-3.4-9.54L15.3,5.23z M15.32,10.72l0.99-3.11\n\t\t\tl0.95,3.11H15.32z"/><polygon class=st0 points="24.82,5.23 22.88,8.94 20.95,5.23 18.59,5.23 21.73,10.73 21.73,14.77 23.91,14.77 23.91,10.73 \n\t\t\t27.03,5.23 \t\t"/><path class=st0 d="M5.81,5.7c-0.5-0.31-1.15-0.47-1.95-0.47H0.17v9.54h2.16V11.1h1.05c0.67,0,1.24-0.07,1.7-0.2\n\t\t\tc0.46-0.13,0.84-0.32,1.13-0.57s0.5-0.55,0.62-0.91c0.13-0.36,0.19-0.78,0.19-1.26c0-0.43-0.08-0.87-0.23-1.32\n\t\t\tC6.63,6.39,6.3,6.01,5.81,5.7z M2.32,9.89V6.42l2.97,1.74L2.32,9.89z"/><rect x=30.24 class=st1 width=26.59 height=20 /><path class=st0 d="M37.19,9.85l-0.15,0.62c-0.04,0.18-0.06,0.27-0.06,0.32c0,0.15,0.04,0.26,0.15,0.44l1.75,3.15\n\t\t\tc0.15,0.25,0.27,0.35,0.62,0.35h1.61c0.21,0,0.46-0.13,0.22-0.5l-2.15-3.57c0.72-0.46,1.53-1.11,1.53-2.53\n\t\t\tc0-1.84-1.03-2.87-3.3-2.87h-3.29c-0.29,0-0.38,0.1-0.38,0.4v8.68c0,0.3,0.09,0.4,0.38,0.4h1.36c0.29,0,0.38-0.1,0.38-0.4V7.02\n\t\t\th1.4c0.88,0,1.31,0.32,1.31,1.15c0,0.75-0.34,0.99-0.68,1.13C37.47,9.48,37.33,9.29,37.19,9.85z"/><path class=st0 d="M42.81,13.22l-0.18,1.13c-0.03,0.22,0.07,0.31,0.27,0.34c0.43,0.06,1.5,0.13,2.55,0.13\n\t\t\tc2.34,0,4.05-0.77,4.05-2.95c0-1.28-0.56-2.24-2.51-2.74L45.9,8.85c-0.74-0.19-1.08-0.43-1.08-0.97c0-0.77,0.71-0.91,1.39-0.91\n\t\t\tc0.91,0,1.84,0.07,2.21,0.1c0.38,0.03,0.49-0.01,0.55-0.34l0.18-1.11c0.03-0.22-0.07-0.31-0.26-0.34\n\t\t\tc-0.43-0.06-1.37-0.13-2.57-0.13c-2.43,0-3.61,1.06-3.61,2.74c0,1.52,0.82,2.42,2.26,2.78l1.09,0.28c0.9,0.24,1.28,0.5,1.28,1.06\n\t\t\tc0,0.83-0.56,0.97-1.92,0.97c-0.62,0-1.69-0.09-2.06-0.12C42.97,12.85,42.87,12.9,42.81,13.22z"/><path class=st0 d="M51.19,14.34c0,0.3,0.09,0.4,0.38,0.4h1.36c0.29,0,0.38-0.1,0.38-0.4V5.66c0-0.29-0.09-0.4-0.38-0.4h-1.36\n\t\t\tc-0.29,0-0.38,0.1-0.38,0.4V14.34z"/></g></g></svg>'),e.put("src/resources/svg/play-rsi.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 91 32"><g fill=#FFF><path d="M10.586 10.935c-.25-.726-.771-1.339-1.565-1.838-.795-.499-1.835-.749-3.121-.749H0v15.271h3.45v-5.876h1.679c1.073 0 1.981-.106 2.722-.318.741-.212 1.342-.514 1.804-.908a3.35 3.35 0 0 0 .999-1.463c.204-.582.306-1.251.306-2.008a6.49 6.49 0 0 0-.374-2.111zm-7.141 4.869v-5.553l4.759 2.777-4.759 2.776zm8.34 7.815V8.348h3.494v12.298h6.286l-.363 2.973h-9.417z"/><path d="M18.752 23.619L24.22 8.348h3.313l5.445 15.271h-3.517l-1.266-3.699h-4.798l-1.265 3.699h-3.38zm5.499-6.489h3.107l-1.527-4.97-1.58 4.97zm10.247 6.489v-6.467l-5.014-8.804h3.766l3.086 5.945 3.109-5.945h3.54l-4.992 8.804v6.467h-3.495z"/></g><path fill=#AF001E d="M48 0h42.667v32H48z"/><path d="M81.638 22.945c0 .472.142.637.613.637h2.17c.472 0 .613-.164.613-.637V9.056c0-.471-.141-.637-.613-.637h-2.17c-.472 0-.613.166-.613.637v13.889zm-13.419-1.792l-.284 1.816c-.047.353.118.495.426.542.683.094 2.405.211 4.079.211 3.75 0 6.485-1.226 6.485-4.716 0-2.052-.897-3.585-4.009-4.386l-1.745-.447c-1.18-.307-1.721-.684-1.721-1.556 0-1.226 1.132-1.462 2.217-1.462 1.461 0 2.947.118 3.537.165.614.047.778-.023.873-.542l.282-1.769c.048-.353-.118-.495-.424-.542-.684-.095-2.193-.212-4.104-.212-3.89 0-5.777 1.697-5.777 4.386 0 2.429 1.32 3.867 3.608 4.456l1.745.448c1.438.377 2.051.802 2.051 1.699 0 1.32-.896 1.556-3.065 1.556-.991 0-2.712-.141-3.301-.189-.615-.048-.779.022-.873.542zm-8.982-5.4l-.236.99c-.071.283-.094.425-.094.519 0 .236.071.424.235.707l2.806 5.047c.236.401.425.565.991.565h2.57c.329 0 .731-.212.353-.801l-3.443-5.707c1.155-.731 2.452-1.769 2.452-4.055 0-2.947-1.65-4.599-5.282-4.599H54.33c-.471 0-.613.166-.613.637v13.889c0 .472.142.637.613.637h2.17c.472 0 .614-.164.614-.637v-11.72h2.241c1.415 0 2.098.519 2.098 1.84 0 1.202-.542 1.579-1.086 1.814-.682.284-.917-.023-1.13.874z" fill=#FFF /></svg>'),e.put("src/resources/svg/play-rtr-big.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 61 20" style="enable-background:new 0 0 61 20" xml:space=preserve><style>.st0{fill:#FFFFFF;}\n\t.st1{fill:#AF001E;}</style><g id=Calque_3><g><path class=st0 d=M7.425,14.78V5.24h2.18v7.69h3.93l-0.23,1.86h-5.88V14.78z /><path class=st0 d="M15.195,5.24l-3.42,9.54h2.11l0.79-2.31h3l0.79,2.31h2.2l-3.4-9.54H15.195z M15.215,10.73l0.99-3.11\n\t\t\tl0.95,3.11H15.215z"/><polygon class=st0 points="24.715,5.24 22.775,8.96 20.845,5.24 18.485,5.24 21.625,10.74 21.625,14.78 23.805,14.78 \n\t\t\t23.805,10.74 26.925,5.24 \t\t"/><path class=st0 d="M5.705,5.71c-0.5-0.31-1.15-0.47-1.95-0.47h-3.69v9.54h2.16v-3.67h1.05c0.67,0,1.24-0.07,1.7-0.2\n\t\t\tc0.46-0.13,0.84-0.32,1.13-0.57c0.29-0.25,0.5-0.55,0.62-0.91c0.13-0.36,0.19-0.78,0.19-1.26c0-0.43-0.08-0.87-0.23-1.32\n\t\t\tC6.525,6.4,6.195,6.02,5.705,5.71z M2.215,9.9V6.43l2.97,1.74L2.215,9.9z"/><rect x=30.135 class=st1 width=30.8 height=20 /><path class=st0 d="M37.085,9.85l-0.15,0.62c-0.04,0.18-0.06,0.27-0.06,0.32c0,0.15,0.04,0.26,0.15,0.44l1.75,3.15\n\t\t\tc0.15,0.25,0.27,0.35,0.62,0.35h1.61c0.21,0,0.46-0.13,0.22-0.5l-2.15-3.57c0.72-0.46,1.53-1.11,1.53-2.54\n\t\t\tc0-1.84-1.03-2.87-3.3-2.87h-3.29c-0.29,0-0.38,0.1-0.38,0.4v8.68c0,0.3,0.09,0.4,0.38,0.4h1.36c0.3,0,0.38-0.1,0.38-0.4V7.02h1.4\n\t\t\tc0.88,0,1.31,0.32,1.31,1.15c0,0.75-0.34,0.99-0.68,1.13C37.365,9.48,37.225,9.28,37.085,9.85z"/><path class=st0 d="M53.905,9.85l-0.15,0.62c-0.04,0.18-0.06,0.27-0.06,0.32c0,0.15,0.04,0.26,0.15,0.44l1.75,3.15\n\t\t\tc0.15,0.25,0.27,0.35,0.62,0.35h1.61c0.21,0,0.46-0.13,0.22-0.5l-2.15-3.57c0.72-0.46,1.53-1.11,1.53-2.54\n\t\t\tc0-1.84-1.03-2.87-3.3-2.87h-3.29c-0.29,0-0.38,0.1-0.38,0.4v8.68c0,0.3,0.09,0.4,0.38,0.4h1.36c0.3,0,0.38-0.1,0.38-0.4V7.02h1.4\n\t\t\tc0.88,0,1.31,0.32,1.31,1.15c0,0.75-0.34,0.99-0.68,1.13C54.185,9.48,54.035,9.28,53.905,9.85z"/><path class=st0 d="M44.255,14.34c0,0.3,0.09,0.4,0.38,0.4h1.36c0.29,0,0.38-0.1,0.38-0.4V7.06h2.51c0.29,0,0.38-0.1,0.38-0.4v-1\n\t\t\tc0-0.29-0.09-0.4-0.38-0.4h-7.13c-0.3,0-0.38,0.1-0.38,0.4v1c0,0.29,0.09,0.4,0.38,0.4h2.51v7.28H44.255z"/></g></g></svg>'),e.put("src/resources/svg/play-rtr.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 98 32"><g fill=#FFF><path d="M10.586 10.936c-.25-.726-.771-1.339-1.565-1.838-.795-.499-1.835-.748-3.121-.748H0v15.27h3.45v-5.876h1.679c1.073 0 1.981-.106 2.722-.318.741-.212 1.342-.514 1.804-.908a3.35 3.35 0 0 0 .999-1.463c.204-.582.306-1.251.306-2.008 0-.681-.125-1.385-.374-2.111zm-7.141 4.869v-5.553l4.759 2.777-4.759 2.776zm8.34 7.815V8.35h3.494v12.298h6.286l-.363 2.973h-9.417z"/><path d="M18.752 23.62L24.22 8.35h3.313l5.445 15.271h-3.517l-1.266-3.699h-4.798l-1.265 3.699h-3.38zm5.499-6.489h3.107l-1.527-4.97-1.58 4.97zm10.247 6.489v-6.467L29.484 8.35h3.766l3.086 5.945 3.109-5.945h3.54l-4.992 8.804v6.467h-3.495z"/></g><path fill=#AF001E d="M48 .001h49.778v32H48z"/><path d="M86.136 15.753l-.236.99c-.071.283-.094.425-.094.519 0 .236.072.424.236.707l2.806 5.047c.236.401.425.565.991.565h2.57c.33 0 .731-.212.354-.801l-3.443-5.706c1.156-.731 2.452-1.769 2.452-4.056 0-2.947-1.651-4.598-5.282-4.598h-5.258c-.472 0-.614.166-.614.637v13.889c0 .472.142.637.614.637h2.169c.472 0 .614-.164.614-.637v-11.72h2.24c1.414 0 2.098.519 2.098 1.84 0 1.202-.542 1.58-1.084 1.815-.684.283-.921-.024-1.133.872zm-15.444 7.192c0 .472.141.637.613.637h2.17c.472 0 .613-.164.613-.637V11.297h4.009c.472 0 .613-.165.613-.637V9.056c0-.471-.141-.637-.613-.637H66.683c-.472 0-.614.166-.614.637v1.604c0 .471.141.637.614.637h4.008v11.648zm-11.459-7.192l-.236.99c-.071.283-.094.425-.094.519 0 .236.072.424.236.707l2.806 5.047c.236.401.425.565.991.565h2.57c.33 0 .731-.212.354-.801l-3.443-5.706c1.156-.731 2.452-1.769 2.452-4.056 0-2.947-1.651-4.598-5.282-4.598h-5.258c-.472 0-.614.166-.614.637v13.889c0 .472.142.637.614.637h2.169c.472 0 .614-.164.614-.637v-11.72h2.24c1.414 0 2.098.519 2.098 1.84 0 1.202-.542 1.58-1.084 1.815-.685.283-.921-.024-1.133.872z" fill=#FFF /></svg>'),e.put("src/resources/svg/play-rts-big.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 60 20" style="enable-background:new 0 0 60 20" xml:space=preserve><style>.st0{fill:#FFFFFF;}\n\t.st1{fill:#AF001E;}</style><g><path class=st0 d=M7.415,14.772V5.229h2.184v7.685h3.928l-0.227,1.857H7.415z /><path class=st0 d="M15.185,5.229l-3.417,9.542h2.113l0.791-2.311h2.998l0.791,2.311h2.198l-3.403-9.542H15.185z M15.205,10.717\n\t\tl0.987-3.105l0.954,3.105H15.205z"/><polygon class=st0 points="24.699,5.229 22.757,8.944 20.828,5.229 18.475,5.229 21.608,10.731 21.608,14.772 23.792,14.772 \n\t\t23.792,10.731 26.911,5.229 \t"/><path class=st0 d="M5.688,5.696c-0.497-0.312-1.147-0.468-1.95-0.468H0.051v9.544h2.156v-3.673h1.049\n\t\tc0.671,0,1.238-0.066,1.702-0.198c0.463-0.132,0.839-0.321,1.128-0.568c0.288-0.246,0.496-0.55,0.624-0.914\n\t\tC6.837,9.054,6.9,8.636,6.9,8.163c0-0.426-0.078-0.865-0.234-1.319C6.511,6.391,6.184,6.008,5.688,5.696z M2.204,9.888v-3.47\n\t\tl2.974,1.735L2.204,9.888z"/><rect x=30.117 class=st1 width=29.832 height=20 /><path class=st0 d="M37.073,9.846l-0.148,0.619c-0.044,0.177-0.059,0.265-0.059,0.324c0,0.147,0.045,0.265,0.148,0.442\n\t\tl1.754,3.154c0.147,0.251,0.266,0.353,0.619,0.353h1.606c0.207,0,0.457-0.132,0.221-0.501l-2.152-3.566\n\t\tc0.722-0.457,1.533-1.105,1.533-2.535c0-1.842-1.032-2.874-3.302-2.874h-3.287c-0.294,0-0.383,0.103-0.383,0.398v8.681\n\t\tc0,0.295,0.088,0.398,0.383,0.398h1.356c0.295,0,0.384-0.103,0.384-0.398V7.017h1.4c0.884,0,1.311,0.324,1.311,1.15\n\t\tc0,0.751-0.339,0.987-0.678,1.134C37.353,9.478,37.206,9.286,37.073,9.846z"/><path class=st0 d="M44.24,14.341c0,0.295,0.089,0.398,0.384,0.398h1.356c0.295,0,0.383-0.103,0.383-0.398v-7.28h2.505\n\t\tc0.295,0,0.384-0.103,0.384-0.398V5.661c0-0.295-0.088-0.398-0.384-0.398h-7.133c-0.295,0-0.383,0.103-0.383,0.398v1.003\n\t\tc0,0.294,0.088,0.398,0.383,0.398h2.505V14.341z"/><path class=st0 d="M50.1,13.221l-0.177,1.135c-0.029,0.221,0.074,0.309,0.265,0.339c0.427,0.059,1.503,0.132,2.55,0.132\n\t\tc2.343,0,4.053-0.766,4.053-2.947c0-1.282-0.56-2.24-2.506-2.741l-1.09-0.28c-0.737-0.192-1.076-0.427-1.076-0.972\n\t\tc0-0.766,0.707-0.914,1.386-0.914c0.914,0,1.842,0.074,2.211,0.103c0.383,0.029,0.486-0.014,0.545-0.339l0.177-1.105\n\t\tc0.03-0.221-0.073-0.31-0.265-0.339c-0.427-0.059-1.37-0.132-2.564-0.132c-2.432,0-3.611,1.061-3.611,2.741\n\t\tc0,1.518,0.825,2.417,2.255,2.785l1.09,0.28c0.899,0.236,1.282,0.501,1.282,1.062c0,0.825-0.56,0.973-1.916,0.973\n\t\tc-0.619,0-1.695-0.088-2.064-0.118C50.262,12.853,50.159,12.897,50.1,13.221z"/></g></svg>'),e.put("src/resources/svg/play-rts.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 96 32"><g fill=#FFF><path d="M10.586 10.935c-.25-.726-.771-1.339-1.565-1.838-.795-.499-1.835-.749-3.121-.749H0v15.271h3.45v-5.876h1.679c1.073 0 1.981-.106 2.722-.318.741-.212 1.342-.514 1.804-.908a3.35 3.35 0 0 0 .999-1.463c.204-.582.306-1.251.306-2.008a6.49 6.49 0 0 0-.374-2.111zm-7.141 4.869v-5.553l4.759 2.777-4.759 2.776zm8.34 7.815V8.348h3.494v12.298h6.286l-.363 2.973h-9.417z"/><path d="M18.752 23.619L24.22 8.348h3.313l5.445 15.271h-3.517l-1.266-3.699h-4.798l-1.265 3.699h-3.38zm5.499-6.489h3.107l-1.527-4.97-1.58 4.97zm10.247 6.489v-6.467l-5.014-8.804h3.766l3.086 5.945 3.109-5.945h3.54l-4.992 8.804v6.467h-3.495z"/></g><path fill=#AF001E d="M48 0h48v32H48z"/><path d="M80.078 21.154l-.283 1.816c-.047.353.118.495.425.542.684.094 2.405.211 4.08.211 3.749 0 6.485-1.226 6.485-4.716 0-2.052-.896-3.584-4.009-4.386l-1.745-.448c-1.179-.307-1.722-.684-1.722-1.556 0-1.226 1.132-1.462 2.217-1.462 1.462 0 2.948.118 3.537.165.612.047.778-.023.872-.543l.283-1.769c.048-.353-.117-.495-.424-.542-.684-.095-2.193-.212-4.103-.212-3.891 0-5.777 1.697-5.777 4.385 0 2.429 1.32 3.868 3.608 4.456l1.745.448c1.439.378 2.052.802 2.052 1.699 0 1.32-.896 1.556-3.065 1.556-.991 0-2.712-.141-3.302-.188-.614-.045-.779.025-.874.544zm-9.376 1.792c0 .472.142.637.614.637h2.169c.472 0 .613-.164.613-.637V11.298h4.008c.472 0 .614-.166.614-.637V9.057c0-.471-.141-.637-.614-.637H66.694c-.472 0-.613.165-.613.637v1.604c0 .471.141.637.613.637h4.008v11.648zm-11.466-7.192l-.236.99c-.071.283-.094.425-.094.519 0 .236.071.424.236.707l2.806 5.047c.236.401.425.565.991.565h2.57c.33 0 .731-.212.354-.801l-3.443-5.706c1.156-.731 2.453-1.769 2.453-4.056 0-2.947-1.651-4.598-5.283-4.598h-5.259c-.471 0-.612.165-.612.637v13.889c0 .472.141.637.612.637h2.17c.472 0 .614-.164.614-.637v-11.72h2.24c1.415 0 2.098.519 2.098 1.84 0 1.202-.542 1.579-1.085 1.815-.684.283-.92-.024-1.132.872z" fill=#FFF /></svg>'),e.put("src/resources/svg/play-srf-big.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 61 20" style="enable-background:new 0 0 61 20" xml:space=preserve><style>.st0{fill:#AF001E;}\n\t.st1{fill:#FFFFFF;}</style><g><rect id=Smartbox_1_ x=30.433 class=st0 width=30.2 height=20 /><path id=F_1_ class=st1 d="M53.194,9.082V7.062h3.89c0.213,0,0.386-0.173,0.386-0.386V5.622c0-0.221-0.179-0.401-0.401-0.401\n\t\th-5.628c-0.213,0-0.386,0.173-0.386,0.386v8.76c0,0.222,0.18,0.401,0.401,0.401h1.351c0.213,0,0.386-0.173,0.386-0.386v-3.46h3.534\n\t\tc0.213,0,0.386-0.173,0.386-0.386V9.483c0-0.222-0.18-0.402-0.402-0.402H53.194z"/><path id=R_1_ class=st1 d="M45.331,9.839l-0.148,0.624c-0.045,0.178-0.059,0.267-0.059,0.326c0,0.149,0.045,0.268,0.148,0.446\n\t\tl1.766,3.178c0.148,0.253,0.268,0.356,0.624,0.356h1.619c0.207,0,0.46-0.134,0.223-0.505l-2.168-3.594\n\t\tc0.727-0.46,1.544-1.114,1.544-2.554c0-1.856-1.039-2.896-3.326-2.896h-3.311c-0.213,0-0.386,0.173-0.386,0.386v8.76\n\t\tc0,0.222,0.18,0.401,0.401,0.401h1.351c0.213,0,0.386-0.173,0.386-0.386V6.988h1.411c0.891,0,1.321,0.327,1.321,1.159\n\t\tc0,0.757-0.341,0.995-0.683,1.143C45.613,9.468,45.464,9.275,45.331,9.839z"/><path id=S_1_ class=st1 d="M33.825,13.239l-0.178,1.143c-0.03,0.223,0.075,0.312,0.267,0.342\n\t\tc0.431,0.059,1.515,0.134,2.568,0.134c2.361,0,4.084-0.772,4.084-2.97c0-1.292-0.564-2.257-2.524-2.762l-1.099-0.282\n\t\tc-0.742-0.193-1.084-0.43-1.084-0.98c0-0.772,0.713-0.92,1.395-0.92c0.922,0,1.856,0.074,2.228,0.104\n\t\tc0.386,0.03,0.489-0.015,0.549-0.342l0.179-1.113c0.029-0.222-0.075-0.312-0.268-0.341c-0.43-0.059-1.38-0.134-2.583-0.134\n\t\tc-2.45,0-3.637,1.069-3.637,2.762c0,1.529,0.831,2.435,2.272,2.806l1.099,0.282c0.905,0.238,1.292,0.505,1.292,1.07\n\t\tc0,0.831-0.565,0.979-1.93,0.979c-0.623,0-1.707-0.089-2.079-0.119C33.988,12.868,33.884,12.913,33.825,13.239z"/><path class=st1 d=M7.731,14.772V5.229h2.184v7.685h3.928l-0.227,1.857H7.731z /><path class=st1 d="M15.502,5.229l-3.417,9.542h2.113l0.791-2.311h2.998l0.791,2.311h2.198l-3.403-9.542H15.502z M15.521,10.717\n\t\tl0.987-3.105l0.954,3.105H15.521z"/><polygon class=st1 points="25.016,5.229 23.073,8.944 21.144,5.229 18.791,5.229 21.924,10.731 21.924,14.772 24.108,14.772 \n\t\t24.108,10.731 27.227,5.229 \t"/><path class=st1 d="M6.004,5.696c-0.497-0.312-1.147-0.468-1.95-0.468H0.367v9.544h2.156v-3.673h1.049\n\t\tc0.671,0,1.238-0.066,1.702-0.198c0.463-0.132,0.839-0.321,1.128-0.568c0.288-0.246,0.496-0.55,0.624-0.914\n\t\tc0.127-0.364,0.191-0.782,0.191-1.255c0-0.426-0.078-0.865-0.234-1.319C6.827,6.391,6.501,6.008,6.004,5.696z M2.52,9.888v-3.47\n\t\tl2.974,1.735L2.52,9.888z"/></g></svg>'),e.put("src/resources/svg/play-srf.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 96 32"><g fill=#FFF><path d="M10.586 10.935c-.25-.726-.771-1.339-1.565-1.838-.795-.499-1.835-.749-3.121-.749H0v15.271h3.45v-5.876h1.679c1.073 0 1.981-.106 2.722-.318.741-.212 1.342-.514 1.804-.908a3.35 3.35 0 0 0 .999-1.463c.204-.582.306-1.251.306-2.008a6.49 6.49 0 0 0-.374-2.111zm-7.141 4.869v-5.553l4.759 2.777-4.759 2.776zm8.34 7.815V8.348h3.494v12.298h6.286l-.363 2.973h-9.417z"/><path d="M18.752 23.619L24.22 8.348h3.313l5.445 15.271h-3.517l-1.266-3.699h-4.798l-1.265 3.699h-3.38zm5.499-6.489h3.107l-1.527-4.97-1.58 4.97zm10.247 6.489v-6.467l-5.014-8.804h3.766l3.086 5.945 3.109-5.945h3.54l-4.992 8.804v6.467h-3.495z"/></g><path fill=#AF001E d="M48 0h48v32H48z"/><path d="M84.358 14.531V11.3h6.224c.476 0 .618-.167.618-.642V8.995c0-.475-.142-.641-.618-.641h-9.027c-.475 0-.618.166-.618.641v13.993c0 .475.144.641.618.641h2.186c.475 0 .617-.166.617-.641v-5.512h5.654c.475 0 .618-.165.618-.641v-1.663c0-.476-.144-.642-.618-.642h-5.654zm-12.582 1.212l-.238.998c-.071.285-.094.427-.094.522 0 .238.071.428.238.713l2.826 5.084c.236.404.428.57.998.57h2.59c.331 0 .735-.214.356-.807l-3.469-5.75c1.162-.736 2.471-1.781 2.471-4.085 0-2.969-1.663-4.633-5.322-4.633h-5.298c-.476 0-.618.166-.618.641v13.993c0 .475.142.641.618.641h2.185c.476 0 .618-.166.618-.641V11.181h2.257c1.426 0 2.115.524 2.115 1.854 0 1.211-.546 1.592-1.093 1.83-.688.284-.927-.026-1.14.878zm-18.41 5.44l-.284 1.828c-.048.357.119.5.427.548.69.094 2.424.213 4.11.213 3.778 0 6.534-1.235 6.534-4.751 0-2.067-.902-3.611-4.038-4.419l-1.759-.452c-1.187-.308-1.734-.688-1.734-1.567 0-1.235 1.14-1.473 2.232-1.473 1.475 0 2.97.119 3.564.166.618.048.783-.023.878-.546l.286-1.782c.047-.356-.119-.499-.429-.546-.688-.096-2.208-.215-4.133-.215-3.92 0-5.82 1.71-5.82 4.419 0 2.447 1.33 3.896 3.635 4.49l1.758.451c1.449.381 2.067.808 2.067 1.712 0 1.33-.904 1.566-3.089 1.566-.997 0-2.732-.142-3.326-.19-.618-.046-.784.026-.879.548z" fill=#FFF /></svg>'),e.put("src/resources/svg/play-swi-big.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 61 20" style="enable-background:new 0 0 61 20" xml:space=preserve><style>.st0{fill:#FFFFFF;}\n\t.st1{fill:#AF001E;}</style><g id=Calque_1_1_><g><path class=st0 d=M7.61,14.78V5.23h2.18v7.69h3.93l-0.23,1.86H7.61z /><path class=st0 d="M15.38,5.23l-3.42,9.54h2.11l0.79-2.31h3l0.79,2.31h2.2l-3.4-9.54L15.38,5.23z M15.4,10.72l0.99-3.11\n\t\t\tl0.95,3.11H15.4z"/><polygon class=st0 points="24.89,5.23 22.95,8.95 21.02,5.23 18.67,5.23 21.8,10.74 21.8,14.78 23.99,14.78 23.99,10.74 \n\t\t\t27.11,5.23 \t\t"/><path class=st0 d="M5.88,5.7c-0.5-0.31-1.15-0.47-1.95-0.47H0.24v9.54H2.4V11.1h1.05c0.67,0,1.24-0.07,1.7-0.2\n\t\t\tc0.46-0.13,0.84-0.32,1.13-0.57c0.29-0.25,0.5-0.55,0.62-0.91c0.13-0.36,0.19-0.78,0.19-1.26c0-0.43-0.08-0.87-0.23-1.32\n\t\t\tC6.7,6.4,6.38,6.01,5.88,5.7z M2.4,9.89V6.42l2.97,1.74L2.4,9.89z"/><g><g><rect x=30.31 class=st1 width=30.45 height=20 /><path class=st0 d="M34.01,13.22l-0.18,1.14c-0.03,0.22,0.07,0.31,0.26,0.34c0.43,0.06,1.5,0.13,2.55,0.13\n\t\t\t\t\tc2.34,0,4.05-0.77,4.05-2.95c0-1.28-0.56-2.24-2.51-2.74l-1.09-0.28c-0.74-0.19-1.08-0.43-1.08-0.97c0-0.77,0.71-0.91,1.38-0.91\n\t\t\t\t\tc0.92,0,1.84,0.07,2.21,0.1c0.38,0.03,0.49-0.01,0.55-0.34l0.18-1.11c0.03-0.22-0.07-0.31-0.27-0.34\n\t\t\t\t\tc-0.43-0.06-1.37-0.13-2.56-0.13c-2.43,0-3.61,1.06-3.61,2.74c0,1.52,0.83,2.42,2.25,2.79l1.09,0.28\n\t\t\t\t\tc0.9,0.24,1.28,0.5,1.28,1.06c0,0.83-0.56,0.97-1.92,0.97c-0.62,0-1.69-0.09-2.06-0.12C34.17,12.85,34.07,12.9,34.01,13.22"/><path class=st0 d="M56.5,5.26c0.29,0,0.38,0.1,0.38,0.4v8.68c0,0.29-0.09,0.4-0.38,0.4h-1.36c-0.29,0-0.38-0.1-0.38-0.4V5.66\n\t\t\t\t\tc0-0.29,0.09-0.4,0.38-0.4H56.5z"/><path class=st0 d="M44.1,14.74c-0.23,0-0.46-0.18-0.51-0.4l-2.18-8.68c-0.06-0.22,0.09-0.4,0.31-0.4h1.57\n\t\t\t\t\tc0.23,0,0.45,0.18,0.49,0.41l1.16,6.09l1.48-6.09c0.05-0.22,0.28-0.4,0.5-0.4h1.22c0.23,0,0.45,0.18,0.51,0.4l1.49,6.09\n\t\t\t\t\tl1.15-6.09c0.04-0.22,0.26-0.41,0.48-0.41h1.48c0.23,0,0.37,0.18,0.31,0.4l-2.21,8.68c-0.06,0.22-0.29,0.4-0.51,0.4h-1.42\n\t\t\t\t\tc-0.23,0-0.45-0.18-0.51-0.4L47.47,8.3L46,14.34c-0.05,0.22-0.28,0.4-0.5,0.4H44.1z"/></g></g></g></g></svg>'),e.put("src/resources/svg/play-swi.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 97 32"><g fill=#FFF><path d="M10.586 10.935c-.25-.726-.771-1.339-1.565-1.838-.795-.499-1.835-.749-3.121-.749H0v15.271h3.45v-5.876h1.679c1.073 0 1.981-.106 2.722-.318.741-.212 1.342-.514 1.804-.908a3.35 3.35 0 0 0 .999-1.463c.204-.582.306-1.251.306-2.008a6.49 6.49 0 0 0-.374-2.111zm-7.141 4.869v-5.553l4.759 2.777-4.759 2.776zm8.34 7.815V8.348h3.494v12.298h6.286l-.363 2.973h-9.417z"/><path d="M18.752 23.619L24.22 8.348h3.313l5.445 15.271h-3.517l-1.266-3.699h-4.798l-1.265 3.699h-3.38zm5.499-6.489h3.107l-1.527-4.97-1.58 4.97zm10.247 6.489v-6.467l-5.014-8.804h3.766l3.086 5.945 3.109-5.945h3.54l-4.992 8.804v6.467h-3.495z"/></g><path fill=#AF001E d="M48 0h48.889v32H48z"/><path fill=#FFF d="M90.01 8.42c.471 0 .612.165.612.636v13.888c0 .472-.141.636-.612.636h-2.17c-.471 0-.613-.165-.613-.636V9.056c0-.472.142-.636.613-.636h2.17zM70.172 23.582a.89.89 0 0 1-.818-.638L65.861 9.063c-.088-.351.137-.638.498-.638h2.518a.82.82 0 0 1 .776.648l1.855 9.74 2.367-9.747a.872.872 0 0 1 .808-.642h1.955c.362 0 .726.288.81.641l2.387 9.748 1.834-9.74a.818.818 0 0 1 .775-.648h2.361c.362 0 .585.287.497.638l-3.534 13.883a.893.893 0 0 1-.821.637h-2.268a.87.87 0 0 1-.808-.642l-2.311-9.666-2.354 9.667a.872.872 0 0 1-.808.641h-2.226zm-16.146-2.43l-.283 1.816c-.047.354.118.495.423.542.685.095 2.406.213 4.079.213 3.751 0 6.487-1.227 6.487-4.716 0-2.052-.897-3.584-4.01-4.385l-1.744-.448c-1.178-.306-1.722-.684-1.722-1.557 0-1.226 1.132-1.462 2.215-1.462 1.466 0 2.949.118 3.538.165.614.048.779-.023.873-.542l.284-1.768c.046-.354-.119-.495-.426-.542-.684-.096-2.193-.213-4.103-.213-3.891 0-5.777 1.698-5.777 4.386 0 2.428 1.321 3.867 3.607 4.456l1.746.448c1.438.377 2.051.8 2.051 1.698 0 1.321-.896 1.556-3.067 1.556-.989 0-2.709-.142-3.299-.189-.612-.047-.777.023-.872.542"/></svg>'),e.put("src/resources/svg/play.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stPlay{fill:#FFFFFF;}</style><path id=SVGID_1_ class=stPlay d="M38.18,22.959c0.938,0.575,0.937,1.507,0,2.082L10.814,41.817 c-0.938,0.575-1.698,0.146-1.698-0.961V7.143c0-1.105,0.76-1.535,1.698-0.96L38.18,22.959z"/></svg>'),e.put("src/resources/svg/popout.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stPopup{fill:#FFFFFF;}\n\t.stPopout{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;}</style><g><path class=stPopup d="M46.299,6.75v10.922c0,0.55-0.45,1-1,1H26.25c-0.55,0-1-0.45-1-1V6.75c0-0.55,0.45-1,1-1h19.048\n\t\tC45.849,5.75,46.298,6.2,46.299,6.75z"/><g id=Guideline_2_><g id=Technical-player-design_2_ transform="translate(-829.000000, -664.000000)"><g id=Group-6_2_ transform="translate(39.000000, 229.000000)"><g id=fullscreen-TECH-PLAYER_1_ transform="translate(791.000000, 436.000000)"><path id=fullscreen_2_ class=stPopout d="M42,23.172v14.125c0,1.4-1.065,2.5-2.42,2.5H3.67c-1.355,0-2.42-1.1-2.42-2.5v-25\n\t\t\t\t\t\tc0-1.4,1.065-2.5,2.42-2.5h14.913"/></g></g></g></g></g></svg>'),e.put("src/resources/svg/replay.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stReplayArrow{fill:none;stroke:#FFFFFF;stroke-width:3.6205;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n\t.stReplayCircle{fill:none;stroke:#FFFFFF;stroke-width:3.6205;stroke-linecap:round;stroke-miterlimit:10;}</style><g><path class=stReplayArrow d="M15.8,11.3c1.9,0,7.6-0.2,9.7,0.1c4.9,0.5,9.5,3.1,12.3,7.6c4.8,7.6,2.4,17.6-5.2,22.5s-17.6,2.4-22.5-5.3\n\t\tC8,32.7,7.3,28.6,8,24.7"/><polyline class=stReplayCircle points="21.7,18.8 14.1,11.5 21.3,4 \t"/></g></svg>'),e.put("src/resources/svg/settings.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stSettings0{fill:none;stroke:#fff;stroke-width:3.2175;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n\t.stSettings1{fill:none;stroke:#fff;stroke-width:3.2175;stroke-miterlimit:10;}</style><g><path class=stSettings0 d="M21.117,10c-0.391,0.011-1.327,4.034-1.327,4.034c-1.364,0.492-2.61,1.208-3.71,2.114\n\t\tc0,0-3.917-1.249-4.092-0.966l-3.002,4.966c-0.173,0.288,2.709,3.227,2.709,3.227C11.519,24.222,11.403,25.1,11.403,26\n\t\tc0,0.899,0.116,1.767,0.292,2.614c0,0-2.882,2.94-2.709,3.227l3.002,4.966c0.175,0.284,4.092-0.966,4.092-0.966\n\t\tc1.099,0.905,2.347,1.622,3.71,2.114c0,0,0.991,4.045,1.327,4.046h5.756c0.335,0,1.327-4.034,1.327-4.034\n\t\tc1.366-0.491,2.62-1.208,3.721-2.114c0,0,3.917,1.242,4.092,0.954l3.002-4.966c0.173-0.288-2.698-3.238-2.698-3.238\n\t\tc0.173-0.845,0.27-1.71,0.27-2.602s-0.097-1.768-0.27-2.614c0,0,2.871-2.951,2.698-3.238l-3.002-4.966\n\t\tc-0.175-0.288-4.092,0.954-4.092,0.954c-1.101-0.906-2.355-1.611-3.721-2.103c0,0-0.994-4.035-1.327-4.034\n\t\tC26.873,10,21.117,10,21.117,10z"/><ellipse class=stSettings1 cx=24 cy=26 rx=4.8 ry=4.853 /></g></svg>'),e.put("src/resources/svg/share-facebook-hover.svg",'<svg xmlns=http://www.w3.org/2000/svg class=srg-f-h viewBox="0 0 40 42"><style>.srg-f-h .st1{fill:url(#F_SVGID_1_)}.srg-f-h .st2{fill:url(#F_SVGID_2_)}</style><circle fill=#506ca8 cx=20 cy=21 r=17.7 /><path fill=#506ca8 d="M134.8 195.5c0 18.6-15.1 33.7-33.7 33.7s-33.7-15.1-33.7-33.7 15.1-33.7 33.7-33.7 33.7 15.1 33.7 33.7z"/><defs><linearGradient id=F_SVGID_1_ gradientUnits=userSpaceOnUse x1=101.082 y1=229.2 x2=101.082 y2=161.8><stop offset=0 stop-opacity=.25 /><stop offset=1 stop-opacity=0 /></linearGradient></defs><path class=st1 d="M134.8 195.5c0 18.6-15.1 33.7-33.7 33.7s-33.7-15.1-33.7-33.7 15.1-33.7 33.7-33.7 33.7 15.1 33.7 33.7z"/><defs><linearGradient id=F_SVGID_2_ gradientUnits=userSpaceOnUse x1=20 y1=38.7 x2=20 y2=3.3><stop offset=0 stop-opacity=.25 /><stop offset=1 stop-opacity=0 /></linearGradient></defs><circle class=st2 cx=20 cy=21 r=17.7 /><path fill=#fff d="M17.1 32.5V21.8h-3.2v-3.9h3.2v-3.3c0-2.6 2-5 5.8-5 1.6 0 3.3.1 3.3.1v3.4s-2.4-.1-3.7-.1c-1.5 0-1.5.7-1.5 1.8v3h5l-1.2 3.9H21v10.7l-3.9.1z"/></svg>'),e.put("src/resources/svg/share-facebook.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><path fill=#FFFFFF d="M20.642,37.033V24.854H17v-4.439h3.642v-3.756c0-2.959,2.276-5.691,6.602-5.691c1.821,0,3.756,0.114,3.756,0.114v3.87\n\tc0,0-2.732-0.114-4.211-0.114c-1.707,0-1.707,0.797-1.707,2.049c0,0.911,0-1.821,0,3.415h5.691l-1.366,4.439h-4.325v12.179\n\tL20.642,37.033z"/></svg>'),e.put("src/resources/svg/share-srglike-hover.svg",'<svg xmlns=http://www.w3.org/2000/svg class=srg-l-h viewBox="0 0 40 42"><style>.srg-l-h .st1{fill:url(#L_SVGID_1_)}</style><path fill=#e31f2b d="M37.7 21c0 9.8-7.9 17.7-17.7 17.7S2.3 30.8 2.3 21 10.2 3.3 20 3.3 37.7 11.2 37.7 21z"/><defs><linearGradient id=L_SVGID_1_ gradientUnits=userSpaceOnUse x1=20 y1=5.3 x2=20 y2=40.7 gradientTransform="matrix(1 0 0 -1 0 44)"><stop offset=0 stop-opacity=.25 /><stop offset=1 stop-opacity=0 /></linearGradient></defs><circle class=st1 cx=20 cy=21 r=17.7 /><path fill=#fff d="M30 18.1c-2.1-.8-4.2-.6-4.2-.6v-6.7s-.3-2-2.3-2-2 2-2.5 3.7c-1.3 4.4-7.5 5-7.5 5H7.8v10h10c2.9 1.1 8 6 12 2 2-1.9 4-9.9.2-11.4z"/></svg>'),e.put("src/resources/svg/share-srglike.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stShareLike{fill:#FFFFFF;}</style><g><path class=stShareLike d="M31.375,21.382l-5.049,0.004c0.679-1.697,1.024-3.486,1.024-5.316v-0.778c0-1.083-0.881-1.964-1.964-1.964\n\t\th-0.417c-0.872,0-1.648,0.586-1.888,1.424l-0.263,0.92c-0.514,1.799-1.005,3.473-1.956,5.095c-0.328,0.559-2.545,2.664-2.545,2.664\n\t\tl-3.048,0.028c-0.926,0-1.007,0.529-1.007,1.454l-0.112,8.215c0,0.926,0.753,1.51,1.679,1.51h6.404c0.726,0,4.09,0.077,6.125,0\n\t\tc1.436-0.055,1.754-0.535,2.349-2.097c1.898-4.987,2.91-8.135,3.104-9.061C34.097,22.105,32.856,21.382,31.375,21.382z"/></g></svg>'),e.put("src/resources/svg/share-twitter-hover.svg",'<svg xmlns=http://www.w3.org/2000/svg class=srg-t-h viewBox="0 0 40 42"><style>.srg-t-h .st0{fill:url(#T_SVGID_1_)}.srg-t-h .st2{fill:url(#T_SVGID_2_)}</style><defs><linearGradient id=T_SVGID_1_ gradientUnits=userSpaceOnUse x1=20 y1=38.7 x2=20 y2=3.3><stop offset=0 stop-opacity=.25 /><stop offset=1 stop-opacity=0 /></linearGradient></defs><circle class=st0 cx=20 cy=21 r=17.7 /><path fill=#2f97d8 d="M37.7 21c0 9.8-7.9 17.7-17.7 17.7S2.3 30.8 2.3 21 10.2 3.3 20 3.3 37.7 11.2 37.7 21z"/><defs><linearGradient id=T_SVGID_2_ gradientUnits=userSpaceOnUse x1=20 y1=38.7 x2=20 y2=3.3><stop offset=0 stop-opacity=.25 /><stop offset=1 stop-opacity=0 /></linearGradient></defs><circle class=st2 cx=20 cy=21 r=17.7 /><path fill=#fff d="M31.3 14c-.8.4-1.7.6-2.7.7 1-.6 1.7-1.5 2-2.6-.9.5-1.9.9-3 1.1-1.8-1.9-4.7-2-6.6-.2-.9.9-1.5 2.1-1.5 3.4 0 .4 0 .7.1 1.1-3.7-.2-7.2-2-9.6-4.9-.4.7-.6 1.5-.6 2.3 0 1.6.8 3 2.1 3.9-.7 0-1.5-.2-2.1-.6v.1c0 2.2 1.6 4.1 3.7 4.6-.7.2-1.4.2-2.1.1.6 1.9 2.4 3.2 4.3 3.2-1.9 1.5-4.4 2.2-6.9 1.9 2.1 1.4 4.6 2.1 7.1 2.1C24.4 30.2 29 23.1 29 17v-.6c.9-.7 1.7-1.5 2.3-2.4z"/></svg>'),e.put("src/resources/svg/share-twitter.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><path fill=#FFFFFF d="M35.45,17.045c-0.8,0.4-1.7,0.6-2.7,0.7c1-0.6,1.7-1.5,2-2.6c-0.9,0.5-1.9,0.9-3,1.1c-1.8-1.9-4.7-2-6.6-0.2\n\tc-0.9,0.9-1.5,2.1-1.5,3.4c0,0.4,0,0.7,0.1,1.1c-3.7-0.2-7.2-2-9.6-4.9c-0.4,0.7-0.6,1.5-0.6,2.3c0,1.6,0.8,3,2.1,3.9\n\tc-0.7,0-1.5-0.2-2.1-0.6v0.1c0,2.2,1.6,4.1,3.7,4.6c-0.7,0.2-1.4,0.2-2.1,0.1c0.6,1.9,2.4,3.2,4.3,3.2c-1.9,1.5-4.4,2.2-6.9,1.9\n\tc2.1,1.4,4.6,2.1,7.1,2.1c8.9,0,13.5-7.1,13.5-13.2c0-0.2,0-0.4,0-0.6C34.05,18.745,34.85,17.945,35.45,17.045z"/></svg>'),e.put("src/resources/svg/share-whatsapp-hover.svg",'<svg xmlns=http://www.w3.org/2000/svg class=srg-w-h viewBox="0 0 40 42"><style>.srg-w-h .st1{fill:url(#SVGID_3_)}\n\t\t\t.srg-w-h .st2{fill:url(#SVGID_2_)}</style><circle fill=#5BCC40 cx=20 cy=21 r=17.7 /><path fill=#5BCC40 d="M134.8 195.5c0 18.6-15.1 33.7-33.7 33.7s-33.7-15.1-33.7-33.7 15.1-33.7 33.7-33.7 33.7 15.1 33.7 33.7z"/><defs><linearGradient id=SVGID_3_ gradientUnits=userSpaceOnUse x1=101.082 y1=229.2 x2=101.082 y2=161.8><stop offset=0 stop-opacity=.25 /><stop offset=1 stop-opacity=0 /></linearGradient></defs><path class=st1 d="M134.8 195.5c0 18.6-15.1 33.7-33.7 33.7s-33.7-15.1-33.7-33.7 15.1-33.7 33.7-33.7 33.7 15.1 33.7 33.7z"/><defs><linearGradient id=SVGID_2_ gradientUnits=userSpaceOnUse x1=20 y1=38.7 x2=20 y2=3.3><stop offset=0 stop-opacity=.25 /><stop offset=1 stop-opacity=0 /></linearGradient></defs><circle class=st2 cx=19.764 cy=21 r=17.7 /><path fill=#FFFFFF d="M28.2,12.7C26,10.5,23.1,9.3,20,9.3c-6.4,0-11.6,5.2-11.6,11.6c0,2,0.5,4,1.5,5.8l-1.6,6l6.1-1.6\n\tc1.7,0.9,3.6,1.4,5.5,1.4h0c0,0,0,0,0,0c6.4,0,11.6-5.2,11.6-11.6C31.6,17.8,30.4,14.9,28.2,12.7z M20,30.5L20,30.5\n\tc-1.7,0-3.4-0.5-4.9-1.3L14.8,29l-3.6,1l1-3.5L11.9,26c-1-1.5-1.5-3.3-1.5-5.1c0-5.3,4.3-9.6,9.6-9.6c2.6,0,5,1,6.8,2.8\n\tc1.8,1.8,2.8,4.2,2.8,6.8C29.7,26.2,25.3,30.5,20,30.5z M25.3,23.3c-0.3-0.1-1.7-0.8-2-0.9c-0.3-0.1-0.5-0.1-0.7,0.1\n\tc-0.2,0.3-0.7,0.9-0.9,1.1c-0.2,0.2-0.3,0.2-0.6,0.1c-0.3-0.1-1.2-0.4-2.3-1.4c-0.9-0.8-1.4-1.7-1.6-2c-0.2-0.3,0-0.4,0.1-0.6\n\tc0.1-0.1,0.3-0.3,0.4-0.5c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0-0.4,0-0.5c-0.1-0.1-0.7-1.6-0.9-2.1c-0.2-0.6-0.5-0.5-0.7-0.5\n\tc-0.2,0-0.4,0-0.6,0c-0.2,0-0.5,0.1-0.8,0.4c-0.3,0.3-1,1-1,2.4c0,1.4,1,2.8,1.2,3c0.1,0.2,2,3.1,4.9,4.4\n\tc0.7,0.3,1.2,0.5,1.6,0.6c0.7,0.2,1.3,0.2,1.8,0.1c0.6-0.1,1.7-0.7,2-1.4c0.2-0.7,0.2-1.3,0.2-1.4C25.8,23.5,25.6,23.5,25.3,23.3\n\tz"/></svg>'),e.put("src/resources/svg/share-whatsapp.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><g id=logo><g><g><path fill=#FFFFFF d="M33.822,14.175c-2.604-2.604-6.037-4.025-9.707-4.025c-7.576,0-13.732,6.156-13.732,13.732\n\t\t\t\tc0,2.368,0.592,4.735,1.776,6.866l-1.894,7.103l7.221-1.894c2.012,1.065,4.262,1.657,6.511,1.657l0,0l0,0\n\t\t\t\tc7.576,0,13.732-6.156,13.732-13.732C37.847,20.212,36.426,16.779,33.822,14.175z M24.115,35.246L24.115,35.246\n\t\t\t\tc-2.012,0-4.025-0.592-5.8-1.539l-0.355-0.237l-4.262,1.184l1.184-4.143l-0.355-0.592c-1.184-1.776-1.776-3.906-1.776-6.037\n\t\t\t\tc0-6.274,5.09-11.364,11.364-11.364c3.078,0,5.919,1.184,8.05,3.315s3.315,4.972,3.315,8.05\n\t\t\t\tC35.597,30.156,30.389,35.246,24.115,35.246z M30.389,26.723c-0.355-0.118-2.012-0.947-2.368-1.065\n\t\t\t\tc-0.355-0.118-0.592-0.118-0.829,0.118c-0.237,0.355-0.829,1.065-1.065,1.302c-0.237,0.237-0.355,0.237-0.71,0.118\n\t\t\t\tc-0.355-0.118-1.421-0.474-2.723-1.657c-1.065-0.947-1.657-2.012-1.894-2.368s0-0.474,0.118-0.71\n\t\t\t\tc0.118-0.118,0.355-0.355,0.474-0.592c0.118-0.237,0.237-0.355,0.355-0.592c0.118-0.237,0-0.474,0-0.592\n\t\t\t\tc-0.118-0.118-0.829-1.894-1.065-2.486c-0.237-0.71-1.302-0.592-1.539-0.592s-0.592,0.118-0.947,0.474\n\t\t\t\tc-0.355,0.355-1.184,1.184-1.184,2.841c0,1.657,1.184,3.315,1.421,3.551c0.118,0.237,2.368,3.67,5.8,5.209\n\t\t\t\tc0.829,0.355,1.421,0.592,1.894,0.71c0.829,0.237,1.539,0.237,2.131,0.118c0.71-0.118,2.012-0.829,2.368-1.657\n\t\t\t\tc0.237-0.829,0.237-1.539,0.237-1.657C30.981,26.959,30.744,26.959,30.389,26.723z"/></g></g></g></svg>'),e.put("src/resources/svg/share.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stShare{fill:white}</style><path class=stShare d="M32.135,29.302c-0.964,0-1.929,0.241-2.652,0.844l-9.525-6.149c0-0.12,0-0.241,0-0.483c0-0.12,0-0.12,0-0.241\n\tl9.405-5.426c0.724,0.603,1.688,0.964,2.652,0.964c2.171,0,3.979-1.808,3.979-3.979s-1.688-4.099-3.859-4.099\n\ts-3.979,1.808-3.979,3.979c0,0.12,0,0.361,0,0.483l-9.284,5.426c-0.724-0.724-1.688-1.206-2.894-1.206\n\tc-2.171,0-3.979,1.808-3.979,4.099s1.808,3.979,3.979,3.979c1.085,0,2.05-0.361,2.773-1.085l9.284,6.029\n\tc0,0.241-0.12,0.483-0.12,0.603c-0.12,2.171,1.567,4.099,3.858,4.22c2.171,0.12,4.099-1.567,4.22-3.858\n\tC36.114,31.231,34.426,29.302,32.135,29.302z"/></svg>'),e.put("src/resources/svg/spinner.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 112 112"><g fill=none><path stroke=#606060 stroke-linecap=round stroke-linejoin=round stroke-width=7 stroke-miterlimit=10 d=M56,106.832C27.926,106.832,5.168,84.074,5.168,56S27.926,5.168,56,5.168 /><path stroke=#fff stroke-linecap=round stroke-linejoin=round stroke-width=7 stroke-miterlimit=10 d=M56,5.168c28.074,0,50.832,22.758,50.832,50.832S84.074,106.832,56,106.832 /></g></svg>'),e.put("src/resources/svg/stop.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=stStop_Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stStop{fill:#fff;}</style><g><g><defs><path id=stStop_SVGID_1_ class=stStop d="M8,11.002C8,9.896,8.889,9,10.002,9h27.997C39.104,9,40,9.889,40,11.002v27.997\n\t\t\t\tC40,40.104,39.111,41,37.998,41H10.002C8.896,41,8,40.111,8,38.998V11.002z"/></defs><use xlink:href=#stStop_SVGID_1_ style=overflow:visible /><clipPath id=stStop_SVGID_2_><use xlink:href=#stStop_SVGID_1_ style=overflow:visible /></clipPath></g></g></svg>'),e.put("src/resources/svg/tutorial-mouse-center.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 71 71" width=100 height=100><circle fill=#010202 cx=35.5 cy=35.5 r=35.2 opacity=.6 /><path fill=#fff d="M36.7 19.8h-2.9c-4.5 0-8.1 3.6-8.1 8.1v15.7c0 4.5 3.6 8.1 8.1 8.1h2.9c2.2 0 4.2-.8 5.8-2.4 1.5-1.5 2.4-3.6 2.4-5.8V27.9c-.1-4.5-3.7-8.1-8.2-8.1zm6.7 23.8c0 1.8-.7 3.5-1.9 4.7s-2.9 1.9-4.7 1.9h-2.9c-3.7 0-6.7-3-6.7-6.7V27.9c0-3.7 3-6.7 6.7-6.7h2.9c3.7 0 6.7 3 6.7 6.7v15.7z"/><path fill=#fff d="M35.3 26.2c-.4 0-.7.3-.7.7v6.4c0 .4.3.7.7.7s.7-.3.7-.7v-6.4c0-.4-.3-.7-.7-.7zM31.5 9.5l3-3v5.6c0 .4.3.7.7.7s.7-.3.7-.7V6.4l3.2 3.2c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-4.3-4.3c-.3-.3-.8-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1 .3.2.7.2 1-.1zm7.5 52l-3 3v-5.6c0-.4-.3-.7-.7-.7s-.7.3-.7.7v5.8l-3.2-3.2c-.3-.3-.7-.3-1 0-.3.3-.3.7 0 1l4.3 4.3c.1.2.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1-.3-.3-.7-.3-1 0zM12.1 34.2H6.3L9.4 31c.3-.3.3-.7 0-1-.3-.3-.7-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-3-3H12c.4 0 .7-.3.7-.7s-.2-.7-.6-.7zm54.7.1L62.5 30c-.3-.3-.7-.3-1 0-.3.3-.3.7 0 1l3 3h-5.6c-.4 0-.7.3-.7.7s.3.7.7.7h5.8l-3.2 3.2c-.3.3-.3.7 0 1 .1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1z"/></svg>'),e.put("src/resources/svg/tutorial-mouse-left.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 71 71" width=100 height=100><circle fill=#010202 cx=35.5 cy=35.5 r=35.2 opacity=.6 /><path fill=#fff d="M33.7 26.2c-1-1.9-2.7-3.3-4.8-4s-4.3-.5-6.2.5L20.1 24c-4 2.1-5.6 7-3.5 11l7.2 13.9c1.4 2.8 4.3 4.4 7.3 4.4 1.2 0 2.5-.3 3.7-.9l2.6-1.3c1.9-1 3.3-2.7 4-4.8s.5-4.3-.5-6.2l-7.2-13.9zM40 45.8c-.6 1.7-1.7 3.1-3.3 3.9L34.1 51c-3.4 1.6-7.4.3-9-2.9l-7.2-13.9c-1.7-3.2-.4-7.3 2.9-9l2.6-1.3c.9-.5 2-.7 3-.7.7 0 1.4.1 2.1.3 1.7.6 3.1 1.7 3.9 3.3l7.2 13.9c.8 1.6 1 3.4.4 5.1z"/><path fill=#fff d="M25.3 29.3c-.2-.4-.6-.5-1-.3s-.5.6-.3 1l3 5.7c.1.2.4.4.6.4.1 0 .2 0 .3-.1.4-.2.5-.6.3-1l-2.9-5.7zm6.3-19.8l3-3v5.6c0 .4.3.7.7.7s.7-.3.7-.7V6.4l3.2 3.2c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-4.3-4.3c-.3-.3-.7-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1 .2.2.7.2 1-.1zm7.4 52l-3 3v-5.6c0-.4-.3-.7-.7-.7s-.7.3-.7.7v5.8l-3.2-3.2c-.3-.3-.7-.3-1 0s-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1-.2-.3-.7-.3-1 0zm27.9-27.2L62.6 30c-.3-.3-.7-.3-1 0s-.3.7 0 1l3.1 3.1H59c-.4 0-.7.3-.7.7s.3.7.7.7h5.7l-3.1 3.1c-.3.3-.3.7 0 1 .1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.2-.3.3-.7 0-1z"/><path fill=#fff opacity=.5 d="M12.2 34H6.5l3-3c.3-.3.3-.7 0-1s-.7-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-3.2-3.2h5.8c.4 0 .7-.3.7-.7s-.2-.7-.6-.7z"/><g opacity=.34 fill=#fff><path d="M19.9 39.4L18.1 36c-2.3-4.3-.7-9.7 3.6-12l6.1 11.3-7.9 4.1z"/><path d="M19.7 39.9l-2-3.7c-1.2-2.2-1.4-4.7-.7-7 .7-2.4 2.3-4.3 4.5-5.5l.3-.2 6.4 11.9-8.5 4.5zm1.8-15.4c-1.8 1.1-3.2 2.8-3.8 4.9-.7 2.2-.4 4.5.6 6.5l1.6 3.1 7.3-3.8-5.7-10.7z"/></g></svg>'),e.put("src/resources/svg/tutorial-mouse-right.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 71 71" width=100 height=100><circle fill=#010202 cx=35.5 cy=35.5 r=35.2 opacity=.6 /><path fill=#fff d="M50.9 24l-2.6-1.3c-3.9-2.1-8.9-.5-11 3.5l-7.2 13.9c-1 1.9-1.2 4.1-.5 6.2.7 2.1 2.1 3.8 4 4.8l2.6 1.3c1.2.6 2.4.9 3.7.9 3 0 5.9-1.6 7.3-4.4L54.4 35c2.1-3.9.6-8.9-3.5-11zm2.3 10.3L46 48.2c-1.7 3.2-5.8 4.5-9 2.9l-2.6-1.3c-1.6-.8-2.8-2.2-3.3-3.9-.6-1.7-.4-3.5.4-5.1l7.2-13.9c1.2-2.3 3.6-3.6 6-3.6 1 0 2.1.2 3 .8l2.6 1.3c3.3 1.6 4.6 5.7 2.9 8.9z"/><path fill=#fff d="M46.6 28.9c-.4-.2-.8 0-1 .3l-2.9 5.7c-.2.4 0 .8.3 1 .1.1.2.1.3.1.3 0 .5-.1.7-.4l2.9-5.7c.2-.4.1-.8-.3-1zM31.5 9.5l3-3v5.7c0 .4.3.7.7.7s.7-.3.7-.7V6.3l3.2 3.2c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-4.3-4.3c-.3-.3-.7-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1 .3.2.7.2 1 0zm7.6 52l-3 3v-5.7c0-.4-.3-.7-.7-.7s-.7.3-.7.7v5.9l-3.2-3.2c-.3-.3-.7-.3-1 0s-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1-.3-.2-.7-.2-1 0zM12.2 34.1H6.3L9.4 31c.3-.3.3-.7 0-1s-.7-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-3-3h5.7c.4 0 .7-.3.7-.7s-.2-.8-.6-.8z"/><path fill=#fff opacity=.34 d="M66.9 34.3L62.6 30c-.3-.3-.7-.3-1 0s-.3.7 0 1l3 3h-5.7c-.4 0-.7.3-.7.7s.3.7.7.7h5.9l-3.2 3.2c-.3.3-.3.7 0 1 .1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.2.3-.7 0-1z"/><path fill=#fff stroke=#fff stroke-width=.729 d="M35.4 31.1l1.8-3.4c2.2-4.3 7.6-6.1 12-3.8l-5.9 11.4-7.9-4.2z" opacity=.34 /></svg>'),e.put("src/resources/svg/tutorial-phone-center.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 71 71" width=100 height=100><circle fill=#010202 cx=35.5 cy=35.5 r=35.2 opacity=.6 /><path fill=#fff d="M31.5 9.4l2.9-2.9v5.6c0 .4.3.7.7.7s.7-.3.7-.7V6.3L39 9.5c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-4.3-4.3c-.3-.3-.7-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1 .4.2.8.2 1.1-.1zM39 61.6l-3 2.9v-5.6c0-.4-.3-.7-.7-.7s-.7.3-.7.7v5.8l-3.1-3.2c-.3-.3-.7-.3-1 0-.3.3-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1-.4-.2-.8-.2-1.1.1zM11.3 34.9H5.4l3.2-3.2c.3-.3.3-.7 0-1-.3-.3-.7-.3-1 0L3.2 35c-.3.3-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-3-3h5.7c.4 0 .7-.3.7-.7s-.2-.7-.6-.7zm56.4.2l-4.3-4.3c-.3-.3-.8-.3-1 0-.3.3-.3.7 0 1l3 3h-5.7c-.4 0-.7.3-.7.7s.3.7.7.7h5.9l-3.2 3.2c-.3.3-.3.7 0 1 .1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1zM50 25.3H20.4c-.9 0-1.6.7-1.6 1.6v17.8c0 .9.7 1.6 1.6 1.6H50c.9 0 1.6-.8 1.6-1.6V26.9c0-.9-.7-1.6-1.6-1.6zm-5.3 1.2V45h-20V26.5h20zM20 44.7V26.9c0-.2.1-.4.4-.4h3V45h-3c-.2.1-.4-.2-.4-.3zm30.4 0c0 .1-.2.4-.4.4h-4.1V26.5H50c.2 0 .4.1.4.4v17.8z"/><circle fill=#fff cx=48.1 cy=35.8 r=.8 /><path fill=#fff d="M21.4 33.8c-.4 0-.6.3-.6.6v2.8c0 .4.3.6.6.6s.6-.3.6-.6v-2.8c0-.4-.2-.6-.6-.6z"/></svg>'),e.put("src/resources/svg/tutorial-phone-left.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 71 71" width=100 height=100><circle fill=#010202 cx=35.5 cy=35.5 r=35.2 opacity=.6 /><path fill=#fff d="M31.5 9.3l3-2.9v5.7c0 .4.3.7.7.7s.7-.3.7-.7V6.2l3.2 3.2c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1L35.8 4c-.3-.3-.8-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1s.7.3 1 0zM39 61.6l-3 2.9v-5.7c0-.4-.3-.7-.7-.7s-.7.3-.7.7v5.9l-3.2-3.2c-.3-.3-.7-.3-1 0s-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1-.3-.2-.7-.2-1 .1zM67.7 35l-4.3-4.3c-.3-.3-.7-.3-1 0s-.3.7 0 1l3.1 3.1h-5.8c-.4 0-.7.3-.7.7s.3.7.7.7h5.8l-3.1 3.1c-.3.3-.3.7 0 1 .1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1z"/><path fill=#fff opacity=.5 d="M11.3 34.7H5.6l3-3c.3-.3.3-.7 0-1s-.7-.3-1 0L3.2 35c-.3.3-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-3.1-3.2h5.9c.4 0 .7-.3.7-.7s-.3-.7-.7-.7z"/><path fill=#fff d="M44.7 25.2H15.1c-.9 0-1.6.8-1.6 1.6v17.8c0 .9.7 1.6 1.6 1.6h29.6c.9 0 1.6-.7 1.6-1.6V26.8c0-.9-.7-1.6-1.6-1.6zm-4.2 1.2V45H20.3V26.4h20.2zM14.7 44.6V26.8c0-.1.2-.4.4-.4h4V45h-4c-.2 0-.4-.2-.4-.4zm30.4 0c0 .2-.2.4-.4.4h-3V26.4h3c.1 0 .4.2.4.4v17.8z"/><circle fill=#fff cx=16.9 cy=35.7 r=.8 /><path fill=#fff d="M43.6 33.8c-.4 0-.6.3-.6.6v2.7c0 .4.3.6.6.6s.6-.3.6-.6v-2.7c0-.4-.2-.6-.6-.6z"/></svg>'),e.put("src/resources/svg/tutorial-phone-right.svg",'<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 71 71" width=100 height=100><circle fill=#010202 cx=35.5 cy=35.5 r=35.2 opacity=.6 /><path fill=#fff d="M31.5 9.4l3-3V12c0 .4.3.7.7.7s.8-.3.8-.7V6.3l3 3c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1L35.8 4c-.3-.3-.8-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1s.7.3 1 .1zm7.6 52.2l-2.9 2.9v-5.7c0-.4-.3-.7-.7-.7s-.7.3-.7.7v5.9l-3.2-3.2c-.3-.3-.7-.3-1 0s-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.3-.3.3-.7 0-1-.4-.2-.8-.2-1.1.1zM11.4 34.8H5.5l3.1-3.2c.3-.3.3-.7 0-1s-.7-.3-1 0l-4.3 4.3c-.3.3-.3.7 0 1l4.3 4.3c.1.1.3.2.5.2s.4-.1.5-.2c.3-.3.3-.7 0-1l-3-3h5.7c.4 0 .7-.3.7-.7s-.2-.7-.6-.7z"/><path fill=#fff opacity=.5 d="M67.7 35l-4.3-4.3c-.3-.3-.7-.3-1 0s-.3.7 0 1l3 3h-5.6c-.4 0-.7.3-.7.7s.3.7.7.7h5.8l-3.1 3.2c-.3.3-.3.7 0 1 .1.1.3.2.5.2s.4-.1.5-.2l4.3-4.3c.2-.2.2-.7-.1-1z"/><path fill=#fff d="M55.9 25.2H26.3c-.9 0-1.6.7-1.6 1.6v17.8c0 .9.7 1.6 1.6 1.6h29.6c.9 0 1.6-.8 1.6-1.6V26.8c0-.9-.7-1.6-1.6-1.6zm-5.2 1.3V45H30.5V26.5h20.2zM25.9 44.6V26.8c0-.2.1-.4.4-.4h3V45h-3c-.2 0-.4-.2-.4-.4zm30.4 0c0 .1-.2.4-.4.4h-4V26.5h4c.2 0 .4.1.4.4v17.7z"/><circle fill=#fff cx=54 cy=35.7 r=.8 /><path fill=#fff d="M27.3 33.7c-.4 0-.6.3-.6.6v2.8c0 .4.3.6.6.6s.6-.3.6-.6v-2.8c0-.3-.2-.6-.6-.6z"/></svg>'),e.put("src/resources/svg/update-browser.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 64 64" style="enable-background:new 0 0 64 64" xml:space=preserve><style>.st0{fill:none;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g><path class=st0 d="M51.892,27.467v26.3c0,0.444-0.364,0.808-0.808,0.808H4.231c-0.444,0-0.808-0.364-0.808-0.808V17.71\n\t\tc0-0.444,0.364-0.808,0.808-0.808h36.42"/><line class=st0 x1=15.146 y1=23.72 x2=37.213 y2=23.72 /><circle cx=9.583 cy=23.72 r=2.218 /><g><line class=st0 x1=43.279 y1=26.723 x2=60.576 y2=9.425 /><line class=st0 x1=60.576 y1=26.723 x2=43.279 y2=9.425 /></g><line class=st0 x1=4.433 y1=30.542 x2=37.554 y2=30.542 /></g></svg>'),e.put("src/resources/svg/volume-muted.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stVolumeMute{fill:none;stroke:#fff;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g><path class=stVolumeMute d=M31.9,19.5c0.7,0,1.3,0.1,1.8,0.3c1.8,0.7,3.1,2.3,3.1,4.2c0,1.9-1.3,3.5-3.1,4.1c-0.6,0.2-1.3,0.3-1.9,0.3 /><path class=stVolumeMute d=M31.1,20.1v-7.8V8.5l-15.2,8H8.6v15.2h7.3l15.2,8v-3.9V28C31.1,27.9,31.1,20.1,31.1,20.1z /><line class=stVolumeMute x1=2.7 y1=37 x2=40.8 y2=9.4 /></g></svg>'),e.put("src/resources/svg/volume-scrubber.svg",'<svg viewBox="0 0 100 100"><circle cx=50 cy=50 r=50 fill=#fff /></svg>'),e.put("src/resources/svg/volume-slider-bg.svg","<svg height=1 width=200><rect width=200 height=2 style=fill:#fff></rect></svg>"),e.put("src/resources/svg/volume-slider-complete.svg",'<svg xmlns=http://www.w3.org/2000/svg><path stroke-width=2 stroke=#fff d="M1 0v10M4 0v10M7 0v10M10 0v10M13 0v10M16 0v10M19 0v10M22 0v10M25 0v10M28 0v10M31 0v10M34 0v10M37 0v10M40 0v10M43 0v10M46 0v10M49 0v10"/></svg>'),e.put("src/resources/svg/volume.svg",'<?xml version="1.0" encoding="utf-8"?> <svg version=1.1 id=Calque_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 48 48" style="enable-background:new 0 0 48 48" xml:space=preserve><style>.stVolume{fill:none;stroke:#fff;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g><path class=stVolume d=M32,19.5c0.7,0,1.3,0.1,1.9,0.3c1.8,0.7,3.1,2.3,3.1,4.2c0,1.9-1.3,3.5-3.1,4.1c-0.6,0.2-1.3,0.3-1.9,0.3 /><path class=stVolume d=M31.1,20.1v-7.8V8.5l-15.2,8H8.6v15.2h7.3l15.2,8v-3.9v-7.8C31.1,27.9,31.1,20.1,31.1,20.1z /><path class=stVolume d=M38.1,11.4c4.2,2.3,7.2,7.1,7.2,12.6c0,5.5-2.9,10.3-7.1,12.6 /></g></svg>')}]);